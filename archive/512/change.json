{"project":"joyent/sdc-designation","branch":"master","id":"I2bfdca6ac46fa8b5d0ec05c88414d7ecb4ee8d42","number":"512","subject":"DAPI-324 - Add support for external functions to pipeline. Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"url":"https://cr.joyent.us/512","commitMessage":"DAPI-324 - Add support for external functions to pipeline.\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1474459176,"lastUpdated":1482389468,"open":false,"status":"MERGED","comments":[{"timestamp":1474459176,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 1."},{"timestamp":1474459213,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1474492566,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1474493629,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1477301854,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 2."},{"timestamp":1477354627,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1478291650,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(2 comments)\n\nThis feedback is from way back... but apparently left as drafts only."},{"timestamp":1478291713,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\nMarsell,\nI don\u0027t understand how the changes in patchset 2 related to DAPI-324.\nE.g. this one: https://cr.joyent.us/#/c/512/1..2/lib/algorithms/score-current-platform.js"},{"timestamp":1479295627,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 3."},{"timestamp":1479295662,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1479295696,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 3:\n\n\u003e I don\u0027t understand how the changes in patchset 2 related to DAPI-324.\n\nYou\u0027re right. This crept in from a different commit. Thanks. :)"},{"timestamp":1479295812,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1479359446,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 4."},{"timestamp":1479359477,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1479951605,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4:\n\nMarsell,\nThe code looks fine (I didn\u0027t go with a fine tooth comb). I assume the test suite runs for you. :)\n\nWhat I\u0027m missing is how this answers the ticket title: \"Add support for external functions to pipeline.\"   Is the idea just that this changes the signature to allow another change to add other fields to the `opts` passed to each alg?"},{"timestamp":1479953544,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 4:\n\n\u003e Is the idea just that this\n \u003e changes the signature to allow another change to add other fields\n \u003e to the `opts` passed to each alg?\n\nYou got it. :)\n\nI didn\u0027t want to fill DAPI-325 with a pile of noise, so I split the changes into two tickets: one changing the signature, and the other adding the actual code for calling external services."},{"timestamp":1480007005,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1"},{"timestamp":1480499851,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 5: Patch Set 4 was rebased."},{"timestamp":1480499881,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5:\n\n\"make check\" passed ok"},{"timestamp":1480532203,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 5:\n\nI don\u0027t know what the \"including parents\" means in the \"Submit including parents\". :)"},{"timestamp":1480588817,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 5:\n\n\u003e I don\u0027t know what the \"including parents\" means in the \"Submit\n \u003e including parents\". :)\n\nThanks for the CR!\n\nAnd now I\u0027m nervous to push that button. It\u0027s new to me too... :p\n\nI suspect it\u0027s referring to CR 504."},{"timestamp":1482229108,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 6."},{"timestamp":1482229133,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1482229314,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 7."},{"timestamp":1482229450,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1482357686,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"Patch Set 7: Code-Review+1 Integration-Approval+1"},{"timestamp":1482389468,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Marsell Kukuljevic"}],"currentPatchSet":{"number":"7","revision":"2bfdca6ac46fa8b5d0ec05c88414d7ecb4ee8d42","parents":["3ac425117c8989f2c9f64557b00c1d51db27efbb"],"ref":"refs/changes/12/512/7","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1482229314,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482229450,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1482357686,"by":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1482357686,"by":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"}},{"type":"SUBM","value":"1","grantedOn":1482389468,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"bin/sim.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/algorithms/calculate-server-unreserved.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/calculate-ticketed-vms.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-capness.js","type":"MODIFIED","insertions":5,"deletions":-7},{"file":"lib/algorithms/hard-filter-headnode.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-invalid-servers.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/algorithms/hard-filter-large-servers.js","type":"MODIFIED","insertions":6,"deletions":-8},{"file":"lib/algorithms/hard-filter-locality-hints.js","type":"MODIFIED","insertions":8,"deletions":-10},{"file":"lib/algorithms/hard-filter-min-cpu.js","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"lib/algorithms/hard-filter-min-disk.js","type":"MODIFIED","insertions":12,"deletions":-11},{"file":"lib/algorithms/hard-filter-min-ram.js","type":"MODIFIED","insertions":10,"deletions":-10},{"file":"lib/algorithms/hard-filter-overprovision-ratios.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-owners-servers.js","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"lib/algorithms/hard-filter-platform-versions.js","type":"MODIFIED","insertions":11,"deletions":-12},{"file":"lib/algorithms/hard-filter-reserved.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/hard-filter-reservoir.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/hard-filter-running.js","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"lib/algorithms/hard-filter-setup.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/hard-filter-sick-servers.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/hard-filter-traits.js","type":"MODIFIED","insertions":10,"deletions":-10},{"file":"lib/algorithms/hard-filter-vlans.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-vm-count.js","type":"MODIFIED","insertions":10,"deletions":-9},{"file":"lib/algorithms/hard-filter-volumes-from.js","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"lib/algorithms/identity.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/override-overprovisioning.js","type":"MODIFIED","insertions":7,"deletions":-8},{"file":"lib/algorithms/score-current-platform.js","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"lib/algorithms/score-next-reboot.js","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"lib/algorithms/score-num-owner-zones.js","type":"MODIFIED","insertions":13,"deletions":-13},{"file":"lib/algorithms/score-uniform-random.js","type":"MODIFIED","insertions":11,"deletions":-12},{"file":"lib/algorithms/score-unreserved-disk.js","type":"MODIFIED","insertions":12,"deletions":-11},{"file":"lib/algorithms/score-unreserved-ram.js","type":"MODIFIED","insertions":12,"deletions":-13},{"file":"lib/algorithms/soft-filter-locality-hints.js","type":"MODIFIED","insertions":11,"deletions":-11},{"file":"lib/allocator.js","type":"MODIFIED","insertions":33,"deletions":-22},{"file":"test/algorithms/calculate-server-unreserved.test.js","type":"MODIFIED","insertions":5,"deletions":-12},{"file":"test/algorithms/calculate-ticketed-vms.test.js","type":"MODIFIED","insertions":7,"deletions":-10},{"file":"test/algorithms/common.js","type":"MODIFIED","insertions":36,"deletions":-12},{"file":"test/algorithms/hard-filter-capness.test.js","type":"MODIFIED","insertions":7,"deletions":-22},{"file":"test/algorithms/hard-filter-headnode.test.js","type":"MODIFIED","insertions":7,"deletions":-15},{"file":"test/algorithms/hard-filter-invalid-servers.test.js","type":"MODIFIED","insertions":5,"deletions":-13},{"file":"test/algorithms/hard-filter-large-servers.test.js","type":"MODIFIED","insertions":7,"deletions":-15},{"file":"test/algorithms/hard-filter-locality-hints.test.js","type":"MODIFIED","insertions":72,"deletions":-49},{"file":"test/algorithms/hard-filter-min-cpu.test.js","type":"MODIFIED","insertions":18,"deletions":-19},{"file":"test/algorithms/hard-filter-min-disk.test.js","type":"MODIFIED","insertions":23,"deletions":-24},{"file":"test/algorithms/hard-filter-min-ram.test.js","type":"MODIFIED","insertions":21,"deletions":-23},{"file":"test/algorithms/hard-filter-overprovision-ratios.test.js","type":"MODIFIED","insertions":9,"deletions":-16},{"file":"test/algorithms/hard-filter-owners-servers.js","type":"MODIFIED","insertions":13,"deletions":-19},{"file":"test/algorithms/hard-filter-platform-versions.test.js","type":"MODIFIED","insertions":31,"deletions":-44},{"file":"test/algorithms/hard-filter-reserved.test.js","type":"MODIFIED","insertions":5,"deletions":-13},{"file":"test/algorithms/hard-filter-reservoir.test.js","type":"MODIFIED","insertions":5,"deletions":-13},{"file":"test/algorithms/hard-filter-running.test.js","type":"MODIFIED","insertions":7,"deletions":-22},{"file":"test/algorithms/hard-filter-setup.test.js","type":"MODIFIED","insertions":7,"deletions":-17},{"file":"test/algorithms/hard-filter-sick-servers.test.js","type":"MODIFIED","insertions":3,"deletions":-9},{"file":"test/algorithms/hard-filter-traits.test.js","type":"MODIFIED","insertions":136,"deletions":-73},{"file":"test/algorithms/hard-filter-vlans.test.js","type":"MODIFIED","insertions":5,"deletions":-10},{"file":"test/algorithms/hard-filter-vm-count.test.js","type":"MODIFIED","insertions":9,"deletions":-15},{"file":"test/algorithms/hard-filter-volumes-from.test.js","type":"MODIFIED","insertions":11,"deletions":-9},{"file":"test/algorithms/identity.test.js","type":"MODIFIED","insertions":3,"deletions":-10},{"file":"test/algorithms/override-overprovisioning.test.js","type":"MODIFIED","insertions":43,"deletions":-37},{"file":"test/algorithms/score-current-platform.test.js","type":"MODIFIED","insertions":18,"deletions":-23},{"file":"test/algorithms/score-next-reboot.test.js","type":"MODIFIED","insertions":9,"deletions":-19},{"file":"test/algorithms/score-num-owner-zones.test.js","type":"MODIFIED","insertions":34,"deletions":-39},{"file":"test/algorithms/score-uniform-random.test.js","type":"MODIFIED","insertions":26,"deletions":-20},{"file":"test/algorithms/score-unreserved-disk.test.js","type":"MODIFIED","insertions":15,"deletions":-30},{"file":"test/algorithms/score-unreserved-ram.test.js","type":"MODIFIED","insertions":23,"deletions":-38},{"file":"test/algorithms/soft-filter-locality-hints.test.js","type":"MODIFIED","insertions":48,"deletions":-42},{"file":"test/allocator.test.js","type":"MODIFIED","insertions":70,"deletions":-146},{"file":"test/common.js","type":"MODIFIED","insertions":50,"deletions":-1},{"file":"test/integration.test.js","type":"MODIFIED","insertions":7,"deletions":-60}],"sizeInsertions":1078,"sizeDeletions":-1221},"patchSets":[{"number":"1","revision":"d8d5616caa9e546cfbb4b4df21ce69f321af5192","parents":["00a7a97dcb7a6b260ce879559c0f27fd9f6ee27b"],"ref":"refs/changes/12/512/1","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1474459176,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1474459213,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/allocator.js","line":18,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"why \u0027sys\u0027 instead of a more common \u0027opts\u0027?"},{"file":"lib/allocator.js","line":18,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"I don\u0027t think of them as options -- they\u0027re mandatory for the system to work.\n\nI don\u0027t mind either way though."},{"file":"lib/allocator.js","line":18,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I understand the \"but they aren\u0027t options\" and required-options feels odd. There is a lot of precedent for that tho: using `function (opts, cb)` as the signature even if some of the opts members are required. Perhaps `args`, used, e.g. in node-vasync and other places?\n\nArguably you could just change the signature to `function (args, cb)` and require args.servers and args.constraints."},{"file":"lib/allocator.js","line":18,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"In the end, I went with function (servers, opts, cb). servers and cb are there because every plugin needs them. Everything else went into opts."},{"file":"lib/allocator.js","line":80,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Please add a second arg with the var name, at least for newly added `assert.\u003ctype\u003e(...)` calls. Compare:\n\n    \u003e var ap \u003d require(\u0027assert-plus\u0027);\n    undefined\n    \u003e ap.object(42)\n    AssertionError: undefined (object) is required\n        ...\n    \u003e ap.object(42, \u0027sys\u0027)\n    AssertionError: sys (object) is required\n        ..."},{"file":"lib/allocator.js","line":80,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"I actively dislike the second args. They make the source code even noisier without adding much due to line numbers in the stack trace. I\u0027d rather not."},{"file":"lib/allocator.js","line":80,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I thkn we are okay with the noise. \n\n    [15:25:16 trentm@danger0:~/all-joy-repos]\n    $ ag assert.object | grep -v node_modules | grep \u0027,\u0027 | wc -l\n        3104\n    [15:25:46 trentm@danger0:~/all-joy-repos]\n    $ ag assert.object | grep -v node_modules | grep -v \u0027,\u0027 | wc -l\n         128\n\nThe second string \u0027name\u0027 arg is an expected arg with assert-plus methods."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"bin/sim.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/algorithms/calculate-server-unreserved.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/calculate-ticketed-vms.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-capness.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-headnode.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-invalid-servers.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/algorithms/hard-filter-large-servers.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-locality-hints.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-min-cpu.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-min-disk.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-min-ram.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-overprovision-ratios.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-owners-servers.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/algorithms/hard-filter-platform-versions.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-reserved.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-reservoir.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-running.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/algorithms/hard-filter-setup.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-sick-servers.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-traits.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/algorithms/hard-filter-vlans.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-vm-count.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/algorithms/hard-filter-volumes-from.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/algorithms/identity.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/override-overprovisioning.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/score-current-platform.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/algorithms/score-next-reboot.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/algorithms/score-num-owner-zones.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/algorithms/score-uniform-random.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/algorithms/score-unreserved-disk.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/score-unreserved-ram.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/algorithms/soft-filter-locality-hints.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/allocator.js","type":"MODIFIED","insertions":28,"deletions":-19},{"file":"test/algorithms/calculate-server-unreserved.test.js","type":"MODIFIED","insertions":4,"deletions":-6},{"file":"test/algorithms/calculate-ticketed-vms.test.js","type":"MODIFIED","insertions":5,"deletions":-7},{"file":"test/algorithms/common.js","type":"MODIFIED","insertions":15,"deletions":-3},{"file":"test/algorithms/hard-filter-capness.test.js","type":"MODIFIED","insertions":1,"deletions":-6},{"file":"test/algorithms/hard-filter-headnode.test.js","type":"MODIFIED","insertions":1,"deletions":-6},{"file":"test/algorithms/hard-filter-invalid-servers.test.js","type":"MODIFIED","insertions":1,"deletions":-8},{"file":"test/algorithms/hard-filter-large-servers.test.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"test/algorithms/hard-filter-locality-hints.test.js","type":"MODIFIED","insertions":4,"deletions":-8},{"file":"test/algorithms/hard-filter-min-cpu.test.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"test/algorithms/hard-filter-min-disk.test.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"test/algorithms/hard-filter-min-ram.test.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"test/algorithms/hard-filter-overprovision-ratios.test.js","type":"MODIFIED","insertions":1,"deletions":-6},{"file":"test/algorithms/hard-filter-owners-servers.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"test/algorithms/hard-filter-platform-versions.test.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"test/algorithms/hard-filter-reserved.test.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"test/algorithms/hard-filter-reservoir.test.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"test/algorithms/hard-filter-running.test.js","type":"MODIFIED","insertions":4,"deletions":-9},{"file":"test/algorithms/hard-filter-setup.test.js","type":"MODIFIED","insertions":4,"deletions":-9},{"file":"test/algorithms/hard-filter-sick-servers.test.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"test/algorithms/hard-filter-traits.test.js","type":"MODIFIED","insertions":1,"deletions":-6},{"file":"test/algorithms/hard-filter-vlans.test.js","type":"MODIFIED","insertions":4,"deletions":-6},{"file":"test/algorithms/hard-filter-vm-count.test.js","type":"MODIFIED","insertions":1,"deletions":-6},{"file":"test/algorithms/hard-filter-volumes-from.test.js","type":"MODIFIED","insertions":1,"deletions":-5},{"file":"test/algorithms/identity.test.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"test/algorithms/override-overprovisioning.test.js","type":"MODIFIED","insertions":8,"deletions":-11},{"file":"test/algorithms/score-current-platform.test.js","type":"MODIFIED","insertions":1,"deletions":-6},{"file":"test/algorithms/score-next-reboot.test.js","type":"MODIFIED","insertions":1,"deletions":-6},{"file":"test/algorithms/score-num-owner-zones.test.js","type":"MODIFIED","insertions":1,"deletions":-6},{"file":"test/algorithms/score-uniform-random.test.js","type":"MODIFIED","insertions":3,"deletions":-6},{"file":"test/algorithms/score-unreserved-disk.test.js","type":"MODIFIED","insertions":1,"deletions":-6},{"file":"test/algorithms/score-unreserved-ram.test.js","type":"MODIFIED","insertions":1,"deletions":-6},{"file":"test/algorithms/soft-filter-locality-hints.test.js","type":"MODIFIED","insertions":4,"deletions":-8},{"file":"test/allocator.test.js","type":"MODIFIED","insertions":59,"deletions":-115},{"file":"test/common.js","type":"MODIFIED","insertions":50,"deletions":-1},{"file":"test/integration.test.js","type":"MODIFIED","insertions":6,"deletions":-62}],"sizeInsertions":307,"sizeDeletions":-490},{"number":"2","revision":"3a81512e3effc3317f92a188471c9c1c54dade25","parents":["b89bf844d77c9d8e7ba15d0c3e32dd1a04974e91"],"ref":"refs/changes/12/512/2","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1477301854,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1477354627,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"bin/sim.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/algorithms/calculate-server-unreserved.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/calculate-ticketed-vms.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-capness.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-headnode.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-invalid-servers.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/algorithms/hard-filter-large-servers.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-locality-hints.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-min-cpu.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-min-disk.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-min-ram.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-overprovision-ratios.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-owners-servers.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/algorithms/hard-filter-platform-versions.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-reserved.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-reservoir.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-running.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/algorithms/hard-filter-setup.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-sick-servers.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-traits.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/algorithms/hard-filter-vlans.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/hard-filter-vm-count.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/algorithms/hard-filter-volumes-from.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/algorithms/identity.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/override-overprovisioning.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/score-current-platform.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/algorithms/score-next-reboot.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/algorithms/score-num-owner-zones.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/algorithms/score-uniform-random.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/algorithms/score-unreserved-disk.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/algorithms/score-unreserved-ram.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/algorithms/soft-filter-locality-hints.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/allocator.js","type":"MODIFIED","insertions":28,"deletions":-19},{"file":"test/algorithms/calculate-server-unreserved.test.js","type":"MODIFIED","insertions":4,"deletions":-6},{"file":"test/algorithms/calculate-ticketed-vms.test.js","type":"MODIFIED","insertions":5,"deletions":-7},{"file":"test/algorithms/common.js","type":"MODIFIED","insertions":15,"deletions":-3},{"file":"test/algorithms/hard-filter-capness.test.js","type":"MODIFIED","insertions":1,"deletions":-6},{"file":"test/algorithms/hard-filter-headnode.test.js","type":"MODIFIED","insertions":1,"deletions":-6},{"file":"test/algorithms/hard-filter-invalid-servers.test.js","type":"MODIFIED","insertions":1,"deletions":-8},{"file":"test/algorithms/hard-filter-large-servers.test.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"test/algorithms/hard-filter-locality-hints.test.js","type":"MODIFIED","insertions":4,"deletions":-8},{"file":"test/algorithms/hard-filter-min-cpu.test.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"test/algorithms/hard-filter-min-disk.test.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"test/algorithms/hard-filter-min-ram.test.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"test/algorithms/hard-filter-overprovision-ratios.test.js","type":"MODIFIED","insertions":1,"deletions":-6},{"file":"test/algorithms/hard-filter-owners-servers.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"test/algorithms/hard-filter-platform-versions.test.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"test/algorithms/hard-filter-reserved.test.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"test/algorithms/hard-filter-reservoir.test.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"test/algorithms/hard-filter-running.test.js","type":"MODIFIED","insertions":4,"deletions":-9},{"file":"test/algorithms/hard-filter-setup.test.js","type":"MODIFIED","insertions":4,"deletions":-9},{"file":"test/algorithms/hard-filter-sick-servers.test.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"test/algorithms/hard-filter-traits.test.js","type":"MODIFIED","insertions":1,"deletions":-6},{"file":"test/algorithms/hard-filter-vlans.test.js","type":"MODIFIED","insertions":4,"deletions":-6},{"file":"test/algorithms/hard-filter-vm-count.test.js","type":"MODIFIED","insertions":1,"deletions":-6},{"file":"test/algorithms/hard-filter-volumes-from.test.js","type":"MODIFIED","insertions":1,"deletions":-5},{"file":"test/algorithms/identity.test.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"test/algorithms/override-overprovisioning.test.js","type":"MODIFIED","insertions":8,"deletions":-11},{"file":"test/algorithms/score-current-platform.test.js","type":"MODIFIED","insertions":1,"deletions":-6},{"file":"test/algorithms/score-next-reboot.test.js","type":"MODIFIED","insertions":1,"deletions":-6},{"file":"test/algorithms/score-num-owner-zones.test.js","type":"MODIFIED","insertions":1,"deletions":-6},{"file":"test/algorithms/score-uniform-random.test.js","type":"MODIFIED","insertions":3,"deletions":-6},{"file":"test/algorithms/score-unreserved-disk.test.js","type":"MODIFIED","insertions":1,"deletions":-6},{"file":"test/algorithms/score-unreserved-ram.test.js","type":"MODIFIED","insertions":1,"deletions":-6},{"file":"test/algorithms/soft-filter-locality-hints.test.js","type":"MODIFIED","insertions":4,"deletions":-8},{"file":"test/allocator.test.js","type":"MODIFIED","insertions":59,"deletions":-115},{"file":"test/common.js","type":"MODIFIED","insertions":50,"deletions":-1},{"file":"test/integration.test.js","type":"MODIFIED","insertions":6,"deletions":-62}],"sizeInsertions":307,"sizeDeletions":-490},{"number":"3","revision":"5aba8f3c744e15c9655cad23277ed94779f0feda","parents":["4a3c5249c2a33951d3e0b5f56c1c5cc2067ca96f"],"ref":"refs/changes/12/512/3","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1479295627,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1479295662,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"bin/sim.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/algorithms/calculate-server-unreserved.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/calculate-ticketed-vms.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-capness.js","type":"MODIFIED","insertions":5,"deletions":-7},{"file":"lib/algorithms/hard-filter-headnode.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-invalid-servers.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/algorithms/hard-filter-large-servers.js","type":"MODIFIED","insertions":6,"deletions":-8},{"file":"lib/algorithms/hard-filter-locality-hints.js","type":"MODIFIED","insertions":8,"deletions":-10},{"file":"lib/algorithms/hard-filter-min-cpu.js","type":"MODIFIED","insertions":7,"deletions":-8},{"file":"lib/algorithms/hard-filter-min-disk.js","type":"MODIFIED","insertions":9,"deletions":-10},{"file":"lib/algorithms/hard-filter-min-ram.js","type":"MODIFIED","insertions":8,"deletions":-9},{"file":"lib/algorithms/hard-filter-overprovision-ratios.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-owners-servers.js","type":"MODIFIED","insertions":7,"deletions":-7},{"file":"lib/algorithms/hard-filter-platform-versions.js","type":"MODIFIED","insertions":8,"deletions":-9},{"file":"lib/algorithms/hard-filter-reserved.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/hard-filter-reservoir.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/hard-filter-running.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/algorithms/hard-filter-setup.js","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"lib/algorithms/hard-filter-sick-servers.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/hard-filter-traits.js","type":"MODIFIED","insertions":7,"deletions":-8},{"file":"lib/algorithms/hard-filter-vlans.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-vm-count.js","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"lib/algorithms/hard-filter-volumes-from.js","type":"MODIFIED","insertions":7,"deletions":-8},{"file":"lib/algorithms/identity.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/override-overprovisioning.js","type":"MODIFIED","insertions":6,"deletions":-7},{"file":"lib/algorithms/score-current-platform.js","type":"MODIFIED","insertions":6,"deletions":-7},{"file":"lib/algorithms/score-next-reboot.js","type":"MODIFIED","insertions":6,"deletions":-7},{"file":"lib/algorithms/score-num-owner-zones.js","type":"MODIFIED","insertions":10,"deletions":-11},{"file":"lib/algorithms/score-uniform-random.js","type":"MODIFIED","insertions":9,"deletions":-11},{"file":"lib/algorithms/score-unreserved-disk.js","type":"MODIFIED","insertions":11,"deletions":-6},{"file":"lib/algorithms/score-unreserved-ram.js","type":"MODIFIED","insertions":10,"deletions":-12},{"file":"lib/algorithms/soft-filter-locality-hints.js","type":"MODIFIED","insertions":9,"deletions":-10},{"file":"lib/allocator.js","type":"MODIFIED","insertions":33,"deletions":-22},{"file":"test/algorithms/calculate-server-unreserved.test.js","type":"MODIFIED","insertions":6,"deletions":-10},{"file":"test/algorithms/calculate-ticketed-vms.test.js","type":"MODIFIED","insertions":18,"deletions":-10},{"file":"test/algorithms/common.js","type":"MODIFIED","insertions":23,"deletions":-11},{"file":"test/algorithms/hard-filter-capness.test.js","type":"MODIFIED","insertions":7,"deletions":-22},{"file":"test/algorithms/hard-filter-headnode.test.js","type":"MODIFIED","insertions":7,"deletions":-15},{"file":"test/algorithms/hard-filter-invalid-servers.test.js","type":"MODIFIED","insertions":5,"deletions":-13},{"file":"test/algorithms/hard-filter-large-servers.test.js","type":"MODIFIED","insertions":7,"deletions":-15},{"file":"test/algorithms/hard-filter-locality-hints.test.js","type":"MODIFIED","insertions":72,"deletions":-49},{"file":"test/algorithms/hard-filter-min-cpu.test.js","type":"MODIFIED","insertions":18,"deletions":-19},{"file":"test/algorithms/hard-filter-min-disk.test.js","type":"MODIFIED","insertions":23,"deletions":-24},{"file":"test/algorithms/hard-filter-min-ram.test.js","type":"MODIFIED","insertions":21,"deletions":-23},{"file":"test/algorithms/hard-filter-overprovision-ratios.test.js","type":"MODIFIED","insertions":9,"deletions":-16},{"file":"test/algorithms/hard-filter-owners-servers.js","type":"MODIFIED","insertions":13,"deletions":-19},{"file":"test/algorithms/hard-filter-platform-versions.test.js","type":"MODIFIED","insertions":31,"deletions":-44},{"file":"test/algorithms/hard-filter-reserved.test.js","type":"MODIFIED","insertions":5,"deletions":-13},{"file":"test/algorithms/hard-filter-reservoir.test.js","type":"MODIFIED","insertions":5,"deletions":-13},{"file":"test/algorithms/hard-filter-running.test.js","type":"MODIFIED","insertions":9,"deletions":-19},{"file":"test/algorithms/hard-filter-setup.test.js","type":"MODIFIED","insertions":9,"deletions":-21},{"file":"test/algorithms/hard-filter-sick-servers.test.js","type":"MODIFIED","insertions":3,"deletions":-9},{"file":"test/algorithms/hard-filter-traits.test.js","type":"MODIFIED","insertions":136,"deletions":-73},{"file":"test/algorithms/hard-filter-vlans.test.js","type":"MODIFIED","insertions":13,"deletions":-9},{"file":"test/algorithms/hard-filter-vm-count.test.js","type":"MODIFIED","insertions":9,"deletions":-15},{"file":"test/algorithms/hard-filter-volumes-from.test.js","type":"MODIFIED","insertions":11,"deletions":-9},{"file":"test/algorithms/identity.test.js","type":"MODIFIED","insertions":3,"deletions":-10},{"file":"test/algorithms/override-overprovisioning.test.js","type":"MODIFIED","insertions":49,"deletions":-36},{"file":"test/algorithms/score-current-platform.test.js","type":"MODIFIED","insertions":20,"deletions":-14},{"file":"test/algorithms/score-next-reboot.test.js","type":"MODIFIED","insertions":9,"deletions":-18},{"file":"test/algorithms/score-num-owner-zones.test.js","type":"MODIFIED","insertions":34,"deletions":-39},{"file":"test/algorithms/score-uniform-random.test.js","type":"MODIFIED","insertions":27,"deletions":-20},{"file":"test/algorithms/score-unreserved-disk.test.js","type":"MODIFIED","insertions":15,"deletions":-30},{"file":"test/algorithms/score-unreserved-ram.test.js","type":"MODIFIED","insertions":23,"deletions":-38},{"file":"test/algorithms/soft-filter-locality-hints.test.js","type":"MODIFIED","insertions":50,"deletions":-41},{"file":"test/allocator.test.js","type":"MODIFIED","insertions":70,"deletions":-146},{"file":"test/common.js","type":"MODIFIED","insertions":50,"deletions":-1},{"file":"test/integration.test.js","type":"MODIFIED","insertions":7,"deletions":-60}],"sizeInsertions":1063,"sizeDeletions":-1179},{"number":"4","revision":"028e47515bb4961c6ca9435f77b8d85f74b21658","parents":["4a3c5249c2a33951d3e0b5f56c1c5cc2067ca96f"],"ref":"refs/changes/12/512/4","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1479359446,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1479359477,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480007005,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1480007005,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"bin/sim.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/algorithms/calculate-server-unreserved.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/calculate-ticketed-vms.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-capness.js","type":"MODIFIED","insertions":5,"deletions":-7},{"file":"lib/algorithms/hard-filter-headnode.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-invalid-servers.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/algorithms/hard-filter-large-servers.js","type":"MODIFIED","insertions":6,"deletions":-8},{"file":"lib/algorithms/hard-filter-locality-hints.js","type":"MODIFIED","insertions":8,"deletions":-10},{"file":"lib/algorithms/hard-filter-min-cpu.js","type":"MODIFIED","insertions":7,"deletions":-8},{"file":"lib/algorithms/hard-filter-min-disk.js","type":"MODIFIED","insertions":9,"deletions":-10},{"file":"lib/algorithms/hard-filter-min-ram.js","type":"MODIFIED","insertions":8,"deletions":-9},{"file":"lib/algorithms/hard-filter-overprovision-ratios.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-owners-servers.js","type":"MODIFIED","insertions":7,"deletions":-7},{"file":"lib/algorithms/hard-filter-platform-versions.js","type":"MODIFIED","insertions":8,"deletions":-9},{"file":"lib/algorithms/hard-filter-reserved.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/hard-filter-reservoir.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/hard-filter-running.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/algorithms/hard-filter-setup.js","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"lib/algorithms/hard-filter-sick-servers.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/hard-filter-traits.js","type":"MODIFIED","insertions":7,"deletions":-8},{"file":"lib/algorithms/hard-filter-vlans.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-vm-count.js","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"lib/algorithms/hard-filter-volumes-from.js","type":"MODIFIED","insertions":7,"deletions":-8},{"file":"lib/algorithms/identity.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/override-overprovisioning.js","type":"MODIFIED","insertions":6,"deletions":-7},{"file":"lib/algorithms/score-current-platform.js","type":"MODIFIED","insertions":6,"deletions":-7},{"file":"lib/algorithms/score-next-reboot.js","type":"MODIFIED","insertions":6,"deletions":-7},{"file":"lib/algorithms/score-num-owner-zones.js","type":"MODIFIED","insertions":10,"deletions":-11},{"file":"lib/algorithms/score-uniform-random.js","type":"MODIFIED","insertions":9,"deletions":-11},{"file":"lib/algorithms/score-unreserved-disk.js","type":"MODIFIED","insertions":11,"deletions":-6},{"file":"lib/algorithms/score-unreserved-ram.js","type":"MODIFIED","insertions":10,"deletions":-12},{"file":"lib/algorithms/soft-filter-locality-hints.js","type":"MODIFIED","insertions":9,"deletions":-10},{"file":"lib/allocator.js","type":"MODIFIED","insertions":33,"deletions":-22},{"file":"test/algorithms/calculate-server-unreserved.test.js","type":"MODIFIED","insertions":5,"deletions":-12},{"file":"test/algorithms/calculate-ticketed-vms.test.js","type":"MODIFIED","insertions":7,"deletions":-10},{"file":"test/algorithms/common.js","type":"MODIFIED","insertions":36,"deletions":-12},{"file":"test/algorithms/hard-filter-capness.test.js","type":"MODIFIED","insertions":7,"deletions":-22},{"file":"test/algorithms/hard-filter-headnode.test.js","type":"MODIFIED","insertions":7,"deletions":-15},{"file":"test/algorithms/hard-filter-invalid-servers.test.js","type":"MODIFIED","insertions":5,"deletions":-13},{"file":"test/algorithms/hard-filter-large-servers.test.js","type":"MODIFIED","insertions":7,"deletions":-15},{"file":"test/algorithms/hard-filter-locality-hints.test.js","type":"MODIFIED","insertions":72,"deletions":-49},{"file":"test/algorithms/hard-filter-min-cpu.test.js","type":"MODIFIED","insertions":18,"deletions":-19},{"file":"test/algorithms/hard-filter-min-disk.test.js","type":"MODIFIED","insertions":23,"deletions":-24},{"file":"test/algorithms/hard-filter-min-ram.test.js","type":"MODIFIED","insertions":21,"deletions":-23},{"file":"test/algorithms/hard-filter-overprovision-ratios.test.js","type":"MODIFIED","insertions":9,"deletions":-16},{"file":"test/algorithms/hard-filter-owners-servers.js","type":"MODIFIED","insertions":13,"deletions":-19},{"file":"test/algorithms/hard-filter-platform-versions.test.js","type":"MODIFIED","insertions":31,"deletions":-44},{"file":"test/algorithms/hard-filter-reserved.test.js","type":"MODIFIED","insertions":5,"deletions":-13},{"file":"test/algorithms/hard-filter-reservoir.test.js","type":"MODIFIED","insertions":5,"deletions":-13},{"file":"test/algorithms/hard-filter-running.test.js","type":"MODIFIED","insertions":9,"deletions":-19},{"file":"test/algorithms/hard-filter-setup.test.js","type":"MODIFIED","insertions":9,"deletions":-21},{"file":"test/algorithms/hard-filter-sick-servers.test.js","type":"MODIFIED","insertions":3,"deletions":-9},{"file":"test/algorithms/hard-filter-traits.test.js","type":"MODIFIED","insertions":136,"deletions":-73},{"file":"test/algorithms/hard-filter-vlans.test.js","type":"MODIFIED","insertions":5,"deletions":-10},{"file":"test/algorithms/hard-filter-vm-count.test.js","type":"MODIFIED","insertions":9,"deletions":-15},{"file":"test/algorithms/hard-filter-volumes-from.test.js","type":"MODIFIED","insertions":11,"deletions":-9},{"file":"test/algorithms/identity.test.js","type":"MODIFIED","insertions":3,"deletions":-10},{"file":"test/algorithms/override-overprovisioning.test.js","type":"MODIFIED","insertions":43,"deletions":-37},{"file":"test/algorithms/score-current-platform.test.js","type":"MODIFIED","insertions":16,"deletions":-21},{"file":"test/algorithms/score-next-reboot.test.js","type":"MODIFIED","insertions":9,"deletions":-18},{"file":"test/algorithms/score-num-owner-zones.test.js","type":"MODIFIED","insertions":34,"deletions":-39},{"file":"test/algorithms/score-uniform-random.test.js","type":"MODIFIED","insertions":26,"deletions":-20},{"file":"test/algorithms/score-unreserved-disk.test.js","type":"MODIFIED","insertions":15,"deletions":-30},{"file":"test/algorithms/score-unreserved-ram.test.js","type":"MODIFIED","insertions":23,"deletions":-38},{"file":"test/algorithms/soft-filter-locality-hints.test.js","type":"MODIFIED","insertions":48,"deletions":-42},{"file":"test/allocator.test.js","type":"MODIFIED","insertions":70,"deletions":-146},{"file":"test/common.js","type":"MODIFIED","insertions":50,"deletions":-1},{"file":"test/integration.test.js","type":"MODIFIED","insertions":7,"deletions":-60}],"sizeInsertions":1043,"sizeDeletions":-1192},{"number":"5","revision":"96e30943385c535f082f1e32b47cb61090a23482","parents":["9bc21b39b965faafb66938970253a0790bde613b"],"ref":"refs/changes/12/512/5","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1480499851,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1479359477,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480007005,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1480007005,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"bin/sim.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/algorithms/calculate-server-unreserved.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/calculate-ticketed-vms.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-capness.js","type":"MODIFIED","insertions":5,"deletions":-7},{"file":"lib/algorithms/hard-filter-headnode.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-invalid-servers.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/algorithms/hard-filter-large-servers.js","type":"MODIFIED","insertions":6,"deletions":-8},{"file":"lib/algorithms/hard-filter-locality-hints.js","type":"MODIFIED","insertions":8,"deletions":-10},{"file":"lib/algorithms/hard-filter-min-cpu.js","type":"MODIFIED","insertions":7,"deletions":-8},{"file":"lib/algorithms/hard-filter-min-disk.js","type":"MODIFIED","insertions":9,"deletions":-10},{"file":"lib/algorithms/hard-filter-min-ram.js","type":"MODIFIED","insertions":8,"deletions":-9},{"file":"lib/algorithms/hard-filter-overprovision-ratios.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-owners-servers.js","type":"MODIFIED","insertions":7,"deletions":-7},{"file":"lib/algorithms/hard-filter-platform-versions.js","type":"MODIFIED","insertions":8,"deletions":-9},{"file":"lib/algorithms/hard-filter-reserved.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/hard-filter-reservoir.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/hard-filter-running.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/algorithms/hard-filter-setup.js","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"lib/algorithms/hard-filter-sick-servers.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/hard-filter-traits.js","type":"MODIFIED","insertions":7,"deletions":-8},{"file":"lib/algorithms/hard-filter-vlans.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-vm-count.js","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"lib/algorithms/hard-filter-volumes-from.js","type":"MODIFIED","insertions":7,"deletions":-8},{"file":"lib/algorithms/identity.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/override-overprovisioning.js","type":"MODIFIED","insertions":6,"deletions":-7},{"file":"lib/algorithms/score-current-platform.js","type":"MODIFIED","insertions":6,"deletions":-7},{"file":"lib/algorithms/score-next-reboot.js","type":"MODIFIED","insertions":6,"deletions":-7},{"file":"lib/algorithms/score-num-owner-zones.js","type":"MODIFIED","insertions":10,"deletions":-11},{"file":"lib/algorithms/score-uniform-random.js","type":"MODIFIED","insertions":9,"deletions":-11},{"file":"lib/algorithms/score-unreserved-disk.js","type":"MODIFIED","insertions":11,"deletions":-6},{"file":"lib/algorithms/score-unreserved-ram.js","type":"MODIFIED","insertions":10,"deletions":-12},{"file":"lib/algorithms/soft-filter-locality-hints.js","type":"MODIFIED","insertions":9,"deletions":-10},{"file":"lib/allocator.js","type":"MODIFIED","insertions":33,"deletions":-22},{"file":"test/algorithms/calculate-server-unreserved.test.js","type":"MODIFIED","insertions":5,"deletions":-12},{"file":"test/algorithms/calculate-ticketed-vms.test.js","type":"MODIFIED","insertions":7,"deletions":-10},{"file":"test/algorithms/common.js","type":"MODIFIED","insertions":36,"deletions":-12},{"file":"test/algorithms/hard-filter-capness.test.js","type":"MODIFIED","insertions":7,"deletions":-22},{"file":"test/algorithms/hard-filter-headnode.test.js","type":"MODIFIED","insertions":7,"deletions":-15},{"file":"test/algorithms/hard-filter-invalid-servers.test.js","type":"MODIFIED","insertions":5,"deletions":-13},{"file":"test/algorithms/hard-filter-large-servers.test.js","type":"MODIFIED","insertions":7,"deletions":-15},{"file":"test/algorithms/hard-filter-locality-hints.test.js","type":"MODIFIED","insertions":72,"deletions":-49},{"file":"test/algorithms/hard-filter-min-cpu.test.js","type":"MODIFIED","insertions":18,"deletions":-19},{"file":"test/algorithms/hard-filter-min-disk.test.js","type":"MODIFIED","insertions":23,"deletions":-24},{"file":"test/algorithms/hard-filter-min-ram.test.js","type":"MODIFIED","insertions":21,"deletions":-23},{"file":"test/algorithms/hard-filter-overprovision-ratios.test.js","type":"MODIFIED","insertions":9,"deletions":-16},{"file":"test/algorithms/hard-filter-owners-servers.js","type":"MODIFIED","insertions":13,"deletions":-19},{"file":"test/algorithms/hard-filter-platform-versions.test.js","type":"MODIFIED","insertions":31,"deletions":-44},{"file":"test/algorithms/hard-filter-reserved.test.js","type":"MODIFIED","insertions":5,"deletions":-13},{"file":"test/algorithms/hard-filter-reservoir.test.js","type":"MODIFIED","insertions":5,"deletions":-13},{"file":"test/algorithms/hard-filter-running.test.js","type":"MODIFIED","insertions":9,"deletions":-19},{"file":"test/algorithms/hard-filter-setup.test.js","type":"MODIFIED","insertions":9,"deletions":-21},{"file":"test/algorithms/hard-filter-sick-servers.test.js","type":"MODIFIED","insertions":3,"deletions":-9},{"file":"test/algorithms/hard-filter-traits.test.js","type":"MODIFIED","insertions":136,"deletions":-73},{"file":"test/algorithms/hard-filter-vlans.test.js","type":"MODIFIED","insertions":5,"deletions":-10},{"file":"test/algorithms/hard-filter-vm-count.test.js","type":"MODIFIED","insertions":9,"deletions":-15},{"file":"test/algorithms/hard-filter-volumes-from.test.js","type":"MODIFIED","insertions":11,"deletions":-9},{"file":"test/algorithms/identity.test.js","type":"MODIFIED","insertions":3,"deletions":-10},{"file":"test/algorithms/override-overprovisioning.test.js","type":"MODIFIED","insertions":43,"deletions":-37},{"file":"test/algorithms/score-current-platform.test.js","type":"MODIFIED","insertions":16,"deletions":-21},{"file":"test/algorithms/score-next-reboot.test.js","type":"MODIFIED","insertions":9,"deletions":-18},{"file":"test/algorithms/score-num-owner-zones.test.js","type":"MODIFIED","insertions":34,"deletions":-39},{"file":"test/algorithms/score-uniform-random.test.js","type":"MODIFIED","insertions":26,"deletions":-20},{"file":"test/algorithms/score-unreserved-disk.test.js","type":"MODIFIED","insertions":15,"deletions":-30},{"file":"test/algorithms/score-unreserved-ram.test.js","type":"MODIFIED","insertions":23,"deletions":-38},{"file":"test/algorithms/soft-filter-locality-hints.test.js","type":"MODIFIED","insertions":48,"deletions":-42},{"file":"test/allocator.test.js","type":"MODIFIED","insertions":70,"deletions":-146},{"file":"test/common.js","type":"MODIFIED","insertions":50,"deletions":-1},{"file":"test/integration.test.js","type":"MODIFIED","insertions":7,"deletions":-60}],"sizeInsertions":1043,"sizeDeletions":-1192},{"number":"6","revision":"de7de421dc48a722d3204d0d2e7ed7dbfb96b004","parents":["3ac425117c8989f2c9f64557b00c1d51db27efbb"],"ref":"refs/changes/12/512/6","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1482229108,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482229133,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"bin/sim.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/algorithms/calculate-server-unreserved.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/calculate-ticketed-vms.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-capness.js","type":"MODIFIED","insertions":5,"deletions":-7},{"file":"lib/algorithms/hard-filter-headnode.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-invalid-servers.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/algorithms/hard-filter-large-servers.js","type":"MODIFIED","insertions":6,"deletions":-8},{"file":"lib/algorithms/hard-filter-locality-hints.js","type":"MODIFIED","insertions":8,"deletions":-10},{"file":"lib/algorithms/hard-filter-min-cpu.js","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"lib/algorithms/hard-filter-min-disk.js","type":"MODIFIED","insertions":12,"deletions":-11},{"file":"lib/algorithms/hard-filter-min-ram.js","type":"MODIFIED","insertions":10,"deletions":-10},{"file":"lib/algorithms/hard-filter-overprovision-ratios.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-owners-servers.js","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"lib/algorithms/hard-filter-platform-versions.js","type":"MODIFIED","insertions":11,"deletions":-12},{"file":"lib/algorithms/hard-filter-reserved.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/hard-filter-reservoir.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/hard-filter-running.js","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"lib/algorithms/hard-filter-setup.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/hard-filter-sick-servers.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/hard-filter-traits.js","type":"MODIFIED","insertions":10,"deletions":-10},{"file":"lib/algorithms/hard-filter-vlans.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-vm-count.js","type":"MODIFIED","insertions":10,"deletions":-9},{"file":"lib/algorithms/hard-filter-volumes-from.js","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"lib/algorithms/identity.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/override-overprovisioning.js","type":"MODIFIED","insertions":7,"deletions":-8},{"file":"lib/algorithms/score-current-platform.js","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"lib/algorithms/score-next-reboot.js","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"lib/algorithms/score-num-owner-zones.js","type":"MODIFIED","insertions":13,"deletions":-13},{"file":"lib/algorithms/score-uniform-random.js","type":"MODIFIED","insertions":11,"deletions":-12},{"file":"lib/algorithms/score-unreserved-disk.js","type":"MODIFIED","insertions":12,"deletions":-11},{"file":"lib/algorithms/score-unreserved-ram.js","type":"MODIFIED","insertions":12,"deletions":-13},{"file":"lib/algorithms/soft-filter-locality-hints.js","type":"MODIFIED","insertions":11,"deletions":-11},{"file":"lib/allocator.js","type":"MODIFIED","insertions":33,"deletions":-22},{"file":"test/algorithms/calculate-server-unreserved.test.js","type":"MODIFIED","insertions":5,"deletions":-12},{"file":"test/algorithms/calculate-ticketed-vms.test.js","type":"MODIFIED","insertions":7,"deletions":-10},{"file":"test/algorithms/common.js","type":"MODIFIED","insertions":36,"deletions":-12},{"file":"test/algorithms/hard-filter-capness.test.js","type":"MODIFIED","insertions":7,"deletions":-22},{"file":"test/algorithms/hard-filter-headnode.test.js","type":"MODIFIED","insertions":7,"deletions":-15},{"file":"test/algorithms/hard-filter-invalid-servers.test.js","type":"MODIFIED","insertions":5,"deletions":-13},{"file":"test/algorithms/hard-filter-large-servers.test.js","type":"MODIFIED","insertions":7,"deletions":-15},{"file":"test/algorithms/hard-filter-locality-hints.test.js","type":"MODIFIED","insertions":72,"deletions":-49},{"file":"test/algorithms/hard-filter-min-cpu.test.js","type":"MODIFIED","insertions":18,"deletions":-19},{"file":"test/algorithms/hard-filter-min-disk.test.js","type":"MODIFIED","insertions":23,"deletions":-24},{"file":"test/algorithms/hard-filter-min-ram.test.js","type":"MODIFIED","insertions":21,"deletions":-23},{"file":"test/algorithms/hard-filter-overprovision-ratios.test.js","type":"MODIFIED","insertions":9,"deletions":-16},{"file":"test/algorithms/hard-filter-owners-servers.js","type":"MODIFIED","insertions":13,"deletions":-19},{"file":"test/algorithms/hard-filter-platform-versions.test.js","type":"MODIFIED","insertions":31,"deletions":-44},{"file":"test/algorithms/hard-filter-reserved.test.js","type":"MODIFIED","insertions":5,"deletions":-13},{"file":"test/algorithms/hard-filter-reservoir.test.js","type":"MODIFIED","insertions":5,"deletions":-13},{"file":"test/algorithms/hard-filter-running.test.js","type":"MODIFIED","insertions":7,"deletions":-22},{"file":"test/algorithms/hard-filter-setup.test.js","type":"MODIFIED","insertions":7,"deletions":-17},{"file":"test/algorithms/hard-filter-sick-servers.test.js","type":"MODIFIED","insertions":3,"deletions":-9},{"file":"test/algorithms/hard-filter-traits.test.js","type":"MODIFIED","insertions":136,"deletions":-73},{"file":"test/algorithms/hard-filter-vlans.test.js","type":"MODIFIED","insertions":5,"deletions":-10},{"file":"test/algorithms/hard-filter-vm-count.test.js","type":"MODIFIED","insertions":9,"deletions":-15},{"file":"test/algorithms/hard-filter-volumes-from.test.js","type":"MODIFIED","insertions":11,"deletions":-9},{"file":"test/algorithms/identity.test.js","type":"MODIFIED","insertions":3,"deletions":-10},{"file":"test/algorithms/override-overprovisioning.test.js","type":"MODIFIED","insertions":43,"deletions":-37},{"file":"test/algorithms/score-current-platform.test.js","type":"MODIFIED","insertions":16,"deletions":-21},{"file":"test/algorithms/score-next-reboot.test.js","type":"MODIFIED","insertions":9,"deletions":-19},{"file":"test/algorithms/score-num-owner-zones.test.js","type":"MODIFIED","insertions":34,"deletions":-39},{"file":"test/algorithms/score-uniform-random.test.js","type":"MODIFIED","insertions":26,"deletions":-20},{"file":"test/algorithms/score-unreserved-disk.test.js","type":"MODIFIED","insertions":15,"deletions":-30},{"file":"test/algorithms/score-unreserved-ram.test.js","type":"MODIFIED","insertions":23,"deletions":-38},{"file":"test/algorithms/soft-filter-locality-hints.test.js","type":"MODIFIED","insertions":48,"deletions":-42},{"file":"test/allocator.test.js","type":"MODIFIED","insertions":70,"deletions":-146},{"file":"test/common.js","type":"MODIFIED","insertions":50,"deletions":-1},{"file":"test/integration.test.js","type":"MODIFIED","insertions":7,"deletions":-60}],"sizeInsertions":1076,"sizeDeletions":-1219},{"number":"7","revision":"2bfdca6ac46fa8b5d0ec05c88414d7ecb4ee8d42","parents":["3ac425117c8989f2c9f64557b00c1d51db27efbb"],"ref":"refs/changes/12/512/7","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1482229314,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482229450,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1482389468,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1482357686,"by":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1482357686,"by":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"bin/sim.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/algorithms/calculate-server-unreserved.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/calculate-ticketed-vms.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-capness.js","type":"MODIFIED","insertions":5,"deletions":-7},{"file":"lib/algorithms/hard-filter-headnode.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-invalid-servers.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/algorithms/hard-filter-large-servers.js","type":"MODIFIED","insertions":6,"deletions":-8},{"file":"lib/algorithms/hard-filter-locality-hints.js","type":"MODIFIED","insertions":8,"deletions":-10},{"file":"lib/algorithms/hard-filter-min-cpu.js","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"lib/algorithms/hard-filter-min-disk.js","type":"MODIFIED","insertions":12,"deletions":-11},{"file":"lib/algorithms/hard-filter-min-ram.js","type":"MODIFIED","insertions":10,"deletions":-10},{"file":"lib/algorithms/hard-filter-overprovision-ratios.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-owners-servers.js","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"lib/algorithms/hard-filter-platform-versions.js","type":"MODIFIED","insertions":11,"deletions":-12},{"file":"lib/algorithms/hard-filter-reserved.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/hard-filter-reservoir.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/hard-filter-running.js","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"lib/algorithms/hard-filter-setup.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/hard-filter-sick-servers.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/hard-filter-traits.js","type":"MODIFIED","insertions":10,"deletions":-10},{"file":"lib/algorithms/hard-filter-vlans.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"lib/algorithms/hard-filter-vm-count.js","type":"MODIFIED","insertions":10,"deletions":-9},{"file":"lib/algorithms/hard-filter-volumes-from.js","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"lib/algorithms/identity.js","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"lib/algorithms/override-overprovisioning.js","type":"MODIFIED","insertions":7,"deletions":-8},{"file":"lib/algorithms/score-current-platform.js","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"lib/algorithms/score-next-reboot.js","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"lib/algorithms/score-num-owner-zones.js","type":"MODIFIED","insertions":13,"deletions":-13},{"file":"lib/algorithms/score-uniform-random.js","type":"MODIFIED","insertions":11,"deletions":-12},{"file":"lib/algorithms/score-unreserved-disk.js","type":"MODIFIED","insertions":12,"deletions":-11},{"file":"lib/algorithms/score-unreserved-ram.js","type":"MODIFIED","insertions":12,"deletions":-13},{"file":"lib/algorithms/soft-filter-locality-hints.js","type":"MODIFIED","insertions":11,"deletions":-11},{"file":"lib/allocator.js","type":"MODIFIED","insertions":33,"deletions":-22},{"file":"test/algorithms/calculate-server-unreserved.test.js","type":"MODIFIED","insertions":5,"deletions":-12},{"file":"test/algorithms/calculate-ticketed-vms.test.js","type":"MODIFIED","insertions":7,"deletions":-10},{"file":"test/algorithms/common.js","type":"MODIFIED","insertions":36,"deletions":-12},{"file":"test/algorithms/hard-filter-capness.test.js","type":"MODIFIED","insertions":7,"deletions":-22},{"file":"test/algorithms/hard-filter-headnode.test.js","type":"MODIFIED","insertions":7,"deletions":-15},{"file":"test/algorithms/hard-filter-invalid-servers.test.js","type":"MODIFIED","insertions":5,"deletions":-13},{"file":"test/algorithms/hard-filter-large-servers.test.js","type":"MODIFIED","insertions":7,"deletions":-15},{"file":"test/algorithms/hard-filter-locality-hints.test.js","type":"MODIFIED","insertions":72,"deletions":-49},{"file":"test/algorithms/hard-filter-min-cpu.test.js","type":"MODIFIED","insertions":18,"deletions":-19},{"file":"test/algorithms/hard-filter-min-disk.test.js","type":"MODIFIED","insertions":23,"deletions":-24},{"file":"test/algorithms/hard-filter-min-ram.test.js","type":"MODIFIED","insertions":21,"deletions":-23},{"file":"test/algorithms/hard-filter-overprovision-ratios.test.js","type":"MODIFIED","insertions":9,"deletions":-16},{"file":"test/algorithms/hard-filter-owners-servers.js","type":"MODIFIED","insertions":13,"deletions":-19},{"file":"test/algorithms/hard-filter-platform-versions.test.js","type":"MODIFIED","insertions":31,"deletions":-44},{"file":"test/algorithms/hard-filter-reserved.test.js","type":"MODIFIED","insertions":5,"deletions":-13},{"file":"test/algorithms/hard-filter-reservoir.test.js","type":"MODIFIED","insertions":5,"deletions":-13},{"file":"test/algorithms/hard-filter-running.test.js","type":"MODIFIED","insertions":7,"deletions":-22},{"file":"test/algorithms/hard-filter-setup.test.js","type":"MODIFIED","insertions":7,"deletions":-17},{"file":"test/algorithms/hard-filter-sick-servers.test.js","type":"MODIFIED","insertions":3,"deletions":-9},{"file":"test/algorithms/hard-filter-traits.test.js","type":"MODIFIED","insertions":136,"deletions":-73},{"file":"test/algorithms/hard-filter-vlans.test.js","type":"MODIFIED","insertions":5,"deletions":-10},{"file":"test/algorithms/hard-filter-vm-count.test.js","type":"MODIFIED","insertions":9,"deletions":-15},{"file":"test/algorithms/hard-filter-volumes-from.test.js","type":"MODIFIED","insertions":11,"deletions":-9},{"file":"test/algorithms/identity.test.js","type":"MODIFIED","insertions":3,"deletions":-10},{"file":"test/algorithms/override-overprovisioning.test.js","type":"MODIFIED","insertions":43,"deletions":-37},{"file":"test/algorithms/score-current-platform.test.js","type":"MODIFIED","insertions":18,"deletions":-23},{"file":"test/algorithms/score-next-reboot.test.js","type":"MODIFIED","insertions":9,"deletions":-19},{"file":"test/algorithms/score-num-owner-zones.test.js","type":"MODIFIED","insertions":34,"deletions":-39},{"file":"test/algorithms/score-uniform-random.test.js","type":"MODIFIED","insertions":26,"deletions":-20},{"file":"test/algorithms/score-unreserved-disk.test.js","type":"MODIFIED","insertions":15,"deletions":-30},{"file":"test/algorithms/score-unreserved-ram.test.js","type":"MODIFIED","insertions":23,"deletions":-38},{"file":"test/algorithms/soft-filter-locality-hints.test.js","type":"MODIFIED","insertions":48,"deletions":-42},{"file":"test/allocator.test.js","type":"MODIFIED","insertions":70,"deletions":-146},{"file":"test/common.js","type":"MODIFIED","insertions":50,"deletions":-1},{"file":"test/integration.test.js","type":"MODIFIED","insertions":7,"deletions":-60}],"sizeInsertions":1078,"sizeDeletions":-1221}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"}]}