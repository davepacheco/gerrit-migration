{"project":"joyent/illumos-joyent","branch":"master","id":"Ie491baa0a1b31529d9013d65872913722b512db9","number":"5510","subject":"OS-7600 want exclusive hma registration Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Approved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e","owner":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"url":"https://cr.joyent.us/5510","commitMessage":"OS-7600 want exclusive hma registration\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1549568173,"lastUpdated":1552941320,"open":false,"status":"MERGED","comments":[{"timestamp":1549568173,"reviewer":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"message":"Uploaded patch set 1."},{"timestamp":1549569483,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(2 comments)\n\nLooks good"},{"timestamp":1549632499,"reviewer":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"message":"Uploaded patch set 2."},{"timestamp":1549632516,"reviewer":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1550612588,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2:\n\nI opened OS-7600 for this."},{"timestamp":1550612608,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2:\n\n(https://smartos.org/bugview/OS-7600)"},{"timestamp":1550612626,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1550618887,"reviewer":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"message":"Uploaded patch set 3."},{"timestamp":1550619007,"reviewer":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"message":"Patch Set 3:\n\nRe-based and commit message updated to include issue number."},{"timestamp":1550692847,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1551103293,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1552602241,"reviewer":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1552918769,"reviewer":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"message":"Patch Set 4:\n\nSome testing notes for this change on OmniOS are below.\n\nHaving gone through this, I think that it is also necessary to have bhyve perform hma_registration/deregistration upon starting the first and stopping the last VM, otherwise the vmm module needs to be not installed, or disabled in etc/system or boot parameters.\n\n\nOn an OmniOS bloody host which has Bhyve, KVM and Virtualbox installed, all drivers are loaded:\n\ntheeo% modinfo | egrep \u0027vmm|kvm|vboxdrv\u0027\n187 fffffffff7f7c000  56f48 275   1  vboxdrv (VirtualBox HostDrv 5.2.26r12828)\n267 fffffffff8388000 23b320 273   1  vmm (vmm)\n279 fffffffff7ce1000  39970 288   1  kvm (kvm driver v0.1)\n\nWith no VMs running, only bhyve has an active registration:\n\ntheeo# mdb -ke \u0027hma_registrations::walk list | ::print -t hma_reg_t hr_name\u0027\nconst char *hr_name \u003d 0xfffffffff83b47ad \"bhyve\"\n\nStarting a VirtualBox VM creates an additional registration:\n\ntheeo# VBoxHeadless -s test \u0026\ntheeo# mdb -ke \u0027hma_registrations::walk list | ::print -t hma_reg_t hr_name\u0027\nconst char *hr_name \u003d 0xfffffffff83b47ad \"bhyve\"\nconst char *hr_name \u003d 0xfffffffff7fb3abe \"VirtualBox HostDrv\"\n\nUsing a version of VirtualBox which uses the new hma_register_exclusive():\n\ntheeo# mdb -ke \u0027hma_registrations::walk list | ::print -t hma_reg_t hr_name\u0027\nconst char *hr_name \u003d 0xfffffffff7f987ad \"bhyve\"\n\ntheeo# VBoxHeadless -s test\nOracle VM VirtualBox Headless Interface 5.2.26\n(C) 2008-2019 Oracle Corporation\nAll rights reserved.\n\n18/03/2019 13:59:18 Listening for VNC connections on TCP port 5900\n18/03/2019 13:59:18 Listening for VNC connections on TCP6 port 5900\nVRDE server is listening on port 5900.\nError: failed to start machine. Error message: VT-x is being used by another hypervisor (VERR_VMX_IN_VMX_ROOT_MODE).\nVirtualBox can\u0027t operate in VMX root mode. Please close all other virtualization programs. (VERR_VMX_IN_VMX_ROOT_MODE)\n18/03/2019 13:59:18 listenerRun: error in select: Bad file number\n\n\ntheeo# echo exclude: vmm \u003e /etc/system.d/novmm\ntheeo# init 6\n\ntheeo# mdb -ke \u0027hma_registrations::walk list | ::print -t hma_reg_t hr_name\u0027\ntheeo# VBoxHeadless -s test \u0026\ntheeo# mdb -ke \u0027hma_registrations::walk list | ::print -t hma_reg_t hr_name\u0027\nconst char *hr_name \u003d 0xfffffffff7fb2abe \"VirtualBox HostDrv\"\n\ntheeo# mdb -kwe \u0027sysparam_hd/z0\u0027\ntheeo# mdb -kwe \u0027sysparam_tl/z0\u0027\ntheeo# modload /usr/kernel/drv/amd64/vmm\ntheeo# modload /usr/kernel/drv/amd64/viona\n\nINFO:root:/usr/sbin/bhyve -U 4d17cdc5-e409-4cb4-a70a-8ed866c19551 -A -H -B 1,product\u003dOmniOS HVM -c 2 -m 1G -l bootrom,/usr/share/bhyve/firmware/BHYVE_CSM.fd -s 0,hostbridge,model\u003di440fx -s 1,lpc -l com1,/dev/zconsole -s 4:0,virtio-blk,/dev/zvol/rdsk/data/hdd-bloody -s 6:0,virtio-net-viona,bloody0 bloody\nINFO:root:Starting bhyve\nINFO:root:Bhyve exited 4\nERROR:root:Error b\u0027vm_create: No such file or directory\\n\u0027\nDEBUG:root:Output b\u0027\u0027\n\n### this is because the sdev plugin never registered due to HMA registration failure in vmm_attach()\n\nINFO:root:/usr/bin/qemu-system-x86_64 -name bloody -uuid 4d17cdc5-e409-4cb4-a70a-8ed866c19551 -enable-kvm -no-hpet -m 1G -smp 2 -cpu qemu64 -rtc base\u003dutc,driftfix\u003dslew -pidfile /tmp/vm.pid -monitor unix:/tmp/vm.monitor,server,nowait,nodelay -vga std -chardev pipe,id\u003dconsole0,path\u003d/dev/zconsole -serial chardev:console0 -boot order\u003ddc -drive file\u003d/dev/zvol/rdsk/data/hdd-bloody,if\u003dvirtio,media\u003ddisk,index\u003d0,cache\u003dnone,serial\u003d0,boot\u003don -device virtio-net-pci,mac\u003d02:08:20:ab:f4:27,tx\u003dtimer,x-txtimer\u003d200000,x-txburst\u003d128,vlan\u003d0 -net vnic,vlan\u003d0,name\u003dnet0,ifname\u003dbloody0 -vnc none\nINFO:root:Starting kvm\nINFO:root:KVM exited 1\nERROR:root:Error b\u0027open /dev/kvm: No such device or address\\nfailed to initialize KVM: Not owner\\n\u0027\nDEBUG:root:Output b\u0027\u0027\n\ntheeo# mdb -ke \u0027hma_registrations::walk list | ::print -t hma_reg_t hr_name\u0027\nconst char *hr_name \u003d 0xfffffffff7fb2abe \"VirtualBox HostDrv\"\n\n.... stop Virtualbox VM\n\ntheeo# mdb -ke \u0027hma_registrations::walk list | ::print -t hma_reg_t hr_name\u0027\n\nINFO:root:/usr/bin/qemu-system-x86_64 -name bloody -uuid 4d17cdc5-e409-4cb4-a70a-8ed866c19551 -enable-kvm -no-hpet -m 1G -smp 2 -cpu qemu64 -rtc base\u003dutc,driftfix\u003dslew -pidfile /tmp/vm.pid -monitor unix:/tmp/vm.monitor,server,nowait,nodelay -vga std -chardev pipe,id\u003dconsole0,path\u003d/dev/zconsole -serial chardev:console0 -boot order\u003ddc -drive file\u003d/dev/zvol/rdsk/data/hdd-bloody,if\u003dvirtio,media\u003ddisk,index\u003d0,cache\u003dnone,serial\u003d0,boot\u003don -device virtio-net-pci,mac\u003d02:08:20:ab:f4:27,tx\u003dtimer,x-txtimer\u003d200000,x-txburst\u003d128,vlan\u003d0 -net vnic,vlan\u003d0,name\u003dnet0,ifname\u003dbloody0 -vnc none\nINFO:root:Starting kvm\n\ntheeo# mdb -ke \u0027hma_registrations::walk list | ::print -t hma_reg_t hr_name\u0027\nconst char *hr_name \u003d 0xfffffffff7d0d361 \"SmartOS KVM\""},{"timestamp":1552937231,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 5: Patch Set 4 was rebased."},{"timestamp":1552937386,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1552939509,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 6: Integration-Approval+1"},{"timestamp":1552939590,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 7: Commit message was updated."},{"timestamp":1552941320,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Patrick Mooney"}],"currentPatchSet":{"number":"7","revision":"e491baa0a1b31529d9013d65872913722b512db9","parents":["90e27ef5fc2bdeb7f9934f4e77140ef5f1aa9392"],"ref":"refs/changes/10/5510/7","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1552939590,"author":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550692847,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551103293,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1552939509,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1552941319,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/pkg/manifests/system-header.mf","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/i86pc/os/hma.c","type":"MODIFIED","insertions":47,"deletions":-12},{"file":"usr/src/uts/i86pc/sys/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/i86pc/sys/hma.h","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":50,"sizeDeletions":-12},"patchSets":[{"number":"1","revision":"b514682a30fa7b5c83985bcacdc94ad170f14fff","parents":["7a899a42e86d8d3e6d7d3eaf31bcacc6411fbb74"],"ref":"refs/changes/10/5510/1","uploader":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"createdOn":1549568173,"author":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/i86pc/os/hma.c","line":86,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"ASSERT(MUTEX_HELD(\u0026hma_lock)); for paranoia?"},{"file":"usr/src/uts/i86pc/os/hma.c","line":86,"reviewer":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/hma.c","line":155,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"For paranoia, how about checking that hma_registrations is empty if hma_exclusive is set here, before we clear it?"},{"file":"usr/src/uts/i86pc/os/hma.c","line":155,"reviewer":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/pkg/manifests/system-header.mf","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/i86pc/os/hma.c","type":"MODIFIED","insertions":45,"deletions":-13},{"file":"usr/src/uts/i86pc/sys/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/i86pc/sys/hma.h","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":48,"sizeDeletions":-13},{"number":"2","revision":"a4a57485f39b0803dd4e82f16b55e24776e17501","parents":["a1d6a2531188cc9154c8090624e5527e4703867b"],"ref":"refs/changes/10/5510/2","uploader":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"createdOn":1549632499,"author":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550612626,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/pkg/manifests/system-header.mf","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/i86pc/os/hma.c","type":"MODIFIED","insertions":47,"deletions":-12},{"file":"usr/src/uts/i86pc/sys/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/i86pc/sys/hma.h","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":50,"sizeDeletions":-12},{"number":"3","revision":"fdb4e09ae6ec47bc1c8eadd3aa1b9240db1ff17b","parents":["20cd42d3954fb7e0280a3cf34a344db285355a0e"],"ref":"refs/changes/10/5510/3","uploader":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"createdOn":1550618887,"author":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551103293,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550692847,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/pkg/manifests/system-header.mf","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/i86pc/os/hma.c","type":"MODIFIED","insertions":47,"deletions":-12},{"file":"usr/src/uts/i86pc/sys/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/i86pc/sys/hma.h","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":50,"sizeDeletions":-12},{"number":"4","revision":"650cb6a32b43566335fdb6d946d5867a4e162d99","parents":["0b570b3cb1c0bf505f1b1bd352664d638b8cc359"],"ref":"refs/changes/10/5510/4","uploader":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"createdOn":1552602241,"author":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551103293,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550692847,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/pkg/manifests/system-header.mf","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/i86pc/os/hma.c","type":"MODIFIED","insertions":47,"deletions":-12},{"file":"usr/src/uts/i86pc/sys/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/i86pc/sys/hma.h","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":50,"sizeDeletions":-12},{"number":"5","revision":"aeb209934e7c3e3af411d89ac7d4d497bab5ccbd","parents":["90e27ef5fc2bdeb7f9934f4e77140ef5f1aa9392"],"ref":"refs/changes/10/5510/5","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1552937231,"author":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551103293,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550692847,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/pkg/manifests/system-header.mf","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/i86pc/os/hma.c","type":"MODIFIED","insertions":47,"deletions":-12},{"file":"usr/src/uts/i86pc/sys/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/i86pc/sys/hma.h","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":50,"sizeDeletions":-12},{"number":"6","revision":"63e26d88ab1fbd5601fce2eb5b704a8968785575","parents":["90e27ef5fc2bdeb7f9934f4e77140ef5f1aa9392"],"ref":"refs/changes/10/5510/6","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1552937386,"author":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551103293,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1552939509,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550692847,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/pkg/manifests/system-header.mf","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/i86pc/os/hma.c","type":"MODIFIED","insertions":47,"deletions":-12},{"file":"usr/src/uts/i86pc/sys/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/i86pc/sys/hma.h","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":50,"sizeDeletions":-12},{"number":"7","revision":"e491baa0a1b31529d9013d65872913722b512db9","parents":["90e27ef5fc2bdeb7f9934f4e77140ef5f1aa9392"],"ref":"refs/changes/10/5510/7","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1552939590,"author":{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551103293,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1552939509,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550692847,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1552941319,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/pkg/manifests/system-header.mf","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/i86pc/os/hma.c","type":"MODIFIED","insertions":47,"deletions":-12},{"file":"usr/src/uts/i86pc/sys/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/i86pc/sys/hma.h","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":50,"sizeDeletions":-12}],"allReviewers":[{"name":"Andy Fiddaman","email":"omnios@citrus-it.co.uk","username":"citrus-it"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}]}