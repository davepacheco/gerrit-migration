{"project":"joyent/smartos-live","branch":"master","id":"Ie6105b5797e14be71548921f16d9e17e5f2ee33a","number":"1829","subject":"OS-6073 build USB image in /tmp Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Reviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e Approved by: Robert Mustacchi \u003crm@joyent.com\u003e","owner":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"url":"https://cr.joyent.us/1829","commitMessage":"OS-6073 build USB image in /tmp\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nReviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\nApproved by: Robert Mustacchi \u003crm@joyent.com\u003e\n","createdOn":1493048687,"lastUpdated":1498267512,"open":false,"status":"MERGED","comments":[{"timestamp":1493048687,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Uploaded patch set 1."},{"timestamp":1493048724,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1493054310,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(3 comments)\n\nI don\u0027t think this is subject to OS-5608, but it\u0027d be worth understanding how that interacts here and making sure it wouldn\u0027t apply."},{"timestamp":1493062806,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 1:\n\n\u003e (3 comments)\n \u003e \n \u003e I don\u0027t think this is subject to OS-5608, but it\u0027d be worth\n \u003e understanding how that interacts here and making sure it wouldn\u0027t\n \u003e apply.\n\nThe change will create just one file in tmpfs and use that for lofi, so I\u0027d say it won\u0027t apply."},{"timestamp":1493064318,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 1:\n\n(3 comments)"},{"timestamp":1493067580,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(3 comments)"},{"timestamp":1493114341,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Uploaded patch set 2."},{"timestamp":1493114380,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1493123551,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Uploaded patch set 3."},{"timestamp":1493123589,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1493123786,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1493135528,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3: Code-Review+1\n\n(1 comment)"},{"timestamp":1493154095,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Uploaded patch set 4."},{"timestamp":1493154133,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1493154152,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1493164131,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1493849192,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 4:\n\n(7 comments)"},{"timestamp":1493897942,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Uploaded patch set 5."},{"timestamp":1493897961,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 5:\n\n(7 comments)"},{"timestamp":1493897983,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1493922495,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 5: Code-Review+1\n\n(1 comment)"},{"timestamp":1495112159,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Uploaded patch set 6: Patch Set 5 was rebased."},{"timestamp":1495112200,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6:\n\n\"make check\" passed ok"},{"timestamp":1495216569,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 6:\n\n(2 comments)\n\nA couple of minor indentation issues, but otherwise looks good to me!  Can you put testing notes in the JIRA ticket?"},{"timestamp":1495448837,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Uploaded patch set 7."},{"timestamp":1495448853,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 6:\n\n(2 comments)"},{"timestamp":1495448876,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1495487097,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 7: Code-Review+1"},{"timestamp":1497905516,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 7: Code-Review+1"},{"timestamp":1498141386,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 8: Patch Set 7 was rebased"},{"timestamp":1498141639,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Uploaded patch set 9: Commit message was updated."},{"timestamp":1498236204,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 9: Integration-Approval+1"},{"timestamp":1498242075,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 10: Patch Set 9 was rebased"},{"timestamp":1498242210,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Uploaded patch set 11: Commit message was updated."},{"timestamp":1498267512,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Hans Rosenfeld"}],"currentPatchSet":{"number":"11","revision":"e6105b5797e14be71548921f16d9e17e5f2ee33a","parents":["c336ed21b9c25867faae4979773e7c2b52c1ee24"],"ref":"refs/changes/29/1829/11","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1498242210,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1495448876,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1495487097,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1497905516,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1498236204,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1498267512,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"tools/build_iso","type":"MODIFIED","insertions":37,"deletions":-16}],"sizeInsertions":37,"sizeDeletions":-16},"patchSets":[{"number":"1","revision":"1cfbad5f90102c318b16a38b75af0dfe2186e4a9","parents":["b7272e9a8d0bc947e9e85b9ebae9237a8024a55d"],"ref":"refs/changes/29/1829/1","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1493048687,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1493048724,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"tools/build_iso","line":77,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Should we be checking for failure of the rm here for non-ENOENT cases?"},{"file":"tools/build_iso","line":77,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Probably not. We didn\u0027t before, and I\u0027m not sure what I\u0027d do in that case anyway since this already is the failure cleanup path."},{"file":"tools/build_iso","line":77,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"OK, fair enough."},{"file":"tools/build_iso","line":182,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"What if tmpfs isn\u0027t big enough on a system? I don\u0027t think we should assume that we\u0027ll have a 2 GByte tmpfs at /tmp. There may also not be enough swap or memory available."},{"file":"tools/build_iso","line":182,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"If tmpfs has less than 2G available the mkfile the script will fail. The file is sparse but tmpfs doesn\u0027t allow it anyway. The free space in tmpfs seems to be limited by memory, swap isn\u0027t taken into account. \n\nThe build instructions recommend to give a build zone 2-4G or more, and with 2G it wouldn\u0027t work anymore.\n\nI could either make the image size smaller, most of the 2G in the USB image are free anyway. Is there a reason the larger size was chosen?\n\nOr I could just update the documentation and break everyone building in low-memory zones. I haven\u0027t done an illumos build with that little memory in a few years, but I remember it wasn\u0027t pleasent even back then.\n\nWhat would you recommend?"},{"file":"tools/build_iso","line":182,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"The reason to go with at least 2 GB is so you can put additional platforms on the key later and don\u0027t have to dd the image every time. We don\u0027t want to make that smaller.\n\nI often do builds in 4 GB in vmware and it\u0027s fine. You may leave the initial nightly going, but then it works just fine for bldenv. We automatically adjust parallelism based on memory size. If breaking things is really the only option, I\u0027d poll people and understand what the impact would be before we do anything."},{"file":"tools/build_iso","line":182,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"With a little extra effort we can just check whether /tmp has enough free space, and if not build it directly in output-usb as we did before."},{"file":"tools/build_iso","line":301,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Why did this move?"},{"file":"tools/build_iso","line":301,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"I put the temporary USB image in the same directory where the lofi is eventually mounted. The mount will hide the USB image, so we need to umount or else grub won\u0027t find the USB image.\n\nI understand it\u0027s a bit ugly to use the same directory. Alternatively I could create a 2nd tmpdir for the image (or use no tmpdir for it at all), which is a different kind of ugly. Or I could make changes all over the script to mount the lofi in a directory below the tmpdir, which seemed like overkill."},{"file":"tools/build_iso","line":301,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Can you add a comment that explains why this has to be done afterwards then?"},{"file":"tools/build_iso","line":301,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/build_iso","type":"MODIFIED","insertions":21,"deletions":-16}],"sizeInsertions":21,"sizeDeletions":-16},{"number":"2","revision":"7328f5ae3660a6c7b0e322f8cb5c27976e359e86","parents":["b7272e9a8d0bc947e9e85b9ebae9237a8024a55d"],"ref":"refs/changes/29/1829/2","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1493114341,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1493114380,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/build_iso","type":"MODIFIED","insertions":24,"deletions":-16}],"sizeInsertions":24,"sizeDeletions":-16},{"number":"3","revision":"8947718a3068cb383681428d321a92003d9379b7","parents":["b7272e9a8d0bc947e9e85b9ebae9237a8024a55d"],"ref":"refs/changes/29/1829/3","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1493123551,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1493135528,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1493123589,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"tools/build_iso","line":187,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Any reason we\u0027re not using [[?"},{"file":"tools/build_iso","line":187,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"No reason, I changed it to use [[."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/build_iso","type":"MODIFIED","insertions":35,"deletions":-16}],"sizeInsertions":35,"sizeDeletions":-16},{"number":"4","revision":"d409f124a4f37e86f50df58d08fcdc2d3479bf02","parents":["b7272e9a8d0bc947e9e85b9ebae9237a8024a55d"],"ref":"refs/changes/29/1829/4","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1493154095,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1493164131,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1493154133,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"tools/build_iso","line":26,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"This should probably be \"bi_usb_size\", and appear in the block of variables below."},{"file":"tools/build_iso","line":26,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Done"},{"file":"tools/build_iso","line":79,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"As these are just in the on-failure cleanup function, maybe they should be \"rm -f\" ?"},{"file":"tools/build_iso","line":79,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Done"},{"file":"tools/build_iso","line":186,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Please use $() instead of ``"},{"file":"tools/build_iso","line":186,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Done"},{"file":"tools/build_iso","line":187,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"This should probably be...\n\nif (( tmp_free \u003e\u003d bi_usb_size + 100000 )); then"},{"file":"tools/build_iso","line":187,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Done"},{"file":"tools/build_iso","line":192,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Can you use the if/then style here?  e.g.,\n\n    if ! mkfile -n \"$bi_usb_size\" \"$bi_tmpusbpath\"; then\n        fail \"...\"\n    fi"},{"file":"tools/build_iso","line":192,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Done"},{"file":"tools/build_iso","line":296,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"This wasn\u0027t previously true, right?  Maybe we should move the mount point to a sub-directory of $bi_tmpdir now that we\u0027re putting the USB image in there."},{"file":"tools/build_iso","line":296,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"I thought about that, but I figured that it would require changing of the path all over the script, which I wanted to avoid."},{"file":"tools/build_iso","line":296,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I think it\u0027s reasonable in this form for now."},{"file":"tools/build_iso","line":318,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Perhaps the if/then style here, also?"},{"file":"tools/build_iso","line":318,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/build_iso","type":"MODIFIED","insertions":35,"deletions":-16}],"sizeInsertions":35,"sizeDeletions":-16},{"number":"5","revision":"b8bf2013dd39dd5e78d946f87a41bc85f7e3acfc","parents":["b7272e9a8d0bc947e9e85b9ebae9237a8024a55d"],"ref":"refs/changes/29/1829/5","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1493897942,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1493922495,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1493897983,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/build_iso","type":"MODIFIED","insertions":37,"deletions":-16}],"sizeInsertions":37,"sizeDeletions":-16},{"number":"6","revision":"8f2eb4ae0511ada04fd3af2a38977b03247467fa","parents":["54cda0a5d089dc27fc8bb42d4f3c53289e24516d"],"ref":"refs/changes/29/1829/6","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1495112159,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1493922495,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1493897983,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"tools/build_iso","line":194,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"This ought to be a tab."},{"file":"tools/build_iso","line":194,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Done"},{"file":"tools/build_iso","line":322,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"This ought to be a tab."},{"file":"tools/build_iso","line":322,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/build_iso","type":"MODIFIED","insertions":37,"deletions":-16}],"sizeInsertions":37,"sizeDeletions":-16},{"number":"7","revision":"bf8378ae83cdb843bef1a83f566887a2264896f9","parents":["54cda0a5d089dc27fc8bb42d4f3c53289e24516d"],"ref":"refs/changes/29/1829/7","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1495448837,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1495487097,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1497905516,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1495448876,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/build_iso","type":"MODIFIED","insertions":37,"deletions":-16}],"sizeInsertions":37,"sizeDeletions":-16},{"number":"8","revision":"d0ad6a23639c036e5dba3161d5b7505d27e8eb1b","parents":["4565251a97d2bd9913b0a0264f49964fd975fa7a"],"ref":"refs/changes/29/1829/8","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1498141386,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1495487097,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1497905516,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1495448876,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/build_iso","type":"MODIFIED","insertions":37,"deletions":-16}],"sizeInsertions":37,"sizeDeletions":-16},{"number":"9","revision":"ce15ce2e5d1959be59d504b53f0f7934aac2c49b","parents":["4565251a97d2bd9913b0a0264f49964fd975fa7a"],"ref":"refs/changes/29/1829/9","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1498141639,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1495487097,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1498236204,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1497905516,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1495448876,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"tools/build_iso","type":"MODIFIED","insertions":37,"deletions":-16}],"sizeInsertions":37,"sizeDeletions":-16},{"number":"10","revision":"97cc48dcd08f27d261846c242efa67c742249e70","parents":["c336ed21b9c25867faae4979773e7c2b52c1ee24"],"ref":"refs/changes/29/1829/10","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1498242075,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1495487097,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1498236204,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1497905516,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1495448876,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"tools/build_iso","type":"MODIFIED","insertions":37,"deletions":-16}],"sizeInsertions":37,"sizeDeletions":-16},{"number":"11","revision":"e6105b5797e14be71548921f16d9e17e5f2ee33a","parents":["c336ed21b9c25867faae4979773e7c2b52c1ee24"],"ref":"refs/changes/29/1829/11","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1498242210,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1495487097,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1498236204,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1497905516,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1495448876,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1498267512,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"tools/build_iso","type":"MODIFIED","insertions":37,"deletions":-16}],"sizeInsertions":37,"sizeDeletions":-16}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}]}