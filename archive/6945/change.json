{"project":"joyent/sdc-cloudapi","branch":"master","topic":"joyent/sdc-ufds#3","id":"I8bb1d8c590aefa9c2eed48fc3ced22aba64f91ef","number":"6945","subject":"joyent/sdc-ufds#3 want smartlogin to support administrator role","owner":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"url":"https://cr.joyent.us/6945","commitMessage":"joyent/sdc-ufds#3 want smartlogin to support administrator role\n","createdOn":1569906897,"lastUpdated":1570714010,"open":true,"status":"NEW","comments":[{"timestamp":1569906897,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 1."},{"timestamp":1569906944,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n(2 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1569907099,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 2."},{"timestamp":1569907151,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1570060707,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 3."},{"timestamp":1570060761,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1570503155,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Topic set to joyent/sdc-ufds#3"},{"timestamp":1570662205,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1570714010,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 3:\n\n(1 comment)"}],"currentPatchSet":{"number":"3","revision":"8bb1d8c590aefa9c2eed48fc3ced22aba64f91ef","parents":["a6876b6a9252e8afe0e2b344b7713fe8da739059"],"ref":"refs/changes/45/6945/3","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1570060707,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1570060761,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/machines.js","line":1420,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Shouldn\u0027t we also check Array.isArray before we just check keys.length here?"},{"file":"lib/machines.js","line":1420,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"ufds.account#listKeys() is  a wrapper around ufds.search() (see https://github.com/joyent/node-ufds/blob/master/lib/index.js#L1352), which either gives an error as the first arg or gives an array as the second arg (see https://github.com/joyent/node-ufds/blob/master/lib/index.js#L3198)\n\nSo there\u0027s no way to get a non-array here without the err3 block before this running that I can see?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/machines.js","type":"MODIFIED","insertions":82,"deletions":-12}],"sizeInsertions":82,"sizeDeletions":-12},"patchSets":[{"number":"1","revision":"62f6e6b49d6b466512ddf87cb674100b1408a5cb","parents":["a6876b6a9252e8afe0e2b344b7713fe8da739059"],"ref":"refs/changes/45/6945/1","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1569906897,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1569906944,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/machines.js","line":1347,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: anonymous function does not always return value"},{"file":"lib/machines.js","line":1354,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: anonymous function does not always return value"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/machines.js","type":"MODIFIED","insertions":58,"deletions":-12}],"sizeInsertions":58,"sizeDeletions":-12},{"number":"2","revision":"f45b0253a8bab27d5b6d642bee0709fdd52666aa","parents":["a6876b6a9252e8afe0e2b344b7713fe8da739059"],"ref":"refs/changes/45/6945/2","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1569907099,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1569907151,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/machines.js","type":"MODIFIED","insertions":58,"deletions":-12}],"sizeInsertions":58,"sizeDeletions":-12},{"number":"3","revision":"8bb1d8c590aefa9c2eed48fc3ced22aba64f91ef","parents":["a6876b6a9252e8afe0e2b344b7713fe8da739059"],"ref":"refs/changes/45/6945/3","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1570060707,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1570060761,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/machines.js","line":1420,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Shouldn\u0027t we also check Array.isArray before we just check keys.length here?"},{"file":"lib/machines.js","line":1420,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"ufds.account#listKeys() is  a wrapper around ufds.search() (see https://github.com/joyent/node-ufds/blob/master/lib/index.js#L1352), which either gives an error as the first arg or gives an array as the second arg (see https://github.com/joyent/node-ufds/blob/master/lib/index.js#L3198)\n\nSo there\u0027s no way to get a non-array here without the err3 block before this running that I can see?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/machines.js","type":"MODIFIED","insertions":82,"deletions":-12}],"sizeInsertions":82,"sizeDeletions":-12}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}]}