{"project":"joyent/illumos-joyent","branch":"vpc","id":"I131653dd0d5c363a1b21e2416140752708577d57","number":"3707","subject":"OS-6817 Would like route -z","owner":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"url":"https://cr.joyent.us/3707","commitMessage":"OS-6817 Would like route -z\n","createdOn":1521687548,"lastUpdated":1524260418,"open":false,"status":"ABANDONED","comments":[{"timestamp":1521687548,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 1."},{"timestamp":1521687678,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1521688040,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 1:\n\n(1 comment)\n\nOne nit."},{"timestamp":1521688200,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1521732067,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 2."},{"timestamp":1521732115,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 3."},{"timestamp":1521732326,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 3:\n\n(1 comment)\n\nJust noticed the man page update.  Have you tested \"route -z \u003cshared-stack-zone\u003e\" yet? If you need a shared-stack, I can probably test on OmniOS..."},{"timestamp":1521733716,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1522077830,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 4."},{"timestamp":1522077911,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 3:\n\n\u003e (1 comment)\n \u003e \n \u003e Just noticed the man page update.  Have you tested \"route -z\n \u003e \u003cshared-stack-zone\u003e\" yet? If you need a shared-stack, I can\n \u003e probably test on OmniOS...\n\nI\u0027ve since tested it on OmniOS both in shared-stack and exclusive-stack zones, works as intended in both."},{"timestamp":1522079634,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1522956466,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 5."},{"timestamp":1522958058,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1522958413,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 5: Integration-Approval+1"},{"timestamp":1524260418,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Abandoned"}],"currentPatchSet":{"number":"5","revision":"131653dd0d5c363a1b21e2416140752708577d57","parents":["eeea3324390a7f8737ab81a72bd0965b3ead7f4b"],"ref":"refs/changes/07/3707/5","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1522956466,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522958058,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1522958413,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/cmd-inet/usr.sbin/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/cmd-inet/usr.sbin/route.c","type":"MODIFIED","insertions":87,"deletions":-1},{"file":"usr/src/man/man1m/route.1m","type":"MODIFIED","insertions":19,"deletions":-9}],"sizeInsertions":109,"sizeDeletions":-11},"patchSets":[{"number":"1","revision":"5bff7a24ffda73cc337de8af8d4d74b22801ad95","parents":["9797cda932a36703cbf9647cf08456e534f61374"],"ref":"refs/changes/07/3707/1","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1521687548,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/cmd/cmd-inet/usr.sbin/route.c","line":3289,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"I\u0027d ask what do other commands do here, but looking through svcadm(1M), it\u0027s not at all clear."},{"file":"usr/src/cmd/cmd-inet/usr.sbin/route.c","line":3289,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"I could see an argument both ways -- allowing \u0027-z global\u0027 is nice in that you don\u0027t have to special case automation -- from my sysadmin days, it was always slightly annoying when you wanted to do something like \u0027for z in $(zoneadm list | grep -v global); do ...\u0027 and had to always include the grep -v and then do the global zone separate... but -z could also imply a NGZ, so global would be an error."},{"file":"usr/src/cmd/cmd-inet/usr.sbin/route.c","line":3310,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"I should probably expand on the comment -- you cannot have contracts straddle zones, so for zone stuff, you create a new contract + fork so the child gets the new contract, then you can zone_enter, though the contract is just to satisfy the zone_enter() requirements"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/cmd-inet/usr.sbin/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/cmd/cmd-inet/usr.sbin/route.c","type":"MODIFIED","insertions":87,"deletions":-1}],"sizeInsertions":88,"sizeDeletions":-1},{"number":"2","revision":"527dfe5f971999b2c0bfb085433b3ec69c3abc00","parents":["9797cda932a36703cbf9647cf08456e534f61374"],"ref":"refs/changes/07/3707/2","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1521732067,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/cmd/cmd-inet/usr.sbin/route.c","line":3314,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Thank you!"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/cmd-inet/usr.sbin/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/cmd/cmd-inet/usr.sbin/route.c","type":"MODIFIED","insertions":92,"deletions":-1}],"sizeInsertions":93,"sizeDeletions":-1},{"number":"3","revision":"6d7e9b391938f2ece1b5b09ffdc3d8b5b956c977","parents":["9797cda932a36703cbf9647cf08456e534f61374"],"ref":"refs/changes/07/3707/3","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1521732115,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/cmd/cmd-inet/usr.sbin/route.c","line":2606,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Question:  Do we want to print the zonename here if zonename !\u003d NULL?"},{"file":"usr/src/cmd/cmd-inet/usr.sbin/route.c","line":2606,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"There\u0027d be several places where we\u0027d probably want to do that (if we do), though looking at svcs (as something else that uses -z in a similar fashion) it doesn\u0027t seem to do anything similar."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/cmd-inet/usr.sbin/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/cmd/cmd-inet/usr.sbin/route.c","type":"MODIFIED","insertions":92,"deletions":-1},{"file":"usr/src/man/man1m/route.1m","type":"MODIFIED","insertions":19,"deletions":-9}],"sizeInsertions":112,"sizeDeletions":-10},{"number":"4","revision":"9547b97180a6cae547173b54f56b6ba3163edf4c","parents":["8b3dabafecaf7a0d1343854eb757536a9b07a5fe"],"ref":"refs/changes/07/3707/4","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1522077830,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/cmd-inet/usr.sbin/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/cmd/cmd-inet/usr.sbin/route.c","type":"MODIFIED","insertions":87,"deletions":-1},{"file":"usr/src/man/man1m/route.1m","type":"MODIFIED","insertions":19,"deletions":-9}],"sizeInsertions":108,"sizeDeletions":-11},{"number":"5","revision":"131653dd0d5c363a1b21e2416140752708577d57","parents":["eeea3324390a7f8737ab81a72bd0965b3ead7f4b"],"ref":"refs/changes/07/3707/5","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1522956466,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1522958413,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522958058,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/cmd-inet/usr.sbin/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/cmd-inet/usr.sbin/route.c","type":"MODIFIED","insertions":87,"deletions":-1},{"file":"usr/src/man/man1m/route.1m","type":"MODIFIED","insertions":19,"deletions":-9}],"sizeInsertions":109,"sizeDeletions":-11}],"allReviewers":[{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}]}