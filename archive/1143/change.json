{"project":"joyent/sdc-docker","branch":"master","id":"I63bde30181e921296f304f8191b25e36bcc91ed4","number":"1143","subject":"DOCKER-987 Update docker build to allow container package selection from a label","owner":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"url":"https://cr.joyent.us/1143","commitMessage":"DOCKER-987 Update docker build to allow container package selection from a label\n","createdOn":1482173939,"lastUpdated":1482187387,"open":false,"status":"MERGED","comments":[{"timestamp":1482173939,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 1."},{"timestamp":1482173940,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit b5d6aa511330d03c1f2efc2ef75e0226d7ced756\n    \n    DOCKER-987 Update docker build to allow container package selection from a label"},{"timestamp":1482173991,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1482184824,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 1:\n\n(4 comments)"},{"timestamp":1482185249,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\n(4 comments)"},{"timestamp":1482185336,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 2."},{"timestamp":1482185337,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit f43d2885443aecc1f9e90272ba816ed8791fb21d\n    \n    updates from review - add return, adjust test err handling, add match checks"},{"timestamp":1482185398,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1482187044,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 2: Code-Review-1 Integration-Approval-1"},{"timestamp":1482187053,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1482187387,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Todd Whiteman"}],"currentPatchSet":{"number":"2","revision":"63bde30181e921296f304f8191b25e36bcc91ed4","parents":["bd8f5f43e862215d8dd39157ee8ff06363b45241"],"ref":"refs/changes/43/1143/2","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1482185336,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482185398,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1482187053,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1482187053,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"SUBM","value":"1","grantedOn":1482187387,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/build.js","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"test/integration/api-build.test.js","type":"MODIFIED","insertions":132,"deletions":-12},{"file":"test/integration/cli-packagelabels.test.js","type":"MODIFIED","insertions":13,"deletions":-49},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":46,"deletions":0}],"sizeInsertions":201,"sizeDeletions":-62},"patchSets":[{"number":"1","revision":"915f1612ede2bdea17140fb4cc69c644c33a1c72","parents":["bd8f5f43e862215d8dd39157ee8ff06363b45241"],"ref":"refs/changes/43/1143/1","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1482173939,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482173991,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/backends/sdc/build.js","line":170,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Want a return here?"},{"file":"lib/backends/sdc/build.js","line":170,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Thanks - I sure do."},{"file":"test/integration/api-build.test.js","line":425,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Small nit, is there a reason you\u0027re not testing for the existence of an error as the exceptional case? Just made me read the code a couple of times to see if there was something I was missing.\n\n    if (err) {\n        next(err);\n        return;\n    }\n    \n    /* success case */\n\nAny reason this callback doesn\u0027t call `tt.ifError` with error obejct here too? The next function, createTar, uses it in its callback."},{"file":"test/integration/api-build.test.js","line":425,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Your suggestion looks better - will do."},{"file":"test/integration/api-build.test.js","line":483,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Could add a check to confirm match succeeded."},{"file":"test/integration/api-build.test.js","line":483,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"test/integration/api-build.test.js","line":490,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Could add a check to confirm match succeeded."},{"file":"test/integration/api-build.test.js","line":490,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/build.js","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"test/integration/api-build.test.js","type":"MODIFIED","insertions":128,"deletions":-12},{"file":"test/integration/cli-packagelabels.test.js","type":"MODIFIED","insertions":13,"deletions":-49},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":46,"deletions":0}],"sizeInsertions":196,"sizeDeletions":-62},{"number":"2","revision":"63bde30181e921296f304f8191b25e36bcc91ed4","parents":["bd8f5f43e862215d8dd39157ee8ff06363b45241"],"ref":"refs/changes/43/1143/2","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1482185336,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482185398,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1482187053,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1482187053,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"SUBM","value":"1","grantedOn":1482187387,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/build.js","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"test/integration/api-build.test.js","type":"MODIFIED","insertions":132,"deletions":-12},{"file":"test/integration/cli-packagelabels.test.js","type":"MODIFIED","insertions":13,"deletions":-49},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":46,"deletions":0}],"sizeInsertions":201,"sizeDeletions":-62}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}]}