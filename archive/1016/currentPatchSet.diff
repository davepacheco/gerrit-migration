commit 67878b9a84e9b4094f6d3db37dd2b1fc8bf1d332 (refs/changes/16/1016/1)
Author: Chris Burroughs <chris.burroughs@joyent.com>
Date:   2016-11-30T13:56:06-05:00 (2 years, 10 months ago)
    
    ./bin/triton key delete awesome-triton-testing

diff --git a/lib/do_key/do_delete.js b/lib/do_key/do_delete.js
index 69e77d2..d481201 100644
--- a/lib/do_key/do_delete.js
+++ b/lib/do_key/do_delete.js
@@ -35,7 +35,8 @@ function do_delete(subcmd, opts, args, cb) {
 
     var cli = this.top;
 
-    vasync.pipeline({funcs: [
+    vasync.pipeline({arg: {cli: this.top}, funcs: [
+        common.cliSetupTritonApi,
         function confirm(_, next) {
             if (opts.yes) {
                 return next();
