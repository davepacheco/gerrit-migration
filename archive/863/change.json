{"project":"joyent/triton","branch":"master","id":"Id4f0f1dbc3e2aeb71a6088d313cbca991ebae7a8","number":"863","subject":"joyent/triton#219 sdc-usbkey mount fails in CoaL on KVM Reviewed by: Chris Burroughs \u003cchris.burroughs@joyent.com\u003e Approved by: Chris Burroughs \u003cchris.burroughs@joyent.com\u003e","owner":{"name":"June Yi","email":"june.yi@samsung.com","username":"gochist"},"url":"https://cr.joyent.us/863","commitMessage":"joyent/triton#219 sdc-usbkey mount fails in CoaL on KVM\nReviewed by: Chris Burroughs \u003cchris.burroughs@joyent.com\u003e\nApproved by: Chris Burroughs \u003cchris.burroughs@joyent.com\u003e\n","createdOn":1478709541,"lastUpdated":1478885372,"open":false,"status":"MERGED","comments":[{"timestamp":1478709541,"reviewer":{"name":"June Yi","email":"june.yi@samsung.com","username":"gochist"},"message":"Uploaded patch set 1."},{"timestamp":1478709548,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1478719391,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Patch Set 1: Code-Review-1\n\nI tried this out locally, and when combined when --use-raw-images I get this error when starting the vm:\n\n```\nError starting domain: internal error: process exited while connecting to monitor: qemu-system-x86_64: -set device.virtio-disk0.scsi\u003doff: there is no device \"virtio-disk0\" defined\n\n\nTraceback (most recent call last):\n  File \"/usr/share/virt-manager/virtManager/asyncjob.py\", line 91, in cb_wrapper\n    callback(asyncjob, *args, **kwargs)\n  File \"/usr/share/virt-manager/virtManager/asyncjob.py\", line 127, in tmpcb\n    callback(*args, **kwargs)\n  File \"/usr/share/virt-manager/virtManager/domain.py\", line 1355, in startup\n    self._backend.create()\n  File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 999, in create\n    if ret \u003d\u003d -1: raise libvirtError (\u0027virDomainCreate() failed\u0027, dom\u003dself)\nlibvirtError: internal error: process exited while connecting to monitor: qemu-system-x86_64: -set device.virtio-disk0.scsi\u003doff: there is no device \"virtio-disk0\" defined\n```"},{"timestamp":1478732256,"reviewer":{"name":"June Yi","email":"june.yi@samsung.com","username":"gochist"},"message":"Uploaded patch set 2."},{"timestamp":1478732263,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1478732358,"reviewer":{"name":"June Yi","email":"june.yi@samsung.com","username":"gochist"},"message":"Patch Set 2:\n\nI\u0027m sorry that I forgot testing --use-raw-images option. Please try this again."},{"timestamp":1478885323,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1478885362,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Patch Set 3: Commit message was updated."},{"timestamp":1478885372,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Chris Burroughs"}],"currentPatchSet":{"number":"3","revision":"acabdd34745c02fbc950ddfdbfcb06d58b4f2414","parents":["97aa7c32d73b3c0fd989268b4015d247ab119ae5"],"ref":"refs/changes/63/863/3","uploader":{"name":"June Yi","email":"june.yi@samsung.com","username":"gochist"},"createdOn":1478885362,"author":{"name":"June Yi","email":"june.yi@samsung.com","username":"gochist"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1478732263,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1478885323,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1478885323,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}},{"type":"SUBM","value":"1","grantedOn":1478885372,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"tools/coal-linux-kvm-setup","type":"MODIFIED","insertions":2,"deletions":-10}],"sizeInsertions":2,"sizeDeletions":-10},"patchSets":[{"number":"1","revision":"d65c48ed4a365f6fdf7b34e232fea4ea242e48ea","parents":["97aa7c32d73b3c0fd989268b4015d247ab119ae5"],"ref":"refs/changes/63/863/1","uploader":{"name":"June Yi","email":"june.yi@samsung.com","username":"gochist"},"createdOn":1478709541,"author":{"name":"June Yi","email":"june.yi@samsung.com","username":"gochist"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1478709548,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1478719391,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/coal-linux-kvm-setup","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":2,"sizeDeletions":-2},{"number":"2","revision":"d4f0f1dbc3e2aeb71a6088d313cbca991ebae7a8","parents":["97aa7c32d73b3c0fd989268b4015d247ab119ae5"],"ref":"refs/changes/63/863/2","uploader":{"name":"June Yi","email":"june.yi@samsung.com","username":"gochist"},"createdOn":1478732256,"author":{"name":"June Yi","email":"june.yi@samsung.com","username":"gochist"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1478732263,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1478885323,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1478885323,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/coal-linux-kvm-setup","type":"MODIFIED","insertions":2,"deletions":-10}],"sizeInsertions":2,"sizeDeletions":-10},{"number":"3","revision":"acabdd34745c02fbc950ddfdbfcb06d58b4f2414","parents":["97aa7c32d73b3c0fd989268b4015d247ab119ae5"],"ref":"refs/changes/63/863/3","uploader":{"name":"June Yi","email":"june.yi@samsung.com","username":"gochist"},"createdOn":1478885362,"author":{"name":"June Yi","email":"june.yi@samsung.com","username":"gochist"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1478732263,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1478885323,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1478885323,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}},{"type":"SUBM","value":"1","grantedOn":1478885372,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"tools/coal-linux-kvm-setup","type":"MODIFIED","insertions":2,"deletions":-10}],"sizeInsertions":2,"sizeDeletions":-10}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},{"name":"June Yi","email":"june.yi@samsung.com","username":"gochist"}]}