commit 094977453e9807215aeae30766a86a6f60f0333e (refs/changes/93/3093/2)
Author: Nick Zivkovic <nick.zivkovic@joyent.com>
Date:   2018-02-22T23:14:58+00:00 (1 year, 7 months ago)
    
    NAPI-364 Unable to use VLAN 1

diff --git a/lib/util/validate.js b/lib/util/validate.js
index 1d00a3e..25e9bc4 100644
--- a/lib/util/validate.js
+++ b/lib/util/validate.js
@@ -315,8 +315,7 @@ function validateMTU(min, errmsg) {
  */
 function validateVLAN(_, name, vlan_id, callback) {
     var id = Number(vlan_id);
-    if (isNaN(id) || id < 0 ||
-        id === 1 || id > 4094) {
+    if (isNaN(id) || id < 0 || id > 4094) {
         return callback(errors.invalidParam(name, constants.VLAN_MSG));
     }
 
diff --git a/test/integration/fabrics-invalid.test.js b/test/integration/fabrics-invalid.test.js
index b5f08af..7f4c764 100644
--- a/test/integration/fabrics-invalid.test.js
+++ b/test/integration/fabrics-invalid.test.js
@@ -118,8 +118,6 @@ test('create invalid VLANs', function (t) {
         // vlan_id
         [ { vlan_id: -1 },
             mod_err.invalidParam('vlan_id', mod_err.msg.vlan) ],
-        [ { vlan_id: 1 },
-            mod_err.invalidParam('vlan_id', mod_err.msg.vlan) ],
         [ { vlan_id: 4095 },
             mod_err.invalidParam('vlan_id', mod_err.msg.vlan) ]
     ];
@@ -323,8 +321,6 @@ test('create invalid networks', function (t) {
         // vlan_id
         [ { vlan_id: -1 },
             mod_err.invalidParam('vlan_id', mod_err.msg.vlan) ],
-        [ { vlan_id: 1 },
-            mod_err.invalidParam('vlan_id', mod_err.msg.vlan) ],
         [ { vlan_id: 4095 },
             mod_err.invalidParam('vlan_id', mod_err.msg.vlan) ],
 
