From 5fadfd0a3a6f84191c474cc47ff2d5862b1232f0 Mon Sep 17 00:00:00 2001
From: Nick Zivkovic <nick.zivkovic@joyent.com>
Date: Mon, 11 Dec 2017 23:57:30 +0000
Subject: [PATCH] NAPI-364 Unable to use VLAN 1 Reviewed by: Cody Peter Mello
 <cody.mello@joyent.com> Approved by: Cody Peter Mello <cody.mello@joyent.com>

---
 lib/util/validate.js                     | 3 +--
 test/integration/fabrics-invalid.test.js | 4 ----
 2 files changed, 1 insertion(+), 6 deletions(-)

diff --git a/lib/util/validate.js b/lib/util/validate.js
index 24f8731..80fc585 100644
--- a/lib/util/validate.js
+++ b/lib/util/validate.js
@@ -319,8 +319,7 @@ function validateMTU(min, errmsg) {
  */
 function validateVLAN(_, name, vlan_id, callback) {
     var id = Number(vlan_id);
-    if (isNaN(id) || id < 0 ||
-        id === 1 || id > 4094) {
+    if (isNaN(id) || id < 0 || id > 4094) {
         return callback(errors.invalidParam(name, constants.VLAN_MSG));
     }
 
diff --git a/test/integration/fabrics-invalid.test.js b/test/integration/fabrics-invalid.test.js
index b5f08af..7f4c764 100644
--- a/test/integration/fabrics-invalid.test.js
+++ b/test/integration/fabrics-invalid.test.js
@@ -118,8 +118,6 @@ test('create invalid VLANs', function (t) {
         // vlan_id
         [ { vlan_id: -1 },
             mod_err.invalidParam('vlan_id', mod_err.msg.vlan) ],
-        [ { vlan_id: 1 },
-            mod_err.invalidParam('vlan_id', mod_err.msg.vlan) ],
         [ { vlan_id: 4095 },
             mod_err.invalidParam('vlan_id', mod_err.msg.vlan) ]
     ];
@@ -323,8 +321,6 @@ test('create invalid networks', function (t) {
         // vlan_id
         [ { vlan_id: -1 },
             mod_err.invalidParam('vlan_id', mod_err.msg.vlan) ],
-        [ { vlan_id: 1 },
-            mod_err.invalidParam('vlan_id', mod_err.msg.vlan) ],
         [ { vlan_id: 4095 },
             mod_err.invalidParam('vlan_id', mod_err.msg.vlan) ],
 
-- 
2.21.0

