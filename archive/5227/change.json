{"project":"joyent/waferlock","branch":"master","topic":"lullaby-phase-1","id":"I07fa18da0d7219f3406b17dcb37ba08a41bfee2d","number":"5227","subject":"TOOLS-2043 Lullaby 3: Improving the Manta/Triton build TOOLS-2062 eng.git should be a git submodule of Triton/Manta repositories TOOLS-2063 shared tooling needed to build Manta/Triton agents Reviewed by: Chris Burroughs \u003cchris.burroughs@joyent.com\u003e Review","owner":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"url":"https://cr.joyent.us/5227","commitMessage":"TOOLS-2043 Lullaby 3: Improving the Manta/Triton build\nTOOLS-2062 eng.git should be a git submodule of Triton/Manta repositories\nTOOLS-2063 shared tooling needed to build Manta/Triton agents\nReviewed by: Chris Burroughs \u003cchris.burroughs@joyent.com\u003e\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Chris Burroughs \u003cchris.burroughs@joyent.com\u003e\n","createdOn":1544531076,"lastUpdated":1548196974,"open":false,"status":"MERGED","comments":[{"timestamp":1544531076,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 1."},{"timestamp":1544531616,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1544622071,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 2."},{"timestamp":1544622477,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1547207639,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Topic set to lullaby-phase-1"},{"timestamp":1547829553,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 3."},{"timestamp":1547829588,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1547848578,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Patch Set 3: Code-Review+1\n\n(3 comments)"},{"timestamp":1547848628,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Patch Set 2:\n\n:-( Apparently the above comments were stuck in gerrit\u0027s buffer."},{"timestamp":1548075443,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 2:\n\n(3 comments)"},{"timestamp":1548075475,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 4."},{"timestamp":1548075496,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1548075506,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 2:\n\nThe changes in patch set 4 address Chris\u0027s comments on patch set 3."},{"timestamp":1548090703,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1548094332,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1\n\n(1 comment)"},{"timestamp":1548183075,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1"},{"timestamp":1548192370,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 5."},{"timestamp":1548192417,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1548193737,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1"},{"timestamp":1548196974,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Tim Foster"}],"currentPatchSet":{"number":"5","revision":"07fa18da0d7219f3406b17dcb37ba08a41bfee2d","parents":["6f58d8068090f3be74c001775f8985c06cd3e74a"],"ref":"refs/changes/27/5227/5","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1548192370,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1548192417,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1548193737,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1548193737,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1548196974,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":-1},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":24,"deletions":-20},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"smf/manifests/waferlock.xml","fileOld":"smf/manifests/waferlock.xml.in","type":"RENAMED","insertions":2,"deletions":-8},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-105},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-87},{"file":"tools/mk/Makefile.manpages.defs","type":"DELETED","insertions":0,"deletions":-128},{"file":"tools/mk/Makefile.manpages.targ","type":"DELETED","insertions":0,"deletions":-28},{"file":"tools/mk/Makefile.node.defs","type":"DELETED","insertions":0,"deletions":-110},{"file":"tools/mk/Makefile.node.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.node_modules.defs","type":"DELETED","insertions":0,"deletions":-68},{"file":"tools/mk/Makefile.node_modules.targ","type":"DELETED","insertions":0,"deletions":-31},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-159},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-32},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-345}],"sizeInsertions":32,"sizeDeletions":-1246},"patchSets":[{"number":"1","revision":"08ff96af50d06a698f86249130a2af6f86e44cb0","parents":["6f58d8068090f3be74c001775f8985c06cd3e74a"],"ref":"refs/changes/27/5227/1","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1544531076,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1544531616,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":23,"deletions":-19},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"smf/manifests/waferlock.xml.in","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-105},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-87},{"file":"tools/mk/Makefile.manpages.defs","type":"DELETED","insertions":0,"deletions":-128},{"file":"tools/mk/Makefile.manpages.targ","type":"DELETED","insertions":0,"deletions":-28},{"file":"tools/mk/Makefile.node.defs","type":"DELETED","insertions":0,"deletions":-110},{"file":"tools/mk/Makefile.node.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.node_modules.defs","type":"DELETED","insertions":0,"deletions":-68},{"file":"tools/mk/Makefile.node_modules.targ","type":"DELETED","insertions":0,"deletions":-31},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-159},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-32},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-345}],"sizeInsertions":30,"sizeDeletions":-1237},{"number":"2","revision":"e92fe970a2f9ebcabd3024617b7f04574fb1d8b0","parents":["6f58d8068090f3be74c001775f8985c06cd3e74a"],"ref":"refs/changes/27/5227/2","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1544622071,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1544622477,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":".gitignore","line":15,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"I noticed a pattern like this in several of the CRs.  Is this an existing thing in all cases we just were not ignoring, or a new file?  If new, why not in bits or build?"},{"file":".gitignore","line":15,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"The convention so far has been that the package archive file\nis dropped at the top level of the repository, and we\u0027re\ntrying to stay MG compatible (so that MG doesn\u0027t have to be\nmodified to go looking for the files in different locations)\n\nPreviously though, the presence of a pkg archive was causing\ngit to declare the repo as \"dirty\" if we\u0027d ever built in it\nbefore, hence the addition of this .gitignore line - so yep,\nwe weren\u0027t previously ignoring those.\n\nThat said, I\u0027m glad you asked about this, since this line\ndoesn\u0027t reflect our move from .bz2 -\u003e .gz for pkg archives.\nI\u0027ll fix that and make sure the same mistake hasn\u0027t been made\nfor the other agents.\n\nI\u0027ve filed TOOLS-2155 to have these move to ./build after MG\ndoes retire, linking it to TOOLS-2143"},{"file":"Makefile","line":8,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"blarg year"},{"file":"Makefile","line":8,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Done"},{"file":"smf/manifests/waferlock.xml.in","line":29,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"The connection to the rest of the changes is not clear to me."},{"file":"smf/manifests/waferlock.xml.in","line":29,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"This took a bit of unraveling, and it looks like my change\nisn\u0027t correct here.\n\nwaferlock\u0027s Makefile.smf.targ used to have it\u0027s own custom\ndefinition which replaced more strings in the input xml.in\nfile than eng.git\u0027s Makefile.smf.targ does.\n\nMany components modify SMF manifests at component runtime by\na ./boot script which replaces @PREFIX@in the xml file with\nthe actual install-location of the service before doing\nan \u0027svccfg import\u0027 of the modified manifest.\n\neg. sdc-workflow.git/boot/setup.sh\n\nso we made that SMF change in the interests of converging\non shared eng.git Makefile targets, and could have sworn we\ntested this for components which used it. Checking\nthe dates I converted this, by the time I converted\nwaferlock, sdc-manatee and manta-manatee over to shared-eng\nbits, use of waferlock had actually been backed out in the\nonly components that used it ([sdc|manta]-manatee) so it\nnever tried to run..\n\n\nOur options to do this correctly are one of:\n\na) require anything which uses waferlock do the sed dance\n   at component run time\nb) just hardcode the full path to the node runtime in\n   waferlock.xml and be done with it\nc) restore waferlock\u0027s additional rule in its top-level\n   Makefile, at the expense of some build noise:\n\ntimf@jenkins-agent-multiarch-15.4.1 (master) make\nMakefile:164: warning: overriding recipe for target \u0027smf/manifests/waferlock.xml\u0027\ndeps/eng/tools/mk/Makefile.smf.targ:39: warning: ignoring old recipe for target \u0027smf/manifests/waferlock.xml\u0027\n/mnt/tank/projects/submodule/archived/non-zfs/waferlock.git/deps/eng/tools/validate-buildenv.sh\nsed \\\n    -e \u0027s#@@NODE@@#@@PREFIX@@/build/node/bin/node#g\u0027 \\\n    -e \u0027s#@@PREFIX@@#/opt/smartdc/waferlock#g\u0027 \\\n    smf/manifests/waferlock.xml.in \u003e smf/manifests/waferlock.xml\n\nor\n\nd) change eng.git\u0027s Makefile.smf.targ rule to also replace\n   PREFIX at built-time rather than run-time and modify all\n   components to stop expecting to replace it.\n\nI think the best change for now is b) given that\n\n- our agent infrastructure always installs the agent to a\n  fixed location, so @PREFIX@ doesn\u0027t change\n- only 2 components use waferlock, both of which have it\n  disabled right now\n- we dislike build noise\n- changes to eng.git that ripple across potentially several\n  components (\u003ccomponent\u003e/boot/*.sh changes)\n  cause more churn and risk\n\nSeveral other components already do b) for their xml\nmanifests also, eg. sdc-sapi.xml so we\u0027re not even breaking\nnew ground here.\n\nWill rename and commit waferlock.xml in place of waferlock.xml.in."},{"file":"smf/manifests/waferlock.xml.in","line":29,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"+1 to (b). Over the years I have changed some of the repos to skip this dance (foo.xml.in -\u003e foo.xml via `sed` in the \"setup.sh\" boot script), because the paths are always fixed. E.g.:\n\n- https://github.com/joyent/sdc-vmapi/commit/95f05a784a24b90d42909b07c4c96e888cc89a45\n- https://github.com/joyent/sdc-sapi/commit/73af84391c89f486180f307d7bf8bf549aec43ea"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":23,"deletions":-19},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"smf/manifests/waferlock.xml.in","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-105},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-87},{"file":"tools/mk/Makefile.manpages.defs","type":"DELETED","insertions":0,"deletions":-128},{"file":"tools/mk/Makefile.manpages.targ","type":"DELETED","insertions":0,"deletions":-28},{"file":"tools/mk/Makefile.node.defs","type":"DELETED","insertions":0,"deletions":-110},{"file":"tools/mk/Makefile.node.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.node_modules.defs","type":"DELETED","insertions":0,"deletions":-68},{"file":"tools/mk/Makefile.node_modules.targ","type":"DELETED","insertions":0,"deletions":-31},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-159},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-32},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-345}],"sizeInsertions":30,"sizeDeletions":-1237},{"number":"3","revision":"e0122e9e88911d07da067b1ff3802cce48d8b573","parents":["6f58d8068090f3be74c001775f8985c06cd3e74a"],"ref":"refs/changes/27/5227/3","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1547829553,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1547829588,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547848578,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":23,"deletions":-19},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"smf/manifests/waferlock.xml.in","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-105},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-87},{"file":"tools/mk/Makefile.manpages.defs","type":"DELETED","insertions":0,"deletions":-128},{"file":"tools/mk/Makefile.manpages.targ","type":"DELETED","insertions":0,"deletions":-28},{"file":"tools/mk/Makefile.node.defs","type":"DELETED","insertions":0,"deletions":-110},{"file":"tools/mk/Makefile.node.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.node_modules.defs","type":"DELETED","insertions":0,"deletions":-68},{"file":"tools/mk/Makefile.node_modules.targ","type":"DELETED","insertions":0,"deletions":-31},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-159},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-32},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-345}],"sizeInsertions":30,"sizeDeletions":-1237},{"number":"4","revision":"841d06e21f657f724c83f4f6330a8e326e0a6d2d","parents":["6f58d8068090f3be74c001775f8985c06cd3e74a"],"ref":"refs/changes/27/5227/4","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1548075475,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1548075496,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1548094332,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1548094332,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1548183075,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1548183075,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}}],"comments":[{"file":".gitignore","line":5,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Eventually (doesn\u0027t need to be now), might want to anchor these to the top-level via:\n\n```\n/bits\n/build\n```"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":-1},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":24,"deletions":-20},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"smf/manifests/waferlock.xml","fileOld":"smf/manifests/waferlock.xml.in","type":"RENAMED","insertions":2,"deletions":-8},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-105},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-87},{"file":"tools/mk/Makefile.manpages.defs","type":"DELETED","insertions":0,"deletions":-128},{"file":"tools/mk/Makefile.manpages.targ","type":"DELETED","insertions":0,"deletions":-28},{"file":"tools/mk/Makefile.node.defs","type":"DELETED","insertions":0,"deletions":-110},{"file":"tools/mk/Makefile.node.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.node_modules.defs","type":"DELETED","insertions":0,"deletions":-68},{"file":"tools/mk/Makefile.node_modules.targ","type":"DELETED","insertions":0,"deletions":-31},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-159},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-32},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-345}],"sizeInsertions":32,"sizeDeletions":-1246},{"number":"5","revision":"07fa18da0d7219f3406b17dcb37ba08a41bfee2d","parents":["6f58d8068090f3be74c001775f8985c06cd3e74a"],"ref":"refs/changes/27/5227/5","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1548192370,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1548192417,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1548193737,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1548193737,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1548196974,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":-1},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":24,"deletions":-20},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"smf/manifests/waferlock.xml","fileOld":"smf/manifests/waferlock.xml.in","type":"RENAMED","insertions":2,"deletions":-8},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-105},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-87},{"file":"tools/mk/Makefile.manpages.defs","type":"DELETED","insertions":0,"deletions":-128},{"file":"tools/mk/Makefile.manpages.targ","type":"DELETED","insertions":0,"deletions":-28},{"file":"tools/mk/Makefile.node.defs","type":"DELETED","insertions":0,"deletions":-110},{"file":"tools/mk/Makefile.node.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.node_modules.defs","type":"DELETED","insertions":0,"deletions":-68},{"file":"tools/mk/Makefile.node_modules.targ","type":"DELETED","insertions":0,"deletions":-31},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-159},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-32},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-345}],"sizeInsertions":32,"sizeDeletions":-1246}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}]}