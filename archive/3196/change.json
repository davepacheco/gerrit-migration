{"project":"joyent/illumos-joyent","branch":"master","id":"Iedb3533d7d7ca2d45b9c452a9e8a9b30b58e3ff1","number":"3196","subject":"OS-6546 Initial support for x86 PCID","owner":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"url":"https://cr.joyent.us/3196","commitMessage":"OS-6546 Initial support for x86 PCID\n","createdOn":1515681783,"lastUpdated":1520284148,"open":false,"status":"ABANDONED","comments":[{"timestamp":1515681783,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 1."},{"timestamp":1515689119,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 2."},{"timestamp":1515695591,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 3."},{"timestamp":1515697917,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3: Code-Review+1\n\n(1 comment)"},{"timestamp":1515702662,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3:\n\nJohn, based on your earlier suggestion, I already changed the name to \"CR3_NOINVL_BIT\", but if that doesn\u0027t seem clear, I\u0027m happy to change it to whatever you suggest."},{"timestamp":1515710790,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 4."},{"timestamp":1515710899,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 4:\n\nI\u0027ve updated the PCID enabling code so that an MP system can boot up and run now when the x86_use_pcid flag is enabled with kmdb before boot."},{"timestamp":1515770534,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 5."},{"timestamp":1515770558,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 5:\n\nAdded fastboot change."},{"timestamp":1520284148,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Abandoned"}],"currentPatchSet":{"number":"5","revision":"edb3533d7d7ca2d45b9c452a9e8a9b30b58e3ff1","parents":["3f0dd18067ae2e49a2f58cbeab0ddc5ef8ee1ec6"],"ref":"refs/changes/96/3196/5","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1515770534,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/unix.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/ml/fb_swtch_src.s","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":35,"deletions":-2},{"file":"usr/src/uts/i86pc/os/mp_startup.c","type":"MODIFIED","insertions":19,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hat_i86.c","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"usr/src/uts/i86pc/vm/hat_pte.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/intel/sys/controlregs.h","type":"MODIFIED","insertions":8,"deletions":-2},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":11,"deletions":-2}],"sizeInsertions":89,"sizeDeletions":-14},"patchSets":[{"number":"1","revision":"174ff37b53ca89d81a1475233d96d71defb028d4","parents":["3f0dd18067ae2e49a2f58cbeab0ddc5ef8ee1ec6"],"ref":"refs/changes/96/3196/1","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1515681783,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":35,"deletions":-2},{"file":"usr/src/uts/i86pc/os/mp_startup.c","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hat_i86.c","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"usr/src/uts/i86pc/vm/hat_pte.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/intel/sys/controlregs.h","type":"MODIFIED","insertions":8,"deletions":-2},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":11,"deletions":-2}],"sizeInsertions":75,"sizeDeletions":-14},{"number":"2","revision":"2bce91b895558fbf7e8ac9a1ba9c530628a20f64","parents":["3f0dd18067ae2e49a2f58cbeab0ddc5ef8ee1ec6"],"ref":"refs/changes/96/3196/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1515689119,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/intel/sys/controlregs.h","line":95,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Isn\u0027t this a *no* invalidation bit? Seems like an odd name?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/unix.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":35,"deletions":-2},{"file":"usr/src/uts/i86pc/os/mp_startup.c","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hat_i86.c","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"usr/src/uts/i86pc/vm/hat_pte.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/intel/sys/controlregs.h","type":"MODIFIED","insertions":8,"deletions":-2},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":11,"deletions":-2}],"sizeInsertions":77,"sizeDeletions":-15},{"number":"3","revision":"20b85a660e1c0d0b06274de6217f0905586b2e1c","parents":["3f0dd18067ae2e49a2f58cbeab0ddc5ef8ee1ec6"],"ref":"refs/changes/96/3196/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1515695591,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515697917,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/unix.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":35,"deletions":-2},{"file":"usr/src/uts/i86pc/os/mp_startup.c","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hat_i86.c","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"usr/src/uts/i86pc/vm/hat_pte.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/intel/sys/controlregs.h","type":"MODIFIED","insertions":8,"deletions":-2},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":11,"deletions":-2}],"sizeInsertions":77,"sizeDeletions":-15},{"number":"4","revision":"4e88abf8f456991ac9a4906fd91193f76dfd7713","parents":["3f0dd18067ae2e49a2f58cbeab0ddc5ef8ee1ec6"],"ref":"refs/changes/96/3196/4","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1515710790,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/unix.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":35,"deletions":-2},{"file":"usr/src/uts/i86pc/os/mp_startup.c","type":"MODIFIED","insertions":19,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hat_i86.c","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"usr/src/uts/i86pc/vm/hat_pte.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/intel/sys/controlregs.h","type":"MODIFIED","insertions":8,"deletions":-2},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":11,"deletions":-2}],"sizeInsertions":84,"sizeDeletions":-14},{"number":"5","revision":"edb3533d7d7ca2d45b9c452a9e8a9b30b58e3ff1","parents":["3f0dd18067ae2e49a2f58cbeab0ddc5ef8ee1ec6"],"ref":"refs/changes/96/3196/5","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1515770534,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/unix.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/ml/fb_swtch_src.s","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":35,"deletions":-2},{"file":"usr/src/uts/i86pc/os/mp_startup.c","type":"MODIFIED","insertions":19,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hat_i86.c","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"usr/src/uts/i86pc/vm/hat_pte.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/intel/sys/controlregs.h","type":"MODIFIED","insertions":8,"deletions":-2},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":11,"deletions":-2}],"sizeInsertions":89,"sizeDeletions":-14}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}]}