From 101b81f53ee6aa6096a9273d0c469ccd71792f45 Mon Sep 17 00:00:00 2001
From: Marsell Kukuljevic <marsell@joyent.com>
Date: Wed, 10 Apr 2019 20:11:52 +0200
Subject: [PATCH] TRITON-1384 CNAPI/DAPI blows assertion "callback (Function)
 is required" when doing getVm

---
 lib/algorithms/hard-filter-volumes-from.js | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/lib/algorithms/hard-filter-volumes-from.js b/lib/algorithms/hard-filter-volumes-from.js
index f8fd646..220d2d7 100644
--- a/lib/algorithms/hard-filter-volumes-from.js
+++ b/lib/algorithms/hard-filter-volumes-from.js
@@ -121,7 +121,7 @@ loadVmAndFilter(log, servers, requiredVms, getVm, cb)
 
 		var vmUuid = remainingVms.shift();
 
-		return getVm({ uuid: vmUuid }, function (err, vm) {
+		return getVm({ uuid: vmUuid }, {}, function getVmCb(err, vm) {
 			if (err) {
 				log.error('Error loading VM', err);
 
-- 
2.21.0

