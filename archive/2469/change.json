{"project":"joyent/illumos-joyent","branch":"master","id":"I5ae84a5233b723c890288b775cb5317db2e54d61","number":"2469","subject":"OS-6306 accurate in-kernel zone RSS tracking Reviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e Reviewed by: Jason King \u003cjason.king@joyent.com\u003e Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Approved by: Dan McDonald \u003cdanmcd@joyent.com\u003e","owner":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"url":"https://cr.joyent.us/2469","commitMessage":"OS-6306 accurate in-kernel zone RSS tracking\nReviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e\nReviewed by: Jason King \u003cjason.king@joyent.com\u003e\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nApproved by: Dan McDonald \u003cdanmcd@joyent.com\u003e\n","createdOn":1503936232,"lastUpdated":1506603575,"open":false,"status":"MERGED","comments":[{"timestamp":1503936232,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 1."},{"timestamp":1505844383,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 1:\n\n(5 comments)\n\nThis is it so far, I\u0027ll take another look a bit later just to see if anything else stands out"},{"timestamp":1505847545,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\n(3 comments)"},{"timestamp":1505850091,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 2."},{"timestamp":1505859761,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1505877904,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1505930401,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 2:\n\n(4 comments)"},{"timestamp":1505931942,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\n(3 comments)\n\nDan, thanks for your comments so far."},{"timestamp":1505935943,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 2: Code-Review+1\n\nI didn\u0027t have much else to say, and you answered all of my questions."},{"timestamp":1505938102,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2:\n\n(8 comments)"},{"timestamp":1505940193,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\n(8 comments)"},{"timestamp":1505940615,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 3."},{"timestamp":1505948077,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 3: Code-Review+1\n\nWas thinking that maybe the negative-memory case (where you CE_WARN) might need a DTrace probe, but I\u0027m guessing it\u0027s corner-case enough to not merit one.\n\nShip it!"},{"timestamp":1505949073,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 3:\n\n(2 comments)"},{"timestamp":1505997328,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3:\n\n(2 comments)"},{"timestamp":1505997364,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 4."},{"timestamp":1506006616,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1506009884,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1506012703,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1506535348,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 4: Integration-Approval+1"},{"timestamp":1506603416,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 5: Patch Set 4 was rebased."},{"timestamp":1506603527,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1506603575,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jerry Jelinek"}],"currentPatchSet":{"number":"6","revision":"5ae84a5233b723c890288b775cb5317db2e54d61","parents":["597e7db3df75fb2976c1c29ef285e8bc6c289b4d"],"ref":"refs/changes/69/2469/6","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1506603527,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506006616,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506009884,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506012703,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506535348,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"SUBM","value":"1","grantedOn":1506603575,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/cmd/zoneadmd/mcap.c","type":"MODIFIED","insertions":13,"deletions":-223},{"file":"usr/src/uts/common/os/zone.c","type":"MODIFIED","insertions":213,"deletions":-23},{"file":"usr/src/uts/common/sys/zone.h","type":"MODIFIED","insertions":25,"deletions":-5},{"file":"usr/src/uts/common/syscall/sysconfig.c","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"usr/src/uts/common/vm/page.h","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/vm/vm_usage.c","type":"MODIFIED","insertions":1,"deletions":-25},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hment.c","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/uts/sfmmu/vm/hat_sfmmu.c","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":272,"sizeDeletions":-285},"patchSets":[{"number":"1","revision":"aa7f7eae08332b11828ac3ced528d1da9db8fe0c","parents":["4973a49c0046838ad10a0aae797a48bde5022e97"],"ref":"refs/changes/69/2469/1","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1503936232,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/os/zone.c","line":3067,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Not this change, but is it me, or is this function rather poorly named?"},{"file":"usr/src/uts/common/os/zone.c","line":3067,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Could you be more specific about what seems misleading about it?"},{"file":"usr/src/uts/common/os/zone.c","line":3067,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Whoops -- the \u0027if Soviet airport designers built a CR tool\u0027 UI of Gerrit made it look like the zone_getattr() code was part of zone_set_sched_class(), which is why I thought it seemed badly named :)"},{"file":"usr/src/uts/common/os/zone.c","line":8183,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"You\u0027re using the _nv variant to return the new value, but discarding it, would using atomic_add_64(9F) work instead?"},{"file":"usr/src/uts/common/os/zone.c","line":8183,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Good point, sorry about that. Fixed in all places."},{"file":"usr/src/uts/common/os/zone.c","line":8214,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Similar question as above on atomic_add_64(9F) vs atomic_add_64_nv(9F)"},{"file":"usr/src/uts/common/os/zone.c","line":8254,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Same question wrt atomic_add_64"},{"file":"usr/src/uts/i86pc/os/startup.c","line":2606,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Should/can we use ALL_ZONEs here for consistency w/ the other bits?"},{"file":"usr/src/uts/i86pc/os/startup.c","line":2606,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Fixed."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/zoneadmd/mcap.c","type":"MODIFIED","insertions":13,"deletions":-223},{"file":"usr/src/uts/common/os/zone.c","type":"MODIFIED","insertions":215,"deletions":-23},{"file":"usr/src/uts/common/sys/zone.h","type":"MODIFIED","insertions":25,"deletions":-5},{"file":"usr/src/uts/common/syscall/sysconfig.c","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"usr/src/uts/common/vm/page.h","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/vm/vm_usage.c","type":"MODIFIED","insertions":1,"deletions":-25},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hment.c","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/uts/sfmmu/vm/hat_sfmmu.c","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":274,"sizeDeletions":-285},{"number":"2","revision":"609f120e5fdc3f566bdab756183db8d8fc732fa3","parents":["766f80363ee325875bdcd79484e9c04427d17aec"],"ref":"refs/changes/69/2469/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1505850091,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505877904,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505935943,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"comments":[{"file":"usr/src/cmd/zoneadmd/mcap.c","line":522,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"I\u0027m sure the compiler optimizes this out to a \u003e\u003e\u003d 10 operation. Speaking of compiler, does it complain about 1024 vs. 1024ULL ?"},{"file":"usr/src/cmd/zoneadmd/mcap.c","line":522,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"No matter which way the compiler goes, this function is not in any hot path and is rarely called, even when the zone is over its cap. In addition, all of this code will go away once the next step for RFD 38 is complete."},{"file":"usr/src/uts/common/os/zone.c","line":8088,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Do zone IDs wrap after MAX_ZONES?  I\u0027ve always seen zoneid increase as I tear down or bring up zones."},{"file":"usr/src/uts/common/os/zone.c","line":8088,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Yes and then we find the next available one, although its not often you see a wrap at all given the low number of zones we actually run and the size of the id space."},{"file":"usr/src/uts/common/os/zone.c","line":8106,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Perhaps add SDT probes for when zones enter/leave the capped state?"},{"file":"usr/src/uts/common/os/zone.c","line":8106,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Good suggestion, done."},{"file":"usr/src/uts/common/os/zone.c","line":8169,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"nit: It might be worth caching \u0027curzone\u0027 for the function, since I believe it has to go through the full curthread lookup each time it\u0027s referenced."},{"file":"usr/src/uts/common/os/zone.c","line":8169,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"done"},{"file":"usr/src/uts/common/os/zone.c","line":8174,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Will this ever be true?  It appears that the p_share count is incremented before the zone-to-page association establishment is attempted."},{"file":"usr/src/uts/common/os/zone.c","line":8174,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Yes. There are two places that we can map a page; the first mapping is done by hment_assign() and p_share is 0 at that point. Subsequent mappings to the same page are done by hment_insert() and p_share will be \u003e 0 in that call path."},{"file":"usr/src/uts/common/os/zone.c","line":8198,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I\u0027d be interested in the kind of overhead incurred by this find_by_id/zone_hold/zone_rele activity when pages are coming and going as part of typical workloads."},{"file":"usr/src/uts/common/os/zone.c","line":8198,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"In general this won\u0027t be a big deal because most pages are not shared across multiple zones. In our use-case, it is mainly going to be things from the platform with libraries like libc being the main thing."},{"file":"usr/src/uts/common/os/zone.c","line":8201,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"If the zone can\u0027t be found, does it make sense to still set the page ownership to ALL_ZONES?"},{"file":"usr/src/uts/common/os/zone.c","line":8201,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Yes. ALL_ZONES is used to indicate pages not in use by a single zone, so any page that free for example should be marked this way. There is some cases where a zone can go away before we free up the page."},{"file":"usr/src/uts/common/os/zone.c","line":8213,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Maybe do this at the top scope of the function after the initial zoneid check, so it doesn\u0027t need to be repeated above?  The cases where it\u0027s not used are slim."},{"file":"usr/src/uts/common/os/zone.c","line":8213,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"I deliberately structured the code this way to avoid doing the work at all if possible. I want this function to be as fast as possible since it is in the page mapping path."},{"file":"usr/src/uts/common/os/zone.c","line":8213,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I imagine it pales in comparison to the zone_rele(), especially since it\u0027d only be \"extra\" when zone_find_by_id() fails, but I\u0027ll defer to your instincts."},{"file":"usr/src/uts/common/os/zone.c","line":8213,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"I was probably being too extreme and you\u0027re right. I changed this as you suggested."},{"file":"usr/src/uts/common/os/zone.c","line":8217,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Is there any reason this shouldn\u0027t be fatal?"},{"file":"usr/src/uts/common/os/zone.c","line":8217,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"I debated panicing on this case, but since this code is new, I am concerned about destabilizing production if there is some strange case here that I did not consider. I\u0027ve never been able to hit this (obviously) but I\u0027d rather be conservative, keep the machine running, and fix things up. I could add an ASSERT here but since we don\u0027t run DEBUG in production I\u0027m not sure how much good it will do."},{"file":"usr/src/uts/common/sys/zone.h","line":74,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Ahh, yes it does wrap."},{"file":"usr/src/uts/common/vm/page.h","line":532,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Think we\u0027ll never go above 32767 zones? I\u0027d have suggested making this unsigned, but ALL_ZONES is -1."},{"file":"usr/src/uts/common/vm/page.h","line":532,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"I don\u0027t see that happening in the foreseeable future. Just getting to our current 8k limit is going to be a lot of work (if we want the zones to actually do anything). If we do expand the zone range down the road, this could be revisited, but in the meantime there is no reason to burn more memory on this, since every bytes in the page_t counts in terms of overhead."},{"file":"usr/src/uts/common/vm/page.h","line":532,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"If we were serious about stretching this via an unsigned value, we could consider GLOBAL_ZONEID representing pages that weren\u0027t being accounted to a single non-global zone.  We would lose page accounting for the GZ, but I\u0027m not sure that would be a tragedy?"},{"file":"usr/src/uts/common/vm/page.h","line":532,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Although we never do it, if we want this upstream someday then it is possible to set a physcap on the GZ and some poor fool might actually do that. In general I think this will be the least of our worries for a long time."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/zoneadmd/mcap.c","type":"MODIFIED","insertions":13,"deletions":-223},{"file":"usr/src/uts/common/os/zone.c","type":"MODIFIED","insertions":215,"deletions":-23},{"file":"usr/src/uts/common/sys/zone.h","type":"MODIFIED","insertions":25,"deletions":-5},{"file":"usr/src/uts/common/syscall/sysconfig.c","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"usr/src/uts/common/vm/page.h","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/vm/vm_usage.c","type":"MODIFIED","insertions":1,"deletions":-25},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hment.c","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/uts/sfmmu/vm/hat_sfmmu.c","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":274,"sizeDeletions":-285},{"number":"3","revision":"aa739496b648934eb4cb673d074dad3c93bb62db","parents":["766f80363ee325875bdcd79484e9c04427d17aec"],"ref":"refs/changes/69/2469/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1505940615,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505948077,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"comments":[{"file":"usr/src/uts/common/os/zone.c","line":8198,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"With \u0027zone\u0027 being used to cache curzone above, this is now aliased.  Since none of the logic in this block needs curzone, it\u0027s probably fine to just reuse it?"},{"file":"usr/src/uts/common/os/zone.c","line":8198,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Missed this, fixed."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/zoneadmd/mcap.c","type":"MODIFIED","insertions":13,"deletions":-223},{"file":"usr/src/uts/common/os/zone.c","type":"MODIFIED","insertions":219,"deletions":-23},{"file":"usr/src/uts/common/sys/zone.h","type":"MODIFIED","insertions":25,"deletions":-5},{"file":"usr/src/uts/common/syscall/sysconfig.c","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"usr/src/uts/common/vm/page.h","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/vm/vm_usage.c","type":"MODIFIED","insertions":1,"deletions":-25},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hment.c","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/uts/sfmmu/vm/hat_sfmmu.c","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":278,"sizeDeletions":-285},{"number":"4","revision":"f4f2f595d36c1ce0bf1efbf2f673e2391a9ae92d","parents":["766f80363ee325875bdcd79484e9c04427d17aec"],"ref":"refs/changes/69/2469/4","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1505997364,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506012703,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506009884,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506006616,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506535348,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/zoneadmd/mcap.c","type":"MODIFIED","insertions":13,"deletions":-223},{"file":"usr/src/uts/common/os/zone.c","type":"MODIFIED","insertions":213,"deletions":-23},{"file":"usr/src/uts/common/sys/zone.h","type":"MODIFIED","insertions":25,"deletions":-5},{"file":"usr/src/uts/common/syscall/sysconfig.c","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"usr/src/uts/common/vm/page.h","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/vm/vm_usage.c","type":"MODIFIED","insertions":1,"deletions":-25},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hment.c","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/uts/sfmmu/vm/hat_sfmmu.c","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":272,"sizeDeletions":-285},{"number":"5","revision":"e27beaf48a7090ed131efc987dbd1c7c5b12a1eb","parents":["597e7db3df75fb2976c1c29ef285e8bc6c289b4d"],"ref":"refs/changes/69/2469/5","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1506603416,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506012703,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506009884,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506006616,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506535348,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/zoneadmd/mcap.c","type":"MODIFIED","insertions":13,"deletions":-223},{"file":"usr/src/uts/common/os/zone.c","type":"MODIFIED","insertions":213,"deletions":-23},{"file":"usr/src/uts/common/sys/zone.h","type":"MODIFIED","insertions":25,"deletions":-5},{"file":"usr/src/uts/common/syscall/sysconfig.c","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"usr/src/uts/common/vm/page.h","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/vm/vm_usage.c","type":"MODIFIED","insertions":1,"deletions":-25},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hment.c","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/uts/sfmmu/vm/hat_sfmmu.c","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":272,"sizeDeletions":-285},{"number":"6","revision":"5ae84a5233b723c890288b775cb5317db2e54d61","parents":["597e7db3df75fb2976c1c29ef285e8bc6c289b4d"],"ref":"refs/changes/69/2469/6","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1506603527,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1506603575,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506012703,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506009884,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506006616,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506535348,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/cmd/zoneadmd/mcap.c","type":"MODIFIED","insertions":13,"deletions":-223},{"file":"usr/src/uts/common/os/zone.c","type":"MODIFIED","insertions":213,"deletions":-23},{"file":"usr/src/uts/common/sys/zone.h","type":"MODIFIED","insertions":25,"deletions":-5},{"file":"usr/src/uts/common/syscall/sysconfig.c","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"usr/src/uts/common/vm/page.h","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/vm/vm_usage.c","type":"MODIFIED","insertions":1,"deletions":-25},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hment.c","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/uts/sfmmu/vm/hat_sfmmu.c","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":272,"sizeDeletions":-285}],"allReviewers":[{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}]}