{"project":"joyent/node-cueball","branch":"master","id":"I7fc241da3f52fdb2b9956a98a785c4bd425aff7a","number":"1664","subject":"joyent/node-cueball#102 HTTP pinger hangs Reviewed by: David Pacheco \u003cdap@joyent.com\u003e","owner":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"url":"https://cr.joyent.us/1664","commitMessage":"joyent/node-cueball#102 HTTP pinger hangs\nReviewed by: David Pacheco \u003cdap@joyent.com\u003e\n","createdOn":1489529980,"lastUpdated":1489776940,"open":false,"status":"MERGED","comments":[{"timestamp":1489529980,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 1."},{"timestamp":1489530059,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1489531468,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 2."},{"timestamp":1489531555,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1489591248,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2:\n\n(2 comments)"},{"timestamp":1489604894,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1489605130,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 3."},{"timestamp":1489605154,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1489605393,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 4."},{"timestamp":1489605486,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1489624004,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 4: Code-Review+1\n\n(1 comment)"},{"timestamp":1489688834,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1489689233,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 5."},{"timestamp":1489689300,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1489711373,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1489776931,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 6: Commit message was updated."},{"timestamp":1489776939,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 6: Integration-Approval+1"},{"timestamp":1489776940,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Alex Wilson"}],"currentPatchSet":{"number":"6","revision":"b65e82e21df6f34ab3de25fa9494bcf2138c6df4","parents":["87b4ed8670bb89b7df6473f4abcc610c748165df"],"ref":"refs/changes/64/1664/6","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1489776931,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489689300,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489711373,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1489776939,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"SUBM","value":"1","grantedOn":1489776940,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.adoc","type":"MODIFIED","insertions":9,"deletions":0},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":35,"deletions":-1},{"file":"lib/errors.js","type":"MODIFIED","insertions":12,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/pool.test.js","type":"MODIFIED","insertions":1,"deletions":-3}],"sizeInsertions":58,"sizeDeletions":-6},"patchSets":[{"number":"1","revision":"632945ed0c194d2b115b24fdda2744be6ed39f53","parents":["87b4ed8670bb89b7df6473f4abcc610c748165df"],"ref":"refs/changes/64/1664/1","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1489529980,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489530059,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/agent.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":26,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":12,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":43,"sizeDeletions":-3},{"number":"2","revision":"7e17f6bb72bd4d5c62b92e316089f749f02385e6","parents":["87b4ed8670bb89b7df6473f4abcc610c748165df"],"ref":"refs/changes/64/1664/2","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1489531468,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489531555,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/agent.js","line":337,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"The API docs for \"checker\" say that it\u0027s called as `checker(handle, connection)`.  We find the `host` argument above, but I\u0027m not sure where `err` comes from or what it means, so I\u0027m not sure how to know this is right.\n\nGiven this issue, should we assert the types of these arguments? (Is that even possible?)"},{"file":"lib/agent.js","line":337,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Ah, you\u0027re right, it is documented like that. I guess we should change the way this gets called, then.\n\nThe `err` argument should never be non-NULL (it\u0027s just an artefact of the fact that we call this through a claimhandle, just like a normal claim, so it has an err argument)"},{"file":"lib/agent.js","line":340,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Assuming this means we tried to check something we knew was dead, is it worth logging this or bumping a counter?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.adoc","type":"MODIFIED","insertions":9,"deletions":0},{"file":"lib/agent.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":26,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":12,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":52,"sizeDeletions":-3},{"number":"3","revision":"656ba53d5bca517192c595e59a211d8432d2993f","parents":["87b4ed8670bb89b7df6473f4abcc610c748165df"],"ref":"refs/changes/64/1664/3","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1489605130,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1489605154,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/connection-fsm.js","line":1045,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: identifer handle hides an identifier in a parent scope"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.adoc","type":"MODIFIED","insertions":9,"deletions":0},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"lib/errors.js","type":"MODIFIED","insertions":12,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":53,"sizeDeletions":-3},{"number":"4","revision":"a7646e2fc6b16ec5747708e785d3d30e202a53f1","parents":["87b4ed8670bb89b7df6473f4abcc610c748165df"],"ref":"refs/changes/64/1664/4","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1489605393,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489624004,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489605486,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/connection-fsm.js","line":1047,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Should we assert this isn\u0027t null?"},{"file":"lib/connection-fsm.js","line":1047,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Mayyyyybeeeeeeee"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.adoc","type":"MODIFIED","insertions":9,"deletions":0},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"lib/errors.js","type":"MODIFIED","insertions":12,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/pool.test.js","type":"MODIFIED","insertions":1,"deletions":-3}],"sizeInsertions":54,"sizeDeletions":-6},{"number":"5","revision":"7fc241da3f52fdb2b9956a98a785c4bd425aff7a","parents":["87b4ed8670bb89b7df6473f4abcc610c748165df"],"ref":"refs/changes/64/1664/5","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1489689233,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489711373,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489689300,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.adoc","type":"MODIFIED","insertions":9,"deletions":0},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":35,"deletions":-1},{"file":"lib/errors.js","type":"MODIFIED","insertions":12,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/pool.test.js","type":"MODIFIED","insertions":1,"deletions":-3}],"sizeInsertions":58,"sizeDeletions":-6},{"number":"6","revision":"b65e82e21df6f34ab3de25fa9494bcf2138c6df4","parents":["87b4ed8670bb89b7df6473f4abcc610c748165df"],"ref":"refs/changes/64/1664/6","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1489776931,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489711373,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1489776939,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"SUBM","value":"1","grantedOn":1489776940,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489689300,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.adoc","type":"MODIFIED","insertions":9,"deletions":0},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":35,"deletions":-1},{"file":"lib/errors.js","type":"MODIFIED","insertions":12,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/pool.test.js","type":"MODIFIED","insertions":1,"deletions":-3}],"sizeInsertions":58,"sizeDeletions":-6}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}]}