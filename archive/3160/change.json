{"project":"joyent/manatee","branch":"master","id":"I1ac6d9284aa420a1236801eb34c588492f7ab6b1","number":"3160","subject":"MANATEE-389 deposed array is missing in stateBackfill MANATEE-390 check for deposed array\u0027s existence in manatee-adm history","owner":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"url":"https://cr.joyent.us/3160","commitMessage":"MANATEE-389 deposed array is missing in stateBackfill\nMANATEE-390 check for deposed array\u0027s existence in manatee-adm history\n","createdOn":1515114434,"lastUpdated":1520476466,"open":false,"status":"MERGED","comments":[{"timestamp":1515114434,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 1."},{"timestamp":1515114464,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1515181892,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 1:\n\nTesting notes in the comments: https://jira.joyent.us/browse/MANATEE-389"},{"timestamp":1517482352,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 1: Code-Review+1 Integration-Approval+1\n\nThis looks good to me!\n\nFor context on this, see how the state machine handles this case: https://github.com/joyent/manatee-state-machine/blob/795baa99af4b29087cae00f152d8e121c4c20e3f/lib/validation.js#L37-L47\n\nIt feels like this validation could be brought into manatee-adm, but I believe that only backfill would make use of it (other parts seem to only remove pieces from the state object, with the exception of \"freeze\", which the state machine doesn\u0027t reach into anyway)."},{"timestamp":1520448012,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 2: Patch Set 1 was rebased"},{"timestamp":1520448014,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jan Wyszynski"},{"timestamp":1520476466,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2:\n\n\"make check\" passed ok"}],"currentPatchSet":{"number":"2","revision":"ece0834342e1dc1c6f18b5cf226e6e15644e07c4","parents":["729d799b844630f8f6eb34dcbaf3ae7fdfd3bf7f"],"ref":"refs/changes/60/3160/2","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1520448012,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515114464,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1517482352,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1517482352,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"SUBM","value":"1","grantedOn":1520448014,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/adm.js","type":"MODIFIED","insertions":5,"deletions":-2}],"sizeInsertions":5,"sizeDeletions":-2},"patchSets":[{"number":"1","revision":"1ac6d9284aa420a1236801eb34c588492f7ab6b1","parents":["50f8c7833f8f5217238ef57573b4d4a696f18ba5"],"ref":"refs/changes/60/3160/1","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1515114434,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515114464,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1517482352,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1517482352,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/adm.js","type":"MODIFIED","insertions":5,"deletions":-2}],"sizeInsertions":5,"sizeDeletions":-2},{"number":"2","revision":"ece0834342e1dc1c6f18b5cf226e6e15644e07c4","parents":["729d799b844630f8f6eb34dcbaf3ae7fdfd3bf7f"],"ref":"refs/changes/60/3160/2","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1520448012,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515114464,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1517482352,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1517482352,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"SUBM","value":"1","grantedOn":1520448014,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/adm.js","type":"MODIFIED","insertions":5,"deletions":-2}],"sizeInsertions":5,"sizeDeletions":-2}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"}]}