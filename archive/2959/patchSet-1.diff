From 54f39a86834564ab44b5d6d75fabf0eba2c23a84 Mon Sep 17 00:00:00 2001
From: Richard Kiene <richard.kiene@joyent.com>
Date: Fri, 17 Nov 2017 00:04:42 +0000
Subject: [PATCH] joyent/manta-thoth#156 64bit node binaries are not debuggable
 by mdb when a 32bit node binary is in PATH

---
 bin/thoth    | 2 +-
 package.json | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/bin/thoth b/bin/thoth
index 2ac3141..334c02f 100755
--- a/bin/thoth
+++ b/bin/thoth
@@ -1777,7 +1777,7 @@ handlers.debug = function (client, argv)
 		if (analyzer) {
 			cmd += analyzerCmd(args);
 		} else {
-			cmd += 'mdb $MANTA_INPUT_FILE';
+			cmd += 'LIBPROC_INCORE_ELF=1 mdb $MANTA_INPUT_FILE';
 		}
 
 		setAnalyzer(client, cmd, function (asset) {
diff --git a/package.json b/package.json
index 3fcb1fc..85dc3bf 100644
--- a/package.json
+++ b/package.json
@@ -1,7 +1,7 @@
 {
 	"name": "manta-thoth",
 	"description": "Manta-based system for core and crash dump analysis",
-	"version": "1.0.0",
+	"version": "1.1.0",
 	"author": "Joyent (joyent.com)",
 	"dependencies": {
 		"manta": "^4.0.0",
-- 
2.21.0

