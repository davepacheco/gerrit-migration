From d0934ca715547eb82ed6267f8a6b949fd6ae3892 Mon Sep 17 00:00:00 2001
From: Jan Wyszynski <jan.wyszynski@joyent.com>
Date: Mon, 21 Aug 2017 20:41:45 +0000
Subject: [PATCH] MANTA-3340 muskie mpu could log a bit quieter

---
 lib/uploads/commit.js | 6 +++---
 lib/uploads/common.js | 2 +-
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/lib/uploads/commit.js b/lib/uploads/commit.js
index ded74d8..0d8fb87 100644
--- a/lib/uploads/commit.js
+++ b/lib/uploads/commit.js
@@ -312,7 +312,7 @@ function validateParts(req, res, next) {
                 var e = errors[i];
                 assert.number(e.statusCode);
                 if (e.statusCode >= 500) {
-                    log.error('internal error: ' + e);
+                    log.warn('internal error: ' + e);
                 } else if (e.statusCode >= 400) {
                     next(e);
                     return;
@@ -434,7 +434,7 @@ function finalizeUpload(req, res, next) {
 
             if (err) {
                 results.operations.forEach(function (r) {
-                    log.error('error with shark ' + r.result.shark +
+                    log.warn('error with shark ' + r.result.shark +
                         ': ' + r.err);
                 });
                 next(new SharksExhaustedError());
@@ -458,7 +458,7 @@ function finalizeUpload(req, res, next) {
                     var msg = 'mako nodes returned different md5 sums for ' +
                         'the same object';
 
-                    log.error({
+                    log.warn({
                         results: results.operations.map(function (r) {
                             return ({
                                 shark: r.result.shark,
diff --git a/lib/uploads/common.js b/lib/uploads/common.js
index e22ca84..727dce3 100644
--- a/lib/uploads/common.js
+++ b/lib/uploads/common.js
@@ -886,7 +886,7 @@ function commitUpload(partsMD5, size, md5, cb) {
 
                     self.req.moray.commitMPU(opts, function (err3, meta) {
                         if (err3) {
-                            log.error('error batching data: ' + err3);
+                            log.warn('error batching data: ' + err3);
                             cb(err3);
                         } else {
                             log.debug('batch successful');
-- 
2.21.0

