{"project":"joyent/muppet","branch":"master","id":"Iccd2382cdb3eaf9570b33f2518f06ca7473438e1","number":"6636","subject":"MANTA-3269 muppet could include muskie zonenames in haproxy backend names MANTA-4414 muppet could test more units MANTA-4415 ZK error response handling needs work MANTA-4430 fix haproxy CFLAGS Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Reviewed by: Kel","owner":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"url":"https://cr.joyent.us/6636","commitMessage":"MANTA-3269 muppet could include muskie zonenames in haproxy backend names\nMANTA-4414 muppet could test more units\nMANTA-4415 ZK error response handling needs work\nMANTA-4430 fix haproxy CFLAGS\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nReviewed by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e\nApproved by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e\n","createdOn":1563906285,"lastUpdated":1565266355,"open":false,"status":"MERGED","comments":[{"timestamp":1563906285,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 1."},{"timestamp":1563906286,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 8ec51f2e8d1f64cca0591f12391c013705180d9a\n    \n    finish up app.test.js\n    \n    commit de59c77a79dc501cae5f65afa8b52a87bbb74a67\n    \n    clean cruft, check\n    \n    commit 9ac68084a790e1a51d5400306f9a0fce02d65b6b\n    \n    start app.test.js\n    \n    commit 392ed015d871dbd23bdc5c0998947f89ddaf3f7e\n    \n    stat socket tests\n    \n    commit d613a475e0b30370d4a0034034c12f50b523189c\n    \n    tmp\n    \n    commit f3d7013f24c7c5a5c295e94d792e26f2bcaf4561\n    \n    fix zk error bug\n    \n    commit 5cc0f72da38a183d50db47b93d900c7c714bf624\n    \n    more testing\n    \n    commit 35e56ba66494382cd588c52edaa1bf41a79bdfab\n    \n    more testing\n    \n    commit 25da98fccdc07a844c2609e5e3e258a458dbe8dd\n    \n    more tests\n    \n    commit 01c156d2c594811177f98f17c626bae015883e0d\n    \n    test no net change\n    \n    commit e9e5fde5a9c8ede836760e1e353e119e07bad387\n    \n    timeouts\n    \n    commit 165ede2a06d4a34017483be9d3ce38b86d2ffee5\n    \n    tests1\n    \n    commit d89602f04a8c0943347cca54ce56e9b58a93777b\n    \n    m\n    \n    commit a285bc0508d4951bd2ba7172bfa49fc981a113ad\n    \n    tap\n    \n    commit 5ae1700177dd8edb127035490f831abd1340fce5\n    \n    m\n    \n    commit 39ca28333c9f75fcdc6325754087ce7371614e43\n    \n    fix config.tst.js\n    \n    commit 3b758e1f41b7fc88741dd69876de3f5a82901467\n    \n    first"},{"timestamp":1563906315,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1563906316,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1: Code-Review-1\n\nnot ready for review"},{"timestamp":1563907226,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 2: Commit message was updated."},{"timestamp":1563907253,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 3."},{"timestamp":1563907255,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 1c52ec81b15d9f2998dffacc6c1d446da685a67f\n    \n    fix haproxy compile args"},{"timestamp":1563907283,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1563972958,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 4."},{"timestamp":1563972959,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 7eff6309863f5059ca813600c4f3edc95dd9f91a\n    \n    fixes"},{"timestamp":1563972992,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1563977788,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 5."},{"timestamp":1563977790,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit 539286d6bb6fa65c78e29885df07e472409a6117\n    \n    remove reload lock"},{"timestamp":1563977826,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1563979374,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 6."},{"timestamp":1563979375,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit 509029a6343f72c6718520e9ee6b14ccbe423728\n    \n    self review"},{"timestamp":1563979406,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1563986648,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 7."},{"timestamp":1563986649,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 7:\n\nNew commits:\n    \n    commit 6a1d90595c5f618fccc0c003f20abbc6995105cd\n    \n    more cleanup"},{"timestamp":1563986679,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1563986695,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 7: -Code-Review\n\nI still have testing but I think this OK for a first pass at review, thanks."},{"timestamp":1564041195,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 8."},{"timestamp":1564041196,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 8:\n\nNew commits:\n    \n    commit a2eeae55912600427028ed87533a190cecbc1dc5\n    \n    add port number to server name; add a comment"},{"timestamp":1564041226,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1564070611,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 8:\n\n(16 comments)"},{"timestamp":1564152576,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 8:\n\n(14 comments)"},{"timestamp":1564401120,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 9."},{"timestamp":1564401122,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 9:\n\nNew commits:\n    \n    commit 8358df5f522451b9854c8c4017e0c1a77a8d1074\n    \n    couple more fixes\n    \n    commit 8ffe8f5332b681ab09b7a13eb93ae6ac9c249141\n    \n    fix up server name handling\n    \n    commit cdf93501526a1e4286a183c06a327ea47854eddf\n    \n    more rm code review\n    \n    commit 802b1a2a0109d1ecda5d689674335b2f7b712ce8\n    \n    some rm code review\n    \n    commit edd47ad4acba281f2f596cf75c8734393415b3d4\n    \n    fix checkStats call"},{"timestamp":1564401151,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1564415791,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 10."},{"timestamp":1564415794,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 10:\n\nNew commits:\n    \n    commit 8f79eb01279c8f042ce3bc01b685540b0487f756\n    \n    fix periodic double-check: this would regularly race against a reload, causing an unnecessary extra reload. Seems much better to wait for the next check if we\u0027re currently reloading"},{"timestamp":1564415822,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1564420479,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 7:\n\n(4 comments)"},{"timestamp":1564476581,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 11."},{"timestamp":1564476582,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 11:\n\nNew commits:\n    \n    commit 5cf63394a255af7456309e4536f1a8ea1634e740\n    \n    improve bunyan comment"},{"timestamp":1564476617,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1564501917,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 12."},{"timestamp":1564501919,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 12:\n\nNew commits:\n    \n    commit b5e9c3fc8273f4f444ddc1b3cec24ae898a1fccb\n    \n    use DEFINE not SILENT_DEFINE so it shows up in haproxy -vv"},{"timestamp":1564501947,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 12: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1564525413,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 12: Code-Review+1"},{"timestamp":1564579165,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 12: Code-Review+1"},{"timestamp":1564590443,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 12:\n\n(1 comment)\n\nI\u0027ve run through the tests listed in the ticket for MANTA-3269"},{"timestamp":1565196217,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 12: Integration-Approval+1"},{"timestamp":1565259966,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 13: Commit message was updated."},{"timestamp":1565266355,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by John Levon"}],"currentPatchSet":{"number":"13","revision":"ccd2382cdb3eaf9570b33f2518f06ca7473438e1","parents":["f51e486671211ee66da6b7f760be9b53a5d49252"],"ref":"refs/changes/36/6636/13","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1565259966,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1564501947,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1564525413,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1564579165,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1565196217,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"SUBM","value":"1","grantedOn":1565266355,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":13,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":5,"deletions":-12},{"file":"README.md","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"etc/haproxy.cfg.in","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/app.js","type":"MODIFIED","insertions":98,"deletions":-92},{"file":"lib/haproxy_sock.js","type":"MODIFIED","insertions":25,"deletions":-24},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":115,"deletions":-135},{"file":"lib/watch.js","type":"MODIFIED","insertions":262,"deletions":-203},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"test/app.test.js","type":"ADDED","insertions":153,"deletions":0},{"file":"test/config.test.js","type":"MODIFIED","insertions":64,"deletions":-52},{"file":"test/haproxy.cfg.in","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"test/haproxy.cfg.out-check","type":"MODIFIED","insertions":4,"deletions":-10},{"file":"test/haproxy.cfg.test","type":"ADDED","insertions":45,"deletions":0},{"file":"test/haproxy_sock.test.js","type":"ADDED","insertions":165,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":45,"deletions":-54},{"file":"test/watch.test.js","type":"ADDED","insertions":411,"deletions":0},{"file":"tools/mk/Makefile.haproxy.targ","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1409,"sizeDeletions":-591},"patchSets":[{"number":"1","revision":"c43ed6f36296b07ec45cc53aa6bdf18f1059eabf","parents":["f51e486671211ee66da6b7f760be9b53a5d49252"],"ref":"refs/changes/36/6636/1","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1563906285,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1563906315,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1563906316,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":5,"deletions":-12},{"file":"lib/app.js","type":"MODIFIED","insertions":92,"deletions":-88},{"file":"lib/haproxy_sock.js","type":"MODIFIED","insertions":21,"deletions":-23},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":22,"deletions":-25},{"file":"lib/watch.js","type":"MODIFIED","insertions":260,"deletions":-200},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"test/app.test.js","type":"ADDED","insertions":149,"deletions":0},{"file":"test/config.test.js","type":"MODIFIED","insertions":27,"deletions":-20},{"file":"test/haproxy.cfg.out-check","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"test/haproxy.cfg.test","type":"ADDED","insertions":44,"deletions":0},{"file":"test/haproxy_sock.test.js","type":"ADDED","insertions":147,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":43,"deletions":-54},{"file":"test/watch.test.js","type":"ADDED","insertions":397,"deletions":0}],"sizeInsertions":1212,"sizeDeletions":-430},{"number":"2","revision":"08aee2e7f00db1397410927ca62dd34a54169a5b","parents":["f51e486671211ee66da6b7f760be9b53a5d49252"],"ref":"refs/changes/36/6636/2","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1563907226,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1563906315,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1563906316,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":5,"deletions":-12},{"file":"lib/app.js","type":"MODIFIED","insertions":92,"deletions":-88},{"file":"lib/haproxy_sock.js","type":"MODIFIED","insertions":21,"deletions":-23},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":22,"deletions":-25},{"file":"lib/watch.js","type":"MODIFIED","insertions":260,"deletions":-200},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"test/app.test.js","type":"ADDED","insertions":149,"deletions":0},{"file":"test/config.test.js","type":"MODIFIED","insertions":27,"deletions":-20},{"file":"test/haproxy.cfg.out-check","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"test/haproxy.cfg.test","type":"ADDED","insertions":44,"deletions":0},{"file":"test/haproxy_sock.test.js","type":"ADDED","insertions":147,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":43,"deletions":-54},{"file":"test/watch.test.js","type":"ADDED","insertions":397,"deletions":0}],"sizeInsertions":1212,"sizeDeletions":-430},{"number":"3","revision":"6156783169c3a0338c38c2780909183b70912085","parents":["f51e486671211ee66da6b7f760be9b53a5d49252"],"ref":"refs/changes/36/6636/3","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1563907253,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1563907283,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1563906316,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":5,"deletions":-12},{"file":"lib/app.js","type":"MODIFIED","insertions":92,"deletions":-88},{"file":"lib/haproxy_sock.js","type":"MODIFIED","insertions":21,"deletions":-23},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":22,"deletions":-25},{"file":"lib/watch.js","type":"MODIFIED","insertions":260,"deletions":-200},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"test/app.test.js","type":"ADDED","insertions":149,"deletions":0},{"file":"test/config.test.js","type":"MODIFIED","insertions":27,"deletions":-20},{"file":"test/haproxy.cfg.out-check","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"test/haproxy.cfg.test","type":"ADDED","insertions":44,"deletions":0},{"file":"test/haproxy_sock.test.js","type":"ADDED","insertions":147,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":43,"deletions":-54},{"file":"test/watch.test.js","type":"ADDED","insertions":397,"deletions":0},{"file":"tools/mk/Makefile.haproxy.targ","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1213,"sizeDeletions":-431},{"number":"4","revision":"ed348bc7bbfcd8aa4ef6eb98bd994215c4068dda","parents":["f51e486671211ee66da6b7f760be9b53a5d49252"],"ref":"refs/changes/36/6636/4","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1563972958,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1563972992,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1563906316,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":4,"deletions":-12},{"file":"lib/app.js","type":"MODIFIED","insertions":92,"deletions":-88},{"file":"lib/haproxy_sock.js","type":"MODIFIED","insertions":21,"deletions":-23},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":22,"deletions":-25},{"file":"lib/watch.js","type":"MODIFIED","insertions":260,"deletions":-200},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"test/app.test.js","type":"ADDED","insertions":149,"deletions":0},{"file":"test/config.test.js","type":"MODIFIED","insertions":27,"deletions":-20},{"file":"test/haproxy.cfg.out-check","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"test/haproxy.cfg.test","type":"ADDED","insertions":44,"deletions":0},{"file":"test/haproxy_sock.test.js","type":"ADDED","insertions":147,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":43,"deletions":-54},{"file":"test/watch.test.js","type":"ADDED","insertions":399,"deletions":0},{"file":"tools/mk/Makefile.haproxy.targ","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1214,"sizeDeletions":-431},{"number":"5","revision":"81530bf3b0eb0e7263d1bb91fd30cb4cbd19f5b3","parents":["f51e486671211ee66da6b7f760be9b53a5d49252"],"ref":"refs/changes/36/6636/5","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1563977788,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1563977826,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1563906316,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":4,"deletions":-12},{"file":"lib/app.js","type":"MODIFIED","insertions":92,"deletions":-88},{"file":"lib/haproxy_sock.js","type":"MODIFIED","insertions":21,"deletions":-23},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":27,"deletions":-68},{"file":"lib/watch.js","type":"MODIFIED","insertions":260,"deletions":-200},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"test/app.test.js","type":"ADDED","insertions":149,"deletions":0},{"file":"test/config.test.js","type":"MODIFIED","insertions":41,"deletions":-31},{"file":"test/haproxy.cfg.out-check","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"test/haproxy.cfg.test","type":"ADDED","insertions":44,"deletions":0},{"file":"test/haproxy_sock.test.js","type":"ADDED","insertions":147,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":43,"deletions":-54},{"file":"test/watch.test.js","type":"ADDED","insertions":399,"deletions":0},{"file":"tools/mk/Makefile.haproxy.targ","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1233,"sizeDeletions":-485},{"number":"6","revision":"34ff4430dfe3fd5a5b6f12d32790b52e14c2bd74","parents":["f51e486671211ee66da6b7f760be9b53a5d49252"],"ref":"refs/changes/36/6636/6","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1563979374,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1563979406,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1563906316,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":4,"deletions":-12},{"file":"lib/app.js","type":"MODIFIED","insertions":92,"deletions":-88},{"file":"lib/haproxy_sock.js","type":"MODIFIED","insertions":21,"deletions":-23},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":26,"deletions":-65},{"file":"lib/watch.js","type":"MODIFIED","insertions":262,"deletions":-203},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"test/app.test.js","type":"ADDED","insertions":149,"deletions":0},{"file":"test/config.test.js","type":"MODIFIED","insertions":41,"deletions":-31},{"file":"test/haproxy.cfg.out-check","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"test/haproxy.cfg.test","type":"ADDED","insertions":44,"deletions":0},{"file":"test/haproxy_sock.test.js","type":"ADDED","insertions":161,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":43,"deletions":-54},{"file":"test/watch.test.js","type":"ADDED","insertions":399,"deletions":0},{"file":"tools/mk/Makefile.haproxy.targ","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1248,"sizeDeletions":-485},{"number":"7","revision":"bfd765bbcc198e6fa27ee90371b94a477bb2358c","parents":["f51e486671211ee66da6b7f760be9b53a5d49252"],"ref":"refs/changes/36/6636/7","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1563986648,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1563986679,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/app.js","line":22,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It\u0027s probably worth commenting on the fact that there is also periodic reload that happens to make sure things don\u0027t end up stale."},{"file":"lib/app.js","line":22,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Done"},{"file":"lib/haproxy_sock.js","line":225,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It might be useful to clarify what pxname and svname mean here. I\u0027m still not really sure what they do."},{"file":"lib/haproxy_sock.js","line":225,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Done"},{"file":"lib/lb_manager.js","line":44,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is there a reason that the casing changed here? It seemed like convention was globals were in caps."},{"file":"lib/lb_manager.js","line":44,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"It\u0027s var versus const but I don\u0027t know what the precedent here is?"},{"file":"lib/lb_manager.js","line":44,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It had just looked like all globals were being capitalized, but I\u0027m not sure it terribly matters. Seems fine either way, especially given the lack of prefixes, etc. already set as style here."},{"file":"lib/lb_manager.js","line":70,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"What happens when muppet is first started because it is provisioned before haproxy does or simply is up when there are no haproxies? What\u0027s the end result? Would we not write the config and start up?"},{"file":"lib/lb_manager.js","line":266,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is there a reason we no longer need the deep copy of the opts before modifying them?"},{"file":"lib/lb_manager.js","line":266,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I\u0027ve ended up re-working the arguments to all this, as it was totally confusing. configFileIn was file *contents*, configFileOut, was a *path* !"},{"file":"test/app.test.js","line":0,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I would have found a comment here that pointed to the haxproxy.cfg pieces useful. It took me a while to realize, for example, that\u0027s what the missing server comment in the first check was referring to."},{"file":"test/config.test.js","line":162,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I\u0027m a bit confused. The address here doesn\u0027t actually match anything that we get from DNS. So I\u0027m not sure how to parse that in relation to the comment above it."},{"file":"test/config.test.js","line":162,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"So really we want haproxy to not have to L4 timeout on some IP address. I\u0027m going to change all of these to be a bit more obvious and like the other tests."},{"file":"test/config.test.js","line":206,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Other places have a host must resolve comment, but this doesn\u0027t actually resolve to an address."},{"file":"test/config.test.js","line":206,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Done"},{"file":"test/config.test.js","line":239,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is there a reason that we\u0027re encoding that expectation rather than just coding it up so that we only advance once both call us back? I\u0027ve seen that strategy in other places and seems like it might last a bit longer."},{"file":"test/config.test.js","line":239,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"If we call t.done() with an extant callback in the queue, node-tap will fail the test. So I think this is OK?"},{"file":"test/config.test.js","line":239,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"OK. As long as that is the behavior, seems reasonable."},{"file":"test/haproxy.cfg.test","line":4,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Are these lines commented out on purpose? Is the idea that we don\u0027t want it to run as these or something else?"},{"file":"test/haproxy.cfg.test","line":4,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Adding a comment"},{"file":"test/haproxy.cfg.test","line":8,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"So, the pidfile has .test suffix. Is there a reason we don\u0027t for the stats socket? What does haproxy do if that already exists? (I can imagine something actually running at /tmp/haproxy or someone accidentally making that a file."},{"file":"test/haproxy.cfg.test","line":8,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Just that we don\u0027t let it be configured in the lib/ code. As the tests will fall over pretty quickly I\u0027m not too concerned? I\u0027ll add something to README that we actually run haproxy locally and what we expect."},{"file":"test/haproxy_sock.test.js","line":81,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Any reason we don\u0027t care about the details of the error?"},{"file":"test/haproxy_sock.test.js","line":81,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Done"},{"file":"test/helper.js","line":62,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I guess there\u0027s no way to make killing it any more synchronous is there. I\u0027m just trying to think through if we\u0027ll get false negatives because things aren\u0027t starting up or tearing down fast enough or one is dying while the other is starting."},{"file":"test/helper.js","line":62,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I\u0027ll add a little timeout here, not sure it\u0027s worth trying to do more just for test"},{"file":"test/watch.test.js","line":37,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Indenting in this function seems off from everything else."},{"file":"test/watch.test.js","line":37,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Done"},{"file":"test/watch.test.js","line":82,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Based on the design it seems like this is only expected to fire after c3, but it\u0027s not clear what causes \u0027serversChanged\u0027 to only fire at that state and not after we add c1 or otherwise. I think this is because of the various times that you\u0027ve set up to mimic the debouncing. It\u0027s not immediately obvious and maybe worth a block comment somewhere in the file about this."},{"file":"test/watch.test.js","line":82,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I\u0027ll comment - the callbacks don\u0027t exactly make it clear."},{"file":"test/watch.test.js","line":118,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"For this test, what guarantees that everything has happened in 800ms? Is there anything that we can hook into to know that the time for this has passed such as watching for events on the FSM?"},{"file":"test/watch.test.js","line":118,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I felt like if we went too much into the FSM details then we might not be testing what we should be - checking for the timeout behaviour in a black-box fashion seems like a better test IMO.\n\nHaving said that, at the very least this should have a comment or at least based upon TIMEOUT + value like the others"},{"file":"test/watch.test.js","line":118,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"OK, that seems a reasonable approach."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":4,"deletions":-12},{"file":"lib/app.js","type":"MODIFIED","insertions":91,"deletions":-91},{"file":"lib/haproxy_sock.js","type":"MODIFIED","insertions":21,"deletions":-23},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":26,"deletions":-65},{"file":"lib/watch.js","type":"MODIFIED","insertions":262,"deletions":-203},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"test/app.test.js","type":"ADDED","insertions":149,"deletions":0},{"file":"test/config.test.js","type":"MODIFIED","insertions":44,"deletions":-34},{"file":"test/haproxy.cfg.out-check","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"test/haproxy.cfg.test","type":"ADDED","insertions":44,"deletions":0},{"file":"test/haproxy_sock.test.js","type":"ADDED","insertions":161,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":43,"deletions":-54},{"file":"test/watch.test.js","type":"ADDED","insertions":399,"deletions":0},{"file":"tools/mk/Makefile.haproxy.targ","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1250,"sizeDeletions":-491},{"number":"8","revision":"d24111ea22aeebdf68661a54282daeb7f92f622d","parents":["f51e486671211ee66da6b7f760be9b53a5d49252"],"ref":"refs/changes/36/6636/8","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1564041195,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1564041226,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":4,"deletions":-12},{"file":"lib/app.js","type":"MODIFIED","insertions":91,"deletions":-91},{"file":"lib/haproxy_sock.js","type":"MODIFIED","insertions":21,"deletions":-23},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":40,"deletions":-65},{"file":"lib/watch.js","type":"MODIFIED","insertions":262,"deletions":-203},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"test/app.test.js","type":"ADDED","insertions":149,"deletions":0},{"file":"test/config.test.js","type":"MODIFIED","insertions":42,"deletions":-34},{"file":"test/haproxy.cfg.out-check","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"test/haproxy.cfg.test","type":"ADDED","insertions":44,"deletions":0},{"file":"test/haproxy_sock.test.js","type":"ADDED","insertions":161,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":43,"deletions":-54},{"file":"test/watch.test.js","type":"ADDED","insertions":399,"deletions":0},{"file":"tools/mk/Makefile.haproxy.targ","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1262,"sizeDeletions":-491},{"number":"9","revision":"1f5198fc2eba1fcee15e1cf65d03523642a60ff8","parents":["f51e486671211ee66da6b7f760be9b53a5d49252"],"ref":"refs/changes/36/6636/9","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1564401120,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1564401151,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":5,"deletions":-12},{"file":"README.md","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"etc/haproxy.cfg.in","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/app.js","type":"MODIFIED","insertions":97,"deletions":-91},{"file":"lib/haproxy_sock.js","type":"MODIFIED","insertions":25,"deletions":-24},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":109,"deletions":-135},{"file":"lib/watch.js","type":"MODIFIED","insertions":262,"deletions":-203},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"test/app.test.js","type":"ADDED","insertions":153,"deletions":0},{"file":"test/config.test.js","type":"MODIFIED","insertions":64,"deletions":-52},{"file":"test/haproxy.cfg.in","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"test/haproxy.cfg.out-check","type":"MODIFIED","insertions":4,"deletions":-10},{"file":"test/haproxy.cfg.test","type":"ADDED","insertions":45,"deletions":0},{"file":"test/haproxy_sock.test.js","type":"ADDED","insertions":165,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":45,"deletions":-54},{"file":"test/watch.test.js","type":"ADDED","insertions":411,"deletions":0},{"file":"tools/mk/Makefile.haproxy.targ","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1402,"sizeDeletions":-590},{"number":"10","revision":"4cd38e7e3eea5a3930297f403a4e478a14a590d8","parents":["f51e486671211ee66da6b7f760be9b53a5d49252"],"ref":"refs/changes/36/6636/10","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1564415791,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1564415822,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"Makefile","line":89,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Could we further explain what we\u0027re trying to appease about it? I guess it\u0027s just trying to get rid of trailing white space?"},{"file":"Makefile","line":89,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":5,"deletions":-12},{"file":"README.md","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"etc/haproxy.cfg.in","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/app.js","type":"MODIFIED","insertions":98,"deletions":-92},{"file":"lib/haproxy_sock.js","type":"MODIFIED","insertions":25,"deletions":-24},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":115,"deletions":-135},{"file":"lib/watch.js","type":"MODIFIED","insertions":262,"deletions":-203},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"test/app.test.js","type":"ADDED","insertions":153,"deletions":0},{"file":"test/config.test.js","type":"MODIFIED","insertions":64,"deletions":-52},{"file":"test/haproxy.cfg.in","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"test/haproxy.cfg.out-check","type":"MODIFIED","insertions":4,"deletions":-10},{"file":"test/haproxy.cfg.test","type":"ADDED","insertions":45,"deletions":0},{"file":"test/haproxy_sock.test.js","type":"ADDED","insertions":165,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":45,"deletions":-54},{"file":"test/watch.test.js","type":"ADDED","insertions":411,"deletions":0},{"file":"tools/mk/Makefile.haproxy.targ","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1409,"sizeDeletions":-591},{"number":"11","revision":"d53ffeeb1028f54dc1369d64af5c174044512183","parents":["f51e486671211ee66da6b7f760be9b53a5d49252"],"ref":"refs/changes/36/6636/11","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1564476581,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1564476617,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":5,"deletions":-12},{"file":"README.md","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"etc/haproxy.cfg.in","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/app.js","type":"MODIFIED","insertions":98,"deletions":-92},{"file":"lib/haproxy_sock.js","type":"MODIFIED","insertions":25,"deletions":-24},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":115,"deletions":-135},{"file":"lib/watch.js","type":"MODIFIED","insertions":262,"deletions":-203},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"test/app.test.js","type":"ADDED","insertions":153,"deletions":0},{"file":"test/config.test.js","type":"MODIFIED","insertions":64,"deletions":-52},{"file":"test/haproxy.cfg.in","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"test/haproxy.cfg.out-check","type":"MODIFIED","insertions":4,"deletions":-10},{"file":"test/haproxy.cfg.test","type":"ADDED","insertions":45,"deletions":0},{"file":"test/haproxy_sock.test.js","type":"ADDED","insertions":165,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":45,"deletions":-54},{"file":"test/watch.test.js","type":"ADDED","insertions":411,"deletions":0},{"file":"tools/mk/Makefile.haproxy.targ","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1409,"sizeDeletions":-591},{"number":"12","revision":"aab68b793a0af07c5e40103e7a04e1ebf38cbdcf","parents":["f51e486671211ee66da6b7f760be9b53a5d49252"],"ref":"refs/changes/36/6636/12","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1564501917,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1564525413,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1564501947,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1564579165,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1565196217,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":5,"deletions":-12},{"file":"README.md","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"etc/haproxy.cfg.in","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/app.js","type":"MODIFIED","insertions":98,"deletions":-92},{"file":"lib/haproxy_sock.js","type":"MODIFIED","insertions":25,"deletions":-24},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":115,"deletions":-135},{"file":"lib/watch.js","type":"MODIFIED","insertions":262,"deletions":-203},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"test/app.test.js","type":"ADDED","insertions":153,"deletions":0},{"file":"test/config.test.js","type":"MODIFIED","insertions":64,"deletions":-52},{"file":"test/haproxy.cfg.in","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"test/haproxy.cfg.out-check","type":"MODIFIED","insertions":4,"deletions":-10},{"file":"test/haproxy.cfg.test","type":"ADDED","insertions":45,"deletions":0},{"file":"test/haproxy_sock.test.js","type":"ADDED","insertions":165,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":45,"deletions":-54},{"file":"test/watch.test.js","type":"ADDED","insertions":411,"deletions":0},{"file":"tools/mk/Makefile.haproxy.targ","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1409,"sizeDeletions":-591},{"number":"13","revision":"ccd2382cdb3eaf9570b33f2518f06ca7473438e1","parents":["f51e486671211ee66da6b7f760be9b53a5d49252"],"ref":"refs/changes/36/6636/13","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1565259966,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1564525413,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1564501947,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1564579165,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1565196217,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"SUBM","value":"1","grantedOn":1565266355,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":13,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":5,"deletions":-12},{"file":"README.md","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"etc/haproxy.cfg.in","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/app.js","type":"MODIFIED","insertions":98,"deletions":-92},{"file":"lib/haproxy_sock.js","type":"MODIFIED","insertions":25,"deletions":-24},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":115,"deletions":-135},{"file":"lib/watch.js","type":"MODIFIED","insertions":262,"deletions":-203},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"test/app.test.js","type":"ADDED","insertions":153,"deletions":0},{"file":"test/config.test.js","type":"MODIFIED","insertions":64,"deletions":-52},{"file":"test/haproxy.cfg.in","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"test/haproxy.cfg.out-check","type":"MODIFIED","insertions":4,"deletions":-10},{"file":"test/haproxy.cfg.test","type":"ADDED","insertions":45,"deletions":0},{"file":"test/haproxy_sock.test.js","type":"ADDED","insertions":165,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":45,"deletions":-54},{"file":"test/watch.test.js","type":"ADDED","insertions":411,"deletions":0},{"file":"tools/mk/Makefile.haproxy.targ","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1409,"sizeDeletions":-591}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}]}