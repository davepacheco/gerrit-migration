{"project":"joyent/sdc-vmapi","branch":"master","id":"I58a02da153d97dfd37af4ffebc241a60f2d957f9","number":"3202","subject":"TRITON-19 Triton equivalent to AWS\u0027 termination protection","owner":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"url":"https://cr.joyent.us/3202","commitMessage":"TRITON-19 Triton equivalent to AWS\u0027 termination protection\n","createdOn":1515716253,"lastUpdated":1519176190,"open":false,"status":"ABANDONED","comments":[{"timestamp":1515716253,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 1."},{"timestamp":1515716284,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1516087308,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 2: Patch Set 1 was rebased"},{"timestamp":1516087339,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2:\n\n\"make check\" passed ok"},{"timestamp":1516741959,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 2: Code-Review+1\n\n(4 comments)\n\nI don\u0027t see anything wrong with the code itself here. But I do see a problem with this feature as implemented. It is not tied at all to the indestructible_zoneroot feature as was described in the comments on the ticket.\n\nMy expectation had been that this tag would be backed on the instances by that flag. The reason being that without this, an operator can still accidentally delete the vm with vmadm, or delete the dataset with zfs destroy. If we use the existing indestructible_zoneroot mechanism, we prevent that. I thought that sdc-vmapi would be the logical place where the translation between tag and indestructible_zoneroot would occur, but I don\u0027t see that happening."},{"timestamp":1516870414,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 3."},{"timestamp":1516870445,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1517198229,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 4."},{"timestamp":1517198261,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1517198677,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1517199539,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1517200031,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 5:\n\nAll the comments in all TRITON-19 tickets handled. JoshW, new CR please!"},{"timestamp":1519173163,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 5:\n\ncan we abandon this one in favor of 3203?"},{"timestamp":1519176190,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Abandoned\n\nSee CR 3203 and comments in TRITON-19."}],"currentPatchSet":{"number":"5","revision":"58a02da153d97dfd37af4ffebc241a60f2d957f9","parents":["3ce6a7de61610641325f0bb6cccca27104c5ecc2"],"ref":"refs/changes/02/3202/5","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1517199539,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1517198261,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":7,"deletions":-4},{"file":"lib/apis/wfapi.js","type":"MODIFIED","insertions":24,"deletions":0},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":11,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":27,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.full.test.js","type":"MODIFIED","insertions":47,"deletions":-7}],"sizeInsertions":117,"sizeDeletions":-13},"patchSets":[{"number":"1","revision":"5fe306162a0829f410e3b8dc5c1fce5c59a090f7","parents":["6b8bc50157c9d787091179b003b6e0d95d213e74"],"ref":"refs/changes/02/3202/1","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1515716253,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515716284,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":7,"deletions":-4},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":11,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":27,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.full.test.js","type":"MODIFIED","insertions":33,"deletions":-7}],"sizeInsertions":79,"sizeDeletions":-13},{"number":"2","revision":"6375bfbd0404ece69837cb690215918f4f323358","parents":["404ffe5679e6430d37282d5eb258993cfda8dae4"],"ref":"refs/changes/02/3202/2","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1516087308,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515716284,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1516741959,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"comments":[{"file":"docs/index.md","line":13,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"2018"},{"file":"lib/endpoints/vms.js","line":8,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"2018"},{"file":"lib/errors.js","line":8,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"2018"},{"file":"test/vms.full.test.js","line":8,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"2018"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":7,"deletions":-4},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":11,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":27,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.full.test.js","type":"MODIFIED","insertions":33,"deletions":-7}],"sizeInsertions":79,"sizeDeletions":-13},{"number":"3","revision":"370959197c7ba05cdbc45aec506042ec3a6e5098","parents":["1bdd286fcb7c7168e43a425c8ccb100d4b38d3f1"],"ref":"refs/changes/02/3202/3","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1516870414,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1516870445,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":7,"deletions":-4},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":11,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":27,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.full.test.js","type":"MODIFIED","insertions":33,"deletions":-7}],"sizeInsertions":79,"sizeDeletions":-13},{"number":"4","revision":"019264696ba31b17ad86767659c9ce54edade1ed","parents":["3ce6a7de61610641325f0bb6cccca27104c5ecc2"],"ref":"refs/changes/02/3202/4","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1517198229,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1517198261,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"/COMMIT_MSG","line":7,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"No colon here.\n\nhttps://github.com/joyent/eng/blob/master/docs/index.md#commit-comments"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":7,"deletions":-4},{"file":"lib/apis/wfapi.js","type":"MODIFIED","insertions":24,"deletions":0},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":11,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":27,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.full.test.js","type":"MODIFIED","insertions":47,"deletions":-7}],"sizeInsertions":117,"sizeDeletions":-13},{"number":"5","revision":"58a02da153d97dfd37af4ffebc241a60f2d957f9","parents":["3ce6a7de61610641325f0bb6cccca27104c5ecc2"],"ref":"refs/changes/02/3202/5","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1517199539,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1517198261,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":7,"deletions":-4},{"file":"lib/apis/wfapi.js","type":"MODIFIED","insertions":24,"deletions":0},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":11,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":27,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.full.test.js","type":"MODIFIED","insertions":47,"deletions":-7}],"sizeInsertions":117,"sizeDeletions":-13}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}]}