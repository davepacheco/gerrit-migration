{"project":"joyent/sdc-napi","branch":"master","id":"I6d4fac24b2fc80e1288ba1668ecf4c9dbfb72e0e","number":"2050","subject":"NAPI-418 Integration tests use unit test configuration instead of NAPI\u0027s actual configuration NAPI-419 NAPI tests fail on non-COAL DC when fabric networks are enabled Reviewed by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e Approved by: Julien Gilli \u003cjulien.gi","owner":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"url":"https://cr.joyent.us/2050","commitMessage":"NAPI-418 Integration tests use unit test configuration instead of NAPI\u0027s actual configuration\nNAPI-419 NAPI tests fail on non-COAL DC when fabric networks are enabled\nReviewed by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e\nApproved by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e\n","createdOn":1496783717,"lastUpdated":1496787571,"open":false,"status":"MERGED","comments":[{"timestamp":1496783717,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 1."},{"timestamp":1496783782,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1496786476,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 1: Code-Review+1 Integration-Approval+1\n\n(1 comment)"},{"timestamp":1496786894,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1496786937,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 2: Commit message was updated."},{"timestamp":1496787045,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1496787571,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Cody Peter Mello"}],"currentPatchSet":{"number":"2","revision":"db439320163ae89f946f78194e064703f88d5444","parents":["6d628d76b49bb399eaa977fdadebc8cab00978e1"],"ref":"refs/changes/50/2050/2","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1496786937,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1496783782,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1496786476,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1496786476,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"SUBM","value":"1","grantedOn":1496787571,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/fabrics.test.js","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"test/integration/provision.test.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"test/lib/config.js","type":"MODIFIED","insertions":21,"deletions":-8}],"sizeInsertions":33,"sizeDeletions":-13},"patchSets":[{"number":"1","revision":"6d4fac24b2fc80e1288ba1668ecf4c9dbfb72e0e","parents":["6d628d76b49bb399eaa977fdadebc8cab00978e1"],"ref":"refs/changes/50/2050/1","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1496783717,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1496783782,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1496786476,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1496786476,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"comments":[{"file":"test/lib/config.js","line":38,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"It seems only integration tests use this module. Unit tests seem to only load the \"config.json\" file directly from the \"test\" directory.\n\nSo I\u0027m wondering if it\u0027s worth it to support this module being used for both integration and unit tests."},{"file":"test/lib/config.js","line":38,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"This module also gets used in test/lib/server.js, which is what\u0027s used to stand up NAPI in unit tests, and in test/lib/nic-tag.js, which is used by several of the unit tests."},{"file":"test/lib/config.js","line":38,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"My bad, I had missed those entries, sorry. All good then!"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/fabrics.test.js","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"test/integration/provision.test.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"test/lib/config.js","type":"MODIFIED","insertions":21,"deletions":-8}],"sizeInsertions":33,"sizeDeletions":-13},{"number":"2","revision":"db439320163ae89f946f78194e064703f88d5444","parents":["6d628d76b49bb399eaa977fdadebc8cab00978e1"],"ref":"refs/changes/50/2050/2","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1496786937,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1496787571,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1496783782,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1496786476,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1496786476,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/fabrics.test.js","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"test/integration/provision.test.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"test/lib/config.js","type":"MODIFIED","insertions":21,"deletions":-8}],"sizeInsertions":33,"sizeDeletions":-13}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}]}