From 7c472bc495ba44ac4cdde0af50ff627021942524 Mon Sep 17 00:00:00 2001
From: Tim Foster <tim.foster@joyent.com>
Date: Wed, 6 Feb 2019 18:14:16 +0000
Subject: [PATCH] TOOLS-2174 agent-cache 'clone' should use '--' when switching
 branches Reviewed by: Trent Mick <trentm@gmail.com> Approved by: Trent Mick
 <trentm@gmail.com>

---
 tools/agent-prebuilt.sh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/tools/agent-prebuilt.sh b/tools/agent-prebuilt.sh
index c36b736..b11f710 100755
--- a/tools/agent-prebuilt.sh
+++ b/tools/agent-prebuilt.sh
@@ -90,16 +90,16 @@ function do_clone {
             echo "the branch the existing repository is checked out to doesn't"
             echo "exist upstream."
         fi
-        git checkout $agent_branch
+        git checkout $agent_branch --
         if [[ $? -ne 0 ]]; then
             echo "Checking out $agent_branch failed, falling back to $branch"
-            git checkout $branch
+            git checkout $branch --
         fi
         if [[ $? -ne 0 ]]; then
             # at this point, failures are really fatal.
             set -o errexit
             echo "Checking out $branch also failed, falling back to master"
-            git checkout master
+            git checkout master --
             git_exit=$?
         fi
     else
-- 
2.21.0

