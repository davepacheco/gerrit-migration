{"project":"joyent/node-workflow-moray-backend","branch":"master","id":"I4be75d0b8468fd70b75b05a8cb9a0aeffce3eca6","number":"1540","subject":"WORKFLOW-214 node-workflow tests broken since WORKFLOW-205","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/1540","commitMessage":"WORKFLOW-214 node-workflow tests broken since WORKFLOW-205\n","createdOn":1487606888,"lastUpdated":1487612842,"open":false,"status":"MERGED","comments":[{"timestamp":1487606888,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1487606926,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1487607216,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nJosh, the problem was that when we create a job through wf HTTP API, it takes care of moving what it\u0027s necessary from wf params to wf properties (https://github.com/joyent/node-workflow/blob/master/lib/api.js#L228-L232) and in the failing tests that will not happen due to usage of workflow factory, instead of http API.\n\nI assume the reason for these tests to pass originally was to run them against the wrong (pre-change) setup. Thanks for catching these."},{"timestamp":1487609905,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1487611478,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 1: Integration-Approval+1"},{"timestamp":1487612842,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"1","revision":"4be75d0b8468fd70b75b05a8cb9a0aeffce3eca6","parents":["e34e69830c63c10ac0ede4992ef58815f82b6f40"],"ref":"refs/changes/40/1540/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1487606888,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1487606926,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487609905,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1487611478,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"SUBM","value":"1","grantedOn":1487612842,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"test/helper.js","type":"MODIFIED","insertions":13,"deletions":-14},{"file":"test/moray-backend.test.js","type":"MODIFIED","insertions":9,"deletions":-12}],"sizeInsertions":28,"sizeDeletions":-31},"patchSets":[{"number":"1","revision":"4be75d0b8468fd70b75b05a8cb9a0aeffce3eca6","parents":["e34e69830c63c10ac0ede4992ef58815f82b6f40"],"ref":"refs/changes/40/1540/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1487606888,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1487606926,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487609905,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1487611478,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"SUBM","value":"1","grantedOn":1487612842,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"test/helper.js","type":"MODIFIED","insertions":13,"deletions":-14},{"file":"test/moray-backend.test.js","type":"MODIFIED","insertions":9,"deletions":-12}],"sizeInsertions":28,"sizeDeletions":-31}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}