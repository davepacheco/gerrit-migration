{"project":"joyent/sdc-manatee","branch":"master","id":"I5546a1a2b2790a6a9e58c69891727812c98b14b9","number":"2927","subject":"MANATEE-387 JPC manatee pg_dump.sh duration impedes month-end billing cycle","owner":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"url":"https://cr.joyent.us/2927","commitMessage":"MANATEE-387 JPC manatee pg_dump.sh duration impedes month-end billing cycle\n","createdOn":1510188026,"lastUpdated":1520476547,"open":true,"status":"NEW","comments":[{"timestamp":1510188026,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Uploaded patch set 1."},{"timestamp":1510188030,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1510189453,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1510248247,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Uploaded patch set 2."},{"timestamp":1510248250,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1510248379,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Uploaded patch set 3."},{"timestamp":1510248382,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1513633375,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1516643583,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 3:\n\n(3 comments)"},{"timestamp":1520456540,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 4: Patch Set 3 was rebased"},{"timestamp":1520476547,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4:\n\n\"make check\" passed ok"}],"currentPatchSet":{"number":"4","revision":"cd218401cc61fe0fe7cd2c10af517301336e9da9","parents":["589df718b1a5ee9363877e5e4e9a572ceeeb28b6"],"ref":"refs/changes/27/2927/4","uploader":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"createdOn":1520456540,"author":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1510248382,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"pg_dump/pg_backup_common.sh","type":"MODIFIED","insertions":32,"deletions":-8},{"file":"pg_dump/pg_dump.sh","type":"MODIFIED","insertions":4,"deletions":-2}],"sizeInsertions":36,"sizeDeletions":-10},"patchSets":[{"number":"1","revision":"d4fdfe3402c6f91f9fb184d19c05c29deae98266","parents":["c587e86eea7fb51fc917b7d0ece816bcd52aafa7"],"ref":"refs/changes/27/2927/1","uploader":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"createdOn":1510188026,"author":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1510188030,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"pg_dump/pg_backup_common.sh","line":164,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Should we call this after each dump completes; i.e., inside the loop?\n\nEither way, it might be nice to mention that we\u0027re doing it in the loop here so that the archiver can start uploading as each file becomes available."},{"file":"pg_dump/pg_backup_common.sh","line":164,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Conceptually those looked like a \"batch\" to me, I don\u0027t know about the consuming of these; but if it is OK to move them one-by-one then we should do that too!"},{"file":"pg_dump/pg_dump.sh","line":56,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"In general, I think it\u0027s best if comments can stand alone and not include ticket references.  Here, I would probably:\n\n    #\n    # Note that backup() will move each dump file into the\n    # archive location automatically.\n    #\n    backup \u0027JSON\u0027"},{"file":"pg_dump/pg_dump.sh","line":56,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"pg_dump/pg_backup_common.sh","type":"MODIFIED","insertions":2,"deletions":0},{"file":"pg_dump/pg_dump.sh","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":3,"sizeDeletions":-1},{"number":"2","revision":"7660f8530d2d1b086aab005368cb07808084060c","parents":["c587e86eea7fb51fc917b7d0ece816bcd52aafa7"],"ref":"refs/changes/27/2927/2","uploader":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"createdOn":1510248247,"author":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1510248250,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"pg_dump/pg_backup_common.sh","type":"MODIFIED","insertions":32,"deletions":-8},{"file":"pg_dump/pg_dump.sh","type":"MODIFIED","insertions":4,"deletions":-2}],"sizeInsertions":36,"sizeDeletions":-10},{"number":"3","revision":"5546a1a2b2790a6a9e58c69891727812c98b14b9","parents":["c587e86eea7fb51fc917b7d0ece816bcd52aafa7"],"ref":"refs/changes/27/2927/3","uploader":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"createdOn":1510248379,"author":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1510248382,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"pg_dump/pg_dump.sh","line":59,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I think this \"else\" might have been indented by accident?"},{"file":"pg_dump/pg_dump.sh","line":59,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"pg_dump/pg_backup_common.sh","type":"MODIFIED","insertions":32,"deletions":-8},{"file":"pg_dump/pg_dump.sh","type":"MODIFIED","insertions":4,"deletions":-2}],"sizeInsertions":36,"sizeDeletions":-10},{"number":"4","revision":"cd218401cc61fe0fe7cd2c10af517301336e9da9","parents":["589df718b1a5ee9363877e5e4e9a572ceeeb28b6"],"ref":"refs/changes/27/2927/4","uploader":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"createdOn":1520456540,"author":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1510248382,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"pg_dump/pg_backup_common.sh","type":"MODIFIED","insertions":32,"deletions":-8},{"file":"pg_dump/pg_dump.sh","type":"MODIFIED","insertions":4,"deletions":-2}],"sizeInsertions":36,"sizeDeletions":-10}],"allReviewers":[{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},{"name":"Joyent Automation","username":"joyent-automation"}]}