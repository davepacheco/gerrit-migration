{"project":"joyent/manta-minnow","branch":"master","id":"I44bf25214354874d76970e5b91745c209ba2600f","number":"1353","subject":"MANTA-3127 update minnow to moray v3 Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Reviewed by: Richard Kiene \u003crichard.kiene@joyent.com\u003e Approved by: Richard Kiene \u003crichard.kiene@joyent.com\u003e","owner":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"url":"https://cr.joyent.us/1353","commitMessage":"MANTA-3127 update minnow to moray v3\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nReviewed by: Richard Kiene \u003crichard.kiene@joyent.com\u003e\nApproved by: Richard Kiene \u003crichard.kiene@joyent.com\u003e\n","createdOn":1485476926,"lastUpdated":1485890620,"open":false,"status":"MERGED","comments":[{"timestamp":1485476926,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 1."},{"timestamp":1485476966,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1485477058,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 2."},{"timestamp":1485477087,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1485560105,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2:\n\n(2 comments)"},{"timestamp":1485816489,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1485883415,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1485883648,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2: Code-Review+1\n\n(2 comments)"},{"timestamp":1485890151,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1485890591,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1485890620,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by David Pacheco"}],"currentPatchSet":{"number":"3","revision":"44bf25214354874d76970e5b91745c209ba2600f","parents":["f62e296883689140bef94c80b7cb7fefb8c7dc23"],"ref":"refs/changes/53/1353/3","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1485890591,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1485477087,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1485883648,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1485890151,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1485890151,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"SUBM","value":"1","grantedOn":1485890620,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":4,"deletions":0},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"etc/config.lab.json","type":"DELETED","insertions":0,"deletions":-34},{"file":"main.js","type":"MODIFIED","insertions":5,"deletions":-16},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/minnow/template","type":"MODIFIED","insertions":8,"deletions":-8}],"sizeInsertions":26,"sizeDeletions":-67},"patchSets":[{"number":"1","revision":"2eda7f0d4a57885472b0ad9ca289a7a64d4df1f9","parents":["f62e296883689140bef94c80b7cb7fefb8c7dc23"],"ref":"refs/changes/53/1353/1","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1485476926,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1485476966,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":4,"deletions":0},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"etc/config.lab.json","type":"DELETED","insertions":0,"deletions":-34},{"file":"main.js","type":"MODIFIED","insertions":5,"deletions":-16},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/minnow/template","type":"MODIFIED","insertions":8,"deletions":-8}],"sizeInsertions":26,"sizeDeletions":-67},{"number":"2","revision":"9e6952740b5122d023f3bc7291259b3ba6402b77","parents":["f62e296883689140bef94c80b7cb7fefb8c7dc23"],"ref":"refs/changes/53/1353/2","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1485477058,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1485883648,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1485477087,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1485890151,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1485890151,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}}],"comments":[{"file":"package.json","line":17,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"In some cases we\u0027ve kept ^3.0.0, others we\u0027ve dropped it. Is there a particular reason for each change?"},{"file":"package.json","line":17,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I put a more detailed answer into https://cr.joyent.us/#/c/1350/.  In this case, I went back to an exact version to match the other dependencies in this file."},{"file":"package.json","line":17,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"sapi_manifests/minnow/template","line":19,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Can you confirm that the reason for the target/maximum is because a given minnow will only ever be talking to a single shard and having a single outstanding request?"},{"file":"sapi_manifests/minnow/template","line":19,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Basically, yes.\n\nThe parameters are effectively per-shard, but there\u0027s only one shard in play here.  And even with one connection, we can make multiple concurrent requests if we needed to, but since we know we only expect one request per 5 seconds, and there are so many minnows, we deliberately cap the connections here."},{"file":"sapi_manifests/minnow/template","line":19,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"OK, that makes sense. Thanks for the explanation."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":4,"deletions":0},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"etc/config.lab.json","type":"DELETED","insertions":0,"deletions":-34},{"file":"main.js","type":"MODIFIED","insertions":5,"deletions":-16},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/minnow/template","type":"MODIFIED","insertions":8,"deletions":-8}],"sizeInsertions":26,"sizeDeletions":-67},{"number":"3","revision":"44bf25214354874d76970e5b91745c209ba2600f","parents":["f62e296883689140bef94c80b7cb7fefb8c7dc23"],"ref":"refs/changes/53/1353/3","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1485890591,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1485890620,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1485883648,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1485477087,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1485890151,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1485890151,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":4,"deletions":0},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"etc/config.lab.json","type":"DELETED","insertions":0,"deletions":-34},{"file":"main.js","type":"MODIFIED","insertions":5,"deletions":-16},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/minnow/template","type":"MODIFIED","insertions":8,"deletions":-8}],"sizeInsertions":26,"sizeDeletions":-67}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}]}