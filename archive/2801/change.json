{"project":"joyent/smartos-live","branch":"master","id":"If328fc17b5fd455cd5d790e33210d32f5021177f","number":"2801","subject":"DOCKER-1118 do not set min_platform for docker and lx images Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"url":"https://cr.joyent.us/2801","commitMessage":"DOCKER-1118 do not set min_platform for docker and lx images\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1508278053,"lastUpdated":1508342796,"open":false,"status":"MERGED","comments":[{"timestamp":1508278053,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 1."},{"timestamp":1508278055,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 361d6b476d7fc63c81afdc5abf8aa61edaad16b9\n    \n    DOCKER-1118 docker build should not set image min_platform"},{"timestamp":1508278123,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1508279057,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 2: Commit message was updated."},{"timestamp":1508279762,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1508280180,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 3."},{"timestamp":1508280182,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 38e0f5d3924640300f375fff2ef9e8ce25c619fe\n    \n    tweak CHANGES text"},{"timestamp":1508280220,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1508280240,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1508342757,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1508342796,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Todd Whiteman"}],"currentPatchSet":{"number":"4","revision":"f328fc17b5fd455cd5d790e33210d32f5021177f","parents":["83ddb6ae89918f69df1903ccd0cb5512f5af7fd7"],"ref":"refs/changes/01/2801/4","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1508342757,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1508280220,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1508280240,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1508280240,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1508342796,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"src/img/CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"src/img/lib/imgadm.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/img/package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":8,"sizeDeletions":-2},"patchSets":[{"number":"1","revision":"8381c1e710009decb7f76da10b590615d1ed1190","parents":["83ddb6ae89918f69df1903ccd0cb5512f5af7fd7"],"ref":"refs/changes/01/2801/1","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1508278053,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1508278123,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/img/CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/img/lib/imgadm.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/img/package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":6,"sizeDeletions":-2},{"number":"2","revision":"9abafb2cc34ff1dc935de2b9e08cb707e4a660f7","parents":["83ddb6ae89918f69df1903ccd0cb5512f5af7fd7"],"ref":"refs/changes/01/2801/2","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1508279057,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1508278123,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/img/CHANGES.md","line":11,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"How about \"- DOCKER-1118 `imgadm create ...` will no longer set `requirements.min_platform` to the current platform version for LX and Docker images. KVM images already did not set `min_platform`. It is still set for SmartOS images.\""}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/img/CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/img/lib/imgadm.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/img/package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":6,"sizeDeletions":-2},{"number":"3","revision":"334ea53312ec62c9cd51af1e677811aca715908b","parents":["83ddb6ae89918f69df1903ccd0cb5512f5af7fd7"],"ref":"refs/changes/01/2801/3","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1508280180,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1508280220,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1508280240,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1508280240,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/img/CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"src/img/lib/imgadm.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/img/package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":8,"sizeDeletions":-2},{"number":"4","revision":"f328fc17b5fd455cd5d790e33210d32f5021177f","parents":["83ddb6ae89918f69df1903ccd0cb5512f5af7fd7"],"ref":"refs/changes/01/2801/4","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1508342757,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1508280220,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1508280240,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1508280240,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1508342796,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"src/img/CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"src/img/lib/imgadm.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/img/package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":8,"sizeDeletions":-2}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}]}