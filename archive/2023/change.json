{"project":"joyent/node-fast-messages","branch":"master","id":"I35a6c213c371f6add452c2f581643b32874f5eb9","number":"2023","subject":"TRITON-1439 Upgrade sdc-fast-stream to node-fast v2 and other newer dependencies TRITON-1443 Use ESLint in sdc-fast-stream Reviewed by: Alex Wilson \u003calex.wilson@joyent.com\u003e Approved by: Alex Wilson \u003calex.wilson@joyent.com\u003e","owner":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"url":"https://cr.joyent.us/2023","commitMessage":"TRITON-1439 Upgrade sdc-fast-stream to node-fast v2 and other newer dependencies\nTRITON-1443 Use ESLint in sdc-fast-stream\nReviewed by: Alex Wilson \u003calex.wilson@joyent.com\u003e\nApproved by: Alex Wilson \u003calex.wilson@joyent.com\u003e\n","createdOn":1496273813,"lastUpdated":1562015105,"open":false,"status":"MERGED","comments":[{"timestamp":1496273813,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 1."},{"timestamp":1496273861,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 2."},{"timestamp":1496273884,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1496273995,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1496274892,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 2:\n\n(5 comments)"},{"timestamp":1501181677,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 3."},{"timestamp":1501181714,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 4."},{"timestamp":1501181736,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 4:\n\n(4 comments)"},{"timestamp":1501181737,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing-1\n\n\"make check\" exited with status 2\n\n /tmp/repo/lib/server.js\n /tmp/repo/lib/client.js\n /tmp/repo/lib/client.js(87): warning: redeclaration of connecting\n /tmp/repo/lib/common.js\n /tmp/repo/lib/index.js\n /tmp/repo/test/simple.test.js\n /tmp/repo/test/run.js\n /tmp/repo/test/reconnect.test.js\n /tmp/repo/test/server.js\n Makefile:101: recipe for target \u0027check-jsl\u0027 failed\n gmake: *** [check-jsl] Error 1"},{"timestamp":1501181962,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1549498156,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 5."},{"timestamp":1549498181,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1549499447,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 6."},{"timestamp":1549499471,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1549568950,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1549578255,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1549586441,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1559153831,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 7."},{"timestamp":1559153853,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1559153977,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 8: Commit message was updated."},{"timestamp":1562014821,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 9."},{"timestamp":1562014839,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1562015069,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 9: Code-Review+1 Integration-Approval+1"},{"timestamp":1562015094,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 10: Commit message was updated."},{"timestamp":1562015105,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Cody Peter Mello"}],"currentPatchSet":{"number":"10","revision":"35a6c213c371f6add452c2f581643b32874f5eb9","parents":["4c460bbe5b857019bc419d27f268bb1cd557dfac"],"ref":"refs/changes/23/2023/10","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1562015094,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1562014839,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562015069,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1562015069,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"SUBM","value":"1","grantedOn":1562015105,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":25,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":4,"deletions":0},{"file":".npmignore","type":"MODIFIED","insertions":6,"deletions":0},{"file":"CONTRIBUTING.md","type":"ADDED","insertions":16,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":29,"deletions":-61},{"file":"README.md","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/client.js","type":"MODIFIED","insertions":272,"deletions":-185},{"file":"lib/common.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/index.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/server.js","type":"MODIFIED","insertions":199,"deletions":-104},{"file":"package.json","type":"MODIFIED","insertions":12,"deletions":-10},{"file":"test/reconnect.test.js","type":"ADDED","insertions":232,"deletions":0},{"file":"test/run.js","type":"ADDED","insertions":24,"deletions":0},{"file":"test/server.js","type":"ADDED","insertions":65,"deletions":0},{"file":"test/simple.test.js","type":"MODIFIED","insertions":306,"deletions":-46},{"file":"tools/jsl.node.conf","type":"DELETED","insertions":0,"deletions":-138},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":14,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":105,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"ADDED","insertions":87,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"ADDED","insertions":345,"deletions":0}],"sizeInsertions":1755,"sizeDeletions":-553},"patchSets":[{"number":"1","revision":"2d24cf72ba8cdce3965fab8e13a46dbb0d243b29","parents":["8a76ceb087dc54d8c19e1b703f84ba5a533acbf3"],"ref":"refs/changes/23/2023/1","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1496273813,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1496273884,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":25,"deletions":-12},{"file":"README.md","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/client.js","type":"MODIFIED","insertions":242,"deletions":-175},{"file":"lib/common.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/index.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/server.js","type":"MODIFIED","insertions":197,"deletions":-104},{"file":"package.json","type":"MODIFIED","insertions":12,"deletions":-10},{"file":"test/reconnect.test.js","type":"ADDED","insertions":232,"deletions":0},{"file":"test/run.js","type":"ADDED","insertions":24,"deletions":0},{"file":"test/server.js","type":"ADDED","insertions":65,"deletions":0},{"file":"test/simple.test.js","type":"MODIFIED","insertions":304,"deletions":-41},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":20,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":1140,"sizeDeletions":-354},{"number":"2","revision":"c97177e8c00459f087b27d5ad86e97a58ea5bb4d","parents":["8a76ceb087dc54d8c19e1b703f84ba5a533acbf3"],"ref":"refs/changes/23/2023/2","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1496273861,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1496273995,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/client.js","line":76,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"You should avoid taking actions during a state transition like this -- instead take them in the entry function for the next state.\n\nActions with side-effects in the state transition handler here make it into more of a Mealy machine, which mooremachine (hence the name) is not really designed for. Makes it easier to get into traps like self-re-entry."},{"file":"lib/client.js","line":76,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/client.js","line":100,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"This level of action-taking in a handler is generally fine (you can get away with it), but like above really it would be better to have an \"error\" state that we go to here, and then come back to this one.\n\nIt can also make debugging simpler since you can see this transition in the state history of the FSM more clearly."},{"file":"lib/client.js","line":100,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/client.js","line":162,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Just so you\u0027re aware, emitting from the state_* handler binds anything that listens on this event to a contract of not taking actions that will further modify your state.\n\nE.g. it would not be *generally* safe for someone to do\n\n  client.on(\u0027connect\u0027, function () { client.close(); });\n\nwith the emit placed like this (since .close() will trigger another state transition synchronously).\n\nThere are specific cases where it\u0027s safe enough to do this (where it can be no more than one layer deep), but it requires careful analysis. If you want to make this one of those cases, I would suggest a comment explaining it, as well as comments in the other transition functions that aren\u0027t allowed to emit synchronously as a result to avoid double-transitions."},{"file":"lib/client.js","line":162,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve moved the emit to happen on another tick, after the state transition returns."},{"file":"lib/client.js","line":227,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Emitting from inside a .on() handler is not a great idea. The emit should probably either be in the state_started.ready function body or in a setImmediate/nextTick scheduled by it.\n\nActions on state entry! :P"},{"file":"lib/client.js","line":227,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve moved this into the beginning of \"started.ready\"."},{"file":"lib/client.js","line":240,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Unlike the other ones I\u0027ve pointed at, since this is just a pass-through and doesn\u0027t do a state transition as well as the emit(), it\u0027s fine."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":25,"deletions":-12},{"file":"README.md","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/client.js","type":"MODIFIED","insertions":242,"deletions":-175},{"file":"lib/common.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/index.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/server.js","type":"MODIFIED","insertions":197,"deletions":-104},{"file":"package.json","type":"MODIFIED","insertions":12,"deletions":-10},{"file":"test/reconnect.test.js","type":"ADDED","insertions":232,"deletions":0},{"file":"test/run.js","type":"ADDED","insertions":24,"deletions":0},{"file":"test/server.js","type":"ADDED","insertions":65,"deletions":0},{"file":"test/simple.test.js","type":"MODIFIED","insertions":304,"deletions":-41},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":20,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":1141,"sizeDeletions":-355},{"number":"3","revision":"0bbd6dceec1bbfa434732734a35c9f48fd2e0ac1","parents":["8a76ceb087dc54d8c19e1b703f84ba5a533acbf3"],"ref":"refs/changes/23/2023/3","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1501181677,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1501181737,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":25,"deletions":-12},{"file":"README.md","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/client.js","type":"MODIFIED","insertions":273,"deletions":-185},{"file":"lib/common.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/index.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/server.js","type":"MODIFIED","insertions":197,"deletions":-104},{"file":"package.json","type":"MODIFIED","insertions":12,"deletions":-10},{"file":"test/reconnect.test.js","type":"ADDED","insertions":232,"deletions":0},{"file":"test/run.js","type":"ADDED","insertions":24,"deletions":0},{"file":"test/server.js","type":"ADDED","insertions":65,"deletions":0},{"file":"test/simple.test.js","type":"MODIFIED","insertions":304,"deletions":-41},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":20,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":1172,"sizeDeletions":-365},{"number":"4","revision":"ea2ce306fa1238d688756a3ce21a017e31730177","parents":["8a76ceb087dc54d8c19e1b703f84ba5a533acbf3"],"ref":"refs/changes/23/2023/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1501181714,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1501181962,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":25,"deletions":-12},{"file":"README.md","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/client.js","type":"MODIFIED","insertions":273,"deletions":-185},{"file":"lib/common.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/index.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/server.js","type":"MODIFIED","insertions":197,"deletions":-104},{"file":"package.json","type":"MODIFIED","insertions":12,"deletions":-10},{"file":"test/reconnect.test.js","type":"ADDED","insertions":232,"deletions":0},{"file":"test/run.js","type":"ADDED","insertions":24,"deletions":0},{"file":"test/server.js","type":"ADDED","insertions":65,"deletions":0},{"file":"test/simple.test.js","type":"MODIFIED","insertions":304,"deletions":-41},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":20,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":1172,"sizeDeletions":-365},{"number":"5","revision":"d541e2cea45190e1743abbe3cfbe6cc0b4e3614b","parents":["8a76ceb087dc54d8c19e1b703f84ba5a533acbf3"],"ref":"refs/changes/23/2023/5","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1549498156,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1549498181,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":25,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":4,"deletions":0},{"file":".npmignore","type":"MODIFIED","insertions":6,"deletions":0},{"file":"CONTRIBUTING.md","type":"ADDED","insertions":16,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":36,"deletions":-59},{"file":"README.md","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/client.js","type":"MODIFIED","insertions":273,"deletions":-185},{"file":"lib/common.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/index.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/server.js","type":"MODIFIED","insertions":199,"deletions":-104},{"file":"package.json","type":"MODIFIED","insertions":12,"deletions":-10},{"file":"test/reconnect.test.js","type":"ADDED","insertions":232,"deletions":0},{"file":"test/run.js","type":"ADDED","insertions":24,"deletions":0},{"file":"test/server.js","type":"ADDED","insertions":65,"deletions":0},{"file":"test/simple.test.js","type":"MODIFIED","insertions":306,"deletions":-46},{"file":"tools/jsl.node.conf","type":"DELETED","insertions":0,"deletions":-138},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":14,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":105,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"ADDED","insertions":87,"deletions":0},{"file":"tools/mk/Makefile.node.defs","type":"ADDED","insertions":110,"deletions":0},{"file":"tools/mk/Makefile.node.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.node_deps.defs","type":"ADDED","insertions":43,"deletions":0},{"file":"tools/mk/Makefile.node_deps.targ","type":"ADDED","insertions":24,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"ADDED","insertions":159,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"ADDED","insertions":345,"deletions":0}],"sizeInsertions":2184,"sizeDeletions":-552},{"number":"6","revision":"34cbc0d7c85668277fe19f237eaae243430ffe58","parents":["8a76ceb087dc54d8c19e1b703f84ba5a533acbf3"],"ref":"refs/changes/23/2023/6","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1549499447,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549586441,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1549499471,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/server.js","line":34,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Is there a particular reason to do this over using Function.prototype.bind() to curry in the first argument?"},{"file":"lib/server.js","line":34,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"When benchmarking other code before, I have found that curried functions execute faster than using .bind(). (I assume that .bind() kill some optimization in v8.) If you think it\u0027d look better, I can make these methods on the server, and then pass a closure to .registerRpcMethod() that calls the method."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":25,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":4,"deletions":0},{"file":".npmignore","type":"MODIFIED","insertions":6,"deletions":0},{"file":"CONTRIBUTING.md","type":"ADDED","insertions":16,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":36,"deletions":-59},{"file":"README.md","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/client.js","type":"MODIFIED","insertions":272,"deletions":-185},{"file":"lib/common.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/index.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/server.js","type":"MODIFIED","insertions":199,"deletions":-104},{"file":"package.json","type":"MODIFIED","insertions":12,"deletions":-10},{"file":"test/reconnect.test.js","type":"ADDED","insertions":232,"deletions":0},{"file":"test/run.js","type":"ADDED","insertions":24,"deletions":0},{"file":"test/server.js","type":"ADDED","insertions":65,"deletions":0},{"file":"test/simple.test.js","type":"MODIFIED","insertions":306,"deletions":-46},{"file":"tools/jsl.node.conf","type":"DELETED","insertions":0,"deletions":-138},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":14,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":105,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"ADDED","insertions":87,"deletions":0},{"file":"tools/mk/Makefile.node.defs","type":"ADDED","insertions":110,"deletions":0},{"file":"tools/mk/Makefile.node.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.node_deps.defs","type":"ADDED","insertions":43,"deletions":0},{"file":"tools/mk/Makefile.node_deps.targ","type":"ADDED","insertions":24,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"ADDED","insertions":159,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"ADDED","insertions":345,"deletions":0}],"sizeInsertions":2183,"sizeDeletions":-552},{"number":"7","revision":"2e5dbc60af7a09826a40e703bc494237f822002f","parents":["4c460bbe5b857019bc419d27f268bb1cd557dfac"],"ref":"refs/changes/23/2023/7","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1559153831,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1559153853,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":25,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":4,"deletions":0},{"file":".npmignore","type":"MODIFIED","insertions":6,"deletions":0},{"file":"CONTRIBUTING.md","type":"ADDED","insertions":16,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":36,"deletions":-59},{"file":"README.md","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/client.js","type":"MODIFIED","insertions":272,"deletions":-185},{"file":"lib/common.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/index.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/server.js","type":"MODIFIED","insertions":199,"deletions":-104},{"file":"package.json","type":"MODIFIED","insertions":12,"deletions":-10},{"file":"test/reconnect.test.js","type":"ADDED","insertions":232,"deletions":0},{"file":"test/run.js","type":"ADDED","insertions":24,"deletions":0},{"file":"test/server.js","type":"ADDED","insertions":65,"deletions":0},{"file":"test/simple.test.js","type":"MODIFIED","insertions":306,"deletions":-46},{"file":"tools/jsl.node.conf","type":"DELETED","insertions":0,"deletions":-138},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":14,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":105,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"ADDED","insertions":87,"deletions":0},{"file":"tools/mk/Makefile.node.defs","type":"ADDED","insertions":110,"deletions":0},{"file":"tools/mk/Makefile.node.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.node_deps.defs","type":"ADDED","insertions":43,"deletions":0},{"file":"tools/mk/Makefile.node_deps.targ","type":"ADDED","insertions":24,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"ADDED","insertions":159,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"ADDED","insertions":345,"deletions":0}],"sizeInsertions":2182,"sizeDeletions":-551},{"number":"8","revision":"9c7422c8f8b62e1340ae54c6b73663359c467b1a","parents":["4c460bbe5b857019bc419d27f268bb1cd557dfac"],"ref":"refs/changes/23/2023/8","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1559153977,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1559153853,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":25,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":4,"deletions":0},{"file":".npmignore","type":"MODIFIED","insertions":6,"deletions":0},{"file":"CONTRIBUTING.md","type":"ADDED","insertions":16,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":36,"deletions":-59},{"file":"README.md","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/client.js","type":"MODIFIED","insertions":272,"deletions":-185},{"file":"lib/common.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/index.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/server.js","type":"MODIFIED","insertions":199,"deletions":-104},{"file":"package.json","type":"MODIFIED","insertions":12,"deletions":-10},{"file":"test/reconnect.test.js","type":"ADDED","insertions":232,"deletions":0},{"file":"test/run.js","type":"ADDED","insertions":24,"deletions":0},{"file":"test/server.js","type":"ADDED","insertions":65,"deletions":0},{"file":"test/simple.test.js","type":"MODIFIED","insertions":306,"deletions":-46},{"file":"tools/jsl.node.conf","type":"DELETED","insertions":0,"deletions":-138},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":14,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":105,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"ADDED","insertions":87,"deletions":0},{"file":"tools/mk/Makefile.node.defs","type":"ADDED","insertions":110,"deletions":0},{"file":"tools/mk/Makefile.node.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.node_deps.defs","type":"ADDED","insertions":43,"deletions":0},{"file":"tools/mk/Makefile.node_deps.targ","type":"ADDED","insertions":24,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"ADDED","insertions":159,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"ADDED","insertions":345,"deletions":0}],"sizeInsertions":2182,"sizeDeletions":-551},{"number":"9","revision":"b7ea3c329328a8412e7fc8551d6f19aaa0964b32","parents":["4c460bbe5b857019bc419d27f268bb1cd557dfac"],"ref":"refs/changes/23/2023/9","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1562014821,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562015069,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1562015069,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1562014839,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":25,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":4,"deletions":0},{"file":".npmignore","type":"MODIFIED","insertions":6,"deletions":0},{"file":"CONTRIBUTING.md","type":"ADDED","insertions":16,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":29,"deletions":-61},{"file":"README.md","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/client.js","type":"MODIFIED","insertions":272,"deletions":-185},{"file":"lib/common.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/index.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/server.js","type":"MODIFIED","insertions":199,"deletions":-104},{"file":"package.json","type":"MODIFIED","insertions":12,"deletions":-10},{"file":"test/reconnect.test.js","type":"ADDED","insertions":232,"deletions":0},{"file":"test/run.js","type":"ADDED","insertions":24,"deletions":0},{"file":"test/server.js","type":"ADDED","insertions":65,"deletions":0},{"file":"test/simple.test.js","type":"MODIFIED","insertions":306,"deletions":-46},{"file":"tools/jsl.node.conf","type":"DELETED","insertions":0,"deletions":-138},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":14,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":105,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"ADDED","insertions":87,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"ADDED","insertions":345,"deletions":0}],"sizeInsertions":1755,"sizeDeletions":-553},{"number":"10","revision":"35a6c213c371f6add452c2f581643b32874f5eb9","parents":["4c460bbe5b857019bc419d27f268bb1cd557dfac"],"ref":"refs/changes/23/2023/10","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1562015094,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1562015105,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562015069,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1562015069,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1562014839,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":25,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":4,"deletions":0},{"file":".npmignore","type":"MODIFIED","insertions":6,"deletions":0},{"file":"CONTRIBUTING.md","type":"ADDED","insertions":16,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":29,"deletions":-61},{"file":"README.md","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/client.js","type":"MODIFIED","insertions":272,"deletions":-185},{"file":"lib/common.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/index.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/server.js","type":"MODIFIED","insertions":199,"deletions":-104},{"file":"package.json","type":"MODIFIED","insertions":12,"deletions":-10},{"file":"test/reconnect.test.js","type":"ADDED","insertions":232,"deletions":0},{"file":"test/run.js","type":"ADDED","insertions":24,"deletions":0},{"file":"test/server.js","type":"ADDED","insertions":65,"deletions":0},{"file":"test/simple.test.js","type":"MODIFIED","insertions":306,"deletions":-46},{"file":"tools/jsl.node.conf","type":"DELETED","insertions":0,"deletions":-138},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":14,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":105,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"ADDED","insertions":87,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"ADDED","insertions":345,"deletions":0}],"sizeInsertions":1755,"sizeDeletions":-553}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}]}