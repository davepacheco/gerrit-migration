{"project":"joyent/node-mname","branch":"master","id":"I5bd1f5d228a84ee0b814ed0f40821ddb35996c52","number":"1468","subject":"joyent/node-mname#16 broken on node 0.10 due to use of Map Reviewed by: Trent Mick \u003ctrent.mick@joyent.com\u003e","owner":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"url":"https://cr.joyent.us/1468","commitMessage":"joyent/node-mname#16 broken on node 0.10 due to use of Map\nReviewed by: Trent Mick \u003ctrent.mick@joyent.com\u003e\n","createdOn":1486507655,"lastUpdated":1486509236,"open":false,"status":"MERGED","comments":[{"timestamp":1486507655,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 1."},{"timestamp":1486507685,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1486508547,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1486508721,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 2."},{"timestamp":1486508746,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1486508762,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1486509062,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1486509236,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Alex Wilson"}],"currentPatchSet":{"number":"2","revision":"5bd1f5d228a84ee0b814ed0f40821ddb35996c52","parents":["195656fccf88b8732d6c643d88afafb8768d3fc3"],"ref":"refs/changes/68/1468/2","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1486508721,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1486508746,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1486509062,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1486509062,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1486509236,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/dns-buffer.js","type":"MODIFIED","insertions":16,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":18,"sizeDeletions":-2},"patchSets":[{"number":"1","revision":"4c581e8bdbdc4b7ba6647815d446e8f41f01a9c0","parents":["195656fccf88b8732d6c643d88afafb8768d3fc3"],"ref":"refs/changes/68/1468/1","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1486507655,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1486507685,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/dns-buffer.js","line":321,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I don\u0027t know if a practical concern, but this will result in a Map for this `.get(\u0027toString\u0027)` works. Ditto for other Object.prototype properties.\n\n```\n\u003e m \u003d new Map()\n{ _obj: {} }\n\u003e m.get(\u0027toString\u0027)\n[Function: toString]\n```\n\nThis could be avoided by using:\n\n```\nthis._obj \u003d Object.create(null);\n```\n\nResulting in:\n\n```\n\u003e m \u003d new Map()\n{ _obj: {} }\n\u003e m.get(\u0027toString\u0027)\nundefined\n\u003e m.set(\u0027foo\u0027, 42)\nundefined\n\u003e m.get(\u0027foo\u0027)\n42\n```"},{"file":"lib/dns-buffer.js","line":321,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Well, better safe than sorry I guess. I\u0027ll do that."},{"file":"package.json","line":19,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Perhaps change that to \"\u003e\u003d0.10\"?"},{"file":"package.json","line":19,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Hah. Yes, I very much doubt 0.6 works any more."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/dns-buffer.js","type":"MODIFIED","insertions":16,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":17,"sizeDeletions":-1},{"number":"2","revision":"5bd1f5d228a84ee0b814ed0f40821ddb35996c52","parents":["195656fccf88b8732d6c643d88afafb8768d3fc3"],"ref":"refs/changes/68/1468/2","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1486508721,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"SUBM","value":"1","grantedOn":1486509236,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1486508746,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1486509062,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1486509062,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/dns-buffer.js","type":"MODIFIED","insertions":16,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":18,"sizeDeletions":-2}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}]}