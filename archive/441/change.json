{"project":"joyent/manta-marlin","branch":"master","id":"I8c0e30e4e8ca53822bda6b7e24c87ca9a9bdfd4a","number":"441","subject":"MANTA-2804 lackey crash: CatStreams ended after previously aborted MANTA-2983 marlin tst.adnscache.js fails MANTA-2984 marlin should use semver for node-manta dependency","owner":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"url":"https://cr.joyent.us/441","commitMessage":"MANTA-2804 lackey crash: CatStreams ended after previously aborted\nMANTA-2983 marlin tst.adnscache.js fails\nMANTA-2984 marlin should use semver for node-manta dependency\n","createdOn":1473440749,"lastUpdated":1473459154,"open":false,"status":"MERGED","comments":[{"timestamp":1473440749,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 1."},{"timestamp":1473440810,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1473441027,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\nA few notes for reviewers and integration-approvers:\n\n- The lackey ticket is by far the most subtle here.  At the very least, I believe this change is very low risk because all it can do is cause the lackey to stop processing something that was already running.  If the condition isn\u0027t quite right for some reason, we\u0027ll crash in the same way we did before.  But I believe it\u0027s correct because the only thing we stop processing is the input for the process -- which by definition has already exited.\n- The package.json change should have no immediate impact because 3.0.0 is the latest published node-manta package."},{"timestamp":1473441187,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\nAlso of note: I tested this by running the marlin test suite.  Although the lackey issue is a race and used to be fairly uncommon, I hit it several times while trying to test another change yesterday.  After fixing it, the tests completed successfully."},{"timestamp":1473458784,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1473459081,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1: Integration-Approval+1"},{"timestamp":1473459154,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by David Pacheco"}],"currentPatchSet":{"number":"1","revision":"8c0e30e4e8ca53822bda6b7e24c87ca9a9bdfd4a","parents":["2958b577913e82493204c56a90ba67d67379b9c9"],"ref":"refs/changes/41/441/1","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1473440749,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1473440810,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1473458784,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1473459081,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1473459154,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"agent/lib/agent/lackey.js","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"dev/package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"dev/test/util/tst.adnscache.js","type":"MODIFIED","insertions":10,"deletions":-10}],"sizeInsertions":18,"sizeDeletions":-13},"patchSets":[{"number":"1","revision":"8c0e30e4e8ca53822bda6b7e24c87ca9a9bdfd4a","parents":["2958b577913e82493204c56a90ba67d67379b9c9"],"ref":"refs/changes/41/441/1","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1473440749,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"SUBM","value":"1","grantedOn":1473459154,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1473458784,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1473459081,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1473440810,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"agent/lib/agent/lackey.js","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"dev/package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"dev/test/util/tst.adnscache.js","type":"MODIFIED","insertions":10,"deletions":-10}],"sizeInsertions":18,"sizeDeletions":-13}],"allReviewers":[{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Joyent Automation","username":"joyent-automation"}]}