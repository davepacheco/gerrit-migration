{"project":"joyent/node-sdc-clients","branch":"master","id":"I6bbc4a91e5d528e02eea83bba7f419109cc1c13d","number":"1184","subject":"joyent/node-sdc-clients#10 Want support for sync parameter for vmapi.getVm Reviewed by: Trent Mick \u003ctrent.mick@joyent.com\u003e Approved by: Trent Mick \u003ctrent.mick@joyent.com\u003e","owner":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"url":"https://cr.joyent.us/1184","commitMessage":"joyent/node-sdc-clients#10 Want support for sync parameter for vmapi.getVm\nReviewed by: Trent Mick \u003ctrent.mick@joyent.com\u003e\nApproved by: Trent Mick \u003ctrent.mick@joyent.com\u003e\n","createdOn":1482856640,"lastUpdated":1485301341,"open":false,"status":"MERGED","comments":[{"timestamp":1482856640,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"Uploaded patch set 1."},{"timestamp":1482856671,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1483638564,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\n(3 comments)\n\nAdd a section to CHANGES.md something like:\n\n```\n## 10.1.0\n\n- joyent/node-sdc-clients#10 Add `params.sync` to VMAPI.getVm.\n```\n\nAlso bump the version to 10.1.0 in package.json."},{"timestamp":1484945953,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"Uploaded patch set 2."},{"timestamp":1484945988,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1484946298,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"Uploaded patch set 3."},{"timestamp":1484946339,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1485300202,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1485301017,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"Uploaded patch set 4."},{"timestamp":1485301043,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1485301264,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1"},{"timestamp":1485301336,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 5: Commit message was updated."},{"timestamp":1485301341,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Trent Mick"}],"currentPatchSet":{"number":"5","revision":"29e230bc67e424a5061b82065ef8191d21051d34","parents":["eea6ce8a50fd0c802ce649731c9e8c0d4f869e96"],"ref":"refs/changes/84/1184/5","uploader":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"createdOn":1485301336,"author":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1485301043,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1485301264,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1485301264,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1485301341,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/vmapi.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vmapi.test.js","type":"MODIFIED","insertions":13,"deletions":-1}],"sizeInsertions":23,"sizeDeletions":-2},"patchSets":[{"number":"1","revision":"09e8d0275efea92f2f4c5d5ed657b3d45c62bde7","parents":["eea6ce8a50fd0c802ce649731c9e8c0d4f869e96"],"ref":"refs/changes/84/1184/1","uploader":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"createdOn":1482856640,"author":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482856671,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"/COMMIT_MSG","line":7,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"nit: \"getVm\""},{"file":"lib/vmapi.js","line":319,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Add a @param line for \u0027params.sync\u0027. Note that a lot of the existing code isn\u0027t consistent here so it is a pain to follow a current pattern. :)"},{"file":"lib/vmapi.js","line":334,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"add an assert here:\n\nassert.optionalBool(params.sync, \u0027params.sync\u0027);\n\nThen perhaps a blank line to separate the asserts from the building of the query object."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/vmapi.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/vmapi.test.js","type":"MODIFIED","insertions":13,"deletions":-1}],"sizeInsertions":15,"sizeDeletions":-1},{"number":"2","revision":"d286aa584844b1ca30229211dddc4a52018c3699","parents":["eea6ce8a50fd0c802ce649731c9e8c0d4f869e96"],"ref":"refs/changes/84/1184/2","uploader":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"createdOn":1484945953,"author":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1484945988,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/vmapi.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"node_modules_zip","type":"ADDED","insertions":0,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vmapi.test.js","type":"MODIFIED","insertions":13,"deletions":-1}],"sizeInsertions":23,"sizeDeletions":-2},{"number":"3","revision":"6d08b2ed03b421e0597a5465f9708f0cccd2eb5d","parents":["eea6ce8a50fd0c802ce649731c9e8c0d4f869e96"],"ref":"refs/changes/84/1184/3","uploader":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"createdOn":1484946298,"author":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1484946339,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/vmapi.test.js","line":378,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"This fails the test suite:\n\n```\n[15:19:36 trentm@danger0:~/joy/node-sdc-clients (master)]\n$ ./test/runtests -H root@10.99.99.7 -f ./test/vmapi.test.js\n\n# Datacenter config:\n#     AMON_IP is 10.99.99.25\n#     CNAPI_IP is 10.99.99.22\n#     CA_IP is 10.99.99.30\n#     NAPI_IP is 10.99.99.10\n#     VMAPI_IP is 10.99.99.27\n#     DSAPI_URL is https://datasets.joyent.com\n#     UFDS_ADMIN_UUID is 930896af-bf8c-48d4-885c-6573a94b1853\n#     PAPI_IP is 10.99.99.29\n#     CNS_IP is 10.99.99.40\n#     MORAY_IP is 10.99.99.17\n\n# Running filtered set of test files: ./test/vmapi.test.js\nTAP version 13\n# vmapi\n#  setup\n#  list vms\nok 1 undefined\nok 2 should be truthy\n#  list vms by owner\nok 3 CUSTOMER is set\nok 4 undefined\nok 5 should be truthy\n#  count vms\nok 6 null\nok 7 should be truthy\n#  get vm\nok 8 null\nok 9 should be truthy\n#  sync vm\n\n/Users/trentm/joy/node-sdc-clients/node_modules/assert-plus/assert.js:45\n                        throw new assert.AssertionError({\n                        ^\nAssertionError: params.sync (boolean) is required\n    at VMAPI.getVm (/Users/trentm/joy/node-sdc-clients/lib/vmapi.js:332:12)\n    at Test.\u003canonymous\u003e (/Users/trentm/joy/node-sdc-clients/test/vmapi.test.js:380:15)\n```\n\nYou\u0027ll be good if that is changed to the boolean `true` instead of the string `\u0027true\u0027`."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/vmapi.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vmapi.test.js","type":"MODIFIED","insertions":13,"deletions":-1}],"sizeInsertions":23,"sizeDeletions":-2},{"number":"4","revision":"6bbc4a91e5d528e02eea83bba7f419109cc1c13d","parents":["eea6ce8a50fd0c802ce649731c9e8c0d4f869e96"],"ref":"refs/changes/84/1184/4","uploader":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"createdOn":1485301017,"author":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1485301043,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1485301264,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1485301264,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/vmapi.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vmapi.test.js","type":"MODIFIED","insertions":13,"deletions":-1}],"sizeInsertions":23,"sizeDeletions":-2},{"number":"5","revision":"29e230bc67e424a5061b82065ef8191d21051d34","parents":["eea6ce8a50fd0c802ce649731c9e8c0d4f869e96"],"ref":"refs/changes/84/1184/5","uploader":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"createdOn":1485301336,"author":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1485301043,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1485301264,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1485301264,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1485301341,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/vmapi.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vmapi.test.js","type":"MODIFIED","insertions":13,"deletions":-1}],"sizeInsertions":23,"sizeDeletions":-2}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}]}