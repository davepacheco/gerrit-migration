{"project":"joyent/illumos-joyent","branch":"master","id":"Iabec4d311852be6c35adee4906374de257d8fb64","number":"482","subject":"OS-3927 lxbrand in-kernel unlink(2) and unlinkat(2) OS-3928 lxbrand in-kernel symlink(2) and symlinkat(2) OS-3988 lxbrand in-kernel readlinkat(2) and readlink(2) Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Approved by: Patrick Mooney \u003cpatrick.","owner":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"url":"https://cr.joyent.us/482","commitMessage":"OS-3927 lxbrand in-kernel unlink(2) and unlinkat(2)\nOS-3928 lxbrand in-kernel symlink(2) and symlinkat(2)\nOS-3988 lxbrand in-kernel readlinkat(2) and readlink(2)\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nApproved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n","createdOn":1474029886,"lastUpdated":1474055430,"open":false,"status":"MERGED","comments":[{"timestamp":1474029886,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 1."},{"timestamp":1474036050,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(6 comments)"},{"timestamp":1474040037,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 2."},{"timestamp":1474040092,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\nI tested the /dev/log change for unlink and it does seem to work without the check, so I removed that. I also updated all of the other items."},{"timestamp":1474054228,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1474055415,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1474055430,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jerry Jelinek"}],"currentPatchSet":{"number":"3","revision":"abec4d311852be6c35adee4906374de257d8fb64","parents":["41c298045a69fcedc164e2e8ea9a2a372e9fa40e"],"ref":"refs/changes/82/482/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1474055415,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1474054228,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1474054228,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1474055430,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_brand/common/file.c","type":"MODIFIED","insertions":0,"deletions":-167},{"file":"usr/src/lib/brand/lx/lx_brand/common/lx_brand.c","type":"MODIFIED","insertions":12,"deletions":-12},{"file":"usr/src/lib/brand/lx/lx_brand/common/misc.c","type":"MODIFIED","insertions":0,"deletions":-9},{"file":"usr/src/lib/brand/lx/lx_brand/sys/lx_syscall.h","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"usr/src/uts/common/brand/lx/os/lx_syscall.c","type":"MODIFIED","insertions":12,"deletions":-12},{"file":"usr/src/uts/common/brand/lx/sys/lx_misc.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/sys/lx_syscalls.h","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_access.c","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"usr/src/uts/common/brand/lx/syscall/lx_link.c","type":"MODIFIED","insertions":97,"deletions":0}],"sizeInsertions":135,"sizeDeletions":-213},"patchSets":[{"number":"1","revision":"28aa629fe20d1060cf6e6040a5dd689eff1b38a3","parents":["41c298045a69fcedc164e2e8ea9a2a372e9fa40e"],"ref":"refs/changes/82/482/1","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1474029886,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/brand/lx/syscall/lx_link.c","line":109,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"s/solaris/SunOS/"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_link.c","line":115,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"This doesn\u0027t appear to be true at the moment.  Is it needed?"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_link.c","line":145,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Is the enforce parameter needed?"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_link.c","line":177,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Should we perform this check only when the unlink fails?"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_link.c","line":186,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I think this became unnecessary when lx_devfs landed, fixing the /dev/log behavior."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_link.c","line":213,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Like above, remove the /dev/log check and perhaps wait on the lx_isdir check until a failure is encountered."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_brand/common/file.c","type":"MODIFIED","insertions":0,"deletions":-167},{"file":"usr/src/lib/brand/lx/lx_brand/common/lx_brand.c","type":"MODIFIED","insertions":12,"deletions":-12},{"file":"usr/src/lib/brand/lx/lx_brand/common/misc.c","type":"MODIFIED","insertions":0,"deletions":-9},{"file":"usr/src/lib/brand/lx/lx_brand/sys/lx_syscall.h","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"usr/src/uts/common/brand/lx/os/lx_syscall.c","type":"MODIFIED","insertions":12,"deletions":-12},{"file":"usr/src/uts/common/brand/lx/sys/lx_syscalls.h","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_link.c","type":"MODIFIED","insertions":156,"deletions":0}],"sizeInsertions":187,"sizeDeletions":-207},{"number":"2","revision":"bd7ab662ef74075430098fe2b5ad8c7f8ad0a874","parents":["41c298045a69fcedc164e2e8ea9a2a372e9fa40e"],"ref":"refs/changes/82/482/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1474040037,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1474054228,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1474054228,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_brand/common/file.c","type":"MODIFIED","insertions":0,"deletions":-167},{"file":"usr/src/lib/brand/lx/lx_brand/common/lx_brand.c","type":"MODIFIED","insertions":12,"deletions":-12},{"file":"usr/src/lib/brand/lx/lx_brand/common/misc.c","type":"MODIFIED","insertions":0,"deletions":-9},{"file":"usr/src/lib/brand/lx/lx_brand/sys/lx_syscall.h","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"usr/src/uts/common/brand/lx/os/lx_syscall.c","type":"MODIFIED","insertions":12,"deletions":-12},{"file":"usr/src/uts/common/brand/lx/sys/lx_misc.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/sys/lx_syscalls.h","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_access.c","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"usr/src/uts/common/brand/lx/syscall/lx_link.c","type":"MODIFIED","insertions":97,"deletions":0}],"sizeInsertions":135,"sizeDeletions":-213},{"number":"3","revision":"abec4d311852be6c35adee4906374de257d8fb64","parents":["41c298045a69fcedc164e2e8ea9a2a372e9fa40e"],"ref":"refs/changes/82/482/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1474055415,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1474055430,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1474054228,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1474054228,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_brand/common/file.c","type":"MODIFIED","insertions":0,"deletions":-167},{"file":"usr/src/lib/brand/lx/lx_brand/common/lx_brand.c","type":"MODIFIED","insertions":12,"deletions":-12},{"file":"usr/src/lib/brand/lx/lx_brand/common/misc.c","type":"MODIFIED","insertions":0,"deletions":-9},{"file":"usr/src/lib/brand/lx/lx_brand/sys/lx_syscall.h","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"usr/src/uts/common/brand/lx/os/lx_syscall.c","type":"MODIFIED","insertions":12,"deletions":-12},{"file":"usr/src/uts/common/brand/lx/sys/lx_misc.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/sys/lx_syscalls.h","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_access.c","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"usr/src/uts/common/brand/lx/syscall/lx_link.c","type":"MODIFIED","insertions":97,"deletions":0}],"sizeInsertions":135,"sizeDeletions":-213}],"allReviewers":[{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}]}