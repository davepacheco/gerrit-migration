{"project":"joyent/smartos-live","branch":"master","id":"I99b8e5fdea990e26bb86ba62281e4e568d600d86","number":"878","subject":"OS-5770 enhance disklayout for no cache, number of spares and raidz3 Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Reviewed by: Joshua Clulow \u003cjmc@joyent.com\u003e Reviewed by: Pedro Palazon Candel \u003cpedro@joyent.com\u003e Approved by: Robert Mustacchi \u003crm@joyent.co","owner":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"url":"https://cr.joyent.us/878","commitMessage":"OS-5770 enhance disklayout for no cache, number of spares and raidz3\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nReviewed by: Joshua Clulow \u003cjmc@joyent.com\u003e\nReviewed by: Pedro Palazon Candel \u003cpedro@joyent.com\u003e\nApproved by: Robert Mustacchi \u003crm@joyent.com\u003e\n","createdOn":1478820914,"lastUpdated":1479495474,"open":false,"status":"MERGED","comments":[{"timestamp":1478820914,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 1."},{"timestamp":1478820967,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n\"make check\" exited with status 2\n\n /tmp/repo/src/vm/node_modules/vmload/vmload-xml.js\n /tmp/repo/src/vm/node_modules/vmload/vmload-zoneadm.js\n /tmp/repo/src/vm/node_modules/vmload/vmload-zoneinfo.js\n /tmp/repo/src/vm/node_modules/sysevent-stream.js\n /tmp/repo/src/img/lib/IMG.js\n /tmp/repo/src/img/lib/cli.js\n /tmp/repo/src/img/lib/common.js\n /tmp/repo/src/img/lib/configuration.js\n /tmp/repo/src/img/lib/database.js\n /tmp/repo/src/img/lib/errors.js\n /tmp/repo/src/img/lib/imgadm.js\n /tmp/repo/src/img/lib/magic.js\n /tmp/repo/src/img/lib/upgrade.js\n /tmp/repo/src/img/sbin/imgadm\n /tmp/repo/src/vm/common/nictag.js\n /tmp/repo/src/vm/tests/test-alias.js\n /tmp/repo/src/vm/node_modules/nodeunit-plus/index.js\n /tmp/repo/src/vm/tests/test-cleanup-on-failure.js\n /tmp/repo/src/vm/tests/test-create.js\n /tmp/repo/src/vm/tests/test-create-filesystems.js\n /tmp/repo/src/vm/tests/test-docker.js\n /tmp/repo/src/vm/tests/test-defaults.js\n /tmp/repo/src/vm/tests/test-indestructible.js\n /tmp/repo/src/vm/tests/test-internal_metadata_namespaces.js\n /tmp/repo/src/vm/tests/test-lastexited.js\n /tmp/repo/src/vm/tests/test-openonerrlogger.js\n /tmp/repo/src/vm/tests/test-reboot.js\n /tmp/repo/src/vm/tests/test-reprovision.js\n /tmp/repo/src/vm/tests/test-snapshots.js\n /tmp/repo/src/vm/tests/test-spoof-opts.js\n /tmp/repo/src/vm/tests/test-tmpfs.js\n /tmp/repo/src/vm/tests/test-update.js\n /tmp/repo/src/vm/tests/test-vrrp-nics.js\n /tmp/repo/src/vm/lib/metadata/agent.js\n /tmp/repo/src/vm/lib/metadata/common.js\n /tmp/repo/src/vm/lib/metadata/crc32.js\n /tmp/repo/src/vm/lib/metadata/zwatch.js\n /tmp/repo/src/disklayout.js\n /tmp/repo/src/mkzpool.js\n /tmp/repo/src/ntp_config.js\n /tmp/repo/src/node_modules/disklayout.js\n /tmp/repo/src/node_modules/disklayout.js(495): warning: comparisons against null, 0, true, false, or an empty string allowing implicit type conversion (use \u003d\u003d\u003d or !\u003d\u003d)\n \n 0 error(s), 1 warnings(s)\n Makefile:543: recipe for target \u0027check\u0027 failed\n make[1]: *** [check] Error 1\n make[1]: Leaving directory \u0027/tmp/repo/src\u0027\n Makefile:357: recipe for target \u0027check\u0027 failed\n gmake: *** [check] Error 2"},{"timestamp":1478820978,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\nThere is probably no need to review the test input/output files unless you\u0027re feeling particularly ambitious."},{"timestamp":1478822599,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\nI\u0027ve fixed the \"Joyent Automation\" failure but I will hold off on updating until I receive the first round of feedback."},{"timestamp":1478828566,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1: Code-Review+1\n\nGenerally looks good, but I might also have Clulow look at this."},{"timestamp":1478870355,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1: Code-Review+1\n\n(1 comment)\n\nDespite a little comment regarding an not needed function param (which will not cause any damage), looks good to me and my limited understanding of disklayout"},{"timestamp":1478872303,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1478872420,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 2."},{"timestamp":1478872471,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1478876676,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1478881511,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2: Code-Review+1\n\nJavascriptLint FTW!"},{"timestamp":1479137730,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 3."},{"timestamp":1479137780,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1479137783,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3:\n\nWhile testing the script changes I found that disklayout never exited properly with an error in some cases so please take another quick look at this."},{"timestamp":1479138751,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3: Code-Review+1\n\nDefinitely handy to let the user know when an error happens!"},{"timestamp":1479140143,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3: Code-Review+1\n\nGood catch Jerry."},{"timestamp":1479363377,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 3:\n\n(11 comments)\n\nOverall the refactoring looks good!  I have a few comments, most of which are on the order of nits."},{"timestamp":1479395538,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 4."},{"timestamp":1479395581,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1479395665,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 4:\n\nJosh, thanks for all of your input. I have made all of your suggested changes. The test case changes in the latest patch are not due to any of these changes. They are because I made a mistake on an earlier patchset when I fixed the error return output and forgot to upload the corrected test case output files."},{"timestamp":1479491642,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1479494629,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 4:\n\n(2 comments)\n\nThere was no reason. I fixed that and I also fixed the constants on the raidz3 code which I noticed I had overlooked."},{"timestamp":1479494652,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 5."},{"timestamp":1479494699,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1479494938,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 5: Code-Review+1\n\nLooks good to me!  Thanks for the changes."},{"timestamp":1479495223,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1"},{"timestamp":1479495457,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1479495474,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jerry Jelinek"}],"currentPatchSet":{"number":"6","revision":"99b8e5fdea990e26bb86ba62281e4e568d600d86","parents":["1b9c16b8ad657375b26483fd09fb8f45db2d30b3"],"ref":"refs/changes/78/878/6","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1479495457,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1479494699,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1479494938,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1479495223,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1479495223,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1479495474,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"man/src/disklayout.1m.md","type":"MODIFIED","insertions":18,"deletions":-10},{"file":"src/disklayout.js","type":"MODIFIED","insertions":26,"deletions":-7},{"file":"src/node_modules/disklayout.js","type":"MODIFIED","insertions":291,"deletions":-109},{"file":"src/test/disklayout/1.di.0s.out","type":"ADDED","insertions":12,"deletions":0},{"file":"src/test/disklayout/1.di.1s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/1s.di.0s.out","type":"ADDED","insertions":21,"deletions":0},{"file":"src/test/disklayout/1s.di.1s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/2.di.0s.out","type":"ADDED","insertions":24,"deletions":0},{"file":"src/test/disklayout/2.di.1s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/2s.di.0s.out","type":"ADDED","insertions":33,"deletions":0},{"file":"src/test/disklayout/2s.di.1s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/3.di.0s.out","type":"ADDED","insertions":31,"deletions":0},{"file":"src/test/disklayout/3.di.1s.out","type":"ADDED","insertions":33,"deletions":0},{"file":"src/test/disklayout/3s.di.0s.out","type":"ADDED","insertions":40,"deletions":0},{"file":"src/test/disklayout/3s.di.1s.out","type":"ADDED","insertions":42,"deletions":0},{"file":"src/test/disklayout/4.di.0s.out","type":"ADDED","insertions":38,"deletions":0},{"file":"src/test/disklayout/4.di.1s.out","type":"ADDED","insertions":40,"deletions":0},{"file":"src/test/disklayout/43s.di.0s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/43s.di.1s.out","type":"ADDED","insertions":347,"deletions":0},{"file":"src/test/disklayout/4s.di.0s.out","type":"ADDED","insertions":47,"deletions":0},{"file":"src/test/disklayout/4s.di.1s.out","type":"ADDED","insertions":49,"deletions":0},{"file":"src/test/disklayout/5.di.0s.out","type":"ADDED","insertions":45,"deletions":0},{"file":"src/test/disklayout/5.di.1s.out","type":"ADDED","insertions":47,"deletions":0},{"file":"src/test/disklayout/5s.di.0s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/5s.di.1s.out","type":"ADDED","insertions":56,"deletions":0},{"file":"src/test/disklayout/6.di.0s.out","type":"ADDED","insertions":57,"deletions":0},{"file":"src/test/disklayout/6.di.1s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/6s.di.0s.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/6s.di.1s.out","type":"ADDED","insertions":63,"deletions":0},{"file":"src/test/disklayout/7.di.0s.out","type":"ADDED","insertions":59,"deletions":0},{"file":"src/test/disklayout/7.di.1s.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/7s.di.0s.out","type":"ADDED","insertions":68,"deletions":0},{"file":"src/test/disklayout/7s.di.1s.out","type":"ADDED","insertions":75,"deletions":0},{"file":"src/test/disklayout/8.di","type":"ADDED","insertions":9,"deletions":0},{"file":"src/test/disklayout/8.di.0s.out","type":"ADDED","insertions":81,"deletions":0},{"file":"src/test/disklayout/8.di.1s.out","type":"ADDED","insertions":68,"deletions":0},{"file":"src/test/disklayout/8.di.out","type":"ADDED","insertions":78,"deletions":0},{"file":"src/test/disklayout/README","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"src/test/disklayout/insane.di.0s.out","type":"ADDED","insertions":138,"deletions":0},{"file":"src/test/disklayout/insane.di.1s.out","type":"ADDED","insertions":135,"deletions":0},{"file":"src/test/disklayout/insane.di.c.out","type":"ADDED","insertions":119,"deletions":0},{"file":"src/test/disklayout/insane.di.c0.out","type":"ADDED","insertions":122,"deletions":0},{"file":"src/test/disklayout/insane.di.c1.out","type":"ADDED","insertions":119,"deletions":0},{"file":"src/test/disklayout/ms2.di.0s.out","type":"ADDED","insertions":284,"deletions":0},{"file":"src/test/disklayout/ms2.di.1s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/run","type":"ADDED","insertions":112,"deletions":0},{"file":"src/test/disklayout/s10.di","type":"ADDED","insertions":11,"deletions":0},{"file":"src/test/disklayout/s10.di.0s.out","type":"ADDED","insertions":80,"deletions":0},{"file":"src/test/disklayout/s10.di.1s.out","type":"ADDED","insertions":82,"deletions":0},{"file":"src/test/disklayout/s10.di.out","type":"ADDED","insertions":80,"deletions":0},{"file":"src/test/disklayout/s11.di","type":"ADDED","insertions":12,"deletions":0},{"file":"src/test/disklayout/s11.di.0s.out","type":"ADDED","insertions":87,"deletions":0},{"file":"src/test/disklayout/s11.di.1s.out","type":"ADDED","insertions":89,"deletions":0},{"file":"src/test/disklayout/s11.di.out","type":"ADDED","insertions":87,"deletions":0},{"file":"src/test/disklayout/s12.di","type":"ADDED","insertions":13,"deletions":0},{"file":"src/test/disklayout/s12.di.0s.out","type":"ADDED","insertions":94,"deletions":0},{"file":"src/test/disklayout/s12.di.1s.out","type":"ADDED","insertions":96,"deletions":0},{"file":"src/test/disklayout/s12.di.out","type":"ADDED","insertions":96,"deletions":0},{"file":"src/test/disklayout/s16.di","type":"ADDED","insertions":17,"deletions":0},{"file":"src/test/disklayout/s16.di.0s.out","type":"ADDED","insertions":127,"deletions":0},{"file":"src/test/disklayout/s16.di.1s.out","type":"ADDED","insertions":144,"deletions":0},{"file":"src/test/disklayout/s16.di.m.out","type":"ADDED","insertions":154,"deletions":0},{"file":"src/test/disklayout/s16.di.m0.out","type":"ADDED","insertions":157,"deletions":0},{"file":"src/test/disklayout/s16.di.out","type":"ADDED","insertions":129,"deletions":0},{"file":"src/test/disklayout/s16.di.z1-0.out","type":"ADDED","insertions":137,"deletions":0},{"file":"src/test/disklayout/s16.di.z1.out","type":"ADDED","insertions":139,"deletions":0},{"file":"src/test/disklayout/s16.di.z2-0.out","type":"ADDED","insertions":127,"deletions":0},{"file":"src/test/disklayout/s16.di.z2.out","type":"ADDED","insertions":129,"deletions":0},{"file":"src/test/disklayout/s16.di.z3-0.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/s16.di.z3.out","type":"ADDED","insertions":124,"deletions":0},{"file":"src/test/disklayout/s17.di","type":"ADDED","insertions":17,"deletions":0},{"file":"src/test/disklayout/s17.di.0s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/s17.di.1s.out","type":"ADDED","insertions":136,"deletions":0},{"file":"src/test/disklayout/s17.di.out","type":"ADDED","insertions":136,"deletions":0},{"file":"src/test/disklayout/s6.di.0s.out","type":"ADDED","insertions":57,"deletions":0},{"file":"src/test/disklayout/s6.di.1s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/s8.di","type":"ADDED","insertions":9,"deletions":0},{"file":"src/test/disklayout/s8.di.0s.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s8.di.1s.out","type":"ADDED","insertions":68,"deletions":0},{"file":"src/test/disklayout/s8.di.m.out","type":"ADDED","insertions":78,"deletions":0},{"file":"src/test/disklayout/s8.di.m0.out","type":"ADDED","insertions":81,"deletions":0},{"file":"src/test/disklayout/s8.di.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s8.di.z1.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/s8.di.z2.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s8.di.z3.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s9.di","type":"ADDED","insertions":10,"deletions":0},{"file":"src/test/disklayout/s9.di.0s.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/s9.di.1s.out","type":"ADDED","insertions":75,"deletions":0},{"file":"src/test/disklayout/s9.di.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/tl-a.di.0s.out","type":"ADDED","insertions":144,"deletions":0},{"file":"src/test/disklayout/tl-a.di.1s.out","type":"ADDED","insertions":156,"deletions":0},{"file":"src/test/disklayout/tl-ars.di.0s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/tl-ars.di.1s.out","type":"ADDED","insertions":56,"deletions":0},{"file":"src/test/disklayout/tl-b.di.0s.out","type":"ADDED","insertions":103,"deletions":0},{"file":"src/test/disklayout/tl-b.di.1s.out","type":"ADDED","insertions":105,"deletions":0},{"file":"src/test/disklayout/tl-c.di.0s.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/tl-c.di.1s.out","type":"ADDED","insertions":75,"deletions":0},{"file":"src/test/disklayout/tl-c.di.out","type":"MODIFIED","insertions":10,"deletions":-17}],"sizeInsertions":7269,"sizeDeletions":-147},"patchSets":[{"number":"1","revision":"f638f5b940e2f094b9bceb13800324565a51a814","parents":["fb585cefd3648aa199ec2c12fd56440038c1b58c"],"ref":"refs/changes/78/878/1","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1478820914,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1478828566,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1478820967,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1478870355,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"comments":[{"file":"src/node_modules/disklayout.js","line":217,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Any reason to add an argument which will not be used? Even w/o explicit definition of nspares here the function could be called with two arguments w/o any error being thrown"},{"file":"src/node_modules/disklayout.js","line":217,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"The reason this has the nspares argument is that this function is called from the \u0027compute_layout\u0027 function indirectly through the array of layouts (line 631), so all of the layout functions have the same signature."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"man/src/disklayout.1m.md","type":"MODIFIED","insertions":18,"deletions":-10},{"file":"src/disklayout.js","type":"MODIFIED","insertions":23,"deletions":-7},{"file":"src/node_modules/disklayout.js","type":"MODIFIED","insertions":268,"deletions":-107},{"file":"src/test/disklayout/1.di.0s.out","type":"ADDED","insertions":12,"deletions":0},{"file":"src/test/disklayout/1.di.1s.out","type":"ADDED","insertions":24,"deletions":0},{"file":"src/test/disklayout/1s.di.0s.out","type":"ADDED","insertions":21,"deletions":0},{"file":"src/test/disklayout/1s.di.1s.out","type":"ADDED","insertions":34,"deletions":0},{"file":"src/test/disklayout/2.di.0s.out","type":"ADDED","insertions":24,"deletions":0},{"file":"src/test/disklayout/2.di.1s.out","type":"ADDED","insertions":34,"deletions":0},{"file":"src/test/disklayout/2s.di.0s.out","type":"ADDED","insertions":33,"deletions":0},{"file":"src/test/disklayout/2s.di.1s.out","type":"ADDED","insertions":44,"deletions":0},{"file":"src/test/disklayout/3.di.0s.out","type":"ADDED","insertions":31,"deletions":0},{"file":"src/test/disklayout/3.di.1s.out","type":"ADDED","insertions":33,"deletions":0},{"file":"src/test/disklayout/3s.di.0s.out","type":"ADDED","insertions":40,"deletions":0},{"file":"src/test/disklayout/3s.di.1s.out","type":"ADDED","insertions":42,"deletions":0},{"file":"src/test/disklayout/4.di.0s.out","type":"ADDED","insertions":38,"deletions":0},{"file":"src/test/disklayout/4.di.1s.out","type":"ADDED","insertions":40,"deletions":0},{"file":"src/test/disklayout/43s.di.0s.out","type":"ADDED","insertions":454,"deletions":0},{"file":"src/test/disklayout/43s.di.1s.out","type":"ADDED","insertions":347,"deletions":0},{"file":"src/test/disklayout/4s.di.0s.out","type":"ADDED","insertions":47,"deletions":0},{"file":"src/test/disklayout/4s.di.1s.out","type":"ADDED","insertions":49,"deletions":0},{"file":"src/test/disklayout/5.di.0s.out","type":"ADDED","insertions":45,"deletions":0},{"file":"src/test/disklayout/5.di.1s.out","type":"ADDED","insertions":47,"deletions":0},{"file":"src/test/disklayout/5s.di.0s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/5s.di.1s.out","type":"ADDED","insertions":56,"deletions":0},{"file":"src/test/disklayout/6.di.0s.out","type":"ADDED","insertions":57,"deletions":0},{"file":"src/test/disklayout/6.di.1s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/6s.di.0s.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/6s.di.1s.out","type":"ADDED","insertions":63,"deletions":0},{"file":"src/test/disklayout/7.di.0s.out","type":"ADDED","insertions":59,"deletions":0},{"file":"src/test/disklayout/7.di.1s.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/7s.di.0s.out","type":"ADDED","insertions":68,"deletions":0},{"file":"src/test/disklayout/7s.di.1s.out","type":"ADDED","insertions":75,"deletions":0},{"file":"src/test/disklayout/8.di","type":"ADDED","insertions":9,"deletions":0},{"file":"src/test/disklayout/8.di.0s.out","type":"ADDED","insertions":81,"deletions":0},{"file":"src/test/disklayout/8.di.1s.out","type":"ADDED","insertions":68,"deletions":0},{"file":"src/test/disklayout/8.di.out","type":"ADDED","insertions":78,"deletions":0},{"file":"src/test/disklayout/README","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"src/test/disklayout/insane.di.0s.out","type":"ADDED","insertions":138,"deletions":0},{"file":"src/test/disklayout/insane.di.1s.out","type":"ADDED","insertions":135,"deletions":0},{"file":"src/test/disklayout/insane.di.c.out","type":"ADDED","insertions":119,"deletions":0},{"file":"src/test/disklayout/insane.di.c0.out","type":"ADDED","insertions":122,"deletions":0},{"file":"src/test/disklayout/insane.di.c1.out","type":"ADDED","insertions":119,"deletions":0},{"file":"src/test/disklayout/ms2.di.0s.out","type":"ADDED","insertions":284,"deletions":0},{"file":"src/test/disklayout/ms2.di.1s.out","type":"ADDED","insertions":12,"deletions":0},{"file":"src/test/disklayout/run","type":"ADDED","insertions":112,"deletions":0},{"file":"src/test/disklayout/s10.di","type":"ADDED","insertions":11,"deletions":0},{"file":"src/test/disklayout/s10.di.0s.out","type":"ADDED","insertions":80,"deletions":0},{"file":"src/test/disklayout/s10.di.1s.out","type":"ADDED","insertions":82,"deletions":0},{"file":"src/test/disklayout/s10.di.out","type":"ADDED","insertions":80,"deletions":0},{"file":"src/test/disklayout/s11.di","type":"ADDED","insertions":12,"deletions":0},{"file":"src/test/disklayout/s11.di.0s.out","type":"ADDED","insertions":87,"deletions":0},{"file":"src/test/disklayout/s11.di.1s.out","type":"ADDED","insertions":89,"deletions":0},{"file":"src/test/disklayout/s11.di.out","type":"ADDED","insertions":87,"deletions":0},{"file":"src/test/disklayout/s12.di","type":"ADDED","insertions":13,"deletions":0},{"file":"src/test/disklayout/s12.di.0s.out","type":"ADDED","insertions":94,"deletions":0},{"file":"src/test/disklayout/s12.di.1s.out","type":"ADDED","insertions":96,"deletions":0},{"file":"src/test/disklayout/s12.di.out","type":"ADDED","insertions":96,"deletions":0},{"file":"src/test/disklayout/s16.di","type":"ADDED","insertions":17,"deletions":0},{"file":"src/test/disklayout/s16.di.0s.out","type":"ADDED","insertions":127,"deletions":0},{"file":"src/test/disklayout/s16.di.1s.out","type":"ADDED","insertions":144,"deletions":0},{"file":"src/test/disklayout/s16.di.m.out","type":"ADDED","insertions":154,"deletions":0},{"file":"src/test/disklayout/s16.di.m0.out","type":"ADDED","insertions":157,"deletions":0},{"file":"src/test/disklayout/s16.di.out","type":"ADDED","insertions":129,"deletions":0},{"file":"src/test/disklayout/s16.di.z1-0.out","type":"ADDED","insertions":137,"deletions":0},{"file":"src/test/disklayout/s16.di.z1.out","type":"ADDED","insertions":139,"deletions":0},{"file":"src/test/disklayout/s16.di.z2-0.out","type":"ADDED","insertions":127,"deletions":0},{"file":"src/test/disklayout/s16.di.z2.out","type":"ADDED","insertions":129,"deletions":0},{"file":"src/test/disklayout/s16.di.z3-0.out","type":"ADDED","insertions":3,"deletions":0},{"file":"src/test/disklayout/s16.di.z3.out","type":"ADDED","insertions":124,"deletions":0},{"file":"src/test/disklayout/s17.di","type":"ADDED","insertions":17,"deletions":0},{"file":"src/test/disklayout/s17.di.0s.out","type":"ADDED","insertions":175,"deletions":0},{"file":"src/test/disklayout/s17.di.1s.out","type":"ADDED","insertions":136,"deletions":0},{"file":"src/test/disklayout/s17.di.out","type":"ADDED","insertions":136,"deletions":0},{"file":"src/test/disklayout/s6.di.0s.out","type":"ADDED","insertions":57,"deletions":0},{"file":"src/test/disklayout/s6.di.1s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/s8.di","type":"ADDED","insertions":9,"deletions":0},{"file":"src/test/disklayout/s8.di.0s.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s8.di.1s.out","type":"ADDED","insertions":68,"deletions":0},{"file":"src/test/disklayout/s8.di.m.out","type":"ADDED","insertions":78,"deletions":0},{"file":"src/test/disklayout/s8.di.m0.out","type":"ADDED","insertions":81,"deletions":0},{"file":"src/test/disklayout/s8.di.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s8.di.z1.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/s8.di.z2.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s8.di.z3.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s9.di","type":"ADDED","insertions":10,"deletions":0},{"file":"src/test/disklayout/s9.di.0s.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/s9.di.1s.out","type":"ADDED","insertions":75,"deletions":0},{"file":"src/test/disklayout/s9.di.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/tl-a.di.0s.out","type":"ADDED","insertions":144,"deletions":0},{"file":"src/test/disklayout/tl-a.di.1s.out","type":"ADDED","insertions":156,"deletions":0},{"file":"src/test/disklayout/tl-ars.di.0s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/tl-ars.di.1s.out","type":"ADDED","insertions":56,"deletions":0},{"file":"src/test/disklayout/tl-b.di.0s.out","type":"ADDED","insertions":103,"deletions":0},{"file":"src/test/disklayout/tl-b.di.1s.out","type":"ADDED","insertions":105,"deletions":0},{"file":"src/test/disklayout/tl-c.di.0s.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/tl-c.di.1s.out","type":"ADDED","insertions":75,"deletions":0},{"file":"src/test/disklayout/tl-c.di.out","type":"MODIFIED","insertions":10,"deletions":-17}],"sizeInsertions":8015,"sizeDeletions":-145},{"number":"2","revision":"29b92af55e4597d12abd61145678287c1df92a21","parents":["2cbbbe4f9874864b6995423749c3aa7852df0c39"],"ref":"refs/changes/78/878/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1478872420,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1478876676,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1478872471,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1478881511,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"man/src/disklayout.1m.md","type":"MODIFIED","insertions":18,"deletions":-10},{"file":"src/disklayout.js","type":"MODIFIED","insertions":23,"deletions":-7},{"file":"src/node_modules/disklayout.js","type":"MODIFIED","insertions":268,"deletions":-107},{"file":"src/test/disklayout/1.di.0s.out","type":"ADDED","insertions":12,"deletions":0},{"file":"src/test/disklayout/1.di.1s.out","type":"ADDED","insertions":24,"deletions":0},{"file":"src/test/disklayout/1s.di.0s.out","type":"ADDED","insertions":21,"deletions":0},{"file":"src/test/disklayout/1s.di.1s.out","type":"ADDED","insertions":34,"deletions":0},{"file":"src/test/disklayout/2.di.0s.out","type":"ADDED","insertions":24,"deletions":0},{"file":"src/test/disklayout/2.di.1s.out","type":"ADDED","insertions":34,"deletions":0},{"file":"src/test/disklayout/2s.di.0s.out","type":"ADDED","insertions":33,"deletions":0},{"file":"src/test/disklayout/2s.di.1s.out","type":"ADDED","insertions":44,"deletions":0},{"file":"src/test/disklayout/3.di.0s.out","type":"ADDED","insertions":31,"deletions":0},{"file":"src/test/disklayout/3.di.1s.out","type":"ADDED","insertions":33,"deletions":0},{"file":"src/test/disklayout/3s.di.0s.out","type":"ADDED","insertions":40,"deletions":0},{"file":"src/test/disklayout/3s.di.1s.out","type":"ADDED","insertions":42,"deletions":0},{"file":"src/test/disklayout/4.di.0s.out","type":"ADDED","insertions":38,"deletions":0},{"file":"src/test/disklayout/4.di.1s.out","type":"ADDED","insertions":40,"deletions":0},{"file":"src/test/disklayout/43s.di.0s.out","type":"ADDED","insertions":454,"deletions":0},{"file":"src/test/disklayout/43s.di.1s.out","type":"ADDED","insertions":347,"deletions":0},{"file":"src/test/disklayout/4s.di.0s.out","type":"ADDED","insertions":47,"deletions":0},{"file":"src/test/disklayout/4s.di.1s.out","type":"ADDED","insertions":49,"deletions":0},{"file":"src/test/disklayout/5.di.0s.out","type":"ADDED","insertions":45,"deletions":0},{"file":"src/test/disklayout/5.di.1s.out","type":"ADDED","insertions":47,"deletions":0},{"file":"src/test/disklayout/5s.di.0s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/5s.di.1s.out","type":"ADDED","insertions":56,"deletions":0},{"file":"src/test/disklayout/6.di.0s.out","type":"ADDED","insertions":57,"deletions":0},{"file":"src/test/disklayout/6.di.1s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/6s.di.0s.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/6s.di.1s.out","type":"ADDED","insertions":63,"deletions":0},{"file":"src/test/disklayout/7.di.0s.out","type":"ADDED","insertions":59,"deletions":0},{"file":"src/test/disklayout/7.di.1s.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/7s.di.0s.out","type":"ADDED","insertions":68,"deletions":0},{"file":"src/test/disklayout/7s.di.1s.out","type":"ADDED","insertions":75,"deletions":0},{"file":"src/test/disklayout/8.di","type":"ADDED","insertions":9,"deletions":0},{"file":"src/test/disklayout/8.di.0s.out","type":"ADDED","insertions":81,"deletions":0},{"file":"src/test/disklayout/8.di.1s.out","type":"ADDED","insertions":68,"deletions":0},{"file":"src/test/disklayout/8.di.out","type":"ADDED","insertions":78,"deletions":0},{"file":"src/test/disklayout/README","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"src/test/disklayout/insane.di.0s.out","type":"ADDED","insertions":138,"deletions":0},{"file":"src/test/disklayout/insane.di.1s.out","type":"ADDED","insertions":135,"deletions":0},{"file":"src/test/disklayout/insane.di.c.out","type":"ADDED","insertions":119,"deletions":0},{"file":"src/test/disklayout/insane.di.c0.out","type":"ADDED","insertions":122,"deletions":0},{"file":"src/test/disklayout/insane.di.c1.out","type":"ADDED","insertions":119,"deletions":0},{"file":"src/test/disklayout/ms2.di.0s.out","type":"ADDED","insertions":284,"deletions":0},{"file":"src/test/disklayout/ms2.di.1s.out","type":"ADDED","insertions":12,"deletions":0},{"file":"src/test/disklayout/run","type":"ADDED","insertions":112,"deletions":0},{"file":"src/test/disklayout/s10.di","type":"ADDED","insertions":11,"deletions":0},{"file":"src/test/disklayout/s10.di.0s.out","type":"ADDED","insertions":80,"deletions":0},{"file":"src/test/disklayout/s10.di.1s.out","type":"ADDED","insertions":82,"deletions":0},{"file":"src/test/disklayout/s10.di.out","type":"ADDED","insertions":80,"deletions":0},{"file":"src/test/disklayout/s11.di","type":"ADDED","insertions":12,"deletions":0},{"file":"src/test/disklayout/s11.di.0s.out","type":"ADDED","insertions":87,"deletions":0},{"file":"src/test/disklayout/s11.di.1s.out","type":"ADDED","insertions":89,"deletions":0},{"file":"src/test/disklayout/s11.di.out","type":"ADDED","insertions":87,"deletions":0},{"file":"src/test/disklayout/s12.di","type":"ADDED","insertions":13,"deletions":0},{"file":"src/test/disklayout/s12.di.0s.out","type":"ADDED","insertions":94,"deletions":0},{"file":"src/test/disklayout/s12.di.1s.out","type":"ADDED","insertions":96,"deletions":0},{"file":"src/test/disklayout/s12.di.out","type":"ADDED","insertions":96,"deletions":0},{"file":"src/test/disklayout/s16.di","type":"ADDED","insertions":17,"deletions":0},{"file":"src/test/disklayout/s16.di.0s.out","type":"ADDED","insertions":127,"deletions":0},{"file":"src/test/disklayout/s16.di.1s.out","type":"ADDED","insertions":144,"deletions":0},{"file":"src/test/disklayout/s16.di.m.out","type":"ADDED","insertions":154,"deletions":0},{"file":"src/test/disklayout/s16.di.m0.out","type":"ADDED","insertions":157,"deletions":0},{"file":"src/test/disklayout/s16.di.out","type":"ADDED","insertions":129,"deletions":0},{"file":"src/test/disklayout/s16.di.z1-0.out","type":"ADDED","insertions":137,"deletions":0},{"file":"src/test/disklayout/s16.di.z1.out","type":"ADDED","insertions":139,"deletions":0},{"file":"src/test/disklayout/s16.di.z2-0.out","type":"ADDED","insertions":127,"deletions":0},{"file":"src/test/disklayout/s16.di.z2.out","type":"ADDED","insertions":129,"deletions":0},{"file":"src/test/disklayout/s16.di.z3-0.out","type":"ADDED","insertions":3,"deletions":0},{"file":"src/test/disklayout/s16.di.z3.out","type":"ADDED","insertions":124,"deletions":0},{"file":"src/test/disklayout/s17.di","type":"ADDED","insertions":17,"deletions":0},{"file":"src/test/disklayout/s17.di.0s.out","type":"ADDED","insertions":175,"deletions":0},{"file":"src/test/disklayout/s17.di.1s.out","type":"ADDED","insertions":136,"deletions":0},{"file":"src/test/disklayout/s17.di.out","type":"ADDED","insertions":136,"deletions":0},{"file":"src/test/disklayout/s6.di.0s.out","type":"ADDED","insertions":57,"deletions":0},{"file":"src/test/disklayout/s6.di.1s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/s8.di","type":"ADDED","insertions":9,"deletions":0},{"file":"src/test/disklayout/s8.di.0s.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s8.di.1s.out","type":"ADDED","insertions":68,"deletions":0},{"file":"src/test/disklayout/s8.di.m.out","type":"ADDED","insertions":78,"deletions":0},{"file":"src/test/disklayout/s8.di.m0.out","type":"ADDED","insertions":81,"deletions":0},{"file":"src/test/disklayout/s8.di.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s8.di.z1.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/s8.di.z2.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s8.di.z3.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s9.di","type":"ADDED","insertions":10,"deletions":0},{"file":"src/test/disklayout/s9.di.0s.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/s9.di.1s.out","type":"ADDED","insertions":75,"deletions":0},{"file":"src/test/disklayout/s9.di.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/tl-a.di.0s.out","type":"ADDED","insertions":144,"deletions":0},{"file":"src/test/disklayout/tl-a.di.1s.out","type":"ADDED","insertions":156,"deletions":0},{"file":"src/test/disklayout/tl-ars.di.0s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/tl-ars.di.1s.out","type":"ADDED","insertions":56,"deletions":0},{"file":"src/test/disklayout/tl-b.di.0s.out","type":"ADDED","insertions":103,"deletions":0},{"file":"src/test/disklayout/tl-b.di.1s.out","type":"ADDED","insertions":105,"deletions":0},{"file":"src/test/disklayout/tl-c.di.0s.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/tl-c.di.1s.out","type":"ADDED","insertions":75,"deletions":0},{"file":"src/test/disklayout/tl-c.di.out","type":"MODIFIED","insertions":10,"deletions":-17}],"sizeInsertions":8015,"sizeDeletions":-145},{"number":"3","revision":"f2b9e860992edd73fa88e5166980657dab8b5288","parents":["2cbbbe4f9874864b6995423749c3aa7852df0c39"],"ref":"refs/changes/78/878/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1479137730,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1479140143,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1479137780,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1479138751,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"comments":[{"file":"src/disklayout.js","line":64,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I would use \"parseInt(option.optarg, 10)\" here, so that we get a numeric type.  At the moment, \"opt_s\" appears to be a string and we\u0027re using Javascript\u0027s implicit type conversion later when treating it as a number.\n\nI would probably then do the validation as:\n\n  if (opt_s !\u003d option.optarg || isNaN(opt_s) || !isFinite(opt_s) || opt_s \u003c 0) {\n      /* bail */\n\n(Note that the first equality check _does_ use type coercion to try and make sure there were no superfluous characters.  e.g. \u00275\u0027 but not \u00275 blah\u0027)"},{"file":"src/disklayout.js","line":64,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Done"},{"file":"src/node_modules/disklayout.js","line":10,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"It\u0027d be good to put a heading above this stanza; e.g.\n\n/*\n * Upper and lower limits on the number of disks in a single raidz1 or raidz2\n * vdev:\n */"},{"file":"src/node_modules/disklayout.js","line":217,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"It seems like we should return an error from this function if the user wanted a fixed number of spares that was not simply 0."},{"file":"src/node_modules/disklayout.js","line":217,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Done"},{"file":"src/node_modules/disklayout.js","line":246,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I see checks (in \"is_valid()\") that should prevent us from getting here with a fixed number of spares that exceeds the total available disks, but I think it\u0027d be good to assert here anyway.  Perhaps:\n\n    assert.ok(nspares \u003c disks.length);"},{"file":"src/node_modules/disklayout.js","line":344,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I think these should be lowercase variable names (i.e. \"minwidth\" and \"maxwidth\")."},{"file":"src/node_modules/disklayout.js","line":364,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Lowercase, as above?"},{"file":"src/node_modules/disklayout.js","line":393,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Lowercase, as above?  Also, should \"9\" and \"15\" be a \"Z3_MIN\" and \"Z3_MAX\" constant atop the file as with the other values?"},{"file":"src/node_modules/disklayout.js","line":454,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"space before the parenthesis in the string?"},{"file":"src/node_modules/disklayout.js","line":466,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"space before the parenthesis in the string?"},{"file":"src/node_modules/disklayout.js","line":477,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"heuristics"},{"file":"src/node_modules/disklayout.js","line":547,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"We should assert the types of these new arguments.  For example:\n\n  assert.ok(typeof (nspares) \u003d\u003d\u003d \u0027number\u0027 || nspares \u003d\u003d\u003d undefined);\n  assert.ok(typeof (enable_cache) \u003d\u003d\u003d \u0027boolean\u0027);"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"man/src/disklayout.1m.md","type":"MODIFIED","insertions":18,"deletions":-10},{"file":"src/disklayout.js","type":"MODIFIED","insertions":26,"deletions":-7},{"file":"src/node_modules/disklayout.js","type":"MODIFIED","insertions":268,"deletions":-107},{"file":"src/test/disklayout/1.di.0s.out","type":"ADDED","insertions":12,"deletions":0},{"file":"src/test/disklayout/1.di.1s.out","type":"ADDED","insertions":24,"deletions":0},{"file":"src/test/disklayout/1s.di.0s.out","type":"ADDED","insertions":21,"deletions":0},{"file":"src/test/disklayout/1s.di.1s.out","type":"ADDED","insertions":34,"deletions":0},{"file":"src/test/disklayout/2.di.0s.out","type":"ADDED","insertions":24,"deletions":0},{"file":"src/test/disklayout/2.di.1s.out","type":"ADDED","insertions":34,"deletions":0},{"file":"src/test/disklayout/2s.di.0s.out","type":"ADDED","insertions":33,"deletions":0},{"file":"src/test/disklayout/2s.di.1s.out","type":"ADDED","insertions":44,"deletions":0},{"file":"src/test/disklayout/3.di.0s.out","type":"ADDED","insertions":31,"deletions":0},{"file":"src/test/disklayout/3.di.1s.out","type":"ADDED","insertions":33,"deletions":0},{"file":"src/test/disklayout/3s.di.0s.out","type":"ADDED","insertions":40,"deletions":0},{"file":"src/test/disklayout/3s.di.1s.out","type":"ADDED","insertions":42,"deletions":0},{"file":"src/test/disklayout/4.di.0s.out","type":"ADDED","insertions":38,"deletions":0},{"file":"src/test/disklayout/4.di.1s.out","type":"ADDED","insertions":40,"deletions":0},{"file":"src/test/disklayout/43s.di.0s.out","type":"ADDED","insertions":454,"deletions":0},{"file":"src/test/disklayout/43s.di.1s.out","type":"ADDED","insertions":347,"deletions":0},{"file":"src/test/disklayout/4s.di.0s.out","type":"ADDED","insertions":47,"deletions":0},{"file":"src/test/disklayout/4s.di.1s.out","type":"ADDED","insertions":49,"deletions":0},{"file":"src/test/disklayout/5.di.0s.out","type":"ADDED","insertions":45,"deletions":0},{"file":"src/test/disklayout/5.di.1s.out","type":"ADDED","insertions":47,"deletions":0},{"file":"src/test/disklayout/5s.di.0s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/5s.di.1s.out","type":"ADDED","insertions":56,"deletions":0},{"file":"src/test/disklayout/6.di.0s.out","type":"ADDED","insertions":57,"deletions":0},{"file":"src/test/disklayout/6.di.1s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/6s.di.0s.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/6s.di.1s.out","type":"ADDED","insertions":63,"deletions":0},{"file":"src/test/disklayout/7.di.0s.out","type":"ADDED","insertions":59,"deletions":0},{"file":"src/test/disklayout/7.di.1s.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/7s.di.0s.out","type":"ADDED","insertions":68,"deletions":0},{"file":"src/test/disklayout/7s.di.1s.out","type":"ADDED","insertions":75,"deletions":0},{"file":"src/test/disklayout/8.di","type":"ADDED","insertions":9,"deletions":0},{"file":"src/test/disklayout/8.di.0s.out","type":"ADDED","insertions":81,"deletions":0},{"file":"src/test/disklayout/8.di.1s.out","type":"ADDED","insertions":68,"deletions":0},{"file":"src/test/disklayout/8.di.out","type":"ADDED","insertions":78,"deletions":0},{"file":"src/test/disklayout/README","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"src/test/disklayout/insane.di.0s.out","type":"ADDED","insertions":138,"deletions":0},{"file":"src/test/disklayout/insane.di.1s.out","type":"ADDED","insertions":135,"deletions":0},{"file":"src/test/disklayout/insane.di.c.out","type":"ADDED","insertions":119,"deletions":0},{"file":"src/test/disklayout/insane.di.c0.out","type":"ADDED","insertions":122,"deletions":0},{"file":"src/test/disklayout/insane.di.c1.out","type":"ADDED","insertions":119,"deletions":0},{"file":"src/test/disklayout/ms2.di.0s.out","type":"ADDED","insertions":284,"deletions":0},{"file":"src/test/disklayout/ms2.di.1s.out","type":"ADDED","insertions":12,"deletions":0},{"file":"src/test/disklayout/run","type":"ADDED","insertions":112,"deletions":0},{"file":"src/test/disklayout/s10.di","type":"ADDED","insertions":11,"deletions":0},{"file":"src/test/disklayout/s10.di.0s.out","type":"ADDED","insertions":80,"deletions":0},{"file":"src/test/disklayout/s10.di.1s.out","type":"ADDED","insertions":82,"deletions":0},{"file":"src/test/disklayout/s10.di.out","type":"ADDED","insertions":80,"deletions":0},{"file":"src/test/disklayout/s11.di","type":"ADDED","insertions":12,"deletions":0},{"file":"src/test/disklayout/s11.di.0s.out","type":"ADDED","insertions":87,"deletions":0},{"file":"src/test/disklayout/s11.di.1s.out","type":"ADDED","insertions":89,"deletions":0},{"file":"src/test/disklayout/s11.di.out","type":"ADDED","insertions":87,"deletions":0},{"file":"src/test/disklayout/s12.di","type":"ADDED","insertions":13,"deletions":0},{"file":"src/test/disklayout/s12.di.0s.out","type":"ADDED","insertions":94,"deletions":0},{"file":"src/test/disklayout/s12.di.1s.out","type":"ADDED","insertions":96,"deletions":0},{"file":"src/test/disklayout/s12.di.out","type":"ADDED","insertions":96,"deletions":0},{"file":"src/test/disklayout/s16.di","type":"ADDED","insertions":17,"deletions":0},{"file":"src/test/disklayout/s16.di.0s.out","type":"ADDED","insertions":127,"deletions":0},{"file":"src/test/disklayout/s16.di.1s.out","type":"ADDED","insertions":144,"deletions":0},{"file":"src/test/disklayout/s16.di.m.out","type":"ADDED","insertions":154,"deletions":0},{"file":"src/test/disklayout/s16.di.m0.out","type":"ADDED","insertions":157,"deletions":0},{"file":"src/test/disklayout/s16.di.out","type":"ADDED","insertions":129,"deletions":0},{"file":"src/test/disklayout/s16.di.z1-0.out","type":"ADDED","insertions":137,"deletions":0},{"file":"src/test/disklayout/s16.di.z1.out","type":"ADDED","insertions":139,"deletions":0},{"file":"src/test/disklayout/s16.di.z2-0.out","type":"ADDED","insertions":127,"deletions":0},{"file":"src/test/disklayout/s16.di.z2.out","type":"ADDED","insertions":129,"deletions":0},{"file":"src/test/disklayout/s16.di.z3-0.out","type":"ADDED","insertions":3,"deletions":0},{"file":"src/test/disklayout/s16.di.z3.out","type":"ADDED","insertions":124,"deletions":0},{"file":"src/test/disklayout/s17.di","type":"ADDED","insertions":17,"deletions":0},{"file":"src/test/disklayout/s17.di.0s.out","type":"ADDED","insertions":175,"deletions":0},{"file":"src/test/disklayout/s17.di.1s.out","type":"ADDED","insertions":136,"deletions":0},{"file":"src/test/disklayout/s17.di.out","type":"ADDED","insertions":136,"deletions":0},{"file":"src/test/disklayout/s6.di.0s.out","type":"ADDED","insertions":57,"deletions":0},{"file":"src/test/disklayout/s6.di.1s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/s8.di","type":"ADDED","insertions":9,"deletions":0},{"file":"src/test/disklayout/s8.di.0s.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s8.di.1s.out","type":"ADDED","insertions":68,"deletions":0},{"file":"src/test/disklayout/s8.di.m.out","type":"ADDED","insertions":78,"deletions":0},{"file":"src/test/disklayout/s8.di.m0.out","type":"ADDED","insertions":81,"deletions":0},{"file":"src/test/disklayout/s8.di.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s8.di.z1.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/s8.di.z2.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s8.di.z3.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s9.di","type":"ADDED","insertions":10,"deletions":0},{"file":"src/test/disklayout/s9.di.0s.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/s9.di.1s.out","type":"ADDED","insertions":75,"deletions":0},{"file":"src/test/disklayout/s9.di.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/tl-a.di.0s.out","type":"ADDED","insertions":144,"deletions":0},{"file":"src/test/disklayout/tl-a.di.1s.out","type":"ADDED","insertions":156,"deletions":0},{"file":"src/test/disklayout/tl-ars.di.0s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/tl-ars.di.1s.out","type":"ADDED","insertions":56,"deletions":0},{"file":"src/test/disklayout/tl-b.di.0s.out","type":"ADDED","insertions":103,"deletions":0},{"file":"src/test/disklayout/tl-b.di.1s.out","type":"ADDED","insertions":105,"deletions":0},{"file":"src/test/disklayout/tl-c.di.0s.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/tl-c.di.1s.out","type":"ADDED","insertions":75,"deletions":0},{"file":"src/test/disklayout/tl-c.di.out","type":"MODIFIED","insertions":10,"deletions":-17}],"sizeInsertions":8018,"sizeDeletions":-145},{"number":"4","revision":"b8121dec48f93ac102d4084a27f4501f057b2eb7","parents":["1b9c16b8ad657375b26483fd09fb8f45db2d30b3"],"ref":"refs/changes/78/878/4","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1479395538,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1479395581,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/node_modules/disklayout.js","line":228,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Other numeric comparisons seem to use !\u003d\u003d or \u003d\u003d\u003d. Are we purposefully using type coercion here?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"man/src/disklayout.1m.md","type":"MODIFIED","insertions":18,"deletions":-10},{"file":"src/disklayout.js","type":"MODIFIED","insertions":26,"deletions":-7},{"file":"src/node_modules/disklayout.js","type":"MODIFIED","insertions":291,"deletions":-109},{"file":"src/test/disklayout/1.di.0s.out","type":"ADDED","insertions":12,"deletions":0},{"file":"src/test/disklayout/1.di.1s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/1s.di.0s.out","type":"ADDED","insertions":21,"deletions":0},{"file":"src/test/disklayout/1s.di.1s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/2.di.0s.out","type":"ADDED","insertions":24,"deletions":0},{"file":"src/test/disklayout/2.di.1s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/2s.di.0s.out","type":"ADDED","insertions":33,"deletions":0},{"file":"src/test/disklayout/2s.di.1s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/3.di.0s.out","type":"ADDED","insertions":31,"deletions":0},{"file":"src/test/disklayout/3.di.1s.out","type":"ADDED","insertions":33,"deletions":0},{"file":"src/test/disklayout/3s.di.0s.out","type":"ADDED","insertions":40,"deletions":0},{"file":"src/test/disklayout/3s.di.1s.out","type":"ADDED","insertions":42,"deletions":0},{"file":"src/test/disklayout/4.di.0s.out","type":"ADDED","insertions":38,"deletions":0},{"file":"src/test/disklayout/4.di.1s.out","type":"ADDED","insertions":40,"deletions":0},{"file":"src/test/disklayout/43s.di.0s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/43s.di.1s.out","type":"ADDED","insertions":347,"deletions":0},{"file":"src/test/disklayout/4s.di.0s.out","type":"ADDED","insertions":47,"deletions":0},{"file":"src/test/disklayout/4s.di.1s.out","type":"ADDED","insertions":49,"deletions":0},{"file":"src/test/disklayout/5.di.0s.out","type":"ADDED","insertions":45,"deletions":0},{"file":"src/test/disklayout/5.di.1s.out","type":"ADDED","insertions":47,"deletions":0},{"file":"src/test/disklayout/5s.di.0s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/5s.di.1s.out","type":"ADDED","insertions":56,"deletions":0},{"file":"src/test/disklayout/6.di.0s.out","type":"ADDED","insertions":57,"deletions":0},{"file":"src/test/disklayout/6.di.1s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/6s.di.0s.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/6s.di.1s.out","type":"ADDED","insertions":63,"deletions":0},{"file":"src/test/disklayout/7.di.0s.out","type":"ADDED","insertions":59,"deletions":0},{"file":"src/test/disklayout/7.di.1s.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/7s.di.0s.out","type":"ADDED","insertions":68,"deletions":0},{"file":"src/test/disklayout/7s.di.1s.out","type":"ADDED","insertions":75,"deletions":0},{"file":"src/test/disklayout/8.di","type":"ADDED","insertions":9,"deletions":0},{"file":"src/test/disklayout/8.di.0s.out","type":"ADDED","insertions":81,"deletions":0},{"file":"src/test/disklayout/8.di.1s.out","type":"ADDED","insertions":68,"deletions":0},{"file":"src/test/disklayout/8.di.out","type":"ADDED","insertions":78,"deletions":0},{"file":"src/test/disklayout/README","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"src/test/disklayout/insane.di.0s.out","type":"ADDED","insertions":138,"deletions":0},{"file":"src/test/disklayout/insane.di.1s.out","type":"ADDED","insertions":135,"deletions":0},{"file":"src/test/disklayout/insane.di.c.out","type":"ADDED","insertions":119,"deletions":0},{"file":"src/test/disklayout/insane.di.c0.out","type":"ADDED","insertions":122,"deletions":0},{"file":"src/test/disklayout/insane.di.c1.out","type":"ADDED","insertions":119,"deletions":0},{"file":"src/test/disklayout/ms2.di.0s.out","type":"ADDED","insertions":284,"deletions":0},{"file":"src/test/disklayout/ms2.di.1s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/run","type":"ADDED","insertions":112,"deletions":0},{"file":"src/test/disklayout/s10.di","type":"ADDED","insertions":11,"deletions":0},{"file":"src/test/disklayout/s10.di.0s.out","type":"ADDED","insertions":80,"deletions":0},{"file":"src/test/disklayout/s10.di.1s.out","type":"ADDED","insertions":82,"deletions":0},{"file":"src/test/disklayout/s10.di.out","type":"ADDED","insertions":80,"deletions":0},{"file":"src/test/disklayout/s11.di","type":"ADDED","insertions":12,"deletions":0},{"file":"src/test/disklayout/s11.di.0s.out","type":"ADDED","insertions":87,"deletions":0},{"file":"src/test/disklayout/s11.di.1s.out","type":"ADDED","insertions":89,"deletions":0},{"file":"src/test/disklayout/s11.di.out","type":"ADDED","insertions":87,"deletions":0},{"file":"src/test/disklayout/s12.di","type":"ADDED","insertions":13,"deletions":0},{"file":"src/test/disklayout/s12.di.0s.out","type":"ADDED","insertions":94,"deletions":0},{"file":"src/test/disklayout/s12.di.1s.out","type":"ADDED","insertions":96,"deletions":0},{"file":"src/test/disklayout/s12.di.out","type":"ADDED","insertions":96,"deletions":0},{"file":"src/test/disklayout/s16.di","type":"ADDED","insertions":17,"deletions":0},{"file":"src/test/disklayout/s16.di.0s.out","type":"ADDED","insertions":127,"deletions":0},{"file":"src/test/disklayout/s16.di.1s.out","type":"ADDED","insertions":144,"deletions":0},{"file":"src/test/disklayout/s16.di.m.out","type":"ADDED","insertions":154,"deletions":0},{"file":"src/test/disklayout/s16.di.m0.out","type":"ADDED","insertions":157,"deletions":0},{"file":"src/test/disklayout/s16.di.out","type":"ADDED","insertions":129,"deletions":0},{"file":"src/test/disklayout/s16.di.z1-0.out","type":"ADDED","insertions":137,"deletions":0},{"file":"src/test/disklayout/s16.di.z1.out","type":"ADDED","insertions":139,"deletions":0},{"file":"src/test/disklayout/s16.di.z2-0.out","type":"ADDED","insertions":127,"deletions":0},{"file":"src/test/disklayout/s16.di.z2.out","type":"ADDED","insertions":129,"deletions":0},{"file":"src/test/disklayout/s16.di.z3-0.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/s16.di.z3.out","type":"ADDED","insertions":124,"deletions":0},{"file":"src/test/disklayout/s17.di","type":"ADDED","insertions":17,"deletions":0},{"file":"src/test/disklayout/s17.di.0s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/s17.di.1s.out","type":"ADDED","insertions":136,"deletions":0},{"file":"src/test/disklayout/s17.di.out","type":"ADDED","insertions":136,"deletions":0},{"file":"src/test/disklayout/s6.di.0s.out","type":"ADDED","insertions":57,"deletions":0},{"file":"src/test/disklayout/s6.di.1s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/s8.di","type":"ADDED","insertions":9,"deletions":0},{"file":"src/test/disklayout/s8.di.0s.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s8.di.1s.out","type":"ADDED","insertions":68,"deletions":0},{"file":"src/test/disklayout/s8.di.m.out","type":"ADDED","insertions":78,"deletions":0},{"file":"src/test/disklayout/s8.di.m0.out","type":"ADDED","insertions":81,"deletions":0},{"file":"src/test/disklayout/s8.di.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s8.di.z1.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/s8.di.z2.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s8.di.z3.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s9.di","type":"ADDED","insertions":10,"deletions":0},{"file":"src/test/disklayout/s9.di.0s.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/s9.di.1s.out","type":"ADDED","insertions":75,"deletions":0},{"file":"src/test/disklayout/s9.di.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/tl-a.di.0s.out","type":"ADDED","insertions":144,"deletions":0},{"file":"src/test/disklayout/tl-a.di.1s.out","type":"ADDED","insertions":156,"deletions":0},{"file":"src/test/disklayout/tl-ars.di.0s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/tl-ars.di.1s.out","type":"ADDED","insertions":56,"deletions":0},{"file":"src/test/disklayout/tl-b.di.0s.out","type":"ADDED","insertions":103,"deletions":0},{"file":"src/test/disklayout/tl-b.di.1s.out","type":"ADDED","insertions":105,"deletions":0},{"file":"src/test/disklayout/tl-c.di.0s.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/tl-c.di.1s.out","type":"ADDED","insertions":75,"deletions":0},{"file":"src/test/disklayout/tl-c.di.out","type":"MODIFIED","insertions":10,"deletions":-17}],"sizeInsertions":7269,"sizeDeletions":-147},{"number":"5","revision":"3a3640122b1f898bab1a5e7361aee8e9a60c38fc","parents":["1b9c16b8ad657375b26483fd09fb8f45db2d30b3"],"ref":"refs/changes/78/878/5","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1479494652,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1479495223,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1479495223,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1479494938,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1479494699,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"man/src/disklayout.1m.md","type":"MODIFIED","insertions":18,"deletions":-10},{"file":"src/disklayout.js","type":"MODIFIED","insertions":26,"deletions":-7},{"file":"src/node_modules/disklayout.js","type":"MODIFIED","insertions":291,"deletions":-109},{"file":"src/test/disklayout/1.di.0s.out","type":"ADDED","insertions":12,"deletions":0},{"file":"src/test/disklayout/1.di.1s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/1s.di.0s.out","type":"ADDED","insertions":21,"deletions":0},{"file":"src/test/disklayout/1s.di.1s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/2.di.0s.out","type":"ADDED","insertions":24,"deletions":0},{"file":"src/test/disklayout/2.di.1s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/2s.di.0s.out","type":"ADDED","insertions":33,"deletions":0},{"file":"src/test/disklayout/2s.di.1s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/3.di.0s.out","type":"ADDED","insertions":31,"deletions":0},{"file":"src/test/disklayout/3.di.1s.out","type":"ADDED","insertions":33,"deletions":0},{"file":"src/test/disklayout/3s.di.0s.out","type":"ADDED","insertions":40,"deletions":0},{"file":"src/test/disklayout/3s.di.1s.out","type":"ADDED","insertions":42,"deletions":0},{"file":"src/test/disklayout/4.di.0s.out","type":"ADDED","insertions":38,"deletions":0},{"file":"src/test/disklayout/4.di.1s.out","type":"ADDED","insertions":40,"deletions":0},{"file":"src/test/disklayout/43s.di.0s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/43s.di.1s.out","type":"ADDED","insertions":347,"deletions":0},{"file":"src/test/disklayout/4s.di.0s.out","type":"ADDED","insertions":47,"deletions":0},{"file":"src/test/disklayout/4s.di.1s.out","type":"ADDED","insertions":49,"deletions":0},{"file":"src/test/disklayout/5.di.0s.out","type":"ADDED","insertions":45,"deletions":0},{"file":"src/test/disklayout/5.di.1s.out","type":"ADDED","insertions":47,"deletions":0},{"file":"src/test/disklayout/5s.di.0s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/5s.di.1s.out","type":"ADDED","insertions":56,"deletions":0},{"file":"src/test/disklayout/6.di.0s.out","type":"ADDED","insertions":57,"deletions":0},{"file":"src/test/disklayout/6.di.1s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/6s.di.0s.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/6s.di.1s.out","type":"ADDED","insertions":63,"deletions":0},{"file":"src/test/disklayout/7.di.0s.out","type":"ADDED","insertions":59,"deletions":0},{"file":"src/test/disklayout/7.di.1s.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/7s.di.0s.out","type":"ADDED","insertions":68,"deletions":0},{"file":"src/test/disklayout/7s.di.1s.out","type":"ADDED","insertions":75,"deletions":0},{"file":"src/test/disklayout/8.di","type":"ADDED","insertions":9,"deletions":0},{"file":"src/test/disklayout/8.di.0s.out","type":"ADDED","insertions":81,"deletions":0},{"file":"src/test/disklayout/8.di.1s.out","type":"ADDED","insertions":68,"deletions":0},{"file":"src/test/disklayout/8.di.out","type":"ADDED","insertions":78,"deletions":0},{"file":"src/test/disklayout/README","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"src/test/disklayout/insane.di.0s.out","type":"ADDED","insertions":138,"deletions":0},{"file":"src/test/disklayout/insane.di.1s.out","type":"ADDED","insertions":135,"deletions":0},{"file":"src/test/disklayout/insane.di.c.out","type":"ADDED","insertions":119,"deletions":0},{"file":"src/test/disklayout/insane.di.c0.out","type":"ADDED","insertions":122,"deletions":0},{"file":"src/test/disklayout/insane.di.c1.out","type":"ADDED","insertions":119,"deletions":0},{"file":"src/test/disklayout/ms2.di.0s.out","type":"ADDED","insertions":284,"deletions":0},{"file":"src/test/disklayout/ms2.di.1s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/run","type":"ADDED","insertions":112,"deletions":0},{"file":"src/test/disklayout/s10.di","type":"ADDED","insertions":11,"deletions":0},{"file":"src/test/disklayout/s10.di.0s.out","type":"ADDED","insertions":80,"deletions":0},{"file":"src/test/disklayout/s10.di.1s.out","type":"ADDED","insertions":82,"deletions":0},{"file":"src/test/disklayout/s10.di.out","type":"ADDED","insertions":80,"deletions":0},{"file":"src/test/disklayout/s11.di","type":"ADDED","insertions":12,"deletions":0},{"file":"src/test/disklayout/s11.di.0s.out","type":"ADDED","insertions":87,"deletions":0},{"file":"src/test/disklayout/s11.di.1s.out","type":"ADDED","insertions":89,"deletions":0},{"file":"src/test/disklayout/s11.di.out","type":"ADDED","insertions":87,"deletions":0},{"file":"src/test/disklayout/s12.di","type":"ADDED","insertions":13,"deletions":0},{"file":"src/test/disklayout/s12.di.0s.out","type":"ADDED","insertions":94,"deletions":0},{"file":"src/test/disklayout/s12.di.1s.out","type":"ADDED","insertions":96,"deletions":0},{"file":"src/test/disklayout/s12.di.out","type":"ADDED","insertions":96,"deletions":0},{"file":"src/test/disklayout/s16.di","type":"ADDED","insertions":17,"deletions":0},{"file":"src/test/disklayout/s16.di.0s.out","type":"ADDED","insertions":127,"deletions":0},{"file":"src/test/disklayout/s16.di.1s.out","type":"ADDED","insertions":144,"deletions":0},{"file":"src/test/disklayout/s16.di.m.out","type":"ADDED","insertions":154,"deletions":0},{"file":"src/test/disklayout/s16.di.m0.out","type":"ADDED","insertions":157,"deletions":0},{"file":"src/test/disklayout/s16.di.out","type":"ADDED","insertions":129,"deletions":0},{"file":"src/test/disklayout/s16.di.z1-0.out","type":"ADDED","insertions":137,"deletions":0},{"file":"src/test/disklayout/s16.di.z1.out","type":"ADDED","insertions":139,"deletions":0},{"file":"src/test/disklayout/s16.di.z2-0.out","type":"ADDED","insertions":127,"deletions":0},{"file":"src/test/disklayout/s16.di.z2.out","type":"ADDED","insertions":129,"deletions":0},{"file":"src/test/disklayout/s16.di.z3-0.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/s16.di.z3.out","type":"ADDED","insertions":124,"deletions":0},{"file":"src/test/disklayout/s17.di","type":"ADDED","insertions":17,"deletions":0},{"file":"src/test/disklayout/s17.di.0s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/s17.di.1s.out","type":"ADDED","insertions":136,"deletions":0},{"file":"src/test/disklayout/s17.di.out","type":"ADDED","insertions":136,"deletions":0},{"file":"src/test/disklayout/s6.di.0s.out","type":"ADDED","insertions":57,"deletions":0},{"file":"src/test/disklayout/s6.di.1s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/s8.di","type":"ADDED","insertions":9,"deletions":0},{"file":"src/test/disklayout/s8.di.0s.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s8.di.1s.out","type":"ADDED","insertions":68,"deletions":0},{"file":"src/test/disklayout/s8.di.m.out","type":"ADDED","insertions":78,"deletions":0},{"file":"src/test/disklayout/s8.di.m0.out","type":"ADDED","insertions":81,"deletions":0},{"file":"src/test/disklayout/s8.di.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s8.di.z1.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/s8.di.z2.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s8.di.z3.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s9.di","type":"ADDED","insertions":10,"deletions":0},{"file":"src/test/disklayout/s9.di.0s.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/s9.di.1s.out","type":"ADDED","insertions":75,"deletions":0},{"file":"src/test/disklayout/s9.di.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/tl-a.di.0s.out","type":"ADDED","insertions":144,"deletions":0},{"file":"src/test/disklayout/tl-a.di.1s.out","type":"ADDED","insertions":156,"deletions":0},{"file":"src/test/disklayout/tl-ars.di.0s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/tl-ars.di.1s.out","type":"ADDED","insertions":56,"deletions":0},{"file":"src/test/disklayout/tl-b.di.0s.out","type":"ADDED","insertions":103,"deletions":0},{"file":"src/test/disklayout/tl-b.di.1s.out","type":"ADDED","insertions":105,"deletions":0},{"file":"src/test/disklayout/tl-c.di.0s.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/tl-c.di.1s.out","type":"ADDED","insertions":75,"deletions":0},{"file":"src/test/disklayout/tl-c.di.out","type":"MODIFIED","insertions":10,"deletions":-17}],"sizeInsertions":7269,"sizeDeletions":-147},{"number":"6","revision":"99b8e5fdea990e26bb86ba62281e4e568d600d86","parents":["1b9c16b8ad657375b26483fd09fb8f45db2d30b3"],"ref":"refs/changes/78/878/6","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1479495457,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1479495223,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1479495223,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1479494938,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1479494699,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1479495474,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"man/src/disklayout.1m.md","type":"MODIFIED","insertions":18,"deletions":-10},{"file":"src/disklayout.js","type":"MODIFIED","insertions":26,"deletions":-7},{"file":"src/node_modules/disklayout.js","type":"MODIFIED","insertions":291,"deletions":-109},{"file":"src/test/disklayout/1.di.0s.out","type":"ADDED","insertions":12,"deletions":0},{"file":"src/test/disklayout/1.di.1s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/1s.di.0s.out","type":"ADDED","insertions":21,"deletions":0},{"file":"src/test/disklayout/1s.di.1s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/2.di.0s.out","type":"ADDED","insertions":24,"deletions":0},{"file":"src/test/disklayout/2.di.1s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/2s.di.0s.out","type":"ADDED","insertions":33,"deletions":0},{"file":"src/test/disklayout/2s.di.1s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/3.di.0s.out","type":"ADDED","insertions":31,"deletions":0},{"file":"src/test/disklayout/3.di.1s.out","type":"ADDED","insertions":33,"deletions":0},{"file":"src/test/disklayout/3s.di.0s.out","type":"ADDED","insertions":40,"deletions":0},{"file":"src/test/disklayout/3s.di.1s.out","type":"ADDED","insertions":42,"deletions":0},{"file":"src/test/disklayout/4.di.0s.out","type":"ADDED","insertions":38,"deletions":0},{"file":"src/test/disklayout/4.di.1s.out","type":"ADDED","insertions":40,"deletions":0},{"file":"src/test/disklayout/43s.di.0s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/43s.di.1s.out","type":"ADDED","insertions":347,"deletions":0},{"file":"src/test/disklayout/4s.di.0s.out","type":"ADDED","insertions":47,"deletions":0},{"file":"src/test/disklayout/4s.di.1s.out","type":"ADDED","insertions":49,"deletions":0},{"file":"src/test/disklayout/5.di.0s.out","type":"ADDED","insertions":45,"deletions":0},{"file":"src/test/disklayout/5.di.1s.out","type":"ADDED","insertions":47,"deletions":0},{"file":"src/test/disklayout/5s.di.0s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/5s.di.1s.out","type":"ADDED","insertions":56,"deletions":0},{"file":"src/test/disklayout/6.di.0s.out","type":"ADDED","insertions":57,"deletions":0},{"file":"src/test/disklayout/6.di.1s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/6s.di.0s.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/6s.di.1s.out","type":"ADDED","insertions":63,"deletions":0},{"file":"src/test/disklayout/7.di.0s.out","type":"ADDED","insertions":59,"deletions":0},{"file":"src/test/disklayout/7.di.1s.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/7s.di.0s.out","type":"ADDED","insertions":68,"deletions":0},{"file":"src/test/disklayout/7s.di.1s.out","type":"ADDED","insertions":75,"deletions":0},{"file":"src/test/disklayout/8.di","type":"ADDED","insertions":9,"deletions":0},{"file":"src/test/disklayout/8.di.0s.out","type":"ADDED","insertions":81,"deletions":0},{"file":"src/test/disklayout/8.di.1s.out","type":"ADDED","insertions":68,"deletions":0},{"file":"src/test/disklayout/8.di.out","type":"ADDED","insertions":78,"deletions":0},{"file":"src/test/disklayout/README","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"src/test/disklayout/insane.di.0s.out","type":"ADDED","insertions":138,"deletions":0},{"file":"src/test/disklayout/insane.di.1s.out","type":"ADDED","insertions":135,"deletions":0},{"file":"src/test/disklayout/insane.di.c.out","type":"ADDED","insertions":119,"deletions":0},{"file":"src/test/disklayout/insane.di.c0.out","type":"ADDED","insertions":122,"deletions":0},{"file":"src/test/disklayout/insane.di.c1.out","type":"ADDED","insertions":119,"deletions":0},{"file":"src/test/disklayout/ms2.di.0s.out","type":"ADDED","insertions":284,"deletions":0},{"file":"src/test/disklayout/ms2.di.1s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/run","type":"ADDED","insertions":112,"deletions":0},{"file":"src/test/disklayout/s10.di","type":"ADDED","insertions":11,"deletions":0},{"file":"src/test/disklayout/s10.di.0s.out","type":"ADDED","insertions":80,"deletions":0},{"file":"src/test/disklayout/s10.di.1s.out","type":"ADDED","insertions":82,"deletions":0},{"file":"src/test/disklayout/s10.di.out","type":"ADDED","insertions":80,"deletions":0},{"file":"src/test/disklayout/s11.di","type":"ADDED","insertions":12,"deletions":0},{"file":"src/test/disklayout/s11.di.0s.out","type":"ADDED","insertions":87,"deletions":0},{"file":"src/test/disklayout/s11.di.1s.out","type":"ADDED","insertions":89,"deletions":0},{"file":"src/test/disklayout/s11.di.out","type":"ADDED","insertions":87,"deletions":0},{"file":"src/test/disklayout/s12.di","type":"ADDED","insertions":13,"deletions":0},{"file":"src/test/disklayout/s12.di.0s.out","type":"ADDED","insertions":94,"deletions":0},{"file":"src/test/disklayout/s12.di.1s.out","type":"ADDED","insertions":96,"deletions":0},{"file":"src/test/disklayout/s12.di.out","type":"ADDED","insertions":96,"deletions":0},{"file":"src/test/disklayout/s16.di","type":"ADDED","insertions":17,"deletions":0},{"file":"src/test/disklayout/s16.di.0s.out","type":"ADDED","insertions":127,"deletions":0},{"file":"src/test/disklayout/s16.di.1s.out","type":"ADDED","insertions":144,"deletions":0},{"file":"src/test/disklayout/s16.di.m.out","type":"ADDED","insertions":154,"deletions":0},{"file":"src/test/disklayout/s16.di.m0.out","type":"ADDED","insertions":157,"deletions":0},{"file":"src/test/disklayout/s16.di.out","type":"ADDED","insertions":129,"deletions":0},{"file":"src/test/disklayout/s16.di.z1-0.out","type":"ADDED","insertions":137,"deletions":0},{"file":"src/test/disklayout/s16.di.z1.out","type":"ADDED","insertions":139,"deletions":0},{"file":"src/test/disklayout/s16.di.z2-0.out","type":"ADDED","insertions":127,"deletions":0},{"file":"src/test/disklayout/s16.di.z2.out","type":"ADDED","insertions":129,"deletions":0},{"file":"src/test/disklayout/s16.di.z3-0.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/s16.di.z3.out","type":"ADDED","insertions":124,"deletions":0},{"file":"src/test/disklayout/s17.di","type":"ADDED","insertions":17,"deletions":0},{"file":"src/test/disklayout/s17.di.0s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/s17.di.1s.out","type":"ADDED","insertions":136,"deletions":0},{"file":"src/test/disklayout/s17.di.out","type":"ADDED","insertions":136,"deletions":0},{"file":"src/test/disklayout/s6.di.0s.out","type":"ADDED","insertions":57,"deletions":0},{"file":"src/test/disklayout/s6.di.1s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/s8.di","type":"ADDED","insertions":9,"deletions":0},{"file":"src/test/disklayout/s8.di.0s.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s8.di.1s.out","type":"ADDED","insertions":68,"deletions":0},{"file":"src/test/disklayout/s8.di.m.out","type":"ADDED","insertions":78,"deletions":0},{"file":"src/test/disklayout/s8.di.m0.out","type":"ADDED","insertions":81,"deletions":0},{"file":"src/test/disklayout/s8.di.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s8.di.z1.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/s8.di.z2.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s8.di.z3.out","type":"ADDED","insertions":66,"deletions":0},{"file":"src/test/disklayout/s9.di","type":"ADDED","insertions":10,"deletions":0},{"file":"src/test/disklayout/s9.di.0s.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/s9.di.1s.out","type":"ADDED","insertions":75,"deletions":0},{"file":"src/test/disklayout/s9.di.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/tl-a.di.0s.out","type":"ADDED","insertions":144,"deletions":0},{"file":"src/test/disklayout/tl-a.di.1s.out","type":"ADDED","insertions":156,"deletions":0},{"file":"src/test/disklayout/tl-ars.di.0s.out","type":"ADDED","insertions":54,"deletions":0},{"file":"src/test/disklayout/tl-ars.di.1s.out","type":"ADDED","insertions":56,"deletions":0},{"file":"src/test/disklayout/tl-b.di.0s.out","type":"ADDED","insertions":103,"deletions":0},{"file":"src/test/disklayout/tl-b.di.1s.out","type":"ADDED","insertions":105,"deletions":0},{"file":"src/test/disklayout/tl-c.di.0s.out","type":"ADDED","insertions":73,"deletions":0},{"file":"src/test/disklayout/tl-c.di.1s.out","type":"ADDED","insertions":75,"deletions":0},{"file":"src/test/disklayout/tl-c.di.out","type":"MODIFIED","insertions":10,"deletions":-17}],"sizeInsertions":7269,"sizeDeletions":-147}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}]}