{"project":"joyent/manta-muskie","branch":"master","id":"Ie47e15153ea120a02e4db9feebe9906b1fcb1407","number":"2823","subject":"MANTA-3430 could add muskie metrics for throughput Reviewed by: Jordan Hendricks \u003cjordan.hendricks@joyent.com\u003e Approved by: Jordan Hendricks \u003cjordan.hendricks@joyent.com\u003e","owner":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"url":"https://cr.joyent.us/2823","commitMessage":"MANTA-3430 could add muskie metrics for throughput\nReviewed by: Jordan Hendricks \u003cjordan.hendricks@joyent.com\u003e\nApproved by: Jordan Hendricks \u003cjordan.hendricks@joyent.com\u003e\n","createdOn":1508444934,"lastUpdated":1510009026,"open":false,"status":"MERGED","comments":[{"timestamp":1508444934,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 1."},{"timestamp":1508444981,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1508445465,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1508516459,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 2."},{"timestamp":1508516493,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1509049470,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 2:\n\n(11 comments)\n\nThis looks good! Thanks again for adding a block comment to the Checkstream object."},{"timestamp":1509049593,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1509390878,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 3."},{"timestamp":1509390904,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1509390929,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 3:\n\n(5 comments)\n\nOkay! I think I addressed all of your initial comments. Let me know if I missed something. Thanks for taking a look. This is \u0027make prepush\u0027 clean, and is rebased on top of the new muskie testing changes."},{"timestamp":1509391024,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 2:\n\n(4 comments)"},{"timestamp":1509489159,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 3: Code-Review+1\n\n(2 comments)"},{"timestamp":1509566696,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 4."},{"timestamp":1509566724,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1509566740,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 4:\n\nThanks for reviewing! I also updated the jira ticket with testing notes."},{"timestamp":1509646912,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 4:\n\nThanks for adding the testing notes. I think it would be good to see an example of how someone (dev or operator) would convert these counters to a throughput measurement, since that\u0027s the intended use case for SPC. Is the goal to record these counters in a database somewhere with timestamps, and to query that measurement to see the rate change over time?\n\nSeparately, with regard to counter overflow, is the expectation here that we update muskies often enough that we aren\u0027t likely to overflow counters on a given muskie process?"},{"timestamp":1509650008,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 4:\n\n\u003e Thanks for adding the testing notes. I think it would be good to\n \u003e see an example of how someone (dev or operator) would convert these\n \u003e counters to a throughput measurement, since that\u0027s the intended use\n \u003e case for SPC. Is the goal to record these counters in a database\n \u003e somewhere with timestamps, and to query that measurement to see the\n \u003e rate change over time?\n \u003e \n \u003e Separately, with regard to counter overflow, is the expectation\n \u003e here that we update muskies often enough that we aren\u0027t likely to\n \u003e overflow counters on a given muskie process?\n\nSure! I\u0027ll add an example query and an explanation of the goals here to the Jira ticket.\n\nYes, my expectation is that a muskie process will restart before we hit the overflow value. If my math is correct, we would have to ingest more than 8.5 petabytes of data through a single muskie process to hit the upper limit of a Node.js number. Unfortunately it\u0027s hard to know what our ingest rate is without this change, but based on some numbers we have for our larger deployments, it would take many years for a single muskie process to hit the upper bound. I\u0027ll write some new math in the ticket based on more concrete numbers."},{"timestamp":1509996473,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 5: Patch Set 4 was rebased."},{"timestamp":1509996499,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5:\n\n\"make check\" passed ok"},{"timestamp":1510007918,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1\n\nThanks for adding testing notes and the calculations for counter overflow to the ticket!"},{"timestamp":1510008494,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1510009026,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Kody A Kantor"}],"currentPatchSet":{"number":"6","revision":"e47e15153ea120a02e4db9feebe9906b1fcb1407","parents":["ee477ec067310a6a8973ca3cb273a17ddf03b2da"],"ref":"refs/changes/23/2823/6","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1510008494,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509566724,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1510007918,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1510007918,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"SUBM","value":"1","grantedOn":1510009026,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"docs/internal/design.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/audit.js","type":"MODIFIED","insertions":13,"deletions":-20},{"file":"lib/check_stream.js","type":"MODIFIED","insertions":28,"deletions":-1},{"file":"lib/common.js","type":"MODIFIED","insertions":21,"deletions":0},{"file":"lib/obj.js","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"lib/other.js","type":"MODIFIED","insertions":13,"deletions":-8},{"file":"lib/server.js","type":"MODIFIED","insertions":32,"deletions":-8},{"file":"main.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":115,"sizeDeletions":-41},"patchSets":[{"number":"1","revision":"70ab340ef2ad14577b89664865b0e9ce4bd8acd5","parents":["a612da71491efd1e926b986741f30f2f2055b685"],"ref":"refs/changes/23/2823/1","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1508444934,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1508444981,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/other.js","line":0,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"This file is modified to fix one of the memory/connection leak conditions discovered in MANTA-3338"},{"file":"lib/other.js","line":400,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"OOC, were you able to observe the connection leak as documented in MANTA-3338 without this line?"},{"file":"lib/other.js","line":400,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Yes, I was. I tested this using the same method I tested similar node-fast and moray changes by sending a large buffer in the body of a GET request. It leaked both memory and a socket. The chances of this code getting hit by MANTA-3338 is much lower than the rest of muskie, but there\u0027s still a chance!"},{"file":"lib/server.js","line":91,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Is this part out of date, too?"},{"file":"lib/server.js","line":100,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"It looks like this field hasn\u0027t been used since Muskie was open sourced."},{"file":"lib/server.js","line":119,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"I noted this in another file, but it might be nice to pull some of these collector names into constants."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/audit.js","type":"MODIFIED","insertions":7,"deletions":-18},{"file":"lib/check_stream.js","type":"MODIFIED","insertions":27,"deletions":-1},{"file":"lib/common.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/obj.js","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"lib/other.js","type":"MODIFIED","insertions":12,"deletions":-8},{"file":"lib/server.js","type":"MODIFIED","insertions":32,"deletions":-8},{"file":"main.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":89,"sizeDeletions":-39},{"number":"2","revision":"b88b404f35d05edd82f9e4aa13ef5537db040a84","parents":["a612da71491efd1e926b986741f30f2f2055b685"],"ref":"refs/changes/23/2823/2","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1508516459,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1508516493,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"docs/internal/design.md","line":71,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"I think it would be clearer to use the unit of measurement the counter uses -- e.g., \"count of bytes streamed to and from storage\"."},{"file":"docs/internal/design.md","line":71,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"},{"file":"lib/check_stream.js","line":11,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Thank you for adding a comment to this. I recall being very confused about what the check stream was when I first started looking at muskie.\n\n\nnit: Since it\u0027s a block comment, make this a C-style comment? (i.e., /* ..... */)."},{"file":"lib/check_stream.js","line":11,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"We can do that. There\u0027s quite a mix of style in this repo, but I would prefer the normal block comment style."},{"file":"lib/check_stream.js","line":13,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"It might be good to make really clear the important of the Checkstream for muskie: the checkstream does not just calculate the MD5 of the data, but we use its calculator to store as truth on the object\u0027s metadata."},{"file":"lib/check_stream.js","line":13,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"s/calculator/calculation"},{"file":"lib/check_stream.js","line":13,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done. Let me know if what I wrote isn\u0027t adequate."},{"file":"lib/check_stream.js","line":13,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Looks good! Thanks for the update."},{"file":"lib/check_stream.js","line":16,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Does the name imply that? A `Passthrough` stream is a node library stream that is an implementation of a Transform stream, whereas the Checkstream is a Writable. My brain may be a bit warped from having worked with node streams a lot lately, but this wording confused me."},{"file":"lib/check_stream.js","line":16,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Oh, sorry. I was thinking of this in the sense that it doesn\u0027t modify the data that is sent in. I\u0027ll just remove this qualifier."},{"file":"lib/check_stream.js","line":22,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Does this mean abandon() emits the event?"},{"file":"lib/check_stream.js","line":22,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"No, I see how the wording can make it seem like that. abandon() doesn\u0027t emit any events but is called by consumers of CheckStream after CheckStream emits the \u0027timeout\u0027 event (in onTimeoutHandler(), by way of _write())."},{"file":"lib/obj.js","line":471,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"nit: move the argument to getCollector() into a constant?"},{"file":"lib/obj.js","line":471,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"},{"file":"lib/other.js","line":391,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Could we use a VError here?"},{"file":"lib/other.js","line":391,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done. What I changed it to reports the error back to the client, which should be fine in this case since this is not publicly accessible."},{"file":"main.js","line":550,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Does server2 still work over http? (I\u0027m assuming that\u0027s what the `clearProxy` argument indicated, but I might be wrong.)"},{"file":"main.js","line":550,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Yeah, it still works. The muskie tests do exercise that, and I also tested using an \u0027msign\u0027ed URL. From what I can tell we haven\u0027t used the clearProxy argument since muskie was open sourced."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/internal/design.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/audit.js","type":"MODIFIED","insertions":7,"deletions":-18},{"file":"lib/check_stream.js","type":"MODIFIED","insertions":27,"deletions":-1},{"file":"lib/common.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/obj.js","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"lib/other.js","type":"MODIFIED","insertions":12,"deletions":-8},{"file":"lib/server.js","type":"MODIFIED","insertions":32,"deletions":-8},{"file":"main.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":90,"sizeDeletions":-39},{"number":"3","revision":"70772c44009ed447177393fc84d19f2a6271f85e","parents":["697fa22fbae8bdf61025e16584f3668254cc06d9"],"ref":"refs/changes/23/2823/3","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1509390878,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509390904,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1509489159,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"comments":[{"file":"lib/common.js","line":74,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"My bias would be to prefix these constants with something that indicates these are metric names (e.g., METRIC_REQUESTCOUNTER, or something similar) to make it really obvious when reading other files. Up to you, though."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/internal/design.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/audit.js","type":"MODIFIED","insertions":13,"deletions":-20},{"file":"lib/check_stream.js","type":"MODIFIED","insertions":28,"deletions":-1},{"file":"lib/common.js","type":"MODIFIED","insertions":21,"deletions":0},{"file":"lib/obj.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/other.js","type":"MODIFIED","insertions":13,"deletions":-8},{"file":"lib/server.js","type":"MODIFIED","insertions":32,"deletions":-8},{"file":"main.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":114,"sizeDeletions":-41},{"number":"4","revision":"4934139a1ed39f3e95cd3247bbfa03c1a47754f0","parents":["697fa22fbae8bdf61025e16584f3668254cc06d9"],"ref":"refs/changes/23/2823/4","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1509566696,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509566724,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/internal/design.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/audit.js","type":"MODIFIED","insertions":13,"deletions":-20},{"file":"lib/check_stream.js","type":"MODIFIED","insertions":28,"deletions":-1},{"file":"lib/common.js","type":"MODIFIED","insertions":21,"deletions":0},{"file":"lib/obj.js","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"lib/other.js","type":"MODIFIED","insertions":13,"deletions":-8},{"file":"lib/server.js","type":"MODIFIED","insertions":32,"deletions":-8},{"file":"main.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":115,"sizeDeletions":-41},{"number":"5","revision":"ae5a11749f128d9bb85a2533ed2499b27c0be801","parents":["ee477ec067310a6a8973ca3cb273a17ddf03b2da"],"ref":"refs/changes/23/2823/5","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1509996473,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509566724,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1510007918,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1510007918,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/internal/design.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/audit.js","type":"MODIFIED","insertions":13,"deletions":-20},{"file":"lib/check_stream.js","type":"MODIFIED","insertions":28,"deletions":-1},{"file":"lib/common.js","type":"MODIFIED","insertions":21,"deletions":0},{"file":"lib/obj.js","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"lib/other.js","type":"MODIFIED","insertions":13,"deletions":-8},{"file":"lib/server.js","type":"MODIFIED","insertions":32,"deletions":-8},{"file":"main.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":115,"sizeDeletions":-41},{"number":"6","revision":"e47e15153ea120a02e4db9feebe9906b1fcb1407","parents":["ee477ec067310a6a8973ca3cb273a17ddf03b2da"],"ref":"refs/changes/23/2823/6","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1510008494,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509566724,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1510007918,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1510007918,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"SUBM","value":"1","grantedOn":1510009026,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"docs/internal/design.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/audit.js","type":"MODIFIED","insertions":13,"deletions":-20},{"file":"lib/check_stream.js","type":"MODIFIED","insertions":28,"deletions":-1},{"file":"lib/common.js","type":"MODIFIED","insertions":21,"deletions":0},{"file":"lib/obj.js","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"lib/other.js","type":"MODIFIED","insertions":13,"deletions":-8},{"file":"lib/server.js","type":"MODIFIED","insertions":32,"deletions":-8},{"file":"main.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":115,"sizeDeletions":-41}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}]}