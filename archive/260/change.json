{"project":"joyent/node-verror","branch":"master","id":"Ifb522bf39f3762a06dd52d1933035cca4497b781","number":"260","subject":"joyent/node-verror#10 better support for extra properties on Errors joyent/node-verror#11 make it easy to find causes of a particular kind Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Approved by: Robert Mustacchi \u003crm@joyent.com\u003e","owner":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"url":"https://cr.joyent.us/260","commitMessage":"joyent/node-verror#10 better support for extra properties on Errors\njoyent/node-verror#11 make it easy to find causes of a particular kind\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nApproved by: Robert Mustacchi \u003crm@joyent.com\u003e\n","createdOn":1470774763,"lastUpdated":1470957560,"open":false,"status":"MERGED","comments":[{"timestamp":1470774763,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 1."},{"timestamp":1470774770,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1470775136,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\nThis change implements RFD 41 (https://github.com/joyent/rfd/blob/master/rfd/0041/README.md).\n\nThere\u0027s also some discussion under joyent/node-verror#10 and joyent/node-verror#11.\n\nThough this change substantially refactors the constructors, I believe all the changes here are backwards-compatible.  The test plan was essentially to run \"make prepush\" on Node versions v0.10.43, v0.12.15, v4.4.7, and v6.3.1, both 32-bit and 64-bit for each of these, on SmartOS."},{"timestamp":1470775265,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\nIt\u0027s also worth mentioning that I\u0027ve been using this in the node-fast rewrite and node-moray rewrite."},{"timestamp":1470848553,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 1:\n\n(2 comments)\n\nOther than line 283 and any other uses of non-strict equivalency checking, the methodology and code here all look good to me.  I\u0027m particularly a fan of the static class methods as opposed to instance methods for .info, .cause, etc."},{"timestamp":1470849208,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\n(2 comments)\n\nThanks for taking a look."},{"timestamp":1470953633,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1: Code-Review+1\n\n(2 comments)"},{"timestamp":1470955066,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 2."},{"timestamp":1470955069,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1470955250,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1470957545,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 3: Commit message was updated."},{"timestamp":1470957560,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by David Pacheco"}],"currentPatchSet":{"number":"3","revision":"08fa8939cc744dfce40ef1f1b9cad0d454b4b2ce","parents":["b1c7bf701c232eb0039da2321291636c6815e061"],"ref":"refs/changes/60/260/3","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1470957545,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1470955069,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470955250,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470955250,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1470957560,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"ADDED","insertions":4,"deletions":0},{"file":"LICENSE","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"Makefile","type":"MODIFIED","insertions":7,"deletions":-9},{"file":"Makefile.targ","type":"MODIFIED","insertions":57,"deletions":-25},{"file":"README.md","type":"MODIFIED","insertions":365,"deletions":-70},{"file":"deps/catest","type":"ADDED","insertions":1,"deletions":0},{"file":"examples/info.js","type":"ADDED","insertions":31,"deletions":0},{"file":"examples/levels-verror.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"examples/multierror.js","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/verror.js","type":"MODIFIED","insertions":261,"deletions":-100},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"test/common.js","type":"ADDED","insertions":27,"deletions":0},{"file":"test/tst.common.js","type":"ADDED","insertions":167,"deletions":0},{"file":"test/tst.context.js","fileOld":"tests/tst.context.js","type":"RENAMED","insertions":1,"deletions":-1},{"file":"test/tst.info.js","type":"ADDED","insertions":75,"deletions":0},{"file":"test/tst.inherit.js","fileOld":"tests/tst.inherit.js","type":"RENAMED","insertions":27,"deletions":-10},{"file":"test/tst.multierror.js","type":"ADDED","insertions":57,"deletions":0},{"file":"test/tst.verror.js","type":"ADDED","insertions":102,"deletions":0},{"file":"test/tst.werror.js","type":"ADDED","insertions":127,"deletions":0},{"file":"tests/tst.serror.js","type":"DELETED","insertions":0,"deletions":-66},{"file":"tests/tst.verror.js","type":"DELETED","insertions":0,"deletions":-169},{"file":"tests/tst.werror.js","type":"DELETED","insertions":0,"deletions":-179}],"sizeInsertions":1324,"sizeDeletions":-633},"patchSets":[{"number":"1","revision":"be3557fef1e193383818551bf3f804cc0cc3aca9","parents":["b1c7bf701c232eb0039da2321291636c6815e061"],"ref":"refs/changes/60/260/1","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1470774763,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470953633,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1470774770,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/verror.js","line":283,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Is there a particular reason for the non-strict equivalency check here?"},{"file":"lib/verror.js","line":283,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I generally don\u0027t use \u003d\u003d\u003d when I know that one of the values is not falsey, but there\u0027s not a particular reason for that (other than allowing the use of \"\u003d\u003d\u003d\" to signal that I specifically am looking at potentially-falsey values).  In this case, since we know it\u0027s a non-empty string, it cannot make a difference."},{"file":"lib/verror.js","line":338,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Unrelated to this repo specifically, but I wonder if assert-plus should have assert.error, assert.arrayOfError, etc."},{"file":"lib/verror.js","line":338,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Seems reasonable."},{"file":"test/tst.verror.js","line":18,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Possible to specify this as v6.x or v0.6, as I\u0027m not sure which that refers to."},{"file":"test/tst.werror.js","line":16,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is this supposed to be v0.6 or v6.x?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"ADDED","insertions":4,"deletions":0},{"file":"LICENSE","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"Makefile","type":"MODIFIED","insertions":7,"deletions":-9},{"file":"Makefile.targ","type":"MODIFIED","insertions":57,"deletions":-25},{"file":"README.md","type":"MODIFIED","insertions":365,"deletions":-70},{"file":"deps/catest","type":"ADDED","insertions":1,"deletions":0},{"file":"examples/info.js","type":"ADDED","insertions":31,"deletions":0},{"file":"examples/levels-verror.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"examples/multierror.js","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/verror.js","type":"MODIFIED","insertions":261,"deletions":-100},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"test/common.js","type":"ADDED","insertions":27,"deletions":0},{"file":"test/tst.common.js","type":"ADDED","insertions":167,"deletions":0},{"file":"test/tst.context.js","fileOld":"tests/tst.context.js","type":"RENAMED","insertions":1,"deletions":-1},{"file":"test/tst.info.js","type":"ADDED","insertions":75,"deletions":0},{"file":"test/tst.inherit.js","fileOld":"tests/tst.inherit.js","type":"RENAMED","insertions":27,"deletions":-10},{"file":"test/tst.multierror.js","type":"ADDED","insertions":57,"deletions":0},{"file":"test/tst.verror.js","type":"ADDED","insertions":102,"deletions":0},{"file":"test/tst.werror.js","type":"ADDED","insertions":127,"deletions":0},{"file":"tests/tst.serror.js","type":"DELETED","insertions":0,"deletions":-66},{"file":"tests/tst.verror.js","type":"DELETED","insertions":0,"deletions":-169},{"file":"tests/tst.werror.js","type":"DELETED","insertions":0,"deletions":-179}],"sizeInsertions":1324,"sizeDeletions":-633},{"number":"2","revision":"fb522bf39f3762a06dd52d1933035cca4497b781","parents":["b1c7bf701c232eb0039da2321291636c6815e061"],"ref":"refs/changes/60/260/2","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1470955066,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470955250,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470955250,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1470955069,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"ADDED","insertions":4,"deletions":0},{"file":"LICENSE","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"Makefile","type":"MODIFIED","insertions":7,"deletions":-9},{"file":"Makefile.targ","type":"MODIFIED","insertions":57,"deletions":-25},{"file":"README.md","type":"MODIFIED","insertions":365,"deletions":-70},{"file":"deps/catest","type":"ADDED","insertions":1,"deletions":0},{"file":"examples/info.js","type":"ADDED","insertions":31,"deletions":0},{"file":"examples/levels-verror.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"examples/multierror.js","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/verror.js","type":"MODIFIED","insertions":261,"deletions":-100},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"test/common.js","type":"ADDED","insertions":27,"deletions":0},{"file":"test/tst.common.js","type":"ADDED","insertions":167,"deletions":0},{"file":"test/tst.context.js","fileOld":"tests/tst.context.js","type":"RENAMED","insertions":1,"deletions":-1},{"file":"test/tst.info.js","type":"ADDED","insertions":75,"deletions":0},{"file":"test/tst.inherit.js","fileOld":"tests/tst.inherit.js","type":"RENAMED","insertions":27,"deletions":-10},{"file":"test/tst.multierror.js","type":"ADDED","insertions":57,"deletions":0},{"file":"test/tst.verror.js","type":"ADDED","insertions":102,"deletions":0},{"file":"test/tst.werror.js","type":"ADDED","insertions":127,"deletions":0},{"file":"tests/tst.serror.js","type":"DELETED","insertions":0,"deletions":-66},{"file":"tests/tst.verror.js","type":"DELETED","insertions":0,"deletions":-169},{"file":"tests/tst.werror.js","type":"DELETED","insertions":0,"deletions":-179}],"sizeInsertions":1324,"sizeDeletions":-633},{"number":"3","revision":"08fa8939cc744dfce40ef1f1b9cad0d454b4b2ce","parents":["b1c7bf701c232eb0039da2321291636c6815e061"],"ref":"refs/changes/60/260/3","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1470957545,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1470957560,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470955250,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470955250,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1470955069,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"ADDED","insertions":4,"deletions":0},{"file":"LICENSE","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"Makefile","type":"MODIFIED","insertions":7,"deletions":-9},{"file":"Makefile.targ","type":"MODIFIED","insertions":57,"deletions":-25},{"file":"README.md","type":"MODIFIED","insertions":365,"deletions":-70},{"file":"deps/catest","type":"ADDED","insertions":1,"deletions":0},{"file":"examples/info.js","type":"ADDED","insertions":31,"deletions":0},{"file":"examples/levels-verror.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"examples/multierror.js","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/verror.js","type":"MODIFIED","insertions":261,"deletions":-100},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"test/common.js","type":"ADDED","insertions":27,"deletions":0},{"file":"test/tst.common.js","type":"ADDED","insertions":167,"deletions":0},{"file":"test/tst.context.js","fileOld":"tests/tst.context.js","type":"RENAMED","insertions":1,"deletions":-1},{"file":"test/tst.info.js","type":"ADDED","insertions":75,"deletions":0},{"file":"test/tst.inherit.js","fileOld":"tests/tst.inherit.js","type":"RENAMED","insertions":27,"deletions":-10},{"file":"test/tst.multierror.js","type":"ADDED","insertions":57,"deletions":0},{"file":"test/tst.verror.js","type":"ADDED","insertions":102,"deletions":0},{"file":"test/tst.werror.js","type":"ADDED","insertions":127,"deletions":0},{"file":"tests/tst.serror.js","type":"DELETED","insertions":0,"deletions":-66},{"file":"tests/tst.verror.js","type":"DELETED","insertions":0,"deletions":-169},{"file":"tests/tst.werror.js","type":"DELETED","insertions":0,"deletions":-179}],"sizeInsertions":1324,"sizeDeletions":-633}],"allReviewers":[{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}]}