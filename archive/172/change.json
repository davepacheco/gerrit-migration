{"project":"joyent/node-smartdc-auth","branch":"master","topic":"PUBAPI-1299","id":"I3f0b829a3e8a9e87b95b3e0fded48428b4762da6","number":"172","subject":"PUBAPI-1299 want nicer API for smartdc-auth Reviewed by: Trent Mick \u003ctrent.mick@joyent.com\u003e Reviewed by: Cody Mello \u003ccody.mello@joyent.com\u003e","owner":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"url":"https://cr.joyent.us/172","commitMessage":"PUBAPI-1299 want nicer API for smartdc-auth\nReviewed by: Trent Mick \u003ctrent.mick@joyent.com\u003e\nReviewed by: Cody Mello \u003ccody.mello@joyent.com\u003e\n","createdOn":1469828667,"lastUpdated":1471570850,"open":false,"status":"MERGED","comments":[{"timestamp":1469828667,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 1."},{"timestamp":1469828676,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Topic set to PUBAPI-1299"},{"timestamp":1469828688,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1469828791,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 2."},{"timestamp":1469828831,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1469833705,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 3."},{"timestamp":1469833728,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1469841827,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 4."},{"timestamp":1469841860,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1471029799,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4: Code-Review+1\n\n(5 comments)\n\nLooks lovely."},{"timestamp":1471030224,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4:\n\nI was wrong on the lib/index.js comment about the diff being mostly whitespace. I see that it is a lot of re-org and code delete.\nLGTM.\n\nThe README might benefit from:\n- change the first intro example to the current preferred real usage\n- drop obsolete (or just out dated?) SDC_CLI_ACCOUNT example usage\n- perhaps s/SDC/Triton/ as appropriate"},{"timestamp":1471037587,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 4:\n\n(4 comments)\n\nI\u0027ve also realised that the README wasn\u0027t quite finished in some other places (like option to KeyRing#createRequestSigner), so I\u0027ve done this and reworded a bunch of it. This also includes a change to use mod_path.basename rather than a hacky replace() and removes the use of the \"const\" keyword (which is an ES6-ism that upon further discussion seems best avoided)"},{"timestamp":1471037602,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 5."},{"timestamp":1471037629,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1471294883,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 6."},{"timestamp":1471294920,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing-1\n\n(2 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1471295005,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 7."},{"timestamp":1471295028,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1471476200,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 7: Code-Review+1 Integration-Approval+1\n\nlovely"},{"timestamp":1471564691,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 7: Code-Review+1\n\n(10 comments)\n\nLooks good to me, just have several comments. I also noticed that you used \"(c)\" in the copyright notices. We\u0027ve been moving to writing them without that, right?"},{"timestamp":1471568842,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 8."},{"timestamp":1471568846,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 7:\n\n(2 comments)"},{"timestamp":1471568864,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1471569145,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 8: Code-Review+1"},{"timestamp":1471570802,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 8: Integration-Approval+1"},{"timestamp":1471570850,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Alex Wilson"}],"currentPatchSet":{"number":"8","revision":"3f0b829a3e8a9e87b95b3e0fded48428b4762da6","parents":["01c407852410e07bd9d2de638c30a4426579aa3a"],"ref":"refs/changes/72/172/8","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1471568842,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1471568864,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1471569145,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1471570802,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"SUBM","value":"1","grantedOn":1471570850,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"README.md","type":"MODIFIED","insertions":269,"deletions":-43},{"file":"lib/errors.js","type":"ADDED","insertions":57,"deletions":0},{"file":"lib/index.js","type":"MODIFIED","insertions":269,"deletions":-899},{"file":"lib/keypair.js","type":"ADDED","insertions":234,"deletions":0},{"file":"lib/keyring.js","type":"ADDED","insertions":287,"deletions":0},{"file":"lib/kr-agent.js","type":"ADDED","insertions":164,"deletions":0},{"file":"lib/kr-file.js","type":"ADDED","insertions":167,"deletions":0},{"file":"lib/kr-homedir.js","type":"ADDED","insertions":330,"deletions":0},{"file":"lib/krplugin.js","type":"ADDED","insertions":44,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-7},{"file":"test/fs-keys.test.js","type":"MODIFIED","insertions":52,"deletions":-8},{"file":"test/signers.test.js","type":"MODIFIED","insertions":40,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":15,"deletions":0},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":12,"deletions":0}],"sizeInsertions":1950,"sizeDeletions":-960},"patchSets":[{"number":"1","revision":"5888408e6569fd4adcb93be5cab60f74853aa8f2","parents":["01c407852410e07bd9d2de638c30a4426579aa3a"],"ref":"refs/changes/72/172/1","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1469828667,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1469828688,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/kr-homedir.js","line":213,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: identifer kp hides an identifier in a parent scope"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":116,"deletions":0},{"file":"lib/errors.js","type":"ADDED","insertions":57,"deletions":0},{"file":"lib/index.js","type":"MODIFIED","insertions":266,"deletions":-899},{"file":"lib/keypair.js","type":"ADDED","insertions":229,"deletions":0},{"file":"lib/keyring.js","type":"ADDED","insertions":263,"deletions":0},{"file":"lib/kr-agent.js","type":"ADDED","insertions":162,"deletions":0},{"file":"lib/kr-homedir.js","type":"ADDED","insertions":318,"deletions":0},{"file":"lib/krplugin.js","type":"ADDED","insertions":44,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"test/fs-keys.test.js","type":"MODIFIED","insertions":40,"deletions":-8},{"file":"test/signers.test.js","type":"MODIFIED","insertions":40,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":15,"deletions":0},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":12,"deletions":0}],"sizeInsertions":1568,"sizeDeletions":-914},{"number":"2","revision":"6b32dacc59c6c95e8d7ced9e144949ca0a2d7cc5","parents":["01c407852410e07bd9d2de638c30a4426579aa3a"],"ref":"refs/changes/72/172/2","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1469828791,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1469828831,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":116,"deletions":0},{"file":"lib/errors.js","type":"ADDED","insertions":57,"deletions":0},{"file":"lib/index.js","type":"MODIFIED","insertions":266,"deletions":-899},{"file":"lib/keypair.js","type":"ADDED","insertions":229,"deletions":0},{"file":"lib/keyring.js","type":"ADDED","insertions":263,"deletions":0},{"file":"lib/kr-agent.js","type":"ADDED","insertions":162,"deletions":0},{"file":"lib/kr-homedir.js","type":"ADDED","insertions":318,"deletions":0},{"file":"lib/krplugin.js","type":"ADDED","insertions":44,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"test/fs-keys.test.js","type":"MODIFIED","insertions":40,"deletions":-8},{"file":"test/signers.test.js","type":"MODIFIED","insertions":40,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":15,"deletions":0},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":12,"deletions":0}],"sizeInsertions":1568,"sizeDeletions":-914},{"number":"3","revision":"c0a28d04f16f40b18d836bc63c94cb8ce744b1ae","parents":["01c407852410e07bd9d2de638c30a4426579aa3a"],"ref":"refs/changes/72/172/3","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1469833705,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1469833728,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":130,"deletions":0},{"file":"lib/errors.js","type":"ADDED","insertions":57,"deletions":0},{"file":"lib/index.js","type":"MODIFIED","insertions":266,"deletions":-899},{"file":"lib/keypair.js","type":"ADDED","insertions":231,"deletions":0},{"file":"lib/keyring.js","type":"ADDED","insertions":263,"deletions":0},{"file":"lib/kr-agent.js","type":"ADDED","insertions":162,"deletions":0},{"file":"lib/kr-homedir.js","type":"ADDED","insertions":322,"deletions":0},{"file":"lib/krplugin.js","type":"ADDED","insertions":44,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"test/fs-keys.test.js","type":"MODIFIED","insertions":40,"deletions":-8},{"file":"test/signers.test.js","type":"MODIFIED","insertions":40,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":15,"deletions":0},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":12,"deletions":0}],"sizeInsertions":1588,"sizeDeletions":-914},{"number":"4","revision":"10093c11e7f04848f1bd00c12b2e3357afad9740","parents":["01c407852410e07bd9d2de638c30a4426579aa3a"],"ref":"refs/changes/72/172/4","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1469841827,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1469841860,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1471029799,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"README.md","line":60,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"nit: s/keypairs/keyPairs/ ?   E.g. given the pattern with `keyDir` and `sshAgentOpts` above."},{"file":"README.md","line":60,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Done"},{"file":"lib/errors.js","line":41,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"did you consider VError usage?"},{"file":"lib/errors.js","line":41,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"I\u0027m not opposed to the idea -- this is just how this code already was from before (this was taken out of the old index.js)"},{"file":"lib/errors.js","line":47,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"VError has a MultiError. Not sure if that gives the same effect you want tho."},{"file":"lib/errors.js","line":47,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"This is kind of a special case in that it doesn\u0027t actually want to keep separate messages/stacks from each of the errors, and it doesn\u0027t want to only show the first one -- since they\u0027re all the same kind of error it can actually merge them together into a message about what it tried that\u0027s more useful to the user. If we made it a subclass of MultiError with special logic to do this when you access its message or toString() it for printing that might be equivalent..."},{"file":"lib/index.js","line":1,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"ooh, reindenting with tabs. Is there a way in gerrit to see the non-ws diffs, do you know?"},{"file":"lib/keyring.js","line":36,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Agent plugin isn\u0027t preferable to homedir?\nThe `cliSigner` before this change would attempt the agent before homedir.\n\nAh, I see \"* Always prefer already-unlocked keys. */\" below that presumably handles this."},{"file":"lib/keyring.js","line":36,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"right, the idea is that an agent key will beat a locked disk key, but an unlocked disk key will beat an agent key"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":130,"deletions":0},{"file":"lib/errors.js","type":"ADDED","insertions":57,"deletions":0},{"file":"lib/index.js","type":"MODIFIED","insertions":266,"deletions":-899},{"file":"lib/keypair.js","type":"ADDED","insertions":231,"deletions":0},{"file":"lib/keyring.js","type":"ADDED","insertions":263,"deletions":0},{"file":"lib/kr-agent.js","type":"ADDED","insertions":162,"deletions":0},{"file":"lib/kr-homedir.js","type":"ADDED","insertions":328,"deletions":0},{"file":"lib/krplugin.js","type":"ADDED","insertions":44,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"test/fs-keys.test.js","type":"MODIFIED","insertions":40,"deletions":-8},{"file":"test/signers.test.js","type":"MODIFIED","insertions":40,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":15,"deletions":0},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":12,"deletions":0}],"sizeInsertions":1594,"sizeDeletions":-914},{"number":"5","revision":"ec9a6eb4d7b9bd7526019f7c4d6fca904ffc4997","parents":["01c407852410e07bd9d2de638c30a4426579aa3a"],"ref":"refs/changes/72/172/5","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1471037602,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1471037629,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":251,"deletions":-39},{"file":"lib/errors.js","type":"ADDED","insertions":57,"deletions":0},{"file":"lib/index.js","type":"MODIFIED","insertions":266,"deletions":-899},{"file":"lib/keypair.js","type":"ADDED","insertions":231,"deletions":0},{"file":"lib/keyring.js","type":"ADDED","insertions":263,"deletions":0},{"file":"lib/kr-agent.js","type":"ADDED","insertions":162,"deletions":0},{"file":"lib/kr-homedir.js","type":"ADDED","insertions":328,"deletions":0},{"file":"lib/krplugin.js","type":"ADDED","insertions":44,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"test/fs-keys.test.js","type":"MODIFIED","insertions":40,"deletions":-8},{"file":"test/signers.test.js","type":"MODIFIED","insertions":40,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":15,"deletions":0},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":12,"deletions":0}],"sizeInsertions":1715,"sizeDeletions":-953},{"number":"6","revision":"7c32f566d5003d659be3991ecf1e62c7910a44f9","parents":["01c407852410e07bd9d2de638c30a4426579aa3a"],"ref":"refs/changes/72/172/6","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1471294883,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1471294920,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/kr-file.js","line":88,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: variable is declared but never referenced: skip"},{"file":"lib/kr-file.js","line":100,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: undeclared identifier: kcb"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":265,"deletions":-39},{"file":"lib/errors.js","type":"ADDED","insertions":57,"deletions":0},{"file":"lib/index.js","type":"MODIFIED","insertions":266,"deletions":-899},{"file":"lib/keypair.js","type":"ADDED","insertions":231,"deletions":0},{"file":"lib/keyring.js","type":"ADDED","insertions":279,"deletions":0},{"file":"lib/kr-agent.js","type":"ADDED","insertions":164,"deletions":0},{"file":"lib/kr-file.js","type":"ADDED","insertions":164,"deletions":0},{"file":"lib/kr-homedir.js","type":"ADDED","insertions":330,"deletions":0},{"file":"lib/krplugin.js","type":"ADDED","insertions":44,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"test/fs-keys.test.js","type":"MODIFIED","insertions":52,"deletions":-8},{"file":"test/signers.test.js","type":"MODIFIED","insertions":40,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":15,"deletions":0},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":12,"deletions":0}],"sizeInsertions":1925,"sizeDeletions":-953},{"number":"7","revision":"f7a19b5af0ab5804cd010fd2ddf14d10c298eaa1","parents":["01c407852410e07bd9d2de638c30a4426579aa3a"],"ref":"refs/changes/72/172/7","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1471295005,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1471564691,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1471295028,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1471476200,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1471476200,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"Makefile","line":12,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I think that you need to replace this with:\n\nJSSTYLE_FLAGS \u003d -f tools/jsstyle.conf\n\nI don\u0027t think it will default to your jsstyle.conf file."},{"file":"Makefile","line":12,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"That\u0027s pretty great. Also has been here for a long time"},{"file":"README.md","line":86,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"s/SmartDC/Triton/"},{"file":"README.md","line":92,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"This README alternates between \"sub-user\" and \"subuser\". I think we should just use \"subuser\"."},{"file":"README.md","line":121,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"\"Array of Strings\""},{"file":"lib/index.js","line":44,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Can you leave a comment in the exports object that these are the legacy API and here for backwards compatibility?"},{"file":"lib/keypair.js","line":55,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Provide a message here. Something like \u0027opts.private should be a PrivateKey\u0027."},{"file":"lib/keyring.js","line":61,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Is there a reason you only rethrow the error when it\u0027s a user-requested plugin? Shouldn\u0027t you also throw if there\u0027s a problem with the default list instead of swallowing the error?"},{"file":"lib/keyring.js","line":61,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Added a comment to explain this."},{"file":"lib/kr-file.js","line":106,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Maybe turn this into:\n\nif (!stats.isFile() {\n    cb(...);\n    return;\n}\n\nif (size \u003e\u003d MAX_PUBKEY_SIZE) {\n    cb(...);\n    return;\n}\n\nSo that you can provide two distinct, clearer errors?"},{"file":"package.json","line":3,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Change SmartDataCenter to Triton or Joyent."},{"file":"tools/jsstyle.conf","line":8,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Update copyright"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":265,"deletions":-39},{"file":"lib/errors.js","type":"ADDED","insertions":57,"deletions":0},{"file":"lib/index.js","type":"MODIFIED","insertions":266,"deletions":-899},{"file":"lib/keypair.js","type":"ADDED","insertions":231,"deletions":0},{"file":"lib/keyring.js","type":"ADDED","insertions":279,"deletions":0},{"file":"lib/kr-agent.js","type":"ADDED","insertions":164,"deletions":0},{"file":"lib/kr-file.js","type":"ADDED","insertions":163,"deletions":0},{"file":"lib/kr-homedir.js","type":"ADDED","insertions":330,"deletions":0},{"file":"lib/krplugin.js","type":"ADDED","insertions":44,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"test/fs-keys.test.js","type":"MODIFIED","insertions":52,"deletions":-8},{"file":"test/signers.test.js","type":"MODIFIED","insertions":40,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":15,"deletions":0},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":12,"deletions":0}],"sizeInsertions":1924,"sizeDeletions":-953},{"number":"8","revision":"3f0b829a3e8a9e87b95b3e0fded48428b4762da6","parents":["01c407852410e07bd9d2de638c30a4426579aa3a"],"ref":"refs/changes/72/172/8","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1471568842,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1471569145,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1471570802,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"SUBM","value":"1","grantedOn":1471570850,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1471568864,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"README.md","type":"MODIFIED","insertions":269,"deletions":-43},{"file":"lib/errors.js","type":"ADDED","insertions":57,"deletions":0},{"file":"lib/index.js","type":"MODIFIED","insertions":269,"deletions":-899},{"file":"lib/keypair.js","type":"ADDED","insertions":234,"deletions":0},{"file":"lib/keyring.js","type":"ADDED","insertions":287,"deletions":0},{"file":"lib/kr-agent.js","type":"ADDED","insertions":164,"deletions":0},{"file":"lib/kr-file.js","type":"ADDED","insertions":167,"deletions":0},{"file":"lib/kr-homedir.js","type":"ADDED","insertions":330,"deletions":0},{"file":"lib/krplugin.js","type":"ADDED","insertions":44,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-7},{"file":"test/fs-keys.test.js","type":"MODIFIED","insertions":52,"deletions":-8},{"file":"test/signers.test.js","type":"MODIFIED","insertions":40,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":15,"deletions":0},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":12,"deletions":0}],"sizeInsertions":1950,"sizeDeletions":-960}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}]}