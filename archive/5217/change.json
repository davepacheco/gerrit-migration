{"project":"joyent/smartos-live","branch":"master","id":"I4725c580158d35fb20fcbdb3d5909b9adfde6719","number":"5217","subject":"OS-7436 vminfod can be overwhelmed by ZFS sysevents Reviewed by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e Approved by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e","owner":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"url":"https://cr.joyent.us/5217","commitMessage":"OS-7436 vminfod can be overwhelmed by ZFS sysevents\nReviewed by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e\nApproved by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e\n","createdOn":1544484129,"lastUpdated":1546883669,"open":false,"status":"MERGED","comments":[{"timestamp":1544484129,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 1."},{"timestamp":1544484133,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit b82d7e46147341b2d8f82cdcc4ee618d315bd127\n    \n    initial commit"},{"timestamp":1544484186,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1544549093,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1544549097,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit e4238694dd7cc4bdcabe08644e93ae573472e98e\n    \n    initial commit"},{"timestamp":1544549298,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2:\n\n\"make check\" passed ok"},{"timestamp":1545340593,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 2:\n\n(5 comments)"},{"timestamp":1545894942,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 2:\n\n(5 comments)"},{"timestamp":1545894987,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 3."},{"timestamp":1545894990,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 81fdf16db1a1cf51a01644b331dba403895198ca\n    \n    typos"},{"timestamp":1545895021,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1545895024,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit e1175d4d33aca5a4232646e992a02026a8203112\n    \n    typos\n    \n    commit e0193ff102cf4215680dbff1a79fb9adb0dc667f\n    \n    initial commit"},{"timestamp":1545895041,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1545895073,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1545920586,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 4:\n\n(3 comments)"},{"timestamp":1546459899,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 5."},{"timestamp":1546459902,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit 4ec279696625cce535d5d1b4172799fb5eabe7db\n    \n    changes based on mgerdts review (zfs list logic speed up)"},{"timestamp":1546459920,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 6: Patch Set 5 was rebased."},{"timestamp":1546459925,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit f325d2e6009ec9bc62693a1d2a7a2079f2e9acd6\n    \n    changes based on mgerdts review (zfs list logic speed up)\n    \n    commit 12e37dd00c430c98bca616da495ab3bf717be8ce\n    \n    typos\n    \n    commit 2afb3b08151a479975bb7ed52ce83d120dfb3e82\n    \n    initial commit"},{"timestamp":1546459952,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1546459973,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1546460016,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 6:\n\nUpdated ZFS list logic in vminfod to:\n\n1. only update/list the dataset that has been modified\n2. use `-d 1` to limit the list depth to 1\n\nobj.depth support was added and is currently only in used by the vminfod consumer of `getDatasets`.\n\nThis platform was built and ran on COAL - all tests pass."},{"timestamp":1546540362,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1546545397,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1546550369,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1546882293,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 7."},{"timestamp":1546882297,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 7:\n\nNew commits:\n    \n    commit cd09789f7efb77719af5686294a550ad958f3ff9\n    \n    -r|-d N mutually exclusive"},{"timestamp":1546882347,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1546882595,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 7:\n\n-d N|-r  now made mutually exclusive in getDatasets.\n\nthis patchset was built and tested on COAL - everything works as expected and all tests pass."},{"timestamp":1546883169,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 7:\n\n(1 comment)"},{"timestamp":1546883269,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 7:\n\n(1 comment)"},{"timestamp":1546883334,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 8."},{"timestamp":1546883338,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 8:\n\nNew commits:\n    \n    commit a04ff4eab3335617525b2b5604495c48ea3ddeeb\n    \n    update copyright header"},{"timestamp":1546883387,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1546883528,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 8: Code-Review+1 Integration-Approval+1"},{"timestamp":1546883625,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 9: Commit message was updated."},{"timestamp":1546883669,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Dave Eddy"}],"currentPatchSet":{"number":"9","revision":"4725c580158d35fb20fcbdb3d5909b9adfde6719","parents":["47c8d48c0ff4e89136990052262d3ef4f34e1e91"],"ref":"refs/changes/17/5217/9","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1546883625,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1546883387,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1546883528,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1546883528,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"SUBM","value":"1","grantedOn":1546883669,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"src/vm/node_modules/vminfod/vminfod.js","type":"MODIFIED","insertions":306,"deletions":-150},{"file":"src/vm/node_modules/vmload/vmload-datasets.js","type":"MODIFIED","insertions":65,"deletions":-20},{"file":"src/vm/tests/test-vmload-datasets.js","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":374,"sizeDeletions":-172},"patchSets":[{"number":"1","revision":"64b28509e2abfb9f4f25d0a8e0b6f9deb93c3fcc","parents":["5bbd31725fc1d57535b0b605a3ca657bde1333e1"],"ref":"refs/changes/17/5217/1","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1544484129,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1544484186,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/node_modules/vminfod/vminfod.js","type":"MODIFIED","insertions":310,"deletions":-149}],"sizeInsertions":310,"sizeDeletions":-149},{"number":"2","revision":"e95f86feff6e9871c655d1f9e432e01dee7c274f","parents":["c7af5452c268ca85c6ee82b7b2ec2761732fbf9f"],"ref":"refs/changes/17/5217/2","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1544549093,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1544484186,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/vm/node_modules/vminfod/vminfod.js","line":2168,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"incoming"},{"file":"src/vm/node_modules/vminfod/vminfod.js","line":2168,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Done"},{"file":"src/vm/node_modules/vminfod/vminfod.js","line":2193,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"below"},{"file":"src/vm/node_modules/vminfod/vminfod.js","line":2193,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Done"},{"file":"src/vm/node_modules/vminfod/vminfod.js","line":2368,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"I don\u0027t think we care about parts[3].  What action do we need to take if zones/$uuid/data is snapshotted, rolled back, has a snapshot deleted, etc?"},{"file":"src/vm/node_modules/vminfod/vminfod.js","line":2368,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"This if statement is meant to determine if we ignore the event.  If zones/$uuid/data is affected, then it will *not* be ignored, and be processed normally by vminfod below."},{"file":"src/vm/node_modules/vminfod/vminfod.js","line":2368,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Done"},{"file":"src/vm/node_modules/vminfod/vminfod.js","line":2386,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Doesn\u0027t this set zonepath to \"zones\" for \"zones/$uuid-disk0\"?  If so, it looks like this will turn into `zfs list [options] -r zones`.  But maybe I have made a wrong turn.\n\nvmload-datasets.js:336: _options.parent is set to \"zones\", _options passed to options in getZfsList.\nvmload-datasets:370 task.parent set\nvmload-datasets:596: [\u0027-r\u0027, \u0027zones\u0027] added\n\nAt vmload-datasets:596, should we be using [\u0027-d\u0027, N] instead of \u0027-r\u0027 to only list to the maximum depth that could be interesting?"},{"file":"src/vm/node_modules/vminfod/vminfod.js","line":2386,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"I\u0027ll have to look into and test this more.  Honestly, I don\u0027t know... this is zfs listing I have inherited in this project and I don\u0027t personally know the correct behavior for this."},{"file":"src/vm/node_modules/vminfod/vminfod.js","line":2386,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"In case it wasn\u0027t obvious, my concern is that a change to zones/$uuid-disk0 will trigger looking at every dataset in the pool.  For systems with lots of datasets, this could trigger the scenario we are trying to avoid here.  It\u0027s most likely to be triggered by migration (rfd34) or a customer\u0027s use of zrepl or similar scripts that frequently create and destroy snapshots."},{"file":"src/vm/node_modules/vminfod/vminfod.js","line":2401,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"if (!err) {\n    copy(cache);\n}\nfinish();\n\nSimilar pattern below."},{"file":"src/vm/node_modules/vminfod/vminfod.js","line":2401,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Unless you feel strongly about it, I personally prefer the common JavaScript pattern we use of checking \"if (err) { ... }\", even if it results in some duplicated code.  It\u0027s simple imo to know that the first thing that happens in a function block is a check of \"err\" and then (typically) an exit-early."},{"file":"src/vm/node_modules/vminfod/vminfod.js","line":2401,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/node_modules/vminfod/vminfod.js","type":"MODIFIED","insertions":310,"deletions":-149}],"sizeInsertions":310,"sizeDeletions":-149},{"number":"3","revision":"bdc1582896f2ef6675f51580fd1837aecfb2b5f6","parents":["c7af5452c268ca85c6ee82b7b2ec2761732fbf9f"],"ref":"refs/changes/17/5217/3","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1545894987,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1545895041,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/node_modules/vminfod/vminfod.js","type":"MODIFIED","insertions":310,"deletions":-149}],"sizeInsertions":310,"sizeDeletions":-149},{"number":"4","revision":"eea5673826d0d66ceb9ecb1ac79882d722aab6cd","parents":["dc37bb94858cf303642eaade6f761f5972faad00"],"ref":"refs/changes/17/5217/4","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1545895021,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1545895073,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/node_modules/vminfod/vminfod.js","type":"MODIFIED","insertions":310,"deletions":-149}],"sizeInsertions":310,"sizeDeletions":-149},{"number":"5","revision":"3a916623e4732e39db65436583102dbfafc63bdd","parents":["dc37bb94858cf303642eaade6f761f5972faad00"],"ref":"refs/changes/17/5217/5","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1546459899,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1546459952,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/node_modules/vminfod/vminfod.js","type":"MODIFIED","insertions":298,"deletions":-150},{"file":"src/vm/node_modules/vmload/vmload-datasets.js","type":"MODIFIED","insertions":61,"deletions":-19}],"sizeInsertions":359,"sizeDeletions":-169},{"number":"6","revision":"4c19e0764a8b7e2ce6b145a5db25af148b237e0c","parents":["47c8d48c0ff4e89136990052262d3ef4f34e1e91"],"ref":"refs/changes/17/5217/6","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1546459920,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1546459973,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/vm/node_modules/vmload/vmload-datasets.js","line":618,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"These two options are mutually exclusive.  Should probably assert that at most one is set."},{"file":"src/vm/node_modules/vmload/vmload-datasets.js","line":618,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"So, just from this comment I realized I had mistakenly put depth set to 1 in vminfod when I wanted a depth of 0.  However, which options are you saying are exclusive: -d and -r, or .depth and .parent?\n\nI did some testing on my home machine and found:\n\n # zfs list -H -o name | head \n goliath\n goliath/backups\n goliath/backups/dave\n ...\n # zfs list -H -o name goliath\n goliath\n # zfs list -H -o name -r -d 0  goliath\n goliath\n # zfs list -H -o name -r -d 1 goliath\n goliath\n goliath/backups\n goliath/certs\n goliath/entertainment\n goliath/public\n\nBasically, there are a couple of interesting things to note here:\n\n1. List without a dataset/pool name (called \"parent\" in this context) acts like `-r` was passed.\n2. List with a dataset/pool name only shows that single dataset unless `-r` was passed\n3. Passing `-d` seems to override `-r`.  so `-r -d 0 \u003cdataset\u003e` has the same effect as just passing `\u003cdataset\u003e`\n\nFor vminfod, I just want to get information about the dataset affected (as seen from the sysevent).  Setting depth to 1 was an off-by-one error on my part as it should have been 0, but besides that, what is the proper course of action for this function?\n\nI\u0027m thinking something like this:\n\n if (options.hasOwnProperty(\u0027depth\u0027)) {\n   args.push(\u0027-d\u0027);\n   args.push(options.depth.toString());\n } else {\n   args.push(\u0027-r\u0027);\n }\n \n if (options.hasOwnProperty(\u0027parent\u0027)) {\n   args.push(options.parent);\n }\n\nThis way, `-d N` or `-r` is only ever specified - not both and not neither.  Also, the \"parent\" dataset is put to the end of the command arguments if it is set.\n\nWith this, existing code should work as is (i.e.: code that doesn\u0027t set \"depth\"), and vminfod will work by setting (for example):\n\n {\n   \"depth\": 0,\n   \"parent\": \"/zones/$uuid\"\n }\n\nWhich will result in:\n\n zfs list ... -d 0 zones/$uuid"},{"file":"src/vm/node_modules/vmload/vmload-datasets.js","line":618,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"The man page says `zfs list [-r|-d depth]`, implying they are exclusive.  I figured it would make more sense to catch that somewhere where we would get a stack trace rather than wall of text on stderr from zfs.\n\nThat being said, experimentation shows that these are equivalent\n\nzfs list -r -d depth [dataset]\nzfs list -d depth [dataset]\n\nAs are these:\n\nzfs list [dataset]\nzfs list -d 0 [dataset]\n\nIt seems rather odd to do \u0027zfs list -d 0\u0027 when there\u0027s a long-established equivalent that is shorter.  Probably doesn\u0027t matter much either way.  If it simplifies the vminfod code to have a more complex zfs command, I\u0027m on board."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/node_modules/vminfod/vminfod.js","type":"MODIFIED","insertions":298,"deletions":-150},{"file":"src/vm/node_modules/vmload/vmload-datasets.js","type":"MODIFIED","insertions":61,"deletions":-19}],"sizeInsertions":359,"sizeDeletions":-169},{"number":"7","revision":"b9311df7cbe157117e39f80ddd73922212df99cb","parents":["47c8d48c0ff4e89136990052262d3ef4f34e1e91"],"ref":"refs/changes/17/5217/7","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1546882293,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1546882347,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/vm/tests/test-vmload-datasets.js","line":2,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"2019"},{"file":"src/vm/tests/test-vmload-datasets.js","line":2,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"!! I\u0027m usually so good about doing this. ugh. will change, ty!"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/node_modules/vminfod/vminfod.js","type":"MODIFIED","insertions":306,"deletions":-150},{"file":"src/vm/node_modules/vmload/vmload-datasets.js","type":"MODIFIED","insertions":65,"deletions":-20},{"file":"src/vm/tests/test-vmload-datasets.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":373,"sizeDeletions":-171},{"number":"8","revision":"458949bda96d7edb78f96ac46c805336e2bc499b","parents":["47c8d48c0ff4e89136990052262d3ef4f34e1e91"],"ref":"refs/changes/17/5217/8","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1546883334,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1546883387,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1546883528,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1546883528,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/node_modules/vminfod/vminfod.js","type":"MODIFIED","insertions":306,"deletions":-150},{"file":"src/vm/node_modules/vmload/vmload-datasets.js","type":"MODIFIED","insertions":65,"deletions":-20},{"file":"src/vm/tests/test-vmload-datasets.js","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":374,"sizeDeletions":-172},{"number":"9","revision":"4725c580158d35fb20fcbdb3d5909b9adfde6719","parents":["47c8d48c0ff4e89136990052262d3ef4f34e1e91"],"ref":"refs/changes/17/5217/9","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1546883625,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1546883387,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1546883669,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1546883528,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1546883528,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"src/vm/node_modules/vminfod/vminfod.js","type":"MODIFIED","insertions":306,"deletions":-150},{"file":"src/vm/node_modules/vmload/vmload-datasets.js","type":"MODIFIED","insertions":65,"deletions":-20},{"file":"src/vm/tests/test-vmload-datasets.js","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":374,"sizeDeletions":-172}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}]}