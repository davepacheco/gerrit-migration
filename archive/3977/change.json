{"project":"joyent/node-triton","branch":"master","id":"Ic86804cfe416360d6918a476f05de2c5cdd743e5","number":"3977","subject":"TRITON-52 x-DC image copy Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"url":"https://cr.joyent.us/3977","commitMessage":"TRITON-52 x-DC image copy\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1526670673,"lastUpdated":1530315864,"open":false,"status":"MERGED","comments":[{"timestamp":1526670673,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 1."},{"timestamp":1526670675,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 576ab7abd72caa2b938d5c4b0af0ad6b52b5f79d\n    \n    TRITON-52 x-DC image copy"},{"timestamp":1526670705,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1527632871,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 2."},{"timestamp":1527632872,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 08c2c95eceb68625f3c406709d6dc8e22ab6f1b8\n    \n    use \u0027datacenter\u0027 instead of \u0027dc\u0027, updates from CR"},{"timestamp":1527632903,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1529605400,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 3: Patch Set 2 was rebased."},{"timestamp":1529605402,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 4492a939875de4148acf4738b086424bfbab010e\n    \n    use \u0027datacenter\u0027 instead of \u0027dc\u0027, updates from CR\n    \n    commit 7a205bf2617bff63c0f95048ec64132d2d3c8892\n    \n    TRITON-52 x-DC image copy"},{"timestamp":1529605432,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3:\n\n\"make check\" passed ok"},{"timestamp":1530146931,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 4."},{"timestamp":1530146932,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 0f43bf5bd5d6b60d55bee32c250a7fca38df17af\n    \n    use \u0027datacenter\u0027 instead of \u0027dc\u0027, updates from CR\n    \n    commit 16b69344d12d8aa2a53b5744c81f6fed7df5babd\n    \n    TRITON-52 x-DC image copy"},{"timestamp":1530146965,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1530210843,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 5."},{"timestamp":1530210844,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit e0f211304db18604ba2a91c6481d81e14b8820c3\n    \n    lump TRITON-52 with the 6.1.0 release"},{"timestamp":1530210875,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1530228164,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 5:\n\n(5 comments)"},{"timestamp":1530315577,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 6."},{"timestamp":1530315578,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit e9e82cd2b2b66f0c8b932873968690dc3821a188\n    \n    use short form of image copy\n    \n    commit 8a3208575a01ad18a5b93378d6aa0a3a659fb622\n    \n    first stab at getting a cloudapi client for the target dc\n    \n    commit 08e7bfb7cc30f9cb28e6fb04ec1939ebd00f19a8\n    \n    work in progress of using cloudapi response header for grabbing current dc name\n    \n    commit 6eadba86226cdf9ac6dbac018da0b094627fbd29\n    \n    add \u0027tritondatacenter\u0027 to image copy completion list\n    \n    commit 6b05aa737f5f966811fbfe10185c101d0d68e521\n    \n    make image \u0027cp\u0027 an alias of \u0027copy\u0027\n    \n    commit 2862e3d36a27537f3f81d40d7b3a07815bee7f69\n    \n    update copy message output"},{"timestamp":1530315609,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1530315812,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 6: Code-Review+1 Integration-Approval+1"},{"timestamp":1530315858,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 7: Commit message was updated."},{"timestamp":1530315864,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Todd Whiteman"}],"currentPatchSet":{"number":"7","revision":"c86804cfe416360d6918a476f05de2c5cdd743e5","parents":["dc5dc12052b152759295c33d967d0f3d5de126de"],"ref":"refs/changes/77/3977/7","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1530315858,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1530315609,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1530315812,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1530315812,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1530315864,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":7,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":34,"deletions":0},{"file":"lib/do_image/do_copy.js","type":"ADDED","insertions":119,"deletions":0},{"file":"lib/do_image/do_list.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/do_image/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":95,"deletions":-5}],"sizeInsertions":258,"sizeDeletions":-6},"patchSets":[{"number":"1","revision":"7439691bdc035331761fa74c7490360c03117b4b","parents":["5734123e7538f8b33b152708bd4d58a28e46b926"],"ref":"refs/changes/77/3977/1","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1526670673,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1526670705,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":10,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":68,"deletions":-3},{"file":"lib/do_image/do_copy.js","type":"ADDED","insertions":110,"deletions":0},{"file":"lib/do_image/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":39,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":230,"sizeDeletions":-4},{"number":"2","revision":"bb8c0f3c98bc43e18f7e6879c40721586d8a2037","parents":["5734123e7538f8b33b152708bd4d58a28e46b926"],"ref":"refs/changes/77/3977/2","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1527632871,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527632903,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":10,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":70,"deletions":-3},{"file":"lib/common.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"lib/do_image/do_copy.js","type":"ADDED","insertions":111,"deletions":0},{"file":"lib/do_image/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":40,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":249,"sizeDeletions":-5},{"number":"3","revision":"218b282ae01a56c89f8e3f9aa69d3413b69c31bd","parents":["f100c4dbb59bfbff5b6e381f8648133a73499e0d"],"ref":"refs/changes/77/3977/3","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1529605400,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527632903,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":10,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":70,"deletions":-3},{"file":"lib/common.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"lib/do_image/do_copy.js","type":"ADDED","insertions":111,"deletions":0},{"file":"lib/do_image/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":40,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":249,"sizeDeletions":-5},{"number":"4","revision":"cac96aca4e193898ea3bd6a138e0130f9a831021","parents":["dc5dc12052b152759295c33d967d0f3d5de126de"],"ref":"refs/changes/77/3977/4","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1530146931,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1530146965,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":10,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":69,"deletions":-2},{"file":"lib/do_image/do_copy.js","type":"ADDED","insertions":111,"deletions":0},{"file":"lib/do_image/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":40,"deletions":0}],"sizeInsertions":232,"sizeDeletions":-2},{"number":"5","revision":"0763f78e93137a855cb4e039fa6f2a5952191ccf","parents":["dc5dc12052b152759295c33d967d0f3d5de126de"],"ref":"refs/changes/77/3977/5","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1530210843,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1530210875,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/cloudapi2.js","line":1122,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"That\u0027s broken for insecure\u003dtrue (e.g. coal or nightly) and for eng staging, for example.\n\nWe need to chat about coping with this."},{"file":"lib/do_image/do_copy.js","line":57,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Perhaps add \"to $dcName datacenter\"? Or is that too long?"},{"file":"lib/do_image/do_copy.js","line":90,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"We could eventually have this support multiple datacenters, and perhaps some way to say \"all of them\". Fine to leave that separate, however."},{"file":"lib/do_image/do_copy.js","line":108,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"FWIW, the RFD mentioned having a \"cp\" alias for this.\nhttps://github.com/joyent/rfd/tree/master/rfd/0113#image-coping-across-dcs"},{"file":"lib/do_image/do_copy.js","line":109,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Add a \u0027tritondatacenter\u0027 item here. Then open a ticket to add bash completion for that (it\u0027ll be straightforward to add)."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":7,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":69,"deletions":-2},{"file":"lib/do_image/do_copy.js","type":"ADDED","insertions":111,"deletions":0},{"file":"lib/do_image/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":40,"deletions":0}],"sizeInsertions":229,"sizeDeletions":-2},{"number":"6","revision":"a4d53d23b6a65bbf181b340635795f94b5de148a","parents":["dc5dc12052b152759295c33d967d0f3d5de126de"],"ref":"refs/changes/77/3977/6","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1530315577,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1530315609,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1530315812,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1530315812,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":7,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":34,"deletions":0},{"file":"lib/do_image/do_copy.js","type":"ADDED","insertions":119,"deletions":0},{"file":"lib/do_image/do_list.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/do_image/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":95,"deletions":-5}],"sizeInsertions":258,"sizeDeletions":-6},{"number":"7","revision":"c86804cfe416360d6918a476f05de2c5cdd743e5","parents":["dc5dc12052b152759295c33d967d0f3d5de126de"],"ref":"refs/changes/77/3977/7","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1530315858,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1530315609,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1530315812,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1530315812,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1530315864,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":7,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":34,"deletions":0},{"file":"lib/do_image/do_copy.js","type":"ADDED","insertions":119,"deletions":0},{"file":"lib/do_image/do_list.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/do_image/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":95,"deletions":-5}],"sizeInsertions":258,"sizeDeletions":-6}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}]}