{"project":"joyent/node-verror","branch":"master","id":"If849e28a963c6d3ab9183f9bc43b5fcf24ddfd07","number":"4251","subject":"joyent/node-verror#56 Add more tests to tst.context.js Reviewed by: David Pacheco \u003cdap@joyent.com\u003e Approved by: David Pacheco \u003cdap@joyent.com\u003e","owner":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"url":"https://cr.joyent.us/4251","commitMessage":"joyent/node-verror#56 Add more tests to tst.context.js\nReviewed by: David Pacheco \u003cdap@joyent.com\u003e\nApproved by: David Pacheco \u003cdap@joyent.com\u003e\n","createdOn":1529348481,"lastUpdated":1563314115,"open":false,"status":"MERGED","comments":[{"timestamp":1529348481,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 1."},{"timestamp":1529348484,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1529348560,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 2."},{"timestamp":1529348563,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1529538593,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 3."},{"timestamp":1529538596,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1544738704,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 4: Patch Set 3 was rebased"},{"timestamp":1544738707,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4:\n\n\"make check\" passed ok"},{"timestamp":1562019034,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 5: Patch Set 4 was rebased."},{"timestamp":1562019036,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5:\n\n\"make check\" passed ok"},{"timestamp":1562715677,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1\n\nThanks for the extra comments!\n\nI think I prefer the explicitness of using `isError` directly as we did before.  The point isn\u0027t to test `isError`, but to make sure that even in the case of errors from other contexts, `VError.cause()` returns something that `isError` recognizes as a valid Error.  You\u0027re right that it\u0027s tested by calling these other functions, but that\u0027s an implementation detail -- it wouldn\u0027t be tested if somebody decided to remove those internal assertions. \n\nThere seems to have been a typo previously because we were testing the wrong error at line 20 before.  Thanks for fixing that.  The call at L15 in the original code is especially paranoid but it could help someone debugging a future test failure know whether a problem here (i.e., `isError` returning false) has anything to do with contexts or not.\n\nAnyway, this isn\u0027t a blocker."},{"timestamp":1562715761,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 5: -Integration-Approval\n\nSorry -- I IA\u0027d before I checked whether you had run the full test suite successfully on a range of Node versions.  If you add a comment about that to the ticket I\u0027ll happily IA+1."},{"timestamp":1563314020,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 5: Integration-Approval+1"},{"timestamp":1563314106,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1563314115,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Cody Peter Mello"}],"currentPatchSet":{"number":"6","revision":"f849e28a963c6d3ab9183f9bc43b5fcf24ddfd07","parents":["03d7f049bfc2617daa2bdb03d1f8361c2beee94d"],"ref":"refs/changes/51/4251/6","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1563314106,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1529538596,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562715677,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1563314020,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"SUBM","value":"1","grantedOn":1563314115,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"test/tst.context.js","type":"MODIFIED","insertions":45,"deletions":-10}],"sizeInsertions":45,"sizeDeletions":-10},"patchSets":[{"number":"1","revision":"0b40f996a572fb1f00b7dcf84eb226b78e9122ce","parents":["ecddeda07827742bd2c598033a02f4c42a6fdc26"],"ref":"refs/changes/51/4251/1","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1529348481,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1529348484,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/tst.context.js","line":27,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line \u003e 80 characters"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/tst.context.js","type":"MODIFIED","insertions":24,"deletions":-10}],"sizeInsertions":24,"sizeDeletions":-10},{"number":"2","revision":"3dc0bb3b9211b6958cc15b555b5e3a482599d3c3","parents":["ecddeda07827742bd2c598033a02f4c42a6fdc26"],"ref":"refs/changes/51/4251/2","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1529348560,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1529348563,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/tst.context.js","type":"MODIFIED","insertions":26,"deletions":-10}],"sizeInsertions":26,"sizeDeletions":-10},{"number":"3","revision":"0202d61a9cf1b04c1082fbd5557416d1b9ca5e95","parents":["ecddeda07827742bd2c598033a02f4c42a6fdc26"],"ref":"refs/changes/51/4251/3","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1529538593,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1529538596,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/tst.context.js","type":"MODIFIED","insertions":45,"deletions":-10}],"sizeInsertions":45,"sizeDeletions":-10},{"number":"4","revision":"15d4409c3481c48038f58ff0ac9cd335ed850d65","parents":["cba94a1255aca4f98f8eb1c2d7f1a2f33266c49f"],"ref":"refs/changes/51/4251/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1544738704,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1529538596,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/tst.context.js","type":"MODIFIED","insertions":45,"deletions":-10}],"sizeInsertions":45,"sizeDeletions":-10},{"number":"5","revision":"cf971e3a03b18d52187f24d9f03d8fffcfecbbf3","parents":["03d7f049bfc2617daa2bdb03d1f8361c2beee94d"],"ref":"refs/changes/51/4251/5","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1562019034,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562715677,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1563314020,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1529538596,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/tst.context.js","type":"MODIFIED","insertions":45,"deletions":-10}],"sizeInsertions":45,"sizeDeletions":-10},{"number":"6","revision":"f849e28a963c6d3ab9183f9bc43b5fcf24ddfd07","parents":["03d7f049bfc2617daa2bdb03d1f8361c2beee94d"],"ref":"refs/changes/51/4251/6","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1563314106,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562715677,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1563314020,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"SUBM","value":"1","grantedOn":1563314115,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1529538596,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"test/tst.context.js","type":"MODIFIED","insertions":45,"deletions":-10}],"sizeInsertions":45,"sizeDeletions":-10}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}]}