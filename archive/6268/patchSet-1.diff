From aca607e42bb25016acac2acf95c0802a9ad90170 Mon Sep 17 00:00:00 2001
From: Chris Burroughs <chris.burroughs@joyent.com>
Date: Thu, 16 May 2019 10:54:30 -0400
Subject: [PATCH] TRITON-481 PAPI should use node v6.x TRITON-1672 update papi
 base image to triton-origin-x86_64-18.4.0

---
 Makefile | 12 ++++++------
 deps/eng |  2 +-
 2 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/Makefile b/Makefile
index d741692..d63a57f 100644
--- a/Makefile
+++ b/Makefile
@@ -22,6 +22,7 @@
 # included Makefiles (in eng.git) so that other teams can use them too.
 #
 NAME		:= papi
+AGENT_PREBUILT_AGENT_BRANCH=ndp
 #
 # Tools
 #
@@ -42,11 +43,10 @@ JSSTYLE_FLAGS	 = -f tools/jsstyle.conf
 SMF_MANIFESTS_IN = smf/manifests/papi.xml.in
 
 
-NODE_PREBUILT_VERSION=v4.9.0
+NODE_PREBUILT_VERSION=v6.17.0
 ifeq ($(shell uname -s),SunOS)
-        NODE_PREBUILT_TAG=zone
-        # Allow building on other than sdc-minimal-multiarch-lts@15.4.1
-        NODE_PREBUILT_IMAGE=18b094b0-eb01-11e5-80c1-175dac7ddf02
+        NODE_PREBUILT_TAG=zone64
+        NODE_PREBUILT_IMAGE=c2c31b00-1d60-11e9-9a77-ff9f06554b0f
 endif
 
 ENGBLD_USE_BUILDIMAGE	= true
@@ -67,8 +67,8 @@ ROOT                    := $(shell pwd)
 RELEASE_TARBALL         := $(NAME)-pkg-$(STAMP).tar.gz
 RELSTAGEDIR                  := /tmp/$(NAME)-$(STAMP)
 
-# our base image is triton-origin-multiarch-15.4.1
-BASE_IMAGE_UUID = 04a48d7d-6bb5-4e83-8c3b-e60a99e0f48f
+# our base image is triton-origin-x86_64-18.4.0
+BASE_IMAGE_UUID = a9368831-958e-432d-a031-f8ce6768d190
 BUILDIMAGE_NAME = $(NAME)
 BUILDIMAGE_DESC	= SDC PAPI
 AGENTS		= amon config registrar
diff --git a/deps/eng b/deps/eng
index 126c0f0..d25b8fc 160000
--- a/deps/eng
+++ b/deps/eng
@@ -1 +1 @@
-Subproject commit 126c0f032b8bfddd45b14e8ee14e73e9798a013f
+Subproject commit d25b8fc60fb8c649559924870fe3aaf75e7421d5
-- 
2.21.0

