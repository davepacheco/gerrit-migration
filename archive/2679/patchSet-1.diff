commit e6e69ee7388bdc30de4233401dce156ed060081d (refs/changes/79/2679/1)
Author: Dave Eddy <dave@daveeddy.com>
Date:   2017-09-28T12:39:10-04:00 (2 years ago)
    
    DOCKER-1112 waitContainer should wait for exit_status to become available

diff --git a/lib/backends/sdc/containers.js b/lib/backends/sdc/containers.js
index 48912e3..ffdf1a4 100644
--- a/lib/backends/sdc/containers.js
+++ b/lib/backends/sdc/containers.js
@@ -3520,7 +3520,9 @@ function waitContainer(opts, callback) {
             if (getErr) {
                 log.error(getErr, 'Error getting container.');
                 return callback(getErr);
-            } else if (vm.state === 'stopped') {
+            } else if (vm.state === 'stopped'
+                && vm.hasOwnProperty('exit_status')) {
+
                 callback(null, vm.exit_status);
             } else {
                 setTimeout(waitVm, 1000);
