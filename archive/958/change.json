{"project":"joyent/illumos-joyent","branch":"master","id":"I83390469eaf76687ae434504ed3e41fdbe4ae3b6","number":"958","subject":"OS-5805 chromium depends on CLONE_FS w/o full SHARED_AS Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Reviewed by: Ryan Zezeski \u003cryan.zeseski@joyent.com\u003e Approved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e","owner":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"url":"https://cr.joyent.us/958","commitMessage":"OS-5805 chromium depends on CLONE_FS w/o full SHARED_AS\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nReviewed by: Ryan Zezeski \u003cryan.zeseski@joyent.com\u003e\nApproved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n","createdOn":1480376366,"lastUpdated":1481233328,"open":false,"status":"MERGED","comments":[{"timestamp":1480376366,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 1."},{"timestamp":1480376405,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\npreliminary, still need to look again at the CLONE_FS handlers themselves"},{"timestamp":1480546568,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 2."},{"timestamp":1480546629,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\nThis should include the changes we discussed. I decided to keep the lock for the group array since that makes things cleaner in the exit code path."},{"timestamp":1480964417,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 3."},{"timestamp":1481055838,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 3:\n\n(23 comments)"},{"timestamp":1481066635,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3:\n\n(5 comments)\n\nI accepted all of the comments except for those I explicitly responded to. Let me know if you are ok with my responses or if I should do more on those few things."},{"timestamp":1481069267,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 3:\n\n(5 comments)"},{"timestamp":1481118936,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1481124723,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3:\n\nI\u0027m working on a different approach for hooking in to the clone-group cleanup which will handle all of the different cases."},{"timestamp":1481142898,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 4."},{"timestamp":1481211167,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 4: Code-Review+1\n\n(1 comment)\n\nLooks good, modulo the one nit."},{"timestamp":1481211626,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 5."},{"timestamp":1481212160,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1481227228,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 5:\n\n(4 comments)"},{"timestamp":1481227649,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 6."},{"timestamp":1481229119,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1481231470,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1481233109,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 6: Integration-Approval+1"},{"timestamp":1481233312,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 7: Commit message was updated."},{"timestamp":1481233328,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jerry Jelinek"}],"currentPatchSet":{"number":"7","revision":"83390469eaf76687ae434504ed3e41fdbe4ae3b6","parents":["060157c37b10d81a8a264aeb85849663571caa8b"],"ref":"refs/changes/58/958/7","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1481233312,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481229119,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481231470,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1481233109,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1481233328,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/common/brand/lx/lx_syscall.h","type":"MODIFIED","insertions":14,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_brand/common/clone.c","type":"MODIFIED","insertions":9,"deletions":-11},{"file":"usr/src/lib/brand/lx/lx_brand/common/fork.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/brand/lx/lx_brand/common/ptrace.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/brand/lx/lx_brand/sys/lx_misc.h","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":19,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/os/lx_misc.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_misc.h","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","type":"MODIFIED","insertions":371,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/syscall/lx_miscsys.c","type":"MODIFIED","insertions":87,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_umask.c","type":"MODIFIED","insertions":27,"deletions":0},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/syscall/chdir.c","type":"MODIFIED","insertions":21,"deletions":-8}],"sizeInsertions":596,"sizeDeletions":-29},"patchSets":[{"number":"1","revision":"62f7ba840dccbea780539f5114d55ed70c748445","parents":["a434634703d530e1a12fdabde4691c73a93ca8b5"],"ref":"refs/changes/58/958/1","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1480376366,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/common/brand/lx/lx_syscall.h","type":"MODIFIED","insertions":14,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_brand/common/clone.c","type":"MODIFIED","insertions":8,"deletions":-10},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_misc.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":16,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_misc.h","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","type":"MODIFIED","insertions":402,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/syscall/lx_miscsys.c","type":"MODIFIED","insertions":59,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_umask.c","type":"MODIFIED","insertions":27,"deletions":0},{"file":"usr/src/uts/common/syscall/chdir.c","type":"MODIFIED","insertions":14,"deletions":-2}],"sizeInsertions":551,"sizeDeletions":-13},{"number":"2","revision":"018b5bec3860d19dd69c5435ceb506ab82ecbbe2","parents":["a434634703d530e1a12fdabde4691c73a93ca8b5"],"ref":"refs/changes/58/958/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1480546568,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/common/brand/lx/lx_syscall.h","type":"MODIFIED","insertions":30,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_brand/common/clone.c","type":"MODIFIED","insertions":25,"deletions":-14},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":18,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_misc.h","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","type":"MODIFIED","insertions":501,"deletions":-2},{"file":"usr/src/uts/common/brand/lx/syscall/lx_miscsys.c","type":"MODIFIED","insertions":88,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_umask.c","type":"MODIFIED","insertions":27,"deletions":0},{"file":"usr/src/uts/common/syscall/chdir.c","type":"MODIFIED","insertions":14,"deletions":-2}],"sizeInsertions":713,"sizeDeletions":-21},{"number":"3","revision":"6237948b813b611296b82204f8ec7cf9f4fdcede","parents":["47ab409f7a3750d5ecf595f817d5356ed89f5e43"],"ref":"refs/changes/58/958/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1480964417,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","line":2464,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"It\u0027s possible for the exec() to fail on the native binary for some reason after we make this assessment.  While this clone_grp_exit might be best suited for the brand_clearbrand() step in exec_common(), I don\u0027t see an easy way to wire up the hook at this point.  It\u0027s probably best to just acknowledge that failing to exec(2) a native binary will result in unexpected departure of a clone group."},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","line":305,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Might want to make this unsigned."},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","line":306,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"You could make this a normal list_t rather than a pointer and skip the needed allocation."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":29,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Regardless of the clone(2) weirdness, it will result in only new processes or threads on success, nothing else.  It might make more sense to reword to something like \"The vast majority of clone(2) calls result in the creation of normal threads or processes.\""},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":37,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I would maybe remove this \u0027graph or move it later.  The flag description below has adequate context and sets up the following paragraph nicely.  The \u0027Unfortunately\u0027 assertion here lacks reinforcing details, unlike the comments below."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":45,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Nix \u0027however\u0027."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":66,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Since that isn\u0027t defined here, it\u0027d be nice to include parenthetical noting that it consists only of CLONE_FS."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":69,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"s/some information/the attributes relevant to the clone flag/?"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":76,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"s/be added/associate itself/? (and if that sounds better, replace the later \u0027by\u0027 with \u0027via\u0027?)"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":79,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"\"Each syscall acting upon attributes relevant to a clone-group must include logic to do so properly\"?  At least check spelling on \"appropriate\"."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":84,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"illustrates"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":93,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"illustrates"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":99,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"If we don\u0027t support CLONE_THREAD at this point, is it worth including the example?"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":99,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"I feel like it clarifies the intended design of the sub-system and makes it easier to understand how it is expected to work."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":99,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Fair enough."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":114,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"\"any groups to which it belongs\""},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":115,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"\"exits a group, it is cleaned up\""},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":212,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"A stickler might insist that these memory allocations be performed preemptively outside the l_clone_grp_lock.  Maybe just note that doing so could be a future enhancement."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":219,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Why the round-trip through the freshly created group mutex?"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":219,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"This is mostly me being paranoid about writing this value without holding the lock. I am not sure we could hit any bad interaction with anything else by not taking the lock, but it probably doesn\u0027t hurt anything. However, if it is a cause for confusion I can remove the mutex calls since I have no firm scenario I can describe for this."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":219,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I would pull it out."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":266,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Run-on.  Might be clearer as \"Clean up any clone-group associates during process exit.\""},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":268,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Worth a VERIFY or at least an ASSERT?"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":268,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"I went ahead and took the lock anyway for consistency and on the off chance there is another thread. I don\u0027t want to introduce a panic."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":268,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"IMO a VERIFY of p_lwprcnt would make me more comfortable.  It\u0027s the most important part of the invariants here.  (Taking the lock doesn\u0027t offer value since if another thread is running, it may already have a reference to the group w/o needing the process-wide lock)"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":268,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"I took another look at this and it is possible for there to be more than 1 lwp if we\u0027re exec-ing a native process so I think the best thing is to not take l_clone_grp_lock but also to not use an assert/verify."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":349,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Do we need to check the lock here?  If the clone_grp_create does the array assignment only once the group has been initialized, a load from that index should be adequate, provided that group clean-up only occurs during process exit."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":349,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"I was worried about a race with another thread while we\u0027re simultaneously writing into that slot."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":349,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"lx_clone_grp_create is the only function allowed to do that and it\u0027s protected by the lock.  If it were me, I would omit the mutex round-trip and perhaps include a comment about the invariants enforced upon l_clone_grps lifetime.  It offers us much more protection than l_clone_grp_lock, provided that pointer-sized writes are atomic."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_miscsys.c","line":104,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Instead of \"using\" that first hold on the first assigned process, why not utilize it to keep the vnode held during the duration of the callback loop?  It would eliminate the need to keep and check a count during the loop and could be release at the end. (Instead of an extra HOLD/RELE before and after the loop)"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_miscsys.c","line":104,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"That would mean a more invasive rewrite of the chdir code. Since this extra hold doesn\u0027t cost us anything, it seems simpler than the alternative."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_miscsys.c","line":104,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done."},{"file":"usr/src/uts/common/syscall/chdir.c","line":163,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"If we\u0027re updating the function signature here, it might be worthwhile to switch this too boolean_t.  (Along with their derivatives below)"},{"file":"usr/src/uts/common/syscall/chdir.c","line":197,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"This should probably reference \u0027pp\u0027 instead."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/common/brand/lx/lx_syscall.h","type":"MODIFIED","insertions":14,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_brand/common/clone.c","type":"MODIFIED","insertions":9,"deletions":-11},{"file":"usr/src/lib/brand/lx/lx_brand/common/fork.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/brand/lx/lx_brand/common/ptrace.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/brand/lx/lx_brand/sys/lx_misc.h","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":12,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_misc.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":20,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_misc.h","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","type":"MODIFIED","insertions":360,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/syscall/lx_miscsys.c","type":"MODIFIED","insertions":88,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_umask.c","type":"MODIFIED","insertions":27,"deletions":0},{"file":"usr/src/uts/common/syscall/chdir.c","type":"MODIFIED","insertions":14,"deletions":-2}],"sizeInsertions":563,"sizeDeletions":-19},{"number":"4","revision":"983a80e0673b5ba481e9cc631eedf599809fb7bd","parents":["a1b5b02d283a933de7f074a68398486a187f7e67"],"ref":"refs/changes/58/958/4","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1481142898,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481211167,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"comments":[{"file":"usr/src/uts/common/brand/lx/syscall/lx_miscsys.c","line":143,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"capitalize"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/common/brand/lx/lx_syscall.h","type":"MODIFIED","insertions":14,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_brand/common/clone.c","type":"MODIFIED","insertions":9,"deletions":-11},{"file":"usr/src/lib/brand/lx/lx_brand/common/fork.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/brand/lx/lx_brand/common/ptrace.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/brand/lx/lx_brand/sys/lx_misc.h","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":19,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/os/lx_misc.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_misc.h","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","type":"MODIFIED","insertions":371,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/syscall/lx_miscsys.c","type":"MODIFIED","insertions":87,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_umask.c","type":"MODIFIED","insertions":27,"deletions":0},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/syscall/chdir.c","type":"MODIFIED","insertions":21,"deletions":-8}],"sizeInsertions":596,"sizeDeletions":-29},{"number":"5","revision":"7d995c44a8749ac664631dc32f3be9f1b2e77038","parents":["86f957b799cae7673d761ef1dbe931b78801e73b"],"ref":"refs/changes/58/958/5","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1481211626,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481212160,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"comments":[{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":52,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"s/is/are/"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":123,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"s/The/It/ or s/The/This/"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":275,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"For lx_proc_exit() you uses parens to indicate function but didn\u0027t here. Would be nice to be consistent."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","line":277,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"s/lwp\u0027s/lwps/?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/common/brand/lx/lx_syscall.h","type":"MODIFIED","insertions":14,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_brand/common/clone.c","type":"MODIFIED","insertions":9,"deletions":-11},{"file":"usr/src/lib/brand/lx/lx_brand/common/fork.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/brand/lx/lx_brand/common/ptrace.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/brand/lx/lx_brand/sys/lx_misc.h","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":19,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/os/lx_misc.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_misc.h","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","type":"MODIFIED","insertions":371,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/syscall/lx_miscsys.c","type":"MODIFIED","insertions":87,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_umask.c","type":"MODIFIED","insertions":27,"deletions":0},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/syscall/chdir.c","type":"MODIFIED","insertions":21,"deletions":-8}],"sizeInsertions":596,"sizeDeletions":-29},{"number":"6","revision":"e4856cf6c172e4613e694b862ee71a97f0925769","parents":["060157c37b10d81a8a264aeb85849663571caa8b"],"ref":"refs/changes/58/958/6","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1481227649,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481229119,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1481233109,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481231470,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/common/brand/lx/lx_syscall.h","type":"MODIFIED","insertions":14,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_brand/common/clone.c","type":"MODIFIED","insertions":9,"deletions":-11},{"file":"usr/src/lib/brand/lx/lx_brand/common/fork.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/brand/lx/lx_brand/common/ptrace.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/brand/lx/lx_brand/sys/lx_misc.h","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":19,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/os/lx_misc.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_misc.h","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","type":"MODIFIED","insertions":371,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/syscall/lx_miscsys.c","type":"MODIFIED","insertions":87,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_umask.c","type":"MODIFIED","insertions":27,"deletions":0},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/syscall/chdir.c","type":"MODIFIED","insertions":21,"deletions":-8}],"sizeInsertions":596,"sizeDeletions":-29},{"number":"7","revision":"83390469eaf76687ae434504ed3e41fdbe4ae3b6","parents":["060157c37b10d81a8a264aeb85849663571caa8b"],"ref":"refs/changes/58/958/7","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1481233312,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1481233328,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481229119,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1481233109,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481231470,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/common/brand/lx/lx_syscall.h","type":"MODIFIED","insertions":14,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_brand/common/clone.c","type":"MODIFIED","insertions":9,"deletions":-11},{"file":"usr/src/lib/brand/lx/lx_brand/common/fork.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/brand/lx/lx_brand/common/ptrace.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/brand/lx/lx_brand/sys/lx_misc.h","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":19,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/os/lx_misc.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_misc.h","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_clone.c","type":"MODIFIED","insertions":371,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/syscall/lx_miscsys.c","type":"MODIFIED","insertions":87,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_umask.c","type":"MODIFIED","insertions":27,"deletions":0},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/syscall/chdir.c","type":"MODIFIED","insertions":21,"deletions":-8}],"sizeInsertions":596,"sizeDeletions":-29}],"allReviewers":[{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}]}