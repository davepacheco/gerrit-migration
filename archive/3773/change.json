{"project":"joyent/illumos-joyent","branch":"master","id":"I4a037e26666b8acec82e9d4f2da7b8130afa5f29","number":"3773","subject":"OS-6727 bhyve should provide zone UUID to guest via SMBIOS Reviewed by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e Approved by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e","owner":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"url":"https://cr.joyent.us/3773","commitMessage":"OS-6727 bhyve should provide zone UUID to guest via SMBIOS\nReviewed by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e\nApproved by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e\n","createdOn":1522845734,"lastUpdated":1522947488,"open":false,"status":"MERGED","comments":[{"timestamp":1522845734,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 1."},{"timestamp":1522845736,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit b9e0a7ad26a4c8c3c1869577ef2c271bfd8b84cc\n    \n    OS-6727 bhyve should provide zone UUID to guest via SMBIOS\n    \n    commit 7ab3f5348d729755d5a5fe1c679174b62ec4861e\n    \n    OS-6858 vmm tracing framework is dead code\n    Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n    Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n    Approved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n    \n    commit 8098ab85dc79c5d039404142c4182f341a23ac0c\n    \n    OS-6799 hvm exclusion failures are silent\n    Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n    Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n    Reviewed by: John Levon \u003cjohn.levon@joyent.com\u003e\n    Approved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n    \n    commit d7c531a2a2da0161df2cf044f19dc53e35af2dc1\n    \n    OS-6861 bhyve should flush register state on vmx exit\n    Reviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e\n    Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n    Approved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e"},{"timestamp":1522845812,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1522845820,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 52f64540be2c3172b420b1a65292e58cb6a238ef\n    \n    OS-6727 bhyve should provide zone UUID to guest via SMBIOS"},{"timestamp":1522853796,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 2:\n\n(2 comments)"},{"timestamp":1522858971,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 3."},{"timestamp":1522858985,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit e967f561d6b92cd56e28b18b1d30bac9fcfbc0bb\n    \n    m\n    \n    commit 92d830977530c774e93b7bdf52d827f6daf8fede\n    \n    m"},{"timestamp":1522859101,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3:\n\nI ran lint by hand and fixed up a few things too."},{"timestamp":1522865969,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1522947193,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1522947367,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1522947456,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 5: Patch Set 4 was rebased"},{"timestamp":1522947488,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by John Levon"}],"currentPatchSet":{"number":"5","revision":"bedbc0c4deaf436a12b78eb482054ca6929f5892","parents":["088127bc39bad6b35e012d102f520af1f8928386"],"ref":"refs/changes/73/3773/5","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1522947456,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522865969,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1522947193,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"SUBM","value":"1","grantedOn":1522947488,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/smbios/Makefile","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/cmd/smbios/smbios.c","type":"MODIFIED","insertions":23,"deletions":-3},{"file":"usr/src/cmd/zoneadmd/zoneadmd.c","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/brand/bhyve/zone/boot.c","type":"MODIFIED","insertions":72,"deletions":-35},{"file":"usr/src/man/man1m/smbios.1m","type":"MODIFIED","insertions":7,"deletions":-9}],"sizeInsertions":115,"sizeDeletions":-47},"patchSets":[{"number":"1","revision":"9bf4322c6575adb79692b41e14c85348553a2162","parents":["3967d7bb10e6d302c162721b7e5ed98bd69744b7"],"ref":"refs/changes/73/3773/1","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1522845734,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"usr/src/cmd/mdb/intel/amd64/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/mdb/intel/amd64/vmm/Makefile","type":"DELETED","insertions":0,"deletions":-21},{"file":"usr/src/cmd/mdb/intel/amd64/vmm/amd64/Makefile","type":"DELETED","insertions":0,"deletions":-35},{"file":"usr/src/cmd/mdb/intel/amd64/vmm/vmm.c","type":"DELETED","insertions":0,"deletions":-237},{"file":"usr/src/cmd/smbios/Makefile","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/cmd/smbios/smbios.c","type":"MODIFIED","insertions":23,"deletions":-3},{"file":"usr/src/lib/brand/bhyve/zone/boot.c","type":"MODIFIED","insertions":30,"deletions":-9},{"file":"usr/src/man/man1m/smbios.1m","type":"MODIFIED","insertions":7,"deletions":-9},{"file":"usr/src/pkg/manifests/system-bhyve.mf","type":"MODIFIED","insertions":0,"deletions":-7},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx_support.s","type":"MODIFIED","insertions":21,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/vmm.c","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_dev.c","type":"MODIFIED","insertions":0,"deletions":-175},{"file":"usr/src/uts/i86pc/os/pc_hvm.c","type":"MODIFIED","insertions":10,"deletions":-2},{"file":"usr/src/uts/i86pc/sys/vmm_dev.h","type":"MODIFIED","insertions":0,"deletions":-5},{"file":"usr/src/uts/i86pc/sys/vmm_impl.h","type":"MODIFIED","insertions":0,"deletions":-33}],"sizeInsertions":97,"sizeDeletions":-541},{"number":"2","revision":"4998bd10ed3e2118656032e29db59b8bd962f2cc","parents":["4ac08e240a8b70d239bb2fed6f0d1a09f8da3038"],"ref":"refs/changes/73/3773/2","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1522845812,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","comments":[{"file":"usr/src/lib/brand/bhyve/zone/boot.c","line":539,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"add_smbios() would be a better fit for existing program structure."},{"file":"usr/src/lib/brand/bhyve/zone/boot.c","line":546,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"There\u0027s a uuid property that should be used instead.  Needs to be added to the environment so it\u0027s easy to fetch."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/smbios/Makefile","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/cmd/smbios/smbios.c","type":"MODIFIED","insertions":23,"deletions":-3},{"file":"usr/src/lib/brand/bhyve/zone/boot.c","type":"MODIFIED","insertions":30,"deletions":-9},{"file":"usr/src/man/man1m/smbios.1m","type":"MODIFIED","insertions":7,"deletions":-9}],"sizeInsertions":64,"sizeDeletions":-21},{"number":"3","revision":"8c889f76564bc93f6493ac0465901da776cc2421","parents":["4ac08e240a8b70d239bb2fed6f0d1a09f8da3038"],"ref":"refs/changes/73/3773/3","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1522858971,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522865969,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1522947193,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/smbios/Makefile","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/cmd/smbios/smbios.c","type":"MODIFIED","insertions":23,"deletions":-3},{"file":"usr/src/cmd/zoneadmd/zoneadmd.c","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/brand/bhyve/zone/boot.c","type":"MODIFIED","insertions":72,"deletions":-35},{"file":"usr/src/man/man1m/smbios.1m","type":"MODIFIED","insertions":7,"deletions":-9}],"sizeInsertions":115,"sizeDeletions":-47},{"number":"4","revision":"4a037e26666b8acec82e9d4f2da7b8130afa5f29","parents":["4ac08e240a8b70d239bb2fed6f0d1a09f8da3038"],"ref":"refs/changes/73/3773/4","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1522947367,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522865969,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1522947193,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/smbios/Makefile","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/cmd/smbios/smbios.c","type":"MODIFIED","insertions":23,"deletions":-3},{"file":"usr/src/cmd/zoneadmd/zoneadmd.c","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/brand/bhyve/zone/boot.c","type":"MODIFIED","insertions":72,"deletions":-35},{"file":"usr/src/man/man1m/smbios.1m","type":"MODIFIED","insertions":7,"deletions":-9}],"sizeInsertions":115,"sizeDeletions":-47},{"number":"5","revision":"bedbc0c4deaf436a12b78eb482054ca6929f5892","parents":["088127bc39bad6b35e012d102f520af1f8928386"],"ref":"refs/changes/73/3773/5","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1522947456,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522865969,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1522947193,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"SUBM","value":"1","grantedOn":1522947488,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/smbios/Makefile","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/cmd/smbios/smbios.c","type":"MODIFIED","insertions":23,"deletions":-3},{"file":"usr/src/cmd/zoneadmd/zoneadmd.c","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/brand/bhyve/zone/boot.c","type":"MODIFIED","insertions":72,"deletions":-35},{"file":"usr/src/man/man1m/smbios.1m","type":"MODIFIED","insertions":7,"deletions":-9}],"sizeInsertions":115,"sizeDeletions":-47}],"allReviewers":[{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}]}