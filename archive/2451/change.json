{"project":"joyent/smartos-live","branch":"master","id":"I36a30993fae1390dad77542287c42ac987a4c95e","number":"2451","subject":"OS-6305 want hrtime processing library for easier timing statistics Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Reviewed by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e Approved by: Josh Wilsdon \u003cjosh@wilsdon.ca\u003e","owner":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"url":"https://cr.joyent.us/2451","commitMessage":"OS-6305 want hrtime processing library for easier timing statistics\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nReviewed by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e\nApproved by: Josh Wilsdon \u003cjosh@wilsdon.ca\u003e\n","createdOn":1503593173,"lastUpdated":1506979031,"open":false,"status":"MERGED","comments":[{"timestamp":1503593173,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 1."},{"timestamp":1503593177,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit faf1ab3a85637413607ec5309c9bba1bc39b52b1\n    \n    initial commit"},{"timestamp":1503593214,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1506036392,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 1: Code-Review+1\n\n(3 comments)"},{"timestamp":1506112631,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 1:\n\n(3 comments)"},{"timestamp":1506112657,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 2: Patch Set 1 was rebased"},{"timestamp":1506112667,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1506112701,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2:\n\n\"make check\" passed ok"},{"timestamp":1506113018,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 4."},{"timestamp":1506113021,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 41b65e01110ce2eb729ec5978b14b5dab7ab51f6\n    \n    changes based on julien review"},{"timestamp":1506113063,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1506113323,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1506356309,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1506369550,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 4:\n\n(1 comment)\n\nLooks good for the most part."},{"timestamp":1506371630,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1506446761,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 4: Code-Review+1\n\n(1 comment)"},{"timestamp":1506459544,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1506459600,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 5."},{"timestamp":1506459604,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit c656a2bd19a757f0e044a043683bf5528c9dd680\n    \n    review from pmooney and julien"},{"timestamp":1506459638,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing-1\n\n\"make check\" exited with status 2\n\n /tmp/repo/src/vm/node_modules/vmload/vmload-zoneadm.js\n /tmp/repo/src/vm/node_modules/vmload/vmload-zoneinfo.js\n /tmp/repo/src/vm/node_modules/sysevent-stream.js\n /tmp/repo/src/img/lib/IMG.js\n /tmp/repo/src/img/lib/cli.js\n /tmp/repo/src/img/lib/common.js\n /tmp/repo/src/img/lib/configuration.js\n /tmp/repo/src/img/lib/database.js\n /tmp/repo/src/img/lib/errors.js\n /tmp/repo/src/img/lib/imgadm.js\n /tmp/repo/src/img/lib/magic.js\n /tmp/repo/src/img/lib/upgrade.js\n /tmp/repo/src/img/sbin/imgadm\n /tmp/repo/src/vm/common/nictag.js\n /tmp/repo/src/vm/tests/test-alias.js\n /tmp/repo/src/vm/node_modules/nodeunit-plus/index.js\n /tmp/repo/src/vm/tests/test-cleanup-on-failure.js\n /tmp/repo/src/vm/tests/test-create.js\n /tmp/repo/src/vm/tests/test-create-filesystems.js\n /tmp/repo/src/vm/tests/test-docker.js\n /tmp/repo/src/vm/tests/test-defaults.js\n /tmp/repo/src/vm/tests/test-hrtime.js\n /tmp/repo/src/vm/tests/test-hrtime.js(13): warning: extra comma is not recommended in array initializers\n /tmp/repo/src/vm/tests/test-indestructible.js\n /tmp/repo/src/vm/tests/test-internal_metadata_namespaces.js\n /tmp/repo/src/vm/tests/test-lastexited.js\n /tmp/repo/src/vm/tests/test-openonerrlogger.js\n /tmp/repo/src/vm/tests/test-reboot.js\n /tmp/repo/src/vm/tests/test-reprovision.js\n /tmp/repo/src/vm/tests/test-snapshots.js\n /tmp/repo/src/vm/tests/test-spoof-opts.js\n /tmp/repo/src/vm/tests/test-tmpfs.js\n /tmp/repo/src/vm/tests/test-update.js\n /tmp/repo/src/vm/tests/test-vrrp-nics.js\n /tmp/repo/src/vm/lib/metadata/agent.js\n /tmp/repo/src/vm/lib/metadata/common.js\n /tmp/repo/src/vm/lib/metadata/crc32.js\n /tmp/repo/src/vm/lib/metadata/zwatch.js\n /tmp/repo/src/disklayout.js\n /tmp/repo/src/mkzpool.js\n /tmp/repo/src/ntp_config.js\n /tmp/repo/src/node_modules/disklayout.js\n \n 0 error(s), 1 warnings(s)\n Makefile:433: recipe for target \u0027check\u0027 failed\n make[1]: *** [check] Error 1\n make[1]: Leaving directory \u0027/tmp/repo/src\u0027\n Makefile:356: recipe for target \u0027check\u0027 failed\n gmake: *** [check] Error 2"},{"timestamp":1506459662,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 6."},{"timestamp":1506459666,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit cc78ca77e15f0ab21132f464d2bb7a54a347f119\n    \n    trailing comma"},{"timestamp":1506459704,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1506461037,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 6:\n\n(2 comments)"},{"timestamp":1506530458,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 7."},{"timestamp":1506530461,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 7:\n\nNew commits:\n    \n    commit 341943a9f73ef24cc15dbf50505de35bc019ac64\n    \n    add better comments"},{"timestamp":1506530498,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1506530555,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 8."},{"timestamp":1506530559,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 8:\n\nNew commits:\n    \n    commit dd01d6e31c70b665f399f69cbe232e182adfbd69\n    \n    cleanup docs"},{"timestamp":1506530596,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1506531128,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 8: Code-Review+1"},{"timestamp":1506531220,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 9: Commit message was updated."},{"timestamp":1506698376,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 9: Code-Review+1"},{"timestamp":1506699406,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 10: Commit message was updated."},{"timestamp":1506703590,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 11."},{"timestamp":1506703594,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 11:\n\nNew commits:\n    \n    commit 2d3720eac0db1c0d7a3f27c175415e6e2ed9ff38\n    \n    copyright"},{"timestamp":1506703633,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1506712894,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 11: Code-Review+1"},{"timestamp":1506962980,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 11: Code-Review+1"},{"timestamp":1506976042,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 11: Integration-Approval+1"},{"timestamp":1506977641,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 12: Commit message was updated."},{"timestamp":1506979031,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Dave Eddy"}],"currentPatchSet":{"number":"12","revision":"36a30993fae1390dad77542287c42ac987a4c95e","parents":["f881d616c90f8aadceea775718696e0f4f8d0a34"],"ref":"refs/changes/51/2451/12","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1506977641,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506703633,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506712894,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506962980,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506976042,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"SUBM","value":"1","grantedOn":1506979031,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/node_modules/hrtime.js","type":"ADDED","insertions":246,"deletions":0},{"file":"src/vm/node_modules/sysevent-stream.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/vm/node_modules/vmload/index.js","type":"MODIFIED","insertions":26,"deletions":-25},{"file":"src/vm/node_modules/vmload/vmload-datasets.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"src/vm/tests/test-hrtime.js","type":"ADDED","insertions":129,"deletions":0}],"sizeInsertions":413,"sizeDeletions":-28},"patchSets":[{"number":"1","revision":"9e5fbfe081a7597d27dea074896f00d3f5a52e70","parents":["ed7577cb855337d9a93e66fa0eb73eb604fe8f04"],"ref":"refs/changes/51/2451/1","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1503593173,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1503593214,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506036392,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"comments":[{"file":"src/vm/node_modules/hrtime.js","line":31,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"nit: \"precision\" is not necessarily the best term, since we\u0027re more looking for the monotonic property rather than higher precision. Maybe \"with the guarantees offered by a monotonic clock\"?"},{"file":"src/vm/node_modules/hrtime.js","line":31,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"ah, that makes sense. will change."},{"file":"src/vm/node_modules/hrtime.js","line":95,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Does that mean that a different of 1 day, 23 hours and 59 minutes would be represented as \"X.Ys (1 day)\". Where is that used? Could that aggressive rounding be potentially misleading?\n\nOr is it that most time differences will be within a few hours anyway, and thus the problem wouldn\u0027t really surface?"},{"file":"src/vm/node_modules/hrtime.js","line":95,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"I would assume most time differences would be within a few seconds (minutes at the most), but it could potentially be problematic.  ie. 119 seconds would get report as \"119.0s (1m)\".\n\nThis is only ever used for human-readable purposes (ie. in a log file).\n\nPerhaps using Math.round instead of Math.floor may be a better approach here."},{"file":"src/vm/node_modules/hrtime.js","line":95,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"In this case does it matter to show the values with a unit that is coarser than seconds?"},{"file":"src/vm/node_modules/hrtime.js","line":95,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"(I just thought of this) with the vminfod daemon itself, via GET /status it shows all of the currently connected clients and for how long they\u0027ve been connected.  For example:\n\n    \"4a43e05f-9b8f-ef23-a71b-de938308ad3c\": {\n      \"userAgent\": \"Metadata Agent - VminfodWatcher - headnode/6053 (/usr/vm/sbin/metadata)\",\n      \"createdTime\": \"275.542272887\",\n      \"createdDate\": \"2017-09-25T05:54:18.268Z\",\n      \"createdAgo\": \"37359.629847427s (10h)\"\n    }\n\nSeeing that the connection was established ~10 hours ago is a lot more informative than seeing 37359 seconds."},{"file":"src/vm/node_modules/hrtime.js","line":95,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Ok, if possible without too much changes I think it might be less confusing to have better precision (in this case, maybe something like (10.xh). But not a big deal."},{"file":"src/vm/node_modules/hrtime.js","line":95,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Done"},{"file":"src/vm/node_modules/hrtime.js","line":184,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"\"stringy\"?"},{"file":"src/vm/node_modules/hrtime.js","line":184,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"ha, whoops! should be \"string\".  good catch!"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/node_modules/hrtime.js","type":"ADDED","insertions":203,"deletions":0},{"file":"src/vm/node_modules/sysevent-stream.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/vm/node_modules/vmload/index.js","type":"MODIFIED","insertions":25,"deletions":-24},{"file":"src/vm/node_modules/vmload/vmload-datasets.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"src/vm/tests/test-hrtime.js","type":"ADDED","insertions":117,"deletions":0}],"sizeInsertions":356,"sizeDeletions":-26},{"number":"2","revision":"32a1592ae7531961ad65adabe71dd67da46fdbd9","parents":["aa879239b6ea631bdad8ab48b52b09a262e17da4"],"ref":"refs/changes/51/2451/2","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1506112657,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1503593214,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506036392,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/node_modules/hrtime.js","type":"ADDED","insertions":203,"deletions":0},{"file":"src/vm/node_modules/sysevent-stream.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/vm/node_modules/vmload/index.js","type":"MODIFIED","insertions":25,"deletions":-24},{"file":"src/vm/node_modules/vmload/vmload-datasets.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"src/vm/tests/test-hrtime.js","type":"ADDED","insertions":117,"deletions":0}],"sizeInsertions":356,"sizeDeletions":-26},{"number":"3","revision":"7b1627312c3256c35d59d495825065cfa3ebcf2a","parents":["aa879239b6ea631bdad8ab48b52b09a262e17da4"],"ref":"refs/changes/51/2451/3","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1506112667,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1503593214,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506036392,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/node_modules/hrtime.js","type":"ADDED","insertions":203,"deletions":0},{"file":"src/vm/node_modules/sysevent-stream.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/vm/node_modules/vmload/index.js","type":"MODIFIED","insertions":25,"deletions":-24},{"file":"src/vm/node_modules/vmload/vmload-datasets.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"src/vm/tests/test-hrtime.js","type":"ADDED","insertions":117,"deletions":0}],"sizeInsertions":356,"sizeDeletions":-26},{"number":"4","revision":"e21e9db39efff78946c9299df593c26542aea42e","parents":["aa879239b6ea631bdad8ab48b52b09a262e17da4"],"ref":"refs/changes/51/2451/4","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1506113018,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506113063,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506446761,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"comments":[{"file":"src/vm/node_modules/hrtime.js","line":202,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Do we want to be strict about the number range for the \u0027secs\u0027 and \u0027nsecs\u0027 fields here, in addition to the existing checks?"},{"file":"src/vm/node_modules/hrtime.js","line":202,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Hm, yeah that could be good.  Would something like this be sufficient?\n\n assert(hrtime[0] \u003e\u003d 0, \u0027secs \u003e\u003d 0\u0027);\n assert(hrtime[1] \u003e\u003d 0, \u0027nsecs \u003e\u003d 0\u0027);\n assert(hrtime[1] \u003c 1e9, \u0027nsecs \u003c 1e9\u0027);"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/node_modules/hrtime.js","type":"ADDED","insertions":203,"deletions":0},{"file":"src/vm/node_modules/sysevent-stream.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/vm/node_modules/vmload/index.js","type":"MODIFIED","insertions":25,"deletions":-24},{"file":"src/vm/node_modules/vmload/vmload-datasets.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"src/vm/tests/test-hrtime.js","type":"ADDED","insertions":123,"deletions":0}],"sizeInsertions":362,"sizeDeletions":-26},{"number":"5","revision":"94f09771ebf089ed81871a31aa55f2016483dea9","parents":["f881d616c90f8aadceea775718696e0f4f8d0a34"],"ref":"refs/changes/51/2451/5","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1506459600,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1506459638,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/node_modules/hrtime.js","type":"ADDED","insertions":213,"deletions":0},{"file":"src/vm/node_modules/sysevent-stream.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/vm/node_modules/vmload/index.js","type":"MODIFIED","insertions":25,"deletions":-24},{"file":"src/vm/node_modules/vmload/vmload-datasets.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"src/vm/tests/test-hrtime.js","type":"ADDED","insertions":129,"deletions":0}],"sizeInsertions":378,"sizeDeletions":-26},{"number":"6","revision":"c4658d0e9ac4254f9240f45953bfb193fbeae761","parents":["f881d616c90f8aadceea775718696e0f4f8d0a34"],"ref":"refs/changes/51/2451/6","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1506459662,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506459704,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/Makefile","line":138,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Does this CR need to be rebased on top of master?"},{"file":"src/vm/node_modules/hrtime.js","line":100,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Why is parseFloat needed?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/node_modules/hrtime.js","type":"ADDED","insertions":213,"deletions":0},{"file":"src/vm/node_modules/sysevent-stream.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/vm/node_modules/vmload/index.js","type":"MODIFIED","insertions":25,"deletions":-24},{"file":"src/vm/node_modules/vmload/vmload-datasets.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"src/vm/tests/test-hrtime.js","type":"ADDED","insertions":129,"deletions":0}],"sizeInsertions":378,"sizeDeletions":-26},{"number":"7","revision":"fb73650bfcd95818af3729be82e580a83d420835","parents":["f881d616c90f8aadceea775718696e0f4f8d0a34"],"ref":"refs/changes/51/2451/7","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1506530458,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506530498,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/node_modules/hrtime.js","type":"ADDED","insertions":246,"deletions":0},{"file":"src/vm/node_modules/sysevent-stream.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/vm/node_modules/vmload/index.js","type":"MODIFIED","insertions":25,"deletions":-24},{"file":"src/vm/node_modules/vmload/vmload-datasets.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"src/vm/tests/test-hrtime.js","type":"ADDED","insertions":129,"deletions":0}],"sizeInsertions":411,"sizeDeletions":-26},{"number":"8","revision":"dfc170b9dd1cc8dbebdd5be0cd0b38be18c4ba47","parents":["f881d616c90f8aadceea775718696e0f4f8d0a34"],"ref":"refs/changes/51/2451/8","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1506530555,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506530596,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506531128,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/node_modules/hrtime.js","type":"ADDED","insertions":246,"deletions":0},{"file":"src/vm/node_modules/sysevent-stream.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/vm/node_modules/vmload/index.js","type":"MODIFIED","insertions":25,"deletions":-24},{"file":"src/vm/node_modules/vmload/vmload-datasets.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"src/vm/tests/test-hrtime.js","type":"ADDED","insertions":129,"deletions":0}],"sizeInsertions":411,"sizeDeletions":-26},{"number":"9","revision":"e546037f5b03bfd948fbdbfe500edc7fc886c473","parents":["f881d616c90f8aadceea775718696e0f4f8d0a34"],"ref":"refs/changes/51/2451/9","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1506531220,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506530596,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506698376,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506531128,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/node_modules/hrtime.js","type":"ADDED","insertions":246,"deletions":0},{"file":"src/vm/node_modules/sysevent-stream.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/vm/node_modules/vmload/index.js","type":"MODIFIED","insertions":25,"deletions":-24},{"file":"src/vm/node_modules/vmload/vmload-datasets.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"src/vm/tests/test-hrtime.js","type":"ADDED","insertions":129,"deletions":0}],"sizeInsertions":411,"sizeDeletions":-26},{"number":"10","revision":"f9a26cc35aed4503385aa73a080f0c9b50104c39","parents":["f881d616c90f8aadceea775718696e0f4f8d0a34"],"ref":"refs/changes/51/2451/10","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1506699406,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506530596,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506698376,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506531128,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/node_modules/hrtime.js","type":"ADDED","insertions":246,"deletions":0},{"file":"src/vm/node_modules/sysevent-stream.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/vm/node_modules/vmload/index.js","type":"MODIFIED","insertions":25,"deletions":-24},{"file":"src/vm/node_modules/vmload/vmload-datasets.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"src/vm/tests/test-hrtime.js","type":"ADDED","insertions":129,"deletions":0}],"sizeInsertions":411,"sizeDeletions":-26},{"number":"11","revision":"d01d58bfa5af1e37dc4fb11e60f6e551e2c977be","parents":["f881d616c90f8aadceea775718696e0f4f8d0a34"],"ref":"refs/changes/51/2451/11","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1506703590,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506703633,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506712894,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506976042,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506962980,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/node_modules/hrtime.js","type":"ADDED","insertions":246,"deletions":0},{"file":"src/vm/node_modules/sysevent-stream.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/vm/node_modules/vmload/index.js","type":"MODIFIED","insertions":26,"deletions":-25},{"file":"src/vm/node_modules/vmload/vmload-datasets.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"src/vm/tests/test-hrtime.js","type":"ADDED","insertions":129,"deletions":0}],"sizeInsertions":413,"sizeDeletions":-28},{"number":"12","revision":"36a30993fae1390dad77542287c42ac987a4c95e","parents":["f881d616c90f8aadceea775718696e0f4f8d0a34"],"ref":"refs/changes/51/2451/12","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1506977641,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506703633,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506712894,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506976042,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506962980,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"SUBM","value":"1","grantedOn":1506979031,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/node_modules/hrtime.js","type":"ADDED","insertions":246,"deletions":0},{"file":"src/vm/node_modules/sysevent-stream.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/vm/node_modules/vmload/index.js","type":"MODIFIED","insertions":26,"deletions":-25},{"file":"src/vm/node_modules/vmload/vmload-datasets.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"src/vm/tests/test-hrtime.js","type":"ADDED","insertions":129,"deletions":0}],"sizeInsertions":413,"sizeDeletions":-28}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}]}