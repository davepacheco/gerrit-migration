From f18e6bace910d2c7f05897dfc7bb46237fd16c4f Mon Sep 17 00:00:00 2001
From: Cody Peter Mello <cody.mello@joyent.com>
Date: Sat, 4 May 2019 00:25:38 +0000
Subject: [PATCH] TRITON-1652 net-agent should create NICs using
 check_owner=false

---
 lib/nic-fsm.js | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/lib/nic-fsm.js b/lib/nic-fsm.js
index 984625a..dd4c1bc 100644
--- a/lib/nic-fsm.js
+++ b/lib/nic-fsm.js
@@ -309,9 +309,11 @@ NicFSM.prototype.state_create = function (S) {
         S.gotoState('waiting');
     }
 
-    self.log.info({ nic: self.local }, 'Syncing local NIC to NAPI');
+    var remcreate = Object.assign({ check_owner: false }, self.local);
 
-    self.app.napi.createNic(self.mac, self.local, S.callback(afterCreate));
+    self.log.info({ nic: remcreate }, 'Syncing local NIC to NAPI');
+
+    self.app.napi.createNic(self.mac, remcreate, S.callback(afterCreate));
 };
 
 NicFSM.prototype.state_update = function (S) {
-- 
2.21.0

