{"project":"joyent/sdc-headnode","branch":"master","id":"Ica89347953e2d28c28dd07d0b3c3b7567151e9b0","number":"1920","subject":"HEAD-2361 support multi-level incremental core images for sdc-headnode build and headnode setup Reviewed by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e","owner":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"url":"https://cr.joyent.us/1920","commitMessage":"HEAD-2361 support multi-level incremental core images for sdc-headnode build and headnode setup\nReviewed by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e\n","createdOn":1494354338,"lastUpdated":1496427824,"open":false,"status":"MERGED","comments":[{"timestamp":1494354338,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 1."},{"timestamp":1494354340,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit d677d54668c70ef79c98cf7cb9627516e0d6fb12\n    \n    fix make check\n    \n    commit ca7d7cf4bb15ebd97e6a2f909bdde5bee0d1fc3b\n    \n    tweak console output for image importing\n    \n    commit edac4ef1573e694093e55bb0fb201d46e8c1ba88\n    \n    fix \u0027bits-dir\u0027 downloading\n    \n    commit 7dd88c609d124060eeb7185ac1e4adea79f91fd8\n    \n    fix mod_fs; improve console output for headnode setup\n    \n    commit bcf608e7a32ffeec26c394de4d9ae248f0b86cd0\n    \n    HEAD-2361: first pass, haven\u0027t yet tested source\u003dbits-dir"},{"timestamp":1494354469,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1494374291,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 2."},{"timestamp":1494374293,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 969b48ea49ed0ad40b26ac2ae16390150376c063\n    \n    update dev docs for having dropped \u0027images\u0027 from build.spec; use \u0027.imgfile\u0027 consistently in the cache/ dir"},{"timestamp":1494374424,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1496352583,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 2:\n\n(14 comments)"},{"timestamp":1496354412,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 3."},{"timestamp":1496354414,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit f6ed6fef93241cbb65267cf99f6ed94af29895c1\n    \n    updates from CR"},{"timestamp":1496354426,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(13 comments)"},{"timestamp":1496354479,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1496354525,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1496354655,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1496355924,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 4."},{"timestamp":1496355925,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 6b173b6101f75d2e333a61ac11abf0908294a775\n    \n    updates from CR\n    \n    commit b765c3a9efb7505b903adf21868ea8b6471c6f91\n    \n    update dev docs for having dropped \u0027images\u0027 from build.spec; use \u0027.imgfile\u0027 consistently in the cache/ dir\n    \n    commit 233b2513a717b06cee53c65bcf17e31c479ebb43\n    \n    fix make check\n    \n    commit 3312e08a9cf4ad5d5c3d72483c6aaca32114c376\n    \n    tweak console output for image importing\n    \n    commit 47d7b6a16ff2b41e7994031344cfa4921ce0e17a\n    \n    fix \u0027bits-dir\u0027 downloading\n    \n    commit 977ae819074509cdd44d2d5fda3fd43606c2300b\n    \n    fix mod_fs; improve console output for headnode setup\n    \n    commit 5d4c20423ac6384c7657a2eb7dd418bbccc85782\n    \n    HEAD-2361: first pass, haven\u0027t yet tested source\u003dbits-dir"},{"timestamp":1496356072,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1496356137,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1496356162,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4: Integration-Approval+1"},{"timestamp":1496427766,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1496427803,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 6: Commit message was updated."},{"timestamp":1496427824,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Trent Mick"}],"currentPatchSet":{"number":"6","revision":"b9ac8cc6c5a04fecfba333f11109b87445be62f3","parents":["6212304752c06f3a71486563817d0e640a594dd1"],"ref":"refs/changes/20/1920/6","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1496427803,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1496356072,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1496356137,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1496356162,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1496427824,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":19,"deletions":-46},{"file":"bin/build-tar-image","type":"MODIFIED","insertions":74,"deletions":-104},{"file":"build.spec","type":"MODIFIED","insertions":0,"deletions":-33},{"file":"buildtools/novus/cmd/downloader.js","type":"MODIFIED","insertions":92,"deletions":-51},{"file":"buildtools/novus/lib/bits_from/dir.js","type":"MODIFIED","insertions":35,"deletions":-12},{"file":"buildtools/novus/lib/bits_from/image.js","type":"MODIFIED","insertions":16,"deletions":-12},{"file":"buildtools/novus/lib/bits_from/manta.js","type":"MODIFIED","insertions":73,"deletions":-27},{"file":"buildtools/novus/lib/common.js","type":"MODIFIED","insertions":110,"deletions":-5},{"file":"buildtools/novus/lib/work/download_file.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"scripts/build-payload.js","type":"MODIFIED","insertions":22,"deletions":-23},{"file":"scripts/headnode.sh","type":"MODIFIED","insertions":41,"deletions":-109},{"file":"scripts/setup_manta_zone.sh","type":"MODIFIED","insertions":48,"deletions":-27}],"sizeInsertions":532,"sizeDeletions":-451},"patchSets":[{"number":"1","revision":"3d72f340c4206cd12d62b7eb62003877a0430ea6","parents":["aeb7ea57c9a548dd1489cf7bd6566a16ec396415"],"ref":"refs/changes/20/1920/1","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1494354338,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1494354469,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"bin/build-tar-image","type":"MODIFIED","insertions":74,"deletions":-104},{"file":"build.spec","type":"MODIFIED","insertions":0,"deletions":-33},{"file":"buildtools/novus/cmd/downloader.js","type":"MODIFIED","insertions":92,"deletions":-51},{"file":"buildtools/novus/lib/bits_from/dir.js","type":"MODIFIED","insertions":35,"deletions":-12},{"file":"buildtools/novus/lib/bits_from/image.js","type":"MODIFIED","insertions":15,"deletions":-12},{"file":"buildtools/novus/lib/bits_from/manta.js","type":"MODIFIED","insertions":73,"deletions":-27},{"file":"buildtools/novus/lib/common.js","type":"MODIFIED","insertions":110,"deletions":-5},{"file":"buildtools/novus/lib/work/download_file.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"scripts/build-payload.js","type":"MODIFIED","insertions":22,"deletions":-23},{"file":"scripts/headnode.sh","type":"MODIFIED","insertions":41,"deletions":-109},{"file":"scripts/setup_manta_zone.sh","type":"MODIFIED","insertions":48,"deletions":-27}],"sizeInsertions":511,"sizeDeletions":-404},{"number":"2","revision":"a44ed4381bc6dcc71b42d82d9f90a0fe49c4269f","parents":["aeb7ea57c9a548dd1489cf7bd6566a16ec396415"],"ref":"refs/changes/20/1920/2","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1494374291,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1494374424,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"bin/build-tar-image","line":600,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"IIUC, this assumes that if one level of origin image is already in images/, all \"parent\" images are also present. Is that a safe assumption?"},{"file":"bin/build-tar-image","line":600,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Yup, that\u0027s s safe assumption. If that\u0027s not the case then there is a bug in whatever code put that image in $STAGE/images.  If there was an earlier failed build, we should be fine because (IIRC), \"$STAGE\" is deleted and fully created on a new build."},{"file":"buildtools/novus/cmd/downloader.js","line":228,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"nit: name the forEach callback."},{"file":"buildtools/novus/cmd/downloader.js","line":228,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Done"},{"file":"buildtools/novus/cmd/downloader.js","line":286,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Is this code duplicated from the \"imgapi\" case above? If so, it might be worth it to factor it out in a single function."},{"file":"buildtools/novus/cmd/downloader.js","line":286,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"In this case: with a small block, but operating on 4 vars, I think it would a wash on which (factored out or not) is more clear."},{"file":"buildtools/novus/cmd/downloader.js","line":291,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"nit: name the forEach callback."},{"file":"buildtools/novus/cmd/downloader.js","line":291,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Done"},{"file":"buildtools/novus/lib/bits_from/image.js","line":47,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"nit: name the callback function."},{"file":"buildtools/novus/lib/bits_from/image.js","line":47,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Done"},{"file":"buildtools/novus/lib/bits_from/image.js","line":123,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Pardon my ignorance, are all origin images always in updates.joyent.com?"},{"file":"buildtools/novus/lib/bits_from/image.js","line":123,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Yes. It is a consistency error (and a bug on that repo) if an IMGAPI repo has an image but not its full ancestry."},{"file":"buildtools/novus/lib/bits_from/manta.js","line":183,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"nit: name that callback."},{"file":"buildtools/novus/lib/bits_from/manta.js","line":183,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Done"},{"file":"buildtools/novus/lib/bits_from/manta.js","line":224,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"nit: name that callback."},{"file":"buildtools/novus/lib/bits_from/manta.js","line":224,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Done"},{"file":"buildtools/novus/lib/common.js","line":62,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"nit: assert on the type of parameters?"},{"file":"buildtools/novus/lib/common.js","line":62,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I opted not to bother repeating the exact same asserts done in the `get_via_http` that we immediately call."},{"file":"buildtools/novus/lib/common.js","line":153,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"nit: name that callback."},{"file":"buildtools/novus/lib/common.js","line":153,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Done"},{"file":"buildtools/novus/lib/work/download_file.js","line":9,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"missing copyright update."},{"file":"buildtools/novus/lib/work/download_file.js","line":9,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Done"},{"file":"scripts/build-payload.js","line":96,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Is it worth checking that \"data\" is actually a string?"},{"file":"scripts/build-payload.js","line":96,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"My read of fs.readFile is that, given an encoding and no \u0027err\u0027, it is always a string."},{"file":"scripts/headnode.sh","line":764,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Pardon my ignorance again, what is the difference between sdc-imgadm import and imgadm install? Is the reason we\u0027re not doing the former here because at this point core services (e.g IMGAPI) are not available, which is represented by the setup_state_not_seen \"sdczones_created\" guard?"},{"file":"scripts/headnode.sh","line":764,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"sdc-imgadm import -\u003e import to the IMGAPI in this DC\n\nimgadm import -\u003e import the dataset into the zpool on this server\n\nCorrect. We do \u0027sdc-imgadm import\u0027 of these images later after IMGAPI and the stack have been created."},{"file":"scripts/setup_manta_zone.sh","line":95,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Is there a reason why this ls invocation does not redirect stderr to /dev/null contrary to the previous one?"},{"file":"scripts/setup_manta_zone.sh","line":95,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":19,"deletions":-46},{"file":"bin/build-tar-image","type":"MODIFIED","insertions":74,"deletions":-104},{"file":"build.spec","type":"MODIFIED","insertions":0,"deletions":-33},{"file":"buildtools/novus/cmd/downloader.js","type":"MODIFIED","insertions":92,"deletions":-51},{"file":"buildtools/novus/lib/bits_from/dir.js","type":"MODIFIED","insertions":35,"deletions":-12},{"file":"buildtools/novus/lib/bits_from/image.js","type":"MODIFIED","insertions":15,"deletions":-12},{"file":"buildtools/novus/lib/bits_from/manta.js","type":"MODIFIED","insertions":73,"deletions":-27},{"file":"buildtools/novus/lib/common.js","type":"MODIFIED","insertions":110,"deletions":-5},{"file":"buildtools/novus/lib/work/download_file.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"scripts/build-payload.js","type":"MODIFIED","insertions":22,"deletions":-23},{"file":"scripts/headnode.sh","type":"MODIFIED","insertions":41,"deletions":-109},{"file":"scripts/setup_manta_zone.sh","type":"MODIFIED","insertions":48,"deletions":-27}],"sizeInsertions":530,"sizeDeletions":-450},{"number":"3","revision":"92b1304ebcda1727f94f5f823c5c8d4f629830f0","parents":["aeb7ea57c9a548dd1489cf7bd6566a16ec396415"],"ref":"refs/changes/20/1920/3","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1496354412,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1496354525,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1496354655,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":19,"deletions":-46},{"file":"bin/build-tar-image","type":"MODIFIED","insertions":74,"deletions":-104},{"file":"build.spec","type":"MODIFIED","insertions":0,"deletions":-33},{"file":"buildtools/novus/cmd/downloader.js","type":"MODIFIED","insertions":92,"deletions":-51},{"file":"buildtools/novus/lib/bits_from/dir.js","type":"MODIFIED","insertions":35,"deletions":-12},{"file":"buildtools/novus/lib/bits_from/image.js","type":"MODIFIED","insertions":16,"deletions":-12},{"file":"buildtools/novus/lib/bits_from/manta.js","type":"MODIFIED","insertions":73,"deletions":-27},{"file":"buildtools/novus/lib/common.js","type":"MODIFIED","insertions":110,"deletions":-5},{"file":"buildtools/novus/lib/work/download_file.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"scripts/build-payload.js","type":"MODIFIED","insertions":22,"deletions":-23},{"file":"scripts/headnode.sh","type":"MODIFIED","insertions":41,"deletions":-109},{"file":"scripts/setup_manta_zone.sh","type":"MODIFIED","insertions":48,"deletions":-27}],"sizeInsertions":532,"sizeDeletions":-451},{"number":"4","revision":"0d7875ee1c7274ae121b93437dd5ae5a762d5df2","parents":["6212304752c06f3a71486563817d0e640a594dd1"],"ref":"refs/changes/20/1920/4","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1496355924,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1496356072,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1496356162,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1496356137,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":19,"deletions":-46},{"file":"bin/build-tar-image","type":"MODIFIED","insertions":74,"deletions":-104},{"file":"build.spec","type":"MODIFIED","insertions":0,"deletions":-33},{"file":"buildtools/novus/cmd/downloader.js","type":"MODIFIED","insertions":92,"deletions":-51},{"file":"buildtools/novus/lib/bits_from/dir.js","type":"MODIFIED","insertions":35,"deletions":-12},{"file":"buildtools/novus/lib/bits_from/image.js","type":"MODIFIED","insertions":16,"deletions":-12},{"file":"buildtools/novus/lib/bits_from/manta.js","type":"MODIFIED","insertions":73,"deletions":-27},{"file":"buildtools/novus/lib/common.js","type":"MODIFIED","insertions":110,"deletions":-5},{"file":"buildtools/novus/lib/work/download_file.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"scripts/build-payload.js","type":"MODIFIED","insertions":22,"deletions":-23},{"file":"scripts/headnode.sh","type":"MODIFIED","insertions":41,"deletions":-109},{"file":"scripts/setup_manta_zone.sh","type":"MODIFIED","insertions":48,"deletions":-27}],"sizeInsertions":532,"sizeDeletions":-451},{"number":"5","revision":"ca89347953e2d28c28dd07d0b3c3b7567151e9b0","parents":["6212304752c06f3a71486563817d0e640a594dd1"],"ref":"refs/changes/20/1920/5","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1496427766,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1496356072,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1496356162,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1496356137,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":19,"deletions":-46},{"file":"bin/build-tar-image","type":"MODIFIED","insertions":74,"deletions":-104},{"file":"build.spec","type":"MODIFIED","insertions":0,"deletions":-33},{"file":"buildtools/novus/cmd/downloader.js","type":"MODIFIED","insertions":92,"deletions":-51},{"file":"buildtools/novus/lib/bits_from/dir.js","type":"MODIFIED","insertions":35,"deletions":-12},{"file":"buildtools/novus/lib/bits_from/image.js","type":"MODIFIED","insertions":16,"deletions":-12},{"file":"buildtools/novus/lib/bits_from/manta.js","type":"MODIFIED","insertions":73,"deletions":-27},{"file":"buildtools/novus/lib/common.js","type":"MODIFIED","insertions":110,"deletions":-5},{"file":"buildtools/novus/lib/work/download_file.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"scripts/build-payload.js","type":"MODIFIED","insertions":22,"deletions":-23},{"file":"scripts/headnode.sh","type":"MODIFIED","insertions":41,"deletions":-109},{"file":"scripts/setup_manta_zone.sh","type":"MODIFIED","insertions":48,"deletions":-27}],"sizeInsertions":532,"sizeDeletions":-451},{"number":"6","revision":"b9ac8cc6c5a04fecfba333f11109b87445be62f3","parents":["6212304752c06f3a71486563817d0e640a594dd1"],"ref":"refs/changes/20/1920/6","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1496427803,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1496356072,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1496356162,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1496427824,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1496356137,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":19,"deletions":-46},{"file":"bin/build-tar-image","type":"MODIFIED","insertions":74,"deletions":-104},{"file":"build.spec","type":"MODIFIED","insertions":0,"deletions":-33},{"file":"buildtools/novus/cmd/downloader.js","type":"MODIFIED","insertions":92,"deletions":-51},{"file":"buildtools/novus/lib/bits_from/dir.js","type":"MODIFIED","insertions":35,"deletions":-12},{"file":"buildtools/novus/lib/bits_from/image.js","type":"MODIFIED","insertions":16,"deletions":-12},{"file":"buildtools/novus/lib/bits_from/manta.js","type":"MODIFIED","insertions":73,"deletions":-27},{"file":"buildtools/novus/lib/common.js","type":"MODIFIED","insertions":110,"deletions":-5},{"file":"buildtools/novus/lib/work/download_file.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"scripts/build-payload.js","type":"MODIFIED","insertions":22,"deletions":-23},{"file":"scripts/headnode.sh","type":"MODIFIED","insertions":41,"deletions":-109},{"file":"scripts/setup_manta_zone.sh","type":"MODIFIED","insertions":48,"deletions":-27}],"sizeInsertions":532,"sizeDeletions":-451}],"allReviewers":[{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}]}