{"project":"joyent/sdc-adminui","branch":"master","id":"Ib28abec97c7fdb833e793bfcc3841297cd2e3c67","number":"1301","subject":"ADMINUI-2352 Want Ability to Force VM\u0027s From Provisioning State in AdminUI Reviewed by: Marsell Kukuljevic","owner":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"url":"https://cr.joyent.us/1301","commitMessage":"ADMINUI-2352 Want Ability to Force VM\u0027s From Provisioning State in AdminUI\nReviewed by: Marsell Kukuljevic\n","createdOn":1484945471,"lastUpdated":1490196350,"open":false,"status":"MERGED","comments":[{"timestamp":1484945471,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"Uploaded patch set 1."},{"timestamp":1484945503,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1489185651,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"Uploaded patch set 2."},{"timestamp":1489185683,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1489484824,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 2:\n\n(6 comments)"},{"timestamp":1490167934,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"Patch Set 3: Patch Set 2 was rebased"},{"timestamp":1490167966,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3:\n\n\"make check\" passed ok"},{"timestamp":1490168019,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"Uploaded patch set 4."},{"timestamp":1490168057,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1490168469,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"Patch Set 4:\n\n(4 comments)"},{"timestamp":1490173451,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1"},{"timestamp":1490196342,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"Patch Set 5: Commit message was updated."},{"timestamp":1490196350,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Angela Fong"}],"currentPatchSet":{"number":"5","revision":"d0d637eadf257d4a107d2328938ffd666cfd4002","parents":["7c701fde0fdafeed63e53e8b17d9e9bcd7bcb7a7"],"ref":"refs/changes/01/1301/5","uploader":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"createdOn":1490196342,"author":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1490168057,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1490173451,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1490173451,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"SUBM","value":"1","grantedOn":1490196350,"by":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/utils.js","type":"MODIFIED","insertions":28,"deletions":0},{"file":"lib/vms.js","type":"MODIFIED","insertions":21,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"www/js/components/pages/vm/index.jsx","type":"MODIFIED","insertions":11,"deletions":0},{"file":"www/js/models/vm.js","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":67,"sizeDeletions":-3},"patchSets":[{"number":"1","revision":"7844a584dd6e5534a9a938b0651247bb5ac35cad","parents":["a3cd71de3bed3c7870048301968222d6c05108d4"],"ref":"refs/changes/01/1301/1","uploader":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"createdOn":1484945471,"author":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1484945503,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/utils.js","type":"MODIFIED","insertions":28,"deletions":0},{"file":"lib/vms.js","type":"MODIFIED","insertions":25,"deletions":-2},{"file":"www/js/components/pages/vm/index.jsx","type":"MODIFIED","insertions":7,"deletions":0},{"file":"www/js/models/vm.js","type":"MODIFIED","insertions":4,"deletions":0}],"sizeInsertions":64,"sizeDeletions":-2},{"number":"2","revision":"acbdea0b46ea02ed25b9ac21cd51cb84a8c5d4bb","parents":["a3cd71de3bed3c7870048301968222d6c05108d4"],"ref":"refs/changes/01/1301/2","uploader":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"createdOn":1489185651,"author":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489185683,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/utils.js","line":37,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"s/is/if/"},{"file":"lib/utils.js","line":37,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"Done"},{"file":"lib/utils.js","line":41,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Although this file doesn\u0027t use assert-plus yet, maybe consider adding asserts for these types?"},{"file":"lib/vms.js","line":289,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"This block could be omitted if params.sync was assigned directly in the try {} section."},{"file":"lib/vms.js","line":289,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"Done"},{"file":"www/js/components/pages/vm/index.jsx","line":512,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"I think getSync() should take a callback, to ensure that the subsequent reloadData() is only invoked after a successful getSync() completion."},{"file":"www/js/components/pages/vm/index.jsx","line":512,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"The sync action is asynchronous and the timing is not deterministic for the reload to always get the post-sync data. I\u0027ve tried several things but none has worked consistently so far due to timing issue. As such, I am changing to just return just the state. User will have to reload the page if they want to view the vm data after sync."},{"file":"www/js/components/pages/vm/index.jsx","line":513,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Is it plausible to put this after this.reloadData()?"},{"file":"www/js/models/vm.js","line":85,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Where\u0027s the callback?"},{"file":"www/js/models/vm.js","line":85,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/utils.js","type":"MODIFIED","insertions":28,"deletions":0},{"file":"lib/vms.js","type":"MODIFIED","insertions":25,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"www/js/components/pages/vm/index.jsx","type":"MODIFIED","insertions":7,"deletions":0},{"file":"www/js/models/vm.js","type":"MODIFIED","insertions":4,"deletions":0}],"sizeInsertions":65,"sizeDeletions":-3},{"number":"3","revision":"b1cff0f4c560bb0e62008c051c334e82dbdf8511","parents":["7c701fde0fdafeed63e53e8b17d9e9bcd7bcb7a7"],"ref":"refs/changes/01/1301/3","uploader":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"createdOn":1490167934,"author":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489185683,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/utils.js","type":"MODIFIED","insertions":28,"deletions":0},{"file":"lib/vms.js","type":"MODIFIED","insertions":25,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"www/js/components/pages/vm/index.jsx","type":"MODIFIED","insertions":7,"deletions":0},{"file":"www/js/models/vm.js","type":"MODIFIED","insertions":4,"deletions":0}],"sizeInsertions":65,"sizeDeletions":-3},{"number":"4","revision":"b28abec97c7fdb833e793bfcc3841297cd2e3c67","parents":["7c701fde0fdafeed63e53e8b17d9e9bcd7bcb7a7"],"ref":"refs/changes/01/1301/4","uploader":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"createdOn":1490168019,"author":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1490168057,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1490173451,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1490173451,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/utils.js","type":"MODIFIED","insertions":28,"deletions":0},{"file":"lib/vms.js","type":"MODIFIED","insertions":21,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"www/js/components/pages/vm/index.jsx","type":"MODIFIED","insertions":11,"deletions":0},{"file":"www/js/models/vm.js","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":67,"sizeDeletions":-3},{"number":"5","revision":"d0d637eadf257d4a107d2328938ffd666cfd4002","parents":["7c701fde0fdafeed63e53e8b17d9e9bcd7bcb7a7"],"ref":"refs/changes/01/1301/5","uploader":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"createdOn":1490196342,"author":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1490168057,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1490173451,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1490173451,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"SUBM","value":"1","grantedOn":1490196350,"by":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/utils.js","type":"MODIFIED","insertions":28,"deletions":0},{"file":"lib/vms.js","type":"MODIFIED","insertions":21,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"www/js/components/pages/vm/index.jsx","type":"MODIFIED","insertions":11,"deletions":0},{"file":"www/js/models/vm.js","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":67,"sizeDeletions":-3}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"}]}