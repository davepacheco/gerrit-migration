{"project":"joyent/smartos-live","branch":"master","id":"I2add05ddf6c15e71369970868a07cfc394e677e9","number":"2573","subject":"IMGAPI-640 Want sdc:operator-script to run before smf services start during image creation.","owner":{"name":"Sam Gwydir","email":"sam.gwydir@joyent.com","username":"gwydirsam"},"url":"https://cr.joyent.us/2573","commitMessage":"IMGAPI-640 Want sdc:operator-script to run before smf services start during image creation.\n","createdOn":1505412842,"lastUpdated":1573153701,"open":false,"status":"ABANDONED","comments":[{"timestamp":1505412842,"reviewer":{"name":"Sam Gwydir","email":"sam.gwydir@joyent.com","username":"gwydirsam"},"message":"Uploaded patch set 1."},{"timestamp":1505412882,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1505414208,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\n(5 comments)"},{"timestamp":1573153701,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Abandoned"}],"currentPatchSet":{"number":"1","revision":"2add05ddf6c15e71369970868a07cfc394e677e9","parents":["0a6ef7ee6fe4541386a352881e0834b37835578f"],"ref":"refs/changes/73/2573/1","uploader":{"name":"Sam Gwydir","email":"sam.gwydir@joyent.com","username":"gwydirsam"},"createdOn":1505412842,"author":{"name":"Sam Gwydir","email":"sam.gwydir@joyent.com","username":"gwydirsam"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505412882,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"/COMMIT_MSG","line":7,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Should this ticket be updated to state that the work is only fixing this for \u0027smartos\u0027 image creation and not for KVM (i.e. linux/freebsd) image creation?"},{"file":"overlay/generic/lib/svc/method/mdata-operator-script","line":30,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Can we set `set -o errexit` and `set -o pipefail` for new bash scripts?"},{"file":"overlay/generic/lib/svc/method/mdata-operator-script","line":59,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"We aren\u0027t at the user-script yet, now that this is here."},{"file":"overlay/generic/lib/svc/method/mdata-operator-script","line":63,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Was setting /var/svc/provision_success found to be necesasry for the image creation process?"},{"file":"overlay/generic/lib/svc/method/mdata-operator-script","line":74,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"That isn\u0027t a var here."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"overlay/generic/lib/svc/manifest/system/mdata-operator-script.xml","type":"ADDED","insertions":29,"deletions":0},{"file":"overlay/generic/lib/svc/method/mdata-execute","type":"MODIFIED","insertions":0,"deletions":-9},{"file":"overlay/generic/lib/svc/method/mdata-operator-script","type":"ADDED","insertions":74,"deletions":0},{"file":"overlay/generic/manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"overlay/generic/usr/lib/brand/joyent-minimal/manifests","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":106,"sizeDeletions":-9},"patchSets":[{"number":"1","revision":"2add05ddf6c15e71369970868a07cfc394e677e9","parents":["0a6ef7ee6fe4541386a352881e0834b37835578f"],"ref":"refs/changes/73/2573/1","uploader":{"name":"Sam Gwydir","email":"sam.gwydir@joyent.com","username":"gwydirsam"},"createdOn":1505412842,"author":{"name":"Sam Gwydir","email":"sam.gwydir@joyent.com","username":"gwydirsam"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505412882,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"/COMMIT_MSG","line":7,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Should this ticket be updated to state that the work is only fixing this for \u0027smartos\u0027 image creation and not for KVM (i.e. linux/freebsd) image creation?"},{"file":"overlay/generic/lib/svc/method/mdata-operator-script","line":30,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Can we set `set -o errexit` and `set -o pipefail` for new bash scripts?"},{"file":"overlay/generic/lib/svc/method/mdata-operator-script","line":59,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"We aren\u0027t at the user-script yet, now that this is here."},{"file":"overlay/generic/lib/svc/method/mdata-operator-script","line":63,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Was setting /var/svc/provision_success found to be necesasry for the image creation process?"},{"file":"overlay/generic/lib/svc/method/mdata-operator-script","line":74,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"That isn\u0027t a var here."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"overlay/generic/lib/svc/manifest/system/mdata-operator-script.xml","type":"ADDED","insertions":29,"deletions":0},{"file":"overlay/generic/lib/svc/method/mdata-execute","type":"MODIFIED","insertions":0,"deletions":-9},{"file":"overlay/generic/lib/svc/method/mdata-operator-script","type":"ADDED","insertions":74,"deletions":0},{"file":"overlay/generic/manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"overlay/generic/usr/lib/brand/joyent-minimal/manifests","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":106,"sizeDeletions":-9}],"allReviewers":[{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Joyent Automation","username":"joyent-automation"}]}