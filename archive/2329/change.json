{"project":"joyent/node-skinner","branch":"master","id":"Idb7c40bd3f9e6cde3c102fc01744624a26480afa","number":"2329","subject":"joyent/node-skinner#8 skAggregator.result() should honor resultsAsPoints joyent/node-skinner#9 skinner repo needs some TLC","owner":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"url":"https://cr.joyent.us/2329","commitMessage":"joyent/node-skinner#8 skAggregator.result() should honor resultsAsPoints\njoyent/node-skinner#9 skinner repo needs some TLC\n","createdOn":1501789908,"lastUpdated":1512689695,"open":true,"status":"NEW","comments":[{"timestamp":1501789908,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 1."},{"timestamp":1501789933,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1501790157,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 2."},{"timestamp":1501790186,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1501790193,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 2:\n\nSorry, patch set 2 is just updating the new CHANGES.md file"},{"timestamp":1501792604,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 2:\n\nI did a number of things here for the TLC portion:\n* Use the makefiles from eng.git\n* Add submodules for jssyle, jslint, and restdown\n* Updated jsprim dep, use node-assert-plus\n* Cleaned up assertions in skinner.js using assert-plus\n* Added CONTRIBUTING and CHANGES files\n* Made some style changes to have the javascript more closely resemble our current style\n\nFor the resultsAsPoints issue, I separated current functionality into two separate functions. There are new resultsAsPoints() and resultsAsSum() functions in skinner.js, which are each called by result(). _flush() just calls result() and then \u0027pushes\u0027 the return value onto itself."},{"timestamp":1501792762,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2:\n\n(13 comments)\n\nThanks for doing all this cleanup?  I have not yet looked at lib/skinner.js, but I thought I\u0027d post these notes about the rest."},{"timestamp":1501792900,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2:\n\n(3 comments)"},{"timestamp":1501793711,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 2:\n\n(3 comments)\n\nThanks for taking a look! I\u0027ll start on revisions."},{"timestamp":1501800766,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 3."},{"timestamp":1501800769,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1501800828,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 3:\n\n(13 comments)\n\nI think that I\u0027ve addressed your initial feedback. Thanks for taking a look."},{"timestamp":1502390572,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 3:\n\n(5 comments)\n\nThanks for addressing all that.\n\nI still haven\u0027t looked at skinner.js yet."},{"timestamp":1502390704,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 3:\n\n(2 comments)"},{"timestamp":1503606974,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 4."},{"timestamp":1503606977,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1503607180,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 4:\n\n(1 comment)\n\nThanks!\n\nPatch set 4 should address the things you mentioned. I guess I accidentally made some of these changes on the branch I have for node-skinner#10, so they didn\u0027t make it into this CR.\n\nShould we keep this version at 0.4.0, since I have a couple other things in mind I\u0027d like to add? Notably node-skinner#10, but I may find a bug or two along the way while doing the node-artedi#4 work."},{"timestamp":1512689695,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 4:\n\n(5 comments)\n\nSorry to have been such a bum in looking at this!"}],"currentPatchSet":{"number":"4","revision":"db7c40bd3f9e6cde3c102fc01744624a26480afa","parents":["b9da9810f7af7e8fb6a4fe27a48367926b3ec2ef"],"ref":"refs/changes/29/2329/4","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1503606974,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1503606977,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/skinner.js","line":369,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Was there a reason to remove these assertions?"},{"file":"lib/skinner.js","line":308,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This is slightly different from what was there before.  Before, \"objectMode\" was always true, and highWaterMark only defaulted to 0.  (It could be overridden.)  This version allows the caller to override objectMode, which I don\u0027t think we want."},{"file":"lib/skinner.js","line":498,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"It seems like _flush() used to push individual data points, but now pushes an array of points.  I figure I must be missing something, though."},{"file":"lib/skinner.js","line":585,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Shouldn\u0027t we keep the isNaN assertions here?"},{"file":"tests/tst.basic.js","line":137,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Another thing about this file: I think this repo is pretty consistent in two style items that aren\u0027t written down: (1) quoting property names in object literals, and (2) 4-space indents within object literals."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"CHANGES.md","type":"ADDED","insertions":5,"deletions":0},{"file":"CONTRIBUTING.md","type":"ADDED","insertions":19,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":31,"deletions":-19},{"file":"README.md","type":"MODIFIED","insertions":12,"deletions":0},{"file":"lib/skinner.js","type":"MODIFIED","insertions":91,"deletions":-77},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"tests/tst.basic.js","type":"MODIFIED","insertions":78,"deletions":-10},{"file":"tests/tst.bucketize_linear.js","type":"MODIFIED","insertions":19,"deletions":-15},{"file":"tests/tst.bucketize_loglinear.js","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"tests/tst.bucketize_p2.js","type":"MODIFIED","insertions":18,"deletions":-14},{"file":"tests/tst.nonnumeric.js","type":"MODIFIED","insertions":12,"deletions":-7},{"file":"tools/jsl.node.conf","fileOld":"jsl.node.conf","type":"RENAMED","insertions":73,"deletions":-75},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":97,"deletions":0},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.targ","fileOld":"Makefile.targ","type":"RENAMED","insertions":34,"deletions":-9}],"sizeInsertions":604,"sizeDeletions":-233},"patchSets":[{"number":"1","revision":"832aedb9dbb682de8bb79613b558ae9b3e9dd2b7","parents":["b9da9810f7af7e8fb6a4fe27a48367926b3ec2ef"],"ref":"refs/changes/29/2329/1","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1501789908,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1501789933,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":5,"deletions":-1},{"file":".gitmodules","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"ADDED","insertions":0,"deletions":0},{"file":"CONTRIBUTING.md","type":"ADDED","insertions":16,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":56,"deletions":-24},{"file":"README.md","type":"MODIFIED","insertions":12,"deletions":0},{"file":"deps/javascriptlint","type":"ADDED","insertions":1,"deletions":0},{"file":"deps/jsstyle","type":"ADDED","insertions":1,"deletions":0},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"lib/skinner.js","type":"MODIFIED","insertions":83,"deletions":-98},{"file":"package.json","type":"MODIFIED","insertions":15,"deletions":-14},{"file":"test/tst.basic.js","fileOld":"tests/tst.basic.js","type":"RENAMED","insertions":32,"deletions":-1},{"file":"test/tst.bucketize_linear.js","fileOld":"tests/tst.bucketize_linear.js","type":"RENAMED","insertions":5,"deletions":-1},{"file":"test/tst.bucketize_loglinear.js","fileOld":"tests/tst.bucketize_loglinear.js","type":"RENAMED","insertions":4,"deletions":0},{"file":"test/tst.bucketize_p2.js","fileOld":"tests/tst.bucketize_p2.js","type":"RENAMED","insertions":4,"deletions":0},{"file":"test/tst.nonnumeric.js","fileOld":"tests/tst.nonnumeric.js","type":"RENAMED","insertions":4,"deletions":0},{"file":"tools/bashstyle","type":"ADDED","insertions":175,"deletions":0},{"file":"tools/jsl.node.conf","fileOld":"jsl.node.conf","type":"RENAMED","insertions":73,"deletions":-75},{"file":"tools/jsl.web.conf","fileOld":"jsl.node.conf","type":"COPIED","insertions":76,"deletions":-80},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":14,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":97,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"ADDED","insertions":54,"deletions":0},{"file":"tools/mk/Makefile.node.defs","type":"ADDED","insertions":110,"deletions":0},{"file":"tools/mk/Makefile.node.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"ADDED","insertions":159,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.targ","fileOld":"Makefile.targ","type":"RENAMED","insertions":34,"deletions":-9}],"sizeInsertions":1223,"sizeDeletions":-303},{"number":"2","revision":"55677a167ccf1d93a2d020340f7c62a91f81afc0","parents":["b9da9810f7af7e8fb6a4fe27a48367926b3ec2ef"],"ref":"refs/changes/29/2329/2","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1501790157,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1501790186,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":".gitmodules","line":0,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"FWIW, I\u0027ve generally been deliberately having standalone modules like this one _not_ ship and build their own jsl and jsstyle.  It adds a lot of time to the dev cycle, and I\u0027ve always got one on my path.  I\u0027m not sure how reasonable that is."},{"file":".gitmodules","line":0,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"},{"file":"Makefile","line":37,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"We don\u0027t usually include this stuff for standalone modules like this.  It\u0027s just for top-level components."},{"file":"Makefile","line":37,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"},{"file":"Makefile","line":68,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Ditto."},{"file":"Makefile","line":68,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"},{"file":"lib/skinner.js","line":243,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I\u0027d rather not apply this change in style rule, assuming this repo was pretty consistent about open braces on the next line."},{"file":"lib/skinner.js","line":243,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"},{"file":"lib/skinner.js","line":243,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"It seems like it\u0027s still changed in PS3?"},{"file":"lib/skinner.js","line":291,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I think this repo uses the standard tabs + 4-space continuation lines.  This looks like an extra tab on the continuation line."},{"file":"lib/skinner.js","line":291,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"},{"file":"lib/skinner.js","line":304,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This isn\u0027t the indent style used elsewhere here."},{"file":"lib/skinner.js","line":304,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"},{"file":"package.json","line":0,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Can we not re-indent this file?\n\nShould we go ahead and call this v1.0.0?"},{"file":"package.json","line":0,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"},{"file":"test/tst.basic.js","line":0,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I\u0027m not sure \"test\" or \"tests\" is standardized everywhere so I don\u0027t know that we need to rename it, but it\u0027s fine."},{"file":"test/tst.basic.js","line":0,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Nice. I\u0027ll switch it back. The default Makefile complains because it looks for js files in \u0027test/\u0027, but I can change that."},{"file":"test/tst.basic.js","line":5,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I like to use \"mod_assertplus\" instead of \"mod_assert\" so that when code gets moved around between files, people will notice at lint-time if they\u0027ve included the wrong one.  What about renaming uses of mod_assert in this file?"},{"file":"test/tst.basic.js","line":5,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done. I also changed the rest of the tst.* files to remain consistent."},{"file":"test/tst.bucketize_linear.js","line":5,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Same here."},{"file":"test/tst.bucketize_linear.js","line":5,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"},{"file":"tools/bashstyle","line":0,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Are there any bash scripts in this repo?"},{"file":"tools/bashstyle","line":0,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Nope! Removed."},{"file":"tools/jsl.node.conf","line":0,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Where did this new file come from?  It\u0027s pretty difficult to see all the changes."},{"file":"tools/jsl.node.conf","line":0,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"This (and most of the other new files) came from the eng.git repo. Sorry about the difficulty seeing changes. I haven\u0027t modified this from the eng.git copy."},{"file":"tools/jsl.web.conf","line":0,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I don\u0027t think we need this file."},{"file":"tools/jsl.web.conf","line":0,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"},{"file":"tools/jsstyle.conf","line":0,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Can we drop this file?  I think this repo uses all default values already."},{"file":"tools/jsstyle.conf","line":0,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"},{"file":"tools/jsstyle.conf","line":0,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Seems like it\u0027s still in PS3?"},{"file":"tools/mk/Makefile.defs","line":0,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I\u0027m assuming that the Makefiles in tools/mk are exactly as they currently appear in eng.git?"},{"file":"tools/mk/Makefile.defs","line":0,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Yes, I didn\u0027t modify any of those files. I removed some that I knew weren\u0027t being used."},{"file":"tools/mk/Makefile.node.defs","line":0,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I don\u0027t think we usually copy over files that we\u0027re not actually using."},{"file":"tools/mk/Makefile.node.defs","line":0,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":5,"deletions":-1},{"file":".gitmodules","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"ADDED","insertions":8,"deletions":0},{"file":"CONTRIBUTING.md","type":"ADDED","insertions":16,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":56,"deletions":-24},{"file":"README.md","type":"MODIFIED","insertions":12,"deletions":0},{"file":"deps/javascriptlint","type":"ADDED","insertions":1,"deletions":0},{"file":"deps/jsstyle","type":"ADDED","insertions":1,"deletions":0},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"lib/skinner.js","type":"MODIFIED","insertions":83,"deletions":-98},{"file":"package.json","type":"MODIFIED","insertions":15,"deletions":-14},{"file":"test/tst.basic.js","fileOld":"tests/tst.basic.js","type":"RENAMED","insertions":32,"deletions":-1},{"file":"test/tst.bucketize_linear.js","fileOld":"tests/tst.bucketize_linear.js","type":"RENAMED","insertions":5,"deletions":-1},{"file":"test/tst.bucketize_loglinear.js","fileOld":"tests/tst.bucketize_loglinear.js","type":"RENAMED","insertions":4,"deletions":0},{"file":"test/tst.bucketize_p2.js","fileOld":"tests/tst.bucketize_p2.js","type":"RENAMED","insertions":4,"deletions":0},{"file":"test/tst.nonnumeric.js","fileOld":"tests/tst.nonnumeric.js","type":"RENAMED","insertions":4,"deletions":0},{"file":"tools/bashstyle","type":"ADDED","insertions":175,"deletions":0},{"file":"tools/jsl.node.conf","fileOld":"jsl.node.conf","type":"RENAMED","insertions":73,"deletions":-75},{"file":"tools/jsl.web.conf","fileOld":"jsl.node.conf","type":"COPIED","insertions":76,"deletions":-80},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":14,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":97,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"ADDED","insertions":54,"deletions":0},{"file":"tools/mk/Makefile.node.defs","type":"ADDED","insertions":110,"deletions":0},{"file":"tools/mk/Makefile.node.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"ADDED","insertions":159,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.targ","fileOld":"Makefile.targ","type":"RENAMED","insertions":34,"deletions":-9}],"sizeInsertions":1231,"sizeDeletions":-303},{"number":"3","revision":"8b1632f28cf5b32219bd1302ce01acef878bde1a","parents":["b9da9810f7af7e8fb6a4fe27a48367926b3ec2ef"],"ref":"refs/changes/29/2329/3","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1501800766,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1501800769,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"Makefile","line":19,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Was it intentional that we\u0027re not linting the examples any more?"},{"file":"lib/skinner.js","line":223,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Can we change this to mod_assertplus too?"},{"file":"tests/tst.basic.js","line":132,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This is just food for thought: it might be nice to replace the existing tests with a function that checks both cases (i.e., streaming and non-streaming) so we get full coverage for all of these cases in both modes."},{"file":"tests/tst.basic.js","line":132,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"I agree! This is on my list."},{"file":"tests/tst.basic.js","line":138,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Is it worth making this case a little more interesting?  e.g., have two points with different values of the \"test\" field and making sure it aggregates them correctly?"},{"file":"tests/tst.bucketize_linear.js","line":5,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"FWIW, I don\u0027t think you need to replace this everywhere if we don\u0027t need anything from assertplus here (but it\u0027s fine to do that)."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"CHANGES.md","type":"ADDED","insertions":8,"deletions":0},{"file":"CONTRIBUTING.md","type":"ADDED","insertions":19,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":32,"deletions":-19},{"file":"README.md","type":"MODIFIED","insertions":12,"deletions":0},{"file":"lib/skinner.js","type":"MODIFIED","insertions":81,"deletions":-90},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"tests/tst.basic.js","type":"MODIFIED","insertions":40,"deletions":-9},{"file":"tests/tst.bucketize_linear.js","type":"MODIFIED","insertions":19,"deletions":-15},{"file":"tests/tst.bucketize_loglinear.js","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"tests/tst.bucketize_p2.js","type":"MODIFIED","insertions":18,"deletions":-14},{"file":"tests/tst.nonnumeric.js","type":"MODIFIED","insertions":12,"deletions":-7},{"file":"tools/jsl.node.conf","fileOld":"jsl.node.conf","type":"RENAMED","insertions":73,"deletions":-75},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":14,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":97,"deletions":0},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.targ","fileOld":"Makefile.targ","type":"RENAMED","insertions":34,"deletions":-9}],"sizeInsertions":575,"sizeDeletions":-246},{"number":"4","revision":"db7c40bd3f9e6cde3c102fc01744624a26480afa","parents":["b9da9810f7af7e8fb6a4fe27a48367926b3ec2ef"],"ref":"refs/changes/29/2329/4","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1503606974,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1503606977,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/skinner.js","line":369,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Was there a reason to remove these assertions?"},{"file":"lib/skinner.js","line":308,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This is slightly different from what was there before.  Before, \"objectMode\" was always true, and highWaterMark only defaulted to 0.  (It could be overridden.)  This version allows the caller to override objectMode, which I don\u0027t think we want."},{"file":"lib/skinner.js","line":498,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"It seems like _flush() used to push individual data points, but now pushes an array of points.  I figure I must be missing something, though."},{"file":"lib/skinner.js","line":585,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Shouldn\u0027t we keep the isNaN assertions here?"},{"file":"tests/tst.basic.js","line":137,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Another thing about this file: I think this repo is pretty consistent in two style items that aren\u0027t written down: (1) quoting property names in object literals, and (2) 4-space indents within object literals."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"CHANGES.md","type":"ADDED","insertions":5,"deletions":0},{"file":"CONTRIBUTING.md","type":"ADDED","insertions":19,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":31,"deletions":-19},{"file":"README.md","type":"MODIFIED","insertions":12,"deletions":0},{"file":"lib/skinner.js","type":"MODIFIED","insertions":91,"deletions":-77},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"tests/tst.basic.js","type":"MODIFIED","insertions":78,"deletions":-10},{"file":"tests/tst.bucketize_linear.js","type":"MODIFIED","insertions":19,"deletions":-15},{"file":"tests/tst.bucketize_loglinear.js","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"tests/tst.bucketize_p2.js","type":"MODIFIED","insertions":18,"deletions":-14},{"file":"tests/tst.nonnumeric.js","type":"MODIFIED","insertions":12,"deletions":-7},{"file":"tools/jsl.node.conf","fileOld":"jsl.node.conf","type":"RENAMED","insertions":73,"deletions":-75},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":97,"deletions":0},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.targ","fileOld":"Makefile.targ","type":"RENAMED","insertions":34,"deletions":-9}],"sizeInsertions":604,"sizeDeletions":-233}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}]}