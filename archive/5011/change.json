{"project":"joyent/illumos-joyent","branch":"master","topic":"TRITON-885","id":"I583897b77026a5a95bd0c9a9f5c0bc1524da3a9f","number":"5011","subject":"OS-7327 Want connstat(1M) command to display per-connection TCP statistics Portions contributed by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e Portions contributed by: Ahmed G \u003cahmedg@delphix.com\u003e Reviewed by: Jason King \u003cjason.king@joyent.com\u003e Reviewed by:","owner":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"url":"https://cr.joyent.us/5011","commitMessage":"OS-7327 Want connstat(1M) command to display per-connection TCP statistics\nPortions contributed by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e\nPortions contributed by: Ahmed G \u003cahmedg@delphix.com\u003e\nReviewed by: Jason King \u003cjason.king@joyent.com\u003e\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nReviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e\nApproved by: Dan McDonald \u003cdanmcd@joyent.com\u003e\n","createdOn":1540918280,"lastUpdated":1553893013,"open":false,"status":"MERGED","comments":[{"timestamp":1540918280,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 1."},{"timestamp":1540918313,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Topic set to TRITON-885"},{"timestamp":1544038702,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 2."},{"timestamp":1544038754,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 3."},{"timestamp":1545150592,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 3:\n\n(2 comments)"},{"timestamp":1549929579,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1550008111,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 5."},{"timestamp":1550008348,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 5:\n\n(2 comments)\n\nThere were unfortunately some merge conflicts, so the diff isn\u0027t that clean. I updated the Makefile and fixed some cstyle errors."},{"timestamp":1550010382,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1550088306,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 5:\n\n(25 comments)\n\nThanks for putting this together. I have a bunch of notes here and some suggestions to make this a bit tighter."},{"timestamp":1550520733,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 5:\n\n(6 comments)\n\nThanks."},{"timestamp":1550600900,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1550800524,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 6: Patch Set 5 was rebased."},{"timestamp":1550801097,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 7."},{"timestamp":1550801940,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 8."},{"timestamp":1550802119,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 8:\n\n(28 comments)"},{"timestamp":1550871220,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 9."},{"timestamp":1550883343,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 9:\n\n(7 comments)\n\nThanks, this looks pretty good. I only have a few minor items."},{"timestamp":1551229249,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 9:\n\n(2 comments)\n\nIncremental from 5 is good."},{"timestamp":1553627629,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 10."},{"timestamp":1553627745,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 10:\n\n(3 comments)\n\nI forgot to push the rebase commit before pushing the update commit, so some of the changes from the latest OS-7334 show up when comparing the patchsets. The only file that actually changes was connstat.1m."},{"timestamp":1553638350,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 10: Code-Review+1\n\n(1 comment)"},{"timestamp":1553644045,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 10: Code-Review+1"},{"timestamp":1553645224,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 11: Patch Set 10 was rebased."},{"timestamp":1553698643,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 11: Code-Review+1"},{"timestamp":1553711522,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 12: Patch Set 11 was rebased"},{"timestamp":1553711554,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 13: Commit message was updated."},{"timestamp":1553725137,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 13: Integration-Approval+1"},{"timestamp":1553725473,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 14: Patch Set 13 was rebased"},{"timestamp":1553725498,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 15: Commit message was updated."},{"timestamp":1553892982,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 16: Patch Set 15 was rebased."},{"timestamp":1553893013,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Cody Peter Mello"}],"currentPatchSet":{"number":"16","revision":"583897b77026a5a95bd0c9a9f5c0bc1524da3a9f","parents":["7c6c8467e3896e00fd70cb263268a1d5bc5ac661"],"ref":"refs/changes/11/5011/16","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1553892982,"author":{"name":"Sebastien Roy","email":"seb@delphix.com","username":""},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553638350,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553644045,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553698643,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553725137,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"SUBM","value":"1","grantedOn":1553893012,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":13,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/connstat/Makefile","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.h","type":"ADDED","insertions":79,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.xcl","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_main.c","type":"ADDED","insertions":566,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.c","type":"ADDED","insertions":177,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.h","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.c","type":"ADDED","insertions":403,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.h","type":"ADDED","insertions":50,"deletions":0},{"file":"usr/src/man/man1m/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/man/man1m/connstat.1m","type":"ADDED","insertions":395,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.man1m.inc","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/mib2.h","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"usr/src/uts/common/inet/tcp.h","type":"MODIFIED","insertions":4,"deletions":-7},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":2,"deletions":-17},{"file":"usr/src/uts/common/inet/tcp/tcp_fusion.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":27,"deletions":-19},{"file":"usr/src/uts/common/inet/tcp/tcp_output.c","type":"MODIFIED","insertions":17,"deletions":-5},{"file":"usr/src/uts/common/inet/tcp/tcp_stats.c","type":"MODIFIED","insertions":49,"deletions":-63},{"file":"usr/src/uts/common/inet/tcp/tcp_time_wait.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp/tcp_timers.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp_stats.h","type":"MODIFIED","insertions":21,"deletions":0}],"sizeInsertions":2022,"sizeDeletions":-144},"patchSets":[{"number":"1","revision":"64c9970e2672af83a2f07a428ab8c0f06d43cc55","parents":["1df6ceb55972d2701e9bacc0322dc10d31964a6c"],"ref":"refs/changes/11/5011/1","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1540918280,"author":{"name":"Sebastien Roy","email":"seb@delphix.com","username":""},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/connstat/Makefile","type":"ADDED","insertions":58,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.h","type":"ADDED","insertions":77,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.xcl","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_main.c","type":"ADDED","insertions":565,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.c","type":"ADDED","insertions":137,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.h","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.c","type":"ADDED","insertions":384,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.h","type":"ADDED","insertions":50,"deletions":0},{"file":"usr/src/lib/libinetutil/common/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/man/man1m/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/man/man1m/connstat.1m","type":"ADDED","insertions":387,"deletions":0},{"file":"usr/src/man/man3ofmt/ofmt.3ofmt","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/pkg/manifests/SUNWcs.man1m.inc","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/mib2.h","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"usr/src/uts/common/inet/tcp.h","type":"MODIFIED","insertions":4,"deletions":-7},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":2,"deletions":-17},{"file":"usr/src/uts/common/inet/tcp/tcp_fusion.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":27,"deletions":-19},{"file":"usr/src/uts/common/inet/tcp/tcp_output.c","type":"MODIFIED","insertions":17,"deletions":-5},{"file":"usr/src/uts/common/inet/tcp/tcp_stats.c","type":"MODIFIED","insertions":49,"deletions":-63},{"file":"usr/src/uts/common/inet/tcp/tcp_time_wait.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp/tcp_timers.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp_stats.h","type":"MODIFIED","insertions":21,"deletions":0}],"sizeInsertions":1962,"sizeDeletions":-146},{"number":"2","revision":"9a910e63852bdecc7c643eb3b4fda8f93c8b7031","parents":["174ff228258dd0b1a48a0fe2e50e124a62025cfb"],"ref":"refs/changes/11/5011/2","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1544038702,"author":{"name":"Sebastien Roy","email":"seb@delphix.com","username":""},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/connstat/Makefile","type":"ADDED","insertions":58,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.h","type":"ADDED","insertions":77,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.xcl","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_main.c","type":"ADDED","insertions":565,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.c","type":"ADDED","insertions":137,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.h","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.c","type":"ADDED","insertions":384,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.h","type":"ADDED","insertions":50,"deletions":0},{"file":"usr/src/lib/libinetutil/common/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/man/man1m/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/man/man1m/connstat.1m","type":"ADDED","insertions":387,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.man1m.inc","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/mib2.h","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"usr/src/uts/common/inet/tcp.h","type":"MODIFIED","insertions":4,"deletions":-7},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":2,"deletions":-17},{"file":"usr/src/uts/common/inet/tcp/tcp_fusion.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":27,"deletions":-19},{"file":"usr/src/uts/common/inet/tcp/tcp_output.c","type":"MODIFIED","insertions":17,"deletions":-5},{"file":"usr/src/uts/common/inet/tcp/tcp_stats.c","type":"MODIFIED","insertions":49,"deletions":-63},{"file":"usr/src/uts/common/inet/tcp/tcp_time_wait.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp/tcp_timers.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp_stats.h","type":"MODIFIED","insertions":21,"deletions":0}],"sizeInsertions":1960,"sizeDeletions":-144},{"number":"3","revision":"c24e7a4984d8d12d4758f3a7616b01869893f06f","parents":["174ff228258dd0b1a48a0fe2e50e124a62025cfb"],"ref":"refs/changes/11/5011/3","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1544038754,"author":{"name":"Sebastien Roy","email":"seb@delphix.com","username":""},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/cmd/connstat/Makefile","line":35,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"I think we can just use `include $(SRC)/cmd/Makefile.ctf` here instead of all of this."},{"file":"usr/src/cmd/connstat/Makefile","line":35,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done. I verified with ctfdump that the connstat binary in the generated platform has the CTF information."},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","line":581,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Just an observation that using MBLKL()  seems like it\u0027d simplify the whole section from the `do {` through here (though your choice if you want to bother or not)."},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","line":581,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I think I\u0027ll leave it the way it currently is. I think it would only really simplify the ASSERT line (unless I misunderstood the suggestion)."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/connstat/Makefile","type":"ADDED","insertions":58,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.h","type":"ADDED","insertions":77,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.xcl","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_main.c","type":"ADDED","insertions":570,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.c","type":"ADDED","insertions":137,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.h","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.c","type":"ADDED","insertions":387,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.h","type":"ADDED","insertions":50,"deletions":0},{"file":"usr/src/lib/libinetutil/common/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/man/man1m/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/man/man1m/connstat.1m","type":"ADDED","insertions":387,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.man1m.inc","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/mib2.h","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"usr/src/uts/common/inet/tcp.h","type":"MODIFIED","insertions":4,"deletions":-7},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":2,"deletions":-17},{"file":"usr/src/uts/common/inet/tcp/tcp_fusion.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":27,"deletions":-19},{"file":"usr/src/uts/common/inet/tcp/tcp_output.c","type":"MODIFIED","insertions":17,"deletions":-5},{"file":"usr/src/uts/common/inet/tcp/tcp_stats.c","type":"MODIFIED","insertions":49,"deletions":-63},{"file":"usr/src/uts/common/inet/tcp/tcp_time_wait.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp/tcp_timers.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp_stats.h","type":"MODIFIED","insertions":21,"deletions":0}],"sizeInsertions":1968,"sizeDeletions":-144},{"number":"4","revision":"08e3e053afc02ae65e327f195943723b11bd680d","parents":["d48591d358ec2f3a000783648ba3cef966ad6122"],"ref":"refs/changes/11/5011/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1549929579,"author":{"name":"Sebastien Roy","email":"seb@delphix.com","username":""},"isDraft":false,"kind":"TRIVIAL_REBASE","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/connstat/Makefile","type":"ADDED","insertions":58,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.h","type":"ADDED","insertions":77,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.xcl","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_main.c","type":"ADDED","insertions":570,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.c","type":"ADDED","insertions":137,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.h","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.c","type":"ADDED","insertions":387,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.h","type":"ADDED","insertions":50,"deletions":0},{"file":"usr/src/lib/libinetutil/common/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/man/man1m/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/man/man1m/connstat.1m","type":"ADDED","insertions":387,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.man1m.inc","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/mib2.h","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"usr/src/uts/common/inet/tcp.h","type":"MODIFIED","insertions":4,"deletions":-7},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":2,"deletions":-17},{"file":"usr/src/uts/common/inet/tcp/tcp_fusion.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":27,"deletions":-19},{"file":"usr/src/uts/common/inet/tcp/tcp_output.c","type":"MODIFIED","insertions":17,"deletions":-5},{"file":"usr/src/uts/common/inet/tcp/tcp_stats.c","type":"MODIFIED","insertions":49,"deletions":-63},{"file":"usr/src/uts/common/inet/tcp/tcp_time_wait.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp/tcp_timers.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp_stats.h","type":"MODIFIED","insertions":21,"deletions":0}],"sizeInsertions":1968,"sizeDeletions":-144},{"number":"5","revision":"3453cf547aaf37e055fc823b49ce02454f7d3066","parents":["e662a9f76e9bd3614d356d0061811cae7b7263ee"],"ref":"refs/changes/11/5011/5","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1550008111,"author":{"name":"Sebastien Roy","email":"seb@delphix.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550010382,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"comments":[{"file":"usr/src/cmd/connstat/Makefile","line":29,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I don\u0027t believe this is needed with the CSTD refactoring that occurred."},{"file":"usr/src/cmd/connstat/Makefile","line":29,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve removed this line. Looking at the 9027 changes, it looks like setting CSTD above is enough."},{"file":"usr/src/cmd/connstat/Makefile","line":34,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Are you sure that the ctf is present from all three object files? It\u0027s not clera to me it is as I suspect this is relying on the default rules for the building of objects which means that it wouldn\u0027t have that."},{"file":"usr/src/cmd/connstat/Makefile","line":34,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"This is what I see under the \"Functions\" section:\n\n    - Functions ---------------------------------------------------------------------\n\n      [0] getproto (78) returns: 51 args: (53)\n      [1] usage (80) returns: 43 args: (50)\n      [2] die (83) returns: 43 args: (53, ...)\n      [3] str2sockaddr (84) returns: 43 args: (53, 87)\n      [4] process_filter (85) returns: 43 args: (14, 88, 89)\n      [5] print_timestamp (88) returns: 43 args: (86, 17)\n      [6] show_stats (90) returns: 43 args: (51, 35, 12, 88, 86, 12, 12)\n      [7] tcp_ci2buf (96) returns: 43 args: (117)\n      [8] tcp_stateinfobystate (98) returns: 118 args: (50)\n      [9] tcp_state2str (99) returns: 53 args: (50)\n      [10] tcp_stateinfobystr (100) returns: 118 args: (53)\n      [11] tcp_ipv6_ce2buf (101) returns: 43 args: (119)\n      [12] tcp_ipv6_print (102) returns: 43 args: (119, 45)\n      [13] tcp_ipv4_ce2buf (103) returns: 43 args: (120)\n      [14] tcp_ipv4_print (104) returns: 43 args: (120, 45)\n      [15] print_tcp_state (105) returns: 17 args: (28, 14, 12)\n      [16] print_uint64 (116) returns: 17 args: (28, 14, 12)\n      [17] print_uint16 (118) returns: 17 args: (28, 14, 12)\n      [18] mibopen (147) returns: 50 args: (53)\n      [19] tcp_str2state (148) returns: 50 args: (53)\n      [20] tcp_walk_ipv4 (158) returns: 43 args: (44, 45)\n      [21] tcp_walk_ipv6 (160) returns: 43 args: (44, 45)\n      [22] tcp_get_fields (167) returns: 40 args: ()\n      [23] main (168) returns: 50 args: (50, 90)\n      [24] print_uint32 (173) returns: 17 args: (28, 14, 12)\n      [25] conn_walk (180) returns: 43 args: (50, 51, 45)\n      [26] print_string (193) returns: 17 args: (28, 14, 12)\n\nWhich lines up with what\u0027s in the three files:\n\n    % grep -h \u0027^[a-z0-9_]*(\u0027 *.c\n    usage(int code)\n    getproto(const char *proto)\n    main(int argc, char *argv[])\n    str2sockaddr(const char *addr, struct sockaddr_storage *ss)\n    process_filter(char *filterstr, connstat_conn_attr_t *filter, uint_t *flags)\n    print_timestamp(timestamp_fmt_t timestamp_fmt, boolean_t parsable)\n    show_stats(connstat_proto_t *proto, ofmt_handle_t ofmt, uint_t flags,\n    print_string(ofmt_arg_t *ofarg, char *buf, uint_t bufsize)\n    print_uint16(ofmt_arg_t *ofarg, char *buf, uint_t bufsize)\n    print_uint32(ofmt_arg_t *ofarg, char *buf, uint_t bufsize)\n    print_uint64(ofmt_arg_t *ofarg, char *buf, uint_t bufsize)\n    die(const char *format, ...)\n    mibopen(const char *proto)\n    conn_walk(int fd, connstat_proto_t *proto, conn_walk_state_t *state)\n    tcp_get_fields(void)\n    tcp_ci2buf(struct tcpConnEntryInfo_s *ci)\n    tcp_ipv4_ce2buf(mib2_tcpConnEntry_t *ce)\n    tcp_ipv6_ce2buf(mib2_tcp6ConnEntry_t *ce)\n    tcp_ipv4_print(mib2_tcpConnEntry_t *ce, conn_walk_state_t *state)\n    tcp_ipv6_print(mib2_tcp6ConnEntry_t *ce, conn_walk_state_t *state)\n    tcp_walk_ipv4(struct strbuf *dbuf, conn_walk_state_t *state)\n    tcp_walk_ipv6(struct strbuf *dbuf, conn_walk_state_t *state)\n    tcp_stateinfobystate(int state)\n    tcp_stateinfobystr(const char *statestr)\n    tcp_str2state(const char *statestr)\n    tcp_state2str(int state)\n    print_tcp_state(ofmt_arg_t *ofarg, char *buf, uint_t bufsize)\n    % grep -h \u0027^[a-z0-9_]*(\u0027 *.c  | wc -l\n          27\n\nIf this is working by accident though, then I can make whatever changes are needed to be more explicit."},{"file":"usr/src/cmd/connstat/Makefile","line":34,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Well, I don\u0027t see how we run something that calls $(POST_PROCESS_O) to get it in there, but if it\u0027s working, it\u0027s working."},{"file":"usr/src/cmd/connstat/connstat_main.c","line":189,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"errno should be set to zero before using strtoul."},{"file":"usr/src/cmd/connstat/connstat_main.c","line":189,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Isn\u0027t that done already on line 186?"},{"file":"usr/src/cmd/connstat/connstat_main.c","line":189,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"So it is, I think it\u0027s pretty easy to miss that. Maybe it should be brought inline? Though really strtonum(3C) may be better since we only care about base 10."},{"file":"usr/src/cmd/connstat/connstat_main.c","line":189,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve switched to strtonum(3C)."},{"file":"usr/src/cmd/connstat/connstat_main.c","line":190,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"errno can be set on values other than count \u003d 0, I\u0027d suggest checking against that. Also, this should really try and check that the user didn\u0027t pass in a string like -c12345asdf and warn about that, rather than accept it.\n\nBecause we only care about base 10, it may be better to replace all of these with strtonum."},{"file":"usr/src/cmd/connstat/connstat_main.c","line":190,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve changed this to check and print the strtonum() errstr."},{"file":"usr/src/cmd/connstat/connstat_main.c","line":197,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Can we eliminate die() or at least make it a wrapper to one of the *err*() functions?"},{"file":"usr/src/cmd/connstat/connstat_main.c","line":197,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"die() now uses verrx()."},{"file":"usr/src/cmd/connstat/connstat_main.c","line":209,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"See earlier notes on strtol parsing."},{"file":"usr/src/cmd/connstat/connstat_main.c","line":209,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Now using strtonum."},{"file":"usr/src/cmd/connstat/connstat_main.c","line":294,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"We should warn about this fact to the user, not just dump them at a usage message."},{"file":"usr/src/cmd/connstat/connstat_main.c","line":294,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"usr/src/cmd/connstat/connstat_main.c","line":327,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"We really shouldn\u0027t be relying on the fact that the IPv4 and IPv6 sockaddr format is the same. We should probably be looking at the type to know how to preserve and translate the port. I know that at the moment the sockaddr_in and sockaddr_in6 are at the same spot, but it seems a bad assumption to bake into this."},{"file":"usr/src/cmd/connstat/connstat_main.c","line":327,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve added ca_lport/ca_rport to the filter structure, and now store the parsed ports in there. The ca_laddr/ca_raddr fields are now just addresses and don\u0027t store any ports."},{"file":"usr/src/cmd/connstat/connstat_main.c","line":389,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"There might be a smatch() issue here (ties in with the errno below), there\u0027s a does-not-return indicator which should go here."},{"file":"usr/src/cmd/connstat/connstat_main.c","line":389,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I tried running \"dmake CC\u003dsmatch\", and smatch was fine with this line. It did object to the body of the getproto() check in main(), though. I changed that to use die(), and it picked up on the verrx() call.\n\nI\u0027ve also added __NORETURN to usage() and die(), which smatch currently does nothing with (noted in IPD 2), but should someday."},{"file":"usr/src/cmd/connstat/connstat_main.c","line":416,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"See notes about strtol usage."},{"file":"usr/src/cmd/connstat/connstat_main.c","line":416,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Line 358"},{"file":"usr/src/cmd/connstat/connstat_main.c","line":416,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Switched to strtonum."},{"file":"usr/src/cmd/connstat/connstat_main.c","line":469,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"What about the default case?"},{"file":"usr/src/cmd/connstat/connstat_main.c","line":469,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve changed this to a switch that handles NOTIMESTAMP, and aborts in the default case (which we should never hit, unless someone changes the enum at the top of this file)."},{"file":"usr/src/cmd/connstat/connstat_main.c","line":556,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"As mentioned before, do we need this here when we have functions in err.h ?"},{"file":"usr/src/cmd/connstat/connstat_main.c","line":556,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve changed this to make use of verrx()."},{"file":"usr/src/cmd/connstat/connstat_mib.c","line":42,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"close may clobber the ioctl errno."},{"file":"usr/src/cmd/connstat/connstat_mib.c","line":42,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve changed this to save and then restore the value."},{"file":"usr/src/cmd/connstat/connstat_mib.c","line":76,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Should this be non-fatal?\n\nShould we give the user a more actionable message? If I just saw putmsg: I/O error, I wouldn\u0027t know what to do from there. Is all the data useless, some of it missing, etc. This holds true for the other usage of perror in this function."},{"file":"usr/src/cmd/connstat/connstat_mib.c","line":76,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"This probably shouldn\u0027t be non-fatal. I\u0027ll change this function to return a value indicating whether or not it succeeded. I\u0027ve also updated the message."},{"file":"usr/src/cmd/connstat/connstat_mib.c","line":97,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"See earlier note on perror."},{"file":"usr/src/cmd/connstat/connstat_mib.c","line":97,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve updated the message, and it will now return -1."},{"file":"usr/src/cmd/connstat/connstat_mib.c","line":102,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is the assumption that we should always get MOREDATA back or something because we\u0027re not fully consuming the entire message and just the control portion? Is there a reason to believe we can\u0027t get MORECTL?"},{"file":"usr/src/cmd/connstat/connstat_mib.c","line":102,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Based on my reading of snmpcom_req() and tcp_snmp_get(), I believe we should always get 0 (when getting the end of data control message) or MOREDATA here. Similarly, the getmsg() below should always finish reading the whole data part of the message.\n\nI\u0027ve also updated the getmsg() calls to handle EINTR."},{"file":"usr/src/cmd/connstat/connstat_mib.c","line":102,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Thanks for digging into that."},{"file":"usr/src/cmd/connstat/connstat_mib.c","line":115,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I suspect this is used to terminate the fact that we\u0027ve gotten all the messages related to this request. Is this right?"},{"file":"usr/src/cmd/connstat/connstat_mib.c","line":115,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Yes, this is the final message sent by snmpcom_req(). I\u0027ve added a comment here to make it clearer what\u0027s happening."},{"file":"usr/src/cmd/connstat/connstat_mib.c","line":119,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"See earlier note on perror."},{"file":"usr/src/cmd/connstat/connstat_mib.c","line":119,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve changed the message, and it will now return -1."},{"file":"usr/src/cmd/connstat/connstat_mib.c","line":125,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Why aren\u0027t we doing anything with the return value here?"},{"file":"usr/src/cmd/connstat/connstat_mib.c","line":125,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Yeah, this should really be checking the return code. I\u0027ve added some checks."},{"file":"usr/src/cmd/connstat/connstat_mib.c","line":135,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"We should NULL out dbuf.buf since we keep using the same structure and it\u0027s not being reallocated. Though any reason we don\u0027t actually just realloc if we need to and save memory allocation on every loop? Fine to say that\u0027s premature optimization."},{"file":"usr/src/cmd/connstat/connstat_mib.c","line":135,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve changed this so that we originally bzero() dbuf and then realloc() the array each time, and moved it outside of the for loop so that it\u0027s not leaked when we break out of the loop."},{"file":"usr/src/cmd/connstat/connstat_tcp.c","line":0,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I think it\u0027s worth a comment describing when we have to transform data to and from network byte order. For example stats are always in the kernel\u0027s native endianness, but other data like network addresses and ports is not."},{"file":"usr/src/cmd/connstat/connstat_tcp.c","line":0,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"usr/src/cmd/connstat/connstat_tcp.c","line":183,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"If these fail shouldn\u0027t we make sure that the buffer contents are well defined so we\u0027re not printing leftover data or whatever half-state inet_ntop left the buffer in?"},{"file":"usr/src/cmd/connstat/connstat_tcp.c","line":183,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"These should always succeed since there\u0027s always going to be enough space in the buffer, and the address family will always be valid, so I\u0027ve changed these to use VERIFY3P() to make sure we abort if that somehow ever changes."},{"file":"usr/src/cmd/connstat/connstat_tcp.c","line":197,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"If these fail shouldn\u0027t we make sure that the buffer contents are well defined so we\u0027re not printing leftover data or whatever half-state inet_ntop left the buffer in?"},{"file":"usr/src/cmd/connstat/connstat_tcp.c","line":197,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"This will now abort if inet_ntop() returns NULL."},{"file":"usr/src/cmd/connstat/connstat_tcp.c","line":365,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Are we using -7 here as our token unknown state?"},{"file":"usr/src/cmd/connstat/connstat_tcp.c","line":365,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Yes. Any value less than TCPS_CLOSED is rejected in process_filter:\n\n    filter-\u003eca_state \u003d tcp_str2state(val);\n    if (filter-\u003eca_state \u003c TCPS_CLOSED) {\n        (void) fprintf(stderr, gettext(\n            \"invalid TCP state: %s\\n\"), val);\n        usage(1);\n    }"},{"file":"usr/src/man/man1m/connstat.1m","line":53,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Conventionally this usually is an explicit OPTIONS section."},{"file":"usr/src/man/man1m/connstat.1m","line":53,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"usr/src/man/man1m/connstat.1m","line":98,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I think this should make it more explicit that the -o options is required when using -P."},{"file":"usr/src/man/man1m/connstat.1m","line":98,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done. Let me know if you think I should change the wording further."},{"file":"usr/src/man/man1m/connstat.1m","line":372,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"We should clarify that the CLI options are committed; however, the commands output, except when using -P is subject to change."},{"file":"usr/src/man/man1m/connstat.1m","line":372,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","line":595,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I think there may be a slight change in logic here. In particular, in the case where mp1 is not present, previously, tcp-\u003etcp_reass_head \u003d\u003d tcp-\u003etcp_reass_tail \u003d\u003d mp. This is no longer true and we leave the tcp_reass_tail set to NULL. Is this correct behavior?"},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","line":595,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"VERY good catch."},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","line":595,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"We assign tcp_reass_tail to mp right after this if/else regardless of whether mp1 is NULL or not, so it should be the same behaviour. I can place the assignment in both of the if\u0027s body and the else\u0027s body if that helps make this read more cleanly."},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","line":595,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I guess, I somehow missed that. Thanks for pointing that out. I think ti\u0027s fine."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/connstat/Makefile","type":"ADDED","insertions":56,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.h","type":"ADDED","insertions":77,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.xcl","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_main.c","type":"ADDED","insertions":570,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.c","type":"ADDED","insertions":137,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.h","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.c","type":"ADDED","insertions":389,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.h","type":"ADDED","insertions":50,"deletions":0},{"file":"usr/src/man/man1m/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/man/man1m/connstat.1m","type":"ADDED","insertions":387,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.man1m.inc","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/mib2.h","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"usr/src/uts/common/inet/tcp.h","type":"MODIFIED","insertions":4,"deletions":-7},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":2,"deletions":-17},{"file":"usr/src/uts/common/inet/tcp/tcp_fusion.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":27,"deletions":-19},{"file":"usr/src/uts/common/inet/tcp/tcp_output.c","type":"MODIFIED","insertions":17,"deletions":-5},{"file":"usr/src/uts/common/inet/tcp/tcp_stats.c","type":"MODIFIED","insertions":49,"deletions":-63},{"file":"usr/src/uts/common/inet/tcp/tcp_time_wait.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp/tcp_timers.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp_stats.h","type":"MODIFIED","insertions":21,"deletions":0}],"sizeInsertions":1967,"sizeDeletions":-144},{"number":"6","revision":"f2f090e4dab59412994a58e0a8913fae36f1606d","parents":["7e6e64b8d6cb9098e02753b0e74e9d119c8a2074"],"ref":"refs/changes/11/5011/6","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1550800524,"author":{"name":"Sebastien Roy","email":"seb@delphix.com","username":""},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550010382,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/connstat/Makefile","type":"ADDED","insertions":56,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.h","type":"ADDED","insertions":77,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.xcl","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_main.c","type":"ADDED","insertions":570,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.c","type":"ADDED","insertions":137,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.h","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.c","type":"ADDED","insertions":389,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.h","type":"ADDED","insertions":50,"deletions":0},{"file":"usr/src/man/man1m/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/man/man1m/connstat.1m","type":"ADDED","insertions":387,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.man1m.inc","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/mib2.h","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"usr/src/uts/common/inet/tcp.h","type":"MODIFIED","insertions":4,"deletions":-7},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":2,"deletions":-17},{"file":"usr/src/uts/common/inet/tcp/tcp_fusion.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":27,"deletions":-19},{"file":"usr/src/uts/common/inet/tcp/tcp_output.c","type":"MODIFIED","insertions":17,"deletions":-5},{"file":"usr/src/uts/common/inet/tcp/tcp_stats.c","type":"MODIFIED","insertions":49,"deletions":-63},{"file":"usr/src/uts/common/inet/tcp/tcp_time_wait.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp/tcp_timers.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp_stats.h","type":"MODIFIED","insertions":21,"deletions":0}],"sizeInsertions":1967,"sizeDeletions":-144},{"number":"7","revision":"4b11f8ac52cedbeac8bef2a902861b6877989301","parents":["7e6e64b8d6cb9098e02753b0e74e9d119c8a2074"],"ref":"refs/changes/11/5011/7","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1550801097,"author":{"name":"Sebastien Roy","email":"seb@delphix.com","username":""},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/connstat/Makefile","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.h","type":"ADDED","insertions":79,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.xcl","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_main.c","type":"ADDED","insertions":567,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.c","type":"ADDED","insertions":178,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.h","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.c","type":"ADDED","insertions":402,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.h","type":"ADDED","insertions":50,"deletions":0},{"file":"usr/src/man/man1m/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/man/man1m/connstat.1m","type":"ADDED","insertions":395,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.man1m.inc","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/mib2.h","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"usr/src/uts/common/inet/tcp.h","type":"MODIFIED","insertions":4,"deletions":-7},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":2,"deletions":-17},{"file":"usr/src/uts/common/inet/tcp/tcp_fusion.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":27,"deletions":-19},{"file":"usr/src/uts/common/inet/tcp/tcp_output.c","type":"MODIFIED","insertions":17,"deletions":-5},{"file":"usr/src/uts/common/inet/tcp/tcp_stats.c","type":"MODIFIED","insertions":49,"deletions":-63},{"file":"usr/src/uts/common/inet/tcp/tcp_time_wait.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp/tcp_timers.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp_stats.h","type":"MODIFIED","insertions":21,"deletions":0}],"sizeInsertions":2023,"sizeDeletions":-144},{"number":"8","revision":"8c6f0c30ce5aa7c187120dda4bdc9d561f10f668","parents":["7e6e64b8d6cb9098e02753b0e74e9d119c8a2074"],"ref":"refs/changes/11/5011/8","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1550801940,"author":{"name":"Sebastien Roy","email":"seb@delphix.com","username":""},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/connstat/Makefile","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.h","type":"ADDED","insertions":79,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.xcl","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_main.c","type":"ADDED","insertions":567,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.c","type":"ADDED","insertions":178,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.h","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.c","type":"ADDED","insertions":403,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.h","type":"ADDED","insertions":50,"deletions":0},{"file":"usr/src/man/man1m/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/man/man1m/connstat.1m","type":"ADDED","insertions":395,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.man1m.inc","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/mib2.h","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"usr/src/uts/common/inet/tcp.h","type":"MODIFIED","insertions":4,"deletions":-7},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":2,"deletions":-17},{"file":"usr/src/uts/common/inet/tcp/tcp_fusion.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":27,"deletions":-19},{"file":"usr/src/uts/common/inet/tcp/tcp_output.c","type":"MODIFIED","insertions":17,"deletions":-5},{"file":"usr/src/uts/common/inet/tcp/tcp_stats.c","type":"MODIFIED","insertions":49,"deletions":-63},{"file":"usr/src/uts/common/inet/tcp/tcp_time_wait.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp/tcp_timers.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp_stats.h","type":"MODIFIED","insertions":21,"deletions":0}],"sizeInsertions":2024,"sizeDeletions":-144},{"number":"9","revision":"4527f385064278a751c3fe90f9ab88966dc7ac1b","parents":["7e6e64b8d6cb9098e02753b0e74e9d119c8a2074"],"ref":"refs/changes/11/5011/9","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1550871220,"author":{"name":"Sebastien Roy","email":"seb@delphix.com","username":""},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/cmd/connstat/connstat.h","line":35,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Optional, but if these are never going to be negative, may be worth making them be unsigned."},{"file":"usr/src/cmd/connstat/connstat.h","line":35,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Unless you anticipate a port-space increase, they should be uint16_t or in_port_t."},{"file":"usr/src/cmd/connstat/connstat.h","line":35,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027m going to leave this as it is, so that it lines up with the return type for strtonum() and the tcpConnLocalPort/tcpConnRemPort fields that they are compared against."},{"file":"usr/src/cmd/connstat/connstat.h","line":35,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"OK, sounds good."},{"file":"usr/src/cmd/connstat/connstat_main.c","line":564,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Thank you!"},{"file":"usr/src/cmd/connstat/connstat_mib.c","line":141,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I don\u0027t think you have to change this, but maybe we should only realloc if the size we need is larger than the current size? Probably fine, to be honest."},{"file":"usr/src/man/man1m/connstat.1m","line":102,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Minor nit, we generally phrase these as \u0027the -T option\u0027 rather than just (-T)."},{"file":"usr/src/man/man1m/connstat.1m","line":102,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"usr/src/man/man1m/connstat.1m","line":379,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Same thing about \u0027the -P option\u0027 as above."},{"file":"usr/src/man/man1m/connstat.1m","line":379,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/connstat/Makefile","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.h","type":"ADDED","insertions":79,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.xcl","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_main.c","type":"ADDED","insertions":566,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.c","type":"ADDED","insertions":177,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.h","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.c","type":"ADDED","insertions":403,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.h","type":"ADDED","insertions":50,"deletions":0},{"file":"usr/src/man/man1m/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/man/man1m/connstat.1m","type":"ADDED","insertions":395,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.man1m.inc","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/mib2.h","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"usr/src/uts/common/inet/tcp.h","type":"MODIFIED","insertions":4,"deletions":-7},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":2,"deletions":-17},{"file":"usr/src/uts/common/inet/tcp/tcp_fusion.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":27,"deletions":-19},{"file":"usr/src/uts/common/inet/tcp/tcp_output.c","type":"MODIFIED","insertions":17,"deletions":-5},{"file":"usr/src/uts/common/inet/tcp/tcp_stats.c","type":"MODIFIED","insertions":49,"deletions":-63},{"file":"usr/src/uts/common/inet/tcp/tcp_time_wait.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp/tcp_timers.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp_stats.h","type":"MODIFIED","insertions":21,"deletions":0}],"sizeInsertions":2022,"sizeDeletions":-144},{"number":"10","revision":"e2db3331025e85d58267727c22ca303ef93f0dee","parents":["489b9659c01af3a02b665b2fe8fd866b2fc28166"],"ref":"refs/changes/11/5011/10","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1553627629,"author":{"name":"Sebastien Roy","email":"seb@delphix.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553638350,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553644045,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/connstat/Makefile","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.h","type":"ADDED","insertions":79,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.xcl","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_main.c","type":"ADDED","insertions":566,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.c","type":"ADDED","insertions":177,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.h","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.c","type":"ADDED","insertions":403,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.h","type":"ADDED","insertions":50,"deletions":0},{"file":"usr/src/man/man1m/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/man/man1m/connstat.1m","type":"ADDED","insertions":395,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.man1m.inc","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/mib2.h","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"usr/src/uts/common/inet/tcp.h","type":"MODIFIED","insertions":4,"deletions":-7},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":2,"deletions":-17},{"file":"usr/src/uts/common/inet/tcp/tcp_fusion.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":27,"deletions":-19},{"file":"usr/src/uts/common/inet/tcp/tcp_output.c","type":"MODIFIED","insertions":17,"deletions":-5},{"file":"usr/src/uts/common/inet/tcp/tcp_stats.c","type":"MODIFIED","insertions":49,"deletions":-63},{"file":"usr/src/uts/common/inet/tcp/tcp_time_wait.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp/tcp_timers.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp_stats.h","type":"MODIFIED","insertions":21,"deletions":0}],"sizeInsertions":2022,"sizeDeletions":-144},{"number":"11","revision":"75ba4d73667a25ca876bc427cf59ea3e7359ca30","parents":["c0a0fa88978e7e2611d235fa31be5b898c7c7d27"],"ref":"refs/changes/11/5011/11","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1553645224,"author":{"name":"Sebastien Roy","email":"seb@delphix.com","username":""},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553638350,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553698643,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553644045,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/connstat/Makefile","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.h","type":"ADDED","insertions":79,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.xcl","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_main.c","type":"ADDED","insertions":566,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.c","type":"ADDED","insertions":177,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.h","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.c","type":"ADDED","insertions":403,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.h","type":"ADDED","insertions":50,"deletions":0},{"file":"usr/src/man/man1m/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/man/man1m/connstat.1m","type":"ADDED","insertions":395,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.man1m.inc","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/mib2.h","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"usr/src/uts/common/inet/tcp.h","type":"MODIFIED","insertions":4,"deletions":-7},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":2,"deletions":-17},{"file":"usr/src/uts/common/inet/tcp/tcp_fusion.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":27,"deletions":-19},{"file":"usr/src/uts/common/inet/tcp/tcp_output.c","type":"MODIFIED","insertions":17,"deletions":-5},{"file":"usr/src/uts/common/inet/tcp/tcp_stats.c","type":"MODIFIED","insertions":49,"deletions":-63},{"file":"usr/src/uts/common/inet/tcp/tcp_time_wait.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp/tcp_timers.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp_stats.h","type":"MODIFIED","insertions":21,"deletions":0}],"sizeInsertions":2022,"sizeDeletions":-144},{"number":"12","revision":"f5b2b83b18f589a5bdc96709954b7177ab798d00","parents":["38014f7b3ec3219d18e000251dfa794f5572d4d4"],"ref":"refs/changes/11/5011/12","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1553711522,"author":{"name":"Sebastien Roy","email":"seb@delphix.com","username":""},"isDraft":false,"kind":"NO_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553638350,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553698643,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553644045,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/connstat/Makefile","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.h","type":"ADDED","insertions":79,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.xcl","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_main.c","type":"ADDED","insertions":566,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.c","type":"ADDED","insertions":177,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.h","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.c","type":"ADDED","insertions":403,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.h","type":"ADDED","insertions":50,"deletions":0},{"file":"usr/src/man/man1m/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/man/man1m/connstat.1m","type":"ADDED","insertions":395,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.man1m.inc","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/mib2.h","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"usr/src/uts/common/inet/tcp.h","type":"MODIFIED","insertions":4,"deletions":-7},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":2,"deletions":-17},{"file":"usr/src/uts/common/inet/tcp/tcp_fusion.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":27,"deletions":-19},{"file":"usr/src/uts/common/inet/tcp/tcp_output.c","type":"MODIFIED","insertions":17,"deletions":-5},{"file":"usr/src/uts/common/inet/tcp/tcp_stats.c","type":"MODIFIED","insertions":49,"deletions":-63},{"file":"usr/src/uts/common/inet/tcp/tcp_time_wait.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp/tcp_timers.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp_stats.h","type":"MODIFIED","insertions":21,"deletions":0}],"sizeInsertions":2022,"sizeDeletions":-144},{"number":"13","revision":"4d74ec2a545b0ef14678ee6678ef68cf79ea393f","parents":["38014f7b3ec3219d18e000251dfa794f5572d4d4"],"ref":"refs/changes/11/5011/13","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1553711554,"author":{"name":"Sebastien Roy","email":"seb@delphix.com","username":""},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553638350,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553698643,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553644045,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553725137,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/connstat/Makefile","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.h","type":"ADDED","insertions":79,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.xcl","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_main.c","type":"ADDED","insertions":566,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.c","type":"ADDED","insertions":177,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.h","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.c","type":"ADDED","insertions":403,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.h","type":"ADDED","insertions":50,"deletions":0},{"file":"usr/src/man/man1m/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/man/man1m/connstat.1m","type":"ADDED","insertions":395,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.man1m.inc","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/mib2.h","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"usr/src/uts/common/inet/tcp.h","type":"MODIFIED","insertions":4,"deletions":-7},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":2,"deletions":-17},{"file":"usr/src/uts/common/inet/tcp/tcp_fusion.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":27,"deletions":-19},{"file":"usr/src/uts/common/inet/tcp/tcp_output.c","type":"MODIFIED","insertions":17,"deletions":-5},{"file":"usr/src/uts/common/inet/tcp/tcp_stats.c","type":"MODIFIED","insertions":49,"deletions":-63},{"file":"usr/src/uts/common/inet/tcp/tcp_time_wait.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp/tcp_timers.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp_stats.h","type":"MODIFIED","insertions":21,"deletions":0}],"sizeInsertions":2022,"sizeDeletions":-144},{"number":"14","revision":"34fc5023471f27b0f1da40e23ee213ae2a0c3653","parents":["0cff749d845ce8066d65b83783bc7e00481a0f7a"],"ref":"refs/changes/11/5011/14","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1553725473,"author":{"name":"Sebastien Roy","email":"seb@delphix.com","username":""},"isDraft":false,"kind":"NO_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553638350,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553698643,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553644045,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553725137,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/connstat/Makefile","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.h","type":"ADDED","insertions":79,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.xcl","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_main.c","type":"ADDED","insertions":566,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.c","type":"ADDED","insertions":177,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.h","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.c","type":"ADDED","insertions":403,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.h","type":"ADDED","insertions":50,"deletions":0},{"file":"usr/src/man/man1m/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/man/man1m/connstat.1m","type":"ADDED","insertions":395,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.man1m.inc","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/mib2.h","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"usr/src/uts/common/inet/tcp.h","type":"MODIFIED","insertions":4,"deletions":-7},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":2,"deletions":-17},{"file":"usr/src/uts/common/inet/tcp/tcp_fusion.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":27,"deletions":-19},{"file":"usr/src/uts/common/inet/tcp/tcp_output.c","type":"MODIFIED","insertions":17,"deletions":-5},{"file":"usr/src/uts/common/inet/tcp/tcp_stats.c","type":"MODIFIED","insertions":49,"deletions":-63},{"file":"usr/src/uts/common/inet/tcp/tcp_time_wait.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp/tcp_timers.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp_stats.h","type":"MODIFIED","insertions":21,"deletions":0}],"sizeInsertions":2022,"sizeDeletions":-144},{"number":"15","revision":"feed77a5e51ef3cbd096873a5ff3ddd4a41d7278","parents":["0cff749d845ce8066d65b83783bc7e00481a0f7a"],"ref":"refs/changes/11/5011/15","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1553725498,"author":{"name":"Sebastien Roy","email":"seb@delphix.com","username":""},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553638350,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553698643,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553644045,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553725137,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":13,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/connstat/Makefile","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.h","type":"ADDED","insertions":79,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.xcl","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_main.c","type":"ADDED","insertions":566,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.c","type":"ADDED","insertions":177,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.h","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.c","type":"ADDED","insertions":403,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.h","type":"ADDED","insertions":50,"deletions":0},{"file":"usr/src/man/man1m/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/man/man1m/connstat.1m","type":"ADDED","insertions":395,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.man1m.inc","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/mib2.h","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"usr/src/uts/common/inet/tcp.h","type":"MODIFIED","insertions":4,"deletions":-7},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":2,"deletions":-17},{"file":"usr/src/uts/common/inet/tcp/tcp_fusion.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":27,"deletions":-19},{"file":"usr/src/uts/common/inet/tcp/tcp_output.c","type":"MODIFIED","insertions":17,"deletions":-5},{"file":"usr/src/uts/common/inet/tcp/tcp_stats.c","type":"MODIFIED","insertions":49,"deletions":-63},{"file":"usr/src/uts/common/inet/tcp/tcp_time_wait.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp/tcp_timers.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp_stats.h","type":"MODIFIED","insertions":21,"deletions":0}],"sizeInsertions":2022,"sizeDeletions":-144},{"number":"16","revision":"583897b77026a5a95bd0c9a9f5c0bc1524da3a9f","parents":["7c6c8467e3896e00fd70cb263268a1d5bc5ac661"],"ref":"refs/changes/11/5011/16","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1553892982,"author":{"name":"Sebastien Roy","email":"seb@delphix.com","username":""},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553638350,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1553893012,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553698643,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553644045,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553725137,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":13,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/connstat/Makefile","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.h","type":"ADDED","insertions":79,"deletions":0},{"file":"usr/src/cmd/connstat/connstat.xcl","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_main.c","type":"ADDED","insertions":566,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.c","type":"ADDED","insertions":177,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_mib.h","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.c","type":"ADDED","insertions":403,"deletions":0},{"file":"usr/src/cmd/connstat/connstat_tcp.h","type":"ADDED","insertions":50,"deletions":0},{"file":"usr/src/man/man1m/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/man/man1m/connstat.1m","type":"ADDED","insertions":395,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.man1m.inc","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/mib2.h","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"usr/src/uts/common/inet/tcp.h","type":"MODIFIED","insertions":4,"deletions":-7},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":2,"deletions":-17},{"file":"usr/src/uts/common/inet/tcp/tcp_fusion.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":27,"deletions":-19},{"file":"usr/src/uts/common/inet/tcp/tcp_output.c","type":"MODIFIED","insertions":17,"deletions":-5},{"file":"usr/src/uts/common/inet/tcp/tcp_stats.c","type":"MODIFIED","insertions":49,"deletions":-63},{"file":"usr/src/uts/common/inet/tcp/tcp_time_wait.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp/tcp_timers.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/tcp_stats.h","type":"MODIFIED","insertions":21,"deletions":0}],"sizeInsertions":2022,"sizeDeletions":-144}],"allReviewers":[{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}]}