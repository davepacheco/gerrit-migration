{"project":"joyent/sdc-cnapi","branch":"master","id":"Ib43bf038050c983cf7587395fd6fb24db0f275c3","number":"2841","subject":"CNAPI-725 test-task test failing because of a change introduced in CNAPI-724 Reviewed by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e Approved by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e","owner":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"url":"https://cr.joyent.us/2841","commitMessage":"CNAPI-725 test-task test failing because of a change introduced in CNAPI-724\nReviewed by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e\nApproved by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e\n","createdOn":1508749938,"lastUpdated":1508948525,"open":false,"status":"MERGED","comments":[{"timestamp":1508749938,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 1."},{"timestamp":1508749939,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 3ac66b9911710b101b359f125a8b48a7aa42f2d8\n    \n    don\u0027t send internal server error if task fails"},{"timestamp":1508749970,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1508779215,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1508836829,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 2."},{"timestamp":1508836830,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit b86cbbb5b929aef32f46b0e42d16fa69611cd72d\n    \n    don\u0027t send internal server error if task fails"},{"timestamp":1508836865,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1508889878,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 3."},{"timestamp":1508889879,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 9694699f8aba1686d87f2616d3910994134952d9\n    \n    back out previous change, replace with an explanation of what we\u0027re doing"},{"timestamp":1508889921,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1508890527,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1508948520,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1508948525,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Orlando Vazquez"}],"currentPatchSet":{"number":"4","revision":"b43bf038050c983cf7587395fd6fb24db0f275c3","parents":["4eb7ed4abb89fcc0c5c612b71a90e0f46dbb4605"],"ref":"refs/changes/41/2841/4","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1508948520,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1508889921,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1508890527,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1508890527,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"SUBM","value":"1","grantedOn":1508948525,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/endpoints/tasks.js","type":"MODIFIED","insertions":11,"deletions":-8}],"sizeInsertions":11,"sizeDeletions":-8},"patchSets":[{"number":"1","revision":"4df9a681da04db311d422976d96b2db5f08a3765","parents":["4eb7ed4abb89fcc0c5c612b71a90e0f46dbb4605"],"ref":"refs/changes/41/2841/1","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1508749938,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1508749970,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/endpoints/tasks.js","line":86,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"What about changing the function signature to\n\nfunction wait(err, taskResult)\n\nor something along those lines, and in this occurence taskResult would have an error property, or would be an instance of Error? Or maybe a signature of the following form:\n\nfunction wait(err, taskResult, taskErr)\n\n?\n\nBy convention, an error object passed as the first parameter for the callback of a function performing async work represents a problem when performing that work.\n\nHowever here it seems we want to represent an error in the task that was waited on, which isn\u0027t the same. In this case it seems we want to represent an error in the result _of the waited task_, not an error in the process of waiting for that task."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/tasks.js","type":"MODIFIED","insertions":1,"deletions":-5}],"sizeInsertions":1,"sizeDeletions":-5},{"number":"2","revision":"41c2d6e190ca887234d6f9e7c49dbb318b2a16b1","parents":["4eb7ed4abb89fcc0c5c612b71a90e0f46dbb4605"],"ref":"refs/changes/41/2841/2","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1508836829,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1508836865,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/tasks.js","type":"MODIFIED","insertions":4,"deletions":-6},{"file":"lib/models/server.js","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":6,"sizeDeletions":-8},{"number":"3","revision":"06374b38d21bfbaa53569a471c2841d5c46515ee","parents":["4eb7ed4abb89fcc0c5c612b71a90e0f46dbb4605"],"ref":"refs/changes/41/2841/3","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1508889878,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1508889921,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1508890527,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1508890527,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/tasks.js","type":"MODIFIED","insertions":11,"deletions":-8}],"sizeInsertions":11,"sizeDeletions":-8},{"number":"4","revision":"b43bf038050c983cf7587395fd6fb24db0f275c3","parents":["4eb7ed4abb89fcc0c5c612b71a90e0f46dbb4605"],"ref":"refs/changes/41/2841/4","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1508948520,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1508889921,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1508890527,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1508890527,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"SUBM","value":"1","grantedOn":1508948525,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/endpoints/tasks.js","type":"MODIFIED","insertions":11,"deletions":-8}],"sizeInsertions":11,"sizeDeletions":-8}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}]}