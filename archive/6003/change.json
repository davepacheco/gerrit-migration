{"project":"joyent/sdc-manatee","branch":"master","topic":"manta-4172","id":"Ibd86d7c2841a1e1bc313c31a4bce2740f1b58f4f","number":"6003","subject":"MANTA-4172 zk client ping timeouts not working MANATEE-375 Update dev zone scripts for MANATEE-335 MANATEE-343 manatee full rebuilds should pull from the primary where possible MANATEE-400 Manatee deleterious when dataset will not unmount MANATEE-405 snap","owner":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"url":"https://cr.joyent.us/6003","commitMessage":"MANTA-4172 zk client ping timeouts not working\nMANATEE-375 Update dev zone scripts for MANATEE-335\nMANATEE-343 manatee full rebuilds should pull from the primary where possible\nMANATEE-400 Manatee deleterious when dataset will not unmount\nMANATEE-405 snapshotter should not enter maintenance when dataset does not exist\nMANATEE-307 manatee-snapshotter failing on snapshot with dependent clones\nMANATEE-332 manatee-snapshotter fails spuriously during rebuild\nMANATEE-397 `manatee-adm history` fails with `TypeError: Cannot read property \u0027zoneId\u0027 of null` (again)\nMANATEE-398 manatee-adm history -j doesn\u0027t understand v1 timestamps\nMANATEE-389 deposed array is missing in stateBackfill\nMANATEE-390 check for deposed array\u0027s existence in manatee-adm history\nMANATEE-359 manatee reports primary to sync replication as async\nMANATEE-341 \"manatee-adm rebuild\" hangs when rebuilding a sync peer\nMANATEE-344 Rebuild should not exit if postgres hasn\u0027t started on its first attempt\nReviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\nApproved by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\n","createdOn":1553207722,"lastUpdated":1553555950,"open":false,"status":"MERGED","comments":[{"timestamp":1553207722,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 1."},{"timestamp":1553207728,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1553207733,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Topic set to manta-4172"},{"timestamp":1553207888,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 2."},{"timestamp":1553207894,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1553208725,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 2:\n\nBuilt as image 6250947b-6485-4031-b793-b2795643afb7"},{"timestamp":1553209213,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 2:\n\nOther commits in `manatee` which this crosses: https://gist.github.com/arekinath/1a93e1ccbeacd28507c450662e3198aa"},{"timestamp":1553210534,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1553211868,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 4."},{"timestamp":1553211874,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1553279557,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 4:\n\nBuilt as image c03da86c-5edc-4562-b836-84b35a52e79b"},{"timestamp":1553555908,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1\n\nThanks for the extra Triton testing.  I think that should cover all of the intermediate changes that we\u0027re picking up here."},{"timestamp":1553555945,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 5: Commit message was updated."},{"timestamp":1553555950,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Alex Wilson"}],"currentPatchSet":{"number":"5","revision":"f6f4c82d6b639e252d15f52595344725c5546608","parents":["a3ebb320b1d3f2b9a73e1789275470c54dde518b"],"ref":"refs/changes/03/6003/5","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1553555945,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553211874,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553555908,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553555908,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"SUBM","value":"1","grantedOn":1553555950,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":22,"deletions":0},{"file":"boot/setup.sh","type":"MODIFIED","insertions":1,"deletions":-28},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":2,"sizeDeletions":-29},"patchSets":[{"number":"1","revision":"eda01acc1336ac41d1941d0b16fc1f47257fa693","parents":["a3ebb320b1d3f2b9a73e1789275470c54dde518b"],"ref":"refs/changes/03/6003/1","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1553207722,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553207728,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":2,"sizeDeletions":-1},{"number":"2","revision":"adaf104bd5680bd850a63e8e4221bd8664f6ded0","parents":["a3ebb320b1d3f2b9a73e1789275470c54dde518b"],"ref":"refs/changes/03/6003/2","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1553207888,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553207894,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1,"sizeDeletions":-1},{"number":"3","revision":"1281b8c94e91d4214272dcff8417fcd6f706ce52","parents":["a3ebb320b1d3f2b9a73e1789275470c54dde518b"],"ref":"refs/changes/03/6003/3","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1553210534,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553207894,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":20,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1,"sizeDeletions":-1},{"number":"4","revision":"bd86d7c2841a1e1bc313c31a4bce2740f1b58f4f","parents":["a3ebb320b1d3f2b9a73e1789275470c54dde518b"],"ref":"refs/changes/03/6003/4","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1553211868,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553555908,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553555908,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553211874,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":20,"deletions":0},{"file":"boot/setup.sh","type":"MODIFIED","insertions":1,"deletions":-28},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":2,"sizeDeletions":-29},{"number":"5","revision":"f6f4c82d6b639e252d15f52595344725c5546608","parents":["a3ebb320b1d3f2b9a73e1789275470c54dde518b"],"ref":"refs/changes/03/6003/5","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1553555945,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1553555950,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553555908,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553555908,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553211874,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":22,"deletions":0},{"file":"boot/setup.sh","type":"MODIFIED","insertions":1,"deletions":-28},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":2,"sizeDeletions":-29}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}]}