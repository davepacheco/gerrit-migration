{"project":"joyent/pgstatsmon","branch":"master","id":"I588149d028bc7560d2324c137947163578212e58","number":"3936","subject":"joyent/pgstatsmon#10 connection count query isn\u0027t always accurate joyent/pgstatsmon#11 create scripts to get basic stats from pgstatsmon joyent/pgstatsmon#12 postgres peers could report their own WAL positions Reviewed by: Kelly McLaughlin \u003ckelly.mclaughl","owner":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"url":"https://cr.joyent.us/3936","commitMessage":"joyent/pgstatsmon#10 connection count query isn\u0027t always accurate\njoyent/pgstatsmon#11 create scripts to get basic stats from pgstatsmon\njoyent/pgstatsmon#12 postgres peers could report their own WAL positions\nReviewed by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e\nApproved by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e\n","createdOn":1526055646,"lastUpdated":1528233400,"open":false,"status":"MERGED","comments":[{"timestamp":1526055646,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 1."},{"timestamp":1526055654,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1527623424,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 2."},{"timestamp":1527623430,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1527629377,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 3."},{"timestamp":1527629384,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1527629467,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 4."},{"timestamp":1527629474,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1527629642,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 5."},{"timestamp":1527629649,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1528229898,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 6."},{"timestamp":1528229905,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1528232005,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 6: Code-Review+1 Integration-Approval+1\n\nI\u0027ve looked over the code and tested an image built with the changes to verify everything is working as expected."},{"timestamp":1528233218,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 7: Commit message was updated."},{"timestamp":1528233378,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 8: Patch Set 7 was rebased."},{"timestamp":1528233384,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8:\n\n\"make check\" passed ok"},{"timestamp":1528233400,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Kody A Kantor"}],"currentPatchSet":{"number":"8","revision":"588149d028bc7560d2324c137947163578212e58","parents":["d45ecaf3c58886f4e71f7f157f49a66d76b562cb"],"ref":"refs/changes/36/3936/8","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1528233378,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528229905,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528232005,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1528232005,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"SUBM","value":"1","grantedOn":1528233400,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":8,"deletions":0},{"file":"bin/dtrace/backendstat.d","type":"ADDED","insertions":130,"deletions":0},{"file":"bin/dtrace/querystat.d","type":"ADDED","insertions":103,"deletions":0},{"file":"bin/dtrace/walstat.d","type":"ADDED","insertions":117,"deletions":0},{"file":"docs/overview.md","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":63,"deletions":-59},{"file":"lib/queries.js","type":"MODIFIED","insertions":50,"deletions":-3}],"sizeInsertions":490,"sizeDeletions":-66},"patchSets":[{"number":"1","revision":"dd23ae730b5984b2d6c2e9a77804323a31440aa5","parents":["ed0f937f5f778ad8d26d028741fe3b05d5826982"],"ref":"refs/changes/36/3936/1","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1526055646,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1526055654,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"bin/backendstat.d","type":"ADDED","insertions":125,"deletions":0},{"file":"bin/querystat.d","type":"ADDED","insertions":98,"deletions":0}],"sizeInsertions":236,"sizeDeletions":-1},{"number":"2","revision":"beb4baf5364951713ba2fc4b8d8c9921b7204212","parents":["ed0f937f5f778ad8d26d028741fe3b05d5826982"],"ref":"refs/changes/36/3936/2","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1527623424,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527623430,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":8,"deletions":0},{"file":"bin/dtrace/backendstat.d","type":"ADDED","insertions":125,"deletions":0},{"file":"bin/dtrace/querystat.d","type":"ADDED","insertions":98,"deletions":0},{"file":"bin/dtrace/walstat.d","type":"ADDED","insertions":116,"deletions":0},{"file":"docs/overview.md","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":53,"deletions":-61},{"file":"lib/queries.js","type":"MODIFIED","insertions":50,"deletions":-3}],"sizeInsertions":469,"sizeDeletions":-68},{"number":"3","revision":"b3211d7cab3ccfedda0bee9bd16173944d85928b","parents":["ed0f937f5f778ad8d26d028741fe3b05d5826982"],"ref":"refs/changes/36/3936/3","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1527629377,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527629384,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":8,"deletions":0},{"file":"bin/dtrace/backendstat.d","type":"ADDED","insertions":125,"deletions":0},{"file":"bin/dtrace/querystat.d","type":"ADDED","insertions":98,"deletions":0},{"file":"bin/dtrace/walstat.d","type":"ADDED","insertions":116,"deletions":0},{"file":"docs/overview.md","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":70,"deletions":-59},{"file":"lib/queries.js","type":"MODIFIED","insertions":50,"deletions":-3}],"sizeInsertions":486,"sizeDeletions":-66},{"number":"4","revision":"eefcc0967bc809752f69b0ad74e6a0848651c0d4","parents":["ed0f937f5f778ad8d26d028741fe3b05d5826982"],"ref":"refs/changes/36/3936/4","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1527629467,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527629474,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":8,"deletions":0},{"file":"bin/dtrace/backendstat.d","type":"ADDED","insertions":125,"deletions":0},{"file":"bin/dtrace/querystat.d","type":"ADDED","insertions":98,"deletions":0},{"file":"bin/dtrace/walstat.d","type":"ADDED","insertions":116,"deletions":0},{"file":"docs/overview.md","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":63,"deletions":-59},{"file":"lib/queries.js","type":"MODIFIED","insertions":50,"deletions":-3}],"sizeInsertions":479,"sizeDeletions":-66},{"number":"5","revision":"2e6bbff7a52fb0a4ec3f58ff77bc8c1dcd6d00c7","parents":["ed0f937f5f778ad8d26d028741fe3b05d5826982"],"ref":"refs/changes/36/3936/5","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1527629642,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527629649,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":8,"deletions":0},{"file":"bin/dtrace/backendstat.d","type":"ADDED","insertions":125,"deletions":0},{"file":"bin/dtrace/querystat.d","type":"ADDED","insertions":98,"deletions":0},{"file":"bin/dtrace/walstat.d","type":"ADDED","insertions":116,"deletions":0},{"file":"docs/overview.md","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":63,"deletions":-59},{"file":"lib/queries.js","type":"MODIFIED","insertions":50,"deletions":-3}],"sizeInsertions":479,"sizeDeletions":-66},{"number":"6","revision":"b8c95745aa90d797f7652d253aeb697e119554a9","parents":["ed0f937f5f778ad8d26d028741fe3b05d5826982"],"ref":"refs/changes/36/3936/6","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1528229898,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528229905,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528232005,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1528232005,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":8,"deletions":0},{"file":"bin/dtrace/backendstat.d","type":"ADDED","insertions":130,"deletions":0},{"file":"bin/dtrace/querystat.d","type":"ADDED","insertions":103,"deletions":0},{"file":"bin/dtrace/walstat.d","type":"ADDED","insertions":117,"deletions":0},{"file":"docs/overview.md","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":63,"deletions":-59},{"file":"lib/queries.js","type":"MODIFIED","insertions":50,"deletions":-3}],"sizeInsertions":490,"sizeDeletions":-66},{"number":"7","revision":"d0c1663997b76e35ce89bfc91fdc79258afcd820","parents":["ed0f937f5f778ad8d26d028741fe3b05d5826982"],"ref":"refs/changes/36/3936/7","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1528233218,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528229905,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528232005,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1528232005,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":8,"deletions":0},{"file":"bin/dtrace/backendstat.d","type":"ADDED","insertions":130,"deletions":0},{"file":"bin/dtrace/querystat.d","type":"ADDED","insertions":103,"deletions":0},{"file":"bin/dtrace/walstat.d","type":"ADDED","insertions":117,"deletions":0},{"file":"docs/overview.md","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":63,"deletions":-59},{"file":"lib/queries.js","type":"MODIFIED","insertions":50,"deletions":-3}],"sizeInsertions":490,"sizeDeletions":-66},{"number":"8","revision":"588149d028bc7560d2324c137947163578212e58","parents":["d45ecaf3c58886f4e71f7f157f49a66d76b562cb"],"ref":"refs/changes/36/3936/8","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1528233378,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528229905,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1528233400,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528232005,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1528232005,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":8,"deletions":0},{"file":"bin/dtrace/backendstat.d","type":"ADDED","insertions":130,"deletions":0},{"file":"bin/dtrace/querystat.d","type":"ADDED","insertions":103,"deletions":0},{"file":"bin/dtrace/walstat.d","type":"ADDED","insertions":117,"deletions":0},{"file":"docs/overview.md","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":63,"deletions":-59},{"file":"lib/queries.js","type":"MODIFIED","insertions":50,"deletions":-3}],"sizeInsertions":490,"sizeDeletions":-66}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}]}