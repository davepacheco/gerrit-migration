{"project":"joyent/manta-manatee","branch":"master","id":"Ie13b0e83911bad8b8915d92ce8f5622d9707cbb7","number":"2379","subject":"MANATEE-350 Backup process fails due to pg_dump not being in PATH","owner":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"url":"https://cr.joyent.us/2379","commitMessage":"MANATEE-350 Backup process fails due to pg_dump not being in PATH\n","createdOn":1502470581,"lastUpdated":1502476449,"open":false,"status":"MERGED","comments":[{"timestamp":1502470581,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 1."},{"timestamp":1502470584,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1502471200,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 1:\n\nI removed a bunch of duplicate PATH paths, and set this to inherit $PATH from ~/.bashrc (which is sourced in pg_backup_common.sh). Let me know if this should take a different approach."},{"timestamp":1502471752,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1: Code-Review+1\n\n(1 comment)"},{"timestamp":1502474049,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1502474662,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 2."},{"timestamp":1502474673,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1502476034,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1502476449,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Kody A Kantor"}],"currentPatchSet":{"number":"2","revision":"e13b0e83911bad8b8915d92ce8f5622d9707cbb7","parents":["9c70edbeb33668cb9d0d5de37b42dcefbb93d50e"],"ref":"refs/changes/79/2379/2","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1502474662,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1502474673,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502476034,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1502476034,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1502476449,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"pg_dump/pg_backup_common.sh","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1,"sizeDeletions":-1},"patchSets":[{"number":"1","revision":"ebc2e93e47675fde3047371b90d374bce13f83c7","parents":["9c70edbeb33668cb9d0d5de37b42dcefbb93d50e"],"ref":"refs/changes/79/2379/1","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1502470581,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502471752,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1502470584,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"pg_dump/pg_backup_common.sh","line":19,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Since we\u0027re running programs out of manatee\u0027s node_modules/.bin, we probably shouldn\u0027t be using registrar\u0027s node, in case registrar or manatee ever change their versions. Let\u0027s change this to be:\n\n    /opt/smartdc/manatee/build/node/bin\n\nIt also looks like we don\u0027t need to have registrar\u0027s node_modules/.bin in here. The only things it provides are:\n\n    [root@9b7c764b (postgres) /opt/smartdc/registrar/node_modules/.bin]$ ls\n    bunyan  faucet  istanbul  tape"},{"file":"pg_dump/pg_backup_common.sh","line":19,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Sure! I\u0027ll make that change. I was a little nervous to do this not knowing if something down the line would be consuming it for some reason."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"pg_dump/pg_backup_common.sh","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1,"sizeDeletions":-1},{"number":"2","revision":"e13b0e83911bad8b8915d92ce8f5622d9707cbb7","parents":["9c70edbeb33668cb9d0d5de37b42dcefbb93d50e"],"ref":"refs/changes/79/2379/2","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1502474662,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502476034,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1502476034,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1502474673,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1502476449,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"pg_dump/pg_backup_common.sh","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1,"sizeDeletions":-1}],"allReviewers":[{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}]}