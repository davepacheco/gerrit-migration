{"project":"joyent/sdcadm","branch":"master","id":"I63bcf2b54b16a729efe9f3858e8c3d14f3fd53fb","number":"4688","subject":"TRITON-619 Manatee upgrades broken Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/4688","commitMessage":"TRITON-619 Manatee upgrades broken\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1534348024,"lastUpdated":1535396065,"open":false,"status":"MERGED","comments":[{"timestamp":1534348024,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1534348029,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 98e958d1b0e9e17bb7b3e66cbaa2982703630cec\n    \n    TRITON-619 Manatee upgrades broken"},{"timestamp":1534348061,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1534348198,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nI\u0027ve already tested this locally and in east-3b, which has enough data to made the updates fail when I first tried to repro the issue there. So far so good, as I\u0027ve commented into east-3b channel."},{"timestamp":1534434660,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1534434664,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 5956eadc0bad33e89d48d19e83dedddfcb0b01df\n    \n    TRITON-619 Manatee upgrades broken"},{"timestamp":1534434695,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2:\n\n\"make check\" passed ok"},{"timestamp":1535052932,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(2 comments)"},{"timestamp":1535391009,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 3."},{"timestamp":1535391013,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 82ffe67755448f74e8e4c618db766639064f3fd4\n    \n    TRITON-619 Manatee upgrades broken"},{"timestamp":1535391049,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1535391061,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\n(2 comments)\n\nMind to take another look? Updated comments accordingly"},{"timestamp":1535394764,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1\n\nSee note on the ticket about this really being a workaround rather than a perfectly solid fix (either getting SAPI local cache usage to be reliable and/or allowing manatee primary zone setup to not depend on a working SAPI at all)."},{"timestamp":1535396055,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1535396065,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"4","revision":"63bcf2b54b16a729efe9f3858e8c3d14f3fd53fb","parents":["d3f31ce533facdf89706c70f2868627198640c47"],"ref":"refs/changes/88/4688/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1535396055,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1535391049,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1535394764,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1535394764,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1535396065,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":10,"deletions":0},{"file":"lib/procedures/update-manatee-v2.js","type":"MODIFIED","insertions":95,"deletions":-61},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":106,"sizeDeletions":-62},"patchSets":[{"number":"1","revision":"2bc0e4a47ec85aa443e0abbaa91cc64f73fb79ed","parents":["ede3321166751d2cb49127d73d6c62c3388ffea7"],"ref":"refs/changes/88/4688/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1534348024,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1534348061,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/procedures/update-manatee-v2.js","type":"MODIFIED","insertions":93,"deletions":-61},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":98,"sizeDeletions":-62},{"number":"2","revision":"367c6cb2d2f32d83f553a81b30b910fdf8fb9888","parents":["7dc1b39994a1a43cf326d37eded61e439cb751a8"],"ref":"refs/changes/88/4688/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1534434660,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1534348061,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"CHANGES.md","line":15,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Instead of just the ticket title, it would be nice to explain what the sdcadm behaviour change is here."},{"file":"CHANGES.md","line":15,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Good idea. Done"},{"file":"lib/procedures/update-manatee-v2.js","line":1033,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"How does this help? Disabling \u0027registrar\u0027 in moray zones will (eventually) make them fall out of DNS, which could (eventually) make SAPI\u0027s moray client react. However, that isn\u0027t a \"kick moray\"."},{"file":"lib/procedures/update-manatee-v2.js","line":1033,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Rewording the whole comment!"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/procedures/update-manatee-v2.js","type":"MODIFIED","insertions":93,"deletions":-61},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":98,"sizeDeletions":-62},{"number":"3","revision":"8010b931372cef13c3f4f430a928830576ed20c6","parents":["d3f31ce533facdf89706c70f2868627198640c47"],"ref":"refs/changes/88/4688/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1535391009,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1535391049,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1535394764,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1535394764,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":10,"deletions":0},{"file":"lib/procedures/update-manatee-v2.js","type":"MODIFIED","insertions":95,"deletions":-61},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":106,"sizeDeletions":-62},{"number":"4","revision":"63bcf2b54b16a729efe9f3858e8c3d14f3fd53fb","parents":["d3f31ce533facdf89706c70f2868627198640c47"],"ref":"refs/changes/88/4688/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1535396055,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1535391049,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1535394764,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1535394764,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1535396065,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":10,"deletions":0},{"file":"lib/procedures/update-manatee-v2.js","type":"MODIFIED","insertions":95,"deletions":-61},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":106,"sizeDeletions":-62}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}