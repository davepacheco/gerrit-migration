{"project":"joyent/manta-marlin-dashboard","branch":"master","id":"I37fc6ca0f674a0bb723a23b2cee8c6a44e500354","number":"5681","subject":"MANTA-4140 manta repositories should not use git+ssh:// URIs in package.json files Reviewed by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e Approved by: Richard Bradley \u003crichard.bradley@joyent.com\u003e","owner":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"url":"https://cr.joyent.us/5681","commitMessage":"MANTA-4140 manta repositories should not use git+ssh:// URIs in package.json files\nReviewed by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e\nApproved by: Richard Bradley \u003crichard.bradley@joyent.com\u003e\n","createdOn":1551456188,"lastUpdated":1551717252,"open":false,"status":"MERGED","comments":[{"timestamp":1551456188,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 1."},{"timestamp":1551456195,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit b59bb34a15cf71f551979e8ef448bce464490bcc\n    \n    MANTA-4140 manta repositories should not use git+ssh:// URIs in package.json files"},{"timestamp":1551456214,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1551459501,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 1:\n\nThis repo has another one hiding in .gitmodules that prevents me from building:\n\nhttps://github.com/joyent/manta-marlin-dashboard/blob/master/.gitmodules#L1-L3"},{"timestamp":1551459706,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1:\n\n\u003e This repo has another one hiding in .gitmodules that prevents me\n \u003e from building:\n \u003e \n \u003e https://github.com/joyent/manta-marlin-dashboard/blob/master/.gitmodules#L1-L3\n\nAh, thanks for spotting that, will fix."},{"timestamp":1551459726,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 2."},{"timestamp":1551459733,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 9b407b5a5d92eea9046e940909f5151ad869a8fa\n    \n    MANTA-4140 manta repositories should not use git+ssh:// URIs in package.json files"},{"timestamp":1551459751,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1551460966,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 2:\n\nI still get a failure trying to install node-sdc-clients:\n\n```\nPATH\u003d/root/repos/manta-marlin-dashboard/build/node/bin:/root/opt/go/bin:/root/bin:/opt/local/bin:/opt/local/sbin:/usr/bin:/usr/sbin node /root/repos/manta-marlin-dashboard/build/node/bin/npm install\nnpm ERR! git clone --template\u003d/root/.npm/_git-remotes/_templates --mirror ssh://git@github.com/joyent/node-sdc-clients.git /root/.npm/_git-remotes/ssh-git-github-com-joyent-node-sdc-clients-git-ba464688: Cloning into bare repository \u0027/root/.npm/_git-remotes/ssh-git-github-com-joyent-node-sdc-clients-git-ba464688\u0027...\nnpm ERR! git clone --template\u003d/root/.npm/_git-remotes/_templates --mirror ssh://git@github.com/joyent/node-sdc-clients.git /root/.npm/_git-remotes/ssh-git-github-com-joyent-node-sdc-clients-git-ba464688: Permission denied (publickey).\nnpm ERR! git clone --template\u003d/root/.npm/_git-remotes/_templates --mirror ssh://git@github.com/joyent/node-sdc-clients.git /root/.npm/_git-remotes/ssh-git-github-com-joyent-node-sdc-clients-git-ba464688: fatal: Could not read from remote repository.\nnpm ERR! git clone --template\u003d/root/.npm/_git-remotes/_templates --mirror ssh://git@github.com/joyent/node-sdc-clients.git /root/.npm/_git-remotes/ssh-git-github-com-joyent-node-sdc-clients-git-ba464688: \nnpm ERR! git clone --template\u003d/root/.npm/_git-remotes/_templates --mirror ssh://git@github.com/joyent/node-sdc-clients.git /root/.npm/_git-remotes/ssh-git-github-com-joyent-node-sdc-clients-git-ba464688: Please make sure you have the correct access rights\nnpm ERR! git clone --template\u003d/root/.npm/_git-remotes/_templates --mirror ssh://git@github.com/joyent/node-sdc-clients.git /root/.npm/_git-remotes/ssh-git-github-com-joyent-node-sdc-clients-git-ba464688: and the repository exists.\nnpm ERR! SunOS 5.11\nnpm ERR! argv \"node\" \"/root/repos/manta-marlin-dashboard/build/node/bin/npm\" \"install\"\nnpm ERR! node v0.10.48\nnpm ERR! npm  v2.15.1\nnpm ERR! code 128\n\nnpm ERR! Command failed: Cloning into bare repository \u0027/root/.npm/_git-remotes/ssh-git-github-com-joyent-node-sdc-clients-git-ba464688\u0027...\nnpm ERR! Permission denied (publickey).\nnpm ERR! fatal: Could not read from remote repository.\nnpm ERR! \nnpm ERR! Please make sure you have the correct access rights\nnpm ERR! and the repository exists.\nnpm ERR! \nnpm ERR! \nnpm ERR! If you need help, you may report this error at:\nnpm ERR!     \u003chttps://github.com/npm/npm/issues\u003e\n\nnpm ERR! Please include the following file with any support request:\nnpm ERR!     /root/repos/manta-marlin-dashboard/npm-debug.log\nMakefile:71: recipe for target \u0027all\u0027 failed\n```\n\nIt does work if I change the package.json entry to this:\n\n```\n\"sdc-clients\": \"https://github.com/joyent/node-sdc-clients.git#c962959\",\n```"},{"timestamp":1551461784,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 2:\n\nOch, it must be Friday, sorry about that. My leaving the \u0027git+https://git@github.com:joyent/...\u0027 in the url was some sort of confused hybrid that git must have decided to keep using ssh for.  Switched to https://github.com/joyent/node-sdc-clients.git#c962959"},{"timestamp":1551461794,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 3."},{"timestamp":1551461802,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit b5021f27be7766cf2407b9c657b98a7c547513f0\n    \n    MANTA-4140 manta repositories should not use git+ssh:// URIs in package.json files"},{"timestamp":1551461821,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1551472573,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 3: Code-Review+1\n\nWorks now!"},{"timestamp":1551708297,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 4."},{"timestamp":1551708304,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit d2f003129c59a2801bdba0cbcc80fd4fed14d433\n    \n    Add ufds and actually bump sdc-clients, similar to manta-madtom change"},{"timestamp":1551708324,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1551708852,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 4:\n\n\u003e New commits:\n \u003e \n \u003e commit d2f003129c59a2801bdba0cbcc80fd4fed14d433\n \u003e \n \u003e Add ufds and actually bump sdc-clients, similar to manta-madtom\n \u003e change\n\nDuring IA review, Richard asked if I\u0027d done MG builds with these exact changes. I hadn\u0027t and had only patched the changes into lullaby workspaces. On doing that final testing, I uncovered this bug - where I\u0027d forgotten to pull over changes I\u0027d made to the lullaby manta-marlin-dashboard workspace into this wad."},{"timestamp":1551715447,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1551717022,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 4: Integration-Approval+1"},{"timestamp":1551717192,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1551717252,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Tim Foster"}],"currentPatchSet":{"number":"5","revision":"37fc6ca0f674a0bb723a23b2cee8c6a44e500354","parents":["e05b2f79c22f11ec218aa373806867f89cfa0b76"],"ref":"refs/changes/81/5681/5","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1551717192,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1551708324,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551715447,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1551717022,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"SUBM","value":"1","grantedOn":1551717252,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"bin/generate-config.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":9,"sizeDeletions":-6},"patchSets":[{"number":"1","revision":"7c046add38e4bef4d3adf47f0a32752279ad1255","parents":["e05b2f79c22f11ec218aa373806867f89cfa0b76"],"ref":"refs/changes/81/5681/1","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1551456188,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1551456214,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"bin/generate-config.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":7,"sizeDeletions":-5},{"number":"2","revision":"ce30715421f93fe030d2198e4a5aae2b399d0e92","parents":["e05b2f79c22f11ec218aa373806867f89cfa0b76"],"ref":"refs/changes/81/5681/2","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1551459726,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1551459751,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"bin/generate-config.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":8,"sizeDeletions":-6},{"number":"3","revision":"5bd2829cccde99265bbf9f4279e3c83591d16101","parents":["e05b2f79c22f11ec218aa373806867f89cfa0b76"],"ref":"refs/changes/81/5681/3","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1551461794,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1551461821,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551472573,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"bin/generate-config.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":8,"sizeDeletions":-6},{"number":"4","revision":"4dddf393d6569b705c87dff092dee34439059d4b","parents":["e05b2f79c22f11ec218aa373806867f89cfa0b76"],"ref":"refs/changes/81/5681/4","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1551708297,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1551708324,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1551717022,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551715447,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"bin/generate-config.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":9,"sizeDeletions":-6},{"number":"5","revision":"37fc6ca0f674a0bb723a23b2cee8c6a44e500354","parents":["e05b2f79c22f11ec218aa373806867f89cfa0b76"],"ref":"refs/changes/81/5681/5","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1551717192,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1551708324,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1551717022,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551715447,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"SUBM","value":"1","grantedOn":1551717252,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"bin/generate-config.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":9,"sizeDeletions":-6}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}]}