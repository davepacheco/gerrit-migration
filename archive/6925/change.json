{"project":"joyent/manta-remora","branch":"master","id":"I1d31e7bc22cccf7e0f90d62e2b32d70e40debbf1","number":"6925","subject":"MANTA-4550 create manta moray client module for managing per shard connections MANTA-4534 rebalancer should take option to specify location of config.json MANTA-4570 add MPL to rebalancer Reviewed by: Robert Bogart \u003cRobert.bogart@joyent.com\u003e Approved by: ","owner":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"url":"https://cr.joyent.us/6925","commitMessage":"MANTA-4550 create manta moray client module for managing per shard connections\nMANTA-4534 rebalancer should take option to specify location of config.json\nMANTA-4570 add MPL to rebalancer\nReviewed by: Robert Bogart \u003cRobert.bogart@joyent.com\u003e\nApproved by: Robert Bogart \u003cRobert.bogart@joyent.com\u003e\n","createdOn":1568920987,"lastUpdated":1569960060,"open":false,"status":"MERGED","comments":[{"timestamp":1568920987,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 1."},{"timestamp":1568921095,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n\"make check\" exited with status 2\n\n    Compiling diesel-derive-enum v0.4.4 (https://github.com/adwhit/diesel-derive-enum.git#3316c02b)\n     Checking crc v1.8.1\n error: aborting due to previous error\n \n error: Could not compile `typenum`.\n warning: build failed, waiting for other jobs to finish...\n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n  --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:3:5\n   |\n 3 | use std::convert::TryInto;\n   |     ^^^^^^^^^^^^^^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n  --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:6:5\n   |\n 6 | use std::convert::TryInto;\n   |     ^^^^^^^^^^^^^^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n     --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:1124:52\n      |\n 1124 |         let bytes: [u8; 4] \u003d self.b.dict[pos..end].try_into().unwrap();\n      |                                                    ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n     --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:1133:56\n      |\n 1133 |         let bytes: [u8; 8] \u003d self.b.dict[pos..pos + 8].try_into().unwrap();\n      |                                                        ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n    --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:342:44\n     |\n 342 |         let two_bytes \u003d iter.as_ref()[..2].try_into().unwrap();\n     |                                            ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n    --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:357:54\n     |\n 357 |         let four_bytes: [u8; 4] \u003d iter.as_ref()[..4].try_into().unwrap();\n     |                                                      ^^^^^^^^\n \n error: aborting due to 6 previous errors\n \n For more information about this error, try `rustc --explain E0658`.\n error: Could not compile `miniz_oxide`.\n warning: build failed, waiting for other jobs to finish...\n error: build failed\n gmake: *** [Makefile:12: check] Error 101"},{"timestamp":1568922544,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1569006407,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 2."},{"timestamp":1569006501,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing-1\n\n\"make check\" exited with status 2\n\n    Compiling syn v0.15.44\n    Compiling mime_guess v2.0.1\n error: aborting due to previous error\n \n error: Could not compile `typenum`.\n warning: build failed, waiting for other jobs to finish...\n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n  --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:3:5\n   |\n 3 | use std::convert::TryInto;\n   |     ^^^^^^^^^^^^^^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n  --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:6:5\n   |\n 6 | use std::convert::TryInto;\n   |     ^^^^^^^^^^^^^^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n     --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:1124:52\n      |\n 1124 |         let bytes: [u8; 4] \u003d self.b.dict[pos..end].try_into().unwrap();\n      |                                                    ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n     --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:1133:56\n      |\n 1133 |         let bytes: [u8; 8] \u003d self.b.dict[pos..pos + 8].try_into().unwrap();\n      |                                                        ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n    --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:342:44\n     |\n 342 |         let two_bytes \u003d iter.as_ref()[..2].try_into().unwrap();\n     |                                            ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n    --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:357:54\n     |\n 357 |         let four_bytes: [u8; 4] \u003d iter.as_ref()[..4].try_into().unwrap();\n     |                                                      ^^^^^^^^\n \n error: aborting due to 6 previous errors\n \n For more information about this error, try `rustc --explain E0658`.\n error: Could not compile `miniz_oxide`.\n warning: build failed, waiting for other jobs to finish...\n error: build failed\n gmake: *** [Makefile:12: check] Error 101"},{"timestamp":1569010616,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 3."},{"timestamp":1569010708,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing-1\n\n\"make check\" exited with status 2\n\n     Checking num-complex v0.2.3\n    Compiling syn v0.15.44\n error: aborting due to previous error\n \n error: Could not compile `typenum`.\n warning: build failed, waiting for other jobs to finish...\n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n  --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:3:5\n   |\n 3 | use std::convert::TryInto;\n   |     ^^^^^^^^^^^^^^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n  --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:6:5\n   |\n 6 | use std::convert::TryInto;\n   |     ^^^^^^^^^^^^^^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n     --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:1124:52\n      |\n 1124 |         let bytes: [u8; 4] \u003d self.b.dict[pos..end].try_into().unwrap();\n      |                                                    ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n     --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:1133:56\n      |\n 1133 |         let bytes: [u8; 8] \u003d self.b.dict[pos..pos + 8].try_into().unwrap();\n      |                                                        ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n    --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:342:44\n     |\n 342 |         let two_bytes \u003d iter.as_ref()[..2].try_into().unwrap();\n     |                                            ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n    --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:357:54\n     |\n 357 |         let four_bytes: [u8; 4] \u003d iter.as_ref()[..4].try_into().unwrap();\n     |                                                      ^^^^^^^^\n \n error: aborting due to 6 previous errors\n \n For more information about this error, try `rustc --explain E0658`.\n error: Could not compile `miniz_oxide`.\n warning: build failed, waiting for other jobs to finish...\n error: build failed\n gmake: *** [Makefile:12: check] Error 101"},{"timestamp":1569262497,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 4."},{"timestamp":1569262606,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing-1\n\n\"make check\" exited with status 2\n\n \n     Checking slog-scope v4.1.2\n error: aborting due to previous error\n \n error: Could not compile `typenum`.\n warning: build failed, waiting for other jobs to finish...\n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n  --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:3:5\n   |\n 3 | use std::convert::TryInto;\n   |     ^^^^^^^^^^^^^^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n  --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:6:5\n   |\n 6 | use std::convert::TryInto;\n   |     ^^^^^^^^^^^^^^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n     --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:1124:52\n      |\n 1124 |         let bytes: [u8; 4] \u003d self.b.dict[pos..end].try_into().unwrap();\n      |                                                    ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n     --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:1133:56\n      |\n 1133 |         let bytes: [u8; 8] \u003d self.b.dict[pos..pos + 8].try_into().unwrap();\n      |                                                        ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n    --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:342:44\n     |\n 342 |         let two_bytes \u003d iter.as_ref()[..2].try_into().unwrap();\n     |                                            ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n    --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:357:54\n     |\n 357 |         let four_bytes: [u8; 4] \u003d iter.as_ref()[..4].try_into().unwrap();\n     |                                                      ^^^^^^^^\n \n error: aborting due to 6 previous errors\n \n For more information about this error, try `rustc --explain E0658`.\n error: Could not compile `miniz_oxide`.\n warning: build failed, waiting for other jobs to finish...\n error: build failed\n gmake: *** [Makefile:12: check] Error 101"},{"timestamp":1569536690,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Patch Set 4:\n\n(3 comments)"},{"timestamp":1569620617,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Patch Set 4:\n\n(5 comments)\n\nThis is just a little bit so far.  I got caught up in experimenting with my own suggestion from 466."},{"timestamp":1569867158,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 5."},{"timestamp":1569867302,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing-1\n\n\"make check\" exited with status 2\n\n     Checking rand_pcg v0.1.2\n     Checking num-traits v0.2.8\n error: aborting due to previous error\n \n error: Could not compile `typenum`.\n warning: build failed, waiting for other jobs to finish...\n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n  --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:3:5\n   |\n 3 | use std::convert::TryInto;\n   |     ^^^^^^^^^^^^^^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n  --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:6:5\n   |\n 6 | use std::convert::TryInto;\n   |     ^^^^^^^^^^^^^^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n     --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:1124:52\n      |\n 1124 |         let bytes: [u8; 4] \u003d self.b.dict[pos..end].try_into().unwrap();\n      |                                                    ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n     --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:1133:56\n      |\n 1133 |         let bytes: [u8; 8] \u003d self.b.dict[pos..pos + 8].try_into().unwrap();\n      |                                                        ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n    --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:342:44\n     |\n 342 |         let two_bytes \u003d iter.as_ref()[..2].try_into().unwrap();\n     |                                            ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n    --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:357:54\n     |\n 357 |         let four_bytes: [u8; 4] \u003d iter.as_ref()[..4].try_into().unwrap();\n     |                                                      ^^^^^^^^\n \n error: aborting due to 6 previous errors\n \n For more information about this error, try `rustc --explain E0658`.\n error: Could not compile `miniz_oxide`.\n warning: build failed, waiting for other jobs to finish...\n error: build failed\n gmake: *** [Makefile:12: check] Error 101"},{"timestamp":1569868339,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Patch Set 1:\n\n(5 comments)"},{"timestamp":1569878644,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Patch Set 5:\n\n(3 comments)"},{"timestamp":1569945479,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 6."},{"timestamp":1569945499,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Patch Set 1:\n\n(4 comments)"},{"timestamp":1569945578,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing-1\n\n\"make check\" exited with status 2\n\n     Checking aho-corasick v0.7.6\n     Checking slog-scope v4.1.2\n error: aborting due to previous error\n \n error: Could not compile `typenum`.\n warning: build failed, waiting for other jobs to finish...\n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n  --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:3:5\n   |\n 3 | use std::convert::TryInto;\n   |     ^^^^^^^^^^^^^^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n  --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:6:5\n   |\n 6 | use std::convert::TryInto;\n   |     ^^^^^^^^^^^^^^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n     --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:1124:52\n      |\n 1124 |         let bytes: [u8; 4] \u003d self.b.dict[pos..end].try_into().unwrap();\n      |                                                    ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n     --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:1133:56\n      |\n 1133 |         let bytes: [u8; 8] \u003d self.b.dict[pos..pos + 8].try_into().unwrap();\n      |                                                        ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n    --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:342:44\n     |\n 342 |         let two_bytes \u003d iter.as_ref()[..2].try_into().unwrap();\n     |                                            ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n    --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:357:54\n     |\n 357 |         let four_bytes: [u8; 4] \u003d iter.as_ref()[..4].try_into().unwrap();\n     |                                                      ^^^^^^^^\n \n error: aborting due to 6 previous errors\n \n For more information about this error, try `rustc --explain E0658`.\n error: Could not compile `miniz_oxide`.\n warning: build failed, waiting for other jobs to finish...\n error: build failed\n gmake: *** [Makefile:12: check] Error 101"},{"timestamp":1569952386,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Patch Set 6:\n\n(3 comments)\n\nOk, everything you said makes sense to me.  I only had one question about config.rs really.  Otherwise, test notes and it seems ready to roll."},{"timestamp":1569957375,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Patch Set 6: Code-Review+1 Integration-Approval+1"},{"timestamp":1569957480,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 7."},{"timestamp":1569957583,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing-1\n\n\"make check\" exited with status 2\n\n     Checking want v0.2.0\n     Checking slog-scope v4.1.2\n error: aborting due to previous error\n \n error: Could not compile `typenum`.\n warning: build failed, waiting for other jobs to finish...\n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n  --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:3:5\n   |\n 3 | use std::convert::TryInto;\n   |     ^^^^^^^^^^^^^^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n  --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:6:5\n   |\n 6 | use std::convert::TryInto;\n   |     ^^^^^^^^^^^^^^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n     --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:1124:52\n      |\n 1124 |         let bytes: [u8; 4] \u003d self.b.dict[pos..end].try_into().unwrap();\n      |                                                    ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n     --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:1133:56\n      |\n 1133 |         let bytes: [u8; 8] \u003d self.b.dict[pos..pos + 8].try_into().unwrap();\n      |                                                        ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n    --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:342:44\n     |\n 342 |         let two_bytes \u003d iter.as_ref()[..2].try_into().unwrap();\n     |                                            ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n    --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:357:54\n     |\n 357 |         let four_bytes: [u8; 4] \u003d iter.as_ref()[..4].try_into().unwrap();\n     |                                                      ^^^^^^^^\n \n error: aborting due to 6 previous errors\n \n For more information about this error, try `rustc --explain E0658`.\n error: Could not compile `miniz_oxide`.\n warning: build failed, waiting for other jobs to finish...\n error: build failed\n gmake: *** [Makefile:12: check] Error 101"},{"timestamp":1569957879,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Patch Set 7: Code-Review+1 Integration-Approval+1"},{"timestamp":1569958989,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 8: Commit message was updated."},{"timestamp":1569959504,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 9."},{"timestamp":1569959592,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing-1\n\n\"make check\" exited with status 2\n\n     Checking log v0.3.9\n     Checking want v0.2.0\n error: aborting due to previous error\n \n error: Could not compile `typenum`.\n warning: build failed, waiting for other jobs to finish...\n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n  --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:3:5\n   |\n 3 | use std::convert::TryInto;\n   |     ^^^^^^^^^^^^^^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n  --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:6:5\n   |\n 6 | use std::convert::TryInto;\n   |     ^^^^^^^^^^^^^^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n     --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:1124:52\n      |\n 1124 |         let bytes: [u8; 4] \u003d self.b.dict[pos..end].try_into().unwrap();\n      |                                                    ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n     --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/deflate/core.rs:1133:56\n      |\n 1133 |         let bytes: [u8; 8] \u003d self.b.dict[pos..pos + 8].try_into().unwrap();\n      |                                                        ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n    --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:342:44\n     |\n 342 |         let two_bytes \u003d iter.as_ref()[..2].try_into().unwrap();\n     |                                            ^^^^^^^^\n \n error[E0658]: use of unstable library feature \u0027try_from\u0027 (see issue #33417)\n    --\u003e /home/build/.cargo/registry/src/github.com-1ecc6299db9ec823/miniz_oxide-0.3.2/src/inflate/core.rs:357:54\n     |\n 357 |         let four_bytes: [u8; 4] \u003d iter.as_ref()[..4].try_into().unwrap();\n     |                                                      ^^^^^^^^\n \n error: aborting due to 6 previous errors\n \n For more information about this error, try `rustc --explain E0658`.\n error: Could not compile `miniz_oxide`.\n warning: build failed, waiting for other jobs to finish...\n error: build failed\n gmake: *** [Makefile:12: check] Error 101"},{"timestamp":1569959652,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Patch Set 9: Code-Review+1 Integration-Approval+1"},{"timestamp":1569960049,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 10: Commit message was updated."},{"timestamp":1569960060,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Rui Loura"}],"currentPatchSet":{"number":"10","revision":"1d31e7bc22cccf7e0f90d62e2b32d70e40debbf1","parents":["1ae82a813231bb8d415f3d3f18af9bc20c99ca53"],"ref":"refs/changes/25/6925/10","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1569960049,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1569959592,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1569959652,"by":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1569959652,"by":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"}},{"type":"SUBM","value":"1","grantedOn":1569960060,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"Cargo.toml","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"LICENSE","type":"ADDED","insertions":373,"deletions":0},{"file":"src/config.json","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"src/config.rs","type":"MODIFIED","insertions":23,"deletions":-10},{"file":"src/error.rs","type":"MODIFIED","insertions":23,"deletions":0},{"file":"src/jobs/evacuate.rs","type":"MODIFIED","insertions":171,"deletions":-62},{"file":"src/lib.rs","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/moray_client.rs","type":"ADDED","insertions":63,"deletions":0},{"file":"src/picker.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/util.rs","type":"MODIFIED","insertions":0,"deletions":-15}],"sizeInsertions":656,"sizeDeletions":-92},"patchSets":[{"number":"1","revision":"b5d1f788868666f0d0264f3121cd0031e55e0092","parents":["37423eb0d0386a81e0e6bfdedaf29587355c1012"],"ref":"refs/changes/25/6925/1","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1568920987,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1568921095,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/jobs/evacuate.rs","line":211,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"This is probably a stupid question, but if we have more than one Evac job, does that mean potentially more than one connection to the same shard?"},{"file":"src/jobs/evacuate.rs","line":211,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"It appears I have not updated this CR.  A thousand apologies."},{"file":"src/jobs/evacuate.rs","line":211,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"So are we ok with having more than one connection to the same shard?  I wonder if we should have a pool of connections where each connection goes to a different shard and threads and take them and release them as needed.  That\u0027s what I was getting at.  At least that way, we can flexibly limit the total number of connections per shard.  Even if we allowed more than one per shard, it could still be solved in a similar way, but I\u0027m asking if we want to decouple the number of possible connections to a given shard from the total number of jobs running.  I see that as the only way to guarantee that we won\u0027t punish a shard by more than a certain amount.\n\nI guess for the time being, it\u0027s not a big deal since we agreed that we wouldn\u0027t run more than one job at a time, but if that\u0027s the agreement, I\u0027d be tempted to add some kind of a lever to ensure it for the time being (even if it\u0027s a SAPI tunable that we don\u0027t tell anyone about :joy:)."},{"file":"src/jobs/evacuate.rs","line":211,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"In the latest patchset the metadata_update_broker creates a threadpool of (currently/temporarily hard coded) 2 threads. These threads are the metadata_update_worker()\u0027s.  Each worker maintains a hash of connections to moray\u0027s indexed by shard number.  \n\nSo each worker has at most 1 connection to each shard, and the number of workers is tunable.  \n\nSo the max number of connections to a given shard would be threadpool size * number of jobs.  Currently we do not support more than one job at a time (for other reasons such as cross DC synchronization), so that reduces to threadpool size.  But when we do have multiple jobs running across multiple DCs in the region this is one of many impacts we will need to consider.  Perhaps we do end up using SAPI to determine the TOTAL intra-region number of connections the rebalancer can have per shard, and then validate the threadpool size with that.  Regardless of what we do here, the rebalancers will need to have some method of synchronization.\n\nInitially I did have a separate class/object that managed connections but then I found that I would need to synchronized access to that class across multiple threads which necessitated a couple additional locks.  Lock the class to get the hash of connections, then lock the individual connection, unlock the class, tx \u0026 rx data over the connection, and then unlock the connection... for EVERY put.  Instead with this approach we still limit the number of connections per shard but don\u0027t require any of that locking at the expense of possibly having to create connections more than once.  But, considering the environment that this is operating in I do not think that is likely, and even if it is, the cost is fairly low in comparison to having to take and release multiple locks per operation.  I think it is far more likely that the worker threads will never exit until the job is coming to an end.  So if anything this presents a challenge with dynamic tuning when the worker threads are red hot and we want to reduce the number of worker threads running.  But I have a few straight forward ideas of how this can be accomplished, so I don\u0027t see it as much of a concern (e.g. Placing a single message in the metadata update queue that tells the thread that consumes it to exit.  This could be added by the same mechanism that resizes the threadpool.  Take the current size, minus the desired size \u003d diff, set desired size, insert #diff quit messages).  But that is all future work."},{"file":"src/jobs/evacuate.rs","line":211,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Ok, I think I understand.  This does sound like what I hoped for.  If I\u0027m understanding correctly, the number of metadata_update_workers is independent of number of pending jobs?  If so, then I have no reservations.  I appreciate the thorough answer though.  Probably saved me at least a few hours worth of time getting up to speed on this side."},{"file":"src/jobs/evacuate.rs","line":465,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"My gut tells me that this is probably not the right location for this information.  I\u0027d consider moving it out to the README."},{"file":"src/jobs/evacuate.rs","line":465,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"You know what... I\u0027ll just file a bug for this and put the data in there.  MANTA-4578"},{"file":"src/jobs/evacuate.rs","line":466,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Not a huge fan of this name.  I\u0027d recommend something that indicates that the object status is being updated.  I\u0027m also looking at this more closely and I think there is a way to factor out the logic where a lock is acquired and the actual expression is executed.  It would be nice to have a centralized function that took (for example) and kind of an update statement, and just acquired the connection lock and called execute on it.  As an added bonus, it\u0027d only be one place where we\u0027d have to measure the duration of the query.\n\nI wouldn\u0027t want to ask for something that isn\u0027t possible so I\u0027ll poke around as well."},{"file":"src/jobs/evacuate.rs","line":466,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"I\u0027m open to suggestions on renaming.  In other functions I\u0027ve used \"mark\" to mean \"changing the status of\".  \n\nI like what you suggest about the refactor I\u0027m just not sure how clear that code would be using diesel, or without hand jamming or doing string manipulation of raw SQL statements."},{"file":"src/jobs/evacuate.rs","line":466,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Would something like this return an object that we could call the execute() method on?\n\ndiesel::update(evacuateobjects)\n            .filter(assignment_id.eq(id))\n            .set(status.eq(to_status));\n\nIf so, I was thinking we could pass it to a function that acquires the lock on the db connection, then calls execute in addition to calculating whatever performance metrics we want.  Basically, creating a wrapper for execute() now that I think about it."},{"file":"src/jobs/evacuate.rs","line":466,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"That\u0027s a really good idea.  I think it would work.  Since I already have a few other diesel related functions that could be factored out with this approach, and considering your aversion to large changesets, would you be comfortable with filing a bug that I\u0027ll knock out shortly after this one?  \n\nI\u0027ve been meaning to factor out the diesel stuff into a different file anyway, but it is fairly touchy."},{"file":"src/jobs/evacuate.rs","line":466,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Cool.  Seems reasonable to me."},{"file":"src/jobs/evacuate.rs","line":695,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Need to think about this a bit more.  I Holding the lock around the put method kind of defeats the purpose of having multiple threads doing metadata updates.\n\nWe could:\nA: Have manta_moray_client place locks around each client it creates, then:\n\n1. grab the manta_moray_client lock\n2. call manta_moray_client.get_or_create() which returns a locked individual client\n3. drop the manta_moray_client lock\n4. use that client \n5. Drop that clients lock\n\nor\n\nB: Have this function take a client as an argument.  In such a case each worker thread would create clients on demand, and store them in a thread local hash of its own.  i.e. store nothing in the EvacuateJob structure.  Then, when the worker thread exists the clients are dropped."},{"file":"src/jobs/evacuate.rs","line":1666,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"I feel like this information should come from config.json."},{"file":"src/jobs/evacuate.rs","line":1666,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"This is fake data for a test. Perhaps it should be more fake like?  \"1.stor.fakedomain.us\"?"},{"file":"src/jobs/evacuate.rs","line":1666,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Or maybe emphasis that I guess it doesn\u0027t really matter what it is in the form of a comment.  Same for 1728 I guess."},{"file":"src/jobs/evacuate.rs","line":1666,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Done"},{"file":"src/jobs/evacuate.rs","line":1729,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Same with this stuff.  While we\u0027re on the subject, I think we may need to add some information to the README file that walks someone through how to fill out their config.json for testing.  Not saying that has to be part of this change, but I think we should tackle that sooner rather than later."},{"file":"src/jobs/evacuate.rs","line":1729,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"The config.json will eventually be filled out by config-agent.  The content here doesn\u0027t matter as long as it is in the format of a host/domain.  Also since this is a unit test for evacuate.rs we ideally want to minimize the dependencies on other files. \n\nWe should probably have unit tests in config.rs that test the configuration parsing. MANTA-4577"},{"file":"src/jobs/evacuate.rs","line":1729,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Cargo.toml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"src/agent.rs","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/config.json","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"src/config.rs","type":"MODIFIED","insertions":23,"deletions":-10},{"file":"src/error.rs","type":"MODIFIED","insertions":23,"deletions":0},{"file":"src/jobs/evacuate.rs","type":"MODIFIED","insertions":131,"deletions":-57},{"file":"src/lib.rs","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/main.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/moray_client.rs","type":"ADDED","insertions":116,"deletions":0},{"file":"src/picker.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/util.rs","type":"MODIFIED","insertions":0,"deletions":-15}],"sizeInsertions":299,"sizeDeletions":-88},{"number":"2","revision":"88645b0d7501e0345c7e8bb8a67baac8b2ce84b3","parents":["37423eb0d0386a81e0e6bfdedaf29587355c1012"],"ref":"refs/changes/25/6925/2","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1569006407,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1569006501,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Cargo.toml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"src/agent.rs","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/config.json","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"src/config.rs","type":"MODIFIED","insertions":23,"deletions":-10},{"file":"src/error.rs","type":"MODIFIED","insertions":23,"deletions":0},{"file":"src/jobs/evacuate.rs","type":"MODIFIED","insertions":174,"deletions":-60},{"file":"src/lib.rs","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/main.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/moray_client.rs","type":"ADDED","insertions":61,"deletions":0},{"file":"src/picker.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/util.rs","type":"MODIFIED","insertions":0,"deletions":-15}],"sizeInsertions":287,"sizeDeletions":-91},{"number":"3","revision":"b2f6520ee8398451e10b22cc527e1183a0c55761","parents":["37423eb0d0386a81e0e6bfdedaf29587355c1012"],"ref":"refs/changes/25/6925/3","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1569010616,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1569010708,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Cargo.toml","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/config.json","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"src/config.rs","type":"MODIFIED","insertions":23,"deletions":-10},{"file":"src/error.rs","type":"MODIFIED","insertions":23,"deletions":0},{"file":"src/jobs/evacuate.rs","type":"MODIFIED","insertions":174,"deletions":-60},{"file":"src/lib.rs","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/main.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/moray_client.rs","type":"ADDED","insertions":61,"deletions":0},{"file":"src/picker.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/util.rs","type":"MODIFIED","insertions":0,"deletions":-15}],"sizeInsertions":285,"sizeDeletions":-91},{"number":"4","revision":"eb7c142732c0be253aa6116679e9a54592258afa","parents":["37423eb0d0386a81e0e6bfdedaf29587355c1012"],"ref":"refs/changes/25/6925/4","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1569262497,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1569262606,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/jobs/evacuate.rs","line":469,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Should save off these results somewhere, and make sure to retain the alternatives."},{"file":"src/jobs/evacuate.rs","line":1799,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"go back to 1000"},{"file":"src/main.rs","line":26,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"revert"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"Cargo.toml","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"LICENSE","type":"ADDED","insertions":373,"deletions":0},{"file":"src/config.json","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"src/config.rs","type":"MODIFIED","insertions":23,"deletions":-10},{"file":"src/error.rs","type":"MODIFIED","insertions":23,"deletions":0},{"file":"src/jobs/evacuate.rs","type":"MODIFIED","insertions":174,"deletions":-60},{"file":"src/lib.rs","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/main.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/moray_client.rs","type":"ADDED","insertions":61,"deletions":0},{"file":"src/picker.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/util.rs","type":"MODIFIED","insertions":0,"deletions":-15}],"sizeInsertions":658,"sizeDeletions":-91},{"number":"5","revision":"0ad48443eb3224f296b7c890dae3c3f2dcde4d01","parents":["37423eb0d0386a81e0e6bfdedaf29587355c1012"],"ref":"refs/changes/25/6925/5","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1569867158,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1569867302,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"Cargo.toml","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"LICENSE","type":"ADDED","insertions":373,"deletions":0},{"file":"src/config.json","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"src/config.rs","type":"MODIFIED","insertions":23,"deletions":-10},{"file":"src/error.rs","type":"MODIFIED","insertions":23,"deletions":0},{"file":"src/jobs/evacuate.rs","type":"MODIFIED","insertions":174,"deletions":-60},{"file":"src/lib.rs","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/main.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/moray_client.rs","type":"ADDED","insertions":63,"deletions":0},{"file":"src/picker.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/util.rs","type":"MODIFIED","insertions":0,"deletions":-15}],"sizeInsertions":660,"sizeDeletions":-91},{"number":"6","revision":"6b15ec53d3151bff93cfa054a4f76f5ad230d6cc","parents":["37423eb0d0386a81e0e6bfdedaf29587355c1012"],"ref":"refs/changes/25/6925/6","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1569945479,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1569945578,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1569957375,"by":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1569957375,"by":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"}}],"comments":[{"file":"src/config.rs","line":158,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"How come we no longer need this?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"Cargo.toml","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"LICENSE","type":"ADDED","insertions":373,"deletions":0},{"file":"src/config.json","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"src/config.rs","type":"MODIFIED","insertions":23,"deletions":-10},{"file":"src/error.rs","type":"MODIFIED","insertions":23,"deletions":0},{"file":"src/jobs/evacuate.rs","type":"MODIFIED","insertions":168,"deletions":-61},{"file":"src/lib.rs","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/main.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/moray_client.rs","type":"ADDED","insertions":63,"deletions":0},{"file":"src/picker.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/util.rs","type":"MODIFIED","insertions":0,"deletions":-15}],"sizeInsertions":654,"sizeDeletions":-92},{"number":"7","revision":"7ade480a9fbc21ba5e7e3b1a697bfcfa9b55e4be","parents":["37423eb0d0386a81e0e6bfdedaf29587355c1012"],"ref":"refs/changes/25/6925/7","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1569957480,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1569957583,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1569957879,"by":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1569957879,"by":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"Cargo.toml","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"LICENSE","type":"ADDED","insertions":373,"deletions":0},{"file":"src/config.json","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"src/config.rs","type":"MODIFIED","insertions":23,"deletions":-10},{"file":"src/error.rs","type":"MODIFIED","insertions":23,"deletions":0},{"file":"src/jobs/evacuate.rs","type":"MODIFIED","insertions":171,"deletions":-62},{"file":"src/lib.rs","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/main.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/moray_client.rs","type":"ADDED","insertions":63,"deletions":0},{"file":"src/picker.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/util.rs","type":"MODIFIED","insertions":0,"deletions":-15}],"sizeInsertions":657,"sizeDeletions":-93},{"number":"8","revision":"63d3e7b5ce4e8516aea156f69919ef25030b33d5","parents":["37423eb0d0386a81e0e6bfdedaf29587355c1012"],"ref":"refs/changes/25/6925/8","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1569958989,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1569957583,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1569957879,"by":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1569957879,"by":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"Cargo.toml","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"LICENSE","type":"ADDED","insertions":373,"deletions":0},{"file":"src/config.json","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"src/config.rs","type":"MODIFIED","insertions":23,"deletions":-10},{"file":"src/error.rs","type":"MODIFIED","insertions":23,"deletions":0},{"file":"src/jobs/evacuate.rs","type":"MODIFIED","insertions":171,"deletions":-62},{"file":"src/lib.rs","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/main.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/moray_client.rs","type":"ADDED","insertions":63,"deletions":0},{"file":"src/picker.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/util.rs","type":"MODIFIED","insertions":0,"deletions":-15}],"sizeInsertions":657,"sizeDeletions":-93},{"number":"9","revision":"664d4895cff057a3c36042a74cc19668eabc8d6f","parents":["1ae82a813231bb8d415f3d3f18af9bc20c99ca53"],"ref":"refs/changes/25/6925/9","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1569959504,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1569959592,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1569959652,"by":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1569959652,"by":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"Cargo.toml","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"LICENSE","type":"ADDED","insertions":373,"deletions":0},{"file":"src/config.json","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"src/config.rs","type":"MODIFIED","insertions":23,"deletions":-10},{"file":"src/error.rs","type":"MODIFIED","insertions":23,"deletions":0},{"file":"src/jobs/evacuate.rs","type":"MODIFIED","insertions":171,"deletions":-62},{"file":"src/lib.rs","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/moray_client.rs","type":"ADDED","insertions":63,"deletions":0},{"file":"src/picker.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/util.rs","type":"MODIFIED","insertions":0,"deletions":-15}],"sizeInsertions":656,"sizeDeletions":-92},{"number":"10","revision":"1d31e7bc22cccf7e0f90d62e2b32d70e40debbf1","parents":["1ae82a813231bb8d415f3d3f18af9bc20c99ca53"],"ref":"refs/changes/25/6925/10","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1569960049,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1569959592,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1569960060,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1569959652,"by":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1569959652,"by":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"Cargo.toml","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"LICENSE","type":"ADDED","insertions":373,"deletions":0},{"file":"src/config.json","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"src/config.rs","type":"MODIFIED","insertions":23,"deletions":-10},{"file":"src/error.rs","type":"MODIFIED","insertions":23,"deletions":0},{"file":"src/jobs/evacuate.rs","type":"MODIFIED","insertions":171,"deletions":-62},{"file":"src/lib.rs","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/moray_client.rs","type":"ADDED","insertions":63,"deletions":0},{"file":"src/picker.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/util.rs","type":"MODIFIED","insertions":0,"deletions":-15}],"sizeInsertions":656,"sizeDeletions":-92}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}]}