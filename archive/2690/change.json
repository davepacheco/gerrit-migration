{"project":"joyent/illumos-joyent","branch":"master","id":"Ibf4caad4ba9209e6bcd3f68a6d9e197473022286","number":"2690","subject":"OS-6306 accurate in-kernel zone RSS tracking Reviewed by: Jason King \u003cjason.king@joyent.com\u003e Reviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Approved by: Dan McDonald \u003cdanmcd@joyent.com\u003e","owner":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"url":"https://cr.joyent.us/2690","commitMessage":"OS-6306 accurate in-kernel zone RSS tracking\nReviewed by: Jason King \u003cjason.king@joyent.com\u003e\nReviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nApproved by: Dan McDonald \u003cdanmcd@joyent.com\u003e\n","createdOn":1506700021,"lastUpdated":1507822178,"open":false,"status":"MERGED","comments":[{"timestamp":1506700021,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 1."},{"timestamp":1506700109,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\nThis is not yet ready for review. These are the original changes and they caused a deadlock as described in the ticket. These changes were reverted, but I\u0027m starting them here so we can CR against the updated changes."},{"timestamp":1506708950,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 2."},{"timestamp":1506709234,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\nThis can now be reviewed. The difference between the base patch and the first patch shows what I have changed. As background, I had already made these changes to integrate with the pageout scanner work which is the next phase of this project. This has now been split off from that so it can be handled as part of the fix for the original deadlock."},{"timestamp":1506712678,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 2:\n\n(1 comment)\n\nThe basic idea is that you want to remove zone_find_by_id() from any of this code, due to deadlocks, right?"},{"timestamp":1506714193,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\n(1 comment)\n\nFor the general questions regarding zone_find_by_id, yes, that is the cause of the deadlock, but I had already made these changes before I was aware of that deadlock. That is mostly summarized in the big comment in zone.c but briefly, we cannot have the page scanner doing a lookup for a zone on each page it wants to invalidate. That would kill the system in lots of ways, independent of the deadlock."},{"timestamp":1506714279,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 2: Code-Review+1\n\nThank you for confirming my understanding."},{"timestamp":1506716038,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2:\n\n(3 comments)"},{"timestamp":1506967819,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\n(3 comments)\n\nI have cleaned up the rest of the old code that was using the page data embedded in the zone structure and switched everything over to the new page tracking structure."},{"timestamp":1506967838,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 3."},{"timestamp":1506967949,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3:\n\nA lot of the diffs in lx_prvnops.c were from a rebase that pulled in unrelated work. Most of that can be ignored. Sorry for the extra confusion on the review."},{"timestamp":1506976310,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 3:\n\n(1 comment)\n\nJust this one last question..."},{"timestamp":1506978232,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1507040449,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3:\n\n(2 comments)"},{"timestamp":1507040475,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 4."},{"timestamp":1507041315,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 4:\n\n(4 comments)"},{"timestamp":1507066976,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 4:\n\nI made the suggested changes."},{"timestamp":1507066983,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 5."},{"timestamp":1507067328,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 5: Code-Review+1\n\nThere are 1-2 places where if sizeof (pgcnt_t) ever is different from sizeof (ulong_t) you\u0027ll be in trouble, but given pgcnt_t appears to be a typedef of ulong_t, I probably shouldn\u0027t worry."},{"timestamp":1507148448,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1507214208,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 5: Code-Review+1\n\n(1 comment)"},{"timestamp":1507584479,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 5:\n\nI added new testing notes to the ticket."},{"timestamp":1507593347,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 5: Integration-Approval+1"},{"timestamp":1507819460,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 6."},{"timestamp":1507819516,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 6:\n\nMerging startup.c lost all CR and IA approvals."},{"timestamp":1507819768,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1507819856,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 6: Code-Review+1 Integration-Approval+1\n\nHate when that happens..."},{"timestamp":1507820584,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1507820782,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 7: Commit message was updated."},{"timestamp":1507822178,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jerry Jelinek"}],"currentPatchSet":{"number":"7","revision":"bf4caad4ba9209e6bcd3f68a6d9e197473022286","parents":["a298c587338cf16ca71d352bedfb494fba3f0378"],"ref":"refs/changes/90/2690/7","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1507820782,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507819768,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507819856,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507819856,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507820584,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1507822178,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/cmd/zoneadmd/mcap.c","type":"MODIFIED","insertions":13,"deletions":-223},{"file":"usr/src/uts/common/brand/lx/procfs/lx_prvnops.c","type":"MODIFIED","insertions":6,"deletions":-11},{"file":"usr/src/uts/common/brand/lx/syscall/lx_rlimit.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/syscall/lx_sysinfo.c","type":"MODIFIED","insertions":5,"deletions":-23},{"file":"usr/src/uts/common/fs/lxproc/lxpr_vnops.c","type":"MODIFIED","insertions":7,"deletions":-12},{"file":"usr/src/uts/common/os/zone.c","type":"MODIFIED","insertions":354,"deletions":-44},{"file":"usr/src/uts/common/sys/zone.h","type":"MODIFIED","insertions":52,"deletions":-10},{"file":"usr/src/uts/common/syscall/sysconfig.c","type":"MODIFIED","insertions":16,"deletions":-28},{"file":"usr/src/uts/common/vm/page.h","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/vm/vm_usage.c","type":"MODIFIED","insertions":1,"deletions":-25},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/i86pc/vm/hment.c","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/uts/sfmmu/vm/hat_sfmmu.c","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":477,"sizeDeletions":-382},"patchSets":[{"number":"1","revision":"8b3d8515a227348071be292295300b599a4d759e","parents":["597e7db3df75fb2976c1c29ef285e8bc6c289b4d"],"ref":"refs/changes/90/2690/1","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1506700021,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/zoneadmd/mcap.c","type":"MODIFIED","insertions":13,"deletions":-223},{"file":"usr/src/uts/common/os/zone.c","type":"MODIFIED","insertions":213,"deletions":-23},{"file":"usr/src/uts/common/sys/zone.h","type":"MODIFIED","insertions":25,"deletions":-5},{"file":"usr/src/uts/common/syscall/sysconfig.c","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"usr/src/uts/common/vm/page.h","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/vm/vm_usage.c","type":"MODIFIED","insertions":1,"deletions":-25},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hment.c","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/uts/sfmmu/vm/hat_sfmmu.c","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":272,"sizeDeletions":-285},{"number":"2","revision":"60bf847a979faf7213c70cc97df0e3536be08f9c","parents":["ffeae41cb1d13f7eed5a29287a0b7bbac7edc7b5"],"ref":"refs/changes/90/2690/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1506708950,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506714279,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"comments":[{"file":"usr/src/uts/common/os/zone.c","line":464,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Nit: I think \u0027used to\u0027 is what\u0027s intended."},{"file":"usr/src/uts/common/os/zone.c","line":1874,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Please confirm/deny my understanding:  Grabbing zone_pcap_data[] is okay because, per the comments, the lock only matters when the zone is transitioning over/under its physical memory cap."},{"file":"usr/src/uts/common/os/zone.c","line":1874,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"That\u0027s right, since we\u0027re doing multiple things on that structure during those transitions. Otherwise, in the rest of the code I use atomic ops to manage the counters."},{"file":"usr/src/uts/common/os/zone.c","line":1874,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Done"},{"file":"usr/src/uts/common/os/zone.c","line":1898,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Should we handle (or abort on) silly cases where nv \u003e (UINT32_MAX * PAGESIZE)?"},{"file":"usr/src/uts/common/os/zone.c","line":1898,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"done"},{"file":"usr/src/uts/common/os/zone.c","line":2841,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"With the pagescanner update in the works, is there any sort of paranoia we can apply here to ensure that the page count numbers are properly zeroed out when a zone is shutting down?  Zeroing the stats makes total sense (although maybe we defer that until zone start-up to let the data linger for longer?).  Wouldn\u0027t we at least want a message if the page count was non-zero during zone shutdown, once all processes in the zone have exited?\n\nFor the deferred clean-up of seg_kp pages, zeroing this structure seems like it could induce underflow."},{"file":"usr/src/uts/common/os/zone.c","line":2841,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"So this basically clears the page structure when the zone structure is being freed (i.e. the zone is gone). I have a check in the incr/decr code to ensure we don\u0027t go negative for delayed page operations like freeing segkp stuff. I also reinitialize the values to 0 in zone_create so that if we wrap and create a new zone with the same id, that the values will start out correctly."},{"file":"usr/src/uts/common/os/zone.c","line":8182,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Seems like a great strategy."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/zoneadmd/mcap.c","type":"MODIFIED","insertions":13,"deletions":-223},{"file":"usr/src/uts/common/os/zone.c","type":"MODIFIED","insertions":311,"deletions":-37},{"file":"usr/src/uts/common/sys/zone.h","type":"MODIFIED","insertions":51,"deletions":-8},{"file":"usr/src/uts/common/syscall/sysconfig.c","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"usr/src/uts/common/vm/page.h","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/vm/vm_usage.c","type":"MODIFIED","insertions":1,"deletions":-25},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hment.c","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/uts/sfmmu/vm/hat_sfmmu.c","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":396,"sizeDeletions":-302},{"number":"3","revision":"9d70c62de2ad1d0ed429b2801c8f69cda6044568","parents":["914d7a738527f83b1e811b066563842839f125a7"],"ref":"refs/changes/90/2690/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1506967838,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/brand/lx/syscall/lx_sysinfo.c","line":113,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"This structure, in one variation or another, is repeated in a number of places (the pcap_data lookup, the _MAX check, and the subsequent tests).  Any thoughts about consolidating this into a zone_\u003csomething\u003e function that can cover most of the use cases in LX and the native system?"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_sysinfo.c","line":113,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Good suggestion, I have added a new function and updated all of the relevant locations to use that."},{"file":"usr/src/uts/common/os/zone.c","line":8318,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"The \"\u003d\u003d 0\" case seems important... enough for an ASSERT() or VERIFY()?  (Or at least an SDT probe?)  And worse, what about wraparound if \"-pcnt\" pushes things to 0xfffff.. ?  Pmooney asked a similar question in the zone_free() call."},{"file":"usr/src/uts/common/os/zone.c","line":8318,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"No, this is normal. I tried to respond to that in an earlier comment to Patrick.\n\n\"I have a check in the incr/decr code to ensure we don\u0027t go negative for delayed page operations like freeing segkp stuff. I also reinitialize the values to 0 in zone_create so that if we wrap and create a new zone with the same id, that the values will start out correctly.\"\n\nHopefully that makes sense?"},{"file":"usr/src/uts/common/os/zone.c","line":8318,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Yes it does make sense.  Thanks."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/zoneadmd/mcap.c","type":"MODIFIED","insertions":13,"deletions":-223},{"file":"usr/src/uts/common/brand/lx/procfs/lx_prvnops.c","type":"MODIFIED","insertions":10,"deletions":-6},{"file":"usr/src/uts/common/brand/lx/syscall/lx_rlimit.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/syscall/lx_sysinfo.c","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/uts/common/fs/lxproc/lxpr_vnops.c","type":"MODIFIED","insertions":10,"deletions":-6},{"file":"usr/src/uts/common/os/zone.c","type":"MODIFIED","insertions":323,"deletions":-44},{"file":"usr/src/uts/common/sys/zone.h","type":"MODIFIED","insertions":51,"deletions":-10},{"file":"usr/src/uts/common/syscall/sysconfig.c","type":"MODIFIED","insertions":12,"deletions":-11},{"file":"usr/src/uts/common/vm/page.h","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/vm/vm_usage.c","type":"MODIFIED","insertions":1,"deletions":-25},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hment.c","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/uts/sfmmu/vm/hat_sfmmu.c","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":448,"sizeDeletions":-338},{"number":"4","revision":"0e871b426809e51ef06f030ff38b47410c9114bd","parents":["914d7a738527f83b1e811b066563842839f125a7"],"ref":"refs/changes/90/2690/4","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1507040475,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/brand/lx/procfs/lx_prvnops.c","line":3779,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Shouldn\u0027t these, or at least two of them, be pgcnt_t ?"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_sysinfo.c","line":79,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Same here... pgcnt_t?"},{"file":"usr/src/uts/common/fs/lxproc/lxpr_vnops.c","line":1452,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"And here."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/zoneadmd/mcap.c","type":"MODIFIED","insertions":13,"deletions":-223},{"file":"usr/src/uts/common/brand/lx/procfs/lx_prvnops.c","type":"MODIFIED","insertions":5,"deletions":-11},{"file":"usr/src/uts/common/brand/lx/syscall/lx_rlimit.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/syscall/lx_sysinfo.c","type":"MODIFIED","insertions":4,"deletions":-23},{"file":"usr/src/uts/common/fs/lxproc/lxpr_vnops.c","type":"MODIFIED","insertions":6,"deletions":-12},{"file":"usr/src/uts/common/os/zone.c","type":"MODIFIED","insertions":354,"deletions":-44},{"file":"usr/src/uts/common/sys/zone.h","type":"MODIFIED","insertions":52,"deletions":-10},{"file":"usr/src/uts/common/syscall/sysconfig.c","type":"MODIFIED","insertions":16,"deletions":-28},{"file":"usr/src/uts/common/vm/page.h","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/vm/vm_usage.c","type":"MODIFIED","insertions":1,"deletions":-25},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hment.c","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/uts/sfmmu/vm/hat_sfmmu.c","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":475,"sizeDeletions":-383},{"number":"5","revision":"fd52c0c8672dd843f6ab37fd44d4acbd16252794","parents":["914d7a738527f83b1e811b066563842839f125a7"],"ref":"refs/changes/90/2690/5","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1507066983,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507148448,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507214208,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507067328,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507593347,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/zoneadmd/mcap.c","type":"MODIFIED","insertions":13,"deletions":-223},{"file":"usr/src/uts/common/brand/lx/procfs/lx_prvnops.c","type":"MODIFIED","insertions":6,"deletions":-11},{"file":"usr/src/uts/common/brand/lx/syscall/lx_rlimit.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/syscall/lx_sysinfo.c","type":"MODIFIED","insertions":5,"deletions":-23},{"file":"usr/src/uts/common/fs/lxproc/lxpr_vnops.c","type":"MODIFIED","insertions":7,"deletions":-12},{"file":"usr/src/uts/common/os/zone.c","type":"MODIFIED","insertions":354,"deletions":-44},{"file":"usr/src/uts/common/sys/zone.h","type":"MODIFIED","insertions":52,"deletions":-10},{"file":"usr/src/uts/common/syscall/sysconfig.c","type":"MODIFIED","insertions":16,"deletions":-28},{"file":"usr/src/uts/common/vm/page.h","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/vm/vm_usage.c","type":"MODIFIED","insertions":1,"deletions":-25},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hment.c","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/uts/sfmmu/vm/hat_sfmmu.c","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":478,"sizeDeletions":-383},{"number":"6","revision":"8d818aff179d76aa5859aec07b99e613833f8b93","parents":["a298c587338cf16ca71d352bedfb494fba3f0378"],"ref":"refs/changes/90/2690/6","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1507819460,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507820584,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507819768,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507819856,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507819856,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/zoneadmd/mcap.c","type":"MODIFIED","insertions":13,"deletions":-223},{"file":"usr/src/uts/common/brand/lx/procfs/lx_prvnops.c","type":"MODIFIED","insertions":6,"deletions":-11},{"file":"usr/src/uts/common/brand/lx/syscall/lx_rlimit.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/syscall/lx_sysinfo.c","type":"MODIFIED","insertions":5,"deletions":-23},{"file":"usr/src/uts/common/fs/lxproc/lxpr_vnops.c","type":"MODIFIED","insertions":7,"deletions":-12},{"file":"usr/src/uts/common/os/zone.c","type":"MODIFIED","insertions":354,"deletions":-44},{"file":"usr/src/uts/common/sys/zone.h","type":"MODIFIED","insertions":52,"deletions":-10},{"file":"usr/src/uts/common/syscall/sysconfig.c","type":"MODIFIED","insertions":16,"deletions":-28},{"file":"usr/src/uts/common/vm/page.h","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/vm/vm_usage.c","type":"MODIFIED","insertions":1,"deletions":-25},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/i86pc/vm/hment.c","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/uts/sfmmu/vm/hat_sfmmu.c","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":477,"sizeDeletions":-382},{"number":"7","revision":"bf4caad4ba9209e6bcd3f68a6d9e197473022286","parents":["a298c587338cf16ca71d352bedfb494fba3f0378"],"ref":"refs/changes/90/2690/7","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1507820782,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1507822178,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507820584,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507819768,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507819856,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507819856,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/cmd/zoneadmd/mcap.c","type":"MODIFIED","insertions":13,"deletions":-223},{"file":"usr/src/uts/common/brand/lx/procfs/lx_prvnops.c","type":"MODIFIED","insertions":6,"deletions":-11},{"file":"usr/src/uts/common/brand/lx/syscall/lx_rlimit.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/syscall/lx_sysinfo.c","type":"MODIFIED","insertions":5,"deletions":-23},{"file":"usr/src/uts/common/fs/lxproc/lxpr_vnops.c","type":"MODIFIED","insertions":7,"deletions":-12},{"file":"usr/src/uts/common/os/zone.c","type":"MODIFIED","insertions":354,"deletions":-44},{"file":"usr/src/uts/common/sys/zone.h","type":"MODIFIED","insertions":52,"deletions":-10},{"file":"usr/src/uts/common/syscall/sysconfig.c","type":"MODIFIED","insertions":16,"deletions":-28},{"file":"usr/src/uts/common/vm/page.h","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/vm/vm_usage.c","type":"MODIFIED","insertions":1,"deletions":-25},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/i86pc/vm/hment.c","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/uts/sfmmu/vm/hat_sfmmu.c","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":477,"sizeDeletions":-382}],"allReviewers":[{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}]}