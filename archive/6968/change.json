{"project":"joyent/sdcadm","branch":"master","id":"I787f09ce7e9a1bd54af402a7ee1f0a042743fca4","number":"6968","subject":"Revert \"TRITON-1822 `sdcadm up manatee` should not left registrar svc disabled on the moray instances\"","owner":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"url":"https://cr.joyent.us/6968","commitMessage":"Revert \"TRITON-1822 `sdcadm up manatee` should not left registrar svc disabled on the moray instances\"\n\nThis reverts commit f3376b4cd7e3c43b35660929fc98f5adff907148.\n","createdOn":1570749290,"lastUpdated":1570749408,"open":false,"status":"MERGED","comments":[{"timestamp":1570749290,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 1."},{"timestamp":1570749333,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n version is: 1.30.3\n Version check ok.\n /tmp/repo/./build/node/bin/node node_modules/.bin/eslint  lib/sdcadm.js lib/logging.js lib/default-fabric.js lib/vmadm.js lib/dc-maint.js lib/errors.js lib/procedures/update-single-headnode-imgapi.js lib/procedures/update-manatee-v2.js lib/procedures/create-service-instance-v1.js lib/procedures/update-stateless-services-v1.js lib/procedures/update-sapi-v2.js lib/procedures/shared.js lib/procedures/procedure.js lib/procedures/add-agent-service.js lib/procedures/add-allow-transfer.js lib/procedures/update-dockerlogger.js lib/procedures/update-binder-v2.js lib/procedures/update-agent-v1.js lib/procedures/ensure-nic-on-instances.js lib/procedures/update-single-hn-sapi-v1.js lib/procedures/download-images.js lib/procedures/update-moray-v2.js lib/procedures/index.js lib/procedures/add-service.js lib/procedures/remove-services.js lib/ur.js lib/locker.js lib/svcadm.js lib/common.js lib/channel.js lib/steps/updateVmSize.js lib/steps/servers.js lib/steps/sapi.js lib/steps/noRabbit.js lib/steps/usbkey.js lib/steps/zookeeper.js lib/steps/dnsdomain.js lib/steps/binder.js lib/steps/index.js lib/platform.js lib/cli/do_services.js lib/cli/do_info.js lib/cli/do_update.js lib/cli/do_check_health.js lib/cli/do_nfs_volumes.js lib/cli/do_avail.js lib/cli/experimental.js lib/cli/do_fix_core_vm_resolvers.js lib/cli/do_update_docker.js lib/cli/do_update_gz_tools.js lib/cli/do_add_new_agent_svcs.js lib/cli/do_self_update.js lib/cli/do_check_config.js lib/cli/do_rollback.js lib/cli/do_completion.js lib/cli/do_update_other.js lib/cli/do_instances.js lib/cli/do_create.js lib/cli/do_remove_ca.js lib/cli/do_update_agents.js lib/cli/index.js lib/cli/ui.js lib/cli/do_install_docker_cert.js lib/post-setup/index.js lib/post-setup/ha-binder.js lib/post-setup/cloudapi.js lib/post-setup/grafana.js lib/post-setup/kbmapi.js lib/post-setup/cns.js lib/post-setup/ha-manatee.js lib/post-setup/underlay-nics.js lib/post-setup/volapi.js lib/post-setup/firewall-logger-agent.js lib/post-setup/cmon.js lib/post-setup/fabrics.js lib/post-setup/prometheus.js lib/post-setup/logarchiver.js lib/post-setup/dev-sample-data.js lib/post-setup/docker.js lib/post-setup/common-external-nics.js lib/post-setup/dev-headnode-prov.js test/manatee.test.js test/create.test.js test/common.test.js test/shared.js test/available.test.js test/update.test.js test/experimental.test.js test/unit/steps/servers.test.js test/unit/steps/usbkey.test.js test/unit/testutil.js test/unit/cli/do_update_agents.test.js test/services.test.js test/post-setup.test.js test/dc-maint.test.js test/rollback.test.js test/self-update.test.js test/common.js test/instances.test.js test/channel.test.js test/update-gz-tools.test.js test/check-health.test.js test/platform.test.js test/post-setup-ha-binder.test.js test/sdcadm.test.js test/check-config.test.js test/help.test.js\n deps/eng/tools/check-copyright -q\n error: lib/procedures/update-manatee-v2.js: copyright year not updated to 2019: \u0027 * Copyright 2018 Joyent, Inc.\u0027\n gmake: *** [deps/eng/tools/mk/Makefile.targ:292: check-copyright] Error 1"},{"timestamp":1570749393,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2: Commit message was updated."},{"timestamp":1570749404,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1570749408,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Trent Mick"}],"currentPatchSet":{"number":"2","revision":"096c10a4f3d851ed89b56c751003d42b1acff51e","parents":["72dad5cc7b731e94e76bab8d91d9cc6fd089961c"],"ref":"refs/changes/68/6968/2","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1570749393,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1570749333,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570749404,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1570749404,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1570749407,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":24,"deletions":-28},{"file":"lib/procedures/update-manatee-v2.js","type":"MODIFIED","insertions":7,"deletions":-31}],"sizeInsertions":31,"sizeDeletions":-59},"patchSets":[{"number":"1","revision":"787f09ce7e9a1bd54af402a7ee1f0a042743fca4","parents":["72dad5cc7b731e94e76bab8d91d9cc6fd089961c"],"ref":"refs/changes/68/6968/1","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1570749290,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1570749333,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":24,"deletions":-28},{"file":"lib/procedures/update-manatee-v2.js","type":"MODIFIED","insertions":7,"deletions":-31}],"sizeInsertions":31,"sizeDeletions":-59},{"number":"2","revision":"096c10a4f3d851ed89b56c751003d42b1acff51e","parents":["72dad5cc7b731e94e76bab8d91d9cc6fd089961c"],"ref":"refs/changes/68/6968/2","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1570749393,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1570749333,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570749404,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1570749404,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1570749407,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":24,"deletions":-28},{"file":"lib/procedures/update-manatee-v2.js","type":"MODIFIED","insertions":7,"deletions":-31}],"sizeInsertions":31,"sizeDeletions":-59}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}]}