{"project":"joyent/illumos-joyent","branch":"master","id":"I6dda4c2c4460e45b80f917d3676f5ce39e479cac","number":"2716","subject":"OS-5530 smbios(1M) should display PSU info OS-5528 smbios(1M) processor table info can be confusing Reviewed by: Tim Kordas \u003ctim.kordas@joyent.com\u003e Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Approved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e","owner":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"url":"https://cr.joyent.us/2716","commitMessage":"OS-5530 smbios(1M) should display PSU info\nOS-5528 smbios(1M) processor table info can be confusing\nReviewed by: Tim Kordas \u003ctim.kordas@joyent.com\u003e\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1507138906,"lastUpdated":1507166586,"open":false,"status":"MERGED","comments":[{"timestamp":1507138906,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 1."},{"timestamp":1507138940,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\nCurrent revision of the SMBIOS standard is available at:https://www.dmtf.org/sites/default/files/standards/documents/DSP0134_3.1.1.pdf."},{"timestamp":1507139871,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1507140294,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1507141587,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 2."},{"timestamp":1507141595,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\nNote, there were some other minor lint fixes I forgot."},{"timestamp":1507143485,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1507153127,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1507153987,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1507154275,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1\n\nThanks for the clarification."},{"timestamp":1507166491,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 3: Patch Set 2 was rebased."},{"timestamp":1507166516,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1507166577,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1507166586,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Robert Mustacchi"}],"currentPatchSet":{"number":"5","revision":"6dda4c2c4460e45b80f917d3676f5ce39e479cac","parents":["8527b64bc3a2da06417e288e7553ecbce94eacaa"],"ref":"refs/changes/16/2716/5","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1507166577,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507143485,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507154275,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507154275,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1507166586,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/cmd/smbios/smbios.c","type":"MODIFIED","insertions":66,"deletions":-3},{"file":"usr/src/common/smbios/mktables.sh","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/common/smbios/smb_info.c","type":"MODIFIED","insertions":54,"deletions":-1},{"file":"usr/src/lib/libsmbios/common/mapfile-vers","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/sys/smbios.h","type":"MODIFIED","insertions":51,"deletions":0},{"file":"usr/src/uts/common/sys/smbios_impl.h","type":"MODIFIED","insertions":8,"deletions":-1}],"sizeInsertions":192,"sizeDeletions":-5},"patchSets":[{"number":"1","revision":"7d98198b63f79c5ef74de62bf7df8d98611a3e7a","parents":["008eb7c268f95ec753ecee7564ab56c8972f1fe2"],"ref":"refs/changes/16/2716/1","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1507138906,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/cmd/smbios/smbios.c","line":1005,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"this call can fail ? should we be checking the return value of this call (and others like it) ? or initialize the smbios_powersup_t to avoid dumping garbage in the case of failure ?"},{"file":"usr/src/cmd/smbios/smbios.c","line":1005,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Oops, yes, we should. I had refactored this at some point and forgot that the semantics of the value had changed."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/cmd/smbios/smbios.c","type":"MODIFIED","insertions":45,"deletions":-3},{"file":"usr/src/common/smbios/mktables.sh","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/common/smbios/smb_info.c","type":"MODIFIED","insertions":54,"deletions":-1},{"file":"usr/src/lib/libsmbios/common/mapfile-vers","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/sys/smbios.h","type":"MODIFIED","insertions":51,"deletions":0},{"file":"usr/src/uts/common/sys/smbios_impl.h","type":"MODIFIED","insertions":8,"deletions":-1}],"sizeInsertions":171,"sizeDeletions":-5},{"number":"2","revision":"38aee1cc557d00acb11505f81706144711ddb93b","parents":["008eb7c268f95ec753ecee7564ab56c8972f1fe2"],"ref":"refs/changes/16/2716/2","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1507141587,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507154275,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507154275,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507143485,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}}],"comments":[{"file":"usr/src/uts/common/sys/smbios.h","line":1607,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"I don\u0027t see these functions included in the CR. Am I missing something?"},{"file":"usr/src/uts/common/sys/smbios.h","line":1607,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"So, these are all defined in mktables.sh which goes through and creates functions automatically based on the comments and macros defined in the header file. So these aren\u0027t explicitly defined but built automatically because of the sheer number of mapping of strings to values."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/cmd/smbios/smbios.c","type":"MODIFIED","insertions":66,"deletions":-3},{"file":"usr/src/common/smbios/mktables.sh","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/common/smbios/smb_info.c","type":"MODIFIED","insertions":54,"deletions":-1},{"file":"usr/src/lib/libsmbios/common/mapfile-vers","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/sys/smbios.h","type":"MODIFIED","insertions":51,"deletions":0},{"file":"usr/src/uts/common/sys/smbios_impl.h","type":"MODIFIED","insertions":8,"deletions":-1}],"sizeInsertions":192,"sizeDeletions":-5},{"number":"3","revision":"f6ba06d53f9e915aa86b1e8146ae85b4e8682f7f","parents":["94e74f1ae13f8186ead6d7e6d2e4c93275126448"],"ref":"refs/changes/16/2716/3","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1507166491,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507154275,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507154275,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507143485,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/cmd/smbios/smbios.c","type":"MODIFIED","insertions":66,"deletions":-3},{"file":"usr/src/common/smbios/mktables.sh","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/common/smbios/smb_info.c","type":"MODIFIED","insertions":54,"deletions":-1},{"file":"usr/src/lib/libsmbios/common/mapfile-vers","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/sys/smbios.h","type":"MODIFIED","insertions":51,"deletions":0},{"file":"usr/src/uts/common/sys/smbios_impl.h","type":"MODIFIED","insertions":8,"deletions":-1}],"sizeInsertions":192,"sizeDeletions":-5},{"number":"4","revision":"33d8ebe5fd1f293ef175a2524405bdc230e80033","parents":["8527b64bc3a2da06417e288e7553ecbce94eacaa"],"ref":"refs/changes/16/2716/4","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1507166516,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507154275,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507154275,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507143485,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/cmd/smbios/smbios.c","type":"MODIFIED","insertions":66,"deletions":-3},{"file":"usr/src/common/smbios/mktables.sh","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/common/smbios/smb_info.c","type":"MODIFIED","insertions":54,"deletions":-1},{"file":"usr/src/lib/libsmbios/common/mapfile-vers","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/sys/smbios.h","type":"MODIFIED","insertions":51,"deletions":0},{"file":"usr/src/uts/common/sys/smbios_impl.h","type":"MODIFIED","insertions":8,"deletions":-1}],"sizeInsertions":192,"sizeDeletions":-5},{"number":"5","revision":"6dda4c2c4460e45b80f917d3676f5ce39e479cac","parents":["8527b64bc3a2da06417e288e7553ecbce94eacaa"],"ref":"refs/changes/16/2716/5","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1507166577,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1507166586,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507154275,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507154275,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507143485,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/cmd/smbios/smbios.c","type":"MODIFIED","insertions":66,"deletions":-3},{"file":"usr/src/common/smbios/mktables.sh","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/common/smbios/smb_info.c","type":"MODIFIED","insertions":54,"deletions":-1},{"file":"usr/src/lib/libsmbios/common/mapfile-vers","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/sys/smbios.h","type":"MODIFIED","insertions":51,"deletions":0},{"file":"usr/src/uts/common/sys/smbios_impl.h","type":"MODIFIED","insertions":8,"deletions":-1}],"sizeInsertions":192,"sizeDeletions":-5}],"allReviewers":[{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}]}