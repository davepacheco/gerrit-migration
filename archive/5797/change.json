{"project":"joyent/manta-muskie","branch":"master","id":"I4fe70399e3fc1f5f96a1732f12c0ebd43f5b3784","number":"5797","subject":"MANTA-4122 Muskie could have a cheaper directory listing API MANTA-4067 muskie ensureDirectoryEmpty should be cheaper Reviewed by: Jordan Hendricks \u003cjordan.hendricks@joyent.com\u003e Approved by: Joshua M. Clulow \u003cjmc@joyent.com\u003e","owner":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"url":"https://cr.joyent.us/5797","commitMessage":"MANTA-4122 Muskie could have a cheaper directory listing API\nMANTA-4067 muskie ensureDirectoryEmpty should be cheaper\nReviewed by: Jordan Hendricks \u003cjordan.hendricks@joyent.com\u003e\nApproved by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\n","createdOn":1552591716,"lastUpdated":1553637208,"open":false,"status":"MERGED","comments":[{"timestamp":1552591716,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Uploaded patch set 1."},{"timestamp":1552591733,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Patch Set 1:\n\nSee ticket for testing notes."},{"timestamp":1552591749,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1552603163,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Uploaded patch set 2."},{"timestamp":1552603195,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1552603238,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Patch Set 2:\n\nPatch set 2: small additions from MANTA-4067 (https://cr.joyent.us/#/c/5442), which I have taken over."},{"timestamp":1552608084,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Uploaded patch set 3."},{"timestamp":1552608116,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1552608176,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Patch Set 3:\n\nPatch set 3:\n\nThis change now also implements MANTA-4067, based on the work that Josh Clulow did here: https://cr.joyent.us/#/c/5442/\n\nSee the MANTA-4067 ticket for testing notes."},{"timestamp":1552609520,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 3:\n\n(13 comments)\n\nBroadly, this looks good! Most of my feedback is about comments.\n\nWill there be an associated docs change, since this is changing the API?"},{"timestamp":1552685338,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Uploaded patch set 4."},{"timestamp":1552685371,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1552685711,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Uploaded patch set 5."},{"timestamp":1552685724,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Patch Set 5:\n\n(12 comments)"},{"timestamp":1552685744,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1552685825,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Patch Set 5:\n\nRegarding the docs change -- our intent is to not officially expose the new options to clients (for example, we\u0027re not going to add them to the node-manta sdk), so we weren\u0027t planning on documenting them publicly. Is there internal documentation where I should add them?"},{"timestamp":1552951910,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 5: Code-Review+1\n\n(2 comments)\n\n\u003e Regarding the docs change -- our intent is to not officially expose the new options to clients (for example, we\u0027re not going to add them to the node-manta sdk), so we weren\u0027t planning on documenting them publicly. Is there internal documentation where I should add them?\n\nI think if we make really explicit when the options are safe to be used (which I mention in this PS feedback), I think having these documented in comments is sufficient."},{"timestamp":1553017635,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Uploaded patch set 6."},{"timestamp":1553017667,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1553017847,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Uploaded patch set 7."},{"timestamp":1553017879,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1553018050,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Patch Set 7:\n\n(2 comments)"},{"timestamp":1553116216,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 7: Code-Review+1"},{"timestamp":1553296050,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 7: Integration-Approval+1\n\nThe testing notes in the tickets seem sufficient to me.  Thanks for checking the SQL EXPLAIN results."},{"timestamp":1553304518,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Uploaded patch set 8."},{"timestamp":1553304551,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1553627140,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 8: Code-Review+1"},{"timestamp":1553636715,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 8: Integration-Approval+1\n\nConfirmed with Isaac that he retested with the latest changes."},{"timestamp":1553636891,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Patch Set 9: Patch Set 8 was rebased"},{"timestamp":1553636926,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9:\n\n\"make check\" passed ok"},{"timestamp":1553637198,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Patch Set 10: Commit message was updated."},{"timestamp":1553637208,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Isaac Davis"}],"currentPatchSet":{"number":"10","revision":"9a693a081f0a0b490713b4244f2e1bcd32caef96","parents":["3b57299bb0edf3ce6e101530cf189df9de34d154"],"ref":"refs/changes/97/5797/10","uploader":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"createdOn":1553637198,"author":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553304551,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553627140,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553636715,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"SUBM","value":"1","grantedOn":1553637208,"by":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":131,"deletions":-22},{"file":"lib/dir.js","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"lib/errors.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/dir.test.js","type":"MODIFIED","insertions":230,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":38,"deletions":-3},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":427,"sizeDeletions":-30},"patchSets":[{"number":"1","revision":"f301b03effac24e104e5c5e8b7c7c72b9633624d","parents":["329dd7719e25c4edfb0c1a7729a8e825cb2802fd"],"ref":"refs/changes/97/5797/1","uploader":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"createdOn":1552591716,"author":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1552591749,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":45,"deletions":-9},{"file":"lib/errors.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/dir.test.js","type":"MODIFIED","insertions":230,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":38,"deletions":-3},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":329,"sizeDeletions":-13},{"number":"2","revision":"fa7079b658db872844b912cc686a7ffc66f1107e","parents":["329dd7719e25c4edfb0c1a7729a8e825cb2802fd"],"ref":"refs/changes/97/5797/2","uploader":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"createdOn":1552603163,"author":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1552603195,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":53,"deletions":-8},{"file":"lib/errors.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/dir.test.js","type":"MODIFIED","insertions":230,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":38,"deletions":-3},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":337,"sizeDeletions":-12},{"number":"3","revision":"86eb0a3e2f9722c646257311eeb7f2a8363252d4","parents":["329dd7719e25c4edfb0c1a7729a8e825cb2802fd"],"ref":"refs/changes/97/5797/3","uploader":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"createdOn":1552608084,"author":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1552608116,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"Makefile","line":80,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"accidental space added here?"},{"file":"Makefile","line":80,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Done"},{"file":"lib/common.js","line":634,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"nit: cap T?"},{"file":"lib/common.js","line":634,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Done"},{"file":"lib/common.js","line":650,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"It might be worth expanding on why there is an operator/non-operator distinction here?"},{"file":"lib/common.js","line":650,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Done"},{"file":"lib/common.js","line":652,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Perhaps we could say \"directory listing\" instead of \"ls\", as it is more specific and removes doubt that this comment might be referring to listing using a CLI tool (as opposed to an SDK, for instance)."},{"file":"lib/common.js","line":652,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Done"},{"file":"lib/common.js","line":653,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"It\u0027s not clear to me whether the server forbids sorting or pagination is just unsafe for unsorted results. I would try to be more explicit about that, I think."},{"file":"lib/common.js","line":653,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"To be extra clear to the reader, perhaps: \"Using either of these options will...\""},{"file":"lib/common.js","line":653,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Perhaps: \"the garbage collection process that runs in mako zones\"?"},{"file":"lib/common.js","line":653,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"I thought about this more and made it clear that only sort\u003dnone will break pagination."},{"file":"lib/common.js","line":653,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Done"},{"file":"lib/common.js","line":653,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Done"},{"file":"lib/common.js","line":655,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"What are \"normal circumstances\"?"},{"file":"lib/common.js","line":655,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"If the ticket number will be in the git history, my preference is to leave it out of the comment."},{"file":"lib/common.js","line":655,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Done"},{"file":"lib/common.js","line":655,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"I attempted to expand upon this -- though the only real explanation is \"we don\u0027t want clients to be able to shoot themselves in the foot\""},{"file":"lib/common.js","line":655,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Thanks! This explanation is excellent, and the context and tradeoffs are much clearer to me than before.\n\n\nOne additional thing I think would be great to make explicit is when callers in muskie (since those are the only ones that will really need to understand the parameters for programming, I think?) should use it. Is the only safe case to use \"checkParams\u003dfalse\" is for an empty directory check?"},{"file":"lib/common.js","line":655,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Done"},{"file":"lib/common.js","line":677,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"I know muskie is not consistent on this, but I believe we try to use setImmediate() where possible? I cannot recall the reasoning for that right now."},{"file":"lib/common.js","line":677,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Done"},{"file":"lib/common.js","line":763,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Reading this part of the comment without having read the one near the top of the function I think might be confusing. Since I think you need to read the first comment for why there would be an unsorted result set at all to make sense, I would opt to not have the examples here."},{"file":"lib/common.js","line":763,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Done"},{"file":"lib/common.js","line":797,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Is this object of a bounded size? I only ask because I\u0027ve shot myself in the foot before trying to log extremely large objects or ones with circular references. (I realize this is a debug level message, but that\u0027s important for develeopment and live debugging especially.)"},{"file":"lib/common.js","line":797,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Good point -- the caller could pass in an arbitrarily large object. I changed it to log the specific field."},{"file":"test/dir.test.js","line":0,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Thanks for all these tests! Especially the ones with bad input."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/common.js","type":"MODIFIED","insertions":85,"deletions":-20},{"file":"lib/dir.js","type":"MODIFIED","insertions":9,"deletions":-4},{"file":"lib/errors.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/dir.test.js","type":"MODIFIED","insertions":230,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":38,"deletions":-3},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":379,"sizeDeletions":-29},{"number":"4","revision":"30e02afb5903bc34a476be892924e5c1515c63b6","parents":["329dd7719e25c4edfb0c1a7729a8e825cb2802fd"],"ref":"refs/changes/97/5797/4","uploader":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"createdOn":1552685338,"author":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1552685371,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":111,"deletions":-22},{"file":"lib/dir.js","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"lib/errors.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/dir.test.js","type":"MODIFIED","insertions":230,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":38,"deletions":-3},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":406,"sizeDeletions":-30},{"number":"5","revision":"28f0832d573ded982fc877a0be466894be436d1c","parents":["329dd7719e25c4edfb0c1a7729a8e825cb2802fd"],"ref":"refs/changes/97/5797/5","uploader":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"createdOn":1552685711,"author":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1552685744,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552951910,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"comments":[{"file":"lib/dir.js","line":218,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"To make clear that it is overridden because the directory is empty, perhaps we could put these two reasons in the same sentence? For example:\n\n\"As we only need to know if the directory has any entries, we\u0027ll just ask for one entry and disable any sorting of the result set and override the skip_owner_check to ensure that it is false.\""},{"file":"lib/dir.js","line":218,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Good point. I added some clarification for why we set skip_owner_check here. It\u0027s not strictly necessary for functionality -- more of a safety measure, which was unclear before."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":111,"deletions":-22},{"file":"lib/dir.js","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"lib/errors.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/dir.test.js","type":"MODIFIED","insertions":230,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":38,"deletions":-3},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":406,"sizeDeletions":-30},{"number":"6","revision":"fb6440baa86f1bb406759f3394a6962b5bb1d26f","parents":["329dd7719e25c4edfb0c1a7729a8e825cb2802fd"],"ref":"refs/changes/97/5797/6","uploader":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"createdOn":1553017635,"author":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553017667,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":130,"deletions":-22},{"file":"lib/dir.js","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"lib/errors.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/dir.test.js","type":"MODIFIED","insertions":230,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":38,"deletions":-3},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":425,"sizeDeletions":-30},{"number":"7","revision":"1d74e8e9c07d9a175b15860f132f5a3e71eb8017","parents":["329dd7719e25c4edfb0c1a7729a8e825cb2802fd"],"ref":"refs/changes/97/5797/7","uploader":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"createdOn":1553017847,"author":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553296050,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553017879,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553116216,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":130,"deletions":-22},{"file":"lib/dir.js","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"lib/errors.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/dir.test.js","type":"MODIFIED","insertions":230,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":38,"deletions":-3},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":426,"sizeDeletions":-30},{"number":"8","revision":"4fe70399e3fc1f5f96a1732f12c0ebd43f5b3784","parents":["329dd7719e25c4edfb0c1a7729a8e825cb2802fd"],"ref":"refs/changes/97/5797/8","uploader":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"createdOn":1553304518,"author":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553636715,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553304551,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553627140,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":131,"deletions":-22},{"file":"lib/dir.js","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"lib/errors.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/dir.test.js","type":"MODIFIED","insertions":230,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":38,"deletions":-3},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":427,"sizeDeletions":-30},{"number":"9","revision":"dcd9cc598c601f97efa3f59b39cb7ac46514b7f5","parents":["3b57299bb0edf3ce6e101530cf189df9de34d154"],"ref":"refs/changes/97/5797/9","uploader":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"createdOn":1553636891,"author":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553636715,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553304551,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553627140,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":131,"deletions":-22},{"file":"lib/dir.js","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"lib/errors.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/dir.test.js","type":"MODIFIED","insertions":230,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":38,"deletions":-3},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":427,"sizeDeletions":-30},{"number":"10","revision":"9a693a081f0a0b490713b4244f2e1bcd32caef96","parents":["3b57299bb0edf3ce6e101530cf189df9de34d154"],"ref":"refs/changes/97/5797/10","uploader":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"createdOn":1553637198,"author":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553636715,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553304551,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553627140,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"SUBM","value":"1","grantedOn":1553637208,"by":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":131,"deletions":-22},{"file":"lib/dir.js","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"lib/errors.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/dir.test.js","type":"MODIFIED","insertions":230,"deletions":0},{"file":"test/helper.js","type":"MODIFIED","insertions":38,"deletions":-3},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":427,"sizeDeletions":-30}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"}]}