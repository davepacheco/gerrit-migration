From 484ef523af14b07fcb6c8f804503a60f73637d90 Mon Sep 17 00:00:00 2001
From: Orlando Vazquez <ovazquez@gmail.com>
Date: Fri, 29 Mar 2019 10:45:25 -0700
Subject: [PATCH] TRITON-1362 nightly1 tests still failing on when missing
 fabric networks

---
 test/vms.full.test.js | 19 +++++++++++--------
 1 file changed, 11 insertions(+), 8 deletions(-)

diff --git a/test/vms.full.test.js b/test/vms.full.test.js
index c926562..e1fc40c 100644
--- a/test/vms.full.test.js
+++ b/test/vms.full.test.js
@@ -2896,6 +2896,9 @@ exports.find_fabric_network = function (t) {
         t.ok(true, util.format('using fabric network "%s": %s',
             fabricNetwork.name, fabricNetwork.uuid));
     }
+    else {
+        t.ok(true, 'no fabric networks found, skipping fabric tests');
+    }
 
     t.done();
 };
@@ -2903,7 +2906,7 @@ exports.find_fabric_network = function (t) {
 
 exports.ensure_no_fabric_nat_provisioned = function (t) {
     if (!fabricNetwork) {
-        t.fail('No fabric network available');
+        t.ok(true, 'skipping, as no fabric network available');
         t.done();
         return;
     }
@@ -2929,7 +2932,7 @@ exports.ensure_no_fabric_nat_provisioned = function (t) {
 
 exports.create_vm_on_fabric_network = function (t) {
     if (!fabricNetwork) {
-        t.fail('No fabric network available');
+        t.ok(true, 'skipping, as no fabric network available');
         t.done();
         return;
     }
@@ -2960,7 +2963,7 @@ exports.create_vm_on_fabric_network = function (t) {
 
 exports.wait_provisioned_fabric_vm_job = function (t) {
     if (!fabricNetwork) {
-        t.fail('No fabric network available');
+        t.ok(true, 'skipping, as no fabric network available');
         t.done();
         return;
     }
@@ -2975,7 +2978,7 @@ exports.wait_provisioned_fabric_vm_job = function (t) {
 
 exports.ensure_fabric_nat_provisioned = function (t) {
     if (!fabricNetwork) {
-        t.fail('No fabric network available');
+        t.ok(true, 'skipping, as no fabric network available');
         t.done();
         return;
     }
@@ -3023,7 +3026,7 @@ exports.ensure_fabric_nat_provisioned = function (t) {
 
 exports.destroy_fabric_vm = function (t) {
     if (!fabricNetwork) {
-        t.fail('No fabric network available');
+        t.ok(true, 'skipping, as no fabric network available');
         t.done();
         return;
     }
@@ -3044,7 +3047,7 @@ exports.destroy_fabric_vm = function (t) {
 
 exports.wait_destroyed_fabric_vm_job = function (t) {
     if (!fabricNetwork) {
-        t.fail('No fabric network available');
+        t.ok(true, 'skipping, as no fabric network available');
         t.done();
         return;
     }
@@ -3059,7 +3062,7 @@ exports.wait_destroyed_fabric_vm_job = function (t) {
 
 exports.ensure_fabric_nat_destroyed = function (t) {
     if (!fabricNetwork) {
-        t.fail('No fabric network available');
+        t.ok(true, 'skipping, as no fabric network available');
         t.done();
         return;
     }
@@ -3090,7 +3093,7 @@ exports.ensure_fabric_nat_destroyed = function (t) {
 
 exports.ensure_no_fabric_nat_zone = function (t) {
     if (!fabricNetwork) {
-        t.fail('No fabric network available');
+        t.ok(true, 'skipping, as no fabric network available');
         t.done();
         return;
     }
-- 
2.21.0

