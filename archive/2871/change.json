{"project":"joyent/moray","branch":"master","topic":"3475","id":"If1ae92c8dc44ca708b44e40254c74dffac54624e","number":"2871","subject":"MANTA-3475 muskie should report 503 errors when moray hits its max queue length","owner":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"url":"https://cr.joyent.us/2871","commitMessage":"MANTA-3475 muskie should report 503 errors when moray hits its max queue length\n","createdOn":1508969701,"lastUpdated":1510013092,"open":false,"status":"MERGED","comments":[{"timestamp":1508969701,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 1."},{"timestamp":1508969740,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1508969836,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Topic set to 3475"},{"timestamp":1508970627,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1509050934,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 1:\n\nFor reference, could you document in the ticket how you changed the moray queue length in testing?\n\nAlso -- and I\u0027m not sure how difficult this is -- I think we should test a non-zero queue length to simulate a production environment more closely."},{"timestamp":1509056555,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 1:\n\nIn SPC, I think the max queue length is set to 1000. I\u0027m not sure I can reproduce that load but I can probably hit a much smaller value with mlives. Does that seem sufficient?"},{"timestamp":1509057396,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 1:\n\n\u003e In SPC, I think the max queue length is set to 1000. I\u0027m not sure I\n \u003e can reproduce that load but I can probably hit a much smaller value\n \u003e with mlives. Does that seem sufficient?\n\nyou can \"help\" the queue get longer by limiting the max-connections setting on the pool, if that helps."},{"timestamp":1509058280,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 1:\n\n\u003e In SPC, I think the max queue length is set to 1000. I\u0027m not sure I\n \u003e can reproduce that load but I can probably hit a much smaller value\n \u003e with mlives. Does that seem sufficient?\n\nYeah, I think a workload smaller than SPC is still sufficient."},{"timestamp":1509125105,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\n\u003e In SPC, I think the max queue length is set to 1000. I\u0027m not sure I\n \u003e can reproduce that load but I can probably hit a much smaller value\n \u003e with mlives. Does that seem sufficient?\n\nYou can also `pstop` PostgreSQL processes, or run a query with `psql` that runs `LOCK TABLE manta` (which will take an exclusive lock).  Either of these ought to cause current queries to stop completing, and even under a small load, you should start seeing queueing in Moray."},{"timestamp":1509129471,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 2."},{"timestamp":1509129496,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1509137234,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 3."},{"timestamp":1509137258,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1509142015,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 4."},{"timestamp":1509142040,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1509142172,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 4:\n\nThe most recent patchset, coupled with the moray change linked via the topic page, implements the behavior that we want. This took a while because I had to figure out that the intermediate node-fast v1 library in electric-moray was dropping both causes, and info properties. The result uses the context field, which contains an \"overloaded\" object that, if present for a NoDatabasePeersError, indicates to muskie that that moray\u0027s queue limit has been reached."},{"timestamp":1509144453,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1509148334,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1509155885,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 5."},{"timestamp":1509155910,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1509384955,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 6."},{"timestamp":1509384981,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1509385328,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1509403374,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 6:\n\n(2 comments)\n\nFrom an IA perspective, I think this looks good. Otherwise, I have a couple small comments."},{"timestamp":1509512440,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 7."},{"timestamp":1509512466,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1509570917,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 7: Code-Review+1\n\n(3 comments)"},{"timestamp":1509574819,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 8."},{"timestamp":1509574847,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1509576237,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 9: Patch Set 8 was rebased"},{"timestamp":1509576262,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9:\n\n\"make check\" passed ok"},{"timestamp":1509577342,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 9: Code-Review+1"},{"timestamp":1509641027,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 9: Code-Review+1\n\n(1 comment)"},{"timestamp":1509656680,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 10."},{"timestamp":1509656698,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 11: Patch Set 10 was rebased"},{"timestamp":1509656706,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1509656723,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1509663253,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 11: Code-Review+1"},{"timestamp":1509750554,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 11: Code-Review+1 Integration-Approval+1"},{"timestamp":1509751787,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 11: Integration-Approval-1\n\nReverting until newest patchset passes the Moray test suite."},{"timestamp":1510004390,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 11: Integration-Approval+1"},{"timestamp":1510013092,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jan Wyszynski"}],"currentPatchSet":{"number":"11","revision":"44a6fd4273e890b82fe5ca333a5362add7a0acfc","parents":["d7f113e02043bfa21e6bfd5e7617973eef2ecf33"],"ref":"refs/changes/71/2871/11","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1509656698,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509656723,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1509663253,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1509750554,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1510004390,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"SUBM","value":"1","grantedOn":1510013092,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"lib/pg.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":18,"sizeDeletions":-4},"patchSets":[{"number":"1","revision":"f5ad44eabe31b3516e04e1e1b0af00b5df63c769","parents":["7594ea98bba375e1e68d63422d49e7bd2f1fff38"],"ref":"refs/changes/71/2871/1","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1508969701,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1508969740,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1508970627,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/pg.js","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":4,"sizeDeletions":-2},{"number":"2","revision":"03d125c2ae3b4076f7ad7e3444a8768f814e7140","parents":["7594ea98bba375e1e68d63422d49e7bd2f1fff38"],"ref":"refs/changes/71/2871/2","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1509129471,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509129496,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"lib/pg.js","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":8,"sizeDeletions":-4},{"number":"3","revision":"e88c81da1515e2542fac5d1357ffcd50323ec61a","parents":["7594ea98bba375e1e68d63422d49e7bd2f1fff38"],"ref":"refs/changes/71/2871/3","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1509137234,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509137258,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":12,"deletions":-3},{"file":"lib/pg.js","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":15,"sizeDeletions":-4},{"number":"4","revision":"0adfa2818fc4a8db7056e85060b641b1792263d8","parents":["7594ea98bba375e1e68d63422d49e7bd2f1fff38"],"ref":"refs/changes/71/2871/4","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1509142015,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509142040,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1509144453,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}}],"comments":[{"file":"lib/errors.js","line":219,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I think it would be good to document the intended contract for this here.  I would have expected it to be a boolean, but I see it\u0027s an object.  I wasn\u0027t sure what the caller was supposed to be able to do with this value (other than check if it\u0027s not falsey) until I looked at the Muskie change.\n\nIt\u0027s a nice idea to provide the Error as though it were a cause, but it\u0027s a little dicey because Errors have properties with expensive getters (e.g., the \"stack\" property).  We really don\u0027t want to accidentally invoke this as part of serializing the error.  I\u0027d suggest either making this a boolean, or making it just the \"name\" property of the error, or else making it an object with the \"name\" and \"message\" properties.  If you end up providing an object with \"name\" and \"message\", then over on the Muskie side, I think you want to reconstruct a real error for it explicitly (e.g., create a new VError with \"name\" and \"message\" properties), since it won\u0027t actually be an instanceof Error when it gets to Muskie."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"lib/pg.js","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":19,"sizeDeletions":-4},{"number":"5","revision":"9773c388a25436007dd65507c98ce960012530eb","parents":["7594ea98bba375e1e68d63422d49e7bd2f1fff38"],"ref":"refs/changes/71/2871/5","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1509155885,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509155910,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":16,"deletions":-4},{"file":"lib/pg.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":18,"sizeDeletions":-5},{"number":"6","revision":"8cd77751f9c314d2f4ab164155a0cd1e1d804dbd","parents":["7594ea98bba375e1e68d63422d49e7bd2f1fff38"],"ref":"refs/changes/71/2871/6","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1509384955,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509384981,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1509385328,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}}],"comments":[{"file":"lib/errors.js","line":218,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"nit: wrap at 80 chars here instead?"},{"file":"lib/errors.js","line":221,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Given that Moray is an independent service, I\u0027m not sure we should imply that the client is always muskie. It would probably be better to be more generic about referring to the client."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"lib/pg.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":18,"sizeDeletions":-4},{"number":"7","revision":"962a3ddd6c333b1e01b11252b40f0385248f0605","parents":["7594ea98bba375e1e68d63422d49e7bd2f1fff38"],"ref":"refs/changes/71/2871/7","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1509512440,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1509570917,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509512466,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/errors.js","line":218,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"\"Moray\""},{"file":"lib/errors.js","line":219,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"\"Moray\""},{"file":"lib/errors.js","line":231,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Maybe call this \"message\" so that it matches the properties on an Error?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"lib/pg.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":18,"sizeDeletions":-4},{"number":"8","revision":"56d0f40660b17d6ff2c24d7f95080f9e2cee7e0c","parents":["7594ea98bba375e1e68d63422d49e7bd2f1fff38"],"ref":"refs/changes/71/2871/8","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1509574819,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509574847,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"lib/pg.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":18,"sizeDeletions":-4},{"number":"9","revision":"42b7b781dbaf0ab6823ebd3874cf4476e5785cf3","parents":["d7f113e02043bfa21e6bfd5e7617973eef2ecf33"],"ref":"refs/changes/71/2871/9","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1509576237,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1509577342,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509574847,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1509641027,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"comments":[{"file":"lib/errors.js","line":223,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"The end delimiter of this comment should be on the next line."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"lib/pg.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":18,"sizeDeletions":-4},{"number":"10","revision":"f1ae92c8dc44ca708b44e40254c74dffac54624e","parents":["7594ea98bba375e1e68d63422d49e7bd2f1fff38"],"ref":"refs/changes/71/2871/10","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1509656680,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509656706,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"lib/pg.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":18,"sizeDeletions":-4},{"number":"11","revision":"44a6fd4273e890b82fe5ca333a5362add7a0acfc","parents":["d7f113e02043bfa21e6bfd5e7617973eef2ecf33"],"ref":"refs/changes/71/2871/11","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1509656698,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1509663253,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509656723,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1509750554,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1510004390,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"SUBM","value":"1","grantedOn":1510013092,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"lib/pg.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":18,"sizeDeletions":-4}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}]}