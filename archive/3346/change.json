{"project":"joyent/node-triton","branch":"master","id":"I3f243f8c8f4bb8622f99566af23e4da919aadba0","number":"3346","subject":"TRITON-116 node-triton image sharing Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"url":"https://cr.joyent.us/3346","commitMessage":"TRITON-116 node-triton image sharing\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1518208187,"lastUpdated":1518641893,"open":false,"status":"MERGED","comments":[{"timestamp":1518208187,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 1."},{"timestamp":1518208188,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 950fe7449a3899390c411c328ae591778514af3f\n    \n    TRITON-116 node-triton image sharing\n    \n    commit e7c02436dfcb282a9139121cd8c59d097b5181c9\n    \n    PUBAPI-1470 volume objects should expose their creation timestamp in a property named created instead of create_timestamp\n    Reviewed by: Mike Zeller \u003cmike.zeller@joyent.com\u003e\n    Approved by: Mike Zeller \u003cmike.zeller@joyent.com\u003e"},{"timestamp":1518208191,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n fatal: No tags can describe \u0027467cec231b0efdc0358a8c74d77733fa3d66d971\u0027.\n Try --always, or create some tags.\n version is:\n [[ `cat package.json | json version` \u003d\u003d `grep \u0027^## \u0027 CHANGES.md | head -2 | tail -1 | awk \u0027{print $2}\u0027` ]]\n Makefile:53: recipe for target \u0027versioncheck\u0027 failed\n gmake: *** [versioncheck] Error 1"},{"timestamp":1518208356,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 2."},{"timestamp":1518208357,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 918a501ecb5c757c3598ada4a2c45523f0a16b8f\n    \n    TRITON-116 node-triton image sharing"},{"timestamp":1518208391,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1518566852,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(16 comments)"},{"timestamp":1518570562,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\n(15 comments)"},{"timestamp":1518570569,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 3."},{"timestamp":1518570570,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit f5c13431235083602adb346a7fb8a2553ab05a4d\n    \n    cr updates"},{"timestamp":1518570599,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1518632109,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3:\n\n(5 comments)"},{"timestamp":1518635383,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 3:\n\n(3 comments)"},{"timestamp":1518635570,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 4."},{"timestamp":1518635571,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 06edc6ef1fff0ec1499e28c627e3e98e00860747\n    \n    update copyright lines"},{"timestamp":1518637231,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1\n\n(1 comment)"},{"timestamp":1518637950,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1518641893,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Todd Whiteman"}],"currentPatchSet":{"number":"5","revision":"3f243f8c8f4bb8622f99566af23e4da919aadba0","parents":["e7c02436dfcb282a9139121cd8c59d097b5181c9"],"ref":"refs/changes/46/3346/5","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1518637950,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1518637231,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1518637231,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1518641893,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":28,"deletions":-1},{"file":"lib/do_image/do_share.js","type":"ADDED","insertions":115,"deletions":0},{"file":"lib/do_image/do_unshare.js","type":"ADDED","insertions":115,"deletions":0},{"file":"lib/do_image/index.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":102,"deletions":-7},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"test/integration/cli-image-create.test.js","type":"MODIFIED","insertions":58,"deletions":-1}],"sizeInsertions":431,"sizeDeletions":-12},"patchSets":[{"number":"1","revision":"467cec231b0efdc0358a8c74d77733fa3d66d971","parents":["68a889b8b7f9555a8b69c7df1f99d3e498ccf3e6"],"ref":"refs/changes/46/3346/1","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1518208187,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1518208191,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":28,"deletions":-1},{"file":"lib/do_image/do_share.js","type":"ADDED","insertions":106,"deletions":0},{"file":"lib/do_image/do_unshare.js","type":"ADDED","insertions":106,"deletions":0},{"file":"lib/do_image/index.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/do_volume/do_list.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":98,"deletions":-5},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"test/integration/cli-image-create.test.js","type":"MODIFIED","insertions":58,"deletions":-1}],"sizeInsertions":413,"sizeDeletions":-16},{"number":"2","revision":"6c40e752d37128721eabb4743d1442c25037b4a2","parents":["e7c02436dfcb282a9139121cd8c59d097b5181c9"],"ref":"refs/changes/46/3346/2","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1518208356,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1518208391,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"CHANGES.md","line":12,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Might be nice to have a note about what cloudapi server version is required for this, else a failure is expected. \n\nAnd... I wonder if that can be handled gracefully in the tritonapi.js handlers.\n\n```\n$ triton cloudapi /--ping -i\nHTTPS/1.1 200 OK\nserver: cloudapi/8.5.0\n...\n```\n\nIf the commands get an error (say a 404 on the UpdateImage endpoint) and that server header cloudapi version isn\u0027t sufficient (e.g. isn\u0027t 8.6.0 or later), then could have a error that is clear about that."},{"file":"CHANGES.md","line":12,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"I\u0027m not modifying cloudapi - I\u0027m using cloudapi UpdateImage, which as far as I can tell has always been supported (at least in the cloudapi docs up to 7.0.0)?"},{"file":"CHANGES.md","line":12,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Oh! Sorry about that. I hadn\u0027t realized that UpdateImage supported updating the \u0027acl\u0027 field."},{"file":"lib/do_image/do_share.js","line":8,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Generally this is meant to be formatted as:\n\n    Copyright (c) 2018, Joyent, Inc.\n\nbut I\u0027m never going to fail a CR for that."},{"file":"lib/do_image/do_share.js","line":8,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Okay, I can update.\n\nNote that I just copy what I find in other files (copied from do_export.js).\n\nIt seems the (c) format is not widely used in node-triton (only 9 of 129 in lib/ dir):\n\n$ rg Copyright | grep \"Joyent\" | wc -l\n     129\n$ rg Copyright | grep \"Joyent\" | grep \"(c)\" | wc -l\n       9"},{"file":"lib/do_image/do_share.js","line":8,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Yah. So.. the form with \"(c)\" was in eng.git all along I think. Then I recall jclulow saying something about some lawyer conversation and he started eliding the \"(c)\" in new code he was making. I think I misinterpreted what he said at the time. Then much later dap said we should really just follow what\u0027s in eng.git.\n\nAnyway, I\u0027ve haven\u0027t wanted to blow time going and updating between the forms."},{"file":"lib/do_image/do_share.js","line":54,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Capital \u0027S\u0027 is I think typically what other node-triton commands so for output to the user."},{"file":"lib/do_image/do_share.js","line":54,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/do_image/do_share.js","line":55,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I think if `opts.json`, then we should do a dump of the result JSON, and *not* the console.log. This is similar to `-j` to `triton inst create`."},{"file":"lib/do_image/do_share.js","line":55,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/do_image/do_unshare.js","line":54,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Capital \u0027U\u0027 is I think typically what other node-triton commands so for output to the user."},{"file":"lib/do_image/do_unshare.js","line":54,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/do_image/do_unshare.js","line":55,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I think if `opts.json`, then we should do a dump of the result JSON, and *not* the console.log. This is similar to `-j` to `triton inst create`."},{"file":"lib/do_image/do_unshare.js","line":55,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/do_image/do_unshare.js","line":86,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Could eventually support sharing with multiple accounts in one go, but that can be separate."},{"file":"lib/do_image/do_unshare.js","line":91,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Similar to earlier comment, I\u0027m inclined to use \u0027account\u0027 everywhere."},{"file":"lib/do_image/do_unshare.js","line":91,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/tritonapi.js","line":239,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Let\u0027s rename it to `_stepImg` then. The naming intent was that it reflect the name of the var added to `arg`."},{"file":"lib/tritonapi.js","line":239,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/tritonapi.js","line":777,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Let\u0027s say \"login\" instead of \"name\" to not potentially confusing with \"firstName/lastName\" fields."},{"file":"lib/tritonapi.js","line":777,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Perhaps call it \u0027account\u0027 rather than \u0027user\u0027? Thoughts. My concern is confusion with subusers."},{"file":"lib/tritonapi.js","line":777,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Yes, account will work well."},{"file":"lib/tritonapi.js","line":777,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Changed to account, specified as UUID only (not implementing account login yet)."},{"file":"lib/tritonapi.js","line":778,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"State that it returns the updated img too."},{"file":"lib/tritonapi.js","line":778,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/tritonapi.js","line":804,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"cut \u0027n paste name?"},{"file":"lib/tritonapi.js","line":804,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Yep - fixed."},{"file":"lib/tritonapi.js","line":821,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"s/name/login/"},{"file":"lib/tritonapi.js","line":821,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/tritonapi.js","line":822,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Ditto about mentioning the second img arg."},{"file":"lib/tritonapi.js","line":822,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"test/integration/cli-image-create.test.js","line":205,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Test with using a login name? Or not implementing that yet?"},{"file":"test/integration/cli-image-create.test.js","line":205,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Not implementing that part yet."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":28,"deletions":-1},{"file":"lib/do_image/do_share.js","type":"ADDED","insertions":106,"deletions":0},{"file":"lib/do_image/do_unshare.js","type":"ADDED","insertions":106,"deletions":0},{"file":"lib/do_image/index.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":98,"deletions":-5},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"test/integration/cli-image-create.test.js","type":"MODIFIED","insertions":58,"deletions":-1}],"sizeInsertions":409,"sizeDeletions":-10},{"number":"3","revision":"597f4ddfb75611536134b09f387a2139cdac3a34","parents":["e7c02436dfcb282a9139121cd8c59d097b5181c9"],"ref":"refs/changes/46/3346/3","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1518570569,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1518570599,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/do_image/do_share.js","line":8,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Want me to be picky about a missing comma there? ;)"},{"file":"lib/do_image/do_share.js","line":8,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Heh, I can fix that."},{"file":"lib/tritonapi.js","line":787,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"assert.uuid here perhaps?  Hrm, tho if you do that, then the cli function code should have code to ensure a UUID else callback with a UsageError... rather than just blowing up on an assert here."},{"file":"lib/tritonapi.js","line":787,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"I didn\u0027t want to enforce that here (in case we later allow logins as well as UUID) - i.e. you wouldn\u0027t need to update the node-triton cli to support login names - it would just work.\n\nThe endpoints (cloudapi and imgapi) should do that UUID validation (and they currently do)."},{"file":"lib/tritonapi.js","line":787,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Okay, cool."},{"file":"lib/tritonapi.js","line":832,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"assert.uuid here perhaps?"},{"file":"lib/tritonapi.js","line":832,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"ditto as above"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":28,"deletions":-1},{"file":"lib/do_image/do_share.js","type":"ADDED","insertions":115,"deletions":0},{"file":"lib/do_image/do_unshare.js","type":"ADDED","insertions":115,"deletions":0},{"file":"lib/do_image/index.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":102,"deletions":-7},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"test/integration/cli-image-create.test.js","type":"MODIFIED","insertions":58,"deletions":-1}],"sizeInsertions":431,"sizeDeletions":-12},{"number":"4","revision":"a0e4ea63ab714ef131718a8ede4e778f1fd34ad2","parents":["e7c02436dfcb282a9139121cd8c59d097b5181c9"],"ref":"refs/changes/46/3346/4","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1518635570,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1518637231,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1518637231,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":28,"deletions":-1},{"file":"lib/do_image/do_share.js","type":"ADDED","insertions":115,"deletions":0},{"file":"lib/do_image/do_unshare.js","type":"ADDED","insertions":115,"deletions":0},{"file":"lib/do_image/index.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":102,"deletions":-7},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"test/integration/cli-image-create.test.js","type":"MODIFIED","insertions":58,"deletions":-1}],"sizeInsertions":431,"sizeDeletions":-12},{"number":"5","revision":"3f243f8c8f4bb8622f99566af23e4da919aadba0","parents":["e7c02436dfcb282a9139121cd8c59d097b5181c9"],"ref":"refs/changes/46/3346/5","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1518637950,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1518637231,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1518637231,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1518641893,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":28,"deletions":-1},{"file":"lib/do_image/do_share.js","type":"ADDED","insertions":115,"deletions":0},{"file":"lib/do_image/do_unshare.js","type":"ADDED","insertions":115,"deletions":0},{"file":"lib/do_image/index.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":102,"deletions":-7},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"test/integration/cli-image-create.test.js","type":"MODIFIED","insertions":58,"deletions":-1}],"sizeInsertions":431,"sizeDeletions":-12}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}]}