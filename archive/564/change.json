{"project":"joyent/node-sdc-clients","branch":"master","id":"I9b4d4a3d86450a31157ff95a8bf4da98dbcafa37","number":"564","subject":"TOOLS-1556 update node-sdc-clients to support node v4 Reviewed by: Josh Wilsdon \u003cjosh@wilsdon.ca\u003e","owner":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"url":"https://cr.joyent.us/564","commitMessage":"TOOLS-1556 update node-sdc-clients to support node v4\nReviewed by: Josh Wilsdon \u003cjosh@wilsdon.ca\u003e\n","createdOn":1475271947,"lastUpdated":1475609679,"open":false,"status":"MERGED","comments":[{"timestamp":1475271947,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 1."},{"timestamp":1475271948,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit e79e3dc7071429f0100f5ca533c2f0039204c637\n    \n    note moved UFDS docs\n    \n    commit 3e2e20929c3e51d9b7a1cfc2a734ab4a2f82e2e0\n    \n    more node v4 work (mainly restify-clients), port test suite to tape\n    \n    commit 1e24e3fee9f4d9a94b80e376c27ad4522066db1a\n    \n    IMGAPI-587 get IMGAPI working with node v4 (incomplete)"},{"timestamp":1475271994,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1475305162,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 1: Code-Review+1\n\n(3 comments)\n\nfew nits, but overall lgtm."},{"timestamp":1475534780,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1475534873,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 2."},{"timestamp":1475534873,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit a7582963474db0637aadd5f536076a30f5ae2d38\n    \n    update on feedback from joshw"},{"timestamp":1475534941,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1475535194,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 2: Code-Review+1\n\nlgtm!"},{"timestamp":1475609588,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1475609679,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Trent Mick"}],"currentPatchSet":{"number":"2","revision":"9b4d4a3d86450a31157ff95a8bf4da98dbcafa37","parents":["b4844472ec43de3786401c718923f2aac8f3a5d4"],"ref":"refs/changes/64/564/2","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1475534873,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1475534941,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1475535194,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1475609588,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1475609679,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":19,"deletions":-1},{"file":"Makefile","type":"MODIFIED","insertions":6,"deletions":-37},{"file":"README.md","type":"MODIFIED","insertions":32,"deletions":-73},{"file":"docs/index.md","type":"MODIFIED","insertions":2,"deletions":-449},{"file":"lib/amon.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/assertions.js","type":"DELETED","insertions":0,"deletions":-38},{"file":"lib/ca.js","type":"MODIFIED","insertions":21,"deletions":-24},{"file":"lib/cnapi.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/dsapi.js","type":"MODIFIED","insertions":8,"deletions":-9},{"file":"lib/index.js","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"lib/napi.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"lib/papi.js","type":"MODIFIED","insertions":301,"deletions":-292},{"file":"lib/restifyclient.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/vmapi.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"package.json","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"test/amon.test.js","type":"MODIFIED","insertions":114,"deletions":-109},{"file":"test/ca.test.js","type":"MODIFIED","insertions":165,"deletions":-165},{"file":"test/cnapi.test.js","type":"MODIFIED","insertions":220,"deletions":-238},{"file":"test/cns.test.js","type":"MODIFIED","insertions":44,"deletions":-39},{"file":"test/dsapi.test.js","type":"MODIFIED","insertions":55,"deletions":-57},{"file":"test/helper.js","type":"DELETED","insertions":0,"deletions":-48},{"file":"test/napi.test.js","type":"MODIFIED","insertions":196,"deletions":-196},{"file":"test/nsswitch.conf","type":"DELETED","insertions":0,"deletions":-69},{"file":"test/papi.test.js","type":"MODIFIED","insertions":180,"deletions":-168},{"file":"test/runtests","type":"MODIFIED","insertions":63,"deletions":-43},{"file":"test/ufds.test.js","type":"DELETED","insertions":0,"deletions":-767},{"file":"test/vmapi.test.js","type":"MODIFIED","insertions":905,"deletions":-906},{"file":"tools/jsl.web.conf","type":"DELETED","insertions":0,"deletions":-137}],"sizeInsertions":2358,"sizeDeletions":-3900},"patchSets":[{"number":"1","revision":"ac3060e385e247c63e941354656b385c943c5f94","parents":["b4844472ec43de3786401c718923f2aac8f3a5d4"],"ref":"refs/changes/64/564/1","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1475271947,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1475271994,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1475305162,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"comments":[{"file":"Makefile","line":8,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Missed copyright update."},{"file":"lib/cnapi.js","line":8,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Missed copyright update."},{"file":"tools/jsl.node.conf","line":44,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"ooc: how come?"},{"file":"tools/jsl.node.conf","line":44,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Mainly because I got a \u0027make check\u0027 error for https://github.com/joyent/node-sdc-clients/blob/IMGAPI-587/lib/papi.js#L80\n\n    /Users/trentm/joy/node-sdc-clients/lib/papi.js(80): warning: function PAPI does not always return a value\n\nThe old PAPI export was NOT a constructor, so to not break compat I had to add the top block with the \"return new PAPI...\".  Personally I thought it was annoying that that necessitated a `return undefined;` or something at the end of the function:\n\n    --- a/lib/papi.js\n    +++ b/lib/papi.js\n    @@ -105,6 +105,7 @@ function PAPI(clientOpts) {\n         }\n     \n         self.client \u003d restifyClients.createJsonClient(clientOpts);\n    +    return undefined;\n     }\n     \n\nwhat do you think? I\u0027m cool doing the `return undefined` if you think that best."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":19,"deletions":-1},{"file":"Makefile","type":"MODIFIED","insertions":5,"deletions":-36},{"file":"README.md","type":"MODIFIED","insertions":32,"deletions":-73},{"file":"docs/index.md","type":"MODIFIED","insertions":2,"deletions":-449},{"file":"lib/amon.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/assertions.js","type":"DELETED","insertions":0,"deletions":-38},{"file":"lib/ca.js","type":"MODIFIED","insertions":21,"deletions":-24},{"file":"lib/cnapi.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/dsapi.js","type":"MODIFIED","insertions":8,"deletions":-9},{"file":"lib/index.js","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"lib/napi.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"lib/papi.js","type":"MODIFIED","insertions":300,"deletions":-292},{"file":"lib/restifyclient.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/vmapi.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"package.json","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"test/amon.test.js","type":"MODIFIED","insertions":114,"deletions":-109},{"file":"test/ca.test.js","type":"MODIFIED","insertions":165,"deletions":-165},{"file":"test/cnapi.test.js","type":"MODIFIED","insertions":220,"deletions":-238},{"file":"test/cns.test.js","type":"MODIFIED","insertions":44,"deletions":-39},{"file":"test/dsapi.test.js","type":"MODIFIED","insertions":55,"deletions":-57},{"file":"test/helper.js","type":"DELETED","insertions":0,"deletions":-48},{"file":"test/napi.test.js","type":"MODIFIED","insertions":196,"deletions":-196},{"file":"test/nsswitch.conf","type":"DELETED","insertions":0,"deletions":-69},{"file":"test/papi.test.js","type":"MODIFIED","insertions":180,"deletions":-168},{"file":"test/runtests","type":"MODIFIED","insertions":63,"deletions":-43},{"file":"test/ufds.test.js","type":"DELETED","insertions":0,"deletions":-767},{"file":"test/vmapi.test.js","type":"MODIFIED","insertions":905,"deletions":-906},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tools/jsl.web.conf","type":"DELETED","insertions":0,"deletions":-137}],"sizeInsertions":2355,"sizeDeletions":-3899},{"number":"2","revision":"9b4d4a3d86450a31157ff95a8bf4da98dbcafa37","parents":["b4844472ec43de3786401c718923f2aac8f3a5d4"],"ref":"refs/changes/64/564/2","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1475534873,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1475534941,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1475609588,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1475609679,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1475535194,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":19,"deletions":-1},{"file":"Makefile","type":"MODIFIED","insertions":6,"deletions":-37},{"file":"README.md","type":"MODIFIED","insertions":32,"deletions":-73},{"file":"docs/index.md","type":"MODIFIED","insertions":2,"deletions":-449},{"file":"lib/amon.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/assertions.js","type":"DELETED","insertions":0,"deletions":-38},{"file":"lib/ca.js","type":"MODIFIED","insertions":21,"deletions":-24},{"file":"lib/cnapi.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/dsapi.js","type":"MODIFIED","insertions":8,"deletions":-9},{"file":"lib/index.js","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"lib/napi.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"lib/papi.js","type":"MODIFIED","insertions":301,"deletions":-292},{"file":"lib/restifyclient.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/vmapi.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"package.json","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"test/amon.test.js","type":"MODIFIED","insertions":114,"deletions":-109},{"file":"test/ca.test.js","type":"MODIFIED","insertions":165,"deletions":-165},{"file":"test/cnapi.test.js","type":"MODIFIED","insertions":220,"deletions":-238},{"file":"test/cns.test.js","type":"MODIFIED","insertions":44,"deletions":-39},{"file":"test/dsapi.test.js","type":"MODIFIED","insertions":55,"deletions":-57},{"file":"test/helper.js","type":"DELETED","insertions":0,"deletions":-48},{"file":"test/napi.test.js","type":"MODIFIED","insertions":196,"deletions":-196},{"file":"test/nsswitch.conf","type":"DELETED","insertions":0,"deletions":-69},{"file":"test/papi.test.js","type":"MODIFIED","insertions":180,"deletions":-168},{"file":"test/runtests","type":"MODIFIED","insertions":63,"deletions":-43},{"file":"test/ufds.test.js","type":"DELETED","insertions":0,"deletions":-767},{"file":"test/vmapi.test.js","type":"MODIFIED","insertions":905,"deletions":-906},{"file":"tools/jsl.web.conf","type":"DELETED","insertions":0,"deletions":-137}],"sizeInsertions":2358,"sizeDeletions":-3900}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}]}