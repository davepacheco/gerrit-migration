{"project":"joyent/illumos-joyent","branch":"master","id":"Ib380d4fce9c309a568bb92531d552f1cc69d985b","number":"1034","subject":"OS-5709 sd fails to start Sandisk Lightning II Drives Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Reviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e Approved by: Jerry Jelinek \u003cjerry.jelinek@jo","owner":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"url":"https://cr.joyent.us/1034","commitMessage":"OS-5709 sd fails to start Sandisk Lightning II Drives\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nReviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\n","createdOn":1480559854,"lastUpdated":1480983688,"open":false,"status":"MERGED","comments":[{"timestamp":1480559854,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 1."},{"timestamp":1480568496,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(4 comments)"},{"timestamp":1480598986,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\nnothing to add beyond Patrick\u0027s comments"},{"timestamp":1480630294,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 2."},{"timestamp":1480630930,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1480634693,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 3."},{"timestamp":1480634703,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2:\n\n(5 comments)"},{"timestamp":1480636834,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1480637142,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1480637661,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 4."},{"timestamp":1480637685,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1480637703,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1480638283,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1480893672,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1480961329,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4:\n\nTo test this I booted the affected sytems and a couple other systems with SAS and SATA devices on different controllers to make sure that we didn\u0027t see anything odd."},{"timestamp":1480962480,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 4: Integration-Approval+1"},{"timestamp":1480983597,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 5: Patch Set 4 was rebased."},{"timestamp":1480983670,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1480983688,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Robert Mustacchi"}],"currentPatchSet":{"number":"6","revision":"b380d4fce9c309a568bb92531d552f1cc69d985b","parents":["2856f8e8068d0168f37880ebb2e2cec56102522f"],"ref":"refs/changes/34/1034/6","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1480983670,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480637703,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480638283,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480893672,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1480962480,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1480983688,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","type":"MODIFIED","insertions":20,"deletions":-5},{"file":"usr/src/uts/common/sys/scsi/generic/inquiry.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/sys/scsi/targets/sddef.h","type":"MODIFIED","insertions":10,"deletions":0}],"sizeInsertions":35,"sizeDeletions":-7},"patchSets":[{"number":"1","revision":"5c50f3d2b61fc9150f2c1d56e3da6be83b680532","parents":["80c431c3af17a3f5c86dac722986210ac5675994"],"ref":"refs/changes/34/1034/1","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1480559854,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/io/scsi/targets/sd.c","line":7046,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Kind of messy with formatting, commas, and phrasing.\n\nSomething along the lines of: \"Strictly speaking, for SPC-4 or greater, no additional action is required to power on a drive when a TUR passes.\" might be a little better"},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","line":7046,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Nix the \u0027So \u0027"},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","line":7046,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","line":7046,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","line":7047,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"s/drive/continue/ will be clearer since \u0027drive\u0027 is used as a noun elsewhere in the sentence"},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","line":7047,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/scsi/targets/sddef.h","line":1838,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"These macro names appear to be swapped around."},{"file":"usr/src/uts/common/sys/scsi/targets/sddef.h","line":1838,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"D\u0027oh, thanks."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","type":"MODIFIED","insertions":20,"deletions":-5},{"file":"usr/src/uts/common/sys/scsi/generic/inquiry.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/sys/scsi/targets/sddef.h","type":"MODIFIED","insertions":10,"deletions":0}],"sizeInsertions":35,"sizeDeletions":-7},{"number":"2","revision":"c9775c017ffd4df3dffec4bafe2507ed33cd3245","parents":["80c431c3af17a3f5c86dac722986210ac5675994"],"ref":"refs/changes/34/1034/2","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1480630294,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/io/scsi/targets/sd.c","line":7046,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"should this say \"when a TUR passes\"?"},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","line":7046,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It should, thanks."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","type":"MODIFIED","insertions":20,"deletions":-5},{"file":"usr/src/uts/common/sys/scsi/generic/inquiry.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/sys/scsi/targets/sddef.h","type":"MODIFIED","insertions":10,"deletions":0}],"sizeInsertions":35,"sizeDeletions":-7},{"number":"3","revision":"e015c3d94cfc748e2be220727f1f91131f9c4399","parents":["80c431c3af17a3f5c86dac722986210ac5675994"],"ref":"refs/changes/34/1034/3","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1480634693,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480636834,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"comments":[{"file":"usr/src/uts/common/io/scsi/targets/sd.c","line":7045,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"\"action is\" or \"actions are\""},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","line":7045,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Thanks for catching that."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","type":"MODIFIED","insertions":20,"deletions":-5},{"file":"usr/src/uts/common/sys/scsi/generic/inquiry.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/sys/scsi/targets/sddef.h","type":"MODIFIED","insertions":10,"deletions":0}],"sizeInsertions":35,"sizeDeletions":-7},{"number":"4","revision":"749b0dcafeea90b9c9f97d01d00793a1ec10d1be","parents":["80c431c3af17a3f5c86dac722986210ac5675994"],"ref":"refs/changes/34/1034/4","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1480637661,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480893672,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480637703,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480638283,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1480962480,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","type":"MODIFIED","insertions":20,"deletions":-5},{"file":"usr/src/uts/common/sys/scsi/generic/inquiry.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/sys/scsi/targets/sddef.h","type":"MODIFIED","insertions":10,"deletions":0}],"sizeInsertions":35,"sizeDeletions":-7},{"number":"5","revision":"08911c5d65f6d3fef94a51b3c3c2bfa19982792f","parents":["2856f8e8068d0168f37880ebb2e2cec56102522f"],"ref":"refs/changes/34/1034/5","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1480983597,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480893672,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480637703,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480638283,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1480962480,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","type":"MODIFIED","insertions":20,"deletions":-5},{"file":"usr/src/uts/common/sys/scsi/generic/inquiry.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/sys/scsi/targets/sddef.h","type":"MODIFIED","insertions":10,"deletions":0}],"sizeInsertions":35,"sizeDeletions":-7},{"number":"6","revision":"b380d4fce9c309a568bb92531d552f1cc69d985b","parents":["2856f8e8068d0168f37880ebb2e2cec56102522f"],"ref":"refs/changes/34/1034/6","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1480983670,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1480983688,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480893672,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480637703,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480638283,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1480962480,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","type":"MODIFIED","insertions":20,"deletions":-5},{"file":"usr/src/uts/common/sys/scsi/generic/inquiry.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/sys/scsi/targets/sddef.h","type":"MODIFIED","insertions":10,"deletions":0}],"sizeInsertions":35,"sizeDeletions":-7}],"allReviewers":[{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}]}