{"project":"joyent/sdc-vmapi","branch":"master","id":"Ie493a3b700cda913c428e778d87ec7cc0328703c","number":"5731","subject":"TRITON-897 RFD 34 Triton instance migration Reviewed by: Orlando Vazquez \u003corlando@joyent.com\u003e Approved by: Orlando Vazquez \u003corlando@joyent.com\u003e","owner":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"url":"https://cr.joyent.us/5731","commitMessage":"TRITON-897 RFD 34 Triton instance migration\nReviewed by: Orlando Vazquez \u003corlando@joyent.com\u003e\nApproved by: Orlando Vazquez \u003corlando@joyent.com\u003e\n","createdOn":1551981129,"lastUpdated":1555426240,"open":false,"status":"MERGED","comments":[{"timestamp":1551981129,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 1."},{"timestamp":1551981131,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit e24619ed4278abeede332d20f73175489f98abb7\n    \n    add migration abort\n    \n    commit 2e5b45ba8203f5149615c3fb67640f4b3d013097\n    \n    record the job.action, which will flow into the acquireTicket call\n    \n    commit 13f4e1099253d8ff44030d78b112b716e5a97588\n    \n    fix callback when there are no reserved networks\n    \n    commit 4f1a8e57e503c08d1aafcae865a207bd41cba19f\n    \n    remove testing env variable overrides\n    \n    commit 97be29921699c0225b00acc3c4fbb4d752e691f7\n    \n    allow sync to run from state failed\n    \n    commit 3ce835b0af9d7fab0f118e4a801d9dd305d1138d\n    \n    support full (automated) instance migration\n    \n    commit 0e0e825042eec9598e468685ba2dd615fac901fd\n    \n    use \u0027successful\u0027 state\n    \n    commit 1102dd9e9672e14a8935bc88931facde19f0456a\n    \n    try and limit long error messages that contain multiple lines\n    \n    commit ca3785affdbd57b9dd13b8a283c18bdad85a6493\n    \n    add docker workaround for lofs mounted filesystems\n    \n    commit 2f1cd5e9490d19171b2a205733ffb50a74ca6680\n    \n    fix duration_ms progress entry calculation\n    \n    commit e1c283d22c37e9a422bbabc2f8984a2dda30d1bf\n    \n    update watch progress message handling\n    \n    commit fc7fc5c4cdc8e5feba98ffda76ec0616a79053c7\n    \n    catch sync error case where a callback could already be fired\n    \n    commit 20b6b942c1c55b5043ba64746fc25a95ca2d14b7\n    \n    add controls for whether a retry of a failed migration is allowed\n    \n    commit c80a9a082b12f8c8b2de3e95298e149ffbbb2011\n    \n    create the duration_ms progress entry when storing migrations\n    \n    commit 8f4cc7e9ddc53cef1b6da7d2b252ab3c2045bd1b\n    \n    migration lookups for a successful migration should use the target server uuid\n    \n    commit 9179219c14230c0232d8842c9ae63e907534eeb4\n    \n    add vm param to the setupFilesystem call\n    \n    commit 88555735a5d0044fd0520d7f8bd9d5353d3292da\n    \n    ensure migration begin allocates to a different server\n    \n    commit c2f30649c5ffb3d5df8903824df04b61e3584504\n    \n    update error handling for the migration watch endpoint\n    \n    commit 901db077c39f684eeb120494eb780c452ca3edaf\n    \n    clear old progress events when starting a migration action\n    \n    commit 67ba671cc907272f997144df84a93e8857163c62\n    \n    update pause/stop workflows\n    \n    commit 2ea1f5e9a0f3dde1eea579820a490e2c393d725f\n    \n    remove ppid from process details\n    \n    commit c1732984de729866ae62f919190f278a3805b0e2\n    \n    cleanup workflows should be called for sync or pause actions\n    \n    commit 9acf66ee83f6abfe14e852ef10cfa6bb78e08e86\n    \n    allow query against active migrations\n    \n    commit d445829e87422f7d9eaf177aba330a75269bb768\n    \n    correct the ppid variable name\n    \n    commit 495b34f12c34775fec4121edb0156d267bef5ad9\n    \n    pause needs to request migration record in raw format\n    \n    commit 8e9fe8881d6b5d945d29df2a8de8490bb86bdfa0\n    \n    update workflow timeout values\n    \n    commit c870c182e5dfc8beb4101b93b1ba9f86b983acc1\n    \n    request the migration record in \u0027raw\u0027 format\n    \n    commit ba6a4eff0c2003379cc6afbea313281cbebdeba5\n    \n    add a duration_ms to progress events\n    \n    commit 88f06acaa00572f1d7dbcc09ae2df4db6eaac426\n    \n    watch should be using the migration state variable, not status\n    \n    commit c01cbe1508bea14db0c7aed9458f51589a7b98bf\n    \n    only query using known migration parameters\n    \n    commit 004023761ee5d4d07855f687fca967cb9f9aa5b1\n    \n    tweak formatting\n    \n    commit 27b6b95c86c4fe64dbbaa8bf110ad0f912a50fd1\n    \n    add migration estimate support\n    \n    commit d12d43d9f81dd60692a1620ea84aafe17a0c1a63\n    \n    mark migration success\n    \n    commit 84cba280deba2731b56348785d4081974ee278cf\n    \n    for switch, the sync sub-task should be run from record state running\n    \n    commit 156f59768c17ecd6b7a4b6e0750999a5482adcf9\n    \n    the change to the record source_server_uuid should be later in the workflow\n    \n    commit 1f07a31c92f67312b5f46735990dec5f36f7d9bf\n    \n    watch should use application/x-json-stream content-type in response\n    \n    commit 25f69492a44f2f6b1a7d11f24d051253d4fddc30\n    \n    add workaround for bhyve provision regarding cpu_type\n    \n    commit 98b5950fa0d545a1e722c85123880b46c63c1394\n    \n    remove final sync snapshots on switch success\n    \n    commit 54893647123f9e3c3b585e8f0dd2ae16e4d9472a\n    \n    only store provision job uuid in the case of a successful provision\n    \n    commit 3aa37b3dbd5774250e5ca4d45741f95761e0f121\n    \n    add test for list migrations after switch is done\n    \n    commit 70d0ddee8c9a8a0103bf0f9d93cd16ccd3b3a404\n    \n    update the migration source_server_uuid when a switch has occurred\n    \n    commit 2ab868a421acf59ce270b12a11ce2b9c3d7091da\n    \n    Allow migration records to have multiple entries with the same server_uuid.\n    Always return the most recent record when there are multiples.\n    \n    commit 25eba042c0dc4d0f3d1ce62c4d2725f3acf26cc7\n    \n    index created_timestamp on the migration record\n    \n    commit aec48001effcafc87057dbe1036ab747abadcbad\n    \n    provision workflow - maintain sorted entries for the vm attributes\n    \n    commit 630b24a41807ca96aa28b5e06c1e57c9b91f731f\n    \n    switch - add better handling for the progress_history and progress events\n    \n    commit 3107543a727cba13afa4575004506f85f6f11179\n    \n    for pause, use a better function name for get record callback\n    \n    commit 24f06212bbaceaf1e6089b607460a0f39e9889df\n    \n    do not try and store to the progress record before it exists\n    \n    commit 157b0d13408727986432c8dc91eeef33e4003be2\n    \n    when provisioning with do_not_inventory, do not write the initial moray record\n    \n    commit de641791375e0ab585151757205a419c39673f3c\n    \n    for switch, add a check that at least once sync has been run\n    \n    commit 3313eb4c69ec3423a4bbadba9fb185400997fdd3\n    \n    store the final sync job uuid in the progress entry record\n    \n    commit aaed0c3b06361a89c2ff890a071b0a109b267872\n    \n    store the provision job uuid in the progress entry record\n    \n    commit 68c3f3ee82d4b2562696de8c6a4c475d79613b7d\n    \n    Cloning job.params is actually fine\n    \n    commit 1b4c29c6ab161b5922a826defd0a70c06a275aa0\n    \n    use the cnapi migrate endpoint, instead of migrate-receive\n    \n    commit 0b2fc878866c8ed8cbe15d74f82b92742244d5fe\n    \n    Pass on do_not_inventory parameter\n    \n    commit c536b913af24294820ad717a30f7174b4d33bb5c\n    \n    Reference, do not clone, vmPaylaod\n    \n    commit e0959895e0e7077a4ef767a580f0d01935abdf95\n    \n    store the owner_uuid in the migration record\n    \n    commit 9f509268828096429994c9ad7dbb9e0abe6a15b7\n    \n    for KVM instance provisioning, fix up the disk parameters\n    \n    commit 86e6fefe2c1ee57e6faba55ba3520c59899260a8\n    \n    implement the migration pause endpoint\n    \n    commit 4bb1e35bf96689616874c9d1a2017a664b39b069\n    \n    fix server allocation, adjust functions, remove unnecessary code\n    \n    commit 9e89654114e0138cb3386fa16725e869167028d7\n    \n    refactor begin, sync and switch endpoints\n    - implement switch phase\n    \n    commit 0b79c764e7c6dea75c0078b11a059d75023c60b7\n    \n    index the owner_uuid field in moray vms_vm_migrations bucket\n    \n    commit 55064e1bf5b5c45c1d3028e289b1b5e065d37b47\n    \n    Add locality hint\n    \n    commit a5873ae212d9839f8d974b6a8b5f5b5aab69ce30\n    \n    Add locality hint\n    \n    commit 9377723cc447bdad27059a9b94842ac1967c0b12\n    \n    Load package details used in test at runtime\n    \n    commit 1ea60b34b5466056b3970be0adcd7721220b8e4f\n    \n    Allow DAPI to designate migration targets\n    \n    commit 0b5fc79bbeeff50cb0c09eff96b123a168883437\n    \n    use trace logging\n    \n    commit 0a4974b7308a3e97e11c1628cd09fb8663c5db80\n    \n    move watch api to a different endpoint\n    - update progress/watch event handling\n    - create the initial migration record before hitting workflow\n    \n    commit 90ff70c7c37d124f7ec32b7259ee15ef9250d400\n    \n    add tests for migration watch\n    \n    commit 25cf89e07a875f8a7e269113d9b14206ab7ca1ad\n    \n    migration filter should use \u0027and\u0027\n    \n    commit 39e961653205d69d18b11db54c0d8a67f474bbf4\n    \n    add ListMigrations endpoint, update record handling, add start of watch api\n    \n    commit d011de8526e894f1bffd23b9c61d154744aa5b15\n    \n    add missing migration cleanup workflow files\n    \n    commit 85aec4c3e3f1c89a7236dc007575757db4371d3e\n    \n    implement most of sync handling, added start of progress/watch handling\n    \n    commit acfb4b6f890a1434a933db3acdfd0c25b2b220a0\n    \n    fix migrate workflow location\n    \n    commit 4b3b0bc50fdced03dfc10083a3f9c9ee7a327ccf\n    \n    TRITON-897 RFD 34 Triton instance migration"},{"timestamp":1552496919,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1553143764,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 1:\n\n(17 comments)"},{"timestamp":1553618809,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 2."},{"timestamp":1553618811,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 9a78cf3004d5cdf7aed51e02b5e0ce9d89e39c76\n    \n    update copyright dates, removed unused code\n    \n    commit fdc5ee120f929b465104466dabb1354edf45b26f\n    \n    assert arguments, remove unused code\n    \n    commit e2abfbc75c429eedccc03589dd00fdb5efdc0979\n    \n    validate optional fields for the migration moray object\n    \n    commit 8aae3a199a3e765419f3bec6c627511c8775d023\n    \n    allow true boolean value for automatic migration\n    \n    commit 3c7b47e98c543fcd6b1789d2de075a8114f8e80e\n    \n    add migration abort\n    \n    commit 7a837b7f178039e2a75468fdb2b6f149a23e4f30\n    \n    record the job.action, which will flow into the acquireTicket call\n    \n    commit f89fac40d0de89e84275475380703ab3f30c99cb\n    \n    fix callback when there are no reserved networks\n    \n    commit 6381d2dd9da46b892a70ffcd2a63d5a70b78e8fe\n    \n    remove testing env variable overrides\n    \n    commit 7f3ad4479722ac460e50331dcf68f77c8c7f26aa\n    \n    allow sync to run from state failed\n    \n    commit 1c76e3f13a207b983fab7291f0487d4dd9652b49\n    \n    support full (automated) instance migration\n    \n    commit 5d43c2cb882924549557201ab5c9b466d46a2361\n    \n    use \u0027successful\u0027 state\n    \n    commit 5438b582a38b3cf092b236308d1a430036f15f83\n    \n    try and limit long error messages that contain multiple lines\n    \n    commit 113d847928217dbbaea145a32eb3dfb47bcb04d4\n    \n    add docker workaround for lofs mounted filesystems\n    \n    commit 61cd4c9a6eb8da4f9c7c89ca120c7ecc93814be6\n    \n    fix duration_ms progress entry calculation\n    \n    commit 924105512a557b27d8b5f9e707da1456289045e8\n    \n    update watch progress message handling\n    \n    commit 2a1aa4f862fdd08d8e36cedd877bed6f3da32a8b\n    \n    catch sync error case where a callback could already be fired\n    \n    commit 25eba1b390287c522e4995daa2b44833ccbe8235\n    \n    add controls for whether a retry of a failed migration is allowed\n    \n    commit 9e71bfc50a2d48e6ed11ee0e2cc8ae072c42121c\n    \n    create the duration_ms progress entry when storing migrations\n    \n    commit 165825e9ccf2da62712d27d1d98481b39fb4e7a2\n    \n    migration lookups for a successful migration should use the target server uuid\n    \n    commit 2b3da0ede8ce36aa4f9a263c57b28ac14445a8e7\n    \n    add vm param to the setupFilesystem call\n    \n    commit 55cfd298fa82c679ce2ac2b48e6b23e3b857e14f\n    \n    ensure migration begin allocates to a different server\n    \n    commit ced264ede9f1fbdb0cd74f56692648d31925dced\n    \n    update error handling for the migration watch endpoint\n    \n    commit 55ec4ee920fbd614737aed87438b15cbad0e7b64\n    \n    clear old progress events when starting a migration action\n    \n    commit ce5be73cef31e7e317bf1e576c90535e335a270d\n    \n    update pause/stop workflows\n    \n    commit 948d08cdebb686d62f3aac03ad4b8a89be0efb08\n    \n    remove ppid from process details\n    \n    commit ee45b20dc62d4e86941c621daa092f29d758e1d6\n    \n    cleanup workflows should be called for sync or pause actions\n    \n    commit 1fe818845e0988a3523bad143f1979797b204a4c\n    \n    allow query against active migrations\n    \n    commit 162daaea4eab91f414d0a3658840990cd4ca8d00\n    \n    correct the ppid variable name\n    \n    commit 3eabde9df8fd448ecd5cf2d6a6b08339de301e13\n    \n    pause needs to request migration record in raw format\n    \n    commit afb01cdf65a544e265b00039741cc4984e55e22b\n    \n    update workflow timeout values\n    \n    commit bafa5652d2df857408a97e4a646592db272429c2\n    \n    request the migration record in \u0027raw\u0027 format\n    \n    commit d6b7ae433b6b9ad7618787e2405b59f662deb512\n    \n    add a duration_ms to progress events\n    \n    commit 704e66ba11bf3c003c62d08c7f31d59e982c7d6b\n    \n    watch should be using the migration state variable, not status\n    \n    commit 183a64dd7936d109828ee621098bc16b08e80223\n    \n    only query using known migration parameters\n    \n    commit 7df287061219df23dac123605116cbcd333bb402\n    \n    tweak formatting\n    \n    commit be6da4a85d61366f61b8d09c1eb101deda4b961d\n    \n    add migration estimate support\n    \n    commit 2b185a9899fb094e28127cbf44e26dd3d51e7cc2\n    \n    mark migration success\n    \n    commit 67d09442cc1a12477042fa2bc2718e8dafdd2afe\n    \n    for switch, the sync sub-task should be run from record state running\n    \n    commit bb87ce06cbcbdbb647c9f859177688f7f7393dd2\n    \n    the change to the record source_server_uuid should be later in the workflow\n    \n    commit b78a1d0b141fbf9481a33f430868df51e45c0abe\n    \n    watch should use application/x-json-stream content-type in response\n    \n    commit 9f29cafc80982f6ead0ef6942475ec75c2e74b7c\n    \n    add workaround for bhyve provision regarding cpu_type\n    \n    commit 31420718b26d4963f6b1916578339ecd43a5a84c\n    \n    remove final sync snapshots on switch success\n    \n    commit 57060f82b94faf06c7cd43f7875ec67c17573978\n    \n    only store provision job uuid in the case of a successful provision\n    \n    commit aaa3df48dac04e584ce1152d8f531f040e61589b\n    \n    add test for list migrations after switch is done\n    \n    commit a28e64df935819599728b9126e9a0c05e1da4270\n    \n    update the migration source_server_uuid when a switch has occurred\n    \n    commit 1f5e4ca992bd16d7a418cf354e806db5dd6d0ec6\n    \n    Allow migration records to have multiple entries with the same server_uuid.\n    Always return the most recent record when there are multiples.\n    \n    commit e8284107fecb4d321e83b36deb1bc0743d5fa5ac\n    \n    index created_timestamp on the migration record\n    \n    commit 92e4be133d35bf0d0d1b3852b3a7fa51b22e2b19\n    \n    provision workflow - maintain sorted entries for the vm attributes\n    \n    commit 0bdfbfaa041b8ca589cf31104cb0640efd0a5316\n    \n    switch - add better handling for the progress_history and progress events\n    \n    commit 0d9d0e7e61662a8c32e268c50a836d39456775b7\n    \n    for pause, use a better function name for get record callback\n    \n    commit 4e7a46c5dc8348ae56b82490daea15c0d3ddd905\n    \n    do not try and store to the progress record before it exists\n    \n    commit efe8b5584734495b23b0c330e50f0693a3f23668\n    \n    when provisioning with do_not_inventory, do not write the initial moray record\n    \n    commit 815c2d045c9eb31ee3d4123586dbf5646892b6f8\n    \n    for switch, add a check that at least once sync has been run\n    \n    commit 645188f481e093e314c37d23345484c2856a2aad\n    \n    store the final sync job uuid in the progress entry record\n    \n    commit 27fa9fc40f587db3a8f2586bfccddc36f5e8d32a\n    \n    store the provision job uuid in the progress entry record\n    \n    commit 01d7d8d7623b3ab887680790b29942f3d7766391\n    \n    Cloning job.params is actually fine\n    \n    commit 67bd5713292cdb8887e32cacb845b7fab272e8f5\n    \n    use the cnapi migrate endpoint, instead of migrate-receive\n    \n    commit ffd17b0d4129e2239017fbf71aac40ddc7a0a5e6\n    \n    Pass on do_not_inventory parameter\n    \n    commit 0f714ac9c2ed11ffbdc7e925b01b67894a844326\n    \n    Reference, do not clone, vmPaylaod\n    \n    commit 629b5976c6cd89721a3427080e388f76124d7905\n    \n    store the owner_uuid in the migration record\n    \n    commit 4149868143ab7963827356c2446dd4888b52ec4b\n    \n    for KVM instance provisioning, fix up the disk parameters\n    \n    commit 88b398d13745905a1d28bb0749230a6444f4f40c\n    \n    implement the migration pause endpoint\n    \n    commit 897c8160935cf760839a77b420c39402f16231fa\n    \n    fix server allocation, adjust functions, remove unnecessary code\n    \n    commit fd3243f293baca9c94689c99fc77d4883cb778dd\n    \n    refactor begin, sync and switch endpoints\n    - implement switch phase\n    \n    commit 649f9d4db0711738cbd6e65172016ad4bb17b455\n    \n    index the owner_uuid field in moray vms_vm_migrations bucket\n    \n    commit 2d771e3142d3ef0dd262ee6ab53f07eb62043b70\n    \n    Add locality hint\n    \n    commit 1738553fb9800071651ab3b61b8e7f9bb0e74597\n    \n    Add locality hint\n    \n    commit 06a422d3f06f0a09577b8c066d5c80bf9bf0a088\n    \n    Load package details used in test at runtime\n    \n    commit a260f6ae5001a02c4f5a5d93cb56d00818c11909\n    \n    Allow DAPI to designate migration targets\n    \n    commit 61df5966be1b15383490ea88d6caf69811c59569\n    \n    use trace logging\n    \n    commit 5724285aaf4ddd30ae2df57909e74f99e0d67b9c\n    \n    move watch api to a different endpoint\n    - update progress/watch event handling\n    - create the initial migration record before hitting workflow\n    \n    commit d331822b4c3b122d0d857f16388a625907b04c02\n    \n    add tests for migration watch\n    \n    commit 716a942307aad451814878534d4c3660326394d1\n    \n    migration filter should use \u0027and\u0027\n    \n    commit b155c34dd1633c6f47987d722ee625a35fe3b116\n    \n    add ListMigrations endpoint, update record handling, add start of watch api\n    \n    commit c5b8040f875030fc1eadca3ce18882053b8fdf94\n    \n    add missing migration cleanup workflow files\n    \n    commit 0d7bc19bdbc57f86d4417ba209a4d3fff67d2d83\n    \n    implement most of sync handling, added start of progress/watch handling\n    \n    commit 4b9fae539bce8f25ae9a15c34b38eab3ee7433bc\n    \n    fix migrate workflow location\n    \n    commit 4d1af18b3cc1d9d8e64b28109ffa4050214dbcfe\n    \n    TRITON-897 RFD 34 Triton instance migration"},{"timestamp":1553618834,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\n(17 comments)"},{"timestamp":1553618848,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1553816392,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1554221837,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 3."},{"timestamp":1554221839,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit d143f8d3b75f4d34c5a0851d7199c997f270571c\n    \n    test lx, docker and kvm migrations\n    \n    commit 943b221ae2bb5ac940bfeb4ff62563bf36bd57b9\n    \n    work harder to extract errors from cnapi tasks\n    \n    commit 3f5929b3947b1b2b877f1496a1fc19ad84ec08c8\n    \n    deal with fabrics being disabled"},{"timestamp":1554221874,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554222620,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 4."},{"timestamp":1554222622,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit e2bc0de07fa4647d327bd02a19c9e1297176d227\n    \n    test lx, docker and kvm migrations\n    \n    commit 9b9d083541ed9e98116c0d9675c42fe5bffb182f\n    \n    work harder to extract errors from cnapi tasks\n    \n    commit de2aafc8fd974ebf886dc75d09936b4fb3c0ed7c\n    \n    deal with fabrics being disabled\n    \n    commit f71afd7dda6074ac0c2309a2f9600143be6b5d16\n    \n    update copyright dates, removed unused code\n    \n    commit b700d69ab8ca862e340e858f33f5eab9023ba954\n    \n    assert arguments, remove unused code\n    \n    commit 9af45f73a677174b362dc665c2a9f534a58ac2b9\n    \n    validate optional fields for the migration moray object\n    \n    commit 9ac209aa6182ba2d3322442a2e9a58335286ec65\n    \n    allow true boolean value for automatic migration\n    \n    commit 84ed0ccb05ee69652bf093e0efaa0e58d42eb7f6\n    \n    add migration abort\n    \n    commit f6ba43a7cfd0e267fe380ae872a4bd74bc2f4600\n    \n    record the job.action, which will flow into the acquireTicket call\n    \n    commit 31a95edb509941ab3cd2522ba93640f9087c7434\n    \n    fix callback when there are no reserved networks\n    \n    commit 4623601fd9b3283924103485facbeef36603e1f9\n    \n    remove testing env variable overrides\n    \n    commit 41e00e6754fa4ead2d499148c62bb9ae26bae47c\n    \n    allow sync to run from state failed\n    \n    commit 175210764d7b5d838e4219bf1182244728040320\n    \n    support full (automated) instance migration\n    \n    commit 17473dcddf2d7dad663fc3b1fc6f7d293e747aef\n    \n    use \u0027successful\u0027 state\n    \n    commit 741c45c2d4951bab8f40fdf3a4cf9c76ec8e5cb6\n    \n    try and limit long error messages that contain multiple lines\n    \n    commit e402921410e4b77728980d20e564daf0a078dc21\n    \n    add docker workaround for lofs mounted filesystems\n    \n    commit 0fa17321cf549fc85ed916bc264f006f0efab8c4\n    \n    fix duration_ms progress entry calculation\n    \n    commit fe90de31bcca35ef3e0ddf86e66a561610420726\n    \n    update watch progress message handling\n    \n    commit c6d8fb1243c145ca8fa7f0fac1f4ec9e5e1f01ad\n    \n    catch sync error case where a callback could already be fired\n    \n    commit 6bc510508b714de9a69d80c92b2e8b42f3d54009\n    \n    add controls for whether a retry of a failed migration is allowed\n    \n    commit f9ce845875e1761b6140959a05d0c42e3f1db5de\n    \n    create the duration_ms progress entry when storing migrations\n    \n    commit 698c7cadff5035a08bf3b3edb153f7dfe44e0d6c\n    \n    migration lookups for a successful migration should use the target server uuid\n    \n    commit c7e04fdc81e76febf6429a534427af4b71e912f6\n    \n    add vm param to the setupFilesystem call\n    \n    commit 1b213bbe93d8701a1d85f1581f74395ada4dc1e5\n    \n    ensure migration begin allocates to a different server\n    \n    commit bc75e2737463aea8103122d57159a77bc239f1ad\n    \n    update error handling for the migration watch endpoint\n    \n    commit b5d4ec6fb6521185afbea91e2731df2fe706502f\n    \n    clear old progress events when starting a migration action\n    \n    commit 2f2eaeaaa92e6c7d055d6a74d5ea91bc44aeb116\n    \n    update pause/stop workflows\n    \n    commit 081c8697ebcbd96221f32f203afee723f77486f4\n    \n    remove ppid from process details\n    \n    commit 306e780e310e743d26fadaa3abfa63a30f79e3e8\n    \n    cleanup workflows should be called for sync or pause actions\n    \n    commit 839e7a19b54a39d311207f0ece6c7403fdec50c0\n    \n    allow query against active migrations\n    \n    commit 76d6d60876d4be6997b8804064acea0e3a725647\n    \n    correct the ppid variable name\n    \n    commit c76275e755f2ec655ffd317de56fd9dd4981c432\n    \n    pause needs to request migration record in raw format\n    \n    commit 521f87db21936d8012447b44b453aa67d39a1ed7\n    \n    update workflow timeout values\n    \n    commit 34ec4565fe0b1bcc481fdb75ca2f91f972e7fa02\n    \n    request the migration record in \u0027raw\u0027 format\n    \n    commit 87bd9e503a404414d10da95806b53e88cf6ffe3f\n    \n    add a duration_ms to progress events\n    \n    commit 2805aa4af9697af5c270fcc8e7cb9df8f10114be\n    \n    watch should be using the migration state variable, not status\n    \n    commit 0677e3d347d1e9a31499f69621f37410c8573856\n    \n    only query using known migration parameters\n    \n    commit 71dacbc4114fcd70cbe2d248f4f7b983b28b4315\n    \n    tweak formatting\n    \n    commit 38f2482dd737a07e333090825b64567accf5bd06\n    \n    add migration estimate support\n    \n    commit 5d232ddfc57768e110c0f29ecbc1008582273f8d\n    \n    mark migration success\n    \n    commit 3063bc1a90b76afaca954ee17c56a4850cc13fa3\n    \n    for switch, the sync sub-task should be run from record state running\n    \n    commit a918c1eb97661dfc6bb88b0705e3b16ad4c440ee\n    \n    the change to the record source_server_uuid should be later in the workflow\n    \n    commit d40a614599af797744afb1e4d8edc71230aeca4f\n    \n    watch should use application/x-json-stream content-type in response\n    \n    commit 0e4d43ec1561e81353f89c161cefe17fa746e282\n    \n    add workaround for bhyve provision regarding cpu_type\n    \n    commit d972697b62708b1865e29f491ee2f80349fbce00\n    \n    remove final sync snapshots on switch success\n    \n    commit 58b8072b479aef1d7b0225b51fe4fc9806da6940\n    \n    only store provision job uuid in the case of a successful provision\n    \n    commit 4e009f0edbcf87e0f814daae574d9bfb3ef00a05\n    \n    add test for list migrations after switch is done\n    \n    commit 13be699ebc4189672dff50817e159ffe3a23b945\n    \n    update the migration source_server_uuid when a switch has occurred\n    \n    commit 685eeb714ff2ba9e8bb4c486521bd486e289fc7c\n    \n    Allow migration records to have multiple entries with the same server_uuid.\n    Always return the most recent record when there are multiples.\n    \n    commit e747f97b405fce020f9ace40282bb8db96466356\n    \n    index created_timestamp on the migration record\n    \n    commit 7eafdf84ac3e57ae60ba16b492f8c9c3b0ef64df\n    \n    provision workflow - maintain sorted entries for the vm attributes\n    \n    commit d2b0c221767b0a33aa5e2e4cdcdd4d194c565d67\n    \n    switch - add better handling for the progress_history and progress events\n    \n    commit d96c87b0a3a887cf34ae1958ba5a880e2e43d8b8\n    \n    for pause, use a better function name for get record callback\n    \n    commit 272edbca4ef2400e6d101f9d9cc0ab63c939d42a\n    \n    do not try and store to the progress record before it exists\n    \n    commit 4ea55698c3899bc480e0d3bad0adbc691fb1c2a3\n    \n    when provisioning with do_not_inventory, do not write the initial moray record\n    \n    commit 9a0bcb0f000d31233a70255c544b2b964e550bdb\n    \n    for switch, add a check that at least once sync has been run\n    \n    commit f2d6c532d8593b28c5f063aa18a242e7ecb7b175\n    \n    store the final sync job uuid in the progress entry record\n    \n    commit 9d953897b8f1c78ec5adc88bb8d66c44e6dfd54e\n    \n    store the provision job uuid in the progress entry record\n    \n    commit d4e9cfd0c79de4b312817a76096e62541cd4e3f0\n    \n    Cloning job.params is actually fine\n    \n    commit 4f3e9ca0b930b1dcddff91560be3bd1e2d026024\n    \n    use the cnapi migrate endpoint, instead of migrate-receive\n    \n    commit 3465c84ba121d5d31c67d99c14978e8f14c67fa4\n    \n    Pass on do_not_inventory parameter\n    \n    commit d8022b1616de03ca5f8a464846e535fd80a29d9f\n    \n    Reference, do not clone, vmPaylaod\n    \n    commit 77ceece15d43d22df5fae5757bfdcf1c47dd744b\n    \n    store the owner_uuid in the migration record\n    \n    commit bb0f176adfe2f831998cd106a5e1c7ae4a6cda0a\n    \n    for KVM instance provisioning, fix up the disk parameters\n    \n    commit 01366754720918bd70fb6184be37d8ff619e9de0\n    \n    implement the migration pause endpoint\n    \n    commit fb43f8674bbcba4770c72db09bef74704a8dff28\n    \n    fix server allocation, adjust functions, remove unnecessary code\n    \n    commit 81bdce9fa6971e4af9b1e3b03838e7f7d9bc5445\n    \n    refactor begin, sync and switch endpoints\n    - implement switch phase\n    \n    commit e16fbb6b2158fdf381a273430af6d5c00c78d40f\n    \n    index the owner_uuid field in moray vms_vm_migrations bucket\n    \n    commit 5fc96fd4288095846e0d97042bfb54cb2915c3a0\n    \n    Add locality hint\n    \n    commit a053034e827e938a2dcc6b9610d2565f4bcbce41\n    \n    Add locality hint\n    \n    commit 5b078e3e627c5d69a757b9e75d42d6035a34bb54\n    \n    Load package details used in test at runtime\n    \n    commit c297293fca25682af36f1a194e81e66b359f8907\n    \n    Allow DAPI to designate migration targets\n    \n    commit a41e366bd2ad23bc5eda7867e4402df655f74e76\n    \n    use trace logging\n    \n    commit b7f5c487dfd9ed96a2c8d9f90d9ec11d2d7e9385\n    \n    move watch api to a different endpoint\n    - update progress/watch event handling\n    - create the initial migration record before hitting workflow\n    \n    commit b2150407c3f1d5480d1877aed04d3d28c53b079c\n    \n    add tests for migration watch\n    \n    commit c7cb99c620814b1d8c6f50bfe784b286188e5a53\n    \n    migration filter should use \u0027and\u0027\n    \n    commit 244aff842ed629bba2910f5f87c8245adf7663ae\n    \n    add ListMigrations endpoint, update record handling, add start of watch api\n    \n    commit 61c5191e825b3a5fba41793bff8b9fde09598e6a\n    \n    add missing migration cleanup workflow files\n    \n    commit 4d8054078cb8db2f1e1df327704255d503fa9572\n    \n    implement most of sync handling, added start of progress/watch handling\n    \n    commit d99c163be31ff2a34e5edf098069e7fefe319c28\n    \n    fix migrate workflow location\n    \n    commit 20210c742a9297eba9653d178474fbcc05ac932c\n    \n    TRITON-897 RFD 34 Triton instance migration"},{"timestamp":1554222666,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554230501,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1"},{"timestamp":1554239613,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 5."},{"timestamp":1554239615,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit ffe451af1814c11b4fe7b5743ccd1a031f09c539\n    \n    return the migration record from begin, sync, switch actions"},{"timestamp":1554239649,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554491398,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 6."},{"timestamp":1554491402,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit 8974a738f5807c5cf1c5b2c986b893dbc2fe31e9\n    \n    fix network nic tag lookup for migration\n    \n    commit dde7777707ef0c09bfbe784975beeb24051830e9\n    \n    return the migration record from begin, sync, switch actions\n    \n    commit ea437c314dbe949e908bef5a07027f2423f678c3\n    \n    test lx, docker and kvm migrations\n    \n    commit 441c8b43991b624fc98a8da34ef7b3aa47403836\n    \n    work harder to extract errors from cnapi tasks\n    \n    commit e17ef982a12c0a8f6af57a2643e3c159cf41683e\n    \n    deal with fabrics being disabled\n    \n    commit 35ab4530bc7e9f3e03a821673b2a27bf52d77df6\n    \n    update copyright dates, removed unused code\n    \n    commit 0fbec8e9e72bebf810da1ba79e8af366d71421a4\n    \n    assert arguments, remove unused code\n    \n    commit 95a118b3a965b86215c9baf131818e5e7b174a33\n    \n    validate optional fields for the migration moray object\n    \n    commit f5c3e9c2b6d848b435dff2cb7ce0ba659bb9f49f\n    \n    allow true boolean value for automatic migration\n    \n    commit 6900a057e8fbc6f7f2ef2b75405b0c898c61b04a\n    \n    add migration abort\n    \n    commit c5585b651b016ddeefee2fbd8687a60eccfb815d\n    \n    record the job.action, which will flow into the acquireTicket call\n    \n    commit 95740a7315ac492987f334810fce40676a8d3e15\n    \n    fix callback when there are no reserved networks\n    \n    commit 1c8c0ea96c76439e2dac6b942904f0bff02fe1bb\n    \n    remove testing env variable overrides\n    \n    commit 16b093d32921b73f0393dfcc6de95ee7e1f4b2b5\n    \n    allow sync to run from state failed\n    \n    commit 267832da6fb48ae2fcc97b680afe385e234aa327\n    \n    support full (automated) instance migration\n    \n    commit 6c25fddfa9cd34da4e175720bda0ba32d7766793\n    \n    use \u0027successful\u0027 state\n    \n    commit 0d18236faa49cb0ad2eee49c07e0bded7c7b4994\n    \n    try and limit long error messages that contain multiple lines\n    \n    commit 05e1b7e3af4c4c30e886fa168c51adde3e221a95\n    \n    add docker workaround for lofs mounted filesystems\n    \n    commit c82363e4fff67f3a7c54a23fc91de64972091a17\n    \n    fix duration_ms progress entry calculation\n    \n    commit 9db07952ed9f14491fa9cef0abb266793c592718\n    \n    update watch progress message handling\n    \n    commit 4cd521a9d2c56d309f25be609088726a2f5e0557\n    \n    catch sync error case where a callback could already be fired\n    \n    commit 5aa6aa990aac17dca42a2453fca94bf99011d1ac\n    \n    add controls for whether a retry of a failed migration is allowed\n    \n    commit cc51436b254a0917f978c3b2d7d2e3f76561f18a\n    \n    create the duration_ms progress entry when storing migrations\n    \n    commit 866d7f244db07928e9948afb4c3ddc55baa5330f\n    \n    migration lookups for a successful migration should use the target server uuid\n    \n    commit 2b203fd6956463484f27af1aafc6e13d25bfd1ed\n    \n    add vm param to the setupFilesystem call\n    \n    commit acccf6d98ae2153243def5d7024bbc086c20217e\n    \n    ensure migration begin allocates to a different server\n    \n    commit c495cc285fb1c109dbf36bbc6e2591f956bc67c2\n    \n    update error handling for the migration watch endpoint\n    \n    commit 9dc9b18f69a93e585e2764c4bc0a85d2abdfc113\n    \n    clear old progress events when starting a migration action\n    \n    commit 1d3b3153a7b3d0a234265935e708763e7db0584b\n    \n    update pause/stop workflows\n    \n    commit 9325f6ea181f2846cfd18e722d7428c3445eef4c\n    \n    remove ppid from process details\n    \n    commit 2e0001b75c19bef14fe7a9a3dc8a94b0744ce0e8\n    \n    cleanup workflows should be called for sync or pause actions\n    \n    commit a150db607c36b0c41a0e562f3e664576668b4eb6\n    \n    allow query against active migrations\n    \n    commit 87dc9b0971195df63f0a051c20dd20d26029b7ab\n    \n    correct the ppid variable name\n    \n    commit 35616bb57d5c3e79eca6b076eb4d00acd0d20fd5\n    \n    pause needs to request migration record in raw format\n    \n    commit 3a4d2b141a397c1ce35ef5b1172f6d8a058e83f2\n    \n    update workflow timeout values\n    \n    commit 53f2deb5c9fdbb6109a42688b92451301b93b8b7\n    \n    request the migration record in \u0027raw\u0027 format\n    \n    commit 78ae76b4ca4a8d0b38006e90d7541390ac33e5f1\n    \n    add a duration_ms to progress events\n    \n    commit a4162b6e936161a25a6ad93d8f91084535908319\n    \n    watch should be using the migration state variable, not status\n    \n    commit 09579c1433d6d78d60aa9a4e262697c566d29df1\n    \n    only query using known migration parameters\n    \n    commit ca1af8709f499af21f09177e6055416810e2ad94\n    \n    tweak formatting\n    \n    commit 04a06e1865c7371138a86980b18b7019733aca84\n    \n    add migration estimate support\n    \n    commit 348c2ae62e19a92689dc65f3907d7ffecea91ad3\n    \n    mark migration success\n    \n    commit ad8d54659c989b64c1f992076b17e920c623bc24\n    \n    for switch, the sync sub-task should be run from record state running\n    \n    commit 045f6097c7c1bca88d54b08249ea37ff5e2da009\n    \n    the change to the record source_server_uuid should be later in the workflow\n    \n    commit 7e3f9c8d28e127d710d4bb4a44998e4587b7fe22\n    \n    watch should use application/x-json-stream content-type in response\n    \n    commit cf3fce0b037996623ee6e7df8b55d5b5f79dd51a\n    \n    add workaround for bhyve provision regarding cpu_type\n    \n    commit d3d5376b000ed4e935b193cb630b03436abf8a94\n    \n    remove final sync snapshots on switch success\n    \n    commit 489b6e46ab877cf5dcc0f41744d2e10f32b6c446\n    \n    only store provision job uuid in the case of a successful provision\n    \n    commit 9be940739261904ddf20a656271db4e0958ee9ef\n    \n    add test for list migrations after switch is done\n    \n    commit f672e5d80d31d5c040a603fd8c1c84cb636d8cec\n    \n    update the migration source_server_uuid when a switch has occurred\n    \n    commit c9d58ff2afe3967a6efabcfd7f50840fa7020648\n    \n    Allow migration records to have multiple entries with the same server_uuid.\n    Always return the most recent record when there are multiples.\n    \n    commit face3245d6b431eff1f1597c568dd3fc07b57630\n    \n    index created_timestamp on the migration record\n    \n    commit d1b9826ae8c5cff97e0014ff80d33311aa89a1e0\n    \n    provision workflow - maintain sorted entries for the vm attributes\n    \n    commit df6563cfcc077e003078b396879289724b9fb0f5\n    \n    switch - add better handling for the progress_history and progress events\n    \n    commit 7ea08826ef6ed14abf05b61141b6531c08dc762d\n    \n    for pause, use a better function name for get record callback\n    \n    commit 9396fdc394ae2bcfd2b7a309363fa9093434dad2\n    \n    do not try and store to the progress record before it exists\n    \n    commit 2bf85ff1b9daf188d840a692f18ab49afcdfeb11\n    \n    when provisioning with do_not_inventory, do not write the initial moray record\n    \n    commit 55e02af351072b2642fb869725314165bbada031\n    \n    for switch, add a check that at least once sync has been run\n    \n    commit fabeff37e5a8494bd3fdd40988dacddacfb79148\n    \n    store the final sync job uuid in the progress entry record\n    \n    commit 1b74103be8d91ab84cb6540df944b1264f27e052\n    \n    store the provision job uuid in the progress entry record\n    \n    commit 381bad3fcfcae52cf3e196fe9909ec372fd05987\n    \n    Cloning job.params is actually fine\n    \n    commit a67585e4cd943697c309d525840c0786d1e6179b\n    \n    use the cnapi migrate endpoint, instead of migrate-receive\n    \n    commit 38cf1d6681c4bfb2f9adf150446eb785036b2c44\n    \n    Pass on do_not_inventory parameter\n    \n    commit 20bda261be25cdd1b7d999e1a3d3bdff05208967\n    \n    Reference, do not clone, vmPaylaod\n    \n    commit fef713bc8b689fa2e19d19df667387790e3ebb57\n    \n    store the owner_uuid in the migration record\n    \n    commit 3b30b8e082946dda62d2e29c5bc4583e1f4e0053\n    \n    for KVM instance provisioning, fix up the disk parameters\n    \n    commit 0346cca749754f67ebeb68f4915bb2c8c6124259\n    \n    implement the migration pause endpoint\n    \n    commit 0680fa7e590802d0aaad2ed4395440a96bf3c450\n    \n    fix server allocation, adjust functions, remove unnecessary code\n    \n    commit c3478c85be322e65f59a6a7458e2624a77471671\n    \n    refactor begin, sync and switch endpoints\n    - implement switch phase\n    \n    commit 6d141c55ed9d2a18d3c07062dfffab10c397f819\n    \n    index the owner_uuid field in moray vms_vm_migrations bucket\n    \n    commit e5d07a51f9516e947d0cd8051e4c780aa025601f\n    \n    Add locality hint\n    \n    commit a8fe206036bbc24bcf3b83d76c37bab98a85212c\n    \n    Add locality hint\n    \n    commit 74e76d4aa8d996773ea68c5ef3182ada5f7b67e2\n    \n    Load package details used in test at runtime\n    \n    commit 5889db68bdaa32c50f2f738812f47e15f0363db6\n    \n    Allow DAPI to designate migration targets\n    \n    commit 109c8d7895542dfffe9411f4f30fe2a287e8725e\n    \n    use trace logging\n    \n    commit 584003a1bd953c1669b7f028b0cd425471aad720\n    \n    move watch api to a different endpoint\n    - update progress/watch event handling\n    - create the initial migration record before hitting workflow\n    \n    commit 0f2cc3d7efdd9402aedd935f3b1602b631397016\n    \n    add tests for migration watch\n    \n    commit 15c55240ea4848f3905201f60266ad058f455d3b\n    \n    migration filter should use \u0027and\u0027\n    \n    commit 7f9cf09858d1cdd519317e4cb844d4f6a5e8e710\n    \n    add ListMigrations endpoint, update record handling, add start of watch api\n    \n    commit 9732e361108402f4e9294e5465a372e52b25232f\n    \n    add missing migration cleanup workflow files\n    \n    commit e2bb11033274222b58a85db65e68774ae1eaf6d7\n    \n    implement most of sync handling, added start of progress/watch handling\n    \n    commit 1cc3a88855b39f14e0a999791876047cc6c5dde7\n    \n    fix migrate workflow location\n    \n    commit f01b030d0064b248b94bc4f9780f57c488355cc4\n    \n    TRITON-897 RFD 34 Triton instance migration"},{"timestamp":1554491434,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554491904,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 7."},{"timestamp":1554491906,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 7:\n\nNew commits:\n    \n    commit 9c7480cc1dbfcfa09563dc87dd79ea4df48239bd\n    \n    bump version"},{"timestamp":1554491939,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554494209,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 7: Code-Review+1 Integration-Approval+1"},{"timestamp":1554743660,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 8."},{"timestamp":1554743662,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 8:\n\nNew commits:\n    \n    commit 04abdc72286480bc35a51f19cb9d3b03265b6ecc\n    \n    add migration docs\n    \n    commit 5a8cd3cb557d09a7a288be2ed8b8bf32f4c84a83\n    \n    bump version\n    \n    commit d132ff26194d4d39b5ad0f0f162d1119d63102f1\n    \n    fix network nic tag lookup for migration\n    \n    commit eba0b14384930601760dd5c565fd756cbf1dbbfc\n    \n    return the migration record from begin, sync, switch actions\n    \n    commit 8e14f941ae68766b22e56196ac474a10b329cf54\n    \n    test lx, docker and kvm migrations\n    \n    commit 34d646737986c559b834fb4a19e53f89cffa232c\n    \n    work harder to extract errors from cnapi tasks\n    \n    commit 60bc532aceb23945109d4480272506e8aff1bdd0\n    \n    deal with fabrics being disabled\n    \n    commit 2f9200ee854fc0d502da3d7e2edb8295246af5ea\n    \n    update copyright dates, removed unused code\n    \n    commit 2d3ad30531b9acfc6c7b23b86afa1f0b470466ab\n    \n    assert arguments, remove unused code\n    \n    commit e6bf4c9ba2b4122e897aeb27349129cd623b3cd2\n    \n    validate optional fields for the migration moray object\n    \n    commit 9d9404b5dcac7b864d4b3e45c67c57fd2dc243b0\n    \n    allow true boolean value for automatic migration\n    \n    commit 431153466dab879a32dd37cb97cad29fc381b0ad\n    \n    add migration abort\n    \n    commit fa1ae21654db124ef559f4f9b4228113036a124c\n    \n    record the job.action, which will flow into the acquireTicket call\n    \n    commit 283d159a3d11123c7010aab414ab1014cf767b5d\n    \n    fix callback when there are no reserved networks\n    \n    commit 14746c31c899a74a91308c84f18ba9582ed42fc0\n    \n    remove testing env variable overrides\n    \n    commit 366aef7d6d814433c13f9d9c286806631248d415\n    \n    allow sync to run from state failed\n    \n    commit e3952bd15ad6174c243461d4f6335068c647e7d3\n    \n    support full (automated) instance migration\n    \n    commit 194ffa04397fb9eaf746cdb5b71faf9601bdc813\n    \n    use \u0027successful\u0027 state\n    \n    commit f99f9cd0c71f384a962737e0c9db2fe6a72666d9\n    \n    try and limit long error messages that contain multiple lines\n    \n    commit 0fafdbacb6927e0a2ac87a8ec431e71a9cdf801c\n    \n    add docker workaround for lofs mounted filesystems\n    \n    commit 657f1d3e3995a5a97ccf0715537949d02cb105d3\n    \n    fix duration_ms progress entry calculation\n    \n    commit b638ecd0ea3d0e9a7a753fcc5fd06cf62353b4dd\n    \n    update watch progress message handling\n    \n    commit a67a40006b252e80f35f886d994ad95d86592c37\n    \n    catch sync error case where a callback could already be fired\n    \n    commit 94308a70f95e1dc7e47e1408fa6c2cf2f8725390\n    \n    add controls for whether a retry of a failed migration is allowed\n    \n    commit 4a17a2fe750a5f11ae9d0c06179b8fad6d69fb92\n    \n    create the duration_ms progress entry when storing migrations\n    \n    commit ac5dae63e16366edf0ae6548fdb9730f74c5dec4\n    \n    migration lookups for a successful migration should use the target server uuid\n    \n    commit c6b39e9a88dc2a11fb752846d93081be94bfddc2\n    \n    add vm param to the setupFilesystem call\n    \n    commit f81a6cf2d32f3cabc851907f98ebd43936e3b2b4\n    \n    ensure migration begin allocates to a different server\n    \n    commit 0e9ad1575e10da0c34e3b48e9203a78bfc2d6791\n    \n    update error handling for the migration watch endpoint\n    \n    commit 0def5c0e1a17f8874351c873923051a627661069\n    \n    clear old progress events when starting a migration action\n    \n    commit 36e73d451fd3d531397f972c56bfe437a43e48e2\n    \n    update pause/stop workflows\n    \n    commit d5c62fb12713159183adf3b8a57a1804f549fc12\n    \n    remove ppid from process details\n    \n    commit e95fea66e30ff676a603c52d804bee7d09aa2d77\n    \n    cleanup workflows should be called for sync or pause actions\n    \n    commit 4d96e93c2e81e4b6487be6d62685a5c22fe00db5\n    \n    allow query against active migrations\n    \n    commit 29474bc15d0720236a1104eaea2118ebb0736a13\n    \n    correct the ppid variable name\n    \n    commit 01dfbaf0d8d06893d9c97087578e537b1761765a\n    \n    pause needs to request migration record in raw format\n    \n    commit 593a10c5ebb913843d9eb762723f8596349b5fd3\n    \n    update workflow timeout values\n    \n    commit 9582c60c3f0d9acf4574567f1d4f706d5c2fe5a1\n    \n    request the migration record in \u0027raw\u0027 format\n    \n    commit 9390c01490b7541318871317c0f5a763b2316da7\n    \n    add a duration_ms to progress events\n    \n    commit 13a63f18570693e10f72fa51bab597d09209a4a8\n    \n    watch should be using the migration state variable, not status\n    \n    commit 979a3e27669d9bd103ca226eae5763fca7ab94a8\n    \n    only query using known migration parameters\n    \n    commit 92b4ee4494596a6b645fd37fb6b7681dbc5f1533\n    \n    tweak formatting\n    \n    commit bbb4cf78fb874237d2cd254d06a370923e6f563e\n    \n    add migration estimate support\n    \n    commit ddcfae4cbee834719097c4e04730bf6e90af830e\n    \n    mark migration success\n    \n    commit 8fc34a48daf1e9a38e8e1d8c8e383dd752bb3cb4\n    \n    for switch, the sync sub-task should be run from record state running\n    \n    commit 6980945918ef8efb3924bfec35d85fdce016b65a\n    \n    the change to the record source_server_uuid should be later in the workflow\n    \n    commit d389022a4b68516fb0d29c8c0ca8da92fdc2eac1\n    \n    watch should use application/x-json-stream content-type in response\n    \n    commit a277615a9cee78d16c63af8704b5e1ed75f8bcad\n    \n    add workaround for bhyve provision regarding cpu_type\n    \n    commit b2a8e26ae581aae3f10f2797e55b084301adfd94\n    \n    remove final sync snapshots on switch success\n    \n    commit 873204eef7f5483079bdd1951e2dcff38b275c50\n    \n    only store provision job uuid in the case of a successful provision\n    \n    commit 98b5ca04882b229f1b0d4b37c2d56e92f89cba5b\n    \n    add test for list migrations after switch is done\n    \n    commit be6ca852082e626368ff5d4a2e346b95fc792056\n    \n    update the migration source_server_uuid when a switch has occurred\n    \n    commit 2fe3d42e0fab13c39deee5692da557b725118c7d\n    \n    Allow migration records to have multiple entries with the same server_uuid.\n    Always return the most recent record when there are multiples.\n    \n    commit 0a0fe02ad5c99e889ee007c069ce99c837bfbd37\n    \n    index created_timestamp on the migration record\n    \n    commit 8299bf865eef8e9dbee11fb291b1e65b458a532e\n    \n    provision workflow - maintain sorted entries for the vm attributes\n    \n    commit c1b69dc81ad01cf45a762af009a89b6c126bfb94\n    \n    switch - add better handling for the progress_history and progress events\n    \n    commit be711e34d9c45a852ec502db16be032abafe8249\n    \n    for pause, use a better function name for get record callback\n    \n    commit 98bd09e4bb4e31320992c3ce0b1907d06682c476\n    \n    do not try and store to the progress record before it exists\n    \n    commit 9f0f45da70f14cb38c85dbda923a464f6cec3449\n    \n    when provisioning with do_not_inventory, do not write the initial moray record\n    \n    commit 36beade55e436256e77915ac788e323428f4625d\n    \n    for switch, add a check that at least once sync has been run\n    \n    commit a60d9670f124f5146cb223a0e57289a638f17839\n    \n    store the final sync job uuid in the progress entry record\n    \n    commit d098fc69c4287e72c99e0984620880106c725aff\n    \n    store the provision job uuid in the progress entry record\n    \n    commit 5851a62c0b2e44ee4fedf29e184138679b17e9af\n    \n    Cloning job.params is actually fine\n    \n    commit fffcc273b9bab2fa1801587c172ac8723c734ccf\n    \n    use the cnapi migrate endpoint, instead of migrate-receive\n    \n    commit 81fa38d2c64c07e1b3a04fd7be4c804cc2d9a433\n    \n    Pass on do_not_inventory parameter\n    \n    commit 5d66859e441197c3978faa92499e7d0edf94a0fb\n    \n    Reference, do not clone, vmPaylaod\n    \n    commit 3d8635548226a9a65725733c367d2217728802df\n    \n    store the owner_uuid in the migration record\n    \n    commit bdf3e8f45ef07842edc19b866254bd134beaefaa\n    \n    for KVM instance provisioning, fix up the disk parameters\n    \n    commit bcb2df37ed4a360005e03d5f0739b28ae30b87a0\n    \n    implement the migration pause endpoint\n    \n    commit 457513702c20a1fd808cafc3bce74aaa99ab42b0\n    \n    fix server allocation, adjust functions, remove unnecessary code\n    \n    commit b757ee93399a315b461dc2eedb9f965095cf54bc\n    \n    refactor begin, sync and switch endpoints\n    - implement switch phase\n    \n    commit 68ee30896bd37c29eec6f8638461de623bae1c7c\n    \n    index the owner_uuid field in moray vms_vm_migrations bucket\n    \n    commit 30c2bc527c6daacb1602f1b4bc0f47c173644b1c\n    \n    Add locality hint\n    \n    commit e41ea77cf2727f05500f8ab69835a479374a360a\n    \n    Add locality hint\n    \n    commit acd01ec0ec26e7d1b34a2cd91b340dccab606249\n    \n    Load package details used in test at runtime\n    \n    commit 41b466fffec87c1672f6eb6e998415a1a95c0b79\n    \n    Allow DAPI to designate migration targets\n    \n    commit a17b96a2f548ff3d79e15f3dbd19d188992972bb\n    \n    use trace logging\n    \n    commit 89ee3cf31a2618c3a496df191cf8fda11c093f48\n    \n    move watch api to a different endpoint\n    - update progress/watch event handling\n    - create the initial migration record before hitting workflow\n    \n    commit 684c061bc256ec05068b8bc5380f91b849fa84ed\n    \n    add tests for migration watch\n    \n    commit c47c14cb6e4c9102352bfe59c65637bd70e13046\n    \n    migration filter should use \u0027and\u0027\n    \n    commit 8d492116d8cf10d9d4a16769fdf5792b8d68194a\n    \n    add ListMigrations endpoint, update record handling, add start of watch api\n    \n    commit 42287e7cc38f51730925829a46ebd64c2619487b\n    \n    add missing migration cleanup workflow files\n    \n    commit 95c20a7cb3818172c790cd6228888b729276d476\n    \n    implement most of sync handling, added start of progress/watch handling\n    \n    commit 274fdcf3b9cff8fb63ee2573c7f0936ef50c5dca\n    \n    fix migrate workflow location\n    \n    commit 494f69dad21663e0774b427ef9bc8b24e31ecfd4\n    \n    TRITON-897 RFD 34 Triton instance migration"},{"timestamp":1554743700,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554824228,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 9."},{"timestamp":1554824229,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 9:\n\nNew commits:\n    \n    commit 2e1c1ebe9527c0ab035532a85f2ace36596dea36\n    \n    use correct migration preload network function"},{"timestamp":1554824270,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554824325,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 10: Patch Set 9 was rebased."},{"timestamp":1554824328,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 10:\n\nNew commits:\n    \n    commit 7c5055c91036dfbc7fd1890e9bf23d93e5237e9a\n    \n    use correct migration preload network function\n    \n    commit ce9407d2d6564f0dcedaedcbfd186002ec25d9c2\n    \n    add migration docs\n    \n    commit bc14333dc06e78bb182e67ca4979896925cf57fd\n    \n    bump version\n    \n    commit 9bbc96f0ba98412570f50f4776244fa0137c2c62\n    \n    fix network nic tag lookup for migration\n    \n    commit ccb7175353a7e85f2d8c3031bd7921e0f976f4d6\n    \n    return the migration record from begin, sync, switch actions\n    \n    commit 88ed6dc6a160bc2b720a7df8691ba04762fa3151\n    \n    test lx, docker and kvm migrations\n    \n    commit d5a7c72a9318da9e1aac877f168cbf4132bc08cf\n    \n    work harder to extract errors from cnapi tasks\n    \n    commit 62aa4482aa8ee8cddb8bd1650a093cd7d0f05da7\n    \n    deal with fabrics being disabled\n    \n    commit 3b14c5197c7b0ee34efdb746386045ec589fbbb6\n    \n    update copyright dates, removed unused code\n    \n    commit 2c1f6d47b00c7d8b6470a6b8873feb7e9406c4b1\n    \n    assert arguments, remove unused code\n    \n    commit 6cea0298d954d797988e3c06ea7a0d96d3d7ac7e\n    \n    validate optional fields for the migration moray object\n    \n    commit 77be0c594bedaca416834287f3fdabeb395a3e79\n    \n    allow true boolean value for automatic migration\n    \n    commit c6bf4200e6544774cdac9d6987906cb92f4cb9b0\n    \n    add migration abort\n    \n    commit 7fff1aa5126311e82f58845608511db28d39aa52\n    \n    record the job.action, which will flow into the acquireTicket call\n    \n    commit 88f79eaf68200e971b0994f3a5849614d7a8406f\n    \n    fix callback when there are no reserved networks\n    \n    commit 793a07c82414fd537cc1727f0bc3b046acc519c1\n    \n    remove testing env variable overrides\n    \n    commit 918fa398cfb7f3965cdbd379b1f69256ef730c1f\n    \n    allow sync to run from state failed\n    \n    commit 506cd88739790acb0fdfb18d5a55388ff67ec05a\n    \n    support full (automated) instance migration\n    \n    commit 59cb28693d4bf335bcf8e3e381a540c68982e1d3\n    \n    use \u0027successful\u0027 state\n    \n    commit 241db0fb1098c80e1597d33fa127bd62f9cbfafb\n    \n    try and limit long error messages that contain multiple lines\n    \n    commit 7103f578d752988ce2d2c25470d6d941e6318850\n    \n    add docker workaround for lofs mounted filesystems\n    \n    commit c555b99e2167ee7277a9cdd79932b9b5001d4f38\n    \n    fix duration_ms progress entry calculation\n    \n    commit d9fb2b382cda91ffa67bdb4ab93ba176a59b7f1c\n    \n    update watch progress message handling\n    \n    commit 955620fbefdc0c71c2f9042d71b224312f1071fa\n    \n    catch sync error case where a callback could already be fired\n    \n    commit dd239df6c1efe62c587107eef4f5d777cbf78025\n    \n    add controls for whether a retry of a failed migration is allowed\n    \n    commit cba984cb04852ac40ba31d307e5b65a97abbc976\n    \n    create the duration_ms progress entry when storing migrations\n    \n    commit e0e0d15b844d5061c037716e787dffaaa076f24d\n    \n    migration lookups for a successful migration should use the target server uuid\n    \n    commit 19910a2bfd6f85511610c5487e9447a0736c3da3\n    \n    add vm param to the setupFilesystem call\n    \n    commit ac84b100482cd66b14ef81c596506bbbce13965e\n    \n    ensure migration begin allocates to a different server\n    \n    commit f4ad33b8a785e257e5f8b06d83da39589760c7b3\n    \n    update error handling for the migration watch endpoint\n    \n    commit 9ea8baef13f8f21dddea199caa45bac8e35fea1f\n    \n    clear old progress events when starting a migration action\n    \n    commit 22ee561d3b25483bb9ae6c5be3f96c9d4266d59e\n    \n    update pause/stop workflows\n    \n    commit 1af41001682b512fd494d4921f718a5a624ebfd9\n    \n    remove ppid from process details\n    \n    commit 4aec6fd9669a78cb9ad07ad902799e7313dcd1ed\n    \n    cleanup workflows should be called for sync or pause actions\n    \n    commit 369c4b83b023ca872c579a44a3a0f71431d92bb2\n    \n    allow query against active migrations\n    \n    commit 96c1823e2a20942e066d4b3d52d5f2a0fc3daf24\n    \n    correct the ppid variable name\n    \n    commit 9dd8b85bab1299cfdd46d591e6f4b3f396e33262\n    \n    pause needs to request migration record in raw format\n    \n    commit f24d64e78cdd12e2ec7c8acfd86c724da4c7b546\n    \n    update workflow timeout values\n    \n    commit 4ddf1d54037ff85d70b3032fd4d9464699e6a521\n    \n    request the migration record in \u0027raw\u0027 format\n    \n    commit 45fdbe6dba3912d409a80192ca4f2bb2ced8b65d\n    \n    add a duration_ms to progress events\n    \n    commit eec8e503eb95dd1ceacae869d5aaacfb83dfa178\n    \n    watch should be using the migration state variable, not status\n    \n    commit e0a065651029802022cc07bb799a4a65a7c7929f\n    \n    only query using known migration parameters\n    \n    commit 5825575c5ca15818c734548fcb86fed9a63a28d3\n    \n    tweak formatting\n    \n    commit eef2fd8e8591087af9b6293ec26c35718dfd0af6\n    \n    add migration estimate support\n    \n    commit b4b215b58d4c4cde301ddf657a6ef239ac3f5103\n    \n    mark migration success\n    \n    commit 0f4c0be814522b121e4309f0cfbfd6c061af4648\n    \n    for switch, the sync sub-task should be run from record state running\n    \n    commit 56b1537bfeccec172e58ea1f455ce2d60691dc0a\n    \n    the change to the record source_server_uuid should be later in the workflow\n    \n    commit a0737e284993d2e1a604f1ee100d5f9df5a23df3\n    \n    watch should use application/x-json-stream content-type in response\n    \n    commit 43222cb62e6d39f8f54230ce78f5628eb427b87b\n    \n    add workaround for bhyve provision regarding cpu_type\n    \n    commit cd0b6706b98847f28f9275c38727a190fcf0b2f2\n    \n    remove final sync snapshots on switch success\n    \n    commit 80203bea9f390cdc7a755c7827a2dbd44bbb3f06\n    \n    only store provision job uuid in the case of a successful provision\n    \n    commit 2436d160773ac2e116d85fbe173ac558dfd80436\n    \n    add test for list migrations after switch is done\n    \n    commit 8c4f100eeda2b29479abde9a486de53f071f6e40\n    \n    update the migration source_server_uuid when a switch has occurred\n    \n    commit dfd89ffff748e4ea6f0ee3693248c7a059acf1e9\n    \n    Allow migration records to have multiple entries with the same server_uuid.\n    Always return the most recent record when there are multiples.\n    \n    commit fbce674a42fe6c3a74cd350688dea4f0080cefa3\n    \n    index created_timestamp on the migration record\n    \n    commit 58e0521bddcc2b1e21e76f4f0a516b4199796a4c\n    \n    provision workflow - maintain sorted entries for the vm attributes\n    \n    commit 2c79d97ae1dc9359763e8265a04c2c4b00cf4098\n    \n    switch - add better handling for the progress_history and progress events\n    \n    commit db451a6866d889b8a97ed9977ef12b5ffcbc6281\n    \n    for pause, use a better function name for get record callback\n    \n    commit e58f0fbc472be50af815b4db22b3a011d5735321\n    \n    do not try and store to the progress record before it exists\n    \n    commit 804f5d466378e97632a7cea4c4ee11f3ec29dad9\n    \n    when provisioning with do_not_inventory, do not write the initial moray record\n    \n    commit 2ec2570903869b2651c967ed93095d60ce557ff3\n    \n    for switch, add a check that at least once sync has been run\n    \n    commit 0b9a4766983267c4e1842f4b96377b907a91828e\n    \n    store the final sync job uuid in the progress entry record\n    \n    commit 8a928828211d47b933383fecde7aede9cd7956d3\n    \n    store the provision job uuid in the progress entry record\n    \n    commit 1f03f2866dbc9f231c7ee2137a9a06a0ce5ee11c\n    \n    Cloning job.params is actually fine\n    \n    commit 03ebb18673e08f496384d7cc5011ce1628d74f1d\n    \n    use the cnapi migrate endpoint, instead of migrate-receive\n    \n    commit d82812cd5c1d85c8662dadf49e1a034ccc5b9071\n    \n    Pass on do_not_inventory parameter\n    \n    commit a48601ed50b3c18165f123f6c1bc3e385e55f21f\n    \n    Reference, do not clone, vmPaylaod\n    \n    commit 81e00fc6d2401af309eebeffa69f37d3188fa4e5\n    \n    store the owner_uuid in the migration record\n    \n    commit 3014a79c62babb6257301f2fa6c1cce2467982bc\n    \n    for KVM instance provisioning, fix up the disk parameters\n    \n    commit b0f86df01fc70c7bc501a62cc0eac28ed3f01244\n    \n    implement the migration pause endpoint\n    \n    commit 29d1484bcda36bc650ed930986e41410d7fd0b57\n    \n    fix server allocation, adjust functions, remove unnecessary code\n    \n    commit 616e367945e1dfd5a89c1863797629743a4cc278\n    \n    refactor begin, sync and switch endpoints\n    - implement switch phase\n    \n    commit 495e05e0127ea09137156c20bfaae058bca7dff7\n    \n    index the owner_uuid field in moray vms_vm_migrations bucket\n    \n    commit 690b19f87a13a36a1d2edef503e6fc91b3957c05\n    \n    Add locality hint\n    \n    commit 4b0c3bf594d7a098273d5f2911dad7740d568de6\n    \n    Add locality hint\n    \n    commit c0d7dd4d2bd5827fb0307e675f6cbeb85c8cb5d2\n    \n    Load package details used in test at runtime\n    \n    commit 3588374d6eef96d34d99adccc2e1212ac4d0753c\n    \n    Allow DAPI to designate migration targets\n    \n    commit 31ee7164b2aeec160a4f173224fe023bddf98fff\n    \n    use trace logging\n    \n    commit 0aeeaabf7e8d62ef606d2db3a3a1990c19fe88d5\n    \n    move watch api to a different endpoint\n    - update progress/watch event handling\n    - create the initial migration record before hitting workflow\n    \n    commit 63501517ea93278b9fa46bbd775c3654fbf7c136\n    \n    add tests for migration watch\n    \n    commit 23d8c3ccf4c6dbdf0f4628897b67cba19d39b80e\n    \n    migration filter should use \u0027and\u0027\n    \n    commit 0ba890dbb86915a95fc74da28957738054154981\n    \n    add ListMigrations endpoint, update record handling, add start of watch api\n    \n    commit 46b1e06f6a46963a00faa329d048b591887e078c\n    \n    add missing migration cleanup workflow files\n    \n    commit 997fcc8398304c8db38adbb7b14ddf88f9ed8389\n    \n    implement most of sync handling, added start of progress/watch handling\n    \n    commit c6058b59282590e0741335f412564ea9039f066e\n    \n    fix migrate workflow location\n    \n    commit 40a9c34ad1658ea19482a391c5b9994b3b060c65\n    \n    TRITON-897 RFD 34 Triton instance migration"},{"timestamp":1554824362,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10:\n\n\"make check\" passed ok"},{"timestamp":1554828427,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 11."},{"timestamp":1554828429,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 11:\n\nNew commits:\n    \n    commit 8cdd544e83d0167f69f313bf558710b7b639e862\n    \n    add link to rfd 34 for instance migration"},{"timestamp":1554828463,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554835268,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 11:\n\n(1 comment)"},{"timestamp":1554836508,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 11:\n\n(1 comment)"},{"timestamp":1554853604,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 12."},{"timestamp":1554853606,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 12:\n\nNew commits:\n    \n    commit 04101e0d7cf23edc98422a85e60d564bd2dc9688\n    \n    update docs for CR comments"},{"timestamp":1554853641,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 12: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554999810,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 12: Code-Review+1 Integration-Approval+1"},{"timestamp":1555426226,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 13: Commit message was updated."},{"timestamp":1555426240,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Todd Whiteman"}],"currentPatchSet":{"number":"13","revision":"e493a3b700cda913c428e778d87ec7cc0328703c","parents":["a5642827bac9499a988157d6e1bb539adf5911e5"],"ref":"refs/changes/31/5731/13","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1555426226,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554853641,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554999810,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554999810,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"SUBM","value":"1","grantedOn":1555426240,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":304,"deletions":0},{"file":"lib/apis/cnapi.js","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"lib/apis/moray.js","type":"MODIFIED","insertions":263,"deletions":-4},{"file":"lib/apis/wfapi.js","type":"MODIFIED","insertions":56,"deletions":0},{"file":"lib/common/validation.js","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":47,"deletions":-3},{"file":"lib/moray/moray-buckets-config.js","type":"MODIFIED","insertions":22,"deletions":-2},{"file":"lib/vm-migration/migrate.js","type":"ADDED","insertions":1010,"deletions":0},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":267,"deletions":-2},{"file":"lib/workflows/migrate-abort.js","type":"ADDED","insertions":78,"deletions":0},{"file":"lib/workflows/migrate-begin.js","type":"ADDED","insertions":69,"deletions":0},{"file":"lib/workflows/migrate-pause.js","type":"ADDED","insertions":63,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"ADDED","insertions":122,"deletions":0},{"file":"lib/workflows/migrate-sync.js","type":"ADDED","insertions":76,"deletions":0},{"file":"lib/workflows/provision.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/workflows/vm-migration/abort.js","type":"ADDED","insertions":127,"deletions":0},{"file":"lib/workflows/vm-migration/begin.js","type":"ADDED","insertions":354,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_source.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_target.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"ADDED","insertions":690,"deletions":0},{"file":"lib/workflows/vm-migration/pause.js","type":"ADDED","insertions":142,"deletions":0},{"file":"lib/workflows/vm-migration/switch.js","type":"ADDED","insertions":963,"deletions":0},{"file":"lib/workflows/vm-migration/sync.js","type":"ADDED","insertions":468,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"sapi_manifests/vmapi/template","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"test/common.js","type":"MODIFIED","insertions":78,"deletions":-1},{"file":"test/lib/migration.js","type":"ADDED","insertions":1350,"deletions":0},{"file":"test/runtests","type":"MODIFIED","insertions":9,"deletions":0},{"file":"test/vms.migrate.test.js","type":"ADDED","insertions":257,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":7295,"sizeDeletions":-24},"patchSets":[{"number":"1","revision":"007e0e2cda2b5fe2dd0e9d8446b439bb5d505a89","parents":["6ae243d0e15f1d42f1d5c3b63a61cea162bec336"],"ref":"refs/changes/31/5731/1","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1551981129,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1552496919,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/apis/cnapi.js","line":8,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"2019"},{"file":"lib/apis/cnapi.js","line":8,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/apis/moray.js","line":8,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"2019"},{"file":"lib/apis/moray.js","line":8,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/apis/moray.js","line":1740,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Do these need to be populated?"},{"file":"lib/apis/moray.js","line":1740,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Yes, the optional ones should be populated. The required fields are covered by moray (since they are indexed)."},{"file":"lib/apis/wfapi.js","line":8,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"2019"},{"file":"lib/apis/wfapi.js","line":8,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/moray/moray-buckets-config.js","line":8,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"2019"},{"file":"lib/moray/moray-buckets-config.js","line":8,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/vm-migration/migrate.js","line":8,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"2019"},{"file":"lib/vm-migration/migrate.js","line":8,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/vm-migration/migrate.js","line":43,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Assert ctx members we use"},{"file":"lib/vm-migration/migrate.js","line":43,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/vm-migration/migrate.js","line":507,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Assert req/params used"},{"file":"lib/vm-migration/migrate.js","line":507,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/vm-migration/migrate.js","line":591,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Is this worth keeping?"},{"file":"lib/vm-migration/migrate.js","line":591,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Gone."},{"file":"lib/workflows/migrate-abort.js","line":44,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Should we keep this?"},{"file":"lib/workflows/migrate-abort.js","line":44,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Nope, gone - it was replaced with the ensureTargetVmHasDni function above it."},{"file":"lib/workflows/migrate-pause.js","line":8,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"2019"},{"file":"lib/workflows/migrate-pause.js","line":8,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/workflows/migrate-switch.js","line":8,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"2019"},{"file":"lib/workflows/migrate-switch.js","line":8,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/workflows/vm-migration/begin.js","line":8,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"2019"},{"file":"lib/workflows/vm-migration/begin.js","line":8,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/workflows/vm-migration/switch.js","line":8,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"2019"},{"file":"lib/workflows/vm-migration/switch.js","line":8,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/workflows/vm-migration/sync.js","line":8,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"2019"},{"file":"lib/workflows/vm-migration/sync.js","line":8,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"test/common.js","line":8,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"2019"},{"file":"test/common.js","line":8,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"test/common.js","line":279,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"uuid"},{"file":"test/common.js","line":279,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/apis/cnapi.js","type":"MODIFIED","insertions":30,"deletions":0},{"file":"lib/apis/moray.js","type":"MODIFIED","insertions":269,"deletions":-3},{"file":"lib/apis/wfapi.js","type":"MODIFIED","insertions":57,"deletions":0},{"file":"lib/common/validation.js","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":43,"deletions":-2},{"file":"lib/moray/moray-buckets-config.js","type":"MODIFIED","insertions":22,"deletions":-2},{"file":"lib/vm-migration/migrate.js","type":"ADDED","insertions":969,"deletions":0},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":221,"deletions":-2},{"file":"lib/workflows/migrate-abort.js","type":"ADDED","insertions":81,"deletions":0},{"file":"lib/workflows/migrate-begin.js","type":"ADDED","insertions":71,"deletions":0},{"file":"lib/workflows/migrate-pause.js","type":"ADDED","insertions":63,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"ADDED","insertions":122,"deletions":0},{"file":"lib/workflows/migrate-sync.js","type":"ADDED","insertions":76,"deletions":0},{"file":"lib/workflows/provision.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/workflows/vm-migration/abort.js","type":"ADDED","insertions":127,"deletions":0},{"file":"lib/workflows/vm-migration/begin.js","type":"ADDED","insertions":324,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_source.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_target.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"ADDED","insertions":690,"deletions":0},{"file":"lib/workflows/vm-migration/pause.js","type":"ADDED","insertions":142,"deletions":0},{"file":"lib/workflows/vm-migration/switch.js","type":"ADDED","insertions":963,"deletions":0},{"file":"lib/workflows/vm-migration/sync.js","type":"ADDED","insertions":468,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"sapi_manifests/vmapi/template","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"test/common.js","type":"MODIFIED","insertions":78,"deletions":-1},{"file":"test/vms.migrate.test.js","type":"ADDED","insertions":1388,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":6652,"sizeDeletions":-20},{"number":"2","revision":"152cfc85c23a46047e5882d6ca716dae146a20bf","parents":["2478307eda38dfd6a7fd9e72a496470674e8bd15"],"ref":"refs/changes/31/5731/2","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1553618809,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553618848,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553816392,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553816392,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/apis/cnapi.js","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"lib/apis/moray.js","type":"MODIFIED","insertions":263,"deletions":-4},{"file":"lib/apis/wfapi.js","type":"MODIFIED","insertions":58,"deletions":-1},{"file":"lib/common/validation.js","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":43,"deletions":-2},{"file":"lib/moray/moray-buckets-config.js","type":"MODIFIED","insertions":22,"deletions":-2},{"file":"lib/vm-migration/migrate.js","type":"ADDED","insertions":981,"deletions":0},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":221,"deletions":-2},{"file":"lib/workflows/migrate-abort.js","type":"ADDED","insertions":78,"deletions":0},{"file":"lib/workflows/migrate-begin.js","type":"ADDED","insertions":71,"deletions":0},{"file":"lib/workflows/migrate-pause.js","type":"ADDED","insertions":63,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"ADDED","insertions":122,"deletions":0},{"file":"lib/workflows/migrate-sync.js","type":"ADDED","insertions":76,"deletions":0},{"file":"lib/workflows/provision.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/workflows/vm-migration/abort.js","type":"ADDED","insertions":127,"deletions":0},{"file":"lib/workflows/vm-migration/begin.js","type":"ADDED","insertions":324,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_source.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_target.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"ADDED","insertions":690,"deletions":0},{"file":"lib/workflows/vm-migration/pause.js","type":"ADDED","insertions":142,"deletions":0},{"file":"lib/workflows/vm-migration/switch.js","type":"ADDED","insertions":963,"deletions":0},{"file":"lib/workflows/vm-migration/sync.js","type":"ADDED","insertions":468,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"sapi_manifests/vmapi/template","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"test/common.js","type":"MODIFIED","insertions":78,"deletions":-1},{"file":"test/vms.migrate.test.js","type":"ADDED","insertions":1388,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":6657,"sizeDeletions":-23},{"number":"3","revision":"65dbc187b575ca079daefd9f1b9adf98ec7f913b","parents":["2478307eda38dfd6a7fd9e72a496470674e8bd15"],"ref":"refs/changes/31/5731/3","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1554221837,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554221874,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/apis/cnapi.js","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"lib/apis/moray.js","type":"MODIFIED","insertions":263,"deletions":-4},{"file":"lib/apis/wfapi.js","type":"MODIFIED","insertions":58,"deletions":-1},{"file":"lib/common/validation.js","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":43,"deletions":-2},{"file":"lib/moray/moray-buckets-config.js","type":"MODIFIED","insertions":22,"deletions":-2},{"file":"lib/vm-migration/migrate.js","type":"ADDED","insertions":993,"deletions":0},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":221,"deletions":-2},{"file":"lib/workflows/migrate-abort.js","type":"ADDED","insertions":78,"deletions":0},{"file":"lib/workflows/migrate-begin.js","type":"ADDED","insertions":71,"deletions":0},{"file":"lib/workflows/migrate-pause.js","type":"ADDED","insertions":63,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"ADDED","insertions":122,"deletions":0},{"file":"lib/workflows/migrate-sync.js","type":"ADDED","insertions":76,"deletions":0},{"file":"lib/workflows/provision.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/workflows/vm-migration/abort.js","type":"ADDED","insertions":127,"deletions":0},{"file":"lib/workflows/vm-migration/begin.js","type":"ADDED","insertions":324,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_source.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_target.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"ADDED","insertions":690,"deletions":0},{"file":"lib/workflows/vm-migration/pause.js","type":"ADDED","insertions":142,"deletions":0},{"file":"lib/workflows/vm-migration/switch.js","type":"ADDED","insertions":963,"deletions":0},{"file":"lib/workflows/vm-migration/sync.js","type":"ADDED","insertions":468,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"sapi_manifests/vmapi/template","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"test/common.js","type":"MODIFIED","insertions":78,"deletions":-1},{"file":"test/lib/migration.js","type":"ADDED","insertions":1315,"deletions":0},{"file":"test/runtests","type":"MODIFIED","insertions":9,"deletions":0},{"file":"test/vms.migrate.test.js","type":"ADDED","insertions":257,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":6862,"sizeDeletions":-23},{"number":"4","revision":"50436fd12a16ceca3a122a662d2a22a43df0dd30","parents":["84994f40e0a930991a0175f8e7291d04209fe552"],"ref":"refs/changes/31/5731/4","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1554222620,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554222666,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554230501,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554230501,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/apis/cnapi.js","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"lib/apis/moray.js","type":"MODIFIED","insertions":263,"deletions":-4},{"file":"lib/apis/wfapi.js","type":"MODIFIED","insertions":58,"deletions":-1},{"file":"lib/common/validation.js","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":43,"deletions":-2},{"file":"lib/moray/moray-buckets-config.js","type":"MODIFIED","insertions":22,"deletions":-2},{"file":"lib/vm-migration/migrate.js","type":"ADDED","insertions":993,"deletions":0},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":221,"deletions":-2},{"file":"lib/workflows/migrate-abort.js","type":"ADDED","insertions":78,"deletions":0},{"file":"lib/workflows/migrate-begin.js","type":"ADDED","insertions":71,"deletions":0},{"file":"lib/workflows/migrate-pause.js","type":"ADDED","insertions":63,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"ADDED","insertions":122,"deletions":0},{"file":"lib/workflows/migrate-sync.js","type":"ADDED","insertions":76,"deletions":0},{"file":"lib/workflows/provision.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/workflows/vm-migration/abort.js","type":"ADDED","insertions":127,"deletions":0},{"file":"lib/workflows/vm-migration/begin.js","type":"ADDED","insertions":324,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_source.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_target.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"ADDED","insertions":690,"deletions":0},{"file":"lib/workflows/vm-migration/pause.js","type":"ADDED","insertions":142,"deletions":0},{"file":"lib/workflows/vm-migration/switch.js","type":"ADDED","insertions":963,"deletions":0},{"file":"lib/workflows/vm-migration/sync.js","type":"ADDED","insertions":468,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"sapi_manifests/vmapi/template","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"test/common.js","type":"MODIFIED","insertions":78,"deletions":-1},{"file":"test/lib/migration.js","type":"ADDED","insertions":1315,"deletions":0},{"file":"test/runtests","type":"MODIFIED","insertions":9,"deletions":0},{"file":"test/vms.migrate.test.js","type":"ADDED","insertions":257,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":6862,"sizeDeletions":-23},{"number":"5","revision":"c879b69a07cd9bef0d1b2bd2e63287768349df8e","parents":["84994f40e0a930991a0175f8e7291d04209fe552"],"ref":"refs/changes/31/5731/5","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1554239613,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554239649,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/apis/cnapi.js","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"lib/apis/moray.js","type":"MODIFIED","insertions":263,"deletions":-4},{"file":"lib/apis/wfapi.js","type":"MODIFIED","insertions":58,"deletions":-1},{"file":"lib/common/validation.js","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":43,"deletions":-2},{"file":"lib/moray/moray-buckets-config.js","type":"MODIFIED","insertions":22,"deletions":-2},{"file":"lib/vm-migration/migrate.js","type":"ADDED","insertions":1003,"deletions":0},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":221,"deletions":-2},{"file":"lib/workflows/migrate-abort.js","type":"ADDED","insertions":78,"deletions":0},{"file":"lib/workflows/migrate-begin.js","type":"ADDED","insertions":71,"deletions":0},{"file":"lib/workflows/migrate-pause.js","type":"ADDED","insertions":63,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"ADDED","insertions":122,"deletions":0},{"file":"lib/workflows/migrate-sync.js","type":"ADDED","insertions":76,"deletions":0},{"file":"lib/workflows/provision.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/workflows/vm-migration/abort.js","type":"ADDED","insertions":127,"deletions":0},{"file":"lib/workflows/vm-migration/begin.js","type":"ADDED","insertions":324,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_source.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_target.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"ADDED","insertions":690,"deletions":0},{"file":"lib/workflows/vm-migration/pause.js","type":"ADDED","insertions":142,"deletions":0},{"file":"lib/workflows/vm-migration/switch.js","type":"ADDED","insertions":963,"deletions":0},{"file":"lib/workflows/vm-migration/sync.js","type":"ADDED","insertions":468,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"sapi_manifests/vmapi/template","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"test/common.js","type":"MODIFIED","insertions":78,"deletions":-1},{"file":"test/lib/migration.js","type":"ADDED","insertions":1350,"deletions":0},{"file":"test/runtests","type":"MODIFIED","insertions":9,"deletions":0},{"file":"test/vms.migrate.test.js","type":"ADDED","insertions":257,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":6907,"sizeDeletions":-23},{"number":"6","revision":"63bab671cdd917279fdeeae40c3dedec23e684f8","parents":["3b6e1f86b68649f34ffd87bc289235de48310d93"],"ref":"refs/changes/31/5731/6","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1554491398,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554491434,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/apis/cnapi.js","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"lib/apis/moray.js","type":"MODIFIED","insertions":263,"deletions":-4},{"file":"lib/apis/wfapi.js","type":"MODIFIED","insertions":56,"deletions":0},{"file":"lib/common/validation.js","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":47,"deletions":-3},{"file":"lib/moray/moray-buckets-config.js","type":"MODIFIED","insertions":22,"deletions":-2},{"file":"lib/vm-migration/migrate.js","type":"ADDED","insertions":1002,"deletions":0},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":267,"deletions":-2},{"file":"lib/workflows/migrate-abort.js","type":"ADDED","insertions":78,"deletions":0},{"file":"lib/workflows/migrate-begin.js","type":"ADDED","insertions":69,"deletions":0},{"file":"lib/workflows/migrate-pause.js","type":"ADDED","insertions":63,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"ADDED","insertions":122,"deletions":0},{"file":"lib/workflows/migrate-sync.js","type":"ADDED","insertions":76,"deletions":0},{"file":"lib/workflows/provision.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/workflows/vm-migration/abort.js","type":"ADDED","insertions":127,"deletions":0},{"file":"lib/workflows/vm-migration/begin.js","type":"ADDED","insertions":354,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_source.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_target.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"ADDED","insertions":690,"deletions":0},{"file":"lib/workflows/vm-migration/pause.js","type":"ADDED","insertions":142,"deletions":0},{"file":"lib/workflows/vm-migration/switch.js","type":"ADDED","insertions":963,"deletions":0},{"file":"lib/workflows/vm-migration/sync.js","type":"ADDED","insertions":468,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"sapi_manifests/vmapi/template","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"test/common.js","type":"MODIFIED","insertions":78,"deletions":-1},{"file":"test/lib/migration.js","type":"ADDED","insertions":1350,"deletions":0},{"file":"test/runtests","type":"MODIFIED","insertions":9,"deletions":0},{"file":"test/vms.migrate.test.js","type":"ADDED","insertions":257,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":6982,"sizeDeletions":-23},{"number":"7","revision":"4efea9784b6068745f2c0fd57cfd3a6de2ee7943","parents":["3b6e1f86b68649f34ffd87bc289235de48310d93"],"ref":"refs/changes/31/5731/7","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1554491904,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554491939,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554494209,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554494209,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/apis/cnapi.js","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"lib/apis/moray.js","type":"MODIFIED","insertions":263,"deletions":-4},{"file":"lib/apis/wfapi.js","type":"MODIFIED","insertions":56,"deletions":0},{"file":"lib/common/validation.js","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":47,"deletions":-3},{"file":"lib/moray/moray-buckets-config.js","type":"MODIFIED","insertions":22,"deletions":-2},{"file":"lib/vm-migration/migrate.js","type":"ADDED","insertions":1002,"deletions":0},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":267,"deletions":-2},{"file":"lib/workflows/migrate-abort.js","type":"ADDED","insertions":78,"deletions":0},{"file":"lib/workflows/migrate-begin.js","type":"ADDED","insertions":69,"deletions":0},{"file":"lib/workflows/migrate-pause.js","type":"ADDED","insertions":63,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"ADDED","insertions":122,"deletions":0},{"file":"lib/workflows/migrate-sync.js","type":"ADDED","insertions":76,"deletions":0},{"file":"lib/workflows/provision.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/workflows/vm-migration/abort.js","type":"ADDED","insertions":127,"deletions":0},{"file":"lib/workflows/vm-migration/begin.js","type":"ADDED","insertions":354,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_source.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_target.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"ADDED","insertions":690,"deletions":0},{"file":"lib/workflows/vm-migration/pause.js","type":"ADDED","insertions":142,"deletions":0},{"file":"lib/workflows/vm-migration/switch.js","type":"ADDED","insertions":963,"deletions":0},{"file":"lib/workflows/vm-migration/sync.js","type":"ADDED","insertions":468,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"sapi_manifests/vmapi/template","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"test/common.js","type":"MODIFIED","insertions":78,"deletions":-1},{"file":"test/lib/migration.js","type":"ADDED","insertions":1350,"deletions":0},{"file":"test/runtests","type":"MODIFIED","insertions":9,"deletions":0},{"file":"test/vms.migrate.test.js","type":"ADDED","insertions":257,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":6983,"sizeDeletions":-24},{"number":"8","revision":"c88a4f4be31116c1f96b3997f7796ff9af892308","parents":["9d606dce462fc2f483c1009ee1c6a0957aabab93"],"ref":"refs/changes/31/5731/8","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1554743660,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554743700,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":302,"deletions":0},{"file":"lib/apis/cnapi.js","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"lib/apis/moray.js","type":"MODIFIED","insertions":263,"deletions":-4},{"file":"lib/apis/wfapi.js","type":"MODIFIED","insertions":56,"deletions":0},{"file":"lib/common/validation.js","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":47,"deletions":-3},{"file":"lib/moray/moray-buckets-config.js","type":"MODIFIED","insertions":22,"deletions":-2},{"file":"lib/vm-migration/migrate.js","type":"ADDED","insertions":1002,"deletions":0},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":267,"deletions":-2},{"file":"lib/workflows/migrate-abort.js","type":"ADDED","insertions":78,"deletions":0},{"file":"lib/workflows/migrate-begin.js","type":"ADDED","insertions":69,"deletions":0},{"file":"lib/workflows/migrate-pause.js","type":"ADDED","insertions":63,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"ADDED","insertions":122,"deletions":0},{"file":"lib/workflows/migrate-sync.js","type":"ADDED","insertions":76,"deletions":0},{"file":"lib/workflows/provision.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/workflows/vm-migration/abort.js","type":"ADDED","insertions":127,"deletions":0},{"file":"lib/workflows/vm-migration/begin.js","type":"ADDED","insertions":354,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_source.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_target.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"ADDED","insertions":690,"deletions":0},{"file":"lib/workflows/vm-migration/pause.js","type":"ADDED","insertions":142,"deletions":0},{"file":"lib/workflows/vm-migration/switch.js","type":"ADDED","insertions":963,"deletions":0},{"file":"lib/workflows/vm-migration/sync.js","type":"ADDED","insertions":468,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"sapi_manifests/vmapi/template","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"test/common.js","type":"MODIFIED","insertions":78,"deletions":-1},{"file":"test/lib/migration.js","type":"ADDED","insertions":1350,"deletions":0},{"file":"test/runtests","type":"MODIFIED","insertions":9,"deletions":0},{"file":"test/vms.migrate.test.js","type":"ADDED","insertions":257,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":7285,"sizeDeletions":-24},{"number":"9","revision":"3e4040b1e717d5cc2e180d2b01a4606e03a32c39","parents":["9d606dce462fc2f483c1009ee1c6a0957aabab93"],"ref":"refs/changes/31/5731/9","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1554824228,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554824270,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":302,"deletions":0},{"file":"lib/apis/cnapi.js","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"lib/apis/moray.js","type":"MODIFIED","insertions":263,"deletions":-4},{"file":"lib/apis/wfapi.js","type":"MODIFIED","insertions":56,"deletions":0},{"file":"lib/common/validation.js","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":47,"deletions":-3},{"file":"lib/moray/moray-buckets-config.js","type":"MODIFIED","insertions":22,"deletions":-2},{"file":"lib/vm-migration/migrate.js","type":"ADDED","insertions":1010,"deletions":0},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":267,"deletions":-2},{"file":"lib/workflows/migrate-abort.js","type":"ADDED","insertions":78,"deletions":0},{"file":"lib/workflows/migrate-begin.js","type":"ADDED","insertions":69,"deletions":0},{"file":"lib/workflows/migrate-pause.js","type":"ADDED","insertions":63,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"ADDED","insertions":122,"deletions":0},{"file":"lib/workflows/migrate-sync.js","type":"ADDED","insertions":76,"deletions":0},{"file":"lib/workflows/provision.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/workflows/vm-migration/abort.js","type":"ADDED","insertions":127,"deletions":0},{"file":"lib/workflows/vm-migration/begin.js","type":"ADDED","insertions":354,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_source.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_target.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"ADDED","insertions":690,"deletions":0},{"file":"lib/workflows/vm-migration/pause.js","type":"ADDED","insertions":142,"deletions":0},{"file":"lib/workflows/vm-migration/switch.js","type":"ADDED","insertions":963,"deletions":0},{"file":"lib/workflows/vm-migration/sync.js","type":"ADDED","insertions":468,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"sapi_manifests/vmapi/template","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"test/common.js","type":"MODIFIED","insertions":78,"deletions":-1},{"file":"test/lib/migration.js","type":"ADDED","insertions":1350,"deletions":0},{"file":"test/runtests","type":"MODIFIED","insertions":9,"deletions":0},{"file":"test/vms.migrate.test.js","type":"ADDED","insertions":257,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":7293,"sizeDeletions":-24},{"number":"10","revision":"c0720868ed7e5aa2e4095a5c31135bb428635132","parents":["a5642827bac9499a988157d6e1bb539adf5911e5"],"ref":"refs/changes/31/5731/10","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1554824325,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554824270,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":302,"deletions":0},{"file":"lib/apis/cnapi.js","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"lib/apis/moray.js","type":"MODIFIED","insertions":263,"deletions":-4},{"file":"lib/apis/wfapi.js","type":"MODIFIED","insertions":56,"deletions":0},{"file":"lib/common/validation.js","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":47,"deletions":-3},{"file":"lib/moray/moray-buckets-config.js","type":"MODIFIED","insertions":22,"deletions":-2},{"file":"lib/vm-migration/migrate.js","type":"ADDED","insertions":1010,"deletions":0},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":267,"deletions":-2},{"file":"lib/workflows/migrate-abort.js","type":"ADDED","insertions":78,"deletions":0},{"file":"lib/workflows/migrate-begin.js","type":"ADDED","insertions":69,"deletions":0},{"file":"lib/workflows/migrate-pause.js","type":"ADDED","insertions":63,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"ADDED","insertions":122,"deletions":0},{"file":"lib/workflows/migrate-sync.js","type":"ADDED","insertions":76,"deletions":0},{"file":"lib/workflows/provision.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/workflows/vm-migration/abort.js","type":"ADDED","insertions":127,"deletions":0},{"file":"lib/workflows/vm-migration/begin.js","type":"ADDED","insertions":354,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_source.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_target.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"ADDED","insertions":690,"deletions":0},{"file":"lib/workflows/vm-migration/pause.js","type":"ADDED","insertions":142,"deletions":0},{"file":"lib/workflows/vm-migration/switch.js","type":"ADDED","insertions":963,"deletions":0},{"file":"lib/workflows/vm-migration/sync.js","type":"ADDED","insertions":468,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"sapi_manifests/vmapi/template","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"test/common.js","type":"MODIFIED","insertions":78,"deletions":-1},{"file":"test/lib/migration.js","type":"ADDED","insertions":1350,"deletions":0},{"file":"test/runtests","type":"MODIFIED","insertions":9,"deletions":0},{"file":"test/vms.migrate.test.js","type":"ADDED","insertions":257,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":7293,"sizeDeletions":-24},{"number":"11","revision":"32fcfcd54f91c6fe7c0be029e0b60340a581ab5f","parents":["a5642827bac9499a988157d6e1bb539adf5911e5"],"ref":"refs/changes/31/5731/11","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1554828427,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554828463,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"docs/index.md","line":2294,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Missing a /"},{"file":"docs/index.md","line":2349,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"These should be numbers (not a strings) right?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":304,"deletions":0},{"file":"lib/apis/cnapi.js","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"lib/apis/moray.js","type":"MODIFIED","insertions":263,"deletions":-4},{"file":"lib/apis/wfapi.js","type":"MODIFIED","insertions":56,"deletions":0},{"file":"lib/common/validation.js","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":47,"deletions":-3},{"file":"lib/moray/moray-buckets-config.js","type":"MODIFIED","insertions":22,"deletions":-2},{"file":"lib/vm-migration/migrate.js","type":"ADDED","insertions":1010,"deletions":0},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":267,"deletions":-2},{"file":"lib/workflows/migrate-abort.js","type":"ADDED","insertions":78,"deletions":0},{"file":"lib/workflows/migrate-begin.js","type":"ADDED","insertions":69,"deletions":0},{"file":"lib/workflows/migrate-pause.js","type":"ADDED","insertions":63,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"ADDED","insertions":122,"deletions":0},{"file":"lib/workflows/migrate-sync.js","type":"ADDED","insertions":76,"deletions":0},{"file":"lib/workflows/provision.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/workflows/vm-migration/abort.js","type":"ADDED","insertions":127,"deletions":0},{"file":"lib/workflows/vm-migration/begin.js","type":"ADDED","insertions":354,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_source.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_target.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"ADDED","insertions":690,"deletions":0},{"file":"lib/workflows/vm-migration/pause.js","type":"ADDED","insertions":142,"deletions":0},{"file":"lib/workflows/vm-migration/switch.js","type":"ADDED","insertions":963,"deletions":0},{"file":"lib/workflows/vm-migration/sync.js","type":"ADDED","insertions":468,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"sapi_manifests/vmapi/template","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"test/common.js","type":"MODIFIED","insertions":78,"deletions":-1},{"file":"test/lib/migration.js","type":"ADDED","insertions":1350,"deletions":0},{"file":"test/runtests","type":"MODIFIED","insertions":9,"deletions":0},{"file":"test/vms.migrate.test.js","type":"ADDED","insertions":257,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":7295,"sizeDeletions":-24},{"number":"12","revision":"7334f8bbb41c204c5971973595a28b9a24a4c3a8","parents":["a5642827bac9499a988157d6e1bb539adf5911e5"],"ref":"refs/changes/31/5731/12","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1554853604,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554853641,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554999810,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554999810,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":304,"deletions":0},{"file":"lib/apis/cnapi.js","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"lib/apis/moray.js","type":"MODIFIED","insertions":263,"deletions":-4},{"file":"lib/apis/wfapi.js","type":"MODIFIED","insertions":56,"deletions":0},{"file":"lib/common/validation.js","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":47,"deletions":-3},{"file":"lib/moray/moray-buckets-config.js","type":"MODIFIED","insertions":22,"deletions":-2},{"file":"lib/vm-migration/migrate.js","type":"ADDED","insertions":1010,"deletions":0},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":267,"deletions":-2},{"file":"lib/workflows/migrate-abort.js","type":"ADDED","insertions":78,"deletions":0},{"file":"lib/workflows/migrate-begin.js","type":"ADDED","insertions":69,"deletions":0},{"file":"lib/workflows/migrate-pause.js","type":"ADDED","insertions":63,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"ADDED","insertions":122,"deletions":0},{"file":"lib/workflows/migrate-sync.js","type":"ADDED","insertions":76,"deletions":0},{"file":"lib/workflows/provision.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/workflows/vm-migration/abort.js","type":"ADDED","insertions":127,"deletions":0},{"file":"lib/workflows/vm-migration/begin.js","type":"ADDED","insertions":354,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_source.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_target.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"ADDED","insertions":690,"deletions":0},{"file":"lib/workflows/vm-migration/pause.js","type":"ADDED","insertions":142,"deletions":0},{"file":"lib/workflows/vm-migration/switch.js","type":"ADDED","insertions":963,"deletions":0},{"file":"lib/workflows/vm-migration/sync.js","type":"ADDED","insertions":468,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"sapi_manifests/vmapi/template","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"test/common.js","type":"MODIFIED","insertions":78,"deletions":-1},{"file":"test/lib/migration.js","type":"ADDED","insertions":1350,"deletions":0},{"file":"test/runtests","type":"MODIFIED","insertions":9,"deletions":0},{"file":"test/vms.migrate.test.js","type":"ADDED","insertions":257,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":7295,"sizeDeletions":-24},{"number":"13","revision":"e493a3b700cda913c428e778d87ec7cc0328703c","parents":["a5642827bac9499a988157d6e1bb539adf5911e5"],"ref":"refs/changes/31/5731/13","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1555426226,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554853641,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554999810,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554999810,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"SUBM","value":"1","grantedOn":1555426240,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":304,"deletions":0},{"file":"lib/apis/cnapi.js","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"lib/apis/moray.js","type":"MODIFIED","insertions":263,"deletions":-4},{"file":"lib/apis/wfapi.js","type":"MODIFIED","insertions":56,"deletions":0},{"file":"lib/common/validation.js","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":47,"deletions":-3},{"file":"lib/moray/moray-buckets-config.js","type":"MODIFIED","insertions":22,"deletions":-2},{"file":"lib/vm-migration/migrate.js","type":"ADDED","insertions":1010,"deletions":0},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":267,"deletions":-2},{"file":"lib/workflows/migrate-abort.js","type":"ADDED","insertions":78,"deletions":0},{"file":"lib/workflows/migrate-begin.js","type":"ADDED","insertions":69,"deletions":0},{"file":"lib/workflows/migrate-pause.js","type":"ADDED","insertions":63,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"ADDED","insertions":122,"deletions":0},{"file":"lib/workflows/migrate-sync.js","type":"ADDED","insertions":76,"deletions":0},{"file":"lib/workflows/provision.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/workflows/vm-migration/abort.js","type":"ADDED","insertions":127,"deletions":0},{"file":"lib/workflows/vm-migration/begin.js","type":"ADDED","insertions":354,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_source.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/cleanup_target.js","type":"ADDED","insertions":211,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"ADDED","insertions":690,"deletions":0},{"file":"lib/workflows/vm-migration/pause.js","type":"ADDED","insertions":142,"deletions":0},{"file":"lib/workflows/vm-migration/switch.js","type":"ADDED","insertions":963,"deletions":0},{"file":"lib/workflows/vm-migration/sync.js","type":"ADDED","insertions":468,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"sapi_manifests/vmapi/template","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"test/common.js","type":"MODIFIED","insertions":78,"deletions":-1},{"file":"test/lib/migration.js","type":"ADDED","insertions":1350,"deletions":0},{"file":"test/runtests","type":"MODIFIED","insertions":9,"deletions":0},{"file":"test/vms.migrate.test.js","type":"ADDED","insertions":257,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":7295,"sizeDeletions":-24}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}]}