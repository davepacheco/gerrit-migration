From bd07cc3706044146df33b3a6518396a8e1efda44 Mon Sep 17 00:00:00 2001
From: Mike Gerdts <mike.gerdts@joyent.com>
Date: Tue, 2 Jan 2018 21:07:41 +0000
Subject: [PATCH] OS-6659 sdev_plugin_register should set *errp to 0 on success

---
 usr/src/uts/common/fs/dev/sdev_plugin.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/usr/src/uts/common/fs/dev/sdev_plugin.c b/usr/src/uts/common/fs/dev/sdev_plugin.c
index 4f862ccb72..a84aec4c59 100644
--- a/usr/src/uts/common/fs/dev/sdev_plugin.c
+++ b/usr/src/uts/common/fs/dev/sdev_plugin.c
@@ -661,6 +661,8 @@ sdev_plugin_register(const char *name, sdev_plugin_ops_t *ops, int *errp)
 	rw_exit(&sdp->sdev_contents);
 	VN_RELE(vp);
 
+	*errp = 0;
+
 	return ((sdev_plugin_hdl_t)spp);
 }
 
-- 
2.21.0

