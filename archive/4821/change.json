{"project":"joyent/illumos-joyent","branch":"master","id":"I1169729f845efa9db60803c6cfd33e594a2954f3","number":"4821","subject":"OS-4311 asynchronous socket errors should be better documented Reviewed by: David Pacheco \u003cdap@joyent.com\u003e Reviewed by: Jason King \u003cjason.king@joyent.com\u003e Approved by: Jason King \u003cjason.king@joyent.com\u003e","owner":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"url":"https://cr.joyent.us/4821","commitMessage":"OS-4311 asynchronous socket errors should be better documented\nReviewed by: David Pacheco \u003cdap@joyent.com\u003e\nReviewed by: Jason King \u003cjason.king@joyent.com\u003e\nApproved by: Jason King \u003cjason.king@joyent.com\u003e\n","createdOn":1536682381,"lastUpdated":1541263100,"open":false,"status":"MERGED","comments":[{"timestamp":1536682381,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 1."},{"timestamp":1536888263,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1536939296,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1536939316,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\nI forgot to add: thanks for doing this!  I think this will help clear up confusion for people."},{"timestamp":1536964604,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 2."},{"timestamp":1536964628,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1536966126,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2: Code-Review+1\n\n+1 for CR, but I don\u0027t really understand the underlying format so I\u0027m really only looking at content."},{"timestamp":1539107377,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1541201320,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1541263021,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 3: Patch Set 2 was rebased."},{"timestamp":1541263073,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1541263100,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Robert Mustacchi"}],"currentPatchSet":{"number":"4","revision":"1169729f845efa9db60803c6cfd33e594a2954f3","parents":["bab4dcafbe412880696fcb05ab46ef0d48abb18f"],"ref":"refs/changes/21/4821/4","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1541263073,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536966126,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539107377,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1541201320,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"SUBM","value":"1","grantedOn":1541263100,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/man/man2/read.2","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"usr/src/man/man2/write.2","type":"MODIFIED","insertions":15,"deletions":-3},{"file":"usr/src/man/man3socket/recv.3socket","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/man/man3socket/send.3socket","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"usr/src/man/man3xnet/recv.3xnet","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/man/man3xnet/recvfrom.3xnet","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/man/man3xnet/recvmsg.3xnet","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"usr/src/man/man3xnet/send.3xnet","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/man/man3xnet/sendmsg.3xnet","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/man/man3xnet/sendto.3xnet","type":"MODIFIED","insertions":9,"deletions":-2}],"sizeInsertions":110,"sizeDeletions":-33},"patchSets":[{"number":"1","revision":"e406ffe0b5d855b2ac4648db1646d9b062d9e5f1","parents":["9c4c8cab4de50f98dd50cee2eeef61f204061c10"],"ref":"refs/changes/21/4821/1","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1536682381,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536888263,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"comments":[{"file":"/COMMIT_MSG","line":7,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This is also https://www.illumos.org/issues/6060.  I don\u0027t care which we put into the commit message (one, the other, or both), but we may want to update the tickets to refer to each other."},{"file":"/COMMIT_MSG","line":7,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I was going to update the illumos bug and assign it to me once we had finished everything here. Since this is going into illumos-joyent it needs to use the JIRA ticket for tracking purposes."},{"file":"usr/src/man/man2/read.2","line":474,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This might be too pedantic, but is it correct to say that the socket has been closed?  tcp(7p) says \"a connection was dropped due to excessive retransmissions.\"  (I\u0027m worried somebody might think the file descriptor has been closed after getting this error.)\n\nWe could drop this block since we now refer people to tcp(7p)."},{"file":"usr/src/man/man2/read.2","line":474,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/man/man2/read.2","type":"MODIFIED","insertions":28,"deletions":-3},{"file":"usr/src/man/man2/write.2","type":"MODIFIED","insertions":15,"deletions":-3},{"file":"usr/src/man/man3socket/recv.3socket","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/man/man3socket/send.3socket","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"usr/src/man/man3xnet/recv.3xnet","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/man/man3xnet/recvfrom.3xnet","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/man/man3xnet/recvmsg.3xnet","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"usr/src/man/man3xnet/send.3xnet","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/man/man3xnet/sendmsg.3xnet","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/man/man3xnet/sendto.3xnet","type":"MODIFIED","insertions":9,"deletions":-2}],"sizeInsertions":122,"sizeDeletions":-33},{"number":"2","revision":"119c9cc264aae6e61e821d5d8a1b476bb6df7ef8","parents":["9c4c8cab4de50f98dd50cee2eeef61f204061c10"],"ref":"refs/changes/21/4821/2","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1536964604,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536966126,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539107377,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1541201320,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/man/man2/read.2","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"usr/src/man/man2/write.2","type":"MODIFIED","insertions":15,"deletions":-3},{"file":"usr/src/man/man3socket/recv.3socket","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/man/man3socket/send.3socket","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"usr/src/man/man3xnet/recv.3xnet","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/man/man3xnet/recvfrom.3xnet","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/man/man3xnet/recvmsg.3xnet","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"usr/src/man/man3xnet/send.3xnet","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/man/man3xnet/sendmsg.3xnet","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/man/man3xnet/sendto.3xnet","type":"MODIFIED","insertions":9,"deletions":-2}],"sizeInsertions":110,"sizeDeletions":-33},{"number":"3","revision":"a8ef2f69a54dbdd2155c5d9f3d97a2567a703c79","parents":["bab4dcafbe412880696fcb05ab46ef0d48abb18f"],"ref":"refs/changes/21/4821/3","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1541263021,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536966126,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539107377,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1541201320,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/man/man2/read.2","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"usr/src/man/man2/write.2","type":"MODIFIED","insertions":15,"deletions":-3},{"file":"usr/src/man/man3socket/recv.3socket","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/man/man3socket/send.3socket","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"usr/src/man/man3xnet/recv.3xnet","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/man/man3xnet/recvfrom.3xnet","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/man/man3xnet/recvmsg.3xnet","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"usr/src/man/man3xnet/send.3xnet","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/man/man3xnet/sendmsg.3xnet","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/man/man3xnet/sendto.3xnet","type":"MODIFIED","insertions":9,"deletions":-2}],"sizeInsertions":110,"sizeDeletions":-33},{"number":"4","revision":"1169729f845efa9db60803c6cfd33e594a2954f3","parents":["bab4dcafbe412880696fcb05ab46ef0d48abb18f"],"ref":"refs/changes/21/4821/4","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1541263073,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536966126,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"SUBM","value":"1","grantedOn":1541263100,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539107377,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1541201320,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/man/man2/read.2","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"usr/src/man/man2/write.2","type":"MODIFIED","insertions":15,"deletions":-3},{"file":"usr/src/man/man3socket/recv.3socket","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/man/man3socket/send.3socket","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"usr/src/man/man3xnet/recv.3xnet","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/man/man3xnet/recvfrom.3xnet","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/man/man3xnet/recvmsg.3xnet","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"usr/src/man/man3xnet/send.3xnet","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/man/man3xnet/sendmsg.3xnet","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/man/man3xnet/sendto.3xnet","type":"MODIFIED","insertions":9,"deletions":-2}],"sizeInsertions":110,"sizeDeletions":-33}],"allReviewers":[{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}]}