{"project":"joyent/sdc-cn-agent","branch":"master","id":"I536e9b972079342705c51240fafc1c43e614717c","number":"2396","subject":"AGENT-1082 cn-agent tasks are erroring out with \u0027socket hang up\u0027 after 2 minutes (add test case) Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"url":"https://cr.joyent.us/2396","commitMessage":"AGENT-1082 cn-agent tasks are erroring out with \u0027socket hang up\u0027 after 2 minutes (add test case)\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1502787903,"lastUpdated":1502841268,"open":false,"status":"MERGED","comments":[{"timestamp":1502787903,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 1."},{"timestamp":1502787904,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 341857414ea92195db4541338dff553e11168717\n    \n    Add test"},{"timestamp":1502787929,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1502835671,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 2."},{"timestamp":1502835673,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit aa745009b89aaa6ddd8bc45c0b534534077296db\n    \n    fix make check"},{"timestamp":1502835709,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1502836603,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 3."},{"timestamp":1502836604,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 8fa8274853aad213d16f8f64f0e74db6d46156b1\n    \n    Add comment"},{"timestamp":1502836630,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1502838581,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3:\n\n(3 comments)"},{"timestamp":1502840350,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 4."},{"timestamp":1502840351,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 6ab99b85b441e0840af5fb29d91160097cb31a8b\n    \n    Update with review feedback"},{"timestamp":1502840376,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1502841229,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1502841238,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1"},{"timestamp":1502841259,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1502841268,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Orlando Vazquez"}],"currentPatchSet":{"number":"6","revision":"536e9b972079342705c51240fafc1c43e614717c","parents":["e86d502d706802f1a950f389ed1275e8d91d81c1"],"ref":"refs/changes/96/2396/6","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1502841259,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1502840376,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502841238,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1502841238,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1502841268,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"test/http-task.test.js","type":"MODIFIED","insertions":34,"deletions":0}],"sizeInsertions":34,"sizeDeletions":0},"patchSets":[{"number":"1","revision":"c819b401e08cbac4cb4822f4d7970dd3dbd5a2da","parents":["13b5dfeb861b4088405d61cbcbbeac127455e5d5"],"ref":"refs/changes/96/2396/1","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1502787903,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1502787929,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/http-task.test.js","line":225,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line \u003e 80 characters"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/http-task.test.js","type":"MODIFIED","insertions":30,"deletions":0}],"sizeInsertions":30,"sizeDeletions":0},{"number":"2","revision":"e2b8dfdf2b53713b4e9d2ba725f390178ce37618","parents":["e86d502d706802f1a950f389ed1275e8d91d81c1"],"ref":"refs/changes/96/2396/2","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1502835671,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1502835709,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/http-task.test.js","type":"MODIFIED","insertions":31,"deletions":0}],"sizeInsertions":31,"sizeDeletions":0},{"number":"3","revision":"82ab7c83778b1f5b4c5f6f9a9978fe26f2d8f893","parents":["e86d502d706802f1a950f389ed1275e8d91d81c1"],"ref":"refs/changes/96/2396/3","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1502836603,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1502836630,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"/COMMIT_MSG","line":7,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"add a parenthetical here: \"... (add test case)\"\n\nSee example at https://github.com/joyent/rfd/blob/master/rfd/0104/README.md#commit-messages"},{"file":"test/http-task.test.js","line":189,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I\u0027d be specific that this is about testing going afoul of the default 2 minute socket timeout in node."},{"file":"test/http-task.test.js","line":211,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"This is debugging code?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/http-task.test.js","type":"MODIFIED","insertions":35,"deletions":0}],"sizeInsertions":35,"sizeDeletions":0},{"number":"4","revision":"350bb1b067519e779794f9410ac5ae5e5a0ac03c","parents":["e86d502d706802f1a950f389ed1275e8d91d81c1"],"ref":"refs/changes/96/2396/4","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1502840350,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1502840376,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/http-task.test.js","type":"MODIFIED","insertions":34,"deletions":0}],"sizeInsertions":34,"sizeDeletions":0},{"number":"5","revision":"94a69bb62f4885cb9d85a59eed74fe4741f2774c","parents":["e86d502d706802f1a950f389ed1275e8d91d81c1"],"ref":"refs/changes/96/2396/5","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1502841229,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1502840376,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502841238,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1502841238,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/http-task.test.js","type":"MODIFIED","insertions":34,"deletions":0}],"sizeInsertions":34,"sizeDeletions":0},{"number":"6","revision":"536e9b972079342705c51240fafc1c43e614717c","parents":["e86d502d706802f1a950f389ed1275e8d91d81c1"],"ref":"refs/changes/96/2396/6","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1502841259,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1502840376,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502841238,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1502841238,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1502841268,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"test/http-task.test.js","type":"MODIFIED","insertions":34,"deletions":0}],"sizeInsertions":34,"sizeDeletions":0}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}]}