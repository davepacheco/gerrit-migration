{"project":"joyent/sdc-sapi","branch":"master","id":"I802c7eecf0ed411fd37718e3e41e0189efcdf4be","number":"4121","subject":"TRITON-400 Remove SAPI\u0027s history Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/4121","commitMessage":"TRITON-400 Remove SAPI\u0027s history\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1528132131,"lastUpdated":1528472207,"open":false,"status":"MERGED","comments":[{"timestamp":1528132131,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1528132136,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit caa979ee3b02d90febe3eb4013f816f659b6d477\n    \n    TRITON-400 Remove SAPI\u0027s history"},{"timestamp":1528132158,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1528163387,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\n(1 comment)\n\nCan we also bump package.json version to \"2.0.0\" (to have it and the latest API major version match)?"},{"timestamp":1528221964,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2."},{"timestamp":1528221969,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit e0684a7f5a8e352691963af93eb7d677c082b3f5\n    \n    TRITON-400 Remove SAPI\u0027s history"},{"timestamp":1528221993,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1528221997,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 3."},{"timestamp":1528222002,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 5cd75f0603b2023870def2cd5a37e0541d7d6543\n    \n    TRITON-400 Remove SAPI\u0027s history"},{"timestamp":1528222027,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1528222027,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\n(1 comment)\n\n\u003e (1 comment)\n \u003e \n \u003e Can we also bump package.json version to \"2.0.0\" (to have it and\n \u003e the latest API major version match)?\n\nDone"},{"timestamp":1528224757,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3: Code-Review+1\n\nHave you had a chance to test updating to it and seeing if it *does* delete a history with some stuff in it?"},{"timestamp":1528224847,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1528299464,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 4."},{"timestamp":1528299469,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 9a01a66092e5c3ce4e90a228b5eebb4f1afbda4b\n    \n    TRITON-400 Remove SAPI\u0027s history"},{"timestamp":1528299492,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1528312539,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 4:\n\n(1 comment)\n\n\u003e Have you had a chance to test updating to it and seeing if it\n \u003e *does* delete a history with some stuff in it?\n\nJust did and it effectively removes the bucket and everything inside it."},{"timestamp":1528412101,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1"},{"timestamp":1528443354,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1528472207,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"5","revision":"802c7eecf0ed411fd37718e3e41e0189efcdf4be","parents":["7a4a6f92d612bdfc832543aa656affef72b9dc4c"],"ref":"refs/changes/21/4121/5","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1528443354,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528299492,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528412101,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1528412101,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1528472206,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":0,"deletions":-134},{"file":"lib/server/attributes.js","type":"MODIFIED","insertions":10,"deletions":-9},{"file":"lib/server/endpoints/history.js","type":"DELETED","insertions":0,"deletions":-218},{"file":"lib/server/endpoints/index.js","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"lib/server/model.js","type":"MODIFIED","insertions":2,"deletions":-111},{"file":"lib/server/stor/local.js","type":"MODIFIED","insertions":2,"deletions":-12},{"file":"lib/server/stor/moray.js","type":"MODIFIED","insertions":11,"deletions":-13},{"file":"lib/server/stor/moray_local.js","type":"MODIFIED","insertions":2,"deletions":-15},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/history.test.js","type":"DELETED","insertions":0,"deletions":-270}],"sizeInsertions":28,"sizeDeletions":-785},"patchSets":[{"number":"1","revision":"e7f1d75b11891b115bd41c5d2e1a7957a2dd2d9f","parents":["7a4a6f92d612bdfc832543aa656affef72b9dc4c"],"ref":"refs/changes/21/4121/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1528132131,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528132158,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/server/stor/moray.js","line":248,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Isn\u0027t the bucket called \"sapi_history\"?"},{"file":"lib/server/stor/moray.js","line":248,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":0,"deletions":-134},{"file":"lib/server/attributes.js","type":"MODIFIED","insertions":10,"deletions":-9},{"file":"lib/server/endpoints/history.js","type":"DELETED","insertions":0,"deletions":-218},{"file":"lib/server/endpoints/index.js","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"lib/server/model.js","type":"MODIFIED","insertions":2,"deletions":-111},{"file":"lib/server/stor/local.js","type":"MODIFIED","insertions":2,"deletions":-12},{"file":"lib/server/stor/moray.js","type":"MODIFIED","insertions":10,"deletions":-13},{"file":"lib/server/stor/moray_local.js","type":"MODIFIED","insertions":2,"deletions":-15},{"file":"test/history.test.js","type":"DELETED","insertions":0,"deletions":-270}],"sizeInsertions":26,"sizeDeletions":-784},{"number":"2","revision":"73d19679938027812c302efc63660d96ee132fc2","parents":["7a4a6f92d612bdfc832543aa656affef72b9dc4c"],"ref":"refs/changes/21/4121/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1528221964,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528221993,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":0,"deletions":-134},{"file":"lib/server/attributes.js","type":"MODIFIED","insertions":10,"deletions":-9},{"file":"lib/server/endpoints/history.js","type":"DELETED","insertions":0,"deletions":-218},{"file":"lib/server/endpoints/index.js","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"lib/server/model.js","type":"MODIFIED","insertions":2,"deletions":-111},{"file":"lib/server/stor/local.js","type":"MODIFIED","insertions":2,"deletions":-12},{"file":"lib/server/stor/moray.js","type":"MODIFIED","insertions":10,"deletions":-13},{"file":"lib/server/stor/moray_local.js","type":"MODIFIED","insertions":2,"deletions":-15},{"file":"test/history.test.js","type":"DELETED","insertions":0,"deletions":-270}],"sizeInsertions":26,"sizeDeletions":-784},{"number":"3","revision":"b1a80582e0695261a8c3a21e7ee2154b7e501ef3","parents":["7a4a6f92d612bdfc832543aa656affef72b9dc4c"],"ref":"refs/changes/21/4121/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1528221997,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528222027,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528224757,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"lib/server/stor/moray.js","line":249,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I suspect this could be more specific and only accept the err if it is the equiv of a 404."},{"file":"lib/server/stor/moray.js","line":249,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":0,"deletions":-134},{"file":"lib/server/attributes.js","type":"MODIFIED","insertions":10,"deletions":-9},{"file":"lib/server/endpoints/history.js","type":"DELETED","insertions":0,"deletions":-218},{"file":"lib/server/endpoints/index.js","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"lib/server/model.js","type":"MODIFIED","insertions":2,"deletions":-111},{"file":"lib/server/stor/local.js","type":"MODIFIED","insertions":2,"deletions":-12},{"file":"lib/server/stor/moray.js","type":"MODIFIED","insertions":10,"deletions":-13},{"file":"lib/server/stor/moray_local.js","type":"MODIFIED","insertions":2,"deletions":-15},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/history.test.js","type":"DELETED","insertions":0,"deletions":-270}],"sizeInsertions":27,"sizeDeletions":-785},{"number":"4","revision":"40b698c8b1764f5b442fd8c53c6ce19e9703d884","parents":["7a4a6f92d612bdfc832543aa656affef72b9dc4c"],"ref":"refs/changes/21/4121/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1528299464,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528299492,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528412101,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1528412101,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":0,"deletions":-134},{"file":"lib/server/attributes.js","type":"MODIFIED","insertions":10,"deletions":-9},{"file":"lib/server/endpoints/history.js","type":"DELETED","insertions":0,"deletions":-218},{"file":"lib/server/endpoints/index.js","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"lib/server/model.js","type":"MODIFIED","insertions":2,"deletions":-111},{"file":"lib/server/stor/local.js","type":"MODIFIED","insertions":2,"deletions":-12},{"file":"lib/server/stor/moray.js","type":"MODIFIED","insertions":11,"deletions":-13},{"file":"lib/server/stor/moray_local.js","type":"MODIFIED","insertions":2,"deletions":-15},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/history.test.js","type":"DELETED","insertions":0,"deletions":-270}],"sizeInsertions":28,"sizeDeletions":-785},{"number":"5","revision":"802c7eecf0ed411fd37718e3e41e0189efcdf4be","parents":["7a4a6f92d612bdfc832543aa656affef72b9dc4c"],"ref":"refs/changes/21/4121/5","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1528443354,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528299492,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528412101,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1528412101,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1528472206,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":0,"deletions":-134},{"file":"lib/server/attributes.js","type":"MODIFIED","insertions":10,"deletions":-9},{"file":"lib/server/endpoints/history.js","type":"DELETED","insertions":0,"deletions":-218},{"file":"lib/server/endpoints/index.js","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"lib/server/model.js","type":"MODIFIED","insertions":2,"deletions":-111},{"file":"lib/server/stor/local.js","type":"MODIFIED","insertions":2,"deletions":-12},{"file":"lib/server/stor/moray.js","type":"MODIFIED","insertions":11,"deletions":-13},{"file":"lib/server/stor/moray_local.js","type":"MODIFIED","insertions":2,"deletions":-15},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/history.test.js","type":"DELETED","insertions":0,"deletions":-270}],"sizeInsertions":28,"sizeDeletions":-785}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}