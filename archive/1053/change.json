{"project":"joyent/moray","branch":"master","topic":"MORAY-363","id":"Ia49a0c9e37eb8b5c132acf4be96c3d24152f89d8","number":"1053","subject":"MORAY-363 Validate index names Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Reviewed by: David Pacheco \u003cdap@joyent.com\u003e Approved by: David Pacheco \u003cdap@joyent.com\u003e","owner":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"url":"https://cr.joyent.us/1053","commitMessage":"MORAY-363 Validate index names\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nReviewed by: David Pacheco \u003cdap@joyent.com\u003e\nApproved by: David Pacheco \u003cdap@joyent.com\u003e\n","createdOn":1480725338,"lastUpdated":1482187248,"open":false,"status":"MERGED","comments":[{"timestamp":1480725338,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 1."},{"timestamp":1480725484,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1480726148,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1:\n\nOne thing that I don\u0027t think we discussed when this first came up: is there anything that we may want to reserve right now? I can add an \u0027_atime\u0027 and \u0027_ctime\u0027, which aren\u0027t currently used by anyone. Even if we never use them, it\u0027ll leave the option open."},{"timestamp":1480726988,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\n\u003e One thing that I don\u0027t think we discussed when this first came up:\n \u003e is there anything that we may want to reserve right now? I can add\n \u003e an \u0027_atime\u0027 and \u0027_ctime\u0027, which aren\u0027t currently used by anyone.\n \u003e Even if we never use them, it\u0027ll leave the option open.\n\nWhat do you think about reserving anything with a leading underscore?\n\nSeparately, how do we know this won\u0027t break any existing users that we care about?"},{"timestamp":1480727431,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Topic set to MORAY-363"},{"timestamp":1480728987,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1:\n\nWe can\u0027t reserve anything with a leading underscore because we already have services that use that. I placed every currently used index name in the ticket, and checked that they are all okay with this schema."},{"timestamp":1480982325,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\ndap\u0027s suggestion of reserving the entire leading-underscore namespace sounds like a nice plan, assuming it doesn\u0027t break any existing consumers."},{"timestamp":1481913534,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 2."},{"timestamp":1481913572,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1481914558,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1481918805,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 3."},{"timestamp":1481918841,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1481919727,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1481919862,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 4: Commit message was updated."},{"timestamp":1481920369,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1482187248,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Cody Peter Mello"}],"currentPatchSet":{"number":"4","revision":"f4708bec8d7ff1b75a17fc8b39eef935a04d17b6","parents":["78ca9a6aa6759597cad7723c2cd9b80059c8af3c"],"ref":"refs/changes/53/1053/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1481919862,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1481918841,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1481919727,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481920369,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1482187248,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":13,"deletions":-5},{"file":"lib/buckets/common.js","type":"MODIFIED","insertions":33,"deletions":0}],"sizeInsertions":46,"sizeDeletions":-5},"patchSets":[{"number":"1","revision":"0db37c69b9d2e2e6abc7983334382ca271cf4daf","parents":["78ca9a6aa6759597cad7723c2cd9b80059c8af3c"],"ref":"refs/changes/53/1053/1","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1480725338,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1480725484,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/buckets/common.js","type":"MODIFIED","insertions":31,"deletions":0}],"sizeInsertions":31,"sizeDeletions":0},{"number":"2","revision":"9a0f8d2380215535172b9298ff1f465aeb01e646","parents":["78ca9a6aa6759597cad7723c2cd9b80059c8af3c"],"ref":"refs/changes/53/1053/2","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1481913534,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1481913572,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481914558,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/buckets/common.js","type":"MODIFIED","insertions":33,"deletions":0}],"sizeInsertions":33,"sizeDeletions":0},{"number":"3","revision":"a49a0c9e37eb8b5c132acf4be96c3d24152f89d8","parents":["78ca9a6aa6759597cad7723c2cd9b80059c8af3c"],"ref":"refs/changes/53/1053/3","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1481918805,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1481919727,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1481918841,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":13,"deletions":-5},{"file":"lib/buckets/common.js","type":"MODIFIED","insertions":33,"deletions":0}],"sizeInsertions":46,"sizeDeletions":-5},{"number":"4","revision":"f4708bec8d7ff1b75a17fc8b39eef935a04d17b6","parents":["78ca9a6aa6759597cad7723c2cd9b80059c8af3c"],"ref":"refs/changes/53/1053/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1481919862,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1481919727,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"SUBM","value":"1","grantedOn":1482187248,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1481918841,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481920369,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":13,"deletions":-5},{"file":"lib/buckets/common.js","type":"MODIFIED","insertions":33,"deletions":0}],"sizeInsertions":46,"sizeDeletions":-5}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}]}