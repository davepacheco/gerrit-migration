{"project":"joyent/illumos-joyent","branch":"master","id":"I9035d37f2dc0a9fee9342a2b7cc8a86621788ae7","number":"916","subject":"OS-5803 chromium depends on PR_[GS]ET_DUMPABLE Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Approved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e","owner":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"url":"https://cr.joyent.us/916","commitMessage":"OS-5803 chromium depends on PR_[GS]ET_DUMPABLE\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nApproved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n","createdOn":1479402061,"lastUpdated":1479424341,"open":false,"status":"MERGED","comments":[{"timestamp":1479402061,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 1."},{"timestamp":1479412269,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(4 comments)"},{"timestamp":1479419243,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 2."},{"timestamp":1479419331,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\nI see I need to remove that extern declaration, but let me know if you see anything else."},{"timestamp":1479419609,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1479423697,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 3."},{"timestamp":1479423871,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1479424325,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1479424341,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jerry Jelinek"}],"currentPatchSet":{"number":"4","revision":"9035d37f2dc0a9fee9342a2b7cc8a86621788ae7","parents":["382b6e66b39fa51ae68c4ba3f325923698d27235"],"ref":"refs/changes/16/916/4","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1479424325,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1479423871,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1479423871,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1479424341,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/syscall/lx_prctl.c","type":"MODIFIED","insertions":22,"deletions":-3}],"sizeInsertions":24,"sizeDeletions":-4},"patchSets":[{"number":"1","revision":"c411f7ac0d34cca0eb03c298f35ca491347974f9","parents":["382b6e66b39fa51ae68c4ba3f325923698d27235"],"ref":"refs/changes/16/916/1","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1479402061,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/brand/lx/syscall/lx_prctl.c","line":83,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I would do the handle lookup outside p_lock."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_prctl.c","line":84,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Ignoring a failure here seems fine if rl64 is pre-initialized so it yields a consistent output."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_prctl.c","line":103,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Although a failure of the handle lookup or rlimit-fetch would be extremely weird/rate, being defensive about the later assignment would probably be advised.  (At least initialize rl64.rlim_max)"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_prctl.c","line":104,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Why not copy the prealloc and rctl_set logic from lx_set_rctl?  We\u0027ve already looked up the handle, it seems like it would be more efficient to do it all under one round-trip through p_lock."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_prctl.c","type":"MODIFIED","insertions":23,"deletions":-3},{"file":"usr/src/uts/common/brand/lx/syscall/lx_rlimit.c","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":24,"sizeDeletions":-4},{"number":"2","revision":"92fdd31647921e3ffe635223bd5d2ab4470ffcfe","parents":["382b6e66b39fa51ae68c4ba3f325923698d27235"],"ref":"refs/changes/16/916/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1479419243,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1479419609,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/syscall/lx_prctl.c","type":"MODIFIED","insertions":24,"deletions":-3}],"sizeInsertions":26,"sizeDeletions":-4},{"number":"3","revision":"2615fce01fe8d7251c9370d1f5f235cdf7217bad","parents":["382b6e66b39fa51ae68c4ba3f325923698d27235"],"ref":"refs/changes/16/916/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1479423697,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1479423871,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1479423871,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/syscall/lx_prctl.c","type":"MODIFIED","insertions":22,"deletions":-3}],"sizeInsertions":24,"sizeDeletions":-4},{"number":"4","revision":"9035d37f2dc0a9fee9342a2b7cc8a86621788ae7","parents":["382b6e66b39fa51ae68c4ba3f325923698d27235"],"ref":"refs/changes/16/916/4","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1479424325,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1479424341,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1479423871,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1479423871,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/syscall/lx_prctl.c","type":"MODIFIED","insertions":22,"deletions":-3}],"sizeInsertions":24,"sizeDeletions":-4}],"allReviewers":[{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}]}