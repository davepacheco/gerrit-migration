{"project":"joyent/sdc-hermes","branch":"master","id":"I731bed3329b8d00e2d976da5348e100377b08ab1","number":"6111","subject":"TRITON-1299 need logarchiver-agent service to run along side hermes-actor Reviewed by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e Approved by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e","owner":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"url":"https://cr.joyent.us/6111","commitMessage":"TRITON-1299 need logarchiver-agent service to run along side hermes-actor\nReviewed by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e\nApproved by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e\n","createdOn":1555329685,"lastUpdated":1556267594,"open":false,"status":"MERGED","comments":[{"timestamp":1555329685,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Uploaded patch set 1."},{"timestamp":1555329685,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 736c16136dfac9ea43633316c233f75105cec0c8\n    \n    allow hermes-actor and logarchiver-agent to run side by side\n    \n    commit 4fcf66d182e174d586f95e71671432df7acf0b9a\n    \n    make sure customer_uuid property is included in logset\n    \n    commit 3e156941e400704c1aa648a4eab186c5e6198c40\n    \n    translate customer uuid to account"},{"timestamp":1555329741,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1555331719,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 1:\n\nThis CR is a little messy because it also includes the TRITON-1291 changes. As soon as TRITON-1291 is integrated, I\u0027ll rebase to make diffing this CR easier.\n\nThis has been tested with both the logarchiver and sdc zone.\n\nTo test:\n\nProvision a logarchiver instance if it doesn\u0027t exist\n\n```\nsdcadm post-setup logarchiver -C experimental -i 96efc930-b24f-4037-b1a2-0d0c2f659d1b\n```\n\nIf it does, update it\n```\nsdcadm up logarchiver@96efc930-b24f-4037-b1a2-0d0c2f659d1b -C experimental\n\n```\n\nTo update the sdc zone\n```\nsdcadm up sdc@599f4e52-77d3-442b-9cef-b2e5141f6464 -C experimental\n```"},{"timestamp":1555426441,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nWaiting for the rebase you mention then"},{"timestamp":1555474097,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Uploaded patch set 2."},{"timestamp":1555474098,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 5deaf253f25fbccdd1791036d780abb4d544ef22\n    \n    rebase and clean up\n    \n    commit 66fbe09209a5c7af80f015c4a6c4ad50d29ad840\n    \n    allow hermes-actor and logarchiver-agent to run side by side"},{"timestamp":1555474162,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1555474280,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Uploaded patch set 3."},{"timestamp":1555474280,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 2ca385f9f6c71b4c81162701ac4d8b884e483074\n    \n    update version"},{"timestamp":1555474334,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1556267523,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1\n\nReviewed and tested. I\u0027m gonna merge this and begin with updates into the dependent repos"},{"timestamp":1556267588,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 4: Commit message was updated."},{"timestamp":1556267594,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"4","revision":"1cf50fa80a674a5a427df733ac58eb162b7aadba","parents":["9e0fa93835c77400f773624ef657dd4aed6751a9"],"ref":"refs/changes/11/6111/4","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1556267588,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1555474334,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556267523,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556267523,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"SUBM","value":"1","grantedOn":1556267594,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"actor/actor.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"hermes.js","type":"MODIFIED","insertions":20,"deletions":-1},{"file":"lib/httpserver.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/hermes/template","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"scripts/actor.ksh","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"scripts/actor.xml","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"scripts/bootstrap.ksh","type":"MODIFIED","insertions":3,"deletions":-3}],"sizeInsertions":41,"sizeDeletions":-17},"patchSets":[{"number":"1","revision":"2ad33c4b8d59ff449c0707e2b2b2764554604100","parents":["f607e55d1902dca6a3e97b1d7d72071a3be0ec93"],"ref":"refs/changes/11/6111/1","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1555329685,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1555329741,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"actor/actor.js","type":"MODIFIED","insertions":18,"deletions":-3},{"file":"actor/lib/logsets.js","type":"MODIFIED","insertions":32,"deletions":-3},{"file":"actor/lib/worker.js","type":"MODIFIED","insertions":56,"deletions":-43},{"file":"etc/config.json.sample","type":"MODIFIED","insertions":3,"deletions":0},{"file":"hermes.js","type":"MODIFIED","insertions":18,"deletions":-3},{"file":"lib/httpserver.js","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"lib/logsets.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"sapi_manifests/hermes/template","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"scripts/actor.ksh","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"scripts/actor.xml","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"scripts/bootstrap.ksh","type":"MODIFIED","insertions":11,"deletions":-3}],"sizeInsertions":166,"sizeDeletions":-68},{"number":"2","revision":"c978a7fab8933c0b504585a0f202b86dabd04ab6","parents":["9e0fa93835c77400f773624ef657dd4aed6751a9"],"ref":"refs/changes/11/6111/2","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1555474097,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1555474162,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"actor/actor.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"hermes.js","type":"MODIFIED","insertions":20,"deletions":-1},{"file":"lib/httpserver.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"sapi_manifests/hermes/template","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"scripts/actor.ksh","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"scripts/actor.xml","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"scripts/bootstrap.ksh","type":"MODIFIED","insertions":3,"deletions":-3}],"sizeInsertions":40,"sizeDeletions":-16},{"number":"3","revision":"731bed3329b8d00e2d976da5348e100377b08ab1","parents":["9e0fa93835c77400f773624ef657dd4aed6751a9"],"ref":"refs/changes/11/6111/3","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1555474280,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1555474334,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556267523,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556267523,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"actor/actor.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"hermes.js","type":"MODIFIED","insertions":20,"deletions":-1},{"file":"lib/httpserver.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/hermes/template","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"scripts/actor.ksh","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"scripts/actor.xml","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"scripts/bootstrap.ksh","type":"MODIFIED","insertions":3,"deletions":-3}],"sizeInsertions":41,"sizeDeletions":-17},{"number":"4","revision":"1cf50fa80a674a5a427df733ac58eb162b7aadba","parents":["9e0fa93835c77400f773624ef657dd4aed6751a9"],"ref":"refs/changes/11/6111/4","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1556267588,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1555474334,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556267523,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556267523,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"SUBM","value":"1","grantedOn":1556267594,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"actor/actor.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"hermes.js","type":"MODIFIED","insertions":20,"deletions":-1},{"file":"lib/httpserver.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/hermes/template","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"scripts/actor.ksh","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"scripts/actor.xml","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"scripts/bootstrap.ksh","type":"MODIFIED","insertions":3,"deletions":-3}],"sizeInsertions":41,"sizeDeletions":-17}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"}]}