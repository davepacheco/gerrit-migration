{"project":"joyent/sdc-fwrule","branch":"master","id":"Ic1a3a1c0d14612fbc6dbc5185538115ac81b1b00","number":"3337","subject":"TRITON-75 Allow firewall rules to be applied in order of priority Reviewed by: Jason King \u003cjason.king@joyent.com\u003e Reviewed by: Mike Zeller \u003cmike.zeller@joyent.com\u003e Approved by: Mike Zeller \u003cmike.zeller@joyent.com\u003e","owner":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"url":"https://cr.joyent.us/3337","commitMessage":"TRITON-75 Allow firewall rules to be applied in order of priority\nReviewed by: Jason King \u003cjason.king@joyent.com\u003e\nReviewed by: Mike Zeller \u003cmike.zeller@joyent.com\u003e\nApproved by: Mike Zeller \u003cmike.zeller@joyent.com\u003e\n","createdOn":1518131730,"lastUpdated":1519770208,"open":false,"status":"MERGED","comments":[{"timestamp":1518131730,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 1."},{"timestamp":1518132935,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 2."},{"timestamp":1518134108,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n\"make check\" exited with status 2\n\n /tmp/repo/lib/validators.js\n /tmp/repo/lib/index.js\n /tmp/repo/lib/rule.js\n /tmp/repo/test/parser.test.js\n /tmp/repo/test/run.js\n /tmp/repo/test/invalid.test.js\n /tmp/repo/test/rule.test.js\n /tmp/repo/test/validators.test.js\n test/parser.test.js: 449: line \u003e 80 characters\n test/invalid.test.js: 189: line \u003e 80 characters\n test/rule.test.js: 1731: indent is 10 not a multiple of 4 spaces\n test/rule.test.js: 1733: indent is 10 not a multiple of 4 spaces\n test/rule.test.js: 1735: indent is 10 not a multiple of 4 spaces\n test/rule.test.js: 1737: indent is 10 not a multiple of 4 spaces\n test/rule.test.js: 1739: indent is 10 not a multiple of 4 spaces\n test/rule.test.js: 1741: indent is 10 not a multiple of 4 spaces\n test/rule.test.js: 1743: indent is 10 not a multiple of 4 spaces\n test/rule.test.js: 1745: line \u003e 80 characters\n test/rule.test.js: 1745: indent is 10 not a multiple of 4 spaces\n test/rule.test.js: 1747: indent is 10 not a multiple of 4 spaces\n Makefile:138: recipe for target \u0027check-jsstyle\u0027 failed\n gmake: *** [check-jsstyle] Error 1"},{"timestamp":1518134267,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1518143667,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 3."},{"timestamp":1518143710,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1518561614,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1518638010,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1518742270,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1519766768,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1519766775,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1519770201,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 4: Commit message was updated."},{"timestamp":1519770205,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 5: Patch Set 4 was rebased"},{"timestamp":1519770208,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Cody Peter Mello"}],"currentPatchSet":{"number":"5","revision":"768233916f1eb263a9008264fc6e953e46930880","parents":["928a30a37c6bb32224d3af96af48d65753a8871a"],"ref":"refs/changes/37/3337/5","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1519770205,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1518143710,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1518742270,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1519766768,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1519766775,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"SUBM","value":"1","grantedOn":1519770208,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":3,"deletions":0},{"file":".npmignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"docs/media/img/rule.svg","type":"MODIFIED","insertions":33,"deletions":-2},{"file":"docs/rules.md","type":"MODIFIED","insertions":29,"deletions":-5},{"file":"docs/rules.md.in","type":"MODIFIED","insertions":29,"deletions":-5},{"file":"lib/index.js","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"lib/parser.js","type":"DELETED","insertions":0,"deletions":-562},{"file":"lib/rule.js","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/fwrule.jison","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"src/header.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/invalid.test.js","type":"MODIFIED","insertions":11,"deletions":-2},{"file":"test/parser.test.js","type":"MODIFIED","insertions":51,"deletions":-2},{"file":"test/rule.test.js","type":"MODIFIED","insertions":166,"deletions":-2},{"file":"tools/gen-rr-svgs.js","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":360,"sizeDeletions":-588},"patchSets":[{"number":"1","revision":"9d3a4bce64d5600b36b559069499401227e6362a","parents":["b05c9e46a08b5d4f8781b5a420c789b97c42ab9b"],"ref":"refs/changes/37/3337/1","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1518131730,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1518134108,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":3,"deletions":0},{"file":".npmignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"docs/media/img/rule.svg","type":"MODIFIED","insertions":33,"deletions":-2},{"file":"docs/rules.md","type":"MODIFIED","insertions":28,"deletions":-5},{"file":"docs/rules.md.in","type":"MODIFIED","insertions":28,"deletions":-5},{"file":"lib/index.js","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"lib/parser.js","type":"DELETED","insertions":0,"deletions":-562},{"file":"lib/rule.js","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/fwrule.jison","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"src/header.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/invalid.test.js","type":"MODIFIED","insertions":10,"deletions":-2},{"file":"test/parser.test.js","type":"MODIFIED","insertions":50,"deletions":-2},{"file":"test/rule.test.js","type":"MODIFIED","insertions":165,"deletions":-2},{"file":"tools/gen-rr-svgs.js","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":354,"sizeDeletions":-587},{"number":"2","revision":"20fc29ce7ae4bd2665ee63082bc63540c6c681c8","parents":["1b23a1c6b6660ba7dc9ce80ea5ef672572f01ec3"],"ref":"refs/changes/37/3337/2","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1518132935,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1518134267,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":3,"deletions":0},{"file":".npmignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"docs/media/img/rule.svg","type":"MODIFIED","insertions":33,"deletions":-2},{"file":"docs/rules.md","type":"MODIFIED","insertions":28,"deletions":-5},{"file":"docs/rules.md.in","type":"MODIFIED","insertions":28,"deletions":-5},{"file":"lib/index.js","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"lib/parser.js","type":"DELETED","insertions":0,"deletions":-562},{"file":"lib/rule.js","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/fwrule.jison","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"src/header.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/invalid.test.js","type":"MODIFIED","insertions":11,"deletions":-2},{"file":"test/parser.test.js","type":"MODIFIED","insertions":51,"deletions":-2},{"file":"test/rule.test.js","type":"MODIFIED","insertions":166,"deletions":-2},{"file":"tools/gen-rr-svgs.js","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":358,"sizeDeletions":-588},{"number":"3","revision":"c1a3a1c0d14612fbc6dbc5185538115ac81b1b00","parents":["1b23a1c6b6660ba7dc9ce80ea5ef672572f01ec3"],"ref":"refs/changes/37/3337/3","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1518143667,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1518143710,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1519766775,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1519766768,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1518742270,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"comments":[{"file":"test/rule.test.js","line":1783,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Just to clarify, this should copy the additional fields (priority, protocol, types) from the input data to raw for comparison, correct?"},{"file":"test/rule.test.js","line":1783,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Yes, that\u0027s correct. I did it this way so that I didn\u0027t need to rewrite the common fields for each rule, and could specify just the ones specific to the rule."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":3,"deletions":0},{"file":".npmignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"docs/media/img/rule.svg","type":"MODIFIED","insertions":33,"deletions":-2},{"file":"docs/rules.md","type":"MODIFIED","insertions":29,"deletions":-5},{"file":"docs/rules.md.in","type":"MODIFIED","insertions":29,"deletions":-5},{"file":"lib/index.js","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"lib/parser.js","type":"DELETED","insertions":0,"deletions":-562},{"file":"lib/rule.js","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/fwrule.jison","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"src/header.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/invalid.test.js","type":"MODIFIED","insertions":11,"deletions":-2},{"file":"test/parser.test.js","type":"MODIFIED","insertions":51,"deletions":-2},{"file":"test/rule.test.js","type":"MODIFIED","insertions":166,"deletions":-2},{"file":"tools/gen-rr-svgs.js","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":360,"sizeDeletions":-588},{"number":"4","revision":"c724f7166b2994d8b375193518ffcfb93706fd14","parents":["1b23a1c6b6660ba7dc9ce80ea5ef672572f01ec3"],"ref":"refs/changes/37/3337/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1519770201,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1518143710,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1519766775,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1519766768,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1518742270,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":3,"deletions":0},{"file":".npmignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"docs/media/img/rule.svg","type":"MODIFIED","insertions":33,"deletions":-2},{"file":"docs/rules.md","type":"MODIFIED","insertions":29,"deletions":-5},{"file":"docs/rules.md.in","type":"MODIFIED","insertions":29,"deletions":-5},{"file":"lib/index.js","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"lib/parser.js","type":"DELETED","insertions":0,"deletions":-562},{"file":"lib/rule.js","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/fwrule.jison","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"src/header.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/invalid.test.js","type":"MODIFIED","insertions":11,"deletions":-2},{"file":"test/parser.test.js","type":"MODIFIED","insertions":51,"deletions":-2},{"file":"test/rule.test.js","type":"MODIFIED","insertions":166,"deletions":-2},{"file":"tools/gen-rr-svgs.js","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":360,"sizeDeletions":-588},{"number":"5","revision":"768233916f1eb263a9008264fc6e953e46930880","parents":["928a30a37c6bb32224d3af96af48d65753a8871a"],"ref":"refs/changes/37/3337/5","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1519770205,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1519770208,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1518143710,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1519766775,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1519766768,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1518742270,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":3,"deletions":0},{"file":".npmignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"docs/media/img/rule.svg","type":"MODIFIED","insertions":33,"deletions":-2},{"file":"docs/rules.md","type":"MODIFIED","insertions":29,"deletions":-5},{"file":"docs/rules.md.in","type":"MODIFIED","insertions":29,"deletions":-5},{"file":"lib/index.js","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"lib/parser.js","type":"DELETED","insertions":0,"deletions":-562},{"file":"lib/rule.js","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/fwrule.jison","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"src/header.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/invalid.test.js","type":"MODIFIED","insertions":11,"deletions":-2},{"file":"test/parser.test.js","type":"MODIFIED","insertions":51,"deletions":-2},{"file":"test/rule.test.js","type":"MODIFIED","insertions":166,"deletions":-2},{"file":"tools/gen-rr-svgs.js","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":360,"sizeDeletions":-588}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}]}