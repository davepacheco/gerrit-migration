{"project":"joyent/manta-muskie","branch":"master","id":"Ia6e18282e4c44a9da8faff90c05180f07f2c3473","number":"6915","subject":"MANTA-4556 \"update buckets object metadata\" response is missing some headers","owner":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"url":"https://cr.joyent.us/6915","commitMessage":"MANTA-4556 \"update buckets object metadata\" response is missing some headers\n","createdOn":1568739816,"lastUpdated":1568739865,"open":false,"status":"ABANDONED","comments":[{"timestamp":1568739816,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Uploaded patch set 1."},{"timestamp":1568739818,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 83c6a074632785e50de30b229b15c4fd16bb8e4f\n    \n    MANTA-4514 incorrect Next-Marker response from ListBucketObjects when page ends on a delimiter group (#12)\n    \n    commit e577ffeffd2a36336c3eae1466cdbefaa21b972c\n    \n    MANTA-4518 the new Buckets API should not support \u0027x-\u0027 prefix on \u0027durability-level\u0027 header\n    Reviewed by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e\n    \n    commit 1bd4ecd74b3e43352a66e0d9c51c93a45659dd9c\n    \n    MANTA-4355 Expose pagination for bucket and object listing (#11)\n    \n    commit 2f12d7bc3f447cd1c8ed7ca6a72f9eb65c61118c\n    \n    Update copyright headers to appease make check\n    \n    commit dcbd4bb22b5cbb94c26615c53a63a4ad3d18c100\n    \n    Updates to reflect RFD 155 header updates\n    \n    commit edfc486be30c5aeeb783cdea0bddf431551a8545\n    \n    Include request id in bucket creation rpc calls\n    \n    commit a48be88b9d4f7e9e8ae448d70d9d202df63c7c7f\n    \n    MANTA-4377 buskie HeadBucketObject is a 500 if the object name does not exist\n    \n    commit 8d4fc0654ca4fd864d1c438b6fcc271843ca58fd\n    \n    Send request id along with buckets requests\n    \n    commit 7479aed7774bffef57980eac3ac95521f39de160\n    \n    Remove reference to nonexistent buckets head module\n    \n    commit af713dc4e9a508f535b405c73cb77cc3bdb69254\n    \n    MANTA-4319 Manta clients got 408 for putobject requests against muskies with buckets support (#10)\n    \n    commit ae0dfbf08c1ffc0291bc8e90051c4e11308e0897\n    \n    Add routes and handlers for bucket object metadata requests\n    \n    commit 9df62c457289df0d1e8f55eb172b90e81bbbb574\n    \n    MANTA-4340 Implement naming rules for manta buckets\n    \n    commit bcae76375c7392071249f80506cf43cac46d7787\n    \n    Missing Bucket Error codes in Docs (#9)\n    \n    commit e165d1a59eba8044dda8e56a7c2d16738f0e6b9e\n    \n    Add OPTIONS /:login/buckets to support MANTA-4345\n    \n    commit ac4809d1dea638b35268a81683429d275746405f\n    \n    Fix a couple of issues with HEAD requests\n    \n    commit e9053639f456c9c78b0ef7f05380374960cb6f6e\n    \n    Conditional DELETE support for buckets objects\n    \n    commit c8e889ae965fbf14497040a20351c984a8e99dc8\n    \n    buckets should have feature flag\n    \n    commit 220599bd9eb5c232efe770dda015675e7bffa2ed\n    \n    Add most conditional request support for buckets\n    Add conditional request support except for bucket object deletes.\n    \n    commit fe04be9d1a7bfe149df07ccae2e470022f3c9b9c\n    \n    Enforce authorization for buckets requests\n    \n    commit 2d7e149538d619e498f91bf8a02158d6346d1e1f\n    \n    MANTA-4304 muskie needs to support bucket HEAD requests (#8)\n    \n    commit d0c410f2376f63514a8aa1f6a4d37398323db541\n    \n    MANTA-4296 Fix zero byte object handling in buckets\n    \n    commit a33c7d2e594eac4685adebfc353c746e308397a3\n    \n    Allow any content-type for bucket objects\n    \n    commit eec73dc487ff9bc32025a66544e56739ac1f254b\n    \n    Do not trim key names for bucket listing results\n    \n    commit 98d291c4751e861d8654e1585a72a47d9d3fc68e\n    \n    Add contentMD5 returned from moray to buckets object metadata\n    \n    commit 050e7cd629253e0f09f7d5b2173d05d70ec9397a\n    \n    MANTA-4285 Check if a bucket is empty prior to deleting a bucket\n    \n    commit ac99e980ad4899b03ed6b12b03b4f577d4b53a11\n    \n    Update SAPI configuration template with buckets entries\n    \n    commit d0adce3d1fcf163859c34981d5d15ff7b91c824f\n    \n    Pull in changes from joyent/manta-muskie#6\n    Pull in changes from joyent/manta-muskie#6 adjusted for other changes. Also\n    correct the error handling for bucket deletion to correctly handle cases when\n    the request bucket for deletion does not exist.\n    \n    commit 143db96e6e46cb81fac87a51696e0a35d7695a04\n    \n    Fixes for issues while testing buckets request paths\n    \n    commit 5acfbdde40a45a4359ff254a588f430aee69f974\n    \n    Add missing boray dependency\n    \n    commit b4c6d67dceafafb613730287cadb03f9f5dc061e\n    \n    Fix some imports issues with some buckets modules\n    \n    commit 4b428ffcf1147389c10bcc1650b2fb674a39563e\n    \n    Unify MANTA-3900 and buckets-demo branch work\n    \n    commit 943173823133b3992aaaf83c053d0c9f352c4a33\n    \n    MANTA-3900 WIP 2 add objects to buckets API routes\n    \n    commit fd417231e02dad727d9261db475ae6e5e555d3cf\n    \n    MANTA-3900 WIP buckets API routes"},{"timestamp":1568739865,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Abandoned"}],"currentPatchSet":{"number":"1","revision":"a6e18282e4c44a9da8faff90c05180f07f2c3473","parents":["b78064d491b3b99ea0a7d2d00f984b5c5ad3a0dc"],"ref":"refs/changes/15/6915/1","uploader":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"createdOn":1568739816,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":16,"deletions":-11},{"file":"lib/audit.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/auth.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/buckets/boray.js","type":"ADDED","insertions":170,"deletions":0},{"file":"lib/buckets/buckets.js","type":"ADDED","insertions":347,"deletions":0},{"file":"lib/buckets/common.js","type":"ADDED","insertions":153,"deletions":0},{"file":"lib/buckets/create.js","type":"ADDED","insertions":81,"deletions":0},{"file":"lib/buckets/delete.js","type":"ADDED","insertions":124,"deletions":0},{"file":"lib/buckets/head.js","type":"ADDED","insertions":72,"deletions":0},{"file":"lib/buckets/index.js","type":"ADDED","insertions":29,"deletions":0},{"file":"lib/buckets/list.js","type":"ADDED","insertions":102,"deletions":0},{"file":"lib/buckets/objects/create.js","type":"ADDED","insertions":154,"deletions":0},{"file":"lib/buckets/objects/delete.js","type":"ADDED","insertions":84,"deletions":0},{"file":"lib/buckets/objects/get.js","type":"ADDED","insertions":33,"deletions":0},{"file":"lib/buckets/objects/head.js","type":"ADDED","insertions":105,"deletions":0},{"file":"lib/buckets/objects/list.js","type":"ADDED","insertions":101,"deletions":0},{"file":"lib/buckets/objects/metadata/get.js","type":"ADDED","insertions":112,"deletions":0},{"file":"lib/buckets/objects/metadata/update.js","type":"ADDED","insertions":129,"deletions":0},{"file":"lib/buckets/options.js","type":"ADDED","insertions":39,"deletions":0},{"file":"lib/check_stream.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/common.js","type":"MODIFIED","insertions":709,"deletions":-7},{"file":"lib/conditional_request.js","type":"ADDED","insertions":225,"deletions":0},{"file":"lib/configure.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/dir.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/errors.js","type":"MODIFIED","insertions":70,"deletions":-1},{"file":"lib/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/jobs/common.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/jobs/create.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/jobs/error.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/jobs/fail.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/jobs/get.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/jobs/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/jobs/input.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/jobs/list.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/jobs/output.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/jobs/post.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/link.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/medusa/connector.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/medusa/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/medusa/routes.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/obj.js","type":"MODIFIED","insertions":46,"deletions":-615},{"file":"lib/other.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/server.js","type":"MODIFIED","insertions":163,"deletions":-19},{"file":"lib/throttle.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/abort.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/del.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/get.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/redirect.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/upload.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/utils.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"main.js","type":"MODIFIED","insertions":43,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"sapi_manifests/muskie/template","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"test/bucket-name.test.js","type":"ADDED","insertions":96,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":3251,"sizeDeletions":-690},"patchSets":[{"number":"1","revision":"a6e18282e4c44a9da8faff90c05180f07f2c3473","parents":["b78064d491b3b99ea0a7d2d00f984b5c5ad3a0dc"],"ref":"refs/changes/15/6915/1","uploader":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"createdOn":1568739816,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":16,"deletions":-11},{"file":"lib/audit.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/auth.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/buckets/boray.js","type":"ADDED","insertions":170,"deletions":0},{"file":"lib/buckets/buckets.js","type":"ADDED","insertions":347,"deletions":0},{"file":"lib/buckets/common.js","type":"ADDED","insertions":153,"deletions":0},{"file":"lib/buckets/create.js","type":"ADDED","insertions":81,"deletions":0},{"file":"lib/buckets/delete.js","type":"ADDED","insertions":124,"deletions":0},{"file":"lib/buckets/head.js","type":"ADDED","insertions":72,"deletions":0},{"file":"lib/buckets/index.js","type":"ADDED","insertions":29,"deletions":0},{"file":"lib/buckets/list.js","type":"ADDED","insertions":102,"deletions":0},{"file":"lib/buckets/objects/create.js","type":"ADDED","insertions":154,"deletions":0},{"file":"lib/buckets/objects/delete.js","type":"ADDED","insertions":84,"deletions":0},{"file":"lib/buckets/objects/get.js","type":"ADDED","insertions":33,"deletions":0},{"file":"lib/buckets/objects/head.js","type":"ADDED","insertions":105,"deletions":0},{"file":"lib/buckets/objects/list.js","type":"ADDED","insertions":101,"deletions":0},{"file":"lib/buckets/objects/metadata/get.js","type":"ADDED","insertions":112,"deletions":0},{"file":"lib/buckets/objects/metadata/update.js","type":"ADDED","insertions":129,"deletions":0},{"file":"lib/buckets/options.js","type":"ADDED","insertions":39,"deletions":0},{"file":"lib/check_stream.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/common.js","type":"MODIFIED","insertions":709,"deletions":-7},{"file":"lib/conditional_request.js","type":"ADDED","insertions":225,"deletions":0},{"file":"lib/configure.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/dir.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/errors.js","type":"MODIFIED","insertions":70,"deletions":-1},{"file":"lib/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/jobs/common.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/jobs/create.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/jobs/error.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/jobs/fail.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/jobs/get.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/jobs/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/jobs/input.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/jobs/list.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/jobs/output.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/jobs/post.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/link.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/medusa/connector.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/medusa/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/medusa/routes.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/obj.js","type":"MODIFIED","insertions":46,"deletions":-615},{"file":"lib/other.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/server.js","type":"MODIFIED","insertions":163,"deletions":-19},{"file":"lib/throttle.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/abort.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/del.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/get.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/redirect.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/upload.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/utils.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"main.js","type":"MODIFIED","insertions":43,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"sapi_manifests/muskie/template","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"test/bucket-name.test.js","type":"ADDED","insertions":96,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":3251,"sizeDeletions":-690}],"allReviewers":[{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}]}