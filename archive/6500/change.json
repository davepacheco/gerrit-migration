{"project":"joyent/bugview","branch":"master","id":"I3ee81c0cc4a5da2efc857c7f8d8d2fe231775ae1","number":"6500","subject":"joyent/bugview#32 Use node-jiramark for parsing JIRA markup Reviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e Approved by: Joshua M. Clulow \u003cjmc@joyent.com\u003e","owner":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"url":"https://cr.joyent.us/6500","commitMessage":"joyent/bugview#32 Use node-jiramark for parsing JIRA markup\nReviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\nApproved by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\n","createdOn":1561500858,"lastUpdated":1562966502,"open":false,"status":"MERGED","comments":[{"timestamp":1561500858,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 1."},{"timestamp":1561500875,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1561501594,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 2: Commit message was updated."},{"timestamp":1561506722,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 3."},{"timestamp":1561506739,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1561759827,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 4."},{"timestamp":1561759844,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1562887521,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 4:\n\n(6 comments)"},{"timestamp":1562902002,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 5."},{"timestamp":1562902019,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1562902092,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 5:\n\n(6 comments)"},{"timestamp":1562918081,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 5: Code-Review+1\n\nThank you for the changes!"},{"timestamp":1562966437,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 5: Integration-Approval+1\n\nChecked with Cody and he redid all the tests listed in the ticket, so: I approve!"},{"timestamp":1562966490,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1562966502,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Cody Peter Mello"}],"currentPatchSet":{"number":"6","revision":"3ee81c0cc4a5da2efc857c7f8d8d2fe231775ae1","parents":["a5186527eb2c5f8b8327d5f899d15c2528d0fa84"],"ref":"refs/changes/00/6500/6","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1562966490,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1562902019,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562918081,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1562966437,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"SUBM","value":"1","grantedOn":1562966502,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"jirapub.js","type":"MODIFIED","insertions":154,"deletions":-51},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"templates/primary.html","type":"MODIFIED","insertions":55,"deletions":0}],"sizeInsertions":215,"sizeDeletions":-56},"patchSets":[{"number":"1","revision":"bc4762908096eeb57594d9da5c73b26857cd9e4b","parents":["b57b835af7b4e9e92f3ae70eb0935c0ba0978ffc"],"ref":"refs/changes/00/6500/1","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1561500858,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1561500875,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"jirapub.js","type":"MODIFIED","insertions":107,"deletions":-31},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"templates/primary.html","type":"MODIFIED","insertions":51,"deletions":0}],"sizeInsertions":164,"sizeDeletions":-36},{"number":"2","revision":"b3268ddd535b4a2c793387f9687996248f6163ae","parents":["b57b835af7b4e9e92f3ae70eb0935c0ba0978ffc"],"ref":"refs/changes/00/6500/2","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1561501594,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1561500875,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"jirapub.js","type":"MODIFIED","insertions":107,"deletions":-31},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"templates/primary.html","type":"MODIFIED","insertions":51,"deletions":0}],"sizeInsertions":164,"sizeDeletions":-36},{"number":"3","revision":"abb9104c5f0d8f483d2742735adf660cf4af6e50","parents":["b57b835af7b4e9e92f3ae70eb0935c0ba0978ffc"],"ref":"refs/changes/00/6500/3","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1561506722,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1561506739,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"jirapub.js","type":"MODIFIED","insertions":110,"deletions":-31},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"templates/primary.html","type":"MODIFIED","insertions":55,"deletions":0}],"sizeInsertions":171,"sizeDeletions":-36},{"number":"4","revision":"270acb967a31c6510ea4f48bad769f83b7ad988e","parents":["a5186527eb2c5f8b8327d5f899d15c2528d0fa84"],"ref":"refs/changes/00/6500/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1561759827,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1561759844,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"jirapub.js","line":43,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"var JIRA_OPS ?"},{"file":"jirapub.js","line":43,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"jirapub.js","line":159,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I think I\u0027d probably try and keep the TEMPLATE_PRIMARY_KEYS definition closer to this case block, so that it\u0027s more obvious they have to be in sync?\n\nAlternatively, something like...\n\n    var keys \u003d {\n        CONTAINER: content,\n        HTTP: CONFIG.http_proto,\n        TITLE: title,\n    };\n\n    var re \u003d new RegExp(\u0027%%(\u0027 + Object.keys(keys).join(\u0027|\u0027) + \u0027)%%\u0027, \u0027g\u0027);\n\n    out \u003d out.replace(re, function replaceKey(_, key) {\n        return (keys[key] || \u0027\u0027);\n    });\n\n... so that it can\u0027t ever be out of sync."},{"file":"jirapub.js","line":159,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve refactored it to be a variant on the above."},{"file":"jirapub.js","line":864,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Does this effectively strip a {block}-style directive from the front of a line?  A comment to that effect would make this clearer."},{"file":"jirapub.js","line":864,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"jirapub.js","line":868,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Perhaps this function could use a comment to clarify that we\u0027re leaving two unbalanced \u003cdiv\u003e blocks open?"},{"file":"jirapub.js","line":868,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"jirapub.js","line":920,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Should we assert that \"closing\" is not null here?"},{"file":"jirapub.js","line":920,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"jirapub.js","line":993,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"We are a parenthetical return family in this house!\n\n(Also L985 above)"},{"file":"jirapub.js","line":993,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"jirapub.js","type":"MODIFIED","insertions":109,"deletions":-31},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"templates/primary.html","type":"MODIFIED","insertions":55,"deletions":0}],"sizeInsertions":170,"sizeDeletions":-36},{"number":"5","revision":"50b85d0e8580d97d314ad2d5a9b2c8d630c4b3fc","parents":["a5186527eb2c5f8b8327d5f899d15c2528d0fa84"],"ref":"refs/changes/00/6500/5","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1562902002,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562918081,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1562966437,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1562902019,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"jirapub.js","type":"MODIFIED","insertions":154,"deletions":-51},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"templates/primary.html","type":"MODIFIED","insertions":55,"deletions":0}],"sizeInsertions":215,"sizeDeletions":-56},{"number":"6","revision":"3ee81c0cc4a5da2efc857c7f8d8d2fe231775ae1","parents":["a5186527eb2c5f8b8327d5f899d15c2528d0fa84"],"ref":"refs/changes/00/6500/6","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1562966490,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1562966502,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562918081,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1562966437,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1562902019,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"jirapub.js","type":"MODIFIED","insertions":154,"deletions":-51},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"templates/primary.html","type":"MODIFIED","insertions":55,"deletions":0}],"sizeInsertions":215,"sizeDeletions":-56}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}]}