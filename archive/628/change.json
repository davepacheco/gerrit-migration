{"project":"joyent/sdc-vm-agent","branch":"master","id":"I7e2d12127379083ee3235137e2b73f2b30be7fec","number":"628","subject":"AGENT-1039 sdc-vm-agent should use node 4.x Reviewed by: Orlando Vazquez \u003corlando@joyent.com\u003e Reviewed by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"url":"https://cr.joyent.us/628","commitMessage":"AGENT-1039 sdc-vm-agent should use node 4.x\nReviewed by: Orlando Vazquez \u003corlando@joyent.com\u003e\nReviewed by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1475884660,"lastUpdated":1476213063,"open":false,"status":"MERGED","comments":[{"timestamp":1475884660,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 1."},{"timestamp":1475884662,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 708b1883901f606a5af63c76f3c8374fe1354a50\n    \n    sdc-vm-agent should use node 4.x"},{"timestamp":1475884747,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1475884896,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 1:\n\nI\u0027ve run the vm-agent tests and they all pass with this version as built from jenkins using TRY_BRANCH\u003dAGENT-1039. I also created a copy of that build with the preinstall logic reversed (to force failure) and saw that the package refused to install when the AGENT-1040 apm was installed."},{"timestamp":1475885034,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 1: Code-Review+1\n\n(1 comment)"},{"timestamp":1475885048,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1475885417,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1475885456,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 2."},{"timestamp":1475885457,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 110c931287c299f47fd443cb76ec667e49ad9475\n    \n    change stdout -\u003e stderr"},{"timestamp":1475885540,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1475886070,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1475886275,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1475888144,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 3: Commit message was updated."},{"timestamp":1476213058,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1476213063,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Josh Wilsdon"}],"currentPatchSet":{"number":"3","revision":"419bcb61638bb9d4c5389c7f531f186d9d825dda","parents":["27fed54f24d7dafe86d95b857ea71a372103cd24"],"ref":"refs/changes/28/628/3","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1475888144,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1475885540,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1475886070,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1475886275,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1476213058,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"SUBM","value":"1","grantedOn":1476213063,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"npm/preinstall.sh","type":"ADDED","insertions":24,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":27,"sizeDeletions":-2},"patchSets":[{"number":"1","revision":"12c5f124b020bb8a5ac04b48e09e2b293053c8ce","parents":["27fed54f24d7dafe86d95b857ea71a372103cd24"],"ref":"refs/changes/28/628/1","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1475884660,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1475884747,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1475885048,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1475885034,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"comments":[{"file":"npm/preinstall.sh","line":20,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Maybe this should go to stderr?"},{"file":"npm/preinstall.sh","line":20,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"sure. This changes the output from:\n\n[2016-10-07 23:05:17.667] [DEBUG] apm - stdout: FATAL: min-platform for this agent is 20141030T081701Z\n\nto:\n\n[2016-10-08 00:09:16.477] [DEBUG] apm - stderr: FATAL: min-platform for this agent is 20141030T081701Z"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"npm/preinstall.sh","type":"ADDED","insertions":24,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":27,"sizeDeletions":-2},{"number":"2","revision":"7e2d12127379083ee3235137e2b73f2b30be7fec","parents":["27fed54f24d7dafe86d95b857ea71a372103cd24"],"ref":"refs/changes/28/628/2","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1475885456,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1475885540,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1475886275,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1475886070,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"npm/preinstall.sh","type":"ADDED","insertions":24,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":27,"sizeDeletions":-2},{"number":"3","revision":"419bcb61638bb9d4c5389c7f531f186d9d825dda","parents":["27fed54f24d7dafe86d95b857ea71a372103cd24"],"ref":"refs/changes/28/628/3","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1475888144,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1475885540,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1475886275,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1476213058,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"SUBM","value":"1","grantedOn":1476213063,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1475886070,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"npm/preinstall.sh","type":"ADDED","insertions":24,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":27,"sizeDeletions":-2}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}]}