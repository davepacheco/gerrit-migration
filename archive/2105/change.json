{"project":"joyent/illumos-joyent","branch":"master","id":"Idfae20b5ffcad6bef48ac6df469fe8600ae3d26c","number":"2105","subject":"OS-6183 lxbrand needs pipe-max-size sysctl for ltp fcntl35 Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Approved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e","owner":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"url":"https://cr.joyent.us/2105","commitMessage":"OS-6183 lxbrand needs pipe-max-size sysctl for ltp fcntl35\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1497553926,"lastUpdated":1497627549,"open":false,"status":"MERGED","comments":[{"timestamp":1497553926,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 1."},{"timestamp":1497555613,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\n(1 comment)\n\nThis looks good except for the one question I had."},{"timestamp":1497555813,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1497559445,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 2."},{"timestamp":1497563414,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1497563771,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2:\n\nWith the patch applied, fcntl35 (along with the rest of LTP) passes as desired.  The sysctl itself appears to pay heed to the defined limits we have set up (min of 1 page, max of 8MB). Access from outside the NGZ is sane as usual."},{"timestamp":1497564203,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1497624101,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 3."},{"timestamp":1497626397,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1497627398,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1497627429,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1497627549,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Patrick Mooney"}],"currentPatchSet":{"number":"5","revision":"dfae20b5ffcad6bef48ac6df469fe8600ae3d26c","parents":["39f69486988c360d542ea3654ed361eef9ebc855"],"ref":"refs/changes/05/2105/5","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1497627429,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1497626397,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1497626397,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1497627549,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/brand/lx/procfs/lx_proc.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/brand/lx/procfs/lx_prvnops.c","type":"MODIFIED","insertions":78,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_fcntl.c","type":"MODIFIED","insertions":4,"deletions":-35},{"file":"usr/src/uts/common/brand/lx/syscall/lx_pipe.c","type":"MODIFIED","insertions":81,"deletions":-1}],"sizeInsertions":169,"sizeDeletions":-36},"patchSets":[{"number":"1","revision":"d03718bd870240c0373f53048944aff95e475cad","parents":["3fc35d0753009871edfbd4451bb5f51abf27db6d"],"ref":"refs/changes/05/2105/1","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1497553926,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/brand/lx/procfs/lx_prvnops.c","line":4473,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"I thought we were trying to make sure that the lx /proc would not cause a problem if files within are accessed by the GZ. Is that still the case?"},{"file":"usr/src/uts/common/brand/lx/procfs/lx_prvnops.c","line":4473,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Doh!  I meant to use the macro which extracts the zone from lxpnp.  Thanks for catching this."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/brand/lx/procfs/lx_proc.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/brand/lx/procfs/lx_prvnops.c","type":"MODIFIED","insertions":78,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_fcntl.c","type":"MODIFIED","insertions":3,"deletions":-34},{"file":"usr/src/uts/common/brand/lx/syscall/lx_pipe.c","type":"MODIFIED","insertions":75,"deletions":0}],"sizeInsertions":162,"sizeDeletions":-34},{"number":"2","revision":"ad32d81af4fbe8905ad99f2ef841d8352b7e1478","parents":["3fc35d0753009871edfbd4451bb5f51abf27db6d"],"ref":"refs/changes/05/2105/2","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1497559445,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1497563414,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1497564203,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/brand/lx/procfs/lx_proc.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/brand/lx/procfs/lx_prvnops.c","type":"MODIFIED","insertions":78,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_fcntl.c","type":"MODIFIED","insertions":4,"deletions":-35},{"file":"usr/src/uts/common/brand/lx/syscall/lx_pipe.c","type":"MODIFIED","insertions":81,"deletions":-1}],"sizeInsertions":169,"sizeDeletions":-36},{"number":"3","revision":"445a8fb93172a580a3580c35ed1707d3564c1da5","parents":["3fc35d0753009871edfbd4451bb5f51abf27db6d"],"ref":"refs/changes/05/2105/3","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1497624101,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1497626397,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1497626397,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/brand/lx/procfs/lx_proc.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/brand/lx/procfs/lx_prvnops.c","type":"MODIFIED","insertions":78,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_fcntl.c","type":"MODIFIED","insertions":4,"deletions":-35},{"file":"usr/src/uts/common/brand/lx/syscall/lx_pipe.c","type":"MODIFIED","insertions":81,"deletions":-1}],"sizeInsertions":169,"sizeDeletions":-36},{"number":"4","revision":"5d857ccf2ce992558f0f80a6477b5a406cb4bd8e","parents":["39f69486988c360d542ea3654ed361eef9ebc855"],"ref":"refs/changes/05/2105/4","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1497627398,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1497626397,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1497626397,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/brand/lx/procfs/lx_proc.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/brand/lx/procfs/lx_prvnops.c","type":"MODIFIED","insertions":78,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_fcntl.c","type":"MODIFIED","insertions":4,"deletions":-35},{"file":"usr/src/uts/common/brand/lx/syscall/lx_pipe.c","type":"MODIFIED","insertions":81,"deletions":-1}],"sizeInsertions":169,"sizeDeletions":-36},{"number":"5","revision":"dfae20b5ffcad6bef48ac6df469fe8600ae3d26c","parents":["39f69486988c360d542ea3654ed361eef9ebc855"],"ref":"refs/changes/05/2105/5","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1497627429,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1497626397,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1497626397,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1497627549,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/brand/lx/procfs/lx_proc.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/brand/lx/procfs/lx_prvnops.c","type":"MODIFIED","insertions":78,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_fcntl.c","type":"MODIFIED","insertions":4,"deletions":-35},{"file":"usr/src/uts/common/brand/lx/syscall/lx_pipe.c","type":"MODIFIED","insertions":81,"deletions":-1}],"sizeInsertions":169,"sizeDeletions":-36}],"allReviewers":[{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}]}