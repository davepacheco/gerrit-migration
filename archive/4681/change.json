{"project":"joyent/node-imgmanifest","branch":"master","id":"I3ddc417f33a9820f0a499613e3059a99eb2fd698","number":"4681","subject":"TRITON-681 node-imgmanifest support for requirements.bootrom Reviewed by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e Reviewed by: Pedro Palazon Candel \u003cpedro@joyent.com\u003e Approved by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e Approved by: Pedro Palazon Candel \u003c","owner":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"url":"https://cr.joyent.us/4681","commitMessage":"TRITON-681 node-imgmanifest support for requirements.bootrom\nReviewed by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e\nReviewed by: Pedro Palazon Candel \u003cpedro@joyent.com\u003e\nApproved by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e\nApproved by: Pedro Palazon Candel \u003cpedro@joyent.com\u003e\n","createdOn":1534272583,"lastUpdated":1534347416,"open":false,"status":"MERGED","comments":[{"timestamp":1534272583,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Uploaded patch set 1."},{"timestamp":1534272607,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n(7 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1534272965,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Uploaded patch set 2."},{"timestamp":1534272994,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1534275297,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Uploaded patch set 3."},{"timestamp":1534275321,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1534320353,"reviewer":{"name":"Pedro Palaz贸n Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\n(2 comments)\n\nCouple minor comments regarding strict equality and errors. Otherwise, LGTM. I assume tests are passing, though :-)"},{"timestamp":1534322154,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1534338518,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Uploaded patch set 4."},{"timestamp":1534338542,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1534338760,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Uploaded patch set 5."},{"timestamp":1534338784,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1534338804,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 3:\n\n(3 comments)\n\nThanks for the quick reviews.   Everything should be fixed now.  `make check` and `make test` are clean."},{"timestamp":1534341082,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 5:\n\nOne thing: this feature means that we must have separate images between KVM and bhyve?\n\nWhat happens if we have an image that\u0027ll work on both KVM and bios bhyve? Or is this even worth worrying about?"},{"timestamp":1534343482,"reviewer":{"name":"Pedro Palaz贸n Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1"},{"timestamp":1534343672,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 5:\n\nIf an image uses uefi, it will not work on kvm as our kvm does not have support for uefi.  This is not the ideal state - we would prefer to have images that work on kvm and bhyve.  TRITON-680 explains why this path is being taken."},{"timestamp":1534346942,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1"},{"timestamp":1534347371,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 6: Commit message was updated."},{"timestamp":1534347416,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Mike Gerdts"}],"currentPatchSet":{"number":"6","revision":"4946798034bea66aec89339932f45a3034fd2a05","parents":["032fccdc4ead72e8ff51a803ed3b6a157d02bacc"],"ref":"refs/changes/81/4681/6","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1534347371,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1534338784,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534343482,"by":{"name":"Pedro Palaz贸n Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1534343482,"by":{"name":"Pedro Palaz贸n Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534346942,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1534346942,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"SUBM","value":"1","grantedOn":1534347416,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"lib/imgmanifest.js","type":"MODIFIED","insertions":33,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/basics.test.js","type":"MODIFIED","insertions":101,"deletions":-1}],"sizeInsertions":135,"sizeDeletions":-3},"patchSets":[{"number":"1","revision":"e92d235ed3b50e8363e284cb017de0ae9a1f28d9","parents":["032fccdc4ead72e8ff51a803ed3b6a157d02bacc"],"ref":"refs/changes/81/4681/1","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1534272583,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1534272607,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/imgmanifest.js","line":1398,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"else and right brace should be on same line"},{"file":"lib/imgmanifest.js","line":1398,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"literal string using double-quote instead of single"},{"file":"test/basics.test.js","line":232,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"missing space before left brace"},{"file":"test/basics.test.js","line":235,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"literal string using double-quote instead of single"},{"file":"test/basics.test.js","line":253,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"missing space before left brace"},{"file":"test/basics.test.js","line":273,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"missing space before left brace"},{"file":"test/basics.test.js","line":276,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"literal string using double-quote instead of single"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/imgmanifest.js","type":"MODIFIED","insertions":34,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/basics.test.js","type":"MODIFIED","insertions":94,"deletions":0}],"sizeInsertions":129,"sizeDeletions":-1},{"number":"2","revision":"f3de06bf528e3d086469e7f98351ae2f0d81b166","parents":["032fccdc4ead72e8ff51a803ed3b6a157d02bacc"],"ref":"refs/changes/81/4681/2","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1534272965,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1534272994,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/imgmanifest.js","type":"MODIFIED","insertions":33,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/basics.test.js","type":"MODIFIED","insertions":100,"deletions":0}],"sizeInsertions":134,"sizeDeletions":-1},{"number":"3","revision":"9f0e56d89d2275b83730d6555c3690bbc7f4d0b5","parents":["032fccdc4ead72e8ff51a803ed3b6a157d02bacc"],"ref":"refs/changes/81/4681/3","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1534275297,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1534275321,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/imgmanifest.js","line":1389,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Since this is used several times, I\u0027d assign it to its own variable."},{"file":"lib/imgmanifest.js","line":1389,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Done"},{"file":"lib/imgmanifest.js","line":1407,"reviewer":{"name":"Pedro Palaz贸n Candel","email":"pedro@joyent.com","username":"kusor"},"message":"You want `\u003d\u003d\u003d` here instead of `\u003d\u003d`."},{"file":"lib/imgmanifest.js","line":1407,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Done"},{"file":"lib/imgmanifest.js","line":1416,"reviewer":{"name":"Pedro Palaz贸n Candel","email":"pedro@joyent.com","username":"kusor"},"message":"I think you want this one to be added to the error list only if the brand is already set to bhyve, otherwise it could happen that you add two errors, one for the missing or invalid brand, and another one for the invalid bootrom. That would likely make things more confusing"},{"file":"lib/imgmanifest.js","line":1416,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/imgmanifest.js","type":"MODIFIED","insertions":34,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/basics.test.js","type":"MODIFIED","insertions":101,"deletions":-1}],"sizeInsertions":136,"sizeDeletions":-3},{"number":"4","revision":"779f2e90d18d9ad475b53fde1932493831a513cc","parents":["032fccdc4ead72e8ff51a803ed3b6a157d02bacc"],"ref":"refs/changes/81/4681/4","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1534338518,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1534338542,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/imgmanifest.js","type":"MODIFIED","insertions":34,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/basics.test.js","type":"MODIFIED","insertions":101,"deletions":-1}],"sizeInsertions":136,"sizeDeletions":-3},{"number":"5","revision":"3ddc417f33a9820f0a499613e3059a99eb2fd698","parents":["032fccdc4ead72e8ff51a803ed3b6a157d02bacc"],"ref":"refs/changes/81/4681/5","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1534338760,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1534338784,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534343482,"by":{"name":"Pedro Palaz贸n Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1534343482,"by":{"name":"Pedro Palaz贸n Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534346942,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1534346942,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/imgmanifest.js","type":"MODIFIED","insertions":33,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/basics.test.js","type":"MODIFIED","insertions":101,"deletions":-1}],"sizeInsertions":135,"sizeDeletions":-3},{"number":"6","revision":"4946798034bea66aec89339932f45a3034fd2a05","parents":["032fccdc4ead72e8ff51a803ed3b6a157d02bacc"],"ref":"refs/changes/81/4681/6","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1534347371,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1534338784,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534343482,"by":{"name":"Pedro Palaz贸n Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1534343482,"by":{"name":"Pedro Palaz贸n Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534346942,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1534346942,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"SUBM","value":"1","grantedOn":1534347416,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"lib/imgmanifest.js","type":"MODIFIED","insertions":33,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/basics.test.js","type":"MODIFIED","insertions":101,"deletions":-1}],"sizeInsertions":135,"sizeDeletions":-3}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Pedro Palaz贸n Candel","email":"pedro@joyent.com","username":"kusor"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}]}