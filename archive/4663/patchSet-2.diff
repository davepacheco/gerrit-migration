commit 02a64cfbb85e422730e9e7e182c468da625d2c6e (refs/changes/63/4663/2)
Author: Mike Gerdts <mike.gerdts@joyent.com>
Date:   2018-08-14T14:03:48+00:00 (1 year, 2 months ago)
    
    OS-7119 adjust pci slots to support windows

diff --git a/usr/src/lib/brand/bhyve/zone/boot.c b/usr/src/lib/brand/bhyve/zone/boot.c
index 1e2c6771be..f4a3f32d18 100644
--- a/usr/src/lib/brand/bhyve/zone/boot.c
+++ b/usr/src/lib/brand/bhyve/zone/boot.c
@@ -43,12 +43,12 @@
 
 typedef enum {
 	PCI_SLOT_HOSTBRIDGE = 0,	/* Not used here, but reserved */
-	PCI_SLOT_LPC,
-	PCI_SLOT_CD,
+	PCI_SLOT_CD = 3,		/* Windows ahci allows slots 3 - 6 */
 	PCI_SLOT_BOOT_DISK,
 	PCI_SLOT_OTHER_DISKS,
 	PCI_SLOT_NICS,
 	PCI_SLOT_FBUF = 30,
+	PCI_SLOT_LPC = 31,		/* Windows requires lpc in slot 31 */
 } pci_slot_t;
 
 static boolean_t debug;
