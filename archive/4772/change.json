{"project":"joyent/sdc-cnapi","branch":"master","id":"I27cc518f18707e10b18e3b99f04d782c163babf1","number":"4772","subject":"TRITON-740 Following upgrade to node v6 CNAPI dies in DAPI schema validation after having parsed overprovision_ratios value from moray with \"querystring\" module.","owner":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"url":"https://cr.joyent.us/4772","commitMessage":"TRITON-740 Following upgrade to node v6 CNAPI dies in DAPI schema validation after having parsed overprovision_ratios value from moray with \"querystring\" module.\n","createdOn":1535666746,"lastUpdated":1535754262,"open":false,"status":"MERGED","comments":[{"timestamp":1535666746,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 1."},{"timestamp":1535666748,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 6312aff44255daffb932ccb3d9fedca59b64f0c5\n    \n    first cut"},{"timestamp":1535666778,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1535674293,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\n(2 comments)\n\nPerhaps use \u0027qs\u0027 instead of \u0027querystring\u0027 in lib/endpoints/servers.js as well? Even though it isn\u0027t using `.parse()`. Fine either way tho."},{"timestamp":1535738429,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 1: Code-Review+1 Integration-Approval+1\n\n(2 comments)"},{"timestamp":1535738438,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 2."},{"timestamp":1535738440,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit ce542c19f67d1476d3129daf6d85f2b368dbd982\n    \n    trent feedback"},{"timestamp":1535746273,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1535746458,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 4."},{"timestamp":1535746460,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 27b4999fd5ef30fc31bfc375389303ba0bfbc129\n    \n    trent feedback\n    \n    commit 1f5debb675734b1e6fa7200af0f5b80d789edeb2\n    \n    first cut"},{"timestamp":1535748432,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1"},{"timestamp":1535749565,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Orlando Vazquez"},{"timestamp":1535754034,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2:\n\n\"make check\" passed ok"},{"timestamp":1535754262,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4:\n\n\"make check\" passed ok"}],"currentPatchSet":{"number":"4","revision":"27cc518f18707e10b18e3b99f04d782c163babf1","parents":["8217690984ad25c7a05c1a4738d94c5df121e2ba"],"ref":"refs/changes/72/4772/4","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1535746458,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1535748432,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1535748432,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1535749565,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":0,"deletions":-27},{"file":"lib/endpoints/servers.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/models/server.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/test-servers.js","type":"MODIFIED","insertions":92,"deletions":-1}],"sizeInsertions":98,"sizeDeletions":-32},"patchSets":[{"number":"1","revision":"bf6c151729d736080c90eb4068131c08a80be2fb","parents":["eb54943ae270becd065e3b15eacbd3cd7c2ca0e2"],"ref":"refs/changes/72/4772/1","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1535666746,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1535666778,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1535738429,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1535738429,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"comments":[{"file":"lib/models/server.js","line":1173,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Let\u0027s explicitly use the particular options. At one time qs *did* do plain objects by default I believe:\n\n```\nvar obj \u003d qs.parse(theQueryString, {allowDots: false, plainObjects: false});\n```"},{"file":"lib/models/server.js","line":1173,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Done"},{"file":"test/test-servers.js","line":302,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Should this test remove the change it has made to the headnode to clean up?"},{"file":"test/test-servers.js","line":302,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":0,"deletions":-27},{"file":"lib/models/server.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/test-servers.js","type":"MODIFIED","insertions":59,"deletions":-1}],"sizeInsertions":62,"sizeDeletions":-30},{"number":"2","revision":"1cc6a1117f16c0ce4f46df17a24c3c479c90a730","parents":["eb54943ae270becd065e3b15eacbd3cd7c2ca0e2"],"ref":"refs/changes/72/4772/2","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1535738438,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":0,"deletions":-27},{"file":"lib/endpoints/servers.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/models/server.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/test-servers.js","type":"MODIFIED","insertions":92,"deletions":-1}],"sizeInsertions":98,"sizeDeletions":-32},{"number":"3","revision":"ffb453e062ee97dfbf97f2f4cc78a89cc9a35aea","parents":["eb54943ae270becd065e3b15eacbd3cd7c2ca0e2"],"ref":"refs/changes/72/4772/3","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1535746273,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"NO_CODE_CHANGE","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":0,"deletions":-27},{"file":"lib/endpoints/servers.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/models/server.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/test-servers.js","type":"MODIFIED","insertions":92,"deletions":-1}],"sizeInsertions":98,"sizeDeletions":-32},{"number":"4","revision":"27cc518f18707e10b18e3b99f04d782c163babf1","parents":["8217690984ad25c7a05c1a4738d94c5df121e2ba"],"ref":"refs/changes/72/4772/4","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1535746458,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1535748432,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1535748432,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1535749565,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":0,"deletions":-27},{"file":"lib/endpoints/servers.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/models/server.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/test-servers.js","type":"MODIFIED","insertions":92,"deletions":-1}],"sizeInsertions":98,"sizeDeletions":-32}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}]}