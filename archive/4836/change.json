{"project":"joyent/illumos-joyent","branch":"master","id":"If1c2d8f579dd97fb9d34631bfb5488fc33cdc85d","number":"4836","subject":"OS-7247 ddi_fm_fini(9F) needs to be more explicit about when you should call it OS-7248 ddi_fm_capable(9F) has wrong synopsis Reviewed by: Mike Zeller \u003cmike.zeller@joyent.com\u003e Reviewed by: Rob Johnston \u003crob.johnston@joyent.com\u003e Approved by: Rob Johnston \u003c","owner":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"url":"https://cr.joyent.us/4836","commitMessage":"OS-7247 ddi_fm_fini(9F) needs to be more explicit about when you should call it\nOS-7248 ddi_fm_capable(9F) has wrong synopsis\nReviewed by: Mike Zeller \u003cmike.zeller@joyent.com\u003e\nReviewed by: Rob Johnston \u003crob.johnston@joyent.com\u003e\nApproved by: Rob Johnston \u003crob.johnston@joyent.com\u003e\n","createdOn":1536860241,"lastUpdated":1536882686,"open":false,"status":"MERGED","comments":[{"timestamp":1536860241,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 1."},{"timestamp":1536860261,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\nA rendered version is available at https://us-east.manta.joyent.com/rmustacc/public/webrevs/OS-7247/index.html."},{"timestamp":1536860882,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1536863990,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1536873376,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 2."},{"timestamp":1536873379,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(2 comments)\n\nWebrev has also been updated to reflect the new manual page."},{"timestamp":1536873863,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1536874088,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1536877088,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1536882457,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 3: Patch Set 2 was rebased."},{"timestamp":1536882651,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1536882686,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Robert Mustacchi"}],"currentPatchSet":{"number":"4","revision":"f1c2d8f579dd97fb9d34631bfb5488fc33cdc85d","parents":["8ebfdc66bf6e05607c459ce7468ce7ec72f6f8c6"],"ref":"refs/changes/36/4836/4","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1536882651,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536873863,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536874088,"by":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1536877088,"by":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}},{"type":"SUBM","value":"1","grantedOn":1536882686,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/man/man9f/ddi_fm_init.9f","type":"MODIFIED","insertions":152,"deletions":-173}],"sizeInsertions":152,"sizeDeletions":-173},"patchSets":[{"number":"1","revision":"fca5fb8a937a9d989095167141b26c322a15ed1f","parents":["2f4bb1323012f8506188ec88b93ddfe2f34cf1a0"],"ref":"refs/changes/36/4836/1","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1536860241,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/man/man9f/ddi_fm_init.9f","line":41,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"This should still be an int?\n\n 870 int\n 871 ddi_fm_capable(dev_info_t *dip)\n 872 {\n 873         struct i_ddi_fmhdl *fmhdl \u003d DEVI(dip)-\u003edevi_fmhdl;\n 874\n 875         if (fmhdl \u003d\u003d NULL)\n 876                 return (DDI_FM_NOT_CAPABLE);\n 877\n 878         return (fmhdl-\u003efh_cap);\n 879 }"},{"file":"usr/src/man/man9f/ddi_fm_init.9f","line":41,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Turns out the old manual page was just dead wrong about the signature. I\u0027ve updated that and added a RETURN VALUES section."},{"file":"usr/src/man/man9f/ddi_fm_init.9f","line":137,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"s/bi/bit/"},{"file":"usr/src/man/man9f/ddi_fm_init.9f","line":137,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/man/man9f/ddi_fm_init.9f","type":"MODIFIED","insertions":148,"deletions":-173}],"sizeInsertions":148,"sizeDeletions":-173},{"number":"2","revision":"c7fedf9cc15543903125e6bf53d9bdf06e2c0514","parents":["2f4bb1323012f8506188ec88b93ddfe2f34cf1a0"],"ref":"refs/changes/36/4836/2","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1536873376,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536873863,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536874088,"by":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1536877088,"by":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/man/man9f/ddi_fm_init.9f","type":"MODIFIED","insertions":152,"deletions":-173}],"sizeInsertions":152,"sizeDeletions":-173},{"number":"3","revision":"176226a3d284f1466f310963ee2a2116309295ed","parents":["8ebfdc66bf6e05607c459ce7468ce7ec72f6f8c6"],"ref":"refs/changes/36/4836/3","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1536882457,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536873863,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536874088,"by":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1536877088,"by":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/man/man9f/ddi_fm_init.9f","type":"MODIFIED","insertions":152,"deletions":-173}],"sizeInsertions":152,"sizeDeletions":-173},{"number":"4","revision":"f1c2d8f579dd97fb9d34631bfb5488fc33cdc85d","parents":["8ebfdc66bf6e05607c459ce7468ce7ec72f6f8c6"],"ref":"refs/changes/36/4836/4","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1536882651,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1536882686,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536873863,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536874088,"by":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1536877088,"by":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/man/man9f/ddi_fm_init.9f","type":"MODIFIED","insertions":152,"deletions":-173}],"sizeInsertions":152,"sizeDeletions":-173}],"allReviewers":[{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}]}