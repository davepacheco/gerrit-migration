{"project":"joyent/node-sdc-clients","branch":"master","id":"I93af39d56fba23f40db6b0dc99950286ed47d1f5","number":"4901","subject":"TRITON-774 imgapi should allow admin-only imports from URLs Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"url":"https://cr.joyent.us/4901","commitMessage":"TRITON-774 imgapi should allow admin-only imports from URLs\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1538399191,"lastUpdated":1542715845,"open":false,"status":"MERGED","comments":[{"timestamp":1538399191,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 1."},{"timestamp":1538399196,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 9c97bc9d74456c614d6b9868f963b2405f726608\n    \n    TRITON-774 imgapi should allow admin-only add-file from URLs"},{"timestamp":1538399220,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n(2 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1538399743,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 2."},{"timestamp":1538399748,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 87208df47f6c014102090e17d4e10a4635cc97e7\n    \n    TRITON-774 imgapi should allow admin-only add-file from URLs"},{"timestamp":1538399771,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1538606790,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(6 comments)"},{"timestamp":1538607271,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1538658217,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 3."},{"timestamp":1538658222,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit a3065fcf7eaa05e94b2fd1452a0ceb858bcda1e4\n    \n    address trent\u0027s feedback"},{"timestamp":1538658245,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1538658398,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 3:\n\n(7 comments)\n\nI\u0027ve addressed these in Patch Set 3."},{"timestamp":1539212251,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1539789721,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 4."},{"timestamp":1539789729,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit a10ba26d314d430cb026152d40532a1bbe0b5c99\n    \n    TRITON-774 imgapi should allow admin-only add-file from URLs"},{"timestamp":1539789745,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539791847,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 4:\n\nPatch set 4 just changes the imgapi endpoint to be /images/:uuid/file/from-url and fixes a minor typo"},{"timestamp":1540500206,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4: Code-Review+1\n\nLGTM. We\u0027ll want to bump the minor version in package.json to then publish the new ver."},{"timestamp":1542371683,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1542371688,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit fd1a66583a7fe13f96cba2ec860c675e31091128\n    \n    TRITON-774 imgapi should allow admin-only add-file from URLs\n    Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e"},{"timestamp":1542371756,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 5:\n\n\u003e LGTM. We\u0027ll want to bump the minor version in package.json to then\n \u003e publish the new ver.\n\nRight, we had already bumped from 12.0.0 to 12.1.0, so patch-set 5 just adds the \u0027Reviewed by\u0027 field to the commit message."},{"timestamp":1542371856,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 6."},{"timestamp":1542371861,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit f6c66a702f22d6ba192cddb5eeccf17840adba75\n    \n    TRITON-774 imgapi should allow admin-only add-file from URLs\n    Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\n    \n    commit 3d668a961ea2fff59afc41d78a555e02cf0e0c24\n    \n    TRITON-886 Add support for `channel` option to IMGAPI client `getImage` method.\n    Reviewed by: Isaac Davis \u003cisaac.davis@joyent.com\u003e"},{"timestamp":1542371883,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1542371970,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 5:\n\nOnce more, with feeling^Wrebase."},{"timestamp":1542394278,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 6:\n\n\u003e Once more, with feeling^Wrebase.\n\nHrm. I see that \"commit 3d668a961ea2fff59afc41d78a555e02cf0e0c24\" is listed in your latest grr. However, the resulting latest patchset still thinks it is based off the penultimate commit (047b72eb0d30d5cc9ebd8af238f174e3dc45a8b7) on the master branch, hence the \"Merge Conflict\".\n\nHow are you rebasing your local working copy grr branch?"},{"timestamp":1542394455,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 6:\n\nI get the impression  that you somehow *merged* in the master change (https://github.com/joyent/node-sdc-clients/commit/3d668a961ea2fff59afc41d78a555e02cf0e0c24) instead of rebasing your branch on the latest tip of \"master\"."},{"timestamp":1542622770,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 7: Commit message was updated."},{"timestamp":1542622997,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 7:\n\n\u003e I get the impression  that you somehow *merged* in the master\n \u003e change (https://github.com/joyent/node-sdc-clients/commit/3d668a961ea2fff59afc41d78a555e02cf0e0c24)\n \u003e instead of rebasing your branch on the latest tip of \"master\".\n\nI had done a \u0027git pull --rebase\u0027, which I thought pulls from the origin, rebasing my changes on top of it. I\u0027m seeing this output from git log, but I agree that it sounds like I\u0027d somehow pulled the master changes into my branch the last time :/\n\nhttps://gist.github.com/timfoster/83b4c37d4daaf61395169f6e1dc4541e"},{"timestamp":1542663575,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 7: Code-Review+1 Integration-Approval+1"},{"timestamp":1542715823,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 8: Commit message was updated."},{"timestamp":1542715828,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 8:\n\nNew commits:\n    \n    commit b581022ec00042b46f39156ed2e6950763d4c59b\n    \n    TRITON-774 imgapi should allow admin-only add-file from URLs\n    Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\n    Approved by: Trent Mick \u003ctrentm@gmail.com\u003e"},{"timestamp":1542715845,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Tim Foster"}],"currentPatchSet":{"number":"8","revision":"93af39d56fba23f40db6b0dc99950286ed47d1f5","parents":["3d668a961ea2fff59afc41d78a555e02cf0e0c24"],"ref":"refs/changes/01/4901/8","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1542715823,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1542371883,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1542663575,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1542663575,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1542715845,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/imgapi.js","type":"MODIFIED","insertions":102,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":108,"sizeDeletions":-1},"patchSets":[{"number":"1","revision":"e4e609f76dbf76e8c70a8ae07462f44291b8bb77","parents":["047b72eb0d30d5cc9ebd8af238f174e3dc45a8b7"],"ref":"refs/changes/01/4901/1","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1538399191,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1538399220,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/imgapi.js","line":1590,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"improper block comment"},{"file":"lib/imgapi.js","line":1602,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line \u003e 80 characters"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/imgapi.js","type":"MODIFIED","insertions":100,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":106,"sizeDeletions":-1},{"number":"2","revision":"a4462b832f86d71e532d9bf971c6d879a85c05ad","parents":["047b72eb0d30d5cc9ebd8af238f174e3dc45a8b7"],"ref":"refs/changes/01/4901/2","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1538399743,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1538399771,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/imgapi.js","line":1590,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I wonder if this will get in the way of testing.  Fine to start with this restriction, however."},{"file":"lib/imgapi.js","line":1590,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Yeah, during testing I had https \u003d require(\u0027http\u0027) for a while, then switched to msigned manta urls (via Cyberduck) so it wasn\u0027t really a big deal"},{"file":"lib/imgapi.js","line":1591,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I guess this could include \u0027xz\u0027 now."},{"file":"lib/imgapi.js","line":1591,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Done"},{"file":"lib/imgapi.js","line":1607,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I know you just inherited this, but this could now be `assert.uuid`."},{"file":"lib/imgapi.js","line":1607,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Done"},{"file":"lib/imgapi.js","line":1620,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"```\n  \"engines\": {\n    \"node\": \"\u003e\u003d0.8.14\"\n  },\n```\n\nin node-sdc-clients\u0027 package.json. However, the min supported node for sdc-imgapi-cli.git is node 0.10.  Still that\u0027s without endsWith, IIRC."},{"file":"lib/imgapi.js","line":1620,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Yep :-/"},{"file":"lib/imgapi.js","line":1634,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Generally prefer `\u003d\u003d\u003d` always to avoid surprises on type coercion."},{"file":"lib/imgapi.js","line":1634,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Done"},{"file":"lib/imgapi.js","line":1635,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Should we be parsing the URL and looking at the \"path\" part of it? E.g. on a signed URL like \u0027https://us-east.manta.joyent.com/trent.mick/foo.txt?algorithm\u003dRSA-SHA256...\u0027"},{"file":"lib/imgapi.js","line":1635,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Done"},{"file":"lib/imgapi.js","line":1649,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Hrm, I was wondering about adding a separate IMGAPI endpoint for this. It might help in the restify implementation of it and logging/metrics (which include the route name). Not sure. I haven\u0027t looked at your sdc-imgapi.git change yet."},{"file":"lib/imgapi.js","line":1649,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"I certainly don\u0027t mind doing that if you\u0027d prefer?"},{"file":"lib/imgapi.js","line":1649,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Okay, sorry for the delay.\n\n1. I see that I didn\u0027t notice that it *is* a separate endpoint: POST vs PUT.\n\n2. I asked around a (very) little bit about preferences. What about adding some indication of the action to the URL of the endpoint? E.g.:  `POST /images/:uuid/file/from-url` instead of `POST /image/:uuid/file`.\n\nSome arguments for the `.../from-url` form:\n\n- Restify endpoint management is easier if each distinct endpoint has a unique\n  route (i.e. `VERB /path/pattern/...`). Easier, but not impossible. E.g.\n  we have both IMGAPI\u0027s AddImageAcl and RemoveImageAcl on the same \"route\"\n  in restify:\n  \n    ```\n        server.post(\n            {path: \u0027/images/:uuid/acl\u0027, name: \u0027AddImageAcl\u0027},\n            reqAuth,\n            reqValidUuid,\n            channels.reqChannel,\n            resume,\n            restify.bodyParser({mapParams: false}),\n            reqGetImage,\n            reqEnsureAccountIsImageOwner,\n            apiAddImageAcl,                 \u003c--- here\n            apiRemoveImageAcl,              \u003c--- and here\n            ...\n    ```\n    \n  They are distinguished by an \"action\" query param:\n  `POST /images/:uuid/acl?action\u003dadd` and `POST /images/:uuid/acl?action\u003dremove`.\n  That seemed fine at the time. However, both these requests get the same\n  route name, so our logging and prometheus metrics convolve these two.\n  \n  We are *fine* in this case because we have the POST verb free to use.\n  However, that\u0027s just a bit lucky. If we added a third way to specify an\n  image file, then we\u0027d not be able to just fine another HTTP verb.\n  \n- There is some prior art, e.g. in CNAPI endpoints:\n\n        VmKill (POST /servers/:server_uuid/vms/:uuid/kill)\n        VmStop (POST /servers/:server_uuid/vms/:uuid/stop)\n        ServerReboot (POST /servers/:server_uuid/reboot)\n        ServerFactoryReset (PUT /servers/:server_uuid/factory-reset)\n\n- More subtley, it is argubly easier to see the association between a\n  function name in code \"BlahBlahFromUrl\" and an endpoint path with \"/from-url\"\n  in it.\n  \n  \nThat\u0027s probably more verbiage than you cared about for this. :)"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/imgapi.js","type":"MODIFIED","insertions":100,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":106,"sizeDeletions":-1},{"number":"3","revision":"e236a13c568e6834f991c524468c6341dd3bc624","parents":["047b72eb0d30d5cc9ebd8af238f174e3dc45a8b7"],"ref":"refs/changes/01/4901/3","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1538658217,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1538658245,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/imgapi.js","type":"MODIFIED","insertions":102,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":108,"sizeDeletions":-1},{"number":"4","revision":"6c376eb78ea68f24fed0bffe7a76131a4abe1fd7","parents":["047b72eb0d30d5cc9ebd8af238f174e3dc45a8b7"],"ref":"refs/changes/01/4901/4","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1539789721,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539789745,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1540500206,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/imgapi.js","type":"MODIFIED","insertions":102,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":108,"sizeDeletions":-1},{"number":"5","revision":"9bae5e0e4c74ad176f24813fa07255f12fb92dae","parents":["047b72eb0d30d5cc9ebd8af238f174e3dc45a8b7"],"ref":"refs/changes/01/4901/5","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1542371683,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539789745,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1540500206,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/imgapi.js","type":"MODIFIED","insertions":102,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":108,"sizeDeletions":-1},{"number":"6","revision":"8913acf5ed034458dad9e9e5121aafeacf76a0f9","parents":["047b72eb0d30d5cc9ebd8af238f174e3dc45a8b7"],"ref":"refs/changes/01/4901/6","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1542371856,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1542371883,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"lib/imgapi.js","type":"MODIFIED","insertions":239,"deletions":-30},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":251,"sizeDeletions":-32},{"number":"7","revision":"6286489e5f54c19ffb560e6f02f8d3c8d2a61470","parents":["3d668a961ea2fff59afc41d78a555e02cf0e0c24"],"ref":"refs/changes/01/4901/7","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1542622770,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1542371883,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1542663575,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1542663575,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/imgapi.js","type":"MODIFIED","insertions":102,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":108,"sizeDeletions":-1},{"number":"8","revision":"93af39d56fba23f40db6b0dc99950286ed47d1f5","parents":["3d668a961ea2fff59afc41d78a555e02cf0e0c24"],"ref":"refs/changes/01/4901/8","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1542715823,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1542371883,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1542663575,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1542663575,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1542715845,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/imgapi.js","type":"MODIFIED","insertions":102,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":108,"sizeDeletions":-1}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}]}