{"project":"joyent/node-cueball","branch":"master","id":"I818ca4768cafd123bc325a65bc8e187686c6ae89","number":"1163","subject":"joyent/node-cueball#47 rapid add/remove of backend in DNS leads to ConnectionSet crash Reviewed by: Bryan Cantrill \u003cbryan@joyent.com\u003e Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e","owner":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"url":"https://cr.joyent.us/1163","commitMessage":"joyent/node-cueball#47 rapid add/remove of backend in DNS leads to ConnectionSet crash\nReviewed by: Bryan Cantrill \u003cbryan@joyent.com\u003e\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\n","createdOn":1482375811,"lastUpdated":1482454675,"open":false,"status":"MERGED","comments":[{"timestamp":1482375811,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 1."},{"timestamp":1482375830,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 2."},{"timestamp":1482375897,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1482376051,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1482434143,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Patch Set 2: Code-Review+1\n\n(2 comments)\n\nUse your judgement on whether or not it is worth it to have a comment on how we can end up in this state..."},{"timestamp":1482434482,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 3."},{"timestamp":1482434557,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1482452353,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 4."},{"timestamp":1482452568,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1"},{"timestamp":1482454283,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1482454675,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Alex Wilson"}],"currentPatchSet":{"number":"4","revision":"818ca4768cafd123bc325a65bc8e187686c6ae89","parents":["9df101c00269f387854ea3aa33a21627f2ccf29a"],"ref":"refs/changes/63/1163/4","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1482452353,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1482452568,"by":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1482452568,"by":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482454283,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1482454675,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/resolver.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/set.js","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/cset.test.js","type":"MODIFIED","insertions":60,"deletions":0}],"sizeInsertions":78,"sizeDeletions":-7},"patchSets":[{"number":"1","revision":"ae0f0b2aeb8bd196fd1e47790e3e99eb77d0feee","parents":["9df101c00269f387854ea3aa33a21627f2ccf29a"],"ref":"refs/changes/63/1163/1","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1482375811,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482375897,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/resolver.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/set.js","type":"MODIFIED","insertions":5,"deletions":-3}],"sizeInsertions":9,"sizeDeletions":-3},{"number":"2","revision":"88f82304aa2dd0665433bed74dc4d935d866e5b7","parents":["9df101c00269f387854ea3aa33a21627f2ccf29a"],"ref":"refs/changes/63/1163/2","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1482375830,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482376051,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1482434143,"by":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"}}],"comments":[{"file":"lib/resolver.js","line":882,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Love this. ;)"},{"file":"lib/set.js","line":144,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Is it worthwhile to have a comment here to explain how it can be undefined?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/resolver.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/set.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":10,"sizeDeletions":-4},{"number":"3","revision":"7ea26f035e6dce017e00f743a29a79c27940fdce","parents":["9df101c00269f387854ea3aa33a21627f2ccf29a"],"ref":"refs/changes/63/1163/3","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1482434482,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482434557,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/resolver.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/set.js","type":"MODIFIED","insertions":9,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":14,"sizeDeletions":-4},{"number":"4","revision":"818ca4768cafd123bc325a65bc8e187686c6ae89","parents":["9df101c00269f387854ea3aa33a21627f2ccf29a"],"ref":"refs/changes/63/1163/4","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1482452353,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"SUBM","value":"1","grantedOn":1482454675,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482454283,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1482452568,"by":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1482452568,"by":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/resolver.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/set.js","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/cset.test.js","type":"MODIFIED","insertions":60,"deletions":0}],"sizeInsertions":78,"sizeDeletions":-7}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}]}