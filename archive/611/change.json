{"project":"joyent/sdc-imgapi","branch":"master","id":"I7d0b4b7dedc7c36ba1eec23394d009567b6ef35a","number":"611","subject":"IMGAPI-587 get IMGAPI working with node v4 Reviewed by: Todd Whiteman \u003ctodd.whiteman@joyent.com\u003e","owner":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"url":"https://cr.joyent.us/611","commitMessage":"IMGAPI-587 get IMGAPI working with node v4\nReviewed by: Todd Whiteman \u003ctodd.whiteman@joyent.com\u003e\n","createdOn":1475782922,"lastUpdated":1475865374,"open":false,"status":"MERGED","comments":[{"timestamp":1475782922,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 1."},{"timestamp":1475782959,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\nFWIW: the commit summaries in my branch for this so far:\n\n    0e0c556 update to a wf-client with node v4 warning-free biuld\n    eff4cb9 reg client release; fix for restify@4.x breaking change\n    72c29e5 a docker reg client that works with node v4 without build errors/warnings\n    e63c0ae sdc-clients@10 has proper v4 support, ditto manta@3; let\u0027s try restify@4 non-forked to see if that breaks HTTP proxy handling\n    2714ab4 updated sdc-clients, latest from IGMAPI-587 branch; also bump to v4.6.0 node build\n    b7ddffe sdc-clients from IMGAPI-587 branch\n    9ef4df1 getUserEx conversion\n    272cb36 IMGAPI-587 first stab, mostly done but for the big sdc-clients issues"},{"timestamp":1475782976,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1475783105,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1475783105,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit dd6eb72648cebe0a5433fd5a0c2221fcb93e5639\n    \n    update to a wf-client with node v4 warning-free biuld\n    \n    commit b72a88a9939872e4e5d040bb21fc05a7299c968a\n    \n    reg client release; fix for restify@4.x breaking change\n    \n    commit 76ef616acd45d70859e56d4453dfe9630c3b4bb6\n    \n    a docker reg client that works with node v4 without build errors/warnings\n    \n    commit e980107c74d90b77bb451f20c6beb715be9f9acf\n    \n    sdc-clients@10 has proper v4 support, ditto manta@3; let\u0027s try restify@4 non-forked to see if that breaks HTTP proxy handling\n    \n    commit 64dd8f9c66432f73d8dbd71d9a20c3f71051c4da\n    \n    updated sdc-clients, latest from IGMAPI-587 branch; also bump to v4.6.0 node build\n    \n    commit 7b796f1fd47db64fd29f7b4910ffbf8880ee5fd5\n    \n    sdc-clients from IMGAPI-587 branch\n    \n    commit e39d26d9776301f047dd23b6a091e6e9c29be6bd\n    \n    getUserEx conversion\n    \n    commit 0c0ea0dea7a122eb51ca0609d047d39c3b20e4b4\n    \n    IMGAPI-587 first stab, mostly done but for the big sdc-clients issues"},{"timestamp":1475783397,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(4 comments)"},{"timestamp":1475785443,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2: Code-Review+1\n\nA little scary (on all the module updates) but code changes LGTM."},{"timestamp":1475865330,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1475865370,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1475865374,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Trent Mick"}],"currentPatchSet":{"number":"3","revision":"7d0b4b7dedc7c36ba1eec23394d009567b6ef35a","parents":["f6c101eac5c3428750638ce6bf3eda8522d75a8b"],"ref":"refs/changes/11/611/3","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1475865330,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1475782976,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1475785443,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1475865370,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1475865374,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/app.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/config.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/database.js","type":"MODIFIED","insertions":21,"deletions":-19},{"file":"lib/images.js","type":"MODIFIED","insertions":13,"deletions":-8},{"file":"lib/utils.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":13,"deletions":-13},{"file":"tools/migrate-storage-local-to-manta.js","type":"MODIFIED","insertions":0,"deletions":-1}],"sizeInsertions":62,"sizeDeletions":-49},"patchSets":[{"number":"1","revision":"b38300bdfc125cc8a1460a5bf489bf818506d068","parents":["1d3500c1036493469dc8b586fac02a5c041d2f6d"],"ref":"refs/changes/11/611/1","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1475782922,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1475782976,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/app.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/config.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/database.js","type":"MODIFIED","insertions":21,"deletions":-19},{"file":"lib/images.js","type":"MODIFIED","insertions":13,"deletions":-8},{"file":"lib/utils.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":13,"deletions":-13},{"file":"tools/migrate-storage-local-to-manta.js","type":"MODIFIED","insertions":0,"deletions":-1}],"sizeInsertions":62,"sizeDeletions":-49},{"number":"2","revision":"dfe4cd30997d090b59dd94b8e25d548f6f0cd3ac","parents":["f6c101eac5c3428750638ce6bf3eda8522d75a8b"],"ref":"refs/changes/11/611/2","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1475783105,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"NO_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1475782976,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1475785443,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"comments":[{"file":"lib/app.js","line":230,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"restify 4.x breaking API change"},{"file":"lib/config.js","line":70,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"change for assert-plus@1.0.0"},{"file":"lib/database.js","line":25,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"eventually will change to moray-filter that Cody recently published"},{"file":"package.json","line":41,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"notes on this and other for-node-v4 module versions here: https://github.com/joyent/rfd/tree/master/rfd/0059#notes-on-specific-node-packages"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/app.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/config.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/database.js","type":"MODIFIED","insertions":21,"deletions":-19},{"file":"lib/images.js","type":"MODIFIED","insertions":13,"deletions":-8},{"file":"lib/utils.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":13,"deletions":-13},{"file":"tools/migrate-storage-local-to-manta.js","type":"MODIFIED","insertions":0,"deletions":-1}],"sizeInsertions":62,"sizeDeletions":-49},{"number":"3","revision":"7d0b4b7dedc7c36ba1eec23394d009567b6ef35a","parents":["f6c101eac5c3428750638ce6bf3eda8522d75a8b"],"ref":"refs/changes/11/611/3","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1475865330,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1475782976,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1475865370,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1475865374,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1475785443,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/app.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/config.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/database.js","type":"MODIFIED","insertions":21,"deletions":-19},{"file":"lib/images.js","type":"MODIFIED","insertions":13,"deletions":-8},{"file":"lib/utils.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":13,"deletions":-13},{"file":"tools/migrate-storage-local-to-manta.js","type":"MODIFIED","insertions":0,"deletions":-1}],"sizeInsertions":62,"sizeDeletions":-49}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}]}