{"project":"joyent/illumos-joyent","branch":"master","id":"I967c11b83ffd09b85f4de9e51b3d819de9846d78","number":"6950","subject":"OS-7943 Want platform build test artifact Reviewed by: John Levon \u003cjohn.levon@joyent.com\u003e Reviewed by: Ryan Zezeski \u003crpz@joyent.com\u003e Approved by: John Levon \u003cjohn.levon@joyent.com\u003e","owner":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"url":"https://cr.joyent.us/6950","commitMessage":"OS-7943 Want platform build test artifact\nReviewed by: John Levon \u003cjohn.levon@joyent.com\u003e\nReviewed by: Ryan Zezeski \u003crpz@joyent.com\u003e\nApproved by: John Levon \u003cjohn.levon@joyent.com\u003e\n","createdOn":1570013843,"lastUpdated":1570703467,"open":false,"status":"MERGED","comments":[{"timestamp":1570013843,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 1."},{"timestamp":1570013852,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit da10a1e4969a070c3e50a8f979479d2d481fe6b7\n    \n    OS-7943 Want platform build test artifact"},{"timestamp":1570014584,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1570014596,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 9717f02652f3db07f7078e0a07e3ecca97c7c3d9\n    \n    OS-7943 Want platform build test artifact"},{"timestamp":1570042899,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 2:\n\n(4 comments)"},{"timestamp":1570096275,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 2:\n\n(4 comments)\n\nThanks for the review, much appreciated!"},{"timestamp":1570464957,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 2: Code-Review+1\n\n(4 comments)"},{"timestamp":1570528309,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 3."},{"timestamp":1570528317,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 82884c9c62cfc7a3ec02b52e9b013103f1929d51\n    \n    OS-7943 Want platform build test artifact"},{"timestamp":1570540899,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3:\n\n(3 comments)"},{"timestamp":1570546309,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 3:\n\n(3 comments)"},{"timestamp":1570547191,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1570550103,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 4."},{"timestamp":1570550566,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1570559816,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1570636925,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 5: Integration-Approval+1"},{"timestamp":1570637429,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1570701817,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1570701825,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit 16f88e2f8261ba28db1d47b08ab8cc0aca252635\n    \n    OS-7943 Want platform build test artifact\n    Reviewed by: John Levon \u003cjohn.levon@joyent.com\u003e"},{"timestamp":1570703467,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Tim Foster"}],"currentPatchSet":{"number":"6","revision":"967c11b83ffd09b85f4de9e51b3d819de9846d78","parents":["4077dc9ab4a7c6021378b674d18935686d363a1d"],"ref":"refs/changes/50/6950/6","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1570701817,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570550566,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1570636925,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570637429,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}},{"type":"SUBM","value":"1","grantedOn":1570703467,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/Makefile.testarchive","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/vndadm/test/scripts/vndtest.ksh","type":"MODIFIED","insertions":2,"deletions":-4},{"file":"usr/src/pkg/manifests/system-dtrace-tests.mf","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"usr/src/pkg/manifests/system-test-cryptotest.mf","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-libctest.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-nettest.mf","type":"ADDED","insertions":54,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-ostest.mf","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-smartostest.mf","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-utiltest.mf","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"usr/src/pkg/manifests/system-test-vndtest.mf","type":"ADDED","insertions":82,"deletions":0},{"file":"usr/src/test/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/test/Readme.smartos","type":"DELETED","insertions":0,"deletions":-112},{"file":"usr/src/test/crypto-tests/cmd/kcf/Makefile","type":"MODIFIED","insertions":12,"deletions":-3},{"file":"usr/src/test/os-tests/tests/secflags/secflags_dts.sh","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"usr/src/test/os-tests/tests/secflags/secflags_zonecfg.sh","type":"MODIFIED","insertions":8,"deletions":-2},{"file":"usr/src/test/smartos-test/Makefile","type":"ADDED","insertions":49,"deletions":0},{"file":"usr/src/test/smartos-test/README","type":"ADDED","insertions":103,"deletions":0},{"file":"usr/src/test/smartos-test/smartos-test.sh","type":"ADDED","insertions":385,"deletions":0},{"file":"usr/src/test/util-tests/tests/grep_xpg4/grep_test.ksh","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":810,"sizeDeletions":-130},"patchSets":[{"number":"1","revision":"331a57dec1594caaa1a9ee2206b258e15b39399b","parents":["d34708cffc24f32c1138efa4de13db7b240c1b90"],"ref":"refs/changes/50/6950/1","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1570013843,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/Makefile.testarchive","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/vndadm/test/scripts/vndtest.ksh","type":"MODIFIED","insertions":2,"deletions":-4},{"file":"usr/src/pkg/manifests/system-dtrace-tests.mf","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"usr/src/pkg/manifests/system-test-cryptotest.mf","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-libctest.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-nettest.mf","type":"ADDED","insertions":54,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-ostest.mf","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-smartostest.mf","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-utiltest.mf","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"usr/src/pkg/manifests/system-test-vndtest.mf","type":"ADDED","insertions":82,"deletions":0},{"file":"usr/src/test/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/test/Readme.smartos","type":"MODIFIED","insertions":5,"deletions":-95},{"file":"usr/src/test/crypto-tests/cmd/kcf/Makefile","type":"MODIFIED","insertions":12,"deletions":-3},{"file":"usr/src/test/os-tests/tests/secflags/secflags_dts.sh","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"usr/src/test/os-tests/tests/secflags/secflags_zonecfg.sh","type":"MODIFIED","insertions":8,"deletions":-2},{"file":"usr/src/test/smartos-test/Makefile","type":"ADDED","insertions":49,"deletions":0},{"file":"usr/src/test/smartos-test/README","type":"ADDED","insertions":103,"deletions":0},{"file":"usr/src/test/smartos-test/smartos-test.sh","type":"ADDED","insertions":385,"deletions":0},{"file":"usr/src/test/util-tests/tests/grep_xpg4/grep_test.ksh","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":815,"sizeDeletions":-113},{"number":"2","revision":"73460368478da40db6ec8d340f8b013e3f9ebba0","parents":["e4b201171637339e9c582457e461fb99e6a4cc56"],"ref":"refs/changes/50/6950/2","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1570014584,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570464957,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"comments":[{"file":"usr/src/test/smartos-test/smartos-test.sh","line":30,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Not that you need to get rid of this, but a while back I made a change to test-runner that should have removed the need for the use of sudo by the test-runner. However, perhaps there are other places relying on sudo?\n\nOS-5716"},{"file":"usr/src/test/smartos-test/smartos-test.sh","line":30,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Yep, zfs-test wants it in a few places unfortunately, and while we\u0027re not actually running zfs-test here, I thought it\u0027d be useful to at least have the machine setup so it\u0027s easier to run that.\n\ntimf@iorangi-eth0 (grr-OS-7943) find . -type f -exec grep sudo {} +\n./include/commands.cfg:    sudo\n./cmd/scripts/zfstest.ksh:\ttypeset all_disks\u003d$(echo \u0027\u0027 | sudo -k format | awk \\\n./cmd/scripts/zfstest.ksh:\tsudo -k -n id \u003e/dev/null 2\u003e\u00261\n./cmd/scripts/zfstest.ksh:\t[[ $? -eq 0 ]] || fail \"User must be able to sudo without a password.\"\n./cmd/scripts/zfstest.ksh:\t\tsudo -k prtvtoc $path \u003e/dev/null 2\u003e\u00261\n./cmd/scripts/zfstest.ksh:\tpkgsrc_packages\u003d\"sudo truncate python base64 shuf sha256sum\"\n./doc/README:\t  to sudo(1M) to root without a password to run the test.\n./tests/functional/cli_root/zpool_import/import_rewind_config_changed.ksh:\tsudo zpool export $TESTPOOL1\n./tests/functional/cli_root/zpool_import/import_rewind_config_changed.ksh:\tsudo zpool import -d $DEVICE_DIR $TESTPOOL1\n./callbacks/zfs_dbgmsg.ksh:sudo mdb -ke \"::zfs_dbgmsg ! tail -n $lines\"\n./callbacks/zfs_mmp.ksh:\tsudo tail -n $lines $f\ntimf@iorangi-eth0 (grr-OS-7943)"},{"file":"usr/src/test/smartos-test/smartos-test.sh","line":30,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Cool, makes sense."},{"file":"usr/src/test/smartos-test/smartos-test.sh","line":143,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"I\u0027m a bit confused on the use of `-r`. It says \"snapshot or rollback\", but it seems its purpose is to purely rollback to a snapshot generated by the user. In that case, what\u0027s the point of the if/else here that runs the same command regardless of the snapshot existing? Wouldn\u0027t just running `log_must zfs rollback zones/opt@$snapshot` accomplish the same goal?"},{"file":"usr/src/test/smartos-test/smartos-test.sh","line":143,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Sure - the intent here was to preserve /opt state the very first time we install/configure the tests. If the snapshot doesn\u0027t exist, we\u0027ll create it on line 142. Otherwise, we\u0027ll roll back to it.\n\nThe use-case here is when we\u0027re in a develop/test/reinstall cycle and have just loaded new platform bits on the system and want to run a new set of test-archive tests.\n\nWe\u0027d prefer not to extract our new test-archive on top of any older /opt content that may still be hanging around from earlier test runs. In particular, the new test archive may have deleted some tests, but since some test wrappers use find(1) to locate tests for execution, if /opt was stale, we might end up trying to run those deleted tests which could cause confusion."},{"file":"usr/src/test/smartos-test/smartos-test.sh","line":143,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Doh! When I read this the first time I thought the logic in each case was identical (i.e., both did a rollback). This makes more sense now."},{"file":"usr/src/test/smartos-test/smartos-test.sh","line":275,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"I noticed that we\u0027ve updated/added pkg manifests for some test suites but not added them here, I\u0027m guessing that\u0027s by design? For example, I notice the nettest suite is missing, but in order for that to run it will require additional setup work (namely creating three native zones and editing a file)."},{"file":"usr/src/test/smartos-test/smartos-test.sh","line":275,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Yep - we\u0027re only running tests that seemed like low-hanging fruit, but are delivering all tests that we know about in the test archive to allow developers to execute them by hand (zfs-test in particular, but yes, nettest as well)\n\nI wasn\u0027t sure how straightforward it\u0027d be to setup the native zones as part of this script. I could certainly investigate doing that if you think it\u0027s worth it?"},{"file":"usr/src/test/smartos-test/smartos-test.sh","line":275,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"That makes sense.\n\nI\u0027m not sure how much of a pain it would be either, but I think it\u0027s definitely worth it. But probably best as its own follow up to make it easier to review."},{"file":"usr/src/test/smartos-test/smartos-test.sh","line":294,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"I\u0027m confused by \"snapshot or rollback\", isn\u0027t this purely for rolling back to a user-created snapshot?"},{"file":"usr/src/test/smartos-test/smartos-test.sh","line":294,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Yeah, I agree that \u0027-r\u0027 doing either a snapshot or a rollback could be confusing. Hopefully the earlier comment explained what\u0027s going on here. Perhaps a different option letter or description might be less confusing?"},{"file":"usr/src/test/smartos-test/smartos-test.sh","line":294,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"I think it\u0027s fine now, this was just my brain tricking me when I first read the code."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/Makefile.testarchive","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/vndadm/test/scripts/vndtest.ksh","type":"MODIFIED","insertions":2,"deletions":-4},{"file":"usr/src/pkg/manifests/system-dtrace-tests.mf","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"usr/src/pkg/manifests/system-test-cryptotest.mf","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-libctest.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-nettest.mf","type":"ADDED","insertions":54,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-ostest.mf","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-smartostest.mf","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-utiltest.mf","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"usr/src/pkg/manifests/system-test-vndtest.mf","type":"ADDED","insertions":82,"deletions":0},{"file":"usr/src/test/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/test/Readme.smartos","type":"MODIFIED","insertions":5,"deletions":-95},{"file":"usr/src/test/crypto-tests/cmd/kcf/Makefile","type":"MODIFIED","insertions":12,"deletions":-3},{"file":"usr/src/test/os-tests/tests/secflags/secflags_dts.sh","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"usr/src/test/os-tests/tests/secflags/secflags_zonecfg.sh","type":"MODIFIED","insertions":8,"deletions":-2},{"file":"usr/src/test/smartos-test/Makefile","type":"ADDED","insertions":49,"deletions":0},{"file":"usr/src/test/smartos-test/README","type":"ADDED","insertions":103,"deletions":0},{"file":"usr/src/test/smartos-test/smartos-test.sh","type":"ADDED","insertions":385,"deletions":0},{"file":"usr/src/test/util-tests/tests/grep_xpg4/grep_test.ksh","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":815,"sizeDeletions":-113},{"number":"3","revision":"032e9cd494317170c8e73798e97f3fc93aa4e8b0","parents":["4077dc9ab4a7c6021378b674d18935686d363a1d"],"ref":"refs/changes/50/6950/3","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1570528309,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/test/Readme.smartos","line":1,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I don\u0027t really see the point of keeping this file now?"},{"file":"usr/src/test/Readme.smartos","line":1,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"I had left this here as a prominent pointer to how to actually run tests on SmartOS without having to modify the \u0027README\u0027 in this directory, which is identical to upstream.\n\nIs it obvious that smartos-test isn\u0027t just another test suite without it?"},{"file":"usr/src/test/Readme.smartos","line":1,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"It\u0027s not a big deal, but it seem silly when people would immediately see the \u0027smartos-test\u0027 directory right there..."},{"file":"usr/src/test/smartos-test/Makefile","line":31,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"remove the lint please"},{"file":"usr/src/test/smartos-test/Makefile","line":31,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Done"},{"file":"usr/src/test/smartos-test/smartos-test.sh","line":298,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"nit, why is just this one in CAPITALS"},{"file":"usr/src/test/smartos-test/smartos-test.sh","line":298,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"och, was stupidly trying to differentiate local vs global variables, but of course we\u0027re a global variable here anyway. Will fix."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/Makefile.testarchive","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/vndadm/test/scripts/vndtest.ksh","type":"MODIFIED","insertions":2,"deletions":-4},{"file":"usr/src/pkg/manifests/system-dtrace-tests.mf","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"usr/src/pkg/manifests/system-test-cryptotest.mf","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-libctest.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-nettest.mf","type":"ADDED","insertions":54,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-ostest.mf","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-smartostest.mf","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-utiltest.mf","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"usr/src/pkg/manifests/system-test-vndtest.mf","type":"ADDED","insertions":82,"deletions":0},{"file":"usr/src/test/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/test/Readme.smartos","type":"MODIFIED","insertions":5,"deletions":-95},{"file":"usr/src/test/crypto-tests/cmd/kcf/Makefile","type":"MODIFIED","insertions":12,"deletions":-3},{"file":"usr/src/test/os-tests/tests/secflags/secflags_dts.sh","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"usr/src/test/os-tests/tests/secflags/secflags_zonecfg.sh","type":"MODIFIED","insertions":8,"deletions":-2},{"file":"usr/src/test/smartos-test/Makefile","type":"ADDED","insertions":49,"deletions":0},{"file":"usr/src/test/smartos-test/README","type":"ADDED","insertions":103,"deletions":0},{"file":"usr/src/test/smartos-test/smartos-test.sh","type":"ADDED","insertions":385,"deletions":0},{"file":"usr/src/test/util-tests/tests/grep_xpg4/grep_test.ksh","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":815,"sizeDeletions":-113},{"number":"4","revision":"40af0e5a8319a07d5e2037d5a996b75afa5945c9","parents":["4077dc9ab4a7c6021378b674d18935686d363a1d"],"ref":"refs/changes/50/6950/4","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1570550103,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570550566,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/Makefile.testarchive","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/vndadm/test/scripts/vndtest.ksh","type":"MODIFIED","insertions":2,"deletions":-4},{"file":"usr/src/pkg/manifests/system-dtrace-tests.mf","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"usr/src/pkg/manifests/system-test-cryptotest.mf","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-libctest.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-nettest.mf","type":"ADDED","insertions":54,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-ostest.mf","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-smartostest.mf","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-utiltest.mf","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"usr/src/pkg/manifests/system-test-vndtest.mf","type":"ADDED","insertions":82,"deletions":0},{"file":"usr/src/test/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/test/Readme.smartos","type":"DELETED","insertions":0,"deletions":-112},{"file":"usr/src/test/crypto-tests/cmd/kcf/Makefile","type":"MODIFIED","insertions":12,"deletions":-3},{"file":"usr/src/test/os-tests/tests/secflags/secflags_dts.sh","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"usr/src/test/os-tests/tests/secflags/secflags_zonecfg.sh","type":"MODIFIED","insertions":8,"deletions":-2},{"file":"usr/src/test/smartos-test/Makefile","type":"ADDED","insertions":49,"deletions":0},{"file":"usr/src/test/smartos-test/README","type":"ADDED","insertions":103,"deletions":0},{"file":"usr/src/test/smartos-test/smartos-test.sh","type":"ADDED","insertions":385,"deletions":0},{"file":"usr/src/test/util-tests/tests/grep_xpg4/grep_test.ksh","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":810,"sizeDeletions":-130},{"number":"5","revision":"2daab11ebaadc0ba966e50ed45abee69d6827cdb","parents":["4077dc9ab4a7c6021378b674d18935686d363a1d"],"ref":"refs/changes/50/6950/5","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1570559816,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570637429,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570550566,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1570636925,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/Makefile.testarchive","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/vndadm/test/scripts/vndtest.ksh","type":"MODIFIED","insertions":2,"deletions":-4},{"file":"usr/src/pkg/manifests/system-dtrace-tests.mf","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"usr/src/pkg/manifests/system-test-cryptotest.mf","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-libctest.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-nettest.mf","type":"ADDED","insertions":54,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-ostest.mf","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-smartostest.mf","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-utiltest.mf","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"usr/src/pkg/manifests/system-test-vndtest.mf","type":"ADDED","insertions":82,"deletions":0},{"file":"usr/src/test/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/test/Readme.smartos","type":"DELETED","insertions":0,"deletions":-112},{"file":"usr/src/test/crypto-tests/cmd/kcf/Makefile","type":"MODIFIED","insertions":12,"deletions":-3},{"file":"usr/src/test/os-tests/tests/secflags/secflags_dts.sh","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"usr/src/test/os-tests/tests/secflags/secflags_zonecfg.sh","type":"MODIFIED","insertions":8,"deletions":-2},{"file":"usr/src/test/smartos-test/Makefile","type":"ADDED","insertions":49,"deletions":0},{"file":"usr/src/test/smartos-test/README","type":"ADDED","insertions":103,"deletions":0},{"file":"usr/src/test/smartos-test/smartos-test.sh","type":"ADDED","insertions":385,"deletions":0},{"file":"usr/src/test/util-tests/tests/grep_xpg4/grep_test.ksh","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":810,"sizeDeletions":-130},{"number":"6","revision":"967c11b83ffd09b85f4de9e51b3d819de9846d78","parents":["4077dc9ab4a7c6021378b674d18935686d363a1d"],"ref":"refs/changes/50/6950/6","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1570701817,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570637429,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570550566,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1570636925,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"SUBM","value":"1","grantedOn":1570703467,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/Makefile.testarchive","type":"ADDED","insertions":35,"deletions":0},{"file":"usr/src/cmd/vndadm/test/scripts/vndtest.ksh","type":"MODIFIED","insertions":2,"deletions":-4},{"file":"usr/src/pkg/manifests/system-dtrace-tests.mf","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"usr/src/pkg/manifests/system-test-cryptotest.mf","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-libctest.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-nettest.mf","type":"ADDED","insertions":54,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-ostest.mf","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-smartostest.mf","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-utiltest.mf","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"usr/src/pkg/manifests/system-test-vndtest.mf","type":"ADDED","insertions":82,"deletions":0},{"file":"usr/src/test/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/test/Readme.smartos","type":"DELETED","insertions":0,"deletions":-112},{"file":"usr/src/test/crypto-tests/cmd/kcf/Makefile","type":"MODIFIED","insertions":12,"deletions":-3},{"file":"usr/src/test/os-tests/tests/secflags/secflags_dts.sh","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"usr/src/test/os-tests/tests/secflags/secflags_zonecfg.sh","type":"MODIFIED","insertions":8,"deletions":-2},{"file":"usr/src/test/smartos-test/Makefile","type":"ADDED","insertions":49,"deletions":0},{"file":"usr/src/test/smartos-test/README","type":"ADDED","insertions":103,"deletions":0},{"file":"usr/src/test/smartos-test/smartos-test.sh","type":"ADDED","insertions":385,"deletions":0},{"file":"usr/src/test/util-tests/tests/grep_xpg4/grep_test.ksh","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":810,"sizeDeletions":-130}],"allReviewers":[{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}]}