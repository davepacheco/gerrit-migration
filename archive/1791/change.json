{"project":"joyent/manta-madtom","branch":"master","id":"I8309fb4bcb81a8a2039039dc3f5e8f5eed14b9a6","number":"1791","subject":"MANTA-3096 madtom config needs to be more tolerant of missing IPs Reviewed by: David Pacheco \u003cdap@joyent.com\u003e Reviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e Approved by: Joshua M. Clulow \u003cjmc@joyent.com\u003e","owner":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"url":"https://cr.joyent.us/1791","commitMessage":"MANTA-3096 madtom config needs to be more tolerant of missing IPs\nReviewed by: David Pacheco \u003cdap@joyent.com\u003e\nReviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\nApproved by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\n","createdOn":1492121211,"lastUpdated":1493157077,"open":false,"status":"MERGED","comments":[{"timestamp":1492121211,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 1."},{"timestamp":1492121239,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1492305841,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 1:\n\n(26 comments)\n\nIn general, this looks good!  I have provided some review feedback, about half of which is just style nits.\n\nThanks for adding some tests with your change!"},{"timestamp":1492448752,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\n(2 comments)\n\nThanks for fleshing out the docs and adding some tests!"},{"timestamp":1492480135,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 2."},{"timestamp":1492480163,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1492557940,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 3."},{"timestamp":1492557968,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1492558384,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 4."},{"timestamp":1492558418,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1492558721,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1\n\nThanks for the changes!  I have read through your testing notes in the ticket, and we went through some of these tests offline, so I think you\u0027re ready for integration."},{"timestamp":1492559367,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1492563569,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 5:\n\n(2 comments)"},{"timestamp":1492563775,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 5: -Integration-Approval\n\n(1 comment)"},{"timestamp":1492566058,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 6."},{"timestamp":1492566096,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1492579675,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 6:\n\n(2 comments)"},{"timestamp":1492709982,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 7."},{"timestamp":1492710006,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1492789803,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 7: Code-Review+1"},{"timestamp":1493083507,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 7: Code-Review+1 Integration-Approval+1\n\nThanks for running through the test plan again, and fixing up the last few issues.  Looks good to me!"},{"timestamp":1493144959,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 8: Commit message was updated."},{"timestamp":1493157077,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Brittany Wald"}],"currentPatchSet":{"number":"8","revision":"8309fb4bcb81a8a2039039dc3f5e8f5eed14b9a6","parents":["86ab6c42c60e6f27c5cadadff99e5154ca835a64"],"ref":"refs/changes/91/1791/8","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1493144959,"author":{"name":"princesspretzel","email":"brittany@231c6c0e-5992-6e17-85ee-8ac2c04d81b1.local","username":""},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1492710006,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1492789803,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1493083507,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1493083507,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"SUBM","value":"1","grantedOn":1493157077,"by":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"README.md","type":"MODIFIED","insertions":41,"deletions":-26},{"file":"bin/generate_hosts_config.js","type":"MODIFIED","insertions":10,"deletions":-6},{"file":"test/generate_hosts_config.test.js","type":"ADDED","insertions":146,"deletions":0},{"file":"test/helper.js","type":"DELETED","insertions":0,"deletions":-75},{"file":"test/server.test.js","type":"ADDED","insertions":90,"deletions":0},{"file":"test/stub.test.js","type":"DELETED","insertions":0,"deletions":-27}],"sizeInsertions":289,"sizeDeletions":-136},"patchSets":[{"number":"1","revision":"dcb07338f556d2f2aa01f34617296d266fc4dc31","parents":["86ab6c42c60e6f27c5cadadff99e5154ca835a64"],"ref":"refs/changes/91/1791/1","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1492121211,"author":{"name":"princesspretzel","email":"brittany@231c6c0e-5992-6e17-85ee-8ac2c04d81b1.local","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1492121239,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"/COMMIT_MSG","line":7,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"MANTA-3096"},{"file":"Makefile","line":87,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Why did you add the \"ctrun -o noorphan\" here?"},{"file":"Makefile","line":87,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I suggested doing this, similar to what we do in moray-test-suite.  In both cases, the test ends up starting a serve.  Running the test itself under ctrun is a useful way to guarantee that the server gets shut down if the test fails in an unexpected way."},{"file":"README.md","line":0,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"We generally try to keep most files wrapped at 80 columns wide where possible.  Please re-wrap the paragraphs you\u0027ve modified to fit."},{"file":"README.md","line":42,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"This block should probably be indented by four spaces so that it is a markdown code block; i.e., monospace font, etc.  I would also make it a HTTPS URL, e.g.\n\n    git clone https://github.com/joyent/manta-madtom.git"},{"file":"README.md","line":42,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"You\u0027d also have to\n\n    cd manta-madtom\n\n(That was incorrect before this change, though.)"},{"file":"README.md","line":44,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I would leave this as \"Development\""},{"file":"README.md","line":48,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I think the distinction you\u0027re describing is less about COAL or lab machines, and more about whether the engineer is looking in her build zone, or in an image which has been built and deployed."},{"file":"README.md","line":58,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"It would be good to typeset file paths in backticks, so that they will be rendered in a monospace font.  e.g.,\n\n    your tests for `generate_hosts_config`\n\nand\n\n    in your project directory under `etc/config.json`\n\netc."},{"file":"README.md","line":76,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"development"},{"file":"README.md","line":76,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"SSH"},{"file":"bin/generate_hosts_config.js","line":553,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I would probably leave the code structured the way it was to begin with, and instead replace the \"return (subcb(new Error()))\" on L544 with \"continue;\" as per the other cases further up in the loop that cause us to skip this instance."},{"file":"bin/generate_hosts_config.js","line":563,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"This file seems to be indented by 8 spaces per level, with 4 space additional indents for continuations; i.e., where the line had to be hard-wrapped to fit in 80 columns.  I think arms of the \"if\" statement are not quite indented enough."},{"file":"bin/generate_hosts_config.js","line":575,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I would move the error message directly into the function call, i.e.\n\n    _self.log.error({\n            \u0027uuid\u0027: uuid\n    }, \u0027agent doesnt have NICs\u0027);\n\ninstead of using the intermediate \"a\" variable."},{"file":"test/generate_hosts_config.test.js","line":0,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"The indentation in this file is not quite right, either.  See the comment I left on \"server.test.js\"."},{"file":"test/generate_hosts_config.test.js","line":12,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"The \"bunyan\" module does not appear to be used in this file."},{"file":"test/generate_hosts_config.test.js","line":20,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"This is the file that you have to populate yourself before running the tests, right?  I would probably check to make sure it exists before even trying to run the tests.  If it does _not_ exist, you could print a helpful error message and exit non-zero."},{"file":"test/generate_hosts_config.test.js","line":40,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Bring each of these \"}, {\" lines back out to column 0."},{"file":"test/generate_hosts_config.test.js","line":90,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"It doesn\u0027t seem like the program exits with a non-zero status code if there are test failures.  This means that an automated test runner, e.g. a Jenkins job, would probably miss the fact that there were test failures.\n\nYou could probably achieve the desired behaviour with something like:\n\n    if (failed \u003e 0) {\n            process.exit(1);\n    }\n\nin the \u0027exit\u0027 handler."},{"file":"test/generate_hosts_config.test.js","line":101,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Remove extra blank line."},{"file":"test/generate_hosts_config.test.js","line":129,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I would not assume that \"error\" is always \"null\" in the cases where there was no execution error.  The de facto contract with the error argument in callbacks is usually that it will be \"falsey\" if there is no error; i.e., any value that Javascript will coerce to a \"false\" boolean value.  For instance, if I call the callback with _no_ arguments, \"error\" will be \"undefined\" instead of \"null\".\n\nI would rework this as something like:\n\n    if (!error \u0026\u0026 c.error !\u003d\u003d null) {\n\nNote that the check against \"c.error\" is fine, as that\u0027s your object and you\u0027re setting it above as \"null\" explicitly."},{"file":"test/server.test.js","line":0,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"The indentation in this file is not consistent with the rest of the repository.  In general, each indentation level should be 8 spaces.  In the case where a line must be split in order to fit in the 80 column limit, subsequent \"continuation\" lines should come in an additional 4 spaces."},{"file":"test/server.test.js","line":12,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I think that \"bunyan\" and \"net\" are not actually used in this file?"},{"file":"test/server.test.js","line":20,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Make this consistent with the previous line, i.e.,\n\n    ... path.join(__dirname, \u0027..\u0027, \u0027server.js\u0027);"},{"file":"test/server.test.js","line":31,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Bring this back out to column 0"},{"file":"test/server.test.js","line":54,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"As per my comment in the other test file, I think it would be best to exit non-zero in the case of failures."},{"file":"test/server.test.js","line":64,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Remove extra blank line here."},{"file":"test/server.test.js","line":73,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"You\u0027re checking the positive case here; viz. that _if_ there was an execution failure, the error message is as expected.\n\nWhat about the negative case; i.e., if the program does _not_ fail, even though we expect that it will?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"README.md","type":"MODIFIED","insertions":32,"deletions":-23},{"file":"bin/generate_hosts_config.js","type":"MODIFIED","insertions":27,"deletions":-21},{"file":"test/generate_hosts_config.test.js","type":"ADDED","insertions":140,"deletions":0},{"file":"test/helper.js","type":"DELETED","insertions":0,"deletions":-75},{"file":"test/server.test.js","type":"ADDED","insertions":84,"deletions":0},{"file":"test/stub.test.js","type":"DELETED","insertions":0,"deletions":-27}],"sizeInsertions":285,"sizeDeletions":-148},{"number":"2","revision":"97bf42161279eaca2c8f5ac5d1fbcc9e0efd24aa","parents":["86ab6c42c60e6f27c5cadadff99e5154ca835a64"],"ref":"refs/changes/91/1791/2","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1492480135,"author":{"name":"princesspretzel","email":"brittany@231c6c0e-5992-6e17-85ee-8ac2c04d81b1.local","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1492480163,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"README.md","type":"MODIFIED","insertions":34,"deletions":-25},{"file":"bin/generate_hosts_config.js","type":"MODIFIED","insertions":10,"deletions":-6},{"file":"test/generate_hosts_config.test.js","type":"ADDED","insertions":152,"deletions":0},{"file":"test/helper.js","type":"DELETED","insertions":0,"deletions":-75},{"file":"test/server.test.js","type":"ADDED","insertions":90,"deletions":0},{"file":"test/stub.test.js","type":"DELETED","insertions":0,"deletions":-27}],"sizeInsertions":288,"sizeDeletions":-135},{"number":"3","revision":"fa3c38f0f598165768390b7e901d4e6a67208d89","parents":["86ab6c42c60e6f27c5cadadff99e5154ca835a64"],"ref":"refs/changes/91/1791/3","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1492557940,"author":{"name":"princesspretzel","email":"brittany@231c6c0e-5992-6e17-85ee-8ac2c04d81b1.local","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1492557968,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"README.md","type":"MODIFIED","insertions":28,"deletions":-31},{"file":"bin/generate_hosts_config.js","type":"MODIFIED","insertions":10,"deletions":-6},{"file":"test/generate_hosts_config.test.js","type":"ADDED","insertions":152,"deletions":0},{"file":"test/helper.js","type":"DELETED","insertions":0,"deletions":-75},{"file":"test/server.test.js","type":"ADDED","insertions":90,"deletions":0},{"file":"test/stub.test.js","type":"DELETED","insertions":0,"deletions":-27}],"sizeInsertions":282,"sizeDeletions":-141},{"number":"4","revision":"165d6fc4ee43069aa0721744a6f7b2ba3a9f4ed3","parents":["86ab6c42c60e6f27c5cadadff99e5154ca835a64"],"ref":"refs/changes/91/1791/4","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1492558384,"author":{"name":"princesspretzel","email":"brittany@231c6c0e-5992-6e17-85ee-8ac2c04d81b1.local","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1492558721,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1492558721,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1492558418,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"README.md","type":"MODIFIED","insertions":41,"deletions":-26},{"file":"bin/generate_hosts_config.js","type":"MODIFIED","insertions":10,"deletions":-6},{"file":"test/generate_hosts_config.test.js","type":"ADDED","insertions":152,"deletions":0},{"file":"test/helper.js","type":"DELETED","insertions":0,"deletions":-75},{"file":"test/server.test.js","type":"ADDED","insertions":90,"deletions":0},{"file":"test/stub.test.js","type":"DELETED","insertions":0,"deletions":-27}],"sizeInsertions":295,"sizeDeletions":-136},{"number":"5","revision":"cbde9a161c5131985ece4116ae7ef65a6f70bdaa","parents":["86ab6c42c60e6f27c5cadadff99e5154ca835a64"],"ref":"refs/changes/91/1791/5","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1492559367,"author":{"name":"princesspretzel","email":"brittany@231c6c0e-5992-6e17-85ee-8ac2c04d81b1.local","username":""},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1492558721,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1492558418,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/generate_hosts_config.test.js","line":77,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I think you want to do this check, you probably need to use existsSync().  Otherwise, because this function is asynchronous, we\u0027ll wind up kicking off the test cases before we\u0027ve actually finished this check.\n\nSorry for not having noticed this in the first round."},{"file":"test/generate_hosts_config.test.js","line":77,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Sorry, I missed this too."},{"file":"test/generate_hosts_config.test.js","line":123,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I think this has the same problem as the use of fs.exists() above."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"README.md","type":"MODIFIED","insertions":41,"deletions":-26},{"file":"bin/generate_hosts_config.js","type":"MODIFIED","insertions":10,"deletions":-6},{"file":"test/generate_hosts_config.test.js","type":"ADDED","insertions":152,"deletions":0},{"file":"test/helper.js","type":"DELETED","insertions":0,"deletions":-75},{"file":"test/server.test.js","type":"ADDED","insertions":90,"deletions":0},{"file":"test/stub.test.js","type":"DELETED","insertions":0,"deletions":-27}],"sizeInsertions":295,"sizeDeletions":-136},{"number":"6","revision":"78ad15d04a0ac3623068abe3172f9d1e2d3883b0","parents":["86ab6c42c60e6f27c5cadadff99e5154ca835a64"],"ref":"refs/changes/91/1791/6","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1492566058,"author":{"name":"princesspretzel","email":"brittany@231c6c0e-5992-6e17-85ee-8ac2c04d81b1.local","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1492566096,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/generate_hosts_config.test.js","line":83,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"This is not quite right.  The \"fs.existsSync()\" function accepts just one argument (config_file, in this case), and returns a boolean value.  You want something like:\n\n    if (!fs.existsSync(config_file)) {\n            console.log(\u0027tests for %s ...\n            process.exit(1);\n    }\n\n\nSee also, the API documentation:\n\nhttp://nodejs.org/dist/v0.10.48/docs/api/fs.html#fs_fs_existssync_path"},{"file":"test/generate_hosts_config.test.js","line":128,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Same as above."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"README.md","type":"MODIFIED","insertions":41,"deletions":-26},{"file":"bin/generate_hosts_config.js","type":"MODIFIED","insertions":10,"deletions":-6},{"file":"test/generate_hosts_config.test.js","type":"ADDED","insertions":151,"deletions":0},{"file":"test/helper.js","type":"DELETED","insertions":0,"deletions":-75},{"file":"test/server.test.js","type":"ADDED","insertions":90,"deletions":0},{"file":"test/stub.test.js","type":"DELETED","insertions":0,"deletions":-27}],"sizeInsertions":294,"sizeDeletions":-136},{"number":"7","revision":"2ddb6bcca18614bd179456fe303fe4744c252dba","parents":["86ab6c42c60e6f27c5cadadff99e5154ca835a64"],"ref":"refs/changes/91/1791/7","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1492709982,"author":{"name":"princesspretzel","email":"brittany@231c6c0e-5992-6e17-85ee-8ac2c04d81b1.local","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1492789803,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1493083507,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1493083507,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1492710006,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"README.md","type":"MODIFIED","insertions":41,"deletions":-26},{"file":"bin/generate_hosts_config.js","type":"MODIFIED","insertions":10,"deletions":-6},{"file":"test/generate_hosts_config.test.js","type":"ADDED","insertions":146,"deletions":0},{"file":"test/helper.js","type":"DELETED","insertions":0,"deletions":-75},{"file":"test/server.test.js","type":"ADDED","insertions":90,"deletions":0},{"file":"test/stub.test.js","type":"DELETED","insertions":0,"deletions":-27}],"sizeInsertions":289,"sizeDeletions":-136},{"number":"8","revision":"8309fb4bcb81a8a2039039dc3f5e8f5eed14b9a6","parents":["86ab6c42c60e6f27c5cadadff99e5154ca835a64"],"ref":"refs/changes/91/1791/8","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1493144959,"author":{"name":"princesspretzel","email":"brittany@231c6c0e-5992-6e17-85ee-8ac2c04d81b1.local","username":""},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1492789803,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1493083507,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1493083507,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1492710006,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1493157077,"by":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"README.md","type":"MODIFIED","insertions":41,"deletions":-26},{"file":"bin/generate_hosts_config.js","type":"MODIFIED","insertions":10,"deletions":-6},{"file":"test/generate_hosts_config.test.js","type":"ADDED","insertions":146,"deletions":0},{"file":"test/helper.js","type":"DELETED","insertions":0,"deletions":-75},{"file":"test/server.test.js","type":"ADDED","insertions":90,"deletions":0},{"file":"test/stub.test.js","type":"DELETED","insertions":0,"deletions":-27}],"sizeInsertions":289,"sizeDeletions":-136}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"}]}