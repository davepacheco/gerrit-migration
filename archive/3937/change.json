{"project":"joyent/illumos-joyent","branch":"master","id":"I6dfc9cdf26a31c05ac54748aa413187e43a0a214","number":"3937","subject":"OS-6576 Add CCM and GCM mode support to AES in pkcs11_softtoken Reviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Approved by: Dan McDonald \u003cdanmcd@joyent.com\u003e","owner":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"url":"https://cr.joyent.us/3937","commitMessage":"OS-6576 Add CCM and GCM mode support to AES in pkcs11_softtoken\nReviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nApproved by: Dan McDonald \u003cdanmcd@joyent.com\u003e\n","createdOn":1526065305,"lastUpdated":1538750201,"open":false,"status":"MERGED","comments":[{"timestamp":1526065305,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 1."},{"timestamp":1532106987,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 1:\n\nNot ready to +1 yet, but pass-0 seemed sane."},{"timestamp":1533272268,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1533319088,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 3."},{"timestamp":1535670956,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3:\n\n(5 comments)"},{"timestamp":1535757548,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1536112899,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 5."},{"timestamp":1536112949,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 3:\n\n(5 comments)"},{"timestamp":1536157536,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1536173187,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3:\n\n(3 comments)"},{"timestamp":1536174565,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1536174584,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 5:\n\n(2 comments)"},{"timestamp":1536174601,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 6."},{"timestamp":1536175483,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 6: Code-Review+1\n\nThis looks reasonable to me, but I wouldn\u0027t count my review as being in depth as I might in other areas for whomever looks at doing IA for this."},{"timestamp":1536195602,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 6:\n\nIncremental 1..6 is okay.  Re-reviewing 0..6 tomorrow."},{"timestamp":1536240674,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 6:\n\nYou need to update the Makefiles for {i386,sparc,sparcv9} as well, right?"},{"timestamp":1536243641,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 6:\n\nAs far as I know, there aren\u0027t any HW instructions for i386 or sparc/sparcv9 for CCM or GCM -- the libsoftcrypto/amd64/Makefile changes are to use the pcmulqdq instruction in GCM mode when present (the kernel already does this)"},{"timestamp":1536243716,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 6:\n\n(1 comment)\n\n\u003e As far as I know, there aren\u0027t any HW instructions for i386 or\n \u003e sparc/sparcv9 for CCM or GCM -- the libsoftcrypto/amd64/Makefile\n \u003e changes are to use the pcmulqdq instruction in GCM mode when\n \u003e present (the kernel already does this)\n\nDammit, I saw \"makefile changes in one place\" and assumed they needed to propagate everywhere.  My bad."},{"timestamp":1536244278,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1536244968,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 6:\n\nSadly, it looks like a lot of those warnings being disabled for for multiple files in usr/src/common/crypto -- enough files that it\u0027d probably warrant it\u0027s own change to clean those up to eliminate the -Wno-* entries here."},{"timestamp":1536244974,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 7."},{"timestamp":1536245044,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 6:\n\n\u003e Sadly, it looks like a lot of those warnings being disabled for for\n \u003e multiple files in usr/src/common/crypto -- enough files that it\u0027d\n \u003e probably warrant it\u0027s own change to clean those up to eliminate the\n \u003e -Wno-* entries here.\n\nRemoving -Wno-* is not worth disrupting this commit.  But please lose that one line anyway?"},{"timestamp":1536246958,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 7:\n\n(2 comments)\n\nComment-level nits are all that\u0027s left.\n\nALSO, it appears that *existing* usr/src/test covers everything you\u0027re changing, modulo the aes_ccm test. Document your lack of regressions before asking for IA, please."},{"timestamp":1536252385,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 8."},{"timestamp":1536252697,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 8: Code-Review+1\n\nLooking forward to the test results (and RM has noted that usr/src/test for crypto may need better 64-bit-ness)."},{"timestamp":1536364938,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 9."},{"timestamp":1536365043,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 10."},{"timestamp":1536365192,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 10:\n\nWith the 32 \u0026 64 bit tests, had to make some adjustments to the CCM test after rebasing to account for the changes."},{"timestamp":1536365631,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 10:\n\n(2 comments)"},{"timestamp":1536514350,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 11."},{"timestamp":1536514409,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 10:\n\n(2 comments)"},{"timestamp":1536582894,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 11: Code-Review+1\n\nIncremental looks good."},{"timestamp":1536620677,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 11: Code-Review+1\n\n(1 comment)"},{"timestamp":1536621381,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 10:\n\n(1 comment)"},{"timestamp":1536621872,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 10:\n\n(1 comment)"},{"timestamp":1536622334,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 10:\n\n(1 comment)"},{"timestamp":1538446963,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 12."},{"timestamp":1538486863,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 12: Code-Review+1\n\nGood catch on the test results (0-length okay for some cases)."},{"timestamp":1538609860,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 12:\n\n(1 comment)"},{"timestamp":1538610366,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 12:\n\n(1 comment)"},{"timestamp":1538610685,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 13."},{"timestamp":1538611662,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 13: Code-Review+1"},{"timestamp":1538612150,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 13: Code-Review+1"},{"timestamp":1538700185,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 13:\n\nYou tested with a DEBUG kernel, which is good. Did you happen to test userspace with libumem\u0027s UMEM_DEBUG\u003ddefault as well?"},{"timestamp":1538701463,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 13: Integration-Approval+1\n\nAnd I quote:\n\n\"ok.. i updated the ticket -- all good (the digest tests can still crash, but that\u0027s due to OS-7274 -- I also have a copy of the test binaries with the fix for OS-7274 in them, and they are also ok)\""},{"timestamp":1538705656,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 14: Commit message was updated."},{"timestamp":1538705704,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 15: Patch Set 14 was rebased."},{"timestamp":1538750176,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 16: Patch Set 15 was rebased."},{"timestamp":1538750201,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jason King"}],"currentPatchSet":{"number":"16","revision":"6dfc9cdf26a31c05ac54748aa413187e43a0a214","parents":["b1917065992b99886121c8fbeeb447643cb0a1fb"],"ref":"refs/changes/37/3937/16","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1538750176,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1538611662,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1538612150,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1538701463,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"SUBM","value":"1","grantedOn":1538750201,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/common/crypto/aes/aes_impl.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/common/crypto/aes/aes_modes.c","type":"MODIFIED","insertions":19,"deletions":-4},{"file":"usr/src/common/crypto/modes/gcm.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/common/crypto/modes/modes.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaCrypt.c","type":"MODIFIED","insertions":13,"deletions":-3},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.targ","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/amd64/Makefile","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/common/mapfile-vers","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelDecrypt.c","type":"MODIFIED","insertions":23,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelEncrypt.c","type":"MODIFIED","insertions":32,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelGlobal.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":974,"deletions":-902},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softCrypt.h","type":"MODIFIED","insertions":34,"deletions":-16},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":22,"deletions":-236},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":29,"deletions":-286},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":8,"deletions":-44},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softVerifyUtil.c","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest.h","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest_kcf.c","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest_pkcs.c","type":"MODIFIED","insertions":20,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/crypto-tests/tests/modes/aes/ccm/aes_ccm.c","type":"MODIFIED","insertions":42,"deletions":-30},{"file":"usr/src/uts/common/crypto/io/aes.c","type":"MODIFIED","insertions":1,"deletions":-16},{"file":"usr/src/uts/common/crypto/io/crypto.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/crypto/io/dprov.c","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":1334,"sizeDeletions":-1566},"patchSets":[{"number":"1","revision":"deb27999c39040ae5aa893e084882553d55c32f2","parents":["954158f9265ac07fdc3bf32148c92bdb65f72e06"],"ref":"refs/changes/37/3937/1","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1526065305,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/common/crypto/aes/aes_modes.c","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"usr/src/common/crypto/modes/gcm.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/common/crypto/modes/modes.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.targ","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/amd64/Makefile","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/common/mapfile-vers","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":974,"deletions":-902},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softCrypt.h","type":"MODIFIED","insertions":34,"deletions":-16},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":22,"deletions":-236},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":29,"deletions":-286},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":9,"deletions":-44},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softVerifyUtil.c","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"usr/src/test/crypto-tests/tests/modes/aes/ccm/aes_ccm.c","type":"MODIFIED","insertions":48,"deletions":-28}],"sizeInsertions":1182,"sizeDeletions":-1537},{"number":"2","revision":"9db8429578ab6a4f86fb2ab7ada0d4ef71f355a6","parents":["5ea2876c4c5ed6cd7890ab3ee48d6e0522b67e6d"],"ref":"refs/changes/37/3937/2","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1533272268,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"TRIVIAL_REBASE","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/common/crypto/aes/aes_modes.c","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"usr/src/common/crypto/modes/gcm.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/common/crypto/modes/modes.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.targ","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/amd64/Makefile","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/common/mapfile-vers","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":974,"deletions":-902},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softCrypt.h","type":"MODIFIED","insertions":34,"deletions":-16},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":22,"deletions":-236},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":29,"deletions":-286},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":9,"deletions":-44},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softVerifyUtil.c","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"usr/src/test/crypto-tests/tests/modes/aes/ccm/aes_ccm.c","type":"MODIFIED","insertions":48,"deletions":-28}],"sizeInsertions":1182,"sizeDeletions":-1537},{"number":"3","revision":"e2836c06d94201431fcdcfa20bb966a11cf2eba7","parents":["5ea2876c4c5ed6cd7890ab3ee48d6e0522b67e6d"],"ref":"refs/changes/37/3937/3","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1533319088,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","line":56,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"How did you determine which parameters require parameters or not? Does this come from the pkcs11 spec?"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","line":56,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"(I\u0027m assuming you meant which mechanisms require parameters) -- yes"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","line":115,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"We should probably file an rfe to turn this into an error detecting mutex."},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","line":115,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Yeah, I\u0027d like to convert all the pkcs11 libs to use error checking mutexes at some point"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","line":220,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"What are the alignment issues? Is it that some of our parameters aren\u0027t 64-bit aligned? Something else?"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","line":220,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"That comment could be better.  The problem is cbc_init_ctx wants a function pointer of the form \u0027void (*copy_block)(uint8_t *, uint64_t *)\u0027 as an argument, while aes_copy_block is defined as \u0027void aes_copy_block(uint8_t *, uint32_t *).\n\nI\u0027ll just add the aes_copy_block64 into libsoftcrypto (which is what the kernel uses for cbc_init_ctx)."},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","line":1024,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I might indicate that these functions were called previously and a bit about how you get here. Otherwise it\u0027s not immediately obvious that this holds."},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","line":1024,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","line":127,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I presume that the subsequent callers will short circuit as needed for the ulDataLen \u003d\u003d 0 case?"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","line":127,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"I\u0027m not sure I understand the question -- this is a single part operation (i.e. you cannot call C_Encrypt() again without calling C_EncryptInit() to specify mechanism, key, etc. again first.\n\nThe mechanisms themselves if given a NULL pointer and a 0 input length all appear handle it correctly (they pass their respective tests of that at least)."},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","line":127,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Robert -- C_EncryptUpdate (next function down) is the multi-part encrypt primitive."},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","line":127,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Sorry, I wasn\u0027t very clear. In this case I really meant the subsequent functions we call. For example, soft_encrypt() and that long chain. From a brief inspection, it seems like the answer is likely yes. But I\u0027m not terribly familiar with this code path in general."},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","line":127,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Yeah, unfortunately the way this whole library is structured is a bit unwieldy IMO, though I figure I\u0027d save dealing with that for another day :)\n\nFrom everything I\u0027ve been able to try and look at, everything appears to be ok (and only cares about pData if ulDataLen \u003e 0) -- the behavior of encrypting an empty buffer is mechanism dependent -- some can accept it and return a value (ones that do padding often fall into this category), others will return an error which is propagated back."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/common/crypto/aes/aes_modes.c","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"usr/src/common/crypto/modes/gcm.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/common/crypto/modes/modes.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.targ","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/amd64/Makefile","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/common/mapfile-vers","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelDecrypt.c","type":"MODIFIED","insertions":23,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelEncrypt.c","type":"MODIFIED","insertions":23,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelGlobal.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":974,"deletions":-902},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softCrypt.h","type":"MODIFIED","insertions":34,"deletions":-16},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":22,"deletions":-236},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":29,"deletions":-286},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":9,"deletions":-44},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softVerifyUtil.c","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"usr/src/test/crypto-tests/tests/modes/aes/ccm/aes_ccm.c","type":"MODIFIED","insertions":48,"deletions":-28}],"sizeInsertions":1245,"sizeDeletions":-1538},{"number":"4","revision":"2dc31ed7fd6f644a87422351da218eb0851893a7","parents":["bfe5ff0f4ad769a453337252e1adf21fb4313a83"],"ref":"refs/changes/37/3937/4","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1535757548,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"TRIVIAL_REBASE","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/common/crypto/aes/aes_modes.c","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"usr/src/common/crypto/modes/gcm.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/common/crypto/modes/modes.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.targ","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/amd64/Makefile","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/common/mapfile-vers","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelDecrypt.c","type":"MODIFIED","insertions":23,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelEncrypt.c","type":"MODIFIED","insertions":23,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelGlobal.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":974,"deletions":-902},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softCrypt.h","type":"MODIFIED","insertions":34,"deletions":-16},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":22,"deletions":-236},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":29,"deletions":-286},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":9,"deletions":-44},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softVerifyUtil.c","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"usr/src/test/crypto-tests/tests/modes/aes/ccm/aes_ccm.c","type":"MODIFIED","insertions":48,"deletions":-28}],"sizeInsertions":1245,"sizeDeletions":-1538},{"number":"5","revision":"4067d516c6da0b9b5625b844239e27ee3a7a5012","parents":["bfe5ff0f4ad769a453337252e1adf21fb4313a83"],"ref":"refs/changes/37/3937/5","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1536112899,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/lib/pkcs11/libsoftcrypto/common/mapfile-vers","line":49,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Note indentation mismatch."},{"file":"usr/src/lib/pkcs11/libsoftcrypto/common/mapfile-vers","line":49,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/lib/pkcs11/libsoftcrypto/common/mapfile-vers","line":84,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Note indentation mismatch."},{"file":"usr/src/lib/pkcs11/libsoftcrypto/common/mapfile-vers","line":84,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/common/crypto/aes/aes_impl.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/common/crypto/aes/aes_modes.c","type":"MODIFIED","insertions":19,"deletions":-4},{"file":"usr/src/common/crypto/modes/gcm.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/common/crypto/modes/modes.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.targ","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/amd64/Makefile","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/common/mapfile-vers","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelDecrypt.c","type":"MODIFIED","insertions":23,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelEncrypt.c","type":"MODIFIED","insertions":23,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelGlobal.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":966,"deletions":-902},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softCrypt.h","type":"MODIFIED","insertions":34,"deletions":-16},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":22,"deletions":-236},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":29,"deletions":-286},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":9,"deletions":-44},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softVerifyUtil.c","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"usr/src/test/crypto-tests/tests/modes/aes/ccm/aes_ccm.c","type":"MODIFIED","insertions":48,"deletions":-28},{"file":"usr/src/uts/common/crypto/io/aes.c","type":"MODIFIED","insertions":1,"deletions":-16}],"sizeInsertions":1262,"sizeDeletions":-1555},{"number":"6","revision":"3a5c794ed8b7c20516a51a60b4ac26996481f6e2","parents":["bfe5ff0f4ad769a453337252e1adf21fb4313a83"],"ref":"refs/changes/37/3937/6","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1536174601,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536175483,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"comments":[{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","line":456,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"I had to source-dive to figure out that the aes_ctx already has stored the not-yet-block-sized last bytes, and you\u0027re feeding \"block\" as the padding.  Not sure, though, if any further commenting would help or not.  (i.e. Your call.)"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","line":826,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Point to similar code above w.r.t. comments about CBC_PAD and pkcs7 functions being overweight?"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","line":2270,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Unused variable?!"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","line":2270,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Sure looks like it -- I\u0027ll remove (and see how badly things blow up if I remove the existing \u0027CERRWARN +\u003d     -_gcc\u003d-Wno-unused-variable\u0027 from usr/src/lib/pkcs11/pkcs11_softtoken/Makefile.com)"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/common/crypto/aes/aes_impl.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/common/crypto/aes/aes_modes.c","type":"MODIFIED","insertions":19,"deletions":-4},{"file":"usr/src/common/crypto/modes/gcm.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/common/crypto/modes/modes.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.targ","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/amd64/Makefile","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/common/mapfile-vers","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelDecrypt.c","type":"MODIFIED","insertions":23,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelEncrypt.c","type":"MODIFIED","insertions":23,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelGlobal.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":966,"deletions":-902},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softCrypt.h","type":"MODIFIED","insertions":34,"deletions":-16},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":22,"deletions":-236},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":29,"deletions":-286},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":9,"deletions":-44},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softVerifyUtil.c","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"usr/src/test/crypto-tests/tests/modes/aes/ccm/aes_ccm.c","type":"MODIFIED","insertions":48,"deletions":-28},{"file":"usr/src/uts/common/crypto/io/aes.c","type":"MODIFIED","insertions":1,"deletions":-16}],"sizeInsertions":1262,"sizeDeletions":-1555},{"number":"7","revision":"7bcedbbb149dd377ca2acd22591e106e217fcb71","parents":["bfe5ff0f4ad769a453337252e1adf21fb4313a83"],"ref":"refs/changes/37/3937/7","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1536244974,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/common/crypto/aes/aes_impl.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/common/crypto/aes/aes_modes.c","type":"MODIFIED","insertions":19,"deletions":-4},{"file":"usr/src/common/crypto/modes/gcm.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/common/crypto/modes/modes.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.targ","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/amd64/Makefile","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/common/mapfile-vers","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelDecrypt.c","type":"MODIFIED","insertions":23,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelEncrypt.c","type":"MODIFIED","insertions":23,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelGlobal.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":966,"deletions":-902},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softCrypt.h","type":"MODIFIED","insertions":34,"deletions":-16},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":22,"deletions":-236},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":29,"deletions":-286},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":8,"deletions":-44},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softVerifyUtil.c","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"usr/src/test/crypto-tests/tests/modes/aes/ccm/aes_ccm.c","type":"MODIFIED","insertions":48,"deletions":-28},{"file":"usr/src/uts/common/crypto/io/aes.c","type":"MODIFIED","insertions":1,"deletions":-16}],"sizeInsertions":1261,"sizeDeletions":-1555},{"number":"8","revision":"84a6507b479a4afe8acc743fb594e02d6553f2cc","parents":["bfe5ff0f4ad769a453337252e1adf21fb4313a83"],"ref":"refs/changes/37/3937/8","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1536252385,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536252697,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/common/crypto/aes/aes_impl.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/common/crypto/aes/aes_modes.c","type":"MODIFIED","insertions":19,"deletions":-4},{"file":"usr/src/common/crypto/modes/gcm.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/common/crypto/modes/modes.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.targ","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/amd64/Makefile","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/common/mapfile-vers","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelDecrypt.c","type":"MODIFIED","insertions":23,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelEncrypt.c","type":"MODIFIED","insertions":23,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelGlobal.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":975,"deletions":-902},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softCrypt.h","type":"MODIFIED","insertions":34,"deletions":-16},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":22,"deletions":-236},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":29,"deletions":-286},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":8,"deletions":-44},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softVerifyUtil.c","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"usr/src/test/crypto-tests/tests/modes/aes/ccm/aes_ccm.c","type":"MODIFIED","insertions":48,"deletions":-28},{"file":"usr/src/uts/common/crypto/io/aes.c","type":"MODIFIED","insertions":1,"deletions":-16}],"sizeInsertions":1270,"sizeDeletions":-1555},{"number":"9","revision":"80b5c129679aac1b5a774d6a4abdc4467d75d032","parents":["fce7145e2a75d0f563af602902e193473a789f7b"],"ref":"refs/changes/37/3937/9","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1536364938,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/common/crypto/aes/aes_impl.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/common/crypto/aes/aes_modes.c","type":"MODIFIED","insertions":19,"deletions":-4},{"file":"usr/src/common/crypto/modes/gcm.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/common/crypto/modes/modes.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.targ","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/amd64/Makefile","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/common/mapfile-vers","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelDecrypt.c","type":"MODIFIED","insertions":23,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelEncrypt.c","type":"MODIFIED","insertions":23,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelGlobal.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":975,"deletions":-902},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softCrypt.h","type":"MODIFIED","insertions":34,"deletions":-16},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":22,"deletions":-236},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":29,"deletions":-286},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":8,"deletions":-44},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softVerifyUtil.c","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/test/crypto-tests/tests/modes/aes/ccm/aes_ccm.c","type":"MODIFIED","insertions":48,"deletions":-28},{"file":"usr/src/uts/common/crypto/io/aes.c","type":"MODIFIED","insertions":1,"deletions":-16}],"sizeInsertions":1269,"sizeDeletions":-1554},{"number":"10","revision":"e32e6937cf2686d6741e6ce565d69bbffa8d93d8","parents":["fce7145e2a75d0f563af602902e193473a789f7b"],"ref":"refs/changes/37/3937/10","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1536365043,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","line":451,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Extraneous blank?"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","line":451,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","line":60,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This is already at +44. Either remove that one or bring the following line up to it?"},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","line":60,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","line":60,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Was the CPPFLAGS addition unnecessary?"},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","line":60,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"That was from the original commit (I just chopped it up \u003c 80 characters).  The LF64 stuff might be unnecessary -- I can try to remove it and see if anything barfs."},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","line":60,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I was jut asking about the -DPKCS11 which seemed to have been lost in the final version."},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","line":60,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Yeah -- -DPKCS11 is no longer needed.  Originally (because of a difference in structs) that was used to build separate PKCS11 and KCF versions of aes_ccm.o With the addition of building 32 \u0026 64 bit objects, instead of making 4 versions (aes_ccm_{pkcs,kcf}{32,64}.o) I just created the ccm_param_init() function in cryptotest_{pkcs,kcf}.c (the structs only differ between PKCS11 \u0026 KCF -- their respective versions are the same across 32 \u0026 64-bit environments) and use that instead to initialize the CCM parameters in the format each one expects."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/common/crypto/aes/aes_impl.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/common/crypto/aes/aes_modes.c","type":"MODIFIED","insertions":19,"deletions":-4},{"file":"usr/src/common/crypto/modes/gcm.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/common/crypto/modes/modes.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.targ","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/amd64/Makefile","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/common/mapfile-vers","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelDecrypt.c","type":"MODIFIED","insertions":23,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelEncrypt.c","type":"MODIFIED","insertions":23,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelGlobal.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":975,"deletions":-902},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softCrypt.h","type":"MODIFIED","insertions":34,"deletions":-16},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":22,"deletions":-236},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":29,"deletions":-286},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":8,"deletions":-44},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softVerifyUtil.c","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest.h","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest_kcf.c","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest_pkcs.c","type":"MODIFIED","insertions":20,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/test/crypto-tests/tests/modes/aes/ccm/aes_ccm.c","type":"MODIFIED","insertions":42,"deletions":-30},{"file":"usr/src/uts/common/crypto/io/aes.c","type":"MODIFIED","insertions":1,"deletions":-16}],"sizeInsertions":1311,"sizeDeletions":-1556},{"number":"11","revision":"860b9cb585028833cc1ab8a536746811bcdf17b8","parents":["fce7145e2a75d0f563af602902e193473a789f7b"],"ref":"refs/changes/37/3937/11","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1536514350,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536620677,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536582894,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/common/crypto/aes/aes_impl.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/common/crypto/aes/aes_modes.c","type":"MODIFIED","insertions":19,"deletions":-4},{"file":"usr/src/common/crypto/modes/gcm.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/common/crypto/modes/modes.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.targ","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/amd64/Makefile","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/common/mapfile-vers","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelDecrypt.c","type":"MODIFIED","insertions":23,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelEncrypt.c","type":"MODIFIED","insertions":23,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelGlobal.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":974,"deletions":-902},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softCrypt.h","type":"MODIFIED","insertions":34,"deletions":-16},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":22,"deletions":-236},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":29,"deletions":-286},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":8,"deletions":-44},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softVerifyUtil.c","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest.h","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest_kcf.c","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest_pkcs.c","type":"MODIFIED","insertions":20,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/crypto-tests/tests/modes/aes/ccm/aes_ccm.c","type":"MODIFIED","insertions":42,"deletions":-30},{"file":"usr/src/uts/common/crypto/io/aes.c","type":"MODIFIED","insertions":1,"deletions":-16}],"sizeInsertions":1307,"sizeDeletions":-1556},{"number":"12","revision":"28c5cdcef2892f257c9920a709f8363075d237fe","parents":["1c1a890e7ba95068bc573dd82bcec35fbe2ad66b"],"ref":"refs/changes/37/3937/12","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1538446963,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1538486863,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"comments":[{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaCrypt.c","line":88,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It\u0027s not clear to me how the comment here relates to the subsequent check about the pointer being valid. I can see it maybe trying to relate to the subsequent check. That might mean that it can be a bit improved in whatever it\u0027s trying to convey."},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaCrypt.c","line":88,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"That comment should be moved to immediately before line 95.  I\u0027ll do that and add a bit more detail."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/common/crypto/aes/aes_impl.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/common/crypto/aes/aes_modes.c","type":"MODIFIED","insertions":19,"deletions":-4},{"file":"usr/src/common/crypto/modes/gcm.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/common/crypto/modes/modes.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaCrypt.c","type":"MODIFIED","insertions":12,"deletions":-3},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.targ","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/amd64/Makefile","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/common/mapfile-vers","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelDecrypt.c","type":"MODIFIED","insertions":23,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelEncrypt.c","type":"MODIFIED","insertions":32,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelGlobal.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":974,"deletions":-902},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softCrypt.h","type":"MODIFIED","insertions":34,"deletions":-16},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":22,"deletions":-236},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":29,"deletions":-286},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":8,"deletions":-44},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softVerifyUtil.c","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest.h","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest_kcf.c","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest_pkcs.c","type":"MODIFIED","insertions":20,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/crypto-tests/tests/modes/aes/ccm/aes_ccm.c","type":"MODIFIED","insertions":42,"deletions":-30},{"file":"usr/src/uts/common/crypto/io/aes.c","type":"MODIFIED","insertions":1,"deletions":-16},{"file":"usr/src/uts/common/crypto/io/crypto.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/crypto/io/dprov.c","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":1333,"sizeDeletions":-1566},{"number":"13","revision":"6c21706c14a0eda8f9ef36d6ae5d4048f5ea7993","parents":["1c1a890e7ba95068bc573dd82bcec35fbe2ad66b"],"ref":"refs/changes/37/3937/13","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1538610685,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1538612150,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1538611662,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1538701463,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/common/crypto/aes/aes_impl.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/common/crypto/aes/aes_modes.c","type":"MODIFIED","insertions":19,"deletions":-4},{"file":"usr/src/common/crypto/modes/gcm.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/common/crypto/modes/modes.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaCrypt.c","type":"MODIFIED","insertions":13,"deletions":-3},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.targ","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/amd64/Makefile","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/common/mapfile-vers","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelDecrypt.c","type":"MODIFIED","insertions":23,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelEncrypt.c","type":"MODIFIED","insertions":32,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelGlobal.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":974,"deletions":-902},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softCrypt.h","type":"MODIFIED","insertions":34,"deletions":-16},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":22,"deletions":-236},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":29,"deletions":-286},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":8,"deletions":-44},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softVerifyUtil.c","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest.h","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest_kcf.c","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest_pkcs.c","type":"MODIFIED","insertions":20,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/crypto-tests/tests/modes/aes/ccm/aes_ccm.c","type":"MODIFIED","insertions":42,"deletions":-30},{"file":"usr/src/uts/common/crypto/io/aes.c","type":"MODIFIED","insertions":1,"deletions":-16},{"file":"usr/src/uts/common/crypto/io/crypto.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/crypto/io/dprov.c","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":1334,"sizeDeletions":-1566},{"number":"14","revision":"e39b9f65d0f37550efcc72873987acbc12889d53","parents":["1c1a890e7ba95068bc573dd82bcec35fbe2ad66b"],"ref":"refs/changes/37/3937/14","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1538705656,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1538612150,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1538611662,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1538701463,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/common/crypto/aes/aes_impl.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/common/crypto/aes/aes_modes.c","type":"MODIFIED","insertions":19,"deletions":-4},{"file":"usr/src/common/crypto/modes/gcm.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/common/crypto/modes/modes.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaCrypt.c","type":"MODIFIED","insertions":13,"deletions":-3},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.targ","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/amd64/Makefile","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/common/mapfile-vers","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelDecrypt.c","type":"MODIFIED","insertions":23,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelEncrypt.c","type":"MODIFIED","insertions":32,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelGlobal.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":974,"deletions":-902},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softCrypt.h","type":"MODIFIED","insertions":34,"deletions":-16},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":22,"deletions":-236},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":29,"deletions":-286},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":8,"deletions":-44},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softVerifyUtil.c","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest.h","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest_kcf.c","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest_pkcs.c","type":"MODIFIED","insertions":20,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/crypto-tests/tests/modes/aes/ccm/aes_ccm.c","type":"MODIFIED","insertions":42,"deletions":-30},{"file":"usr/src/uts/common/crypto/io/aes.c","type":"MODIFIED","insertions":1,"deletions":-16},{"file":"usr/src/uts/common/crypto/io/crypto.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/crypto/io/dprov.c","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":1334,"sizeDeletions":-1566},{"number":"15","revision":"80ecbe59bad54b13cd87628cff232f7fd4335b4b","parents":["4c14c4cff5adaaa79d7099e153c3ace3a0d65148"],"ref":"refs/changes/37/3937/15","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1538705704,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1538612150,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1538611662,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1538701463,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/common/crypto/aes/aes_impl.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/common/crypto/aes/aes_modes.c","type":"MODIFIED","insertions":19,"deletions":-4},{"file":"usr/src/common/crypto/modes/gcm.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/common/crypto/modes/modes.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaCrypt.c","type":"MODIFIED","insertions":13,"deletions":-3},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.targ","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/amd64/Makefile","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/common/mapfile-vers","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelDecrypt.c","type":"MODIFIED","insertions":23,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelEncrypt.c","type":"MODIFIED","insertions":32,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelGlobal.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":974,"deletions":-902},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softCrypt.h","type":"MODIFIED","insertions":34,"deletions":-16},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":22,"deletions":-236},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":29,"deletions":-286},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":8,"deletions":-44},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softVerifyUtil.c","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest.h","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest_kcf.c","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest_pkcs.c","type":"MODIFIED","insertions":20,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/crypto-tests/tests/modes/aes/ccm/aes_ccm.c","type":"MODIFIED","insertions":42,"deletions":-30},{"file":"usr/src/uts/common/crypto/io/aes.c","type":"MODIFIED","insertions":1,"deletions":-16},{"file":"usr/src/uts/common/crypto/io/crypto.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/crypto/io/dprov.c","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":1334,"sizeDeletions":-1566},{"number":"16","revision":"6dfc9cdf26a31c05ac54748aa413187e43a0a214","parents":["b1917065992b99886121c8fbeeb447643cb0a1fb"],"ref":"refs/changes/37/3937/16","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1538750176,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1538612150,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1538750201,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1538611662,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1538701463,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/common/crypto/aes/aes_impl.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/common/crypto/aes/aes_modes.c","type":"MODIFIED","insertions":19,"deletions":-4},{"file":"usr/src/common/crypto/modes/gcm.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/common/crypto/modes/modes.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaCrypt.c","type":"MODIFIED","insertions":13,"deletions":-3},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/pkcs11/libsoftcrypto/Makefile.targ","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/amd64/Makefile","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/pkcs11/libsoftcrypto/common/mapfile-vers","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelDecrypt.c","type":"MODIFIED","insertions":23,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelEncrypt.c","type":"MODIFIED","insertions":32,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelGlobal.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":974,"deletions":-902},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softCrypt.h","type":"MODIFIED","insertions":34,"deletions":-16},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":22,"deletions":-236},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncrypt.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":29,"deletions":-286},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":8,"deletions":-44},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softVerifyUtil.c","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest.h","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest_kcf.c","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/common/cryptotest_pkcs.c","type":"MODIFIED","insertions":20,"deletions":0},{"file":"usr/src/test/crypto-tests/tests/modes/aes/Makefile.subdirs","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/crypto-tests/tests/modes/aes/ccm/aes_ccm.c","type":"MODIFIED","insertions":42,"deletions":-30},{"file":"usr/src/uts/common/crypto/io/aes.c","type":"MODIFIED","insertions":1,"deletions":-16},{"file":"usr/src/uts/common/crypto/io/crypto.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/crypto/io/dprov.c","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":1334,"sizeDeletions":-1566}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}]}