{"project":"joyent/node-vmapi-resolver","branch":"master","topic":"MANTA-4318","id":"I249621aac5d237e6c6890f41bdd8aa3a79e54b05","number":"6765","subject":"joyent/node-vmapi-resolver#3 should return the tags of VM/backend Reviewed by: Kody A Kantor \u003ckody@kkantor.com\u003e Approved by: Kody A Kantor \u003ckody@kkantor.com\u003e","owner":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"url":"https://cr.joyent.us/6765","commitMessage":"joyent/node-vmapi-resolver#3 should return the tags of VM/backend\nReviewed by: Kody A Kantor \u003ckody@kkantor.com\u003e\nApproved by: Kody A Kantor \u003ckody@kkantor.com\u003e\n","createdOn":1565250219,"lastUpdated":1570707799,"open":false,"status":"MERGED","comments":[{"timestamp":1565250219,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Uploaded patch set 1."},{"timestamp":1565250222,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1565250332,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Uploaded patch set 2."},{"timestamp":1565250334,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1567631304,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 2:\n\n(1 comment)\n\nLooks good!"},{"timestamp":1567669960,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1567689926,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Topic set to MANTA-4318"},{"timestamp":1570199414,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 2: Code-Review+1\n\nGreat, thanks for answering that question! I\u0027ll take a look at this for IA later today."},{"timestamp":1570199453,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 2:\n\nOh, do we need to do a new version rev in package.json (and publish it so things can use this new functionality)?"},{"timestamp":1570220934,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1570220975,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 2: -Integration-Approval\n\nOops, I forgot that I had a question about versioning. Your testing notes look good though!"},{"timestamp":1570437701,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 2:\n\nYes, good point on version!\n\nA consumer would just get extra bits back in a response (existing fields remain unchanged) and the interface hasn\u0027t changed. Does a minor bump to 2.1.0 sound OK to you?\n\nAs for getting that done, I don\u0027t see a change log or anything, so just a bump in package.json? I will follow up with git tagging and NPM stuff once integrated."},{"timestamp":1570458221,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 2:\n\n\u003e As for getting that done, I don\u0027t see a change log or anything, so just a bump in package.json? I will follow up with git tagging and NPM stuff once integrated.\n\nYes, it looks like we just bump the package.json file. 2.1.0 sounds good to me as well. Should we also update the README example usage section?"},{"timestamp":1570619314,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Uploaded patch set 3."},{"timestamp":1570619317,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1570619419,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 3:\n\nAgreed on the README updates. I\u0027ve pushed PS3 which adds to the existing example and includes some extra details. Also bumped package.json\u0027s version."},{"timestamp":1570639939,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1570707726,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1570707799,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Richard Bradley"}],"currentPatchSet":{"number":"4","revision":"249621aac5d237e6c6890f41bdd8aa3a79e54b05","parents":["4acc2e5cb53847fe9afebe650b57868854680a76"],"ref":"refs/changes/65/6765/4","uploader":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"createdOn":1570707726,"author":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1570619317,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570639939,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1570639939,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"SUBM","value":"1","grantedOn":1570707799,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/resolver.js","type":"MODIFIED","insertions":27,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":33,"sizeDeletions":-5},"patchSets":[{"number":"1","revision":"056cfc16e3a7366845a7aecce32156749009032e","parents":["4acc2e5cb53847fe9afebe650b57868854680a76"],"ref":"refs/changes/65/6765/1","uploader":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"createdOn":1565250219,"author":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1565250222,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/resolver.js","line":118,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: trailing_comma"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/resolver.js","type":"MODIFIED","insertions":27,"deletions":-3}],"sizeInsertions":27,"sizeDeletions":-3},{"number":"2","revision":"43da2e58fd20f3c22182a8e0397066eb9d574689","parents":["4acc2e5cb53847fe9afebe650b57868854680a76"],"ref":"refs/changes/65/6765/2","uploader":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"createdOn":1565250332,"author":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1565250334,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570199414,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"comments":[{"file":"lib/resolver.js","line":141,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"What does this look like to the caller if matched_tag was unset when we did the backend.tag assignment in the getBackends function?"},{"file":"lib/resolver.js","line":141,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"My intention here was to not include the \"tag\" property in the returned backend object if no exact match could be found. At this point, \"backend.tag\" would be undefined (and so falsy), so we wouldn\u0027t enter this section to set \"be[\u0027tag\u0027]\" at all on the backend object.\n\nI think my \"wildcard in tag name\" example in the testing notes (https://github.com/joyent/node-vmapi-resolver/issues/3#issuecomment-519412443) shows an example of your question, but let me know if that doesn\u0027t cover it or if I\u0027m misunderstanding."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/resolver.js","type":"MODIFIED","insertions":27,"deletions":-3}],"sizeInsertions":27,"sizeDeletions":-3},{"number":"3","revision":"80a03e8e9a3040476d597ece0b4d18c1c1f61519","parents":["4acc2e5cb53847fe9afebe650b57868854680a76"],"ref":"refs/changes/65/6765/3","uploader":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"createdOn":1570619314,"author":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1570619317,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570639939,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1570639939,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/resolver.js","type":"MODIFIED","insertions":27,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":33,"sizeDeletions":-5},{"number":"4","revision":"249621aac5d237e6c6890f41bdd8aa3a79e54b05","parents":["4acc2e5cb53847fe9afebe650b57868854680a76"],"ref":"refs/changes/65/6765/4","uploader":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"createdOn":1570707726,"author":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1570619317,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1570707799,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570639939,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1570639939,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/resolver.js","type":"MODIFIED","insertions":27,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":33,"sizeDeletions":-5}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}]}