{"project":"joyent/illumos-joyent","branch":"master","id":"I8bac7aa9ec0b55ac4edf509a5300d3161f8b774d","number":"82","subject":"OS-4900 lxbrand strace has detachment problems Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e","owner":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"url":"https://cr.joyent.us/82","commitMessage":"OS-4900 lxbrand strace has detachment problems\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n","createdOn":1468533451,"lastUpdated":1468612367,"open":false,"status":"MERGED","comments":[{"timestamp":1468533451,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 1."},{"timestamp":1468537581,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1: Code-Review+1\n\n(3 comments)"},{"timestamp":1468597022,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 2."},{"timestamp":1468604437,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2: Code-Review+2"},{"timestamp":1468612367,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jerry Jelinek"}],"currentPatchSet":{"number":"2","revision":"8bac7aa9ec0b55ac4edf509a5300d3161f8b774d","parents":["9f5f51bfbb3b88deac203d4a5a721684d859fce3"],"ref":"refs/changes/82/82/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1468597022,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"2","grantedOn":1468604437,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1468612367,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_ptrace.c","type":"MODIFIED","insertions":48,"deletions":-31}],"sizeInsertions":48,"sizeDeletions":-31},"patchSets":[{"number":"1","revision":"122defa33d96a6219fa3df9a84f9694762be80fe","parents":["3e5c385058213debeef48e2ae511fe2be800e9e9"],"ref":"refs/changes/82/82/1","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1468533451,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1468537581,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"comments":[{"file":"usr/src/uts/common/brand/lx/os/lx_ptrace.c","line":743,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I would break this into a second paragraph."},{"file":"usr/src/uts/common/brand/lx/os/lx_ptrace.c","line":791,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Both here and where the return value is checked, I would include a comment about how ENOENT specifically indicates the error-but-accord-still-locked case."},{"file":"usr/src/uts/common/brand/lx/os/lx_ptrace.c","line":2474,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I would maybe invert the contents of this block to specifically select the op \u003d\u003d DETACH \u0026\u0026 error \u003d\u003d ENOTENT for setting restart and funnel the rest into the \"normal\" error path."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_ptrace.c","type":"MODIFIED","insertions":44,"deletions":-31}],"sizeInsertions":44,"sizeDeletions":-31},{"number":"2","revision":"8bac7aa9ec0b55ac4edf509a5300d3161f8b774d","parents":["9f5f51bfbb3b88deac203d4a5a721684d859fce3"],"ref":"refs/changes/82/82/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1468597022,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"SUBM","value":"1","grantedOn":1468612367,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"2","grantedOn":1468604437,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_ptrace.c","type":"MODIFIED","insertions":48,"deletions":-31}],"sizeInsertions":48,"sizeDeletions":-31}],"allReviewers":[{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}]}