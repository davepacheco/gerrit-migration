From 614237996af4aada9ef46bf7918ec7a95b84e687 Mon Sep 17 00:00:00 2001
From: Cody Peter Mello <cody.mello@joyent.com>
Date: Wed, 15 Feb 2017 19:32:38 +0000
Subject: [PATCH] CNAPI-693 CNAPI crashes when Moray returns an initial empty
 set of servers for allocation

---
 lib/common.js | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/lib/common.js b/lib/common.js
index b4135a2..5b941b8 100644
--- a/lib/common.js
+++ b/lib/common.js
@@ -131,7 +131,7 @@ function getAdminIp(sysinfo) {
 
 function randSort(array) {
     /* Durstenfeld shuffle */
-    for (var i = array.length - 1; i !== 0; i--) {
+    for (var i = array.length - 1; i > 0; i--) {
         var j = Math.floor(Math.random() * (i + 1));
 
         var tmp = array[i];
-- 
2.21.0

