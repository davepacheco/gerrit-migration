{"project":"joyent/sdcadm","branch":"master","id":"I116b1e545c2af44ecac21155a5101f03fdd73fdb","number":"3894","subject":"TRITON-348 sdcadm should use eslint Reviewed by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e Approved by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/3894","commitMessage":"TRITON-348 sdcadm should use eslint\nReviewed by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e\nApproved by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e\n","createdOn":1525274243,"lastUpdated":1526483456,"open":false,"status":"MERGED","comments":[{"timestamp":1525274243,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1525274249,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 6a90d776143ab6a11013cddca3eb333a0c303aa9\n    \n    TOOLS-348 sdcadm should use eslint\n    \n    commit 9b62d33955d3b81633406b6c9a3253ab60af141f\n    \n    TRITON-348 sdcadm should use eslint"},{"timestamp":1525274278,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n version is: 1.17.3\n Version check ok.\n /tmp/repo/build/node/bin/node node_modules/.bin/eslint  lib/sdcadm.js lib/procedures/update-moray-v2.js lib/procedures/download-images.js lib/procedures/procedure.js lib/procedures/index.js lib/procedures/update-stateless-services-v1.js lib/procedures/update-binder-v2.js lib/procedures/shared.js lib/procedures/update-single-hn-sapi-v1.js lib/procedures/update-agent-v1.js lib/procedures/update-dockerlogger.js lib/procedures/update-single-headnode-imgapi.js lib/procedures/update-manatee-v2.js lib/procedures/create-service-instance-v1.js lib/platform.js lib/vmadm.js lib/errors.js lib/history.js lib/ur.js lib/logging.js lib/steps/no-rabbit.js lib/steps/sapi.js lib/steps/update_vm_size.js lib/steps/binder.js lib/steps/servers.js lib/steps/index.js lib/post-setup/cns.js lib/post-setup/dev-sample-data.js lib/post-setup/volapi.js lib/post-setup/ha-manatee.js lib/post-setup/dev-headnode-prov.js lib/post-setup/cmon.js lib/post-setup/cloudapi.js lib/post-setup/common-external-nics.js lib/post-setup/ha-binder.js lib/post-setup/fabrics.js lib/post-setup/docker.js lib/post-setup/underlay-nics.js lib/post-setup/index.js lib/locker.js lib/cli/do_avail.js lib/cli/do_rollback.js lib/cli/do_update_other.js lib/cli/do_update.js lib/cli/do_instances.js lib/cli/index.js lib/cli/do_update_agents.js lib/cli/do_install_docker_cert.js lib/cli/do_history.js lib/cli/do_completion.js lib/cli/do_fix_core_vm_resolvers.js lib/cli/do_add_new_agent_svcs.js lib/cli/do_check_config.js lib/cli/do_services.js lib/cli/experimental.js lib/cli/do_self_update.js lib/cli/do_nfs_volumes.js lib/cli/do_update_docker.js lib/cli/do_update_gz_tools.js lib/cli/do_check_health.js lib/cli/do_create.js lib/common.js lib/svcadm.js lib/default-fabric.js lib/channel.js lib/dc-maint.js test/check-config.test.js test/shared.js test/update.test.js test/check-health.test.js test/platform.test.js test/create.test.js test/help.test.js test/common.test.js test/common.js test/post-setup.test.js test/sdcadm.test.js test/channel.test.js test/self-update.test.js test/history.test.js test/instances.test.js test/rollback.test.js test/dc-maint.test.js test/update-gz-tools.test.js test/services.test.js test/available.test.js test/experimental.test.js\n \n /tmp/repo/lib/sdcadm.js\n   1:1  error  File must be at most 5000 lines long. It\u0027s 5782 lines long  max-lines\n \n ✖ 1 problem (1 error, 0 warnings)\n \n tools/mk/Makefile.targ:201: recipe for target \u0027check-eslint\u0027 failed\n gmake: *** [check-eslint] Error 1"},{"timestamp":1525332034,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2."},{"timestamp":1525332040,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 28d740c94ffa87049ab7e2163ef2f8a3eee4a117\n    \n    TRITON-348 sdcadm should use eslint"},{"timestamp":1525332066,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n version is: 1.17.3\n Version check ok.\n /tmp/repo/build/node/bin/node node_modules/.bin/eslint  lib/procedures/update-single-headnode-imgapi.js lib/procedures/update-single-hn-sapi-v1.js lib/procedures/shared.js lib/procedures/update-agent-v1.js lib/procedures/procedure.js lib/procedures/update-stateless-services-v1.js lib/procedures/update-binder-v2.js lib/procedures/create-service-instance-v1.js lib/procedures/update-manatee-v2.js lib/procedures/index.js lib/procedures/update-dockerlogger.js lib/procedures/update-moray-v2.js lib/procedures/download-images.js lib/ur.js lib/logging.js lib/default-fabric.js lib/dc-maint.js lib/history.js lib/locker.js lib/common.js lib/svcadm.js lib/cli/do_update_other.js lib/cli/do_history.js lib/cli/do_add_new_agent_svcs.js lib/cli/experimental.js lib/cli/do_rollback.js lib/cli/do_fix_core_vm_resolvers.js lib/cli/do_create.js lib/cli/do_update_gz_tools.js lib/cli/do_update_docker.js lib/cli/do_update.js lib/cli/do_nfs_volumes.js lib/cli/do_check_config.js lib/cli/do_avail.js lib/cli/do_completion.js lib/cli/do_install_docker_cert.js lib/cli/do_update_agents.js lib/cli/do_self_update.js lib/cli/do_services.js lib/cli/do_check_health.js lib/cli/do_instances.js lib/cli/index.js lib/steps/sapi.js lib/steps/binder.js lib/steps/no-rabbit.js lib/steps/update_vm_size.js lib/steps/servers.js lib/steps/index.js lib/platform.js lib/post-setup/ha-manatee.js lib/post-setup/ha-binder.js lib/post-setup/fabrics.js lib/post-setup/underlay-nics.js lib/post-setup/volapi.js lib/post-setup/index.js lib/post-setup/dev-headnode-prov.js lib/post-setup/dev-sample-data.js lib/post-setup/cmon.js lib/post-setup/cloudapi.js lib/post-setup/cns.js lib/post-setup/docker.js lib/post-setup/common-external-nics.js lib/errors.js lib/vmadm.js lib/channel.js lib/sdcadm.js test/shared.js test/common.test.js test/create.test.js test/rollback.test.js test/dc-maint.test.js test/available.test.js test/check-config.test.js test/update.test.js test/update-gz-tools.test.js test/common.js test/check-health.test.js test/instances.test.js test/services.test.js test/post-setup.test.js test/self-update.test.js test/platform.test.js test/history.test.js test/experimental.test.js test/channel.test.js test/sdcadm.test.js test/help.test.js\n \n /tmp/repo/lib/sdcadm.js\n   1:1  error  File must be at most 5000 lines long. It\u0027s 5782 lines long  max-lines\n \n ✖ 1 problem (1 error, 0 warnings)\n \n tools/mk/Makefile.targ:201: recipe for target \u0027check-eslint\u0027 failed\n gmake: *** [check-eslint] Error 1"},{"timestamp":1525357419,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 3."},{"timestamp":1525357424,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 476147a31fe506ca61e6861c19e09208dcd2e9f1\n    \n    TRITON-348 sdcadm should use eslint"},{"timestamp":1525357453,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1525951418,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 3:\n\n(52 comments)\n\nI\u0027ll CR sdcadm.js and do_update_gz_tools.js later today. I\u0027m burnt."},{"timestamp":1526042021,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 3:\n\n(27 comments)"},{"timestamp":1526382287,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 4."},{"timestamp":1526382293,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit d0ae6a23fd64d0ead2ba4acd5f3e33df00d93860\n    \n    TRITON-348 sdcadm should use eslint"},{"timestamp":1526382326,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1526382329,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\n(77 comments)\n\nPushed with all the requests fulfilled. Thanks for the CR and apologies again for such nightmare!"},{"timestamp":1526473151,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1\n\n(1 comment)"},{"timestamp":1526483440,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1526483456,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"5","revision":"116b1e545c2af44ecac21155a5101f03fdd73fdb","parents":["f2bf9bb71062b09fcbf05034c1ef768358696cbc"],"ref":"refs/changes/94/3894/5","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1526483440,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1526382326,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1526473151,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1526473151,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"SUBM","value":"1","grantedOn":1526483456,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":45,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/channel.js","type":"MODIFIED","insertions":25,"deletions":-21},{"file":"lib/cli/do_add_new_agent_svcs.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"lib/cli/do_check_config.js","type":"MODIFIED","insertions":335,"deletions":-3},{"file":"lib/cli/do_check_health.js","type":"MODIFIED","insertions":26,"deletions":-17},{"file":"lib/cli/do_completion.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/cli/do_history.js","type":"MODIFIED","insertions":22,"deletions":-14},{"file":"lib/cli/do_install_docker_cert.js","type":"MODIFIED","insertions":15,"deletions":-9},{"file":"lib/cli/do_instances.js","type":"MODIFIED","insertions":7,"deletions":-4},{"file":"lib/cli/do_nfs_volumes.js","type":"MODIFIED","insertions":7,"deletions":-11},{"file":"lib/cli/do_rollback.js","type":"MODIFIED","insertions":24,"deletions":-13},{"file":"lib/cli/do_services.js","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"lib/cli/do_update.js","type":"MODIFIED","insertions":32,"deletions":-17},{"file":"lib/cli/do_update_agents.js","type":"MODIFIED","insertions":53,"deletions":-35},{"file":"lib/cli/do_update_docker.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":840,"deletions":-5},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":101,"deletions":-70},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/cli/index.js","type":"MODIFIED","insertions":23,"deletions":-18},{"file":"lib/common.js","type":"MODIFIED","insertions":66,"deletions":-45},{"file":"lib/dc-maint.js","type":"MODIFIED","insertions":21,"deletions":-19},{"file":"lib/default-fabric.js","type":"MODIFIED","insertions":21,"deletions":-12},{"file":"lib/history.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/locker.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":11,"deletions":-7},{"file":"lib/platform.js","type":"MODIFIED","insertions":268,"deletions":-194},{"file":"lib/post-setup/cmon.js","type":"MODIFIED","insertions":18,"deletions":-12},{"file":"lib/post-setup/cns.js","type":"MODIFIED","insertions":22,"deletions":-14},{"file":"lib/post-setup/common-external-nics.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/post-setup/dev-headnode-prov.js","type":"MODIFIED","insertions":20,"deletions":-15},{"file":"lib/post-setup/dev-sample-data.js","type":"MODIFIED","insertions":13,"deletions":-11},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":45,"deletions":-24},{"file":"lib/post-setup/fabrics.js","type":"MODIFIED","insertions":92,"deletions":-56},{"file":"lib/post-setup/ha-binder.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":102,"deletions":-89},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/post-setup/underlay-nics.js","type":"MODIFIED","insertions":35,"deletions":-29},{"file":"lib/post-setup/volapi.js","type":"MODIFIED","insertions":21,"deletions":-14},{"file":"lib/procedures/download-images.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/procedures/procedure.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":99,"deletions":-61},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":24,"deletions":-20},{"file":"lib/procedures/update-manatee-v2.js","type":"MODIFIED","insertions":171,"deletions":-157},{"file":"lib/procedures/update-single-headnode-imgapi.js","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":332,"deletions":-1316},{"file":"lib/steps/no-rabbit.js","type":"MODIFIED","insertions":15,"deletions":-10},{"file":"lib/steps/servers.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/steps/update_vm_size.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/ur.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/check-health.test.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"test/common.js","type":"MODIFIED","insertions":12,"deletions":-7},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":0,"deletions":-18},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"test/services.test.js","type":"MODIFIED","insertions":15,"deletions":-8},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":35,"deletions":-1},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":32,"deletions":-4}],"sizeInsertions":3127,"sizeDeletions":-2449},"patchSets":[{"number":"1","revision":"89e80221caf7e6fa9063f0513c3e3fdbaa091c54","parents":["d6fa013c245ceb9c11155238f76705205097a704"],"ref":"refs/changes/94/3894/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1525274243,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1525274278,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":45,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/channel.js","type":"MODIFIED","insertions":25,"deletions":-20},{"file":"lib/cli/do_add_new_agent_svcs.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"lib/cli/do_check_config.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/cli/do_check_health.js","type":"MODIFIED","insertions":26,"deletions":-17},{"file":"lib/cli/do_completion.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/cli/do_history.js","type":"MODIFIED","insertions":21,"deletions":-14},{"file":"lib/cli/do_install_docker_cert.js","type":"MODIFIED","insertions":15,"deletions":-9},{"file":"lib/cli/do_instances.js","type":"MODIFIED","insertions":7,"deletions":-4},{"file":"lib/cli/do_nfs_volumes.js","type":"MODIFIED","insertions":7,"deletions":-11},{"file":"lib/cli/do_rollback.js","type":"MODIFIED","insertions":24,"deletions":-13},{"file":"lib/cli/do_services.js","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"lib/cli/do_update.js","type":"MODIFIED","insertions":32,"deletions":-17},{"file":"lib/cli/do_update_agents.js","type":"MODIFIED","insertions":53,"deletions":-35},{"file":"lib/cli/do_update_docker.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":101,"deletions":-70},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/cli/index.js","type":"MODIFIED","insertions":23,"deletions":-18},{"file":"lib/common.js","type":"MODIFIED","insertions":66,"deletions":-45},{"file":"lib/dc-maint.js","type":"MODIFIED","insertions":21,"deletions":-19},{"file":"lib/default-fabric.js","type":"MODIFIED","insertions":22,"deletions":-13},{"file":"lib/history.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/locker.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":11,"deletions":-7},{"file":"lib/platform.js","type":"MODIFIED","insertions":262,"deletions":-170},{"file":"lib/post-setup/cmon.js","type":"MODIFIED","insertions":18,"deletions":-12},{"file":"lib/post-setup/cns.js","type":"MODIFIED","insertions":22,"deletions":-15},{"file":"lib/post-setup/common-external-nics.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/post-setup/dev-headnode-prov.js","type":"MODIFIED","insertions":20,"deletions":-15},{"file":"lib/post-setup/dev-sample-data.js","type":"MODIFIED","insertions":13,"deletions":-11},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":45,"deletions":-24},{"file":"lib/post-setup/fabrics.js","type":"MODIFIED","insertions":92,"deletions":-56},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":92,"deletions":-72},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/post-setup/underlay-nics.js","type":"MODIFIED","insertions":38,"deletions":-25},{"file":"lib/post-setup/volapi.js","type":"MODIFIED","insertions":21,"deletions":-14},{"file":"lib/procedures/download-images.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/procedures/procedure.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":99,"deletions":-61},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":24,"deletions":-20},{"file":"lib/procedures/update-manatee-v2.js","type":"MODIFIED","insertions":173,"deletions":-157},{"file":"lib/procedures/update-single-headnode-imgapi.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":426,"deletions":-277},{"file":"lib/steps/no-rabbit.js","type":"MODIFIED","insertions":15,"deletions":-10},{"file":"lib/steps/servers.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/steps/update_vm_size.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/ur.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/check-health.test.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"test/common.js","type":"MODIFIED","insertions":12,"deletions":-7},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":0,"deletions":-18},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"test/services.test.js","type":"MODIFIED","insertions":15,"deletions":-8},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":35,"deletions":-1},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":32,"deletions":-4}],"sizeInsertions":2040,"sizeDeletions":-1357},{"number":"2","revision":"8fd8c2ed3d12af29291f92f71084aadcca2195c2","parents":["f2bf9bb71062b09fcbf05034c1ef768358696cbc"],"ref":"refs/changes/94/3894/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1525332034,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1525332066,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":45,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/channel.js","type":"MODIFIED","insertions":25,"deletions":-20},{"file":"lib/cli/do_add_new_agent_svcs.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"lib/cli/do_check_config.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/cli/do_check_health.js","type":"MODIFIED","insertions":26,"deletions":-17},{"file":"lib/cli/do_completion.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/cli/do_history.js","type":"MODIFIED","insertions":21,"deletions":-14},{"file":"lib/cli/do_install_docker_cert.js","type":"MODIFIED","insertions":15,"deletions":-9},{"file":"lib/cli/do_instances.js","type":"MODIFIED","insertions":7,"deletions":-4},{"file":"lib/cli/do_nfs_volumes.js","type":"MODIFIED","insertions":7,"deletions":-11},{"file":"lib/cli/do_rollback.js","type":"MODIFIED","insertions":24,"deletions":-13},{"file":"lib/cli/do_services.js","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"lib/cli/do_update.js","type":"MODIFIED","insertions":32,"deletions":-17},{"file":"lib/cli/do_update_agents.js","type":"MODIFIED","insertions":53,"deletions":-35},{"file":"lib/cli/do_update_docker.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":101,"deletions":-70},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/cli/index.js","type":"MODIFIED","insertions":23,"deletions":-18},{"file":"lib/common.js","type":"MODIFIED","insertions":66,"deletions":-45},{"file":"lib/dc-maint.js","type":"MODIFIED","insertions":21,"deletions":-19},{"file":"lib/default-fabric.js","type":"MODIFIED","insertions":21,"deletions":-12},{"file":"lib/history.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/locker.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":11,"deletions":-7},{"file":"lib/platform.js","type":"MODIFIED","insertions":262,"deletions":-170},{"file":"lib/post-setup/cmon.js","type":"MODIFIED","insertions":18,"deletions":-12},{"file":"lib/post-setup/cns.js","type":"MODIFIED","insertions":22,"deletions":-15},{"file":"lib/post-setup/common-external-nics.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/post-setup/dev-headnode-prov.js","type":"MODIFIED","insertions":20,"deletions":-15},{"file":"lib/post-setup/dev-sample-data.js","type":"MODIFIED","insertions":13,"deletions":-11},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":45,"deletions":-24},{"file":"lib/post-setup/fabrics.js","type":"MODIFIED","insertions":92,"deletions":-56},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":92,"deletions":-72},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/post-setup/underlay-nics.js","type":"MODIFIED","insertions":38,"deletions":-25},{"file":"lib/post-setup/volapi.js","type":"MODIFIED","insertions":21,"deletions":-14},{"file":"lib/procedures/download-images.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/procedures/procedure.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":99,"deletions":-61},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":24,"deletions":-20},{"file":"lib/procedures/update-manatee-v2.js","type":"MODIFIED","insertions":173,"deletions":-157},{"file":"lib/procedures/update-single-headnode-imgapi.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":426,"deletions":-277},{"file":"lib/steps/no-rabbit.js","type":"MODIFIED","insertions":15,"deletions":-10},{"file":"lib/steps/servers.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/steps/update_vm_size.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/ur.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/check-health.test.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"test/common.js","type":"MODIFIED","insertions":12,"deletions":-7},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":0,"deletions":-18},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"test/services.test.js","type":"MODIFIED","insertions":15,"deletions":-8},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":35,"deletions":-1},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":32,"deletions":-4}],"sizeInsertions":2039,"sizeDeletions":-1356},{"number":"3","revision":"0b9649ad4d5901e71b06c27509e245718df0ac16","parents":["f2bf9bb71062b09fcbf05034c1ef768358696cbc"],"ref":"refs/changes/94/3894/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1525357419,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1525357453,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/channel.js","line":171,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"The other cb()s here inline the error inside cb(); no temporary var \"e\"."},{"file":"lib/channel.js","line":171,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/channel.js","line":190,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Since this line is changing, might as well name the func."},{"file":"lib/channel.js","line":190,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/channel.js","line":236,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/channel.js","line":236,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_check_config.js","line":61,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_check_config.js","line":61,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_check_config.js","line":68,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name it, since there\u0027s enough going on here."},{"file":"lib/cli/do_check_config.js","line":68,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"This should be pulled out and assigned to a temporary variable since it\u0027s used so much."},{"file":"lib/cli/do_check_config.js","line":68,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_check_config.js","line":68,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_check_config.js","line":71,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_check_config.js","line":71,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_check_config.js","line":83,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Might as well pull this into a temporary too."},{"file":"lib/cli/do_check_config.js","line":83,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_check_config.js","line":86,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_check_config.js","line":86,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_check_config.js","line":100,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_check_config.js","line":100,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_check_config.js","line":119,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_check_config.js","line":119,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_check_config.js","line":157,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"This is used six times, so put into its own variable."},{"file":"lib/cli/do_check_config.js","line":157,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_check_config.js","line":158,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_check_config.js","line":158,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_check_config.js","line":191,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_check_config.js","line":191,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_check_config.js","line":217,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Confused. Where is the %s?"},{"file":"lib/cli/do_check_config.js","line":217,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"No need for it!"},{"file":"lib/cli/do_check_config.js","line":218,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_check_config.js","line":218,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_check_config.js","line":263,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"You could replace this all with just \"next\"?"},{"file":"lib/cli/do_check_config.js","line":263,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_check_config.js","line":269,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"No need for \u00272\u0027 here?"},{"file":"lib/cli/do_check_config.js","line":269,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_check_config.js","line":269,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_check_config.js","line":269,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_check_config.js","line":293,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"heh"},{"file":"lib/cli/do_check_config.js","line":293,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Obviously everything was into a nice nested set of callbacks we modified when moved to async"},{"file":"lib/cli/do_check_config.js","line":302,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"definitely name"},{"file":"lib/cli/do_check_config.js","line":302,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_check_config.js","line":359,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_check_config.js","line":359,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_history.js","line":38,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_history.js","line":38,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_history.js","line":75,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_history.js","line":75,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_update_gz_tools.js","line":85,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Considering how often self.sdcadm is used, methinks a \"var sdcadm\" is in order!"},{"file":"lib/cli/do_update_gz_tools.js","line":85,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name meeeeeeee!"},{"file":"lib/cli/do_update_gz_tools.js","line":85,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_update_gz_tools.js","line":85,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_update_gz_tools.js","line":133,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_update_gz_tools.js","line":133,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_update_gz_tools.js","line":136,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Assign this to \"log\" in an outer scope, since it\u0027s used many times in cExecute()."},{"file":"lib/cli/do_update_gz_tools.js","line":136,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"once we\u0027ve added a var for sdcadm having \u0027sdcadm.log\u0027 is not that bad."},{"file":"lib/cli/do_update_gz_tools.js","line":136,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Yeah. I\u0027ll pass on it this time.\n\nThe reason I\u0027m generally not fond of \u0027.\u0027 is it\u0027s another chance for a typo to get past the compiler, and lord knows we can use all the help we can get from the compiler. \"lgo\" is caught, whereas \"sdcadm.lgo\" ain\u0027t.\n\nWhat we really need is a static type system..."},{"file":"lib/cli/do_update_gz_tools.js","line":138,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Incorrect err msg?"},{"file":"lib/cli/do_update_gz_tools.js","line":138,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_update_gz_tools.js","line":148,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_update_gz_tools.js","line":148,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_update_gz_tools.js","line":164,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_update_gz_tools.js","line":164,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_update_gz_tools.js","line":169,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Incorrect error msg?"},{"file":"lib/cli/do_update_gz_tools.js","line":169,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_update_gz_tools.js","line":180,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_update_gz_tools.js","line":180,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_update_gz_tools.js","line":185,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Incorrect err msg?"},{"file":"lib/cli/do_update_gz_tools.js","line":185,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_update_gz_tools.js","line":420,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_update_gz_tools.js","line":420,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_update_gz_tools.js","line":450,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_update_gz_tools.js","line":450,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_update_gz_tools.js","line":456,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_update_gz_tools.js","line":456,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_update_gz_tools.js","line":482,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Used several times. Might as well pull it to a higher scope."},{"file":"lib/cli/do_update_gz_tools.js","line":482,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Once we have \"sdcadm\" I\u0027d say it\u0027s fine enough."},{"file":"lib/cli/do_update_gz_tools.js","line":485,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_update_gz_tools.js","line":485,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_update_gz_tools.js","line":594,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_update_gz_tools.js","line":594,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_update_gz_tools.js","line":633,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"ctx.serversToUpdate \u003d ctx.serversToUpdate || servers;\n\n?\n\nIt\u0027s a pity we don\u0027t have Ruby\u0027s ||\u003d. Good times."},{"file":"lib/cli/do_update_gz_tools.js","line":633,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_update_gz_tools.js","line":757,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_update_gz_tools.js","line":757,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_update_gz_tools.js","line":765,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"prolly name"},{"file":"lib/cli/do_update_gz_tools.js","line":765,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_update_gz_tools.js","line":822,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/cli/do_update_gz_tools.js","line":822,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_update_gz_tools.js","line":825,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"You could replace this with:\n\n    if (justDownload || !hist) {\n        callback(err);\n        return;\n    }\n\nAnd then remove one level of indentation for everything else."},{"file":"lib/cli/do_update_gz_tools.js","line":825,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_update_gz_tools.js","line":848,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"callback(err || err2);"},{"file":"lib/cli/do_update_gz_tools.js","line":848,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/platform.js","line":103,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Oh, wow. Good catch."},{"file":"lib/platform.js","line":182,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Is null needed here?"},{"file":"lib/platform.js","line":182,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/platform.js","line":426,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Since you\u0027re here, might as well reorder the er1/err/er2."},{"file":"lib/platform.js","line":426,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/platform.js","line":1064,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name to \"err\"?"},{"file":"lib/platform.js","line":1064,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/platform.js","line":1261,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Might as well rename to \"err\""},{"file":"lib/platform.js","line":1261,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/platform.js","line":1436,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"This could be replaced with \"callback(err || err2)\""},{"file":"lib/platform.js","line":1436,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/platform.js","line":1499,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Shouldn\u0027t this be _results?"},{"file":"lib/platform.js","line":1499,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/platform.js","line":1656,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"This could be renamed to \"err\" in this scope?"},{"file":"lib/platform.js","line":1656,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/platform.js","line":1673,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Can be replaced with \"cb(er2 || err2)\""},{"file":"lib/platform.js","line":1673,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/post-setup/cns.js","line":161,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/post-setup/cns.js","line":161,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/post-setup/dev-sample-data.js","line":121,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/post-setup/dev-sample-data.js","line":121,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/post-setup/fabrics.js","line":600,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/post-setup/fabrics.js","line":600,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/post-setup/fabrics.js","line":678,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/post-setup/fabrics.js","line":678,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/post-setup/ha-manatee.js","line":72,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"This could be passed directly to common.execFilePlus -- no need to wrap it in another func."},{"file":"lib/post-setup/ha-manatee.js","line":72,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"A bunch of callbacks on the same line as the return in this file. Is it not needed for eslint?"},{"file":"lib/post-setup/ha-manatee.js","line":72,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"In theory we just need to make sure we always either return or do not return from a function. But always proceed the same way. I\u0027d say I\u0027m all to remove the unnecessary returns completely so, gonna change those here."},{"file":"lib/post-setup/ha-manatee.js","line":72,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/post-setup/ha-manatee.js","line":274,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Not actually needed."},{"file":"lib/post-setup/ha-manatee.js","line":274,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/post-setup/ha-manatee.js","line":751,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Replace with \"cb(err || err2)\""},{"file":"lib/post-setup/ha-manatee.js","line":751,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/post-setup/underlay-nics.js","line":98,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/post-setup/underlay-nics.js","line":98,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/post-setup/underlay-nics.js","line":359,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Can be replaced by \"cb(err || err2)\""},{"file":"lib/post-setup/underlay-nics.js","line":359,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/procedures/update-manatee-v2.js","line":420,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Is it safe to use ctx if arg: {} wasn\u0027t set in pipeline()?\n\nAt least in the version I\u0027m looking at, waterfall_impl() in vasync asserts that uarg cannot be undefined for pipeline, which is odd since I\u0027ve seen a lot of pipline()s that omit it."},{"file":"lib/procedures/update-manatee-v2.js","line":420,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"It\u0027s defined at line #1305, right before the pipeline callback. It was duplicated here."},{"file":"lib/procedures/update-manatee-v2.js","line":655,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"You could prolly move this up to !arg.HA. Save a line."},{"file":"lib/procedures/update-manatee-v2.js","line":655,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/procedures/update-manatee-v2.js","line":1291,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Shouldn\u0027t this be _stdout then?\n\nI\u0027m confused if eslint is actually checking this stuff. This should be caught, yeah?"},{"file":"lib/procedures/update-manatee-v2.js","line":1291,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"I\u0027ve added \"stderr\" and \"stdout\" values to the list of variables that can be defined and not used in \".eslint\". Same we do by default with \"res\", \"req\", \"err\"."},{"file":"lib/sdcadm.js","line":635,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/sdcadm.js","line":639,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"This works fine, but maybe a tad clearer if it was assigned to a temporary? E.g.\n\nvar agents \u003d server.agents || server.sysinfo[\u0027SDC Agents\u0027] || [];\nagents.forEach(...)"},{"file":"lib/sdcadm.js","line":639,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/sdcadm.js","line":2258,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/sdcadm.js","line":2258,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/sdcadm.js","line":2533,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Oh, hey, it\u0027s my favourite date thingy! ;)"},{"file":"lib/sdcadm.js","line":2533,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Aren\u0027t this modifying this one as part of a different issue? Keep it in mind for that CR :)"},{"file":"lib/sdcadm.js","line":2658,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"cb(err || err2)"},{"file":"lib/sdcadm.js","line":2658,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/sdcadm.js","line":2695,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Not really needed."},{"file":"lib/sdcadm.js","line":2695,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/sdcadm.js","line":2718,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Can pass next directly to getBuildTime()?"},{"file":"lib/sdcadm.js","line":2718,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/sdcadm.js","line":2853,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Can pass next directly to getBuildTime()?"},{"file":"lib/sdcadm.js","line":2853,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/sdcadm.js","line":3112,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Pass next directly?"},{"file":"lib/sdcadm.js","line":3112,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/sdcadm.js","line":3998,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"This is used several times. Maybe assign to a constant at the top of the file?"},{"file":"lib/sdcadm.js","line":3998,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Don\u0027t think it\u0027s worth it. Maybe if it becomes more complicated, then for sure."},{"file":"lib/sdcadm.js","line":4504,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"cb(err || err2)"},{"file":"lib/sdcadm.js","line":4504,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":45,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/channel.js","type":"MODIFIED","insertions":25,"deletions":-20},{"file":"lib/cli/do_add_new_agent_svcs.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"lib/cli/do_check_config.js","type":"MODIFIED","insertions":337,"deletions":-3},{"file":"lib/cli/do_check_health.js","type":"MODIFIED","insertions":26,"deletions":-17},{"file":"lib/cli/do_completion.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/cli/do_history.js","type":"MODIFIED","insertions":22,"deletions":-14},{"file":"lib/cli/do_install_docker_cert.js","type":"MODIFIED","insertions":15,"deletions":-9},{"file":"lib/cli/do_instances.js","type":"MODIFIED","insertions":7,"deletions":-4},{"file":"lib/cli/do_nfs_volumes.js","type":"MODIFIED","insertions":7,"deletions":-11},{"file":"lib/cli/do_rollback.js","type":"MODIFIED","insertions":24,"deletions":-13},{"file":"lib/cli/do_services.js","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"lib/cli/do_update.js","type":"MODIFIED","insertions":32,"deletions":-17},{"file":"lib/cli/do_update_agents.js","type":"MODIFIED","insertions":53,"deletions":-35},{"file":"lib/cli/do_update_docker.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":857,"deletions":-5},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":101,"deletions":-70},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/cli/index.js","type":"MODIFIED","insertions":23,"deletions":-18},{"file":"lib/common.js","type":"MODIFIED","insertions":66,"deletions":-45},{"file":"lib/dc-maint.js","type":"MODIFIED","insertions":21,"deletions":-19},{"file":"lib/default-fabric.js","type":"MODIFIED","insertions":21,"deletions":-12},{"file":"lib/history.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/locker.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":11,"deletions":-7},{"file":"lib/platform.js","type":"MODIFIED","insertions":262,"deletions":-170},{"file":"lib/post-setup/cmon.js","type":"MODIFIED","insertions":18,"deletions":-12},{"file":"lib/post-setup/cns.js","type":"MODIFIED","insertions":22,"deletions":-15},{"file":"lib/post-setup/common-external-nics.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/post-setup/dev-headnode-prov.js","type":"MODIFIED","insertions":20,"deletions":-15},{"file":"lib/post-setup/dev-sample-data.js","type":"MODIFIED","insertions":13,"deletions":-11},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":45,"deletions":-24},{"file":"lib/post-setup/fabrics.js","type":"MODIFIED","insertions":92,"deletions":-56},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":92,"deletions":-72},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/post-setup/underlay-nics.js","type":"MODIFIED","insertions":38,"deletions":-25},{"file":"lib/post-setup/volapi.js","type":"MODIFIED","insertions":21,"deletions":-14},{"file":"lib/procedures/download-images.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/procedures/procedure.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":99,"deletions":-61},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":24,"deletions":-20},{"file":"lib/procedures/update-manatee-v2.js","type":"MODIFIED","insertions":173,"deletions":-157},{"file":"lib/procedures/update-single-headnode-imgapi.js","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":331,"deletions":-1285},{"file":"lib/steps/no-rabbit.js","type":"MODIFIED","insertions":15,"deletions":-10},{"file":"lib/steps/servers.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/steps/update_vm_size.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/ur.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/check-health.test.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"test/common.js","type":"MODIFIED","insertions":12,"deletions":-7},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":0,"deletions":-18},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"test/services.test.js","type":"MODIFIED","insertions":15,"deletions":-8},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":35,"deletions":-1},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":32,"deletions":-4}],"sizeInsertions":3133,"sizeDeletions":-2366},{"number":"4","revision":"f3d9ca30557225130d871d833887a0192c1b66d7","parents":["f2bf9bb71062b09fcbf05034c1ef768358696cbc"],"ref":"refs/changes/94/3894/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1526382287,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1526382326,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1526473151,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1526473151,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":45,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/channel.js","type":"MODIFIED","insertions":25,"deletions":-21},{"file":"lib/cli/do_add_new_agent_svcs.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"lib/cli/do_check_config.js","type":"MODIFIED","insertions":335,"deletions":-3},{"file":"lib/cli/do_check_health.js","type":"MODIFIED","insertions":26,"deletions":-17},{"file":"lib/cli/do_completion.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/cli/do_history.js","type":"MODIFIED","insertions":22,"deletions":-14},{"file":"lib/cli/do_install_docker_cert.js","type":"MODIFIED","insertions":15,"deletions":-9},{"file":"lib/cli/do_instances.js","type":"MODIFIED","insertions":7,"deletions":-4},{"file":"lib/cli/do_nfs_volumes.js","type":"MODIFIED","insertions":7,"deletions":-11},{"file":"lib/cli/do_rollback.js","type":"MODIFIED","insertions":24,"deletions":-13},{"file":"lib/cli/do_services.js","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"lib/cli/do_update.js","type":"MODIFIED","insertions":32,"deletions":-17},{"file":"lib/cli/do_update_agents.js","type":"MODIFIED","insertions":53,"deletions":-35},{"file":"lib/cli/do_update_docker.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":840,"deletions":-5},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":101,"deletions":-70},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/cli/index.js","type":"MODIFIED","insertions":23,"deletions":-18},{"file":"lib/common.js","type":"MODIFIED","insertions":66,"deletions":-45},{"file":"lib/dc-maint.js","type":"MODIFIED","insertions":21,"deletions":-19},{"file":"lib/default-fabric.js","type":"MODIFIED","insertions":21,"deletions":-12},{"file":"lib/history.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/locker.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":11,"deletions":-7},{"file":"lib/platform.js","type":"MODIFIED","insertions":268,"deletions":-194},{"file":"lib/post-setup/cmon.js","type":"MODIFIED","insertions":18,"deletions":-12},{"file":"lib/post-setup/cns.js","type":"MODIFIED","insertions":22,"deletions":-14},{"file":"lib/post-setup/common-external-nics.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/post-setup/dev-headnode-prov.js","type":"MODIFIED","insertions":20,"deletions":-15},{"file":"lib/post-setup/dev-sample-data.js","type":"MODIFIED","insertions":13,"deletions":-11},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":45,"deletions":-24},{"file":"lib/post-setup/fabrics.js","type":"MODIFIED","insertions":92,"deletions":-56},{"file":"lib/post-setup/ha-binder.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":102,"deletions":-89},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/post-setup/underlay-nics.js","type":"MODIFIED","insertions":35,"deletions":-29},{"file":"lib/post-setup/volapi.js","type":"MODIFIED","insertions":21,"deletions":-14},{"file":"lib/procedures/download-images.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/procedures/procedure.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":99,"deletions":-61},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":24,"deletions":-20},{"file":"lib/procedures/update-manatee-v2.js","type":"MODIFIED","insertions":171,"deletions":-157},{"file":"lib/procedures/update-single-headnode-imgapi.js","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":332,"deletions":-1316},{"file":"lib/steps/no-rabbit.js","type":"MODIFIED","insertions":15,"deletions":-10},{"file":"lib/steps/servers.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/steps/update_vm_size.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/ur.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/check-health.test.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"test/common.js","type":"MODIFIED","insertions":12,"deletions":-7},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":0,"deletions":-18},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"test/services.test.js","type":"MODIFIED","insertions":15,"deletions":-8},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":35,"deletions":-1},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":32,"deletions":-4}],"sizeInsertions":3127,"sizeDeletions":-2449},{"number":"5","revision":"116b1e545c2af44ecac21155a5101f03fdd73fdb","parents":["f2bf9bb71062b09fcbf05034c1ef768358696cbc"],"ref":"refs/changes/94/3894/5","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1526483440,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1526382326,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1526483456,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1526473151,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1526473151,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":45,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/channel.js","type":"MODIFIED","insertions":25,"deletions":-21},{"file":"lib/cli/do_add_new_agent_svcs.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"lib/cli/do_check_config.js","type":"MODIFIED","insertions":335,"deletions":-3},{"file":"lib/cli/do_check_health.js","type":"MODIFIED","insertions":26,"deletions":-17},{"file":"lib/cli/do_completion.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/cli/do_history.js","type":"MODIFIED","insertions":22,"deletions":-14},{"file":"lib/cli/do_install_docker_cert.js","type":"MODIFIED","insertions":15,"deletions":-9},{"file":"lib/cli/do_instances.js","type":"MODIFIED","insertions":7,"deletions":-4},{"file":"lib/cli/do_nfs_volumes.js","type":"MODIFIED","insertions":7,"deletions":-11},{"file":"lib/cli/do_rollback.js","type":"MODIFIED","insertions":24,"deletions":-13},{"file":"lib/cli/do_services.js","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"lib/cli/do_update.js","type":"MODIFIED","insertions":32,"deletions":-17},{"file":"lib/cli/do_update_agents.js","type":"MODIFIED","insertions":53,"deletions":-35},{"file":"lib/cli/do_update_docker.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":840,"deletions":-5},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":101,"deletions":-70},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/cli/index.js","type":"MODIFIED","insertions":23,"deletions":-18},{"file":"lib/common.js","type":"MODIFIED","insertions":66,"deletions":-45},{"file":"lib/dc-maint.js","type":"MODIFIED","insertions":21,"deletions":-19},{"file":"lib/default-fabric.js","type":"MODIFIED","insertions":21,"deletions":-12},{"file":"lib/history.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/locker.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":11,"deletions":-7},{"file":"lib/platform.js","type":"MODIFIED","insertions":268,"deletions":-194},{"file":"lib/post-setup/cmon.js","type":"MODIFIED","insertions":18,"deletions":-12},{"file":"lib/post-setup/cns.js","type":"MODIFIED","insertions":22,"deletions":-14},{"file":"lib/post-setup/common-external-nics.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/post-setup/dev-headnode-prov.js","type":"MODIFIED","insertions":20,"deletions":-15},{"file":"lib/post-setup/dev-sample-data.js","type":"MODIFIED","insertions":13,"deletions":-11},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":45,"deletions":-24},{"file":"lib/post-setup/fabrics.js","type":"MODIFIED","insertions":92,"deletions":-56},{"file":"lib/post-setup/ha-binder.js","type":"MODIFIED","insertions":1,"deletions":-7},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":102,"deletions":-89},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/post-setup/underlay-nics.js","type":"MODIFIED","insertions":35,"deletions":-29},{"file":"lib/post-setup/volapi.js","type":"MODIFIED","insertions":21,"deletions":-14},{"file":"lib/procedures/download-images.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/procedures/procedure.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":99,"deletions":-61},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":24,"deletions":-20},{"file":"lib/procedures/update-manatee-v2.js","type":"MODIFIED","insertions":171,"deletions":-157},{"file":"lib/procedures/update-single-headnode-imgapi.js","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":332,"deletions":-1316},{"file":"lib/steps/no-rabbit.js","type":"MODIFIED","insertions":15,"deletions":-10},{"file":"lib/steps/servers.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/steps/update_vm_size.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/ur.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/check-health.test.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"test/common.js","type":"MODIFIED","insertions":12,"deletions":-7},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":0,"deletions":-18},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"test/services.test.js","type":"MODIFIED","insertions":15,"deletions":-8},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":35,"deletions":-1},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":32,"deletions":-4}],"sizeInsertions":3127,"sizeDeletions":-2449}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}