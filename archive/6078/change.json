{"project":"joyent/smartos-live","branch":"master","id":"Id52a276f9121183085768e6dabb7eb50a7a37e95","number":"6078","subject":"OS-7725 SmartOS VMWare image creation needs to adapt to loader changes OS-7728 SmartOS VMWare image fails to install OS-7731 SmartOS builds need to use serial for loader Portions contributed by: John Levon \u003cjohn.levon@joyent.com\u003e Reviewed by: John Levon \u003c","owner":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"url":"https://cr.joyent.us/6078","commitMessage":"OS-7725 SmartOS VMWare image creation needs to adapt to loader changes\nOS-7728 SmartOS VMWare image fails to install\nOS-7731 SmartOS builds need to use serial for loader\nPortions contributed by: John Levon \u003cjohn.levon@joyent.com\u003e\nReviewed by: John Levon \u003cjohn.levon@joyent.com\u003e\nReviewed by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e\nReviewed by: Jason King \u003cjason.king@joyent.com\u003e\nReviewed by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e\nApproved by: Brian Bennett \u003cbrian.bennett@joyent.com\u003e\n","createdOn":1554912031,"lastUpdated":1554935508,"open":false,"status":"MERGED","comments":[{"timestamp":1554912031,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 1."},{"timestamp":1554912037,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 44dc67e40183e9b786b49246c4846ba99d09723f\n    \n    smartos gunzip doesn\u0027t have a --keep option\n    \n    commit f95324435998d7e3374fe965e0c1f38a47b78f66\n    \n    missed an instance of bunzip2 in build_vmware\n    \n    commit d21755d1baf555d8687ee92da68fa235e8c899d0\n    \n    OS-7725 SmartOS vmware image creation needs to adapt to loader changes"},{"timestamp":1554912086,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554914426,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1554919223,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 2."},{"timestamp":1554919230,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 42f3575463b607584483b3d9001228c3230adad6\n    \n    apply jlevon\u0027s patch for OS-7728"},{"timestamp":1554919283,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554920976,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 3."},{"timestamp":1554921034,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554923565,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1554924413,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1554925563,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1554931989,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 4: Code-Review+1\n\nShould we also update README.md so that it no longer mentions build_iso and build_usb, but build_boot_image instead?"},{"timestamp":1554932080,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 4:\n\n(2 comments)"},{"timestamp":1554932450,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 5."},{"timestamp":1554932505,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554932527,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1554932564,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1554932649,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1554933509,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1554935088,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Patch Set 5: Integration-Approval+1"},{"timestamp":1554935508,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Tim Foster"}],"currentPatchSet":{"number":"5","revision":"d52a276f9121183085768e6dabb7eb50a7a37e95","parents":["894fede21953194c3abc3dfd8002df36be39d4c0"],"ref":"refs/changes/78/6078/5","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1554932450,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554932505,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554932527,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554932564,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554932649,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554933509,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554935088,"by":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"}},{"type":"SUBM","value":"1","grantedOn":1554935508,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":15,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"overlay/generic/smartdc/lib/smartos_prompt_config.sh","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"tools/build_boot_image","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"tools/build_vmware","type":"MODIFIED","insertions":13,"deletions":-6}],"sizeInsertions":29,"sizeDeletions":-12},"patchSets":[{"number":"1","revision":"900dfd094cd0acc83622b6994a23ab7491914b2b","parents":["894fede21953194c3abc3dfd8002df36be39d4c0"],"ref":"refs/changes/78/6078/1","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1554912031,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554912086,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554914426,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/build_vmware","type":"MODIFIED","insertions":13,"deletions":-6}],"sizeInsertions":13,"sizeDeletions":-6},{"number":"2","revision":"42b3a032657b273c21ef1aae43ccfbd85811e759","parents":["894fede21953194c3abc3dfd8002df36be39d4c0"],"ref":"refs/changes/78/6078/2","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1554919223,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554919283,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"overlay/generic/smartdc/lib/smartos_prompt_config.sh","type":"MODIFIED","insertions":6,"deletions":0},{"file":"tools/build_vmware","type":"MODIFIED","insertions":13,"deletions":-6}],"sizeInsertions":19,"sizeDeletions":-6},{"number":"3","revision":"127960a2c9003b012234df510406a214477283d3","parents":["894fede21953194c3abc3dfd8002df36be39d4c0"],"ref":"refs/changes/78/6078/3","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1554920976,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554921034,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554924413,"by":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554923565,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"overlay/generic/smartdc/lib/smartos_prompt_config.sh","type":"MODIFIED","insertions":6,"deletions":0},{"file":"tools/build_boot_image","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"tools/build_vmware","type":"MODIFIED","insertions":13,"deletions":-6}],"sizeInsertions":25,"sizeDeletions":-8},{"number":"4","revision":"60c34c30ac9aeb03b8d9767a878d748d69771264","parents":["894fede21953194c3abc3dfd8002df36be39d4c0"],"ref":"refs/changes/78/6078/4","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1554925563,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554931989,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554921034,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554924413,"by":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554923565,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"comments":[{"file":"overlay/generic/smartdc/lib/smartos_prompt_config.sh","line":9,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"2019"},{"file":"tools/build_vmware","line":56,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Quote individual arguments not the entire string.  It is treating this all as argv[0]."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"overlay/generic/smartdc/lib/smartos_prompt_config.sh","type":"MODIFIED","insertions":6,"deletions":0},{"file":"tools/build_boot_image","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"tools/build_vmware","type":"MODIFIED","insertions":13,"deletions":-6}],"sizeInsertions":25,"sizeDeletions":-8},{"number":"5","revision":"d52a276f9121183085768e6dabb7eb50a7a37e95","parents":["894fede21953194c3abc3dfd8002df36be39d4c0"],"ref":"refs/changes/78/6078/5","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1554932450,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554933509,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554932505,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554935088,"by":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554932564,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554932649,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554932527,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"SUBM","value":"1","grantedOn":1554935508,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":15,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"overlay/generic/smartdc/lib/smartos_prompt_config.sh","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"tools/build_boot_image","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"tools/build_vmware","type":"MODIFIED","insertions":13,"deletions":-6}],"sizeInsertions":29,"sizeDeletions":-12}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}]}