{"project":"joyent/illumos-joyent","branch":"master","id":"I5cd1cd0f75cd45ab15efbbed37ef1b6600c1d528","number":"3686","subject":"OS-6720 uart-ignorant guest sends bhyve into a spin OS-6715 extraneous rxfifo_available() in uart_sock_drain() Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Reviewed by: John Levon \u003cjohn.levo","owner":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"url":"https://cr.joyent.us/3686","commitMessage":"OS-6720 uart-ignorant guest sends bhyve into a spin\nOS-6715 extraneous rxfifo_available() in uart_sock_drain()\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nReviewed by: John Levon \u003cjohn.levon@joyent.com\u003e\nApproved by: John Levon \u003cjohn.levon@joyent.com\u003e\n","createdOn":1521489427,"lastUpdated":1521822371,"open":false,"status":"MERGED","comments":[{"timestamp":1521489427,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Uploaded patch set 1."},{"timestamp":1521491281,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 1:\n\nThe makefiles and script under bhyve/test are mostly copied from vndadm/test.  freebsd/sys/queue.h is a copy (no modifications) from sys/sys/queue.h in FreeBSD 11.1."},{"timestamp":1521492483,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 1:\n\nIt looks like I accidentally included another fix too:\n\nOS-6715 extraneous rxfifo_available() in uart_sock_drain()"},{"timestamp":1521552599,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\n(7 comments)\n\nA bit sad that we\u0027re copying so much test infrastructure, but not a big deal."},{"timestamp":1521555935,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Uploaded patch set 2."},{"timestamp":1521555943,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 1:\n\n(7 comments)"},{"timestamp":1521559705,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1521643491,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1521740188,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2:\n\n(2 comments)"},{"timestamp":1521815284,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Uploaded patch set 3."},{"timestamp":1521815510,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 2:\n\n(1 comment)\n\nJust moved sys/queue.h as suggested by Patrick.  I followed the \"steps to reproduce\" in OS-6720 and found no spinning threads."},{"timestamp":1521816039,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1521816430,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1521816948,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1521818276,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1521822265,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 4: Patch Set 3 was rebased"},{"timestamp":1521822362,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 5: Commit message was updated."},{"timestamp":1521822371,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Mike Gerdts"}],"currentPatchSet":{"number":"5","revision":"7892cb3dceef9f2cbcd853e66fb05601a94bbba2","parents":["929399046cc464d1c38a4d4facf93476166a5662"],"ref":"refs/changes/86/3686/5","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1521822362,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521816039,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521816430,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521816948,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1521818276,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"SUBM","value":"1","grantedOn":1521822371,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":"usr/contrib/freebsd/sys/queue.h","type":"ADDED","insertions":787,"deletions":0},{"file":"usr/src/cmd/bhyve/Makefile","type":"MODIFIED","insertions":29,"deletions":-4},{"file":"usr/src/cmd/bhyve/bhyverun.c","type":"MODIFIED","insertions":3,"deletions":-6},{"file":"usr/src/cmd/bhyve/mevent.c","type":"MODIFIED","insertions":198,"deletions":-1},{"file":"usr/src/cmd/bhyve/mevent_test.c","type":"MODIFIED","insertions":26,"deletions":-2},{"file":"usr/src/cmd/bhyve/test/Makefile","type":"ADDED","insertions":18,"deletions":0},{"file":"usr/src/cmd/bhyve/test/Makefile.com","type":"ADDED","insertions":60,"deletions":0},{"file":"usr/src/cmd/bhyve/test/Makefile.subdirs","type":"ADDED","insertions":29,"deletions":0},{"file":"usr/src/cmd/bhyve/test/Makefile.targ","type":"ADDED","insertions":55,"deletions":0},{"file":"usr/src/cmd/bhyve/test/scripts/Makefile","type":"ADDED","insertions":28,"deletions":0},{"file":"usr/src/cmd/bhyve/test/scripts/bhyvetest.ksh","type":"ADDED","insertions":231,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/Makefile","type":"ADDED","insertions":18,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/Makefile","type":"ADDED","insertions":30,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/lists.delete.c","type":"ADDED","insertions":172,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/mevent.c","type":"ADDED","insertions":57,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/read.disable.c","type":"ADDED","insertions":163,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/read.pause.c","type":"ADDED","insertions":152,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/read.requeue.c","type":"ADDED","insertions":108,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/testlib.c","type":"ADDED","insertions":69,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/testlib.h","type":"ADDED","insertions":88,"deletions":0},{"file":"usr/src/cmd/bhyve/uart_emul.c","type":"MODIFIED","insertions":5,"deletions":-93}],"sizeInsertions":2326,"sizeDeletions":-106},"patchSets":[{"number":"1","revision":"1add8bf00dc58fe3eb6467213720786e833ad2e7","parents":["234358436228515af901624d0754a77732a4f8ed"],"ref":"refs/changes/86/3686/1","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1521489427,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/cmd/bhyve/Makefile","line":83,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"MEVENT_TEST_PROG is also added below"},{"file":"usr/src/cmd/bhyve/Makefile","line":83,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Done"},{"file":"usr/src/cmd/bhyve/test/scripts/bhyvetest.ksh","line":78,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"need to cleanup the vnic mentions here."},{"file":"usr/src/cmd/bhyve/test/scripts/bhyvetest.ksh","line":78,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Done"},{"file":"usr/src/cmd/bhyve/test/scripts/bhyvetest.ksh","line":135,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"and here"},{"file":"usr/src/cmd/bhyve/test/scripts/bhyvetest.ksh","line":135,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Done"},{"file":"usr/src/cmd/bhyve/test/tst/mevent/mevent.c","line":19,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"why isn\u0027t this just in testlib.c?"},{"file":"usr/src/cmd/bhyve/test/tst/mevent/mevent.c","line":19,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"I was trying to be explicit that this is augmenting ../../../mevent.c with a small amount of code needed to access static symbols (*_head, mevent_q*lock). \n\ntestlib.c is intended to provide functions that are generally useful across a wide range of tests (mevent and others).  When the next subdirectory is added under $SRC/cmd/bhyve/test/tst, I somewhat expect testlib.[ch] to be moved into a common directory.  This strategy, however, would suggest that start_event_thread() may be poorly placed in this file."},{"file":"usr/src/cmd/bhyve/test/tst/mevent/testlib.c","line":24,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"don\u0027t need these lines"},{"file":"usr/src/cmd/bhyve/test/tst/mevent/testlib.c","line":24,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Done"},{"file":"usr/src/cmd/bhyve/test/tst/mevent/testlib.c","line":50,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"!\u003d \u0027\\0\u0027 ?"},{"file":"usr/src/cmd/bhyve/test/tst/mevent/testlib.c","line":50,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Done"},{"file":"usr/src/cmd/bhyve/test/tst/mevent/testlib.h","line":86,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"prototypes usually don\u0027t include formal param names"},{"file":"usr/src/cmd/bhyve/test/tst/mevent/testlib.h","line":86,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Done"},{"file":"usr/src/cmd/bhyve/uart_emul.c","line":129,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Is this fixing an upstream divergence?"},{"file":"usr/src/cmd/bhyve/uart_emul.c","line":129,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Yes"},{"file":"usr/src/compat/freebsd/sys/queue.h","line":1,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"If this is just a direct copy of FreeBSD\u0027s sys/queue.h, it should go in \u0027usr/contrib\u0027."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/bhyve/Makefile","type":"MODIFIED","insertions":30,"deletions":-5},{"file":"usr/src/cmd/bhyve/bhyverun.c","type":"MODIFIED","insertions":3,"deletions":-6},{"file":"usr/src/cmd/bhyve/mevent.c","type":"MODIFIED","insertions":198,"deletions":-1},{"file":"usr/src/cmd/bhyve/mevent_test.c","type":"MODIFIED","insertions":26,"deletions":-2},{"file":"usr/src/cmd/bhyve/test/Makefile","type":"ADDED","insertions":18,"deletions":0},{"file":"usr/src/cmd/bhyve/test/Makefile.com","type":"ADDED","insertions":60,"deletions":0},{"file":"usr/src/cmd/bhyve/test/Makefile.subdirs","type":"ADDED","insertions":29,"deletions":0},{"file":"usr/src/cmd/bhyve/test/Makefile.targ","type":"ADDED","insertions":55,"deletions":0},{"file":"usr/src/cmd/bhyve/test/scripts/Makefile","type":"ADDED","insertions":28,"deletions":0},{"file":"usr/src/cmd/bhyve/test/scripts/bhyvetest.ksh","type":"ADDED","insertions":237,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/Makefile","type":"ADDED","insertions":18,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/Makefile","type":"ADDED","insertions":30,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/lists.delete.c","type":"ADDED","insertions":172,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/mevent.c","type":"ADDED","insertions":57,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/read.disable.c","type":"ADDED","insertions":163,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/read.pause.c","type":"ADDED","insertions":152,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/read.requeue.c","type":"ADDED","insertions":108,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/testlib.c","type":"ADDED","insertions":72,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/testlib.h","type":"ADDED","insertions":89,"deletions":0},{"file":"usr/src/cmd/bhyve/uart_emul.c","type":"MODIFIED","insertions":5,"deletions":-93},{"file":"usr/src/compat/freebsd/sys/queue.h","type":"ADDED","insertions":787,"deletions":0}],"sizeInsertions":2337,"sizeDeletions":-107},{"number":"2","revision":"cc444af0f70e1208d82b931836120fe9f905f108","parents":["db3c1a65483dd60a62c0f8389df50979f1b0bf22"],"ref":"refs/changes/86/3686/2","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1521555935,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521643491,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521559705,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/cmd/bhyve/Makefile","type":"MODIFIED","insertions":29,"deletions":-4},{"file":"usr/src/cmd/bhyve/bhyverun.c","type":"MODIFIED","insertions":3,"deletions":-6},{"file":"usr/src/cmd/bhyve/mevent.c","type":"MODIFIED","insertions":198,"deletions":-1},{"file":"usr/src/cmd/bhyve/mevent_test.c","type":"MODIFIED","insertions":26,"deletions":-2},{"file":"usr/src/cmd/bhyve/test/Makefile","type":"ADDED","insertions":18,"deletions":0},{"file":"usr/src/cmd/bhyve/test/Makefile.com","type":"ADDED","insertions":60,"deletions":0},{"file":"usr/src/cmd/bhyve/test/Makefile.subdirs","type":"ADDED","insertions":29,"deletions":0},{"file":"usr/src/cmd/bhyve/test/Makefile.targ","type":"ADDED","insertions":55,"deletions":0},{"file":"usr/src/cmd/bhyve/test/scripts/Makefile","type":"ADDED","insertions":28,"deletions":0},{"file":"usr/src/cmd/bhyve/test/scripts/bhyvetest.ksh","type":"ADDED","insertions":231,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/Makefile","type":"ADDED","insertions":18,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/Makefile","type":"ADDED","insertions":30,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/lists.delete.c","type":"ADDED","insertions":172,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/mevent.c","type":"ADDED","insertions":57,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/read.disable.c","type":"ADDED","insertions":163,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/read.pause.c","type":"ADDED","insertions":152,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/read.requeue.c","type":"ADDED","insertions":108,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/testlib.c","type":"ADDED","insertions":69,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/testlib.h","type":"ADDED","insertions":88,"deletions":0},{"file":"usr/src/cmd/bhyve/uart_emul.c","type":"MODIFIED","insertions":5,"deletions":-93},{"file":"usr/src/compat/freebsd/sys/queue.h","type":"ADDED","insertions":787,"deletions":0}],"sizeInsertions":2326,"sizeDeletions":-106},{"number":"3","revision":"5cd1cd0f75cd45ab15efbbed37ef1b6600c1d528","parents":["db3c1a65483dd60a62c0f8389df50979f1b0bf22"],"ref":"refs/changes/86/3686/3","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1521815284,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521816430,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521816948,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521816039,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1521818276,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/contrib/freebsd/sys/queue.h","type":"ADDED","insertions":787,"deletions":0},{"file":"usr/src/cmd/bhyve/Makefile","type":"MODIFIED","insertions":29,"deletions":-4},{"file":"usr/src/cmd/bhyve/bhyverun.c","type":"MODIFIED","insertions":3,"deletions":-6},{"file":"usr/src/cmd/bhyve/mevent.c","type":"MODIFIED","insertions":198,"deletions":-1},{"file":"usr/src/cmd/bhyve/mevent_test.c","type":"MODIFIED","insertions":26,"deletions":-2},{"file":"usr/src/cmd/bhyve/test/Makefile","type":"ADDED","insertions":18,"deletions":0},{"file":"usr/src/cmd/bhyve/test/Makefile.com","type":"ADDED","insertions":60,"deletions":0},{"file":"usr/src/cmd/bhyve/test/Makefile.subdirs","type":"ADDED","insertions":29,"deletions":0},{"file":"usr/src/cmd/bhyve/test/Makefile.targ","type":"ADDED","insertions":55,"deletions":0},{"file":"usr/src/cmd/bhyve/test/scripts/Makefile","type":"ADDED","insertions":28,"deletions":0},{"file":"usr/src/cmd/bhyve/test/scripts/bhyvetest.ksh","type":"ADDED","insertions":231,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/Makefile","type":"ADDED","insertions":18,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/Makefile","type":"ADDED","insertions":30,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/lists.delete.c","type":"ADDED","insertions":172,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/mevent.c","type":"ADDED","insertions":57,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/read.disable.c","type":"ADDED","insertions":163,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/read.pause.c","type":"ADDED","insertions":152,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/read.requeue.c","type":"ADDED","insertions":108,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/testlib.c","type":"ADDED","insertions":69,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/testlib.h","type":"ADDED","insertions":88,"deletions":0},{"file":"usr/src/cmd/bhyve/uart_emul.c","type":"MODIFIED","insertions":5,"deletions":-93}],"sizeInsertions":2326,"sizeDeletions":-106},{"number":"4","revision":"eec4ef0de7e7ee76638a3267c07baab4f9781ccd","parents":["929399046cc464d1c38a4d4facf93476166a5662"],"ref":"refs/changes/86/3686/4","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1521822265,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521816430,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521816948,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521816039,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1521818276,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/contrib/freebsd/sys/queue.h","type":"ADDED","insertions":787,"deletions":0},{"file":"usr/src/cmd/bhyve/Makefile","type":"MODIFIED","insertions":29,"deletions":-4},{"file":"usr/src/cmd/bhyve/bhyverun.c","type":"MODIFIED","insertions":3,"deletions":-6},{"file":"usr/src/cmd/bhyve/mevent.c","type":"MODIFIED","insertions":198,"deletions":-1},{"file":"usr/src/cmd/bhyve/mevent_test.c","type":"MODIFIED","insertions":26,"deletions":-2},{"file":"usr/src/cmd/bhyve/test/Makefile","type":"ADDED","insertions":18,"deletions":0},{"file":"usr/src/cmd/bhyve/test/Makefile.com","type":"ADDED","insertions":60,"deletions":0},{"file":"usr/src/cmd/bhyve/test/Makefile.subdirs","type":"ADDED","insertions":29,"deletions":0},{"file":"usr/src/cmd/bhyve/test/Makefile.targ","type":"ADDED","insertions":55,"deletions":0},{"file":"usr/src/cmd/bhyve/test/scripts/Makefile","type":"ADDED","insertions":28,"deletions":0},{"file":"usr/src/cmd/bhyve/test/scripts/bhyvetest.ksh","type":"ADDED","insertions":231,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/Makefile","type":"ADDED","insertions":18,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/Makefile","type":"ADDED","insertions":30,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/lists.delete.c","type":"ADDED","insertions":172,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/mevent.c","type":"ADDED","insertions":57,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/read.disable.c","type":"ADDED","insertions":163,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/read.pause.c","type":"ADDED","insertions":152,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/read.requeue.c","type":"ADDED","insertions":108,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/testlib.c","type":"ADDED","insertions":69,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/testlib.h","type":"ADDED","insertions":88,"deletions":0},{"file":"usr/src/cmd/bhyve/uart_emul.c","type":"MODIFIED","insertions":5,"deletions":-93}],"sizeInsertions":2326,"sizeDeletions":-106},{"number":"5","revision":"7892cb3dceef9f2cbcd853e66fb05601a94bbba2","parents":["929399046cc464d1c38a4d4facf93476166a5662"],"ref":"refs/changes/86/3686/5","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1521822362,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521816430,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521816948,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1521822371,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521816039,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1521818276,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":"usr/contrib/freebsd/sys/queue.h","type":"ADDED","insertions":787,"deletions":0},{"file":"usr/src/cmd/bhyve/Makefile","type":"MODIFIED","insertions":29,"deletions":-4},{"file":"usr/src/cmd/bhyve/bhyverun.c","type":"MODIFIED","insertions":3,"deletions":-6},{"file":"usr/src/cmd/bhyve/mevent.c","type":"MODIFIED","insertions":198,"deletions":-1},{"file":"usr/src/cmd/bhyve/mevent_test.c","type":"MODIFIED","insertions":26,"deletions":-2},{"file":"usr/src/cmd/bhyve/test/Makefile","type":"ADDED","insertions":18,"deletions":0},{"file":"usr/src/cmd/bhyve/test/Makefile.com","type":"ADDED","insertions":60,"deletions":0},{"file":"usr/src/cmd/bhyve/test/Makefile.subdirs","type":"ADDED","insertions":29,"deletions":0},{"file":"usr/src/cmd/bhyve/test/Makefile.targ","type":"ADDED","insertions":55,"deletions":0},{"file":"usr/src/cmd/bhyve/test/scripts/Makefile","type":"ADDED","insertions":28,"deletions":0},{"file":"usr/src/cmd/bhyve/test/scripts/bhyvetest.ksh","type":"ADDED","insertions":231,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/Makefile","type":"ADDED","insertions":18,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/Makefile","type":"ADDED","insertions":30,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/lists.delete.c","type":"ADDED","insertions":172,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/mevent.c","type":"ADDED","insertions":57,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/read.disable.c","type":"ADDED","insertions":163,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/read.pause.c","type":"ADDED","insertions":152,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/read.requeue.c","type":"ADDED","insertions":108,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/testlib.c","type":"ADDED","insertions":69,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/testlib.h","type":"ADDED","insertions":88,"deletions":0},{"file":"usr/src/cmd/bhyve/uart_emul.c","type":"MODIFIED","insertions":5,"deletions":-93}],"sizeInsertions":2326,"sizeDeletions":-106}],"allReviewers":[{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}]}