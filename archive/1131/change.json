{"project":"joyent/illumos-joyent","branch":"master","id":"I5473ee54393dd406fd06134d8c0ebf1635589363","number":"1131","subject":"OS-5853 processes exiting or exited are missing from lx /proc Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Approved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e","owner":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"url":"https://cr.joyent.us/1131","commitMessage":"OS-5853 processes exiting or exited are missing from lx /proc\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1481842452,"lastUpdated":1481914529,"open":false,"status":"MERGED","comments":[{"timestamp":1481842452,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 1."},{"timestamp":1481907869,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 2."},{"timestamp":1481910071,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1481910286,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1481910595,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1481914517,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1481914529,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Patrick Mooney"}],"currentPatchSet":{"number":"3","revision":"5473ee54393dd406fd06134d8c0ebf1635589363","parents":["fc9f22399b38496c392d13cfb3da9200768c3190"],"ref":"refs/changes/31/1131/3","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1481914517,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481910595,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1481910595,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1481914529,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_pid.c","type":"MODIFIED","insertions":23,"deletions":-9},{"file":"usr/src/uts/common/brand/lx/os/lx_ptrace.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/brand/lx/procfs/lx_prsubr.c","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/brand/lx/syscall/lx_futex.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/syscall/lx_kill.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/brand/lx/syscall/lx_sched.c","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":41,"sizeDeletions":-18},"patchSets":[{"number":"1","revision":"6938c7be9347caff4a34e2a56f37ff5dfe395239","parents":["974b9625bcce609ef87d8547bb03484cf14ddb69"],"ref":"refs/changes/31/1131/1","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1481842452,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/procfs/lx_prsubr.c","type":"MODIFIED","insertions":28,"deletions":-4}],"sizeInsertions":28,"sizeDeletions":-4},{"number":"2","revision":"acf83f7a3ff4a25c03d4a9c46f238ba58efbb72e","parents":["fc9f22399b38496c392d13cfb3da9200768c3190"],"ref":"refs/changes/31/1131/2","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1481907869,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481910595,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1481910595,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"comments":[{"file":"usr/src/uts/common/brand/lx/os/lx_pid.c","line":364,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"This function asserts p_proc_flag \u0026 P_PR_LOCK but I don\u0027t see where you set that in the flow above."},{"file":"usr/src/uts/common/brand/lx/os/lx_pid.c","line":364,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Ignore that previous comment, its obviously checked on the line above"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_pid.c","type":"MODIFIED","insertions":23,"deletions":-9},{"file":"usr/src/uts/common/brand/lx/os/lx_ptrace.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/brand/lx/procfs/lx_prsubr.c","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/brand/lx/syscall/lx_futex.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/syscall/lx_kill.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/brand/lx/syscall/lx_sched.c","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":41,"sizeDeletions":-18},{"number":"3","revision":"5473ee54393dd406fd06134d8c0ebf1635589363","parents":["fc9f22399b38496c392d13cfb3da9200768c3190"],"ref":"refs/changes/31/1131/3","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1481914517,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481910595,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1481910595,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1481914529,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_pid.c","type":"MODIFIED","insertions":23,"deletions":-9},{"file":"usr/src/uts/common/brand/lx/os/lx_ptrace.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/brand/lx/procfs/lx_prsubr.c","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/brand/lx/syscall/lx_futex.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/syscall/lx_kill.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/brand/lx/syscall/lx_sched.c","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":41,"sizeDeletions":-18}],"allReviewers":[{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}]}