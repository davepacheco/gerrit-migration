{"project":"joyent/smartos-live","branch":"master","topic":"OS-7117","id":"I811f274f7da2a0f781d700ed58190e437e3eac2a","number":"4674","subject":"OS-7117 deliver uefi-rom.bin for bhyve Reviewed by: Jorge Schrauwen \u003cjorge@blackdot.be\u003e Reviewed by: Hans Rosenfeld \u003chans.rosenfeld@joyent.com\u003e Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Approved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e","owner":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"url":"https://cr.joyent.us/4674","commitMessage":"OS-7117 deliver uefi-rom.bin for bhyve\nReviewed by: Jorge Schrauwen \u003cjorge@blackdot.be\u003e\nReviewed by: Hans Rosenfeld \u003chans.rosenfeld@joyent.com\u003e\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nApproved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n","createdOn":1534195536,"lastUpdated":1534280037,"open":false,"status":"MERGED","comments":[{"timestamp":1534195536,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Uploaded patch set 1."},{"timestamp":1534195618,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1534196398,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Topic set to OS-7117"},{"timestamp":1534230956,"reviewer":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"message":"Patch Set 1: Code-Review+1\n\nLGTM, we should keep an eye on the ramdisk size though as we\u0027re adding another binary of around 1M.\n\nAre we still OK size wise for DEBUG builds also?"},{"timestamp":1534252028,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 1:\n\nThere is no size difference.  Previously uefi-csm-rom.bin was built as a less-than-half-full 2 MiB image.  I switched from -DFD_SIZE_2MB to -DFD_SIZE_1MB so now each bootrom is 1 MiB.\n\nYou can see the effect of this in the \"Size\" column below.  uefi-csm-rom.bin shrunk by 1 MiB and uefi-rom.bin added 1 MiB.  On the test system:\n\n[root@buglets /usr/share/bhyve]# stat -c \"%s %n\" *\n1048576 uefi-csm-rom.bin\n1048576 uefi-rom.bin"},{"timestamp":1534259280,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1534273377,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 1:\n\nTest notes in ticket"},{"timestamp":1534273495,"reviewer":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"message":"Patch Set 1:\n\nIs there a reason the ticket is not public?"},{"timestamp":1534278268,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1534279755,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1: Integration-Approval+1"},{"timestamp":1534279985,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 2: Commit message was updated."},{"timestamp":1534279991,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 3: Patch Set 2 was rebased"},{"timestamp":1534280012,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Mike Gerdts"},{"timestamp":1534280037,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3:\n\n\"make check\" passed ok"}],"currentPatchSet":{"number":"3","revision":"af1e8878c005e468f8bcec1c17b1515f7473a496","parents":["f605c7e36415bf59037ca701e7afebf247a20d23"],"ref":"refs/changes/74/4674/3","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1534279991,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1534195618,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534230956,"by":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534259280,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534278268,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1534279755,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1534280012,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"overlay/generic/manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"overlay/generic/usr/share/bhyve/uefi-csm-rom.bin","type":"MODIFIED","insertions":0,"deletions":0},{"file":"overlay/generic/usr/share/bhyve/uefi-rom.bin","type":"ADDED","insertions":0,"deletions":0}],"sizeInsertions":1,"sizeDeletions":0},"patchSets":[{"number":"1","revision":"811f274f7da2a0f781d700ed58190e437e3eac2a","parents":["ea0fd4262e3b9a99865525b354d3a8da7e76afab"],"ref":"refs/changes/74/4674/1","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1534195536,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1534195618,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534278268,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1534279755,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534259280,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534230956,"by":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"overlay/generic/manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"overlay/generic/usr/share/bhyve/uefi-csm-rom.bin","type":"MODIFIED","insertions":0,"deletions":0},{"file":"overlay/generic/usr/share/bhyve/uefi-rom.bin","type":"ADDED","insertions":0,"deletions":0}],"sizeInsertions":1,"sizeDeletions":0},{"number":"2","revision":"895ce71e33e43f6006f5490b784214c96780bfda","parents":["ea0fd4262e3b9a99865525b354d3a8da7e76afab"],"ref":"refs/changes/74/4674/2","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1534279985,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1534195618,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534278268,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1534279755,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534259280,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534230956,"by":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"overlay/generic/manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"overlay/generic/usr/share/bhyve/uefi-csm-rom.bin","type":"MODIFIED","insertions":0,"deletions":0},{"file":"overlay/generic/usr/share/bhyve/uefi-rom.bin","type":"ADDED","insertions":0,"deletions":0}],"sizeInsertions":1,"sizeDeletions":0},{"number":"3","revision":"af1e8878c005e468f8bcec1c17b1515f7473a496","parents":["f605c7e36415bf59037ca701e7afebf247a20d23"],"ref":"refs/changes/74/4674/3","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1534279991,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1534195618,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534278268,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1534279755,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534259280,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534230956,"by":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"}},{"type":"SUBM","value":"1","grantedOn":1534280012,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"overlay/generic/manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"overlay/generic/usr/share/bhyve/uefi-csm-rom.bin","type":"MODIFIED","insertions":0,"deletions":0},{"file":"overlay/generic/usr/share/bhyve/uefi-rom.bin","type":"ADDED","insertions":0,"deletions":0}],"sizeInsertions":1,"sizeDeletions":0}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}]}