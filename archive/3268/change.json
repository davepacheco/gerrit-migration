{"project":"joyent/sdc-booter","branch":"master","id":"Ic3b62e7a4dc95ef3405ff789f8269cbcc6130bbd","number":"3268","subject":"TRITON-86 booter should allow .local override for packetOpts.file","owner":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"url":"https://cr.joyent.us/3268","commitMessage":"TRITON-86 booter should allow .local override for packetOpts.file\n","createdOn":1516929625,"lastUpdated":1536172561,"open":false,"status":"ABANDONED","comments":[{"timestamp":1516929625,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 1."},{"timestamp":1516929626,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit bf287b71b8e913cf9ee8e83888e02b1e36e50141\n    \n    Add support for .local override for boot.ipxe.* files"},{"timestamp":1516929656,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1517386428,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1517386429,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit e16f8e046e6bb0e50746d558bef7c3f06e450d88\n    \n    Add support for .local override for boot.ipxe.* files"},{"timestamp":1517386455,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2:\n\n\"make check\" passed ok"},{"timestamp":1517386731,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 3."},{"timestamp":1517386733,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 86c5cffd51f680b5b5d3cbd4c268cb724d26e964\n    \n    add warning"},{"timestamp":1517386758,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1517587594,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Patch Set 3:\n\n(3 comments)"},{"timestamp":1517986551,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 3:\n\n(2 comments)"},{"timestamp":1518052854,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1536172561,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Abandoned"}],"currentPatchSet":{"number":"3","revision":"c3b62e7a4dc95ef3405ff789f8269cbcc6130bbd","parents":["a7591ed721b1402703b9d5230923bf05ed6dbea4"],"ref":"refs/changes/68/3268/3","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1517386731,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1517386758,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/dhcpd.js","line":141,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Isn\u0027t there already an assert for `self.config.tftpRoot` in `createServer`? How could we get here without this defined?"},{"file":"lib/dhcpd.js","line":141,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"I don\u0027t think we will with the current code, but who knows about the future. Do you foresee a problem caused by checking this here before we use it?"},{"file":"lib/dhcpd.js","line":150,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"I\u0027m still trying to figure out all the node idioms.  What makes a sync call okay here?"},{"file":"lib/dhcpd.js","line":150,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Basically: it\u0027s not ok. I\u0027ll change and submit a new patchset. I was being lazy because the code here makes doing the right thing much harder than it should be.\n\nIn general I think you don\u0027t want to use the *Sync functions ever in a critical path. In something like a test case, or some other case where you only have one thing to do and aren\u0027t concerned about blocking anything else from happening in the meantime, it\u0027s probably ok. But still never hurts to use the async version, other than the fact that it can mean more complicated code."},{"file":"package.json","line":4,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"FWIW The version property does not seem to be used for anything."},{"file":"package.json","line":4,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"I don\u0027t understand.\n\nYou mean the version is not used by the code itself? That\u0027s true... But it\u0027s used by npm and anything that uses this program and wants to know what version it\u0027s running."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/dhcpd.js","type":"MODIFIED","insertions":26,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":27,"sizeDeletions":-2},"patchSets":[{"number":"1","revision":"0f057ae9cba7a7d04cd159c24b0366dfe4a672b1","parents":["4b47b75833568258db62fc279764fb9f4c48b018"],"ref":"refs/changes/68/3268/1","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1516929625,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1516929656,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/dhcpd.js","type":"MODIFIED","insertions":23,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":24,"sizeDeletions":-2},{"number":"2","revision":"c8b16804b1a2107ed6332775fb52965dd15a2b47","parents":["a7591ed721b1402703b9d5230923bf05ed6dbea4"],"ref":"refs/changes/68/3268/2","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1517386428,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1516929656,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/dhcpd.js","type":"MODIFIED","insertions":23,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":24,"sizeDeletions":-2},{"number":"3","revision":"c3b62e7a4dc95ef3405ff789f8269cbcc6130bbd","parents":["a7591ed721b1402703b9d5230923bf05ed6dbea4"],"ref":"refs/changes/68/3268/3","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1517386731,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1517386758,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/dhcpd.js","line":141,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Isn\u0027t there already an assert for `self.config.tftpRoot` in `createServer`? How could we get here without this defined?"},{"file":"lib/dhcpd.js","line":141,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"I don\u0027t think we will with the current code, but who knows about the future. Do you foresee a problem caused by checking this here before we use it?"},{"file":"lib/dhcpd.js","line":150,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"I\u0027m still trying to figure out all the node idioms.  What makes a sync call okay here?"},{"file":"lib/dhcpd.js","line":150,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Basically: it\u0027s not ok. I\u0027ll change and submit a new patchset. I was being lazy because the code here makes doing the right thing much harder than it should be.\n\nIn general I think you don\u0027t want to use the *Sync functions ever in a critical path. In something like a test case, or some other case where you only have one thing to do and aren\u0027t concerned about blocking anything else from happening in the meantime, it\u0027s probably ok. But still never hurts to use the async version, other than the fact that it can mean more complicated code."},{"file":"package.json","line":4,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"FWIW The version property does not seem to be used for anything."},{"file":"package.json","line":4,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"I don\u0027t understand.\n\nYou mean the version is not used by the code itself? That\u0027s true... But it\u0027s used by npm and anything that uses this program and wants to know what version it\u0027s running."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/dhcpd.js","type":"MODIFIED","insertions":26,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":27,"sizeDeletions":-2}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}]}