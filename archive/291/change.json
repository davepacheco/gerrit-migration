{"project":"joyent/node-fast2","branch":"master","id":"I258e6a353bdd6f96606fc285db6bc2aab3539ebe","number":"291","subject":"MORAY-352 fast client needs work Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Approved by: Robert Mustacchi \u003crm@joyent.com\u003e","owner":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"url":"https://cr.joyent.us/291","commitMessage":"MORAY-352 fast client needs work\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nApproved by: Robert Mustacchi \u003crm@joyent.com\u003e\n","createdOn":1471302664,"lastUpdated":1472492665,"open":false,"status":"MERGED","comments":[{"timestamp":1471302664,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 1."},{"timestamp":1471302674,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1471303311,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 2: Commit message was updated."},{"timestamp":1471469728,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2:\n\nI\u0027ve generated a webrev of patchset 1:\nhttps://us-east.manta.joyent.com/dap/public/webrevs/MORAY-352/index.html\n\nThere\u0027s a tarball of the webrev itself at\nhttps://us-east.manta.joyent.com/dap/public/webrevs/MORAY-352/MORAY-352.tar.gz"},{"timestamp":1471469784,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2:\n\nThat\u0027s actually a webrev of patchset 2."},{"timestamp":1472053246,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2:\n\nI initially reviewed this on the plane and put together the following notes. Sorry they didn\u0027t end up as line feedback.\n\nREADME.md:\n\n+5 s/SmartDataCenter/Triton\n\n+113: Can you maybe clarify if this occurs only once or it occurs\nmultiple times or only once? I\u0027m not sure if the data event can fire\nmultiple times (haven\u0027t looked at the source here). I can imagine it\noccurs once we have all data or for each on(\u0027data\u0027, ...) event for the\nunderlying TCP stream.\n\n+206: Probably worth adding a sentence reminding users here that a\ntimeout abort has in implications for whether or not the remote server\nactually completes the event. I know that you talk about this again in\nthe abort() RPC method, but I think it\u0027s important to emphasize.\n\n+262: Mind adding a comment that describes when you\u0027d use this?\n\n+282-287: I got a little confused by this. These look like methods on\nRPC objects that come rather than something on the server object itself.\nIs that the case? If so, may be worth calling it out separately.\n\nReading on, it may make sense to actually move these into the\nregisterRpcMethod section. I think they\u0027ll likely all make more sense\nthere.\n\nCONTRIBUTING.md:\n\nShould this mention gerrit at all?\n\n+26-32: Reading this felt a little awkward if only because of the done /\nnot implemented at the head. But it\u0027s not a big deal.\n\n+47: Specify path to npm like node above?\n\nbin/fastssnoop:\n\n+43: Is there a reason this doesn\u0027t include the client like conn-create\ndoes?\n\nbin/fastcall+31, bin/fastserve+38, bin/fastbench+98:\n\nIs this a typo for synopses vs. synopsis? Sorry, don\u0027t have the source\nin front of me.\n\nbin/fastbench:\n\n+165: Is there a reason you\u0027re only comparing against null here?\nWouldn\u0027t a likely failure mode be that a user doesn\u0027t pass the argument?\nFor some reason I thought that might show up as undefined, unless you\nwant to coerce that to zero.\n\nlib/fast_client.js:\n\n+104: Is it worth transfomring this to ++fastNclients so that way D\nscripts never have to worry about comparing with zero and confusing it\nand a lack of something? Not sure this is really important though.\n\n-I have one concern with the way that client and message IDs are being\ngenerated here. It seems like in the world of npm, it\u0027s perfectly\npossible for a given project to have *two* different copies of\nnode-fast2. If that\u0027s the case, the nClients which is being used to set\nup and fill in the FastClient fc_dtid member may end up duplicated in\nmultiple places.\n\nI\u0027m not sure if it\u0027s worth trying to fix this or not or if it\u0027s even\nlikely to happen, but I felt it was worth calling out. I\u0027m not sure of a\ngreat way to use this except by keeping some kind of sparse object and\ngenerating the client ids using something like Math.random(). Which also\ndoesn\u0027t prevent this, but makes it less likely (in theory).\n\nIn general, I expect consumers to only ever have one module\u0027s worth of\nFastClients, so maybe just call this out in the README?\n\n- Regarding aborted messages, if we never end up seeing something from\nthe server it sesms like they will sit around in the fc_aborted object\nof the FastClient. Is the presumption that a rash of aborted messages\nare just a prelude to tearing down the fast connection so we don\u0027t have\nto worry about this growing without bounds?\n\nlib/fast_server.js:\n\n+1074: There has to be a terrible story of despair that explains what\nthis malfeasance was.\n\ntest/common.js:\n\n+85-88: Can you clarify this comment a little bit? In particular I spent\na bit of time trying to figure out whether it was that it encoded the\nmessage purposefully incorrectly or that its callers passed arguments\nthat would result in the creation of an invalid message. I think it\u0027s\nthe latter, but I\u0027m not completely certain.\n\n+306-314: I presume it\u0027s not worth testing for something less than\nv0.10?\n\nGeneral/Misc:\n\n-Worth leveraging dstyle for the DTrace scripts? (I could easily see\nthat being no / future work).\n\n-I\u0027m a bit confused about how the client\u0027s ReadableStream works. Though\nI think this is me being confused by the streams in general.  I\u0027m trying\nto figure out how the client calling read interacts with flow control\nand the underlying transport. I\u0027m not sure if the comment in\nlib/fast_client.js+407 is trying to address this or otherwise.\n\nSo, is this the way things work?\n\nThe underlying TCP socket is piped into the message decoder. That reads\nchunks of data and then pushes them. If data\u0027s not available it simply\nwill block. However, when there\u0027s TCP data, we\u0027ll push that through\ntransform (the push in FastMessageDecoder.prototype.decode()) which\ncauses a data event.\n\nRather than reading, we consume that data event in the FastClient and\nthen that gets verified and pushed onto the request\u0027s ReadableStream.\nHowever, that will simply buffer, as there\u0027s no feedback from the client\nreading and asking us to do more work. There\u0027s no read() function which\nIIRC is how we\u0027re supposed to know to kick things off in more general.\n\nIs this the right idea?"},{"timestamp":1472055470,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 3."},{"timestamp":1472055478,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1472055684,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 3:\n\nThanks for taking a close look!  I\u0027ve responded to comments inline below\nand submitted patchset 3 with the suggested changes.  This patchset\npasses \"make prepush\" and \"make test-compat\" with Node 0.10 and 0.12,\nand I manually tested fastbench with both valid and invalid arguments\nfor the options that take numeric arguments.\n\n\n\u003e README.md:\n\u003e \n\u003e +5 s/SmartDataCenter/Triton\n\nDone.\n\n\n\u003e +113: Can you maybe clarify if this occurs only once or it occurs\n\u003e multiple times or only once? I\u0027m not sure if the data event can fire\n\u003e multiple times (haven\u0027t looked at the source here). I can imagine it\n\u003e occurs once we have all data or for each on(\u0027data\u0027, ...) event for the\n\u003e underlying TCP stream.\n\n\nThis referred to the `data` event that is part of the Node Streams API.\nThat said, I\u0027ve updated the documentation to say that the `rpc-data`\nevent fires when the client receives a data message, rather than when it\nreceives an event.  (That\u0027s because the `data` event is only one way to\nconsume the data, a deprecated one at that, and the DTrace probe\ncorresponds with receipt of the message rather than the reading of that\nmessage by the consumer.)\n\n\n\u003e +206: Probably worth adding a sentence reminding users here that a\n\u003e timeout abort has in implications for whether or not the remote server\n\u003e actually completes the event. I know that you talk about this again in\n\u003e the abort() RPC method, but I think it\u0027s important to emphasize.\n\nDone.\n\n\n\u003e +262: Mind adding a comment that describes when you\u0027d use this?\n\nDone.\n\n\n\u003e +282-287: I got a little confused by this. These look like methods on\n\u003e RPC objects that come rather than something on the server object itself.\n\u003e Is that the case? If so, may be worth calling it out separately.\n\u003e \n\u003e Reading on, it may make sense to actually move these into the\n\u003e registerRpcMethod section. I think they\u0027ll likely all make more sense\n\u003e there.\n\n\nDone.\n\n\n\u003e CONTRIBUTING.md:\n\u003e \n\u003e Should this mention gerrit at all?\n\n\nI have updated this to use the template that I created for node-verror\nlast week.\n\n\n\u003e +26-32: Reading this felt a little awkward if only because of the done /\n\u003e not implemented at the head. But it\u0027s not a big deal.\n\n\nI\u0027m not sure what to do about this.  I thought it was useful to call out\nthe kinds of things we may want to do in the future so that someone\nconsidering the impact of compatibility testing is aware of them, but I\nalso wanted to clarify that those facilities do not exist yet.\n\n\n\u003e +47: Specify path to npm like node above?\n\nYou mean instead of the phrase \"in that directory\"?\n\n\n\u003e bin/fastssnoop:\n\u003e \n\u003e +43: Is there a reason this doesn\u0027t include the client like conn-create\n\u003e does?\n\n\nThe clause at 25-34 fires for both `conn-create` and `conn-destroy`.\nThis prints a common prefix for each line that includes the connection\nidentifier.  With this, you can match up each conn-destroy to a\nconn-create.  The additional information printed by the conn-create\nprobe is the human-readable label for this client.  I suppose we could\nsave that and print it in conn-destroy as well, but I opted to keep this\nscript pretty simple.  (In principle, there\u0027s any number of items you\nmight want to record and print this way.)\n\n\n\u003e bin/fastcall+31, bin/fastserve+38, bin/fastbench+98:\n\u003e \n\u003e Is this a typo for synopses vs. synopsis? Sorry, don\u0027t have the source\n\u003e in front of me.\n\n\nNo, it\u0027s just plural.  I know the plural is unusual, but node-cmdutil\nassumes you may have more than one different usage message that you\nmight want to print (e.g., `ppriv -h`, or any command that uses\nsubcommands), and I thought it would be useful to be precise.\n(node-cmdutil prints out a synopsis line for each entry in the\n`synopses` array.)\n\n\n\u003e bin/fastbench:\n\u003e \n\u003e +165: Is there a reason you\u0027re only comparing against null here?\n\u003e Wouldn\u0027t a likely failure mode be that a user doesn\u0027t pass the argument?\n\u003e For some reason I thought that might show up as undefined, unless you\n\u003e want to coerce that to zero.\n\nThis is a private function, and the callers all use literal values for\n\"min\".  I have added two assertions that ensure that the value is either\na number or null.\n\nIn general, I try to be precise about use of `null`, `undefined`,\n`false`, and `0`, rather than allowing falsey values to be treated as\nequivalent unless there\u0027s a legitimate reason for it.  (Of course, it\nwould be useful to make sure that this doesn\u0027t cause us to do the wrong\nthing at runtime, which is why I added the assertions.)\n\n\n\u003e lib/fast_client.js:\n\u003e \n\u003e +104: Is it worth transfomring this to ++fastNclients so that way D\n\u003e scripts never have to worry about comparing with zero and confusing it\n\u003e and a lack of something? Not sure this is really important though.\n\nSure.\n\n\n\u003e -I have one concern with the way that client and message IDs are being\n\u003e generated here. It seems like in the world of npm, it\u0027s perfectly\n\u003e possible for a given project to have *two* different copies of\n\u003e node-fast2. If that\u0027s the case, the nClients which is being used to set\n\u003e up and fill in the FastClient fc_dtid member may end up duplicated in\n\u003e multiple places.\n\u003e \n\u003e I\u0027m not sure if it\u0027s worth trying to fix this or not or if it\u0027s even\n\u003e likely to happen, but I felt it was worth calling out. I\u0027m not sure of a\n\u003e great way to use this except by keeping some kind of sparse object and\n\u003e generating the client ids using something like Math.random(). Which also\n\u003e doesn\u0027t prevent this, but makes it less likely (in theory).\n\u003e \n\u003e In general, I expect consumers to only ever have one module\u0027s worth of\n\u003e FastClients, so maybe just call this out in the README?\n\n\nThat\u0027s a good question.  I\u0027d like to address this, but I\u0027m not sure the\nbest way to do it either.  We could create a true JavaScript global,\nthough that creates an implicit contract among all versions of the Fast\nclient.\n\nI think you\u0027re generally going to run into trouble using multiple\nversions of something that includes its own DTrace provider (whether in\nNode or otherwise).  The probes can change and arguments can be added\n(and not present in older versions).\n\n\n\u003e - Regarding aborted messages, if we never end up seeing something from\n\u003e the server it sesms like they will sit around in the fc_aborted object\n\u003e of the FastClient. Is the presumption that a rash of aborted messages\n\u003e are just a prelude to tearing down the fast connection so we don\u0027t have\n\u003e to worry about this growing without bounds?\n\n\nIs this different than for non-aborted requests?\n\nThe assumption is that the server should respond to all requests under\nnormal conditions.  If there\u0027s a networking issue that causes requests\nto be dropped, that should be detected as a socket error (possibly as a\nresult of a TCP KeepAlive timeout) and the entire client (and referenced\nobjects) will be thrown away.  If there\u0027s a server issue that causes\nrequests to hang indefinitely, some per-request resources will be used\non each client until that issue is resolved.\n\nThe only alternative I see is to remove this state, but then we cannot\nidentify unsolicited messages from the server, which I think is a more\nserious issue.\n\n\n\n\u003e lib/fast_server.js:\n\u003e \n\u003e +1074: There has to be a terrible story of despair that explains what\n\u003e this malfeasance was.\n\n\nI actually don\u0027t remember, but I\u0027ve seen it a lot.  (For a recent\nexample, see https://github.com/joyent/node-verror/issues/37.)\n\n\n\u003e test/common.js:\n\u003e \n\u003e +85-88: Can you clarify this comment a little bit? In particular I spent\n\u003e a bit of time trying to figure out whether it was that it encoded the\n\u003e message purposefully incorrectly or that its callers passed arguments\n\u003e that would result in the creation of an invalid message. I think it\u0027s\n\u003e the latter, but I\u0027m not completely certain.\n\n\nIt\u0027s the latter.  I\u0027ve updated this comment.\n\n\n\u003e +306-314: I presume it\u0027s not worth testing for something less than\n\u003e v0.10?\n\n\nI don\u0027t think so.  A separate question might be whether we attempt to\ndetermine at runtime if you\u0027re using an unsupported Node version.  But\nI don\u0027t think it\u0027s any more likely that somebody would run the test\nsuite with 0.8 than that they might run with some arbitrary other build\n(i.e., not a released version).  It would be better if this were a\nfeature test, but I don\u0027t know very well how to do that, and I don\u0027t\nthink it\u0027s worth trying to do that here.\n\n\n\u003e General/Misc:\n\u003e \n\u003e -Worth leveraging dstyle for the DTrace scripts? (I could easily see\n\u003e that being no / future work).\n\n\nI had never heard of this and had trouble finding it.  Is the canonical\ncopy inside the DTrace test suite? (!)\n\nIf this is useful, I would want to move that to a separate repository\nand fold the targets into eng.git\u0027s Makefile.targ.  This would apply to\nmany repos that bundle their own D scripts today, and I don\u0027t think we\nshould block this work on it.\n\nHaving not seen it before, I can\u0027t tell if that\u0027s worthwhile.  I ran it\non the D scripts in node-fast2 and found a legitimate tab/space issue,\nbut also this error in every one of the scripts that I don\u0027t understand:\n\n    bin/fastslatency: 34: multiple probe descriptions on same line\n\nAt first glance, dstyle does not seem to support the use of\nmulti-dimensional associative arrays inside predicates.\n\n\n\u003e -I\u0027m a bit confused about how the client\u0027s ReadableStream works. Though\n\u003e I think this is me being confused by the streams in general.  I\u0027m trying\n\u003e to figure out how the client calling read interacts with flow control\n\u003e and the underlying transport. I\u0027m not sure if the comment in\n\u003e lib/fast_client.js+407 is trying to address this or otherwise.\n\u003e \n\u003e So, is this the way things work?\n\u003e \n\u003e The underlying TCP socket is piped into the message decoder. That reads\n\u003e chunks of data and then pushes them. \n\nMore precisely: the message decoder reads bytes from the TCP socket,\ngroups and parses them into Fast protocol messages, and pushes\nJavaScript objects describing those parsed messages.\n\n\u003e If data\u0027s not available it simply\n\u003e will block. However, when there\u0027s TCP data, we\u0027ll push that through\n\u003e transform (the push in FastMessageDecoder.prototype.decode()) which\n\u003e causes a data event.\n\n\nCorrect.  All of that is handled by the Node streams framework:\n\n    https://nodejs.org/dist/v0.12.9/docs/api/stream.html#stream_class_stream_readable\n\nEssentially, there are a few ways that consumers can read data from\nReadable streams: they can call `read()` directly, they can call\n`pipe()` to send data to a Writable stream, or they can attach their own\n`data` listener.  The first two of these work with backpressure:\n`read()` returns null when no data is available, and the consumer is\nexpected to listen for `readable` to see when data becomes available\nagain.  `pipe()` is presumably implemented in terms of `read()`, but I\ndon\u0027t think that matters.  If you attach your own data listener, there\u0027s\nno way to manage backpressure.\n\nReadable Stream implementors implement this interface:\n\n    https://nodejs.org/dist/v0.12.9/docs/api/stream.html#stream_class_stream_readable_1\n\nYou inherit from the base class, implement `_read()`, and call your own\n`push()` method to emit data from the stream.  If you do that, the\nframework takes care of the rest (emitting events, implementing read(),\ndealing with backpressure, and propagating data to the consumer no\nmatter which interface the consumer is using). \n\nThere\u0027s a Transform interface that\u0027s just a special case that\u0027s a little\nsimpler to implement:\n\n    https://nodejs.org/dist/v0.12.9/docs/api/stream.html#stream_class_stream_transform_1\n\nBack to your comment: the push in\n`FastMessageDecoder.prototype.detach()` is what logically emits the\nobject out the transform.  (The transformation is already done at that\npoint.)\n\n\n\u003e Rather than reading, we consume that data event in the FastClient and\n\u003e then that gets verified and pushed onto the request\u0027s ReadableStream.\n\nMore precisely: rather than calling `read()`, we use a `data` event\nlistener to consume the message, verify it, figure out which request it\nbelongs to, and push it *out* the corresponding request\u0027s\nReadableStream.\n\n\n\u003e However, that will simply buffer, as there\u0027s no feedback from the client\n\u003e reading and asking us to do more work. There\u0027s no read() function which\n\u003e IIRC is how we\u0027re supposed to know to kick things off in more general.\n\u003e\n\u003e Is this the right idea?\n\nI\u0027m not really sure what you mean here, but hopefully with the above\nexplanation, this makes more sense.\n\nSo the pipeline goes:\n\n    client tcp socket\n      |\n      | pipe() (handles backpressure)\n      v\n    message decoder\n      |\n      | \u0027data\u0027 events (no backpressure)\n      v\n    per-request readable stream\n      |\n      | This can be read(), pipe(), or \u0027data\u0027 events.\n      | It\u0027s up to the RPC caller.\n      v\n\nIn principle, if we didn\u0027t multiplex requests over a single socket, then\nwe could support backpressure properly all the way from the consumer in\nthe client to the producer on the server.  But since we do multiplex\nrequests, if we did propagate backpressure, then a single bum RPC caller\nwould block all other callers on this client.  That\u0027s not tenable, so we\ndon\u0027t do backpressure at all.  There\u0027s this comment on the rpc() method:\n\n ... This\n * stream does not support flow control, so the server must be trusted, and the\n * caller must avoid making requests that return large amounts of data faster\n * than the caller can process it.\n\nIn practice, we couldn\u0027t support backpressure anyway because that would\ncause clients to hang onto PostgreSQL connections, which are limited\nresources.  The best practice with PostgreSQL (as I understand it) is to\nmake bounded queries, in which case flow control is not critical.\n\nThe comment at lib/fast_client.js line 407 just reminds the reader why\nit\u0027s okay that we\u0027ve taken the shortcut of using a \u0027data\u0027 listener\n(namely, because the only downside -- it defeats flow control -- doesn\u0027t\napply here)."},{"timestamp":1472063356,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3: Code-Review+1\n\nThanks for the follow ups. I think I\u0027m generally happy."},{"timestamp":1472069321,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 4."},{"timestamp":1472069330,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1472069581,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 4:\n\nI\u0027ve submitted a new patchset with two sets of changes based on in-person discussion:\n\n- Client ids should now be unique even when multiple versions of the same module are in the same program\n- The terminology for request abort was changed to request abandonment to better convey that there is no explicit action being taken on the RPC.\n\nPatchset 4 passes \"make prepush test-compat\" on Node 0.10 and 0.12, and I verified that fastserve and fastcall still work, even when fastcall is given the (newly renamed) --abandon-immediately option."},{"timestamp":1472159294,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 4: Code-Review+1\n\n(1 comment)"},{"timestamp":1472162079,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 5."},{"timestamp":1472162083,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1472162227,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1472492009,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 6: Commit message was updated."},{"timestamp":1472492574,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 6: Integration-Approval+1"},{"timestamp":1472492665,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by David Pacheco"}],"currentPatchSet":{"number":"6","revision":"35a89eeba56f557c3d018b6d2734f39a453c760c","parents":["912371e3428a335d44359bd85adcfc518e58f6e7"],"ref":"refs/changes/91/291/6","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1472492009,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1472162083,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1472162227,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1472492574,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1472492665,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"ADDED","insertions":2,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":".npmignore","type":"ADDED","insertions":5,"deletions":0},{"file":"CHANGES.md","type":"ADDED","insertions":51,"deletions":0},{"file":"CONTRIBUTING.md","type":"ADDED","insertions":96,"deletions":0},{"file":"LICENSE","type":"ADDED","insertions":20,"deletions":0},{"file":"Makefile","type":"ADDED","insertions":50,"deletions":0},{"file":"Makefile.targ","type":"ADDED","insertions":317,"deletions":0},{"file":"README","type":"DELETED","insertions":0,"deletions":-1},{"file":"README.md","type":"ADDED","insertions":424,"deletions":0},{"file":"bin/fastbench","type":"ADDED","insertions":494,"deletions":0},{"file":"bin/fastcall","type":"ADDED","insertions":150,"deletions":0},{"file":"bin/fastclatency","type":"ADDED","insertions":40,"deletions":0},{"file":"bin/fastclatencytime","type":"ADDED","insertions":40,"deletions":0},{"file":"bin/fastcsnoop","type":"ADDED","insertions":54,"deletions":0},{"file":"bin/fastserve","type":"ADDED","insertions":124,"deletions":0},{"file":"bin/fastslatency","type":"ADDED","insertions":40,"deletions":0},{"file":"bin/fastssnoop","type":"ADDED","insertions":68,"deletions":0},{"file":"deps/catest","type":"ADDED","insertions":1,"deletions":0},{"file":"lib/bench.js","type":"ADDED","insertions":100,"deletions":0},{"file":"lib/demo_server.js","type":"ADDED","insertions":200,"deletions":0},{"file":"lib/fast.js","type":"ADDED","insertions":19,"deletions":0},{"file":"lib/fast_client.js","type":"ADDED","insertions":842,"deletions":0},{"file":"lib/fast_client_request.js","type":"ADDED","insertions":138,"deletions":0},{"file":"lib/fast_protocol.js","type":"ADDED","insertions":473,"deletions":0},{"file":"lib/fast_server.js","type":"ADDED","insertions":1298,"deletions":0},{"file":"lib/subr.js","type":"ADDED","insertions":134,"deletions":0},{"file":"package.json","type":"ADDED","insertions":32,"deletions":0},{"file":"test/common.js","type":"ADDED","insertions":315,"deletions":0},{"file":"test/common/client.js","type":"ADDED","insertions":220,"deletions":0},{"file":"test/compat/Makefile.compat.defs","type":"ADDED","insertions":9,"deletions":0},{"file":"test/compat/Makefile.compat.targ","type":"ADDED","insertions":19,"deletions":0},{"file":"test/compat/common.js","type":"ADDED","insertions":167,"deletions":0},{"file":"test/compat/legacy-server.js","type":"ADDED","insertions":175,"deletions":0},{"file":"test/compat/manual-tst.client_compat.js","type":"ADDED","insertions":199,"deletions":0},{"file":"test/compat/setup.js","type":"ADDED","insertions":94,"deletions":0},{"file":"test/tst.allocator.js","type":"ADDED","insertions":117,"deletions":0},{"file":"test/tst.client_generic.js","type":"ADDED","insertions":856,"deletions":0},{"file":"test/tst.client_request.js","type":"ADDED","insertions":487,"deletions":0},{"file":"test/tst.protocol_decoder.js","type":"ADDED","insertions":561,"deletions":0},{"file":"test/tst.protocol_encoder.js","type":"ADDED","insertions":265,"deletions":0},{"file":"test/tst.server.js","type":"ADDED","insertions":799,"deletions":0},{"file":"test/tst.socket_summarize.js","type":"ADDED","insertions":169,"deletions":0},{"file":"tools/bashstyle","type":"ADDED","insertions":114,"deletions":0},{"file":"tools/jsl.node.conf","type":"ADDED","insertions":142,"deletions":0},{"file":"tools/perfrun","type":"ADDED","insertions":129,"deletions":0}],"sizeInsertions":10052,"sizeDeletions":-1},"patchSets":[{"number":"1","revision":"d6f24597d53594071dfb12d576cc5eb04a5508ae","parents":["912371e3428a335d44359bd85adcfc518e58f6e7"],"ref":"refs/changes/91/291/1","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1471302664,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1471302674,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"ADDED","insertions":2,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":".npmignore","type":"ADDED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"ADDED","insertions":51,"deletions":0},{"file":"CONTRIBUTING.md","type":"ADDED","insertions":82,"deletions":0},{"file":"LICENSE","type":"ADDED","insertions":20,"deletions":0},{"file":"Makefile","type":"ADDED","insertions":50,"deletions":0},{"file":"Makefile.targ","type":"ADDED","insertions":317,"deletions":0},{"file":"README","type":"DELETED","insertions":0,"deletions":-1},{"file":"README.md","type":"ADDED","insertions":400,"deletions":0},{"file":"bin/fastbench","type":"ADDED","insertions":492,"deletions":0},{"file":"bin/fastcall","type":"ADDED","insertions":150,"deletions":0},{"file":"bin/fastclatency","type":"ADDED","insertions":40,"deletions":0},{"file":"bin/fastclatencytime","type":"ADDED","insertions":40,"deletions":0},{"file":"bin/fastcsnoop","type":"ADDED","insertions":54,"deletions":0},{"file":"bin/fastserve","type":"ADDED","insertions":124,"deletions":0},{"file":"bin/fastslatency","type":"ADDED","insertions":40,"deletions":0},{"file":"bin/fastssnoop","type":"ADDED","insertions":68,"deletions":0},{"file":"deps/catest","type":"ADDED","insertions":1,"deletions":0},{"file":"lib/bench.js","type":"ADDED","insertions":100,"deletions":0},{"file":"lib/demo_server.js","type":"ADDED","insertions":200,"deletions":0},{"file":"lib/fast.js","type":"ADDED","insertions":19,"deletions":0},{"file":"lib/fast_client.js","type":"ADDED","insertions":835,"deletions":0},{"file":"lib/fast_client_request.js","type":"ADDED","insertions":137,"deletions":0},{"file":"lib/fast_protocol.js","type":"ADDED","insertions":473,"deletions":0},{"file":"lib/fast_server.js","type":"ADDED","insertions":1292,"deletions":0},{"file":"lib/subr.js","type":"ADDED","insertions":134,"deletions":0},{"file":"package.json","type":"ADDED","insertions":32,"deletions":0},{"file":"test/common.js","type":"ADDED","insertions":314,"deletions":0},{"file":"test/common/client.js","type":"ADDED","insertions":220,"deletions":0},{"file":"test/compat/Makefile.compat.defs","type":"ADDED","insertions":9,"deletions":0},{"file":"test/compat/Makefile.compat.targ","type":"ADDED","insertions":19,"deletions":0},{"file":"test/compat/common.js","type":"ADDED","insertions":167,"deletions":0},{"file":"test/compat/legacy-server.js","type":"ADDED","insertions":175,"deletions":0},{"file":"test/compat/manual-tst.client_compat.js","type":"ADDED","insertions":199,"deletions":0},{"file":"test/compat/setup.js","type":"ADDED","insertions":94,"deletions":0},{"file":"test/tst.allocator.js","type":"ADDED","insertions":117,"deletions":0},{"file":"test/tst.client_generic.js","type":"ADDED","insertions":856,"deletions":0},{"file":"test/tst.client_request.js","type":"ADDED","insertions":487,"deletions":0},{"file":"test/tst.protocol_decoder.js","type":"ADDED","insertions":561,"deletions":0},{"file":"test/tst.protocol_encoder.js","type":"ADDED","insertions":265,"deletions":0},{"file":"test/tst.server.js","type":"ADDED","insertions":799,"deletions":0},{"file":"test/tst.socket_summarize.js","type":"ADDED","insertions":169,"deletions":0},{"file":"tools/bashstyle","type":"ADDED","insertions":114,"deletions":0},{"file":"tools/jsl.node.conf","type":"ADDED","insertions":142,"deletions":0},{"file":"tools/perfrun","type":"ADDED","insertions":129,"deletions":0}],"sizeInsertions":9993,"sizeDeletions":-1},{"number":"2","revision":"48009f1beaf4450d59f3e22778e98114a499dbc4","parents":["912371e3428a335d44359bd85adcfc518e58f6e7"],"ref":"refs/changes/91/291/2","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1471303311,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1471302674,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"ADDED","insertions":2,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":".npmignore","type":"ADDED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"ADDED","insertions":51,"deletions":0},{"file":"CONTRIBUTING.md","type":"ADDED","insertions":82,"deletions":0},{"file":"LICENSE","type":"ADDED","insertions":20,"deletions":0},{"file":"Makefile","type":"ADDED","insertions":50,"deletions":0},{"file":"Makefile.targ","type":"ADDED","insertions":317,"deletions":0},{"file":"README","type":"DELETED","insertions":0,"deletions":-1},{"file":"README.md","type":"ADDED","insertions":400,"deletions":0},{"file":"bin/fastbench","type":"ADDED","insertions":492,"deletions":0},{"file":"bin/fastcall","type":"ADDED","insertions":150,"deletions":0},{"file":"bin/fastclatency","type":"ADDED","insertions":40,"deletions":0},{"file":"bin/fastclatencytime","type":"ADDED","insertions":40,"deletions":0},{"file":"bin/fastcsnoop","type":"ADDED","insertions":54,"deletions":0},{"file":"bin/fastserve","type":"ADDED","insertions":124,"deletions":0},{"file":"bin/fastslatency","type":"ADDED","insertions":40,"deletions":0},{"file":"bin/fastssnoop","type":"ADDED","insertions":68,"deletions":0},{"file":"deps/catest","type":"ADDED","insertions":1,"deletions":0},{"file":"lib/bench.js","type":"ADDED","insertions":100,"deletions":0},{"file":"lib/demo_server.js","type":"ADDED","insertions":200,"deletions":0},{"file":"lib/fast.js","type":"ADDED","insertions":19,"deletions":0},{"file":"lib/fast_client.js","type":"ADDED","insertions":835,"deletions":0},{"file":"lib/fast_client_request.js","type":"ADDED","insertions":137,"deletions":0},{"file":"lib/fast_protocol.js","type":"ADDED","insertions":473,"deletions":0},{"file":"lib/fast_server.js","type":"ADDED","insertions":1292,"deletions":0},{"file":"lib/subr.js","type":"ADDED","insertions":134,"deletions":0},{"file":"package.json","type":"ADDED","insertions":32,"deletions":0},{"file":"test/common.js","type":"ADDED","insertions":314,"deletions":0},{"file":"test/common/client.js","type":"ADDED","insertions":220,"deletions":0},{"file":"test/compat/Makefile.compat.defs","type":"ADDED","insertions":9,"deletions":0},{"file":"test/compat/Makefile.compat.targ","type":"ADDED","insertions":19,"deletions":0},{"file":"test/compat/common.js","type":"ADDED","insertions":167,"deletions":0},{"file":"test/compat/legacy-server.js","type":"ADDED","insertions":175,"deletions":0},{"file":"test/compat/manual-tst.client_compat.js","type":"ADDED","insertions":199,"deletions":0},{"file":"test/compat/setup.js","type":"ADDED","insertions":94,"deletions":0},{"file":"test/tst.allocator.js","type":"ADDED","insertions":117,"deletions":0},{"file":"test/tst.client_generic.js","type":"ADDED","insertions":856,"deletions":0},{"file":"test/tst.client_request.js","type":"ADDED","insertions":487,"deletions":0},{"file":"test/tst.protocol_decoder.js","type":"ADDED","insertions":561,"deletions":0},{"file":"test/tst.protocol_encoder.js","type":"ADDED","insertions":265,"deletions":0},{"file":"test/tst.server.js","type":"ADDED","insertions":799,"deletions":0},{"file":"test/tst.socket_summarize.js","type":"ADDED","insertions":169,"deletions":0},{"file":"tools/bashstyle","type":"ADDED","insertions":114,"deletions":0},{"file":"tools/jsl.node.conf","type":"ADDED","insertions":142,"deletions":0},{"file":"tools/perfrun","type":"ADDED","insertions":129,"deletions":0}],"sizeInsertions":9993,"sizeDeletions":-1},{"number":"3","revision":"365f0f3aba4879f86c8f8d78fc0821300839955c","parents":["912371e3428a335d44359bd85adcfc518e58f6e7"],"ref":"refs/changes/91/291/3","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1472055470,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1472063356,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1472055478,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"ADDED","insertions":2,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":".npmignore","type":"ADDED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"ADDED","insertions":51,"deletions":0},{"file":"CONTRIBUTING.md","type":"ADDED","insertions":96,"deletions":0},{"file":"LICENSE","type":"ADDED","insertions":20,"deletions":0},{"file":"Makefile","type":"ADDED","insertions":50,"deletions":0},{"file":"Makefile.targ","type":"ADDED","insertions":317,"deletions":0},{"file":"README","type":"DELETED","insertions":0,"deletions":-1},{"file":"README.md","type":"ADDED","insertions":415,"deletions":0},{"file":"bin/fastbench","type":"ADDED","insertions":494,"deletions":0},{"file":"bin/fastcall","type":"ADDED","insertions":150,"deletions":0},{"file":"bin/fastclatency","type":"ADDED","insertions":40,"deletions":0},{"file":"bin/fastclatencytime","type":"ADDED","insertions":40,"deletions":0},{"file":"bin/fastcsnoop","type":"ADDED","insertions":54,"deletions":0},{"file":"bin/fastserve","type":"ADDED","insertions":124,"deletions":0},{"file":"bin/fastslatency","type":"ADDED","insertions":40,"deletions":0},{"file":"bin/fastssnoop","type":"ADDED","insertions":68,"deletions":0},{"file":"deps/catest","type":"ADDED","insertions":1,"deletions":0},{"file":"lib/bench.js","type":"ADDED","insertions":100,"deletions":0},{"file":"lib/demo_server.js","type":"ADDED","insertions":200,"deletions":0},{"file":"lib/fast.js","type":"ADDED","insertions":19,"deletions":0},{"file":"lib/fast_client.js","type":"ADDED","insertions":835,"deletions":0},{"file":"lib/fast_client_request.js","type":"ADDED","insertions":137,"deletions":0},{"file":"lib/fast_protocol.js","type":"ADDED","insertions":473,"deletions":0},{"file":"lib/fast_server.js","type":"ADDED","insertions":1292,"deletions":0},{"file":"lib/subr.js","type":"ADDED","insertions":134,"deletions":0},{"file":"package.json","type":"ADDED","insertions":32,"deletions":0},{"file":"test/common.js","type":"ADDED","insertions":315,"deletions":0},{"file":"test/common/client.js","type":"ADDED","insertions":220,"deletions":0},{"file":"test/compat/Makefile.compat.defs","type":"ADDED","insertions":9,"deletions":0},{"file":"test/compat/Makefile.compat.targ","type":"ADDED","insertions":19,"deletions":0},{"file":"test/compat/common.js","type":"ADDED","insertions":167,"deletions":0},{"file":"test/compat/legacy-server.js","type":"ADDED","insertions":175,"deletions":0},{"file":"test/compat/manual-tst.client_compat.js","type":"ADDED","insertions":199,"deletions":0},{"file":"test/compat/setup.js","type":"ADDED","insertions":94,"deletions":0},{"file":"test/tst.allocator.js","type":"ADDED","insertions":117,"deletions":0},{"file":"test/tst.client_generic.js","type":"ADDED","insertions":856,"deletions":0},{"file":"test/tst.client_request.js","type":"ADDED","insertions":487,"deletions":0},{"file":"test/tst.protocol_decoder.js","type":"ADDED","insertions":561,"deletions":0},{"file":"test/tst.protocol_encoder.js","type":"ADDED","insertions":265,"deletions":0},{"file":"test/tst.server.js","type":"ADDED","insertions":799,"deletions":0},{"file":"test/tst.socket_summarize.js","type":"ADDED","insertions":169,"deletions":0},{"file":"tools/bashstyle","type":"ADDED","insertions":114,"deletions":0},{"file":"tools/jsl.node.conf","type":"ADDED","insertions":142,"deletions":0},{"file":"tools/perfrun","type":"ADDED","insertions":129,"deletions":0}],"sizeInsertions":10025,"sizeDeletions":-1},{"number":"4","revision":"285b8c450e530196d8f4878e98b0a65a9d1716e4","parents":["912371e3428a335d44359bd85adcfc518e58f6e7"],"ref":"refs/changes/91/291/4","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1472069321,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1472069330,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1472159294,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"comments":[{"file":".npmignore","line":1,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Add deps, tools and perhaps the Makefiles?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"ADDED","insertions":2,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":".npmignore","type":"ADDED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"ADDED","insertions":51,"deletions":0},{"file":"CONTRIBUTING.md","type":"ADDED","insertions":96,"deletions":0},{"file":"LICENSE","type":"ADDED","insertions":20,"deletions":0},{"file":"Makefile","type":"ADDED","insertions":50,"deletions":0},{"file":"Makefile.targ","type":"ADDED","insertions":317,"deletions":0},{"file":"README","type":"DELETED","insertions":0,"deletions":-1},{"file":"README.md","type":"ADDED","insertions":424,"deletions":0},{"file":"bin/fastbench","type":"ADDED","insertions":494,"deletions":0},{"file":"bin/fastcall","type":"ADDED","insertions":150,"deletions":0},{"file":"bin/fastclatency","type":"ADDED","insertions":40,"deletions":0},{"file":"bin/fastclatencytime","type":"ADDED","insertions":40,"deletions":0},{"file":"bin/fastcsnoop","type":"ADDED","insertions":54,"deletions":0},{"file":"bin/fastserve","type":"ADDED","insertions":124,"deletions":0},{"file":"bin/fastslatency","type":"ADDED","insertions":40,"deletions":0},{"file":"bin/fastssnoop","type":"ADDED","insertions":68,"deletions":0},{"file":"deps/catest","type":"ADDED","insertions":1,"deletions":0},{"file":"lib/bench.js","type":"ADDED","insertions":100,"deletions":0},{"file":"lib/demo_server.js","type":"ADDED","insertions":200,"deletions":0},{"file":"lib/fast.js","type":"ADDED","insertions":19,"deletions":0},{"file":"lib/fast_client.js","type":"ADDED","insertions":842,"deletions":0},{"file":"lib/fast_client_request.js","type":"ADDED","insertions":138,"deletions":0},{"file":"lib/fast_protocol.js","type":"ADDED","insertions":473,"deletions":0},{"file":"lib/fast_server.js","type":"ADDED","insertions":1298,"deletions":0},{"file":"lib/subr.js","type":"ADDED","insertions":134,"deletions":0},{"file":"package.json","type":"ADDED","insertions":32,"deletions":0},{"file":"test/common.js","type":"ADDED","insertions":315,"deletions":0},{"file":"test/common/client.js","type":"ADDED","insertions":220,"deletions":0},{"file":"test/compat/Makefile.compat.defs","type":"ADDED","insertions":9,"deletions":0},{"file":"test/compat/Makefile.compat.targ","type":"ADDED","insertions":19,"deletions":0},{"file":"test/compat/common.js","type":"ADDED","insertions":167,"deletions":0},{"file":"test/compat/legacy-server.js","type":"ADDED","insertions":175,"deletions":0},{"file":"test/compat/manual-tst.client_compat.js","type":"ADDED","insertions":199,"deletions":0},{"file":"test/compat/setup.js","type":"ADDED","insertions":94,"deletions":0},{"file":"test/tst.allocator.js","type":"ADDED","insertions":117,"deletions":0},{"file":"test/tst.client_generic.js","type":"ADDED","insertions":856,"deletions":0},{"file":"test/tst.client_request.js","type":"ADDED","insertions":487,"deletions":0},{"file":"test/tst.protocol_decoder.js","type":"ADDED","insertions":561,"deletions":0},{"file":"test/tst.protocol_encoder.js","type":"ADDED","insertions":265,"deletions":0},{"file":"test/tst.server.js","type":"ADDED","insertions":799,"deletions":0},{"file":"test/tst.socket_summarize.js","type":"ADDED","insertions":169,"deletions":0},{"file":"tools/bashstyle","type":"ADDED","insertions":114,"deletions":0},{"file":"tools/jsl.node.conf","type":"ADDED","insertions":142,"deletions":0},{"file":"tools/perfrun","type":"ADDED","insertions":129,"deletions":0}],"sizeInsertions":10048,"sizeDeletions":-1},{"number":"5","revision":"258e6a353bdd6f96606fc285db6bc2aab3539ebe","parents":["912371e3428a335d44359bd85adcfc518e58f6e7"],"ref":"refs/changes/91/291/5","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1472162079,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1472162227,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1472162083,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"ADDED","insertions":2,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":".npmignore","type":"ADDED","insertions":5,"deletions":0},{"file":"CHANGES.md","type":"ADDED","insertions":51,"deletions":0},{"file":"CONTRIBUTING.md","type":"ADDED","insertions":96,"deletions":0},{"file":"LICENSE","type":"ADDED","insertions":20,"deletions":0},{"file":"Makefile","type":"ADDED","insertions":50,"deletions":0},{"file":"Makefile.targ","type":"ADDED","insertions":317,"deletions":0},{"file":"README","type":"DELETED","insertions":0,"deletions":-1},{"file":"README.md","type":"ADDED","insertions":424,"deletions":0},{"file":"bin/fastbench","type":"ADDED","insertions":494,"deletions":0},{"file":"bin/fastcall","type":"ADDED","insertions":150,"deletions":0},{"file":"bin/fastclatency","type":"ADDED","insertions":40,"deletions":0},{"file":"bin/fastclatencytime","type":"ADDED","insertions":40,"deletions":0},{"file":"bin/fastcsnoop","type":"ADDED","insertions":54,"deletions":0},{"file":"bin/fastserve","type":"ADDED","insertions":124,"deletions":0},{"file":"bin/fastslatency","type":"ADDED","insertions":40,"deletions":0},{"file":"bin/fastssnoop","type":"ADDED","insertions":68,"deletions":0},{"file":"deps/catest","type":"ADDED","insertions":1,"deletions":0},{"file":"lib/bench.js","type":"ADDED","insertions":100,"deletions":0},{"file":"lib/demo_server.js","type":"ADDED","insertions":200,"deletions":0},{"file":"lib/fast.js","type":"ADDED","insertions":19,"deletions":0},{"file":"lib/fast_client.js","type":"ADDED","insertions":842,"deletions":0},{"file":"lib/fast_client_request.js","type":"ADDED","insertions":138,"deletions":0},{"file":"lib/fast_protocol.js","type":"ADDED","insertions":473,"deletions":0},{"file":"lib/fast_server.js","type":"ADDED","insertions":1298,"deletions":0},{"file":"lib/subr.js","type":"ADDED","insertions":134,"deletions":0},{"file":"package.json","type":"ADDED","insertions":32,"deletions":0},{"file":"test/common.js","type":"ADDED","insertions":315,"deletions":0},{"file":"test/common/client.js","type":"ADDED","insertions":220,"deletions":0},{"file":"test/compat/Makefile.compat.defs","type":"ADDED","insertions":9,"deletions":0},{"file":"test/compat/Makefile.compat.targ","type":"ADDED","insertions":19,"deletions":0},{"file":"test/compat/common.js","type":"ADDED","insertions":167,"deletions":0},{"file":"test/compat/legacy-server.js","type":"ADDED","insertions":175,"deletions":0},{"file":"test/compat/manual-tst.client_compat.js","type":"ADDED","insertions":199,"deletions":0},{"file":"test/compat/setup.js","type":"ADDED","insertions":94,"deletions":0},{"file":"test/tst.allocator.js","type":"ADDED","insertions":117,"deletions":0},{"file":"test/tst.client_generic.js","type":"ADDED","insertions":856,"deletions":0},{"file":"test/tst.client_request.js","type":"ADDED","insertions":487,"deletions":0},{"file":"test/tst.protocol_decoder.js","type":"ADDED","insertions":561,"deletions":0},{"file":"test/tst.protocol_encoder.js","type":"ADDED","insertions":265,"deletions":0},{"file":"test/tst.server.js","type":"ADDED","insertions":799,"deletions":0},{"file":"test/tst.socket_summarize.js","type":"ADDED","insertions":169,"deletions":0},{"file":"tools/bashstyle","type":"ADDED","insertions":114,"deletions":0},{"file":"tools/jsl.node.conf","type":"ADDED","insertions":142,"deletions":0},{"file":"tools/perfrun","type":"ADDED","insertions":129,"deletions":0}],"sizeInsertions":10052,"sizeDeletions":-1},{"number":"6","revision":"35a89eeba56f557c3d018b6d2734f39a453c760c","parents":["912371e3428a335d44359bd85adcfc518e58f6e7"],"ref":"refs/changes/91/291/6","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1472492009,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1472492665,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1472162227,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1472492574,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1472162083,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"ADDED","insertions":2,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":".npmignore","type":"ADDED","insertions":5,"deletions":0},{"file":"CHANGES.md","type":"ADDED","insertions":51,"deletions":0},{"file":"CONTRIBUTING.md","type":"ADDED","insertions":96,"deletions":0},{"file":"LICENSE","type":"ADDED","insertions":20,"deletions":0},{"file":"Makefile","type":"ADDED","insertions":50,"deletions":0},{"file":"Makefile.targ","type":"ADDED","insertions":317,"deletions":0},{"file":"README","type":"DELETED","insertions":0,"deletions":-1},{"file":"README.md","type":"ADDED","insertions":424,"deletions":0},{"file":"bin/fastbench","type":"ADDED","insertions":494,"deletions":0},{"file":"bin/fastcall","type":"ADDED","insertions":150,"deletions":0},{"file":"bin/fastclatency","type":"ADDED","insertions":40,"deletions":0},{"file":"bin/fastclatencytime","type":"ADDED","insertions":40,"deletions":0},{"file":"bin/fastcsnoop","type":"ADDED","insertions":54,"deletions":0},{"file":"bin/fastserve","type":"ADDED","insertions":124,"deletions":0},{"file":"bin/fastslatency","type":"ADDED","insertions":40,"deletions":0},{"file":"bin/fastssnoop","type":"ADDED","insertions":68,"deletions":0},{"file":"deps/catest","type":"ADDED","insertions":1,"deletions":0},{"file":"lib/bench.js","type":"ADDED","insertions":100,"deletions":0},{"file":"lib/demo_server.js","type":"ADDED","insertions":200,"deletions":0},{"file":"lib/fast.js","type":"ADDED","insertions":19,"deletions":0},{"file":"lib/fast_client.js","type":"ADDED","insertions":842,"deletions":0},{"file":"lib/fast_client_request.js","type":"ADDED","insertions":138,"deletions":0},{"file":"lib/fast_protocol.js","type":"ADDED","insertions":473,"deletions":0},{"file":"lib/fast_server.js","type":"ADDED","insertions":1298,"deletions":0},{"file":"lib/subr.js","type":"ADDED","insertions":134,"deletions":0},{"file":"package.json","type":"ADDED","insertions":32,"deletions":0},{"file":"test/common.js","type":"ADDED","insertions":315,"deletions":0},{"file":"test/common/client.js","type":"ADDED","insertions":220,"deletions":0},{"file":"test/compat/Makefile.compat.defs","type":"ADDED","insertions":9,"deletions":0},{"file":"test/compat/Makefile.compat.targ","type":"ADDED","insertions":19,"deletions":0},{"file":"test/compat/common.js","type":"ADDED","insertions":167,"deletions":0},{"file":"test/compat/legacy-server.js","type":"ADDED","insertions":175,"deletions":0},{"file":"test/compat/manual-tst.client_compat.js","type":"ADDED","insertions":199,"deletions":0},{"file":"test/compat/setup.js","type":"ADDED","insertions":94,"deletions":0},{"file":"test/tst.allocator.js","type":"ADDED","insertions":117,"deletions":0},{"file":"test/tst.client_generic.js","type":"ADDED","insertions":856,"deletions":0},{"file":"test/tst.client_request.js","type":"ADDED","insertions":487,"deletions":0},{"file":"test/tst.protocol_decoder.js","type":"ADDED","insertions":561,"deletions":0},{"file":"test/tst.protocol_encoder.js","type":"ADDED","insertions":265,"deletions":0},{"file":"test/tst.server.js","type":"ADDED","insertions":799,"deletions":0},{"file":"test/tst.socket_summarize.js","type":"ADDED","insertions":169,"deletions":0},{"file":"tools/bashstyle","type":"ADDED","insertions":114,"deletions":0},{"file":"tools/jsl.node.conf","type":"ADDED","insertions":142,"deletions":0},{"file":"tools/perfrun","type":"ADDED","insertions":129,"deletions":0}],"sizeInsertions":10052,"sizeDeletions":-1}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}]}