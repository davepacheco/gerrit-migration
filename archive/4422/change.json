{"project":"joyent/sdc-cn-agent","branch":"master","id":"I2720cce07316f1e69c15e1e22b87068dadb16808","number":"4422","subject":"TRITON-542 cn-agent should close connection after posting sysinfo Reviewed by: Orlando Vazquez \u003corlando@joyent.com\u003e Approved by: Orlando Vazquez \u003corlando@joyent.com\u003e","owner":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"url":"https://cr.joyent.us/4422","commitMessage":"TRITON-542 cn-agent should close connection after posting sysinfo\nReviewed by: Orlando Vazquez \u003corlando@joyent.com\u003e\nApproved by: Orlando Vazquez \u003corlando@joyent.com\u003e\n","createdOn":1529869625,"lastUpdated":1533852016,"open":false,"status":"MERGED","comments":[{"timestamp":1529869625,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 1."},{"timestamp":1529869626,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 20d8f9891d48cbb92c8611bff5bc287fe2b73ef9\n    \n    close connection after posting sysinfo"},{"timestamp":1529869656,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1529881737,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 2."},{"timestamp":1529881738,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 1c87e3886e089c5638f8c21577e21d8dde5d54ce\n    \n    switch to a queue-based approach so that we *always* only have 1 connection open"},{"timestamp":1529881768,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1529883552,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 3."},{"timestamp":1529883554,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 0f7ce744c1399225227ee2c9a8a9e1a2a613b3d2\n    \n    use cueball so we also handle multiple CNAPIs"},{"timestamp":1529883582,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1529883717,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 4."},{"timestamp":1529883718,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit a3ef04b2c28d335760c2ac0f43922840319c98f0\n    \n    add logger for cueball"},{"timestamp":1529883751,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1529884032,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 5."},{"timestamp":1529884033,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit 95ea73a719262a0efc3389be1ace18772f8cb828\n    \n    return previous ordering, agents should come before heartbeats"},{"timestamp":1529884060,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1529885397,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 6."},{"timestamp":1529885398,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit 85c72d0a2adbc93bb0312559b60df6b4e5139bdf\n    \n    repair URL override"},{"timestamp":1529885428,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1529886843,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 7."},{"timestamp":1529886844,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 7:\n\nNew commits:\n    \n    commit ba97a9e6cf6bb8195aeb93f7d8c5f341f9ccec1d\n    \n    have to remove the server validation to support multiple CNAPIs"},{"timestamp":1529886872,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1529907868,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 8."},{"timestamp":1529907869,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 8:\n\nNew commits:\n    \n    commit 1cac4876efefb2547b3e1e8de0f9f6bfcd66f308\n    \n    set initialDomains and resolvers"},{"timestamp":1529907898,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1530030117,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 8:\n\n(2 comments)"},{"timestamp":1530122885,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 9."},{"timestamp":1530122902,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 9:\n\nNew commits:\n    \n    commit b75da29db5e5915572ccc4a8859ce99fdb58b388\n    \n    move all but the cnapiClient assert to the constructor (that one is created later) to address CR feedback"},{"timestamp":1530122912,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing-1\n\n(5 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1530208199,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 10."},{"timestamp":1530208213,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 10:\n\nNew commits:\n    \n    commit a7596249052309758bb561fdad274ded0e5a522d\n    \n    no self here. :("},{"timestamp":1530208230,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1530262895,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 10: Code-Review+1 Integration-Approval+1"},{"timestamp":1531175984,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 10:\n\nThe reason I haven\u0027t pushed this, is that I\u0027m rethinking the cueball portion of the change. I may end up moving that to a different ticket as currently things behave much better with agent: false."},{"timestamp":1533170248,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 11."},{"timestamp":1533170249,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 11:\n\nNew commits:\n    \n    commit 5fb03b3305e1c2537614c8c9e50a4e8456dfac26\n    \n    deferred cueball to TRITON-657"},{"timestamp":1533170274,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1533170365,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 12."},{"timestamp":1533170366,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 12:\n\nNew commits:\n    \n    commit 959006011cf347682cf991ee2a3fd51c93e85ee7\n    \n    deferred cueball to TRITON-657\n    \n    commit 069c1bf57d8074f4a2f99af77840a199d81e949f\n    \n    no self here. :(\n    \n    commit a444cb71c4e218b12c5c18efed5c3e414cc2a05e\n    \n    move all but the cnapiClient assert to the constructor (that one is created later) to address CR feedback\n    \n    commit c5d21a503e619398a9bdbd8d4da3e50f9432c3e5\n    \n    set initialDomains and resolvers\n    \n    commit e5d96824c72cb2ee5b6d2a41410ada4da38037a3\n    \n    have to remove the server validation to support multiple CNAPIs\n    \n    commit 4c9e9d2dabf0d20ef3a5b38c93a21994bd83b2d3\n    \n    repair URL override\n    \n    commit b35e88b55fd3d26d0e0aabe1a9d2bd9ddc5b700c\n    \n    return previous ordering, agents should come before heartbeats\n    \n    commit 18e6bbb1dd4e2f1f5e9ffedf72345a57e5d4fda5\n    \n    add logger for cueball\n    \n    commit f18b84a7ab7fcf49d73bdc7ab339ea7838b15db3\n    \n    use cueball so we also handle multiple CNAPIs\n    \n    commit 37786298097c8b73ca13782f3eca4af1927aa58a\n    \n    switch to a queue-based approach so that we *always* only have 1 connection open\n    \n    commit d80ffd226871063ea2a9b82bcbeb7431b9332e8d\n    \n    close connection after posting sysinfo"},{"timestamp":1533170393,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 12: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1533170555,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 13."},{"timestamp":1533170556,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 13:\n\nNew commits:\n    \n    commit f27868e27282f4365d0bcba9711c3fd5231278c9\n    \n    this isn\u0027t used any more"},{"timestamp":1533170582,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 13: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1533170726,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 14."},{"timestamp":1533170728,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 14:\n\nNew commits:\n    \n    commit 1a299453dce8907bbe26c4bd15a2fcb745d4f72c\n    \n    be slightly more consistent with naming"},{"timestamp":1533170755,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 14: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1533252281,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 15."},{"timestamp":1533252282,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 15:\n\nNew commits:\n    \n    commit 17e2f761101e1276704099d552f4113d0c85952d\n    \n    include cueball module even though we don\u0027t use it, so that hotpatching for testing is easier"},{"timestamp":1533252310,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 15: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1533252837,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 16: Patch Set 15 was rebased."},{"timestamp":1533252838,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 16:\n\nNew commits:\n    \n    commit 3cd261916d8d62a6cc8d130ec0080cd227c9727e\n    \n    include cueball module even though we don\u0027t use it, so that hotpatching for testing is easier\n    \n    commit a226b823ac735201824246946aeb83fefc5f2760\n    \n    be slightly more consistent with naming\n    \n    commit 1d7a7034acfc6f20aea90f09f900e118ee70efd9\n    \n    this isn\u0027t used any more\n    \n    commit d7420e59b5a237c3e22dba4cbc494f4b33472c21\n    \n    deferred cueball to TRITON-657\n    \n    commit 60cd7f0a270c859a406ce7120b2e739db6b42fdc\n    \n    no self here. :(\n    \n    commit 7b6a9a72c0480b400ff5c5fc919c724761fbc4dc\n    \n    move all but the cnapiClient assert to the constructor (that one is created later) to address CR feedback\n    \n    commit 16f1f4912bdd38de0afe7d859d5c10ecdd308e00\n    \n    set initialDomains and resolvers\n    \n    commit 6795a7a88a098b5721289677377b2f006ea94020\n    \n    have to remove the server validation to support multiple CNAPIs\n    \n    commit 9c826ead740dc8b6c3df370ab2c03eecfae78eae\n    \n    repair URL override\n    \n    commit 1aecd8c587ae6e8a1f7e94aa3f77d4cf962c4f81\n    \n    return previous ordering, agents should come before heartbeats\n    \n    commit a714691d49569710e31a61e1f9ac3dc801bb8cd7\n    \n    add logger for cueball\n    \n    commit a0ceaeb0d5e476283536be072c9ac92e366e9e10\n    \n    use cueball so we also handle multiple CNAPIs\n    \n    commit 525fbf7572db6286e533170c0358bbaed24c939c\n    \n    switch to a queue-based approach so that we *always* only have 1 connection open\n    \n    commit 365361b51862ae4d7d5901fa738e643e84076599\n    \n    close connection after posting sysinfo"},{"timestamp":1533252871,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 16:\n\n\"make check\" passed ok"},{"timestamp":1533333617,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 17: Commit message was updated."},{"timestamp":1533340001,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 17: Code-Review+1 Integration-Approval+1\n\n(1 comment)"},{"timestamp":1533659135,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 18."},{"timestamp":1533659137,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 18:\n\nNew commits:\n    \n    commit 2f13dcea4e26f3f1150ef0bb72148385c7334912\n    \n    address nit"},{"timestamp":1533659163,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 17:\n\n(1 comment)"},{"timestamp":1533659165,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 18: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1533687276,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 18: Code-Review+1 Integration-Approval+1"},{"timestamp":1533852016,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Josh Wilsdon"}],"currentPatchSet":{"number":"18","revision":"2720cce07316f1e69c15e1e22b87068dadb16808","parents":["b160d0428245fe4edb3e6e7d61ec01dfcc20c64c"],"ref":"refs/changes/22/4422/18","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1533659135,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1533659165,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1533687276,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1533687276,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"SUBM","value":"1","grantedOn":1533852016,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":156,"deletions":-143},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":1,"deletions":-11},{"file":"lib/server.js","type":"MODIFIED","insertions":0,"deletions":-19},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":158,"sizeDeletions":-173},"patchSets":[{"number":"1","revision":"02a4427b43718fa9c5ea844cc617dd1abb51b411","parents":["f3798e88d93004ed89e6fd6a8572d733b75096c2"],"ref":"refs/changes/22/4422/1","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1529869625,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1529869656,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":2,"sizeDeletions":-1},{"number":"2","revision":"3c831f85c6fbe4321e578fd5e417ba992edee2f4","parents":["f3798e88d93004ed89e6fd6a8572d733b75096c2"],"ref":"refs/changes/22/4422/2","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1529881737,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1529881768,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":153,"deletions":-66},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":1,"deletions":-11},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":155,"sizeDeletions":-78},{"number":"3","revision":"5fa45a92b6eecd5b1e830fe4a23cda9a707c158e","parents":["f3798e88d93004ed89e6fd6a8572d733b75096c2"],"ref":"refs/changes/22/4422/3","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1529883552,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1529883582,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":159,"deletions":-138},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":1,"deletions":-11},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":162,"sizeDeletions":-150},{"number":"4","revision":"cbb182ee71a1d212c3bcda2e2e50457b958c35a8","parents":["f3798e88d93004ed89e6fd6a8572d733b75096c2"],"ref":"refs/changes/22/4422/4","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1529883717,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1529883751,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":160,"deletions":-138},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":1,"deletions":-11},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":163,"sizeDeletions":-150},{"number":"5","revision":"2b944345dfd3ce2ddcbb653a51b790fc0f78c727","parents":["f3798e88d93004ed89e6fd6a8572d733b75096c2"],"ref":"refs/changes/22/4422/5","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1529884032,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1529884060,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":160,"deletions":-138},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":1,"deletions":-11},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":163,"sizeDeletions":-150},{"number":"6","revision":"00f9e845278f404a2a2c1116a78baf63d16849fc","parents":["f3798e88d93004ed89e6fd6a8572d733b75096c2"],"ref":"refs/changes/22/4422/6","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1529885397,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1529885428,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":165,"deletions":-140},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":1,"deletions":-11},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":168,"sizeDeletions":-152},{"number":"7","revision":"fbd1ff8e010ba58db8061869ff7b192f8a033656","parents":["f3798e88d93004ed89e6fd6a8572d733b75096c2"],"ref":"refs/changes/22/4422/7","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1529886843,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1529886872,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":165,"deletions":-140},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":1,"deletions":-11},{"file":"lib/server.js","type":"MODIFIED","insertions":0,"deletions":-19},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":168,"sizeDeletions":-171},{"number":"8","revision":"425db2f48bf8e971fb81affcff332b84b05d0d8b","parents":["f3798e88d93004ed89e6fd6a8572d733b75096c2"],"ref":"refs/changes/22/4422/8","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1529907868,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1529907898,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/app.js","line":107,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"If these values are unlikely to change, maybe it might be better to assert these in the App constructor?"},{"file":"lib/app.js","line":157,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Assert in constructor"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":170,"deletions":-141},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":1,"deletions":-11},{"file":"lib/server.js","type":"MODIFIED","insertions":0,"deletions":-19},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":173,"sizeDeletions":-172},{"number":"9","revision":"51d4cafa2178806de0f946e90313b098f68b088f","parents":["f3798e88d93004ed89e6fd6a8572d733b75096c2"],"ref":"refs/changes/22/4422/9","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1530122885,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1530122912,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/app.js","line":88,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: undeclared identifier: self"},{"file":"lib/app.js","line":89,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: undeclared identifier: self"},{"file":"lib/app.js","line":90,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: undeclared identifier: self"},{"file":"lib/app.js","line":91,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: undeclared identifier: self"},{"file":"lib/app.js","line":93,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: undeclared identifier: self"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":173,"deletions":-143},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":1,"deletions":-11},{"file":"lib/server.js","type":"MODIFIED","insertions":0,"deletions":-19},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":176,"sizeDeletions":-174},{"number":"10","revision":"ad276488504318e261b6a91aa41985877a2e32d0","parents":["f3798e88d93004ed89e6fd6a8572d733b75096c2"],"ref":"refs/changes/22/4422/10","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1530208199,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1530208230,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1530262895,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1530262895,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":173,"deletions":-143},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":1,"deletions":-11},{"file":"lib/server.js","type":"MODIFIED","insertions":0,"deletions":-19},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":176,"sizeDeletions":-174},{"number":"11","revision":"d3998d67b6b0a26db7f8e550ac13521088ab8c2c","parents":["f3798e88d93004ed89e6fd6a8572d733b75096c2"],"ref":"refs/changes/22/4422/11","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1533170248,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1533170274,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/app.js","line":114,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: variable is declared but never referenced: resolversAddrs"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":158,"deletions":-143},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":1,"deletions":-11},{"file":"lib/server.js","type":"MODIFIED","insertions":0,"deletions":-19},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":160,"sizeDeletions":-174},{"number":"12","revision":"6966d63fa8e1b60335184d5585596e85dd7bf258","parents":["c6ebdda20e4f2426569b6dc47ae9c309ad638937"],"ref":"refs/changes/22/4422/12","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1533170365,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1533170393,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/app.js","line":114,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: variable is declared but never referenced: resolversAddrs"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":158,"deletions":-143},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":1,"deletions":-11},{"file":"lib/server.js","type":"MODIFIED","insertions":0,"deletions":-19}],"sizeInsertions":159,"sizeDeletions":-173},{"number":"13","revision":"2ef4e53cc90d9ee8713b3861cdef4471baae05ef","parents":["c6ebdda20e4f2426569b6dc47ae9c309ad638937"],"ref":"refs/changes/22/4422/13","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1533170555,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1533170582,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":156,"deletions":-143},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":1,"deletions":-11},{"file":"lib/server.js","type":"MODIFIED","insertions":0,"deletions":-19}],"sizeInsertions":157,"sizeDeletions":-173},{"number":"14","revision":"6b592543bc3b737f673172b0068741c98326c122","parents":["c6ebdda20e4f2426569b6dc47ae9c309ad638937"],"ref":"refs/changes/22/4422/14","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1533170726,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1533170755,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":156,"deletions":-143},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":1,"deletions":-11},{"file":"lib/server.js","type":"MODIFIED","insertions":0,"deletions":-19}],"sizeInsertions":157,"sizeDeletions":-173},{"number":"15","revision":"4c0d0e674d3747803add812f94642825ef0c9bb5","parents":["c6ebdda20e4f2426569b6dc47ae9c309ad638937"],"ref":"refs/changes/22/4422/15","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1533252281,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1533252310,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":156,"deletions":-143},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":1,"deletions":-11},{"file":"lib/server.js","type":"MODIFIED","insertions":0,"deletions":-19},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":158,"sizeDeletions":-173},{"number":"16","revision":"39d4070fcc8a540fc4e998fcb88d5c1130f50c3f","parents":["b160d0428245fe4edb3e6e7d61ec01dfcc20c64c"],"ref":"refs/changes/22/4422/16","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1533252837,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1533252310,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":156,"deletions":-143},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":1,"deletions":-11},{"file":"lib/server.js","type":"MODIFIED","insertions":0,"deletions":-19},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":158,"sizeDeletions":-173},{"number":"17","revision":"2d59e2f3e6311b41b893c932dfba7df95fc6f3c1","parents":["b160d0428245fe4edb3e6e7d61ec01dfcc20c64c"],"ref":"refs/changes/22/4422/17","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1533333617,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1533252310,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1533340001,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1533340001,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"comments":[{"file":"lib/app.js","line":31,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Tiny nit but maybe period, or interval may fit better here"},{"file":"lib/app.js","line":31,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":156,"deletions":-143},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":1,"deletions":-11},{"file":"lib/server.js","type":"MODIFIED","insertions":0,"deletions":-19},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":158,"sizeDeletions":-173},{"number":"18","revision":"2720cce07316f1e69c15e1e22b87068dadb16808","parents":["b160d0428245fe4edb3e6e7d61ec01dfcc20c64c"],"ref":"refs/changes/22/4422/18","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1533659135,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1533659165,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1533852016,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1533687276,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1533687276,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":156,"deletions":-143},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":1,"deletions":-11},{"file":"lib/server.js","type":"MODIFIED","insertions":0,"deletions":-19},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":158,"sizeDeletions":-173}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}]}