{"project":"joyent/triton","branch":"master","id":"I7f69cb5b50997545e46bf2c147a114bd89382bfa","number":"1752","subject":"TOOLS-1653 triton development guide should describe where to find ./tools/setup-remote-build-zone.sh TOOLS-1747 Triton development guide shouldn\u0027t use sdc-* command in examples","owner":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"url":"https://cr.joyent.us/1752","commitMessage":"TOOLS-1653 triton development guide should describe where to find ./tools/setup-remote-build-zone.sh\nTOOLS-1747 Triton development guide shouldn\u0027t use sdc-* command in examples\n","createdOn":1491422885,"lastUpdated":1548258145,"open":false,"status":"ABANDONED","comments":[{"timestamp":1491422885,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 1."},{"timestamp":1491422887,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1491424528,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\n(14 comments)"},{"timestamp":1491427430,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 1:\n\n(3 comments)"},{"timestamp":1491427614,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\n(3 comments)"},{"timestamp":1491433380,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 1:\n\n(3 comments)"},{"timestamp":1491582164,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 2."},{"timestamp":1491582166,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1491586868,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(2 comments)\n\nObviously things aren\u0027t complete here, but the doc updates are definitely improvements. Let me know when you think this is in a state that is self-consistent enough to merge."},{"timestamp":1492095944,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 3."},{"timestamp":1492095946,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1548258145,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Abandoned"}],"currentPatchSet":{"number":"3","revision":"7f69cb5b50997545e46bf2c147a114bd89382bfa","parents":["d0a55032b3b71b5224112ab3b75ec72d2bfb1936"],"ref":"refs/changes/52/1752/3","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1492095944,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1492095946,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"docs/developer-guide/building.md","type":"MODIFIED","insertions":210,"deletions":-123}],"sizeInsertions":210,"sizeDeletions":-123},"patchSets":[{"number":"1","revision":"c09eae11ddeb5848dddf6219f8f7551c2611a57e","parents":["d0a55032b3b71b5224112ab3b75ec72d2bfb1936"],"ref":"refs/changes/52/1752/1","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1491422885,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1491422887,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"docs/developer-guide/building.md","line":9,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Could update that to \"triton\" now. The repo redirects on GitHub."},{"file":"docs/developer-guide/building.md","line":44,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"The authority file is the \"image_uuid\" value for each component listed in https://github.com/joyent/mountain-gorilla/blob/master/targets.json.in\nAm I misunderstanding you? We *could* just link to that file directly here."},{"file":"docs/developer-guide/building.md","line":44,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"The scripts use targets.json as their input, and filter it for you (targets-1.6.3.sh does has.a bit of additonal logic as well) -- I thought that might be easier/simpler than digging through targets.json, but I can update that."},{"file":"docs/developer-guide/building.md","line":44,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Either way is fine. I just wasn\u0027t aware of those scripts."},{"file":"docs/developer-guide/building.md","line":49,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Add \"(TPC)\" here as the definitely of that acronym that is used later in the doc."},{"file":"docs/developer-guide/building.md","line":49,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Also, it\u0027s not true that you can currently build all the components in TPC (using the designated images in target.json) due to current image versions (AFAIK).  One can always override the versions for an individual target, probably should just be more explicit (at least until things are updated)"},{"file":"docs/developer-guide/building.md","line":51,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"\"Triton\""},{"file":"docs/developer-guide/building.md","line":51,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"It sounds like both Smart DataCenter and SDC are now being replaced with just \"Triton\", so I\u0027ll go through and try to make that more consistent as well."},{"file":"docs/developer-guide/building.md","line":51,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"old:\n- SmartDataCenter\n- SDC for short\n\nnew:\n- Triton DataCenter\n- \"Triton\" for short, if it isn\u0027t confusing with other Triton-branded things"},{"file":"docs/developer-guide/building.md","line":113,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"If we are switching over to node-triton, we\u0027ll want to update this as well."},{"file":"docs/developer-guide/building.md","line":113,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"So TRITON_TLS_INSECURE\u003d1 (I think)?"},{"file":"docs/developer-guide/building.md","line":113,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Yes."},{"file":"docs/developer-guide/building.md","line":119,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Ditto for this, if updating to node-triton."},{"file":"docs/developer-guide/building.md","line":213,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I think there is a \"-lts\" at the end of that image name."},{"file":"docs/developer-guide/building.md","line":234,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I think we can drop this whole section. Given that we\u0027ll be using `triton create ...`, we can use package and image *names* for that call.\n\nPerhaps replace it with a section or note just for COAL users: That they can run `sdcadm post-setup dev-sample-data` to create a number of packages for use, e.g. a \"sample-4G\" package.\n\nFrankly though, I think the instructions for building here would be clearer if there were separate instructions for (a) doing it against TPC and (b) doing it fully in COAL. The former requires one to use the images with*out* the \"sdc-\" prefix. The latter requires more manual setup."},{"file":"docs/developer-guide/building.md","line":234,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Seems reasonable.  I\u0027ll see what I can come up with and include it w/ the other tweaks of the other comments."},{"file":"docs/developer-guide/building.md","line":271,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Perhaps change this to, if wanting a COAL example:\n\n  triton instance create --name build-1.6.3 -w sdc-smartos@1.6.3 sample-4G\n\nof this for a TPC example:\n\n... You can\u0027t for the smartos@1.6.3 image because that isn\u0027t available for public use anymore. Better to re-cast this dev doc example to use one of the more modern ones that use, say, the @15.4.1 images."},{"file":"docs/developer-guide/building.md","line":271,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Perhaps include an explanation (maybe add it more towards the beginning instead of here) that components still using 1.6.3 can\u0027t be built with their specified images on TPC?  We could point to how to override the image version in those instances (and update the example)."},{"file":"docs/developer-guide/building.md","line":271,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Sure. Also we should update those components to use the more modern image. :)"},{"file":"docs/developer-guide/building.md","line":276,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Then using the `triton ...` commands above, this can be simplified a lot."},{"file":"docs/developer-guide/building.md","line":282,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"These can use the inst name now: `triton inst get buil-1.6.3`."},{"file":"docs/developer-guide/building.md","line":296,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"That IP can be retrieved via: `triton ip build-1.6.3`."},{"file":"docs/developer-guide/building.md","line":311,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Ditto on simplification notes from above."},{"file":"docs/developer-guide/building.md","line":390,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Leading \"/\" on the manta path."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"docs/developer-guide/building.md","type":"MODIFIED","insertions":101,"deletions":-41}],"sizeInsertions":101,"sizeDeletions":-41},{"number":"2","revision":"377cf11d472a4f9cab1d0037b50c4a31d0cbc15e","parents":["d0a55032b3b71b5224112ab3b75ec72d2bfb1936"],"ref":"refs/changes/52/1752/2","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1491582164,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1491582166,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"docs/developer-guide/building.md","line":100,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"If we are switching to node-triton we could either use \"TRITON_\" envvars or show setting up a `triton` profile and setting it as current. If the user as a triton profile other than \"env\" set as the current one, then the envvars won\u0027t be used."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"docs/developer-guide/building.md","type":"MODIFIED","insertions":132,"deletions":-106}],"sizeInsertions":132,"sizeDeletions":-106},{"number":"3","revision":"7f69cb5b50997545e46bf2c147a114bd89382bfa","parents":["d0a55032b3b71b5224112ab3b75ec72d2bfb1936"],"ref":"refs/changes/52/1752/3","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1492095944,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1492095946,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"docs/developer-guide/building.md","type":"MODIFIED","insertions":210,"deletions":-123}],"sizeInsertions":210,"sizeDeletions":-123}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}]}