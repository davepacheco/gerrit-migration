{"project":"joyent/sdcadm","branch":"master","id":"I9113500d9cfe5a1238e68ba66aee45ee190dd009","number":"5592","subject":"TRITON-1199 sdcadm failures when running test suite after triton-mockcloud is installed Reviewed by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e Approved by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/5592","commitMessage":"TRITON-1199 sdcadm failures when running test suite after triton-mockcloud is installed\nReviewed by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e\nApproved by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e\n","createdOn":1550244920,"lastUpdated":1550848989,"open":false,"status":"MERGED","comments":[{"timestamp":1550244920,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1550244925,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 93af9d4e9ae80ae7b7fc083030031ee2311702ae\n    \n    TRITON-1199 sdcadm failures when running test suite after triton-mockcloud is installed"},{"timestamp":1550244954,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1550603880,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 1: Code-Review+1 Integration-Approval+1\n\n(2 comments)\n\nThere are a whole bunch of extra stuff in here unrelated to the ticket. :o"},{"timestamp":1550751177,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2."},{"timestamp":1550751182,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 5aef3d05779bef67ecae5f6bea037aa382f93832\n    \n    TRITON-1199 sdcadm failures when running test suite after triton-mockcloud is installed"},{"timestamp":1550751213,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1550751271,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 3."},{"timestamp":1550751275,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 69737b9e737ae9901d0b22266d9795ceeb0defe9\n    \n    TRITON-1199 sdcadm failures when running test suite after triton-mockcloud is installed"},{"timestamp":1550751343,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\n(2 comments)\n\n\u003e (2 comments)\n \u003e \n \u003e There are a whole bunch of extra stuff in here unrelated to the\n \u003e ticket. :o\n\nYeah, which was making some other tests to do not pass too :-) It\u0027s the good and bad thing to look at fixing tests. Hopefully I\u0027ll figure out how to run this test suite faster and run it more frequently!"},{"timestamp":1550751345,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1550752962,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 3: Code-Review+1\n\n(1 comment)"},{"timestamp":1550764982,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1550765138,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\n(1 comment)\n\nSteps use to automatically load a set of files under that directory, scoping the functions by file name."},{"timestamp":1550767554,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 4: Integration-Approval+1"},{"timestamp":1550779883,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1550848989,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"5","revision":"9113500d9cfe5a1238e68ba66aee45ee190dd009","parents":["51b61bf7ca16ce0dbd1b04a87908d30f7e72b83b"],"ref":"refs/changes/92/5592/5","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1550779883,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550751345,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550752962,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1550767554,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"SUBM","value":"1","grantedOn":1550848989,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/cli/do_fix_core_vm_resolvers.js","type":"MODIFIED","insertions":34,"deletions":-28},{"file":"lib/cli/do_update_agents.js","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/steps/binder.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/common.js","type":"MODIFIED","insertions":1,"deletions":-12},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/instances.test.js","type":"MODIFIED","insertions":8,"deletions":-7},{"file":"test/manatee.test.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/platform.test.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"test/post-setup-ha-binder.test.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"test/post-setup.test.js","type":"MODIFIED","insertions":1,"deletions":-35},{"file":"test/rollback.test.js","type":"MODIFIED","insertions":0,"deletions":-6},{"file":"test/services.test.js","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"test/shared.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":86,"sizeDeletions":-114},"patchSets":[{"number":"1","revision":"c1f3240658f9d1c96808d3d9c3efa31c518715fb","parents":["6ea926065eaf4914203daa09a5945c9aefb06be5"],"ref":"refs/changes/92/5592/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1550244920,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550244954,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550603880,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1550603880,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"comments":[{"file":"lib/cli/do_fix_core_vm_resolvers.js","line":41,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name this"},{"file":"lib/cli/do_fix_core_vm_resolvers.js","line":41,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cli/do_fix_core_vm_resolvers.js","line":47,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"There\u0027s enough going on here to name this too."},{"file":"lib/cli/do_fix_core_vm_resolvers.js","line":47,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/cli/do_fix_core_vm_resolvers.js","type":"MODIFIED","insertions":34,"deletions":-28},{"file":"lib/cli/do_update_agents.js","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/steps/binder.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/common.js","type":"MODIFIED","insertions":1,"deletions":-12},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/instances.test.js","type":"MODIFIED","insertions":8,"deletions":-7},{"file":"test/manatee.test.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/platform.test.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"test/post-setup-ha-binder.test.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"test/post-setup.test.js","type":"MODIFIED","insertions":1,"deletions":-35},{"file":"test/rollback.test.js","type":"MODIFIED","insertions":0,"deletions":-6},{"file":"test/services.test.js","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"test/shared.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":85,"sizeDeletions":-113},{"number":"2","revision":"6774492bee06f7cea22f5e6c67f6a899ec4a7fe1","parents":["51b61bf7ca16ce0dbd1b04a87908d30f7e72b83b"],"ref":"refs/changes/92/5592/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1550751177,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550751213,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/cli/do_fix_core_vm_resolvers.js","type":"MODIFIED","insertions":34,"deletions":-28},{"file":"lib/cli/do_update_agents.js","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/steps/binder.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/common.js","type":"MODIFIED","insertions":1,"deletions":-12},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/instances.test.js","type":"MODIFIED","insertions":8,"deletions":-7},{"file":"test/manatee.test.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/platform.test.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"test/post-setup-ha-binder.test.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"test/post-setup.test.js","type":"MODIFIED","insertions":1,"deletions":-35},{"file":"test/rollback.test.js","type":"MODIFIED","insertions":0,"deletions":-6},{"file":"test/services.test.js","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"test/shared.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":86,"sizeDeletions":-114},{"number":"3","revision":"65ac8fabf691ea8d6c7083ff01a98f2498366f2d","parents":["51b61bf7ca16ce0dbd1b04a87908d30f7e72b83b"],"ref":"refs/changes/92/5592/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1550751271,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550751345,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550752962,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"comments":[{"file":"lib/cli/do_update_gz_tools.js","line":500,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Where is selectServers() defined?"},{"file":"lib/cli/do_update_gz_tools.js","line":500,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Into steps/servers.js iirc"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/cli/do_fix_core_vm_resolvers.js","type":"MODIFIED","insertions":34,"deletions":-28},{"file":"lib/cli/do_update_agents.js","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/steps/binder.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/common.js","type":"MODIFIED","insertions":1,"deletions":-12},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/instances.test.js","type":"MODIFIED","insertions":8,"deletions":-7},{"file":"test/manatee.test.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/platform.test.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"test/post-setup-ha-binder.test.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"test/post-setup.test.js","type":"MODIFIED","insertions":1,"deletions":-35},{"file":"test/rollback.test.js","type":"MODIFIED","insertions":0,"deletions":-6},{"file":"test/services.test.js","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"test/shared.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":86,"sizeDeletions":-114},{"number":"4","revision":"e700dad757362e06d90eac631c101fd11de7c6b8","parents":["51b61bf7ca16ce0dbd1b04a87908d30f7e72b83b"],"ref":"refs/changes/92/5592/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1550764982,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550751345,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550752962,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1550767554,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/cli/do_fix_core_vm_resolvers.js","type":"MODIFIED","insertions":34,"deletions":-28},{"file":"lib/cli/do_update_agents.js","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/steps/binder.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/common.js","type":"MODIFIED","insertions":1,"deletions":-12},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/instances.test.js","type":"MODIFIED","insertions":8,"deletions":-7},{"file":"test/manatee.test.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/platform.test.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"test/post-setup-ha-binder.test.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"test/post-setup.test.js","type":"MODIFIED","insertions":1,"deletions":-35},{"file":"test/rollback.test.js","type":"MODIFIED","insertions":0,"deletions":-6},{"file":"test/services.test.js","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"test/shared.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":86,"sizeDeletions":-114},{"number":"5","revision":"9113500d9cfe5a1238e68ba66aee45ee190dd009","parents":["51b61bf7ca16ce0dbd1b04a87908d30f7e72b83b"],"ref":"refs/changes/92/5592/5","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1550779883,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550751345,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1550848989,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550752962,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1550767554,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/cli/do_fix_core_vm_resolvers.js","type":"MODIFIED","insertions":34,"deletions":-28},{"file":"lib/cli/do_update_agents.js","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/steps/binder.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/common.js","type":"MODIFIED","insertions":1,"deletions":-12},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/instances.test.js","type":"MODIFIED","insertions":8,"deletions":-7},{"file":"test/manatee.test.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/platform.test.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"test/post-setup-ha-binder.test.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"test/post-setup.test.js","type":"MODIFIED","insertions":1,"deletions":-35},{"file":"test/rollback.test.js","type":"MODIFIED","insertions":0,"deletions":-6},{"file":"test/services.test.js","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"test/shared.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":86,"sizeDeletions":-114}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}