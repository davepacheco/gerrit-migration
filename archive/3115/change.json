{"project":"joyent/sdc-manta","branch":"master","id":"Ie17f2f78985c3e88e1baf8b11b1e7158fd6b889e","number":"3115","subject":"MANTA-3476 read-only pnodes","owner":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"url":"https://cr.joyent.us/3115","commitMessage":"MANTA-3476 read-only pnodes\n","createdOn":1513370723,"lastUpdated":1570662101,"open":false,"status":"ABANDONED","comments":[{"timestamp":1513370723,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 1."},{"timestamp":1513370766,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1513802968,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 1:\n\n(3 comments)"},{"timestamp":1513817867,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 2."},{"timestamp":1513817910,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1514404471,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 2:\n\n(5 comments)"},{"timestamp":1514412574,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 3."},{"timestamp":1514412617,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1515012843,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 3: Code-Review+1\n\n(4 comments)"},{"timestamp":1515015586,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Patch Set 3:\n\n(2 comments)"},{"timestamp":1515021391,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 4."},{"timestamp":1515021435,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1515173547,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1570662101,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Abandoned\n\nNot relevant for manta v2"}],"currentPatchSet":{"number":"4","revision":"e17f2f78985c3e88e1baf8b11b1e7158fd6b889e","parents":["0635d02aa3323a23aa645a6b0d3e97efda8b7da3"],"ref":"refs/changes/15/3115/4","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1515021391,"author":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515021435,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515173547,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"cmd/manta-shardadm.js","type":"MODIFIED","insertions":132,"deletions":-77}],"sizeInsertions":132,"sizeDeletions":-77},"patchSets":[{"number":"1","revision":"f3dc11096cadd2e02edd96546364b3449249a222","parents":["0635d02aa3323a23aa645a6b0d3e97efda8b7da3"],"ref":"refs/changes/15/3115/1","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1513370723,"author":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1513370766,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"cmd/manta-shardadm.js","line":62,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Should we keep this printing to stdout? I\u0027m guessing this chunk of code was written so the implementor didn\u0027t have to write a Shardadm.do_version() function."},{"file":"cmd/manta-shardadm.js","line":83,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"The output from this command you posted in the jira ticket is a little hard to read. Is that just a jira-ism?"},{"file":"cmd/manta-shardadm.js","line":181,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"The CLI help section seems to insinuate that the -r and -w flags can be a list. Does this comparison work if the user provides a list of shards?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"cmd/manta-shardadm.js","type":"MODIFIED","insertions":129,"deletions":-74}],"sizeInsertions":129,"sizeDeletions":-74},{"number":"2","revision":"d206c79f56127f47dc9706f46bd94ffc572fa013","parents":["0635d02aa3323a23aa645a6b0d3e97efda8b7da3"],"ref":"refs/changes/15/3115/2","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1513817867,"author":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1513817910,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"cmd/manta-shardadm.js","line":30,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"If we\u0027re following semver I think this would be 1.1.0 unless we\u0027re making a change that isn\u0027t backwards compatible (I don\u0027t think we are)."},{"file":"cmd/manta-shardadm.js","line":181,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"do you want this ? or do you want to copy the content of app.metadata[...] ?"},{"file":"cmd/manta-shardadm.js","line":188,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"isn\u0027t this a no-op ? you are mutating via an object reference as you go, right ?"},{"file":"cmd/manta-shardadm.js","line":203,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"no-op here too ?"},{"file":"cmd/manta-shardadm.js","line":239,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"the \"(only index)\" part makes me think I maybe don\u0027t understand. is there a way to flesh this out; or maybe just delete the parenthetical?"},{"file":"cmd/manta-shardadm.js","line":243,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"same issue as above with the parenthetical."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"cmd/manta-shardadm.js","type":"MODIFIED","insertions":138,"deletions":-76}],"sizeInsertions":138,"sizeDeletions":-76},{"number":"3","revision":"a8ce4ded22d95d7937e7bdad198b4a5382ca0fa7","parents":["0635d02aa3323a23aa645a6b0d3e97efda8b7da3"],"ref":"refs/changes/15/3115/3","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1514412574,"author":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1514412617,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515012843,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"comments":[{"file":"cmd/manta-shardadm.js","line":30,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"If we decide to keep the version stuff around and assuming we\u0027re following \u0027semver,\u0027 I think this would be a single-dot release (1.1.0) since it doesn\u0027t include any backwards-incompatible changes."},{"file":"cmd/manta-shardadm.js","line":72,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Do we need a try/catch for this? I don\u0027t really know what exception this could throw. I just looked at the other code in this repo and I don\u0027t see any other program advertising a \u0027version\u0027 field. I think we could just nuke all of the version code here, unless it was in for a specific reason early in its life."},{"file":"cmd/manta-shardadm.js","line":72,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"That sounds right to me, about it being for a specific reason early in its life.  I also saw nothing else using the version field.  My instinct was to keep it for what I\u0027d guess was that reason it was initially included -- to make it easier to allow for version control in the future if backwards-incompatible changes were ever made.  I am not strongly attached to it, however, and can certainly remove it now since it\u0027s created confusion."},{"file":"cmd/manta-shardadm.js","line":180,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"So if I\u0027m reading this correctly this allows the user to specify lists as both comma-separated and comma-and-space-separated?"},{"file":"cmd/manta-shardadm.js","line":180,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Yes, that\u0027s correct -- and also space-separated (within quotes)."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"cmd/manta-shardadm.js","type":"MODIFIED","insertions":138,"deletions":-76}],"sizeInsertions":138,"sizeDeletions":-76},{"number":"4","revision":"e17f2f78985c3e88e1baf8b11b1e7158fd6b889e","parents":["0635d02aa3323a23aa645a6b0d3e97efda8b7da3"],"ref":"refs/changes/15/3115/4","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1515021391,"author":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515021435,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515173547,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"cmd/manta-shardadm.js","type":"MODIFIED","insertions":132,"deletions":-77}],"sizeInsertions":132,"sizeDeletions":-77}],"allReviewers":[{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}]}