{"project":"joyent/sdc-manta","branch":"master","topic":"MANTA-3624","id":"If8ccd2b77647c10de6c67572cbb0fb6694e73be0","number":"3807","subject":"MANTA-3624 create pgstatsmon image Reviewed by: David Pacheco \u003cdap@joyent.com\u003e Approved by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e","owner":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"url":"https://cr.joyent.us/3807","commitMessage":"MANTA-3624 create pgstatsmon image\nReviewed by: David Pacheco \u003cdap@joyent.com\u003e\nApproved by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e\n","createdOn":1523474817,"lastUpdated":1526051650,"open":false,"status":"MERGED","comments":[{"timestamp":1523474817,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 1."},{"timestamp":1523474864,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1523484187,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1: Code-Review+1\n\n(1 comment)"},{"timestamp":1523484294,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1523484364,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Topic set to MANTA-3624"},{"timestamp":1523893392,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 2."},{"timestamp":1523893439,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1524247562,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1524255986,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 1:\n\nI\u0027ve looked over the changes and the test plan and all looks good. I\u0027ve also been using the pgstatsmon image in a testing setup and it\u0027s been working without issue for the last week."},{"timestamp":1524256007,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1524259092,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1524259117,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 3:\n\nThanks for looking at this, dap and Kelly. I\u0027m going to wait to merge this until we get the first \u0027master\u0027 build of pgstatsmon in the wild. Due to MANTA-2796 \u0027manta-init\u0027 will fail since there isn\u0027t a \u0027master\u0027 build of pgstatsmon available."},{"timestamp":1524596441,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 4."},{"timestamp":1524596490,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1524645590,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1526051212,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 4: Integration-Approval+1"},{"timestamp":1526051563,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1526051650,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Kody A Kantor"}],"currentPatchSet":{"number":"5","revision":"f8ccd2b77647c10de6c67572cbb0fb6694e73be0","parents":["00c7b85b3e9e89ecd820cfde0f65a161870d4aae"],"ref":"refs/changes/07/3807/5","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1526051563,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1524596490,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1524645590,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1526051212,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"SUBM","value":"1","grantedOn":1526051650,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"config/services/pgstatsmon/service.json","type":"ADDED","insertions":14,"deletions":0},{"file":"docs/man/man1/manta-adm.md","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/layout.js","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"lib/services.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"man/man1/manta-adm.1","type":"MODIFIED","insertions":3,"deletions":0},{"file":"test/tst.layout.js.out","type":"MODIFIED","insertions":8,"deletions":0},{"file":"test/tst.services.js","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":41,"sizeDeletions":-5},"patchSets":[{"number":"1","revision":"f0eb5ad910d080976f358c0004a8fa43906e6ec0","parents":["00c7b85b3e9e89ecd820cfde0f65a161870d4aae"],"ref":"refs/changes/07/3807/1","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1523474817,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1523484187,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1523474864,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"config/services/pgstatsmon/service.json","line":4,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"This is mostly arbitrary. I don\u0027t have enough data with large environments to know how much memory this will eat up yet. Any suggestions for how to determine this outside of prod are welcome!"},{"file":"lib/services.js","line":78,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I think you might want to add some alarms for this, even if it\u0027s just to see that the service has gone into maintenance.  (I think that one will get added automatically if you make this \"true\".)"},{"file":"lib/services.js","line":78,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Oh, very nice. I wasn\u0027t aware of this."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"config/services/pgstatsmon/service.json","type":"ADDED","insertions":14,"deletions":0},{"file":"docs/man/man1/manta-adm.md","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/layout.js","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"lib/services.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"man/man1/manta-adm.1","type":"MODIFIED","insertions":3,"deletions":0},{"file":"test/tst.layout.js.out","type":"MODIFIED","insertions":8,"deletions":0},{"file":"test/tst.services.js","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":41,"sizeDeletions":-5},{"number":"2","revision":"ba03eaff0fe9de5417c351032d2f48c7100bea42","parents":["00c7b85b3e9e89ecd820cfde0f65a161870d4aae"],"ref":"refs/changes/07/3807/2","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1523893392,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1524247562,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1523893439,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1524256007,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"config/services/pgstatsmon/service.json","type":"ADDED","insertions":14,"deletions":0},{"file":"docs/man/man1/manta-adm.md","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/layout.js","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"lib/services.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"man/man1/manta-adm.1","type":"MODIFIED","insertions":3,"deletions":0},{"file":"test/tst.layout.js.out","type":"MODIFIED","insertions":8,"deletions":0},{"file":"test/tst.services.js","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":41,"sizeDeletions":-5},{"number":"3","revision":"e54ea84a2e6ef528e5bc2e8bf905ee6f976f4a6c","parents":["00c7b85b3e9e89ecd820cfde0f65a161870d4aae"],"ref":"refs/changes/07/3807/3","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1524259092,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1524247562,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1523893439,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1524256007,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"config/services/pgstatsmon/service.json","type":"ADDED","insertions":14,"deletions":0},{"file":"docs/man/man1/manta-adm.md","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/layout.js","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"lib/services.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"man/man1/manta-adm.1","type":"MODIFIED","insertions":3,"deletions":0},{"file":"test/tst.layout.js.out","type":"MODIFIED","insertions":8,"deletions":0},{"file":"test/tst.services.js","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":41,"sizeDeletions":-5},{"number":"4","revision":"bb8db64f339195e566e6fe3879cc93b4eb200b98","parents":["00c7b85b3e9e89ecd820cfde0f65a161870d4aae"],"ref":"refs/changes/07/3807/4","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1524596441,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1524645590,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1524596490,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1526051212,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"config/services/pgstatsmon/service.json","type":"ADDED","insertions":14,"deletions":0},{"file":"docs/man/man1/manta-adm.md","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/layout.js","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"lib/services.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"man/man1/manta-adm.1","type":"MODIFIED","insertions":3,"deletions":0},{"file":"test/tst.layout.js.out","type":"MODIFIED","insertions":8,"deletions":0},{"file":"test/tst.services.js","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":41,"sizeDeletions":-5},{"number":"5","revision":"f8ccd2b77647c10de6c67572cbb0fb6694e73be0","parents":["00c7b85b3e9e89ecd820cfde0f65a161870d4aae"],"ref":"refs/changes/07/3807/5","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1526051563,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1524645590,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1524596490,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1526051650,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1526051212,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"config/services/pgstatsmon/service.json","type":"ADDED","insertions":14,"deletions":0},{"file":"docs/man/man1/manta-adm.md","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/layout.js","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"lib/services.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"man/man1/manta-adm.1","type":"MODIFIED","insertions":3,"deletions":0},{"file":"test/tst.layout.js.out","type":"MODIFIED","insertions":8,"deletions":0},{"file":"test/tst.services.js","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":41,"sizeDeletions":-5}],"allReviewers":[{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}]}