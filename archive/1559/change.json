{"project":"joyent/illumos-joyent","branch":"master","id":"Ib3fbfcac0fdbd7ad4eddd58bfc56cdd667239548","number":"1559","subject":"OS-5723 ixgbe has uninitialized kstat fields Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Approved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e","owner":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"url":"https://cr.joyent.us/1559","commitMessage":"OS-5723 ixgbe has uninitialized kstat fields\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1487877344,"lastUpdated":1487981873,"open":false,"status":"MERGED","comments":[{"timestamp":1487877344,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Uploaded patch set 1."},{"timestamp":1487877365,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 1:\n\nI believe we meant to enable these stats a long time ago but the job was only half done.\n\nhttps://github.com/illumos/illumos-gate/commit/da14cebe459d3275048785f25bd869cb09b5307f\n\n\n     typedef struct ixgbe_stat {\n    -\n            kstat_named_t link_speed;       /* Link Speed */\n    -#ifdef IXGBE_DEBUG\n    +\n            kstat_named_t reset_count;      /* Reset Count */\n\n            kstat_named_t rx_frame_error;   /* Rx Error in Packet */\n    @@ -729,7 +762,11 @@ typedef struct ixgbe_stat {\n            kstat_named_t ptc511;   /* Packets Xmitted (255-511b) */\n            kstat_named_t ptc1023;  /* Packets Xmitted (512-1023b) */\n            kstat_named_t ptc1522;  /* Packets Xmitted (1024-1522b */\n    -#endif\n    +       kstat_named_t qprc[16]; /* Queue Packets Received Count */\n    +       kstat_named_t qptc[16]; /* Queue Packets Transmitted Count */\n    +       kstat_named_t qbrc[16]; /* Queue Bytes Received Count */\n    +       kstat_named_t qbtc[16]; /* Queue Bytes Transmitted Count */\n\n\nIn any case, there were two concerns raised re enabling these stats that I want to address\n\n1. Do any of these stats require reading a HW counter that might not be enabled?\n\nNo. All of these stats are simple counters -- incremented when certain conditions are met.\n\n2. Is there any performance impact?\n\n* rx_frame_error: No. This adds an increment to an existing conditional.\n* stat_cksum_error: Maybe. This adds a condition check and increment to the hot path. I think this check is worth it as it indicates HW checksum errors.\n\n\t\tif ((status_error \u0026 IXGBE_RXDADV_ERR_TCPE) ||\n\t\t    (status_error \u0026 IXGBE_RXDADV_ERR_IPE))\n\t\t\trx_ring-\u003estat_cksum_error++;\n\n* rx_exceed_pkt: No. This adds an increment to an existing conditional.\n* tx_overload: No. This adds an increment to an existing conditional.\n* tx_fail_no_tbd: No. This adds an increment to an existing conditional.\n* tx_fail_no_tcb: No. This adds an increment to an existing conditional.\n* tx_fail_dma_bind: No. This adds an increment to an existing conditional.\n* tx_reschedule: No. This adds an increment to an existing conditional."},{"timestamp":1487878059,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1487878235,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1487879354,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\nLooks good, modulo Robert\u0027s comments."},{"timestamp":1487885007,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Uploaded patch set 2."},{"timestamp":1487885527,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Uploaded patch set 3."},{"timestamp":1487885593,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1487885978,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1487889859,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3: Code-Review+1\n\nI would be fine with exposing those other two counters under a new ticket"},{"timestamp":1487916310,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 3:\n\nOkay, I will create a ticket and submit a separate CR for the other stats."},{"timestamp":1487961938,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1487967546,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3:\n\nI can approve this once you\u0027re done testing."},{"timestamp":1487981549,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 3:\n\nI tested this by making sure the new stats appear, here is before:\n\n    [root@3WGMXQ1 (nightly-1) ~]# kstat -p ixgbe:0:statistics:\n    ixgbe:0:statistics:class        net\n    ixgbe:0:statistics:crtime       113.924077753\n    ixgbe:0:statistics:good_octets_recvd    2841464954\n    ixgbe:0:statistics:good_octets_xmitd    302190050\n    ixgbe:0:statistics:good_pkts_recvd      2966795\n    ixgbe:0:statistics:good_pkts_xmitd      1662583\n    ixgbe:0:statistics:link_speed   10000\n    ixgbe:0:statistics:link_xoff_recvd      0\n    ixgbe:0:statistics:link_xoff_xmitd      0\n    ixgbe:0:statistics:link_xon_recvd       0\n    ixgbe:0:statistics:link_xon_xmitd       0\n    ixgbe:0:statistics:lro_pkt_count        0\n    ixgbe:0:statistics:mac_local_fault      0\n    ixgbe:0:statistics:mac_remote_fault     0\n    ixgbe:0:statistics:mac_short_packet_discard     0\n    ixgbe:0:statistics:missed_packets       0\n    ixgbe:0:statistics:pkts_recvd_(  64b)   42960\n    ixgbe:0:statistics:pkts_recvd_(  65- 127b)      900998\n    ixgbe:0:statistics:pkts_recvd_( 127- 255b)      101262\n    ixgbe:0:statistics:pkts_recvd_( 256- 511b)      73401\n    ixgbe:0:statistics:pkts_recvd_( 511-1023b)      38434\n    ixgbe:0:statistics:pkts_recvd_(1024-1522b)      1809741\n    ixgbe:0:statistics:pkts_xmitd_(  64b)   11081\n    ixgbe:0:statistics:pkts_xmitd_(  65- 127b)      1438944\n    ixgbe:0:statistics:pkts_xmitd_( 128- 255b)      54061\n    ixgbe:0:statistics:pkts_xmitd_( 255- 511b)      43453\n    ixgbe:0:statistics:pkts_xmitd_( 512-1023b)      12660\n    ixgbe:0:statistics:pkts_xmitd_(1024-1522b)      102384\n    ixgbe:0:statistics:queue_bytes_recvd [ 0]       2483490\n    ixgbe:0:statistics:queue_bytes_recvd [ 1]       196888\n    ixgbe:0:statistics:queue_bytes_recvd [ 2]       875428034\n    ixgbe:0:statistics:queue_bytes_recvd [ 3]       903400028\n    ixgbe:0:statistics:queue_bytes_recvd [ 4]       20065671\n    ixgbe:0:statistics:queue_bytes_recvd [ 5]       8851155\n    ixgbe:0:statistics:queue_bytes_recvd [ 6]       945193159\n    ixgbe:0:statistics:queue_bytes_recvd [ 7]       85844249\n    ixgbe:0:statistics:queue_bytes_recvd [ 8]       1788\n    ixgbe:0:statistics:queue_bytes_recvd [ 9]       492\n    ixgbe:0:statistics:queue_bytes_recvd [10]       0\n    ixgbe:0:statistics:queue_bytes_recvd [11]       0\n    ixgbe:0:statistics:queue_bytes_recvd [12]       0\n    ixgbe:0:statistics:queue_bytes_recvd [13]       0\n    ixgbe:0:statistics:queue_bytes_recvd [14]       0\n    ixgbe:0:statistics:queue_bytes_recvd [15]       0\n    ixgbe:0:statistics:queue_bytes_xmitd [ 0]       41773720\n    ixgbe:0:statistics:queue_bytes_xmitd [ 1]       26101869\n    ixgbe:0:statistics:queue_bytes_xmitd [ 2]       62902323\n    ixgbe:0:statistics:queue_bytes_xmitd [ 3]       44199517\n    ixgbe:0:statistics:queue_bytes_xmitd [ 4]       65038478\n    ixgbe:0:statistics:queue_bytes_xmitd [ 5]       25538970\n    ixgbe:0:statistics:queue_bytes_xmitd [ 6]       16091244\n    ixgbe:0:statistics:queue_bytes_xmitd [ 7]       20543929\n    ixgbe:0:statistics:queue_bytes_xmitd [ 8]       0\n    ixgbe:0:statistics:queue_bytes_xmitd [ 9]       0\n    ixgbe:0:statistics:queue_bytes_xmitd [10]       0\n    ixgbe:0:statistics:queue_bytes_xmitd [11]       0\n    ixgbe:0:statistics:queue_bytes_xmitd [12]       0\n    ixgbe:0:statistics:queue_bytes_xmitd [13]       0\n    ixgbe:0:statistics:queue_bytes_xmitd [14]       0\n    ixgbe:0:statistics:queue_bytes_xmitd [15]       0\n    ixgbe:0:statistics:queue_pkts_recvd [ 0]        39977\n    ixgbe:0:statistics:queue_pkts_recvd [ 1]        1856\n    ixgbe:0:statistics:queue_pkts_recvd [ 2]        952072\n    ixgbe:0:statistics:queue_pkts_recvd [ 3]        676377\n    ixgbe:0:statistics:queue_pkts_recvd [ 4]        229007\n    ixgbe:0:statistics:queue_pkts_recvd [ 5]        74057\n    ixgbe:0:statistics:queue_pkts_recvd [ 6]        886634\n    ixgbe:0:statistics:queue_pkts_recvd [ 7]        106790\n    ixgbe:0:statistics:queue_pkts_recvd [ 8]        20\n    ixgbe:0:statistics:queue_pkts_recvd [ 9]        5\n    ixgbe:0:statistics:queue_pkts_recvd [10]        0\n    ixgbe:0:statistics:queue_pkts_recvd [11]        0\n    ixgbe:0:statistics:queue_pkts_recvd [12]        0\n    ixgbe:0:statistics:queue_pkts_recvd [13]        0\n    ixgbe:0:statistics:queue_pkts_recvd [14]        0\n    ixgbe:0:statistics:queue_pkts_recvd [15]        0\n    ixgbe:0:statistics:queue_pkts_xmitd [ 0]        132557\n    ixgbe:0:statistics:queue_pkts_xmitd [ 1]        227925\n    ixgbe:0:statistics:queue_pkts_xmitd [ 2]        702213\n    ixgbe:0:statistics:queue_pkts_xmitd [ 3]        109374\n    ixgbe:0:statistics:queue_pkts_xmitd [ 4]        269921\n    ixgbe:0:statistics:queue_pkts_xmitd [ 5]        76103\n    ixgbe:0:statistics:queue_pkts_xmitd [ 6]        45523\n    ixgbe:0:statistics:queue_pkts_xmitd [ 7]        98967\n    ixgbe:0:statistics:queue_pkts_xmitd [ 8]        0\n    ixgbe:0:statistics:queue_pkts_xmitd [ 9]        0\n    ixgbe:0:statistics:queue_pkts_xmitd [10]        0\n    ixgbe:0:statistics:queue_pkts_xmitd [11]        0\n    ixgbe:0:statistics:queue_pkts_xmitd [12]        0\n    ixgbe:0:statistics:queue_pkts_xmitd [13]        0\n    ixgbe:0:statistics:queue_pkts_xmitd [14]        0\n    ixgbe:0:statistics:queue_pkts_xmitd [15]        0\n    ixgbe:0:statistics:recv_fragment        0\n    ixgbe:0:statistics:recv_jabber  1\n    ixgbe:0:statistics:recv_length_err      0\n    ixgbe:0:statistics:recv_no_buffer       0\n    ixgbe:0:statistics:recv_oversize        0\n    ixgbe:0:statistics:recv_undersize       0\n    ixgbe:0:statistics:reset_count  0\n    ixgbe:0:statistics:snaptime     55624.758412010\n\n\nHere is after (I highlighted the additional stats with ---)\n\n    [root@3WGMXQ1 (nightly-1) ~]# kstat -p ixgbe:0:statistics:\n    ixgbe:0:statistics:class        net\n    ixgbe:0:statistics:crtime       167.144503121\n    ixgbe:0:statistics:good_octets_recvd    20229364\n    ixgbe:0:statistics:good_octets_xmitd    338058\n    ixgbe:0:statistics:good_pkts_recvd      14823\n    ixgbe:0:statistics:good_pkts_xmitd      3146\n    ixgbe:0:statistics:link_speed   10000\n    ixgbe:0:statistics:link_xoff_recvd      0\n    ixgbe:0:statistics:link_xoff_xmitd      0\n    ixgbe:0:statistics:link_xon_recvd       0\n    ixgbe:0:statistics:link_xon_xmitd       0\n    ixgbe:0:statistics:lro_pkt_count        0\n    ixgbe:0:statistics:mac_local_fault      0\n    ixgbe:0:statistics:mac_remote_fault     0\n    ixgbe:0:statistics:mac_short_packet_discard     0\n    ixgbe:0:statistics:missed_packets       0\n    ixgbe:0:statistics:pkts_recvd_(  64b)   67\n    ixgbe:0:statistics:pkts_recvd_(  65- 127b)      1130\n    ixgbe:0:statistics:pkts_recvd_( 127- 255b)      60\n    ixgbe:0:statistics:pkts_recvd_( 256- 511b)      312\n    ixgbe:0:statistics:pkts_recvd_( 511-1023b)      72\n    ixgbe:0:statistics:pkts_recvd_(1024-1522b)      13183\n    ixgbe:0:statistics:pkts_xmitd_(  64b)   73\n    ixgbe:0:statistics:pkts_xmitd_(  65- 127b)      2849\n    ixgbe:0:statistics:pkts_xmitd_( 128- 255b)      78\n    ixgbe:0:statistics:pkts_xmitd_( 255- 511b)      65\n    ixgbe:0:statistics:pkts_xmitd_( 512-1023b)      30\n    ixgbe:0:statistics:pkts_xmitd_(1024-1522b)      51\n    ixgbe:0:statistics:queue_bytes_recvd [ 0]       3176\n    ixgbe:0:statistics:queue_bytes_recvd [ 1]       638\n    ixgbe:0:statistics:queue_bytes_recvd [ 2]       17770271\n    ixgbe:0:statistics:queue_bytes_recvd [ 3]       46643\n    ixgbe:0:statistics:queue_bytes_recvd [ 4]       20051\n    ixgbe:0:statistics:queue_bytes_recvd [ 5]       2347255\n    ixgbe:0:statistics:queue_bytes_recvd [ 6]       39363\n    ixgbe:0:statistics:queue_bytes_recvd [ 7]       1967\n    ixgbe:0:statistics:queue_bytes_recvd [ 8]       0\n    ixgbe:0:statistics:queue_bytes_recvd [ 9]       0\n    ixgbe:0:statistics:queue_bytes_recvd [10]       0\n    ixgbe:0:statistics:queue_bytes_recvd [11]       0\n    ixgbe:0:statistics:queue_bytes_recvd [12]       0\n    ixgbe:0:statistics:queue_bytes_recvd [13]       0\n    ixgbe:0:statistics:queue_bytes_recvd [14]       0\n    ixgbe:0:statistics:queue_bytes_recvd [15]       0\n    ixgbe:0:statistics:queue_bytes_xmitd [ 0]       26163\n    ixgbe:0:statistics:queue_bytes_xmitd [ 1]       35686\n    ixgbe:0:statistics:queue_bytes_xmitd [ 2]       18403\n    ixgbe:0:statistics:queue_bytes_xmitd [ 3]       64833\n    ixgbe:0:statistics:queue_bytes_xmitd [ 4]       9173\n    ixgbe:0:statistics:queue_bytes_xmitd [ 5]       112995\n    ixgbe:0:statistics:queue_bytes_xmitd [ 6]       30659\n    ixgbe:0:statistics:queue_bytes_xmitd [ 7]       40146\n    ixgbe:0:statistics:queue_bytes_xmitd [ 8]       0\n    ixgbe:0:statistics:queue_bytes_xmitd [ 9]       0\n    ixgbe:0:statistics:queue_bytes_xmitd [10]       0\n    ixgbe:0:statistics:queue_bytes_xmitd [11]       0\n    ixgbe:0:statistics:queue_bytes_xmitd [12]       0\n    ixgbe:0:statistics:queue_bytes_xmitd [13]       0\n    ixgbe:0:statistics:queue_bytes_xmitd [14]       0\n    ixgbe:0:statistics:queue_bytes_xmitd [15]       0\n    ixgbe:0:statistics:queue_pkts_recvd [ 0]        50\n    ixgbe:0:statistics:queue_pkts_recvd [ 1]        2\n    ixgbe:0:statistics:queue_pkts_recvd [ 2]        12548\n    ixgbe:0:statistics:queue_pkts_recvd [ 3]        264\n    ixgbe:0:statistics:queue_pkts_recvd [ 4]        60\n    ixgbe:0:statistics:queue_pkts_recvd [ 5]        1674\n    ixgbe:0:statistics:queue_pkts_recvd [ 6]        217\n    ixgbe:0:statistics:queue_pkts_recvd [ 7]        8\n    ixgbe:0:statistics:queue_pkts_recvd [ 8]        0\n    ixgbe:0:statistics:queue_pkts_recvd [ 9]        0\n    ixgbe:0:statistics:queue_pkts_recvd [10]        0\n    ixgbe:0:statistics:queue_pkts_recvd [11]        0\n    ixgbe:0:statistics:queue_pkts_recvd [12]        0\n    ixgbe:0:statistics:queue_pkts_recvd [13]        0\n    ixgbe:0:statistics:queue_pkts_recvd [14]        0\n    ixgbe:0:statistics:queue_pkts_recvd [15]        0\n    ixgbe:0:statistics:queue_pkts_xmitd [ 0]        250\n    ixgbe:0:statistics:queue_pkts_xmitd [ 1]        409\n    ixgbe:0:statistics:queue_pkts_xmitd [ 2]        194\n    ixgbe:0:statistics:queue_pkts_xmitd [ 3]        365\n    ixgbe:0:statistics:queue_pkts_xmitd [ 4]        51\n    ixgbe:0:statistics:queue_pkts_xmitd [ 5]        1553\n    ixgbe:0:statistics:queue_pkts_xmitd [ 6]        143\n    ixgbe:0:statistics:queue_pkts_xmitd [ 7]        181\n    ixgbe:0:statistics:queue_pkts_xmitd [ 8]        0\n    ixgbe:0:statistics:queue_pkts_xmitd [ 9]        0\n    ixgbe:0:statistics:queue_pkts_xmitd [10]        0\n    ixgbe:0:statistics:queue_pkts_xmitd [11]        0\n    ixgbe:0:statistics:queue_pkts_xmitd [12]        0\n    ixgbe:0:statistics:queue_pkts_xmitd [13]        0\n    ixgbe:0:statistics:queue_pkts_xmitd [14]        0\n    ixgbe:0:statistics:queue_pkts_xmitd [15]        0\n    ixgbe:0:statistics:recv_fragment        0\n    ixgbe:0:statistics:recv_jabber  0\n    ixgbe:0:statistics:recv_length_err      0\n    ixgbe:0:statistics:recv_no_buffer       0\n    ixgbe:0:statistics:recv_oversize        0\n    ixgbe:0:statistics:recv_undersize       0\n    ixgbe:0:statistics:reset_count  0\n    ---\n    ixgbe:0:statistics:rx_cksum_error       0\n    ixgbe:0:statistics:rx_exceed_pkt        0\n    ixgbe:0:statistics:rx_frame_error       0\n    ixgbe:0:statistics:snaptime     266.543654257\n    ixgbe:0:statistics:tx_fail_dma_bind     0\n    ixgbe:0:statistics:tx_fail_no_tbd       0\n    ixgbe:0:statistics:tx_fail_no_tcb       0\n    ixgbe:0:statistics:tx_overload  0\n    ixgbe:0:statistics:tx_reschedule        0\n    ---"},{"timestamp":1487981631,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1487981725,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1487981846,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1487981873,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Ryan Zezeski"}],"currentPatchSet":{"number":"5","revision":"b3fbfcac0fdbd7ad4eddd58bfc56cdd667239548","parents":["a20a6014d3b07e04924eb17e4c5ec736d28542e2"],"ref":"refs/changes/59/1559/5","uploader":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"createdOn":1487981846,"author":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487885593,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487889859,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487961938,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1487981631,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1487981873,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_main.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_rx.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_stat.c","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_sw.h","type":"MODIFIED","insertions":7,"deletions":-9},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_tx.c","type":"MODIFIED","insertions":7,"deletions":-6}],"sizeInsertions":24,"sizeDeletions":-27},"patchSets":[{"number":"1","revision":"e6254f512d812da667ed0e1af377476fdfd4e95e","parents":["384c07167202f048489a38c1fd2a2f8ac5a082bd"],"ref":"refs/changes/59/1559/1","uploader":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"createdOn":1487877344,"author":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487878059,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"comments":[{"file":"usr/src/uts/common/io/ixgbe/ixgbe_main.c","line":33,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Don\u0027t add a new copyright line, replace the existing one."},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_main.c","line":33,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Done."},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_sw.h","line":519,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is there a reason that these are still being kept under IXGBE_DEBUG?"},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_sw.h","line":519,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Yes. These weren\u0027t part of the ticket and they aren\u0027t exported as part of the ixgbe kstats.\n\nHowever, it looks like these would also be good to expose as they point out two other error conditions that would be good to know about in production. Shall I write up another ticket for exposing these two stats and do the work under this CR?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_main.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_rx.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_stat.c","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_sw.h","type":"MODIFIED","insertions":7,"deletions":-9},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_tx.c","type":"MODIFIED","insertions":7,"deletions":-6}],"sizeInsertions":24,"sizeDeletions":-26},{"number":"2","revision":"c3f52b318de18230bed53c2ff2dbc7912f104330","parents":["384c07167202f048489a38c1fd2a2f8ac5a082bd"],"ref":"refs/changes/59/1559/2","uploader":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"createdOn":1487885007,"author":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_main.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_rx.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_stat.c","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_sw.h","type":"MODIFIED","insertions":7,"deletions":-9},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_tx.c","type":"MODIFIED","insertions":7,"deletions":-6}],"sizeInsertions":24,"sizeDeletions":-27},{"number":"3","revision":"4d3aa5712d9ff363daae246a1a5267d2ca346e2e","parents":["384c07167202f048489a38c1fd2a2f8ac5a082bd"],"ref":"refs/changes/59/1559/3","uploader":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"createdOn":1487885527,"author":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487961938,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487889859,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1487981631,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487885593,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_main.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_rx.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_stat.c","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_sw.h","type":"MODIFIED","insertions":7,"deletions":-9},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_tx.c","type":"MODIFIED","insertions":7,"deletions":-6}],"sizeInsertions":24,"sizeDeletions":-27},{"number":"4","revision":"4ce1003328221c3a112168bb87b8272b76805170","parents":["a20a6014d3b07e04924eb17e4c5ec736d28542e2"],"ref":"refs/changes/59/1559/4","uploader":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"createdOn":1487981725,"author":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487961938,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487889859,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1487981631,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487885593,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_main.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_rx.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_stat.c","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_sw.h","type":"MODIFIED","insertions":7,"deletions":-9},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_tx.c","type":"MODIFIED","insertions":7,"deletions":-6}],"sizeInsertions":24,"sizeDeletions":-27},{"number":"5","revision":"b3fbfcac0fdbd7ad4eddd58bfc56cdd667239548","parents":["a20a6014d3b07e04924eb17e4c5ec736d28542e2"],"ref":"refs/changes/59/1559/5","uploader":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"createdOn":1487981846,"author":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487961938,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487889859,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1487981631,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487885593,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1487981873,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_main.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_rx.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_stat.c","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_sw.h","type":"MODIFIED","insertions":7,"deletions":-9},{"file":"usr/src/uts/common/io/ixgbe/ixgbe_tx.c","type":"MODIFIED","insertions":7,"deletions":-6}],"sizeInsertions":24,"sizeDeletions":-27}],"allReviewers":[{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}]}