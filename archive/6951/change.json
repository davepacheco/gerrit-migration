{"project":"joyent/smartos-live","branch":"master","id":"I7c7ba26873ee667b40b0d42f2a20e733ee747742","number":"6951","subject":"OS-7943 Want platform build test artifact Reviewed by: John Levon \u003cjohn.levon@joyent.com\u003e Reviewed by: Ryan Zezeski \u003crpz@joyent.com\u003e Approved by: John Levon \u003cjohn.levon@joyent.com\u003e","owner":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"url":"https://cr.joyent.us/6951","commitMessage":"OS-7943 Want platform build test artifact\nReviewed by: John Levon \u003cjohn.levon@joyent.com\u003e\nReviewed by: Ryan Zezeski \u003crpz@joyent.com\u003e\nApproved by: John Levon \u003cjohn.levon@joyent.com\u003e\n","createdOn":1570013909,"lastUpdated":1570703514,"open":false,"status":"MERGED","comments":[{"timestamp":1570013909,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 1."},{"timestamp":1570013920,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 6faa17966f5cdc9ca22a838c7f05b32c4801fd29\n    \n    OS-7943 Want platform build test artifact"},{"timestamp":1570014516,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1570014525,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 0343e0e24b226209969adad588a91b9b6c7d4763\n    \n    OS-7943 Want platform build test artifact"},{"timestamp":1570045561,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 2:\n\n(2 comments)\n\nAny reason this isn\u0027t part of CR 6950 since they are for the same ticket?"},{"timestamp":1570107339,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 2:\n\n(2 comments)\n\nThanks for the review!\n\n \u003e Any reason this isn\u0027t part of CR 6950 since they are for the same\n \u003e ticket?\n\nI suppose I could move the nawk script into illumos-joyent rather than smartos-live, but I had it here since it seemed quite specific to SmartOS itself, rather than anything we\u0027d ever potentially want to upstream. I don\u0027t really mind though?"},{"timestamp":1570179893,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 3."},{"timestamp":1570179901,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 283ddc231f0aea4c69a96ba1990cee35317b13ea\n    \n    Address code review feedback from rpz, add README.md text"},{"timestamp":1570465269,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 2:\n\n(1 comment)\n\n\u003e (2 comments)\n \u003e \n \u003e Thanks for the review!\n \u003e \n \u003e \u003e Any reason this isn\u0027t part of CR 6950 since they are for the same\n \u003e \u003e ticket?\n \u003e \n \u003e I suppose I could move the nawk script into illumos-joyent rather\n \u003e than smartos-live, but I had it here since it seemed quite specific\n \u003e to SmartOS itself, rather than anything we\u0027d ever potentially want\n \u003e to upstream. I don\u0027t really mind though?\n\nSorry, I think my brain was still a bit mushy from a cold I\u0027ve been coming off of. For some reason I thought both of these were already under illumos-joyent, so I thought you were doing two different CRs for the same ticket and same repo. This makes more sense now and I think it\u0027s fine as-is."},{"timestamp":1570465613,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1570534086,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3:\n\n(3 comments)"},{"timestamp":1570553934,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 4."},{"timestamp":1570553939,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit b16dad8ea9d031e342b4675853a4a6bdd09035ce\n    \n    fix copyright nit, address $SRC/pkg/manifests typo and be illumos-generic in README.md"},{"timestamp":1570554058,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1570559705,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 5: Patch Set 4 was rebased"},{"timestamp":1570559778,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 6."},{"timestamp":1570559840,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 7: Patch Set 6 was rebased"},{"timestamp":1570615896,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 8: Patch Set 7 was rebased"},{"timestamp":1570636926,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 8: Integration-Approval+1"},{"timestamp":1570637500,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 8: Code-Review+1"},{"timestamp":1570702033,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 9: Commit message was updated."},{"timestamp":1570702042,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 9:\n\nNew commits:\n    \n    commit 0d699b5484fd78b58858ae88db22c65b5e0f5dc9\n    \n    OS-7943 Want platform build test artifact\n    Reviewed by: John Levon \u003cjohn.levon@joyent.com\u003e"},{"timestamp":1570703514,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Tim Foster"}],"currentPatchSet":{"number":"9","revision":"7c7ba26873ee667b40b0d42f2a20e733ee747742","parents":["cff96ea00326835ea5f656d5e6f4f34b16014c0c"],"ref":"refs/changes/51/6951/9","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1570702033,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570554058,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1570636926,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570637500,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}},{"type":"SUBM","value":"1","grantedOn":1570703514,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":53,"deletions":-2},{"file":"README.md","type":"MODIFIED","insertions":182,"deletions":0},{"file":"tools/generate-manifest-from-ips.nawk","type":"ADDED","insertions":272,"deletions":0}],"sizeInsertions":509,"sizeDeletions":-2},"patchSets":[{"number":"1","revision":"9e632226fb1bd9db1ac3e4b487573aebc5ef93f4","parents":["4dd1ea34fabfe06f126c63b2446f799c2728f0cc"],"ref":"refs/changes/51/6951/1","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1570013909,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":53,"deletions":-2},{"file":"tools/generate-manifest-from-ips.nawk","type":"ADDED","insertions":273,"deletions":0}],"sizeInsertions":328,"sizeDeletions":-2},{"number":"2","revision":"fcd0c90a5b4634a0d41726538ec6ce3ad98ca84a","parents":["1fcc5743c47ccdfb35edc18128f28efe977089c1"],"ref":"refs/changes/51/6951/2","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1570014516,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"TRIVIAL_REBASE","comments":[{"file":"tools/generate-manifest-from-ips.nawk","line":183,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Did you need to clear action here if you are doing it as part of emit_line too?"},{"file":"tools/generate-manifest-from-ips.nawk","line":183,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Ah thanks - that was a change left over from earlier development bits, I\u0027ll remove this."},{"file":"tools/generate-manifest-from-ips.nawk","line":264,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Not that it\u0027s a big deal but you could probably roll this into parse_or_next."},{"file":"tools/generate-manifest-from-ips.nawk","line":264,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Hmm, maybe.. One problem here is the use of \u0027next\u0027 on line 255 - I can\u0027t hoist that into parse_or_next since awk won\u0027t let us use \u0027next\u0027 inside a function, it can only appear in a pattern-match-stanza."},{"file":"tools/generate-manifest-from-ips.nawk","line":264,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Yea, I think you could still factor this common logic into it, but maybe not worth the effort. I understand the script just fine as it is."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":53,"deletions":-2},{"file":"tools/generate-manifest-from-ips.nawk","type":"ADDED","insertions":273,"deletions":0}],"sizeInsertions":328,"sizeDeletions":-2},{"number":"3","revision":"a5350787a0a252c8f55575406b104fa356751152","parents":["1fcc5743c47ccdfb35edc18128f28efe977089c1"],"ref":"refs/changes/51/6951/3","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1570179893,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570465613,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"comments":[{"file":"README.md","line":889,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"just say \"to illumos\" ? Since illumos-joyent might be relevant"},{"file":"README.md","line":890,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"\"manifests\""},{"file":"tools/generate-manifest-from-ips.nawk","line":10,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"nit, not quite right form"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":53,"deletions":-2},{"file":"README.md","type":"MODIFIED","insertions":182,"deletions":0},{"file":"tools/generate-manifest-from-ips.nawk","type":"ADDED","insertions":272,"deletions":0}],"sizeInsertions":509,"sizeDeletions":-2},{"number":"4","revision":"96a7a541b0f06ff4777dceee31e0a4f460f6e91d","parents":["a11a7d0bed2c1854959846700bf7739983094826"],"ref":"refs/changes/51/6951/4","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1570553934,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570554058,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":53,"deletions":-2},{"file":"README.md","type":"MODIFIED","insertions":182,"deletions":0},{"file":"tools/generate-manifest-from-ips.nawk","type":"ADDED","insertions":272,"deletions":0}],"sizeInsertions":509,"sizeDeletions":-2},{"number":"5","revision":"6b37b5ae6372ffae879c4ede73b3ebda179d6bf9","parents":["4e3fe4af997ffbdbfa15e6b9068549f79e4fe8a9"],"ref":"refs/changes/51/6951/5","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1570559705,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570554058,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":53,"deletions":-2},{"file":"README.md","type":"MODIFIED","insertions":182,"deletions":0},{"file":"tools/generate-manifest-from-ips.nawk","type":"ADDED","insertions":272,"deletions":0}],"sizeInsertions":509,"sizeDeletions":-2},{"number":"6","revision":"cafd58572244d43b58066820c2d793cc095141d5","parents":["a11a7d0bed2c1854959846700bf7739983094826"],"ref":"refs/changes/51/6951/6","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1570559778,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570554058,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":53,"deletions":-2},{"file":"README.md","type":"MODIFIED","insertions":182,"deletions":0},{"file":"tools/generate-manifest-from-ips.nawk","type":"ADDED","insertions":272,"deletions":0}],"sizeInsertions":509,"sizeDeletions":-2},{"number":"7","revision":"0df8326f8c68b161eadf7c35b1e0035312e25a37","parents":["4e3fe4af997ffbdbfa15e6b9068549f79e4fe8a9"],"ref":"refs/changes/51/6951/7","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1570559840,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570554058,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":53,"deletions":-2},{"file":"README.md","type":"MODIFIED","insertions":182,"deletions":0},{"file":"tools/generate-manifest-from-ips.nawk","type":"ADDED","insertions":272,"deletions":0}],"sizeInsertions":509,"sizeDeletions":-2},{"number":"8","revision":"ca038a14183ff4601f56b74fcf8a14c35f91e3d1","parents":["cff96ea00326835ea5f656d5e6f4f34b16014c0c"],"ref":"refs/changes/51/6951/8","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1570615896,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570637500,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570554058,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1570636926,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":53,"deletions":-2},{"file":"README.md","type":"MODIFIED","insertions":182,"deletions":0},{"file":"tools/generate-manifest-from-ips.nawk","type":"ADDED","insertions":272,"deletions":0}],"sizeInsertions":509,"sizeDeletions":-2},{"number":"9","revision":"7c7ba26873ee667b40b0d42f2a20e733ee747742","parents":["cff96ea00326835ea5f656d5e6f4f34b16014c0c"],"ref":"refs/changes/51/6951/9","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1570702033,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570637500,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570554058,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1570636926,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"SUBM","value":"1","grantedOn":1570703514,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":53,"deletions":-2},{"file":"README.md","type":"MODIFIED","insertions":182,"deletions":0},{"file":"tools/generate-manifest-from-ips.nawk","type":"ADDED","insertions":272,"deletions":0}],"sizeInsertions":509,"sizeDeletions":-2}],"allReviewers":[{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}]}