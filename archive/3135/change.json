{"project":"joyent/sdcadm","branch":"master","id":"I04678262480337462b21f3a48949f4ddd906968d","number":"3135","subject":"TOOLS-1943 sdcadm should not use sdc-oneachnode to get VM info","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/3135","commitMessage":"TOOLS-1943 sdcadm should not use sdc-oneachnode to get VM info\n","createdOn":1513974369,"lastUpdated":1516115178,"open":false,"status":"MERGED","comments":[{"timestamp":1513974369,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1513974374,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit cf21cf0865cded7dbce0158df15a7a87285bfa36\n    \n    TOOLS-1943 sdcadm should not use sdc-oneachnode to get VM info"},{"timestamp":1513974402,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1515613369,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2."},{"timestamp":1515613374,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 3b5cae8d99410665ac6de3bf586668401eb57022\n    \n    TOOLS-1943 sdcadm should not use sdc-oneachnode to get VM info"},{"timestamp":1515613402,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1515634634,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 2:\n\n(7 comments)"},{"timestamp":1515691322,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 3."},{"timestamp":1515691328,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit f5c03b78d95b7a5ce9a0e6b6ab34b7ac8b5bedb0\n    \n    TOOLS-1943 sdcadm should not use sdc-oneachnode to get VM info"},{"timestamp":1515691355,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1515691380,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\n(8 comments)\n\nDone with most of your suggestions applied. Thanks again!"},{"timestamp":1515693073,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1515693079,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 69a00e4e4b4f0e9358f7c94640069c1fb29cf929\n    \n    TOOLS-1943 sdcadm should not use sdc-oneachnode to get VM info"},{"timestamp":1515693107,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4:\n\n\"make check\" passed ok"},{"timestamp":1515694694,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 5."},{"timestamp":1515694700,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit 3b88c3f28c9d64521da99392a09b525000a57970\n    \n    TOOLS-1943 sdcadm should not use sdc-oneachnode to get VM info\n    \n    commit b4d47fc54edb816288d41af5510d02e34f8d16db\n    \n    TOOLS-1972 \u0027sdcadm avail\u0027 crashes when there are not available updates\n    Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\n    Approved by: Trent Mick \u003ctrentm@gmail.com\u003e"},{"timestamp":1515694728,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1515694773,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 6: Patch Set 5 was rebased"},{"timestamp":1515698073,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 6:\n\n(4 comments)"},{"timestamp":1516030461,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 7."},{"timestamp":1516030466,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 7:\n\nNew commits:\n    \n    commit b7d4886b698e12ca17ed800ca753f5adfc0ab5ef\n    \n    TOOLS-1943 sdcadm should not use sdc-oneachnode to get VM info"},{"timestamp":1516030494,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1516030576,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 7:\n\n(4 comments)\n\nAlready done with suggested changes and hopefully have been able to explain what \"remote\" means for most cases when used in sdcadm code base ;-)\n\nAlso when through sapi/moray/papi updates + docker setup just fine for IA checking - and b/c I just updated my Mac OS and wanted to give COAL a hard try :-)"},{"timestamp":1516067015,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 7: Code-Review+1 Integration-Approval+1"},{"timestamp":1516115178,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"7","revision":"04678262480337462b21f3a48949f4ddd906968d","parents":["b4d47fc54edb816288d41af5510d02e34f8d16db"],"ref":"refs/changes/35/3135/7","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1516030461,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1516030494,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1516067015,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1516067015,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"SUBM","value":"1","grantedOn":1516115177,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":46,"deletions":-53},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":61,"deletions":-19},{"file":"lib/procedures/update-moray-v2.js","type":"MODIFIED","insertions":19,"deletions":-11},{"file":"lib/procedures/update-single-hn-sapi-v1.js","type":"MODIFIED","insertions":19,"deletions":-12},{"file":"lib/procedures/update-stateless-services-v1.js","type":"MODIFIED","insertions":5,"deletions":-5}],"sizeInsertions":155,"sizeDeletions":-104},"patchSets":[{"number":"1","revision":"d285e5496f23c3bbaf5a997cbb9f966419bb59a6","parents":["c3b20dc42de36fc7b5b1a3a572e76b034d4d2932"],"ref":"refs/changes/35/3135/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1513974369,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1513974402,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/common.js","line":573,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Update the comment to not mention sdc-oneachnode?"},{"file":"lib/common.js","line":573,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/common.js","line":589,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Out of curiosity: why do we query CNAPI instead of VMAPI here?"},{"file":"lib/common.js","line":589,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"B/c as far as I know, CNAPI calls `vmadm get $UUID` when called, and VMAPI doesn\u0027t. And that\u0027s exactly what we pursue here: replace the call to `vmadm get` made through sdc-oneachnode with CNAPI calls to cn-agent tasks."},{"file":"lib/common.js","line":589,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Sounds good. 2 questions then:\n\n1. out of curiosity, would sending a GetVm?sync\u003dtrue request to VMAPI achieve the same goal?\n\n2. is the name \"vmGetRemote\" used to convey that we\u0027re getting the VM info from the server instead of from the cache (VMAPI)? If so, would \"getVMInfoFromServer\" be a better name for this function?\n\nNot that this CR needs to change any of that, just trying to improve my understanding of this codebase."},{"file":"lib/common.js","line":589,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"1. I think so, yes. But that would involve another underlying API call. Cannot see the need if we can call CNAPI straight ourselves.\n2. No, the suffix \"remote\" pretty much means we\u0027re not calling `vmadm get` into the server from where sdcadm itself is running. At the end of the day, it results into us getting the information from the server, but that applies to both cases, when we go through CNAPI to a \"remote\" server, or when we use vmadm within the \"current\" server."},{"file":"lib/common.js","line":713,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"We don\u0027t use opts.log anymore in this function? Should we remove the assertion then?"},{"file":"lib/common.js","line":713,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":43,"deletions":-49},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":58,"deletions":-17},{"file":"lib/procedures/update-moray-v2.js","type":"MODIFIED","insertions":17,"deletions":-11},{"file":"lib/procedures/update-single-hn-sapi-v1.js","type":"MODIFIED","insertions":19,"deletions":-12},{"file":"lib/procedures/update-stateless-services-v1.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":141,"sizeDeletions":-91},{"number":"2","revision":"02d05a247b6939820a1d50a847134e672dd9be38","parents":["47704904431d8fb7d1316cffdc6280a082de7893"],"ref":"refs/changes/35/3135/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1515613369,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515613402,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/common.js","line":586,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"nit: passing the whole \"sdcadm\" object and thus having vmGetRemote potentially depend on a lot of its properties seems a bit like an anti-pattern.\n\nIdeally we\u0027d restrict what it depends on and make it more explicit, for example by passing only the cnapi client object."},{"file":"lib/common.js","line":586,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Cannot see why not take the approach you suggest, it\u0027s definitely smarter to pass \"smaller\" objects around. And a Restify client is huge enough by itself. Giving it a try."},{"file":"lib/common.js","line":601,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"nit: Why would not finding a VM always be an error? Shouldn\u0027t this decision be left to the consumer of that API?"},{"file":"lib/common.js","line":601,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"I\u0027m really not sure of what the answer for this is. In theory, this would be used only from sdcadm to update existing machines so, a not found will definitely be the cause of an exception for every possible usage of this function right now.\n\nThis may change in the future, but I\u0027d say that until that happens I prefer to deal with the not found condition in a single place."},{"file":"lib/common.js","line":612,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Same comment as above re: dependency on the whole sdcadm object."},{"file":"lib/common.js","line":612,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/common.js","line":661,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"ditto."},{"file":"lib/common.js","line":661,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/common.js","line":714,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Also did for this one"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":43,"deletions":-49},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":58,"deletions":-17},{"file":"lib/procedures/update-moray-v2.js","type":"MODIFIED","insertions":18,"deletions":-10},{"file":"lib/procedures/update-single-hn-sapi-v1.js","type":"MODIFIED","insertions":19,"deletions":-12},{"file":"lib/procedures/update-stateless-services-v1.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":142,"sizeDeletions":-90},{"number":"3","revision":"27ac37c00c51cd9efec588e9bc8fcbb10357a877","parents":["47704904431d8fb7d1316cffdc6280a082de7893"],"ref":"refs/changes/35/3135/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1515691322,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515691355,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":46,"deletions":-53},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":61,"deletions":-19},{"file":"lib/procedures/update-moray-v2.js","type":"MODIFIED","insertions":18,"deletions":-10},{"file":"lib/procedures/update-single-hn-sapi-v1.js","type":"MODIFIED","insertions":19,"deletions":-12},{"file":"lib/procedures/update-stateless-services-v1.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":148,"sizeDeletions":-96},{"number":"4","revision":"9d4658cef2d1c9e74bbe6c14ad6a4a07cae291d4","parents":["8a083b5b363fb2479d9217dcdb0b0594a390e853"],"ref":"refs/changes/35/3135/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1515693073,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515691355,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":46,"deletions":-53},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":61,"deletions":-19},{"file":"lib/procedures/update-moray-v2.js","type":"MODIFIED","insertions":18,"deletions":-10},{"file":"lib/procedures/update-single-hn-sapi-v1.js","type":"MODIFIED","insertions":19,"deletions":-12},{"file":"lib/procedures/update-stateless-services-v1.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":148,"sizeDeletions":-96},{"number":"5","revision":"d6d41b7cd49c20e72f63be4a713d4b2067b98173","parents":["8a083b5b363fb2479d9217dcdb0b0594a390e853"],"ref":"refs/changes/35/3135/5","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1515694694,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515694728,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/cli/do_avail.js","type":"MODIFIED","insertions":12,"deletions":-14},{"file":"lib/common.js","type":"MODIFIED","insertions":46,"deletions":-53},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":61,"deletions":-19},{"file":"lib/procedures/update-moray-v2.js","type":"MODIFIED","insertions":18,"deletions":-10},{"file":"lib/procedures/update-single-hn-sapi-v1.js","type":"MODIFIED","insertions":19,"deletions":-12},{"file":"lib/procedures/update-stateless-services-v1.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":160,"sizeDeletions":-110},{"number":"6","revision":"1ac4ba156bb16ad8b260b07755e171df8051a5ef","parents":["b4d47fc54edb816288d41af5510d02e34f8d16db"],"ref":"refs/changes/35/3135/6","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1515694773,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515694728,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/procedures/shared.js","line":629,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"nit: Should we just pass a CNAPI client instead of a whole sdcadm object"},{"file":"lib/procedures/shared.js","line":629,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/procedures/shared.js","line":656,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"nit: Should we just pass a CNAPI client instead of a whole sdcadm object"},{"file":"lib/procedures/shared.js","line":656,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/procedures/shared.js","line":965,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"nit: should we also just pass a CNAPI client instead of the whole sdcadm object?"},{"file":"lib/procedures/shared.js","line":965,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":46,"deletions":-53},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":61,"deletions":-19},{"file":"lib/procedures/update-moray-v2.js","type":"MODIFIED","insertions":18,"deletions":-10},{"file":"lib/procedures/update-single-hn-sapi-v1.js","type":"MODIFIED","insertions":19,"deletions":-12},{"file":"lib/procedures/update-stateless-services-v1.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":148,"sizeDeletions":-96},{"number":"7","revision":"04678262480337462b21f3a48949f4ddd906968d","parents":["b4d47fc54edb816288d41af5510d02e34f8d16db"],"ref":"refs/changes/35/3135/7","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1516030461,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1516030494,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1516115177,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1516067015,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1516067015,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":46,"deletions":-53},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":61,"deletions":-19},{"file":"lib/procedures/update-moray-v2.js","type":"MODIFIED","insertions":19,"deletions":-11},{"file":"lib/procedures/update-single-hn-sapi-v1.js","type":"MODIFIED","insertions":19,"deletions":-12},{"file":"lib/procedures/update-stateless-services-v1.js","type":"MODIFIED","insertions":5,"deletions":-5}],"sizeInsertions":155,"sizeDeletions":-104}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}]}