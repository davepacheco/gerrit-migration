From 87a0238e0cf21e6b0a37148f0e35e816f3c1cb2f Mon Sep 17 00:00:00 2001
From: Rob Johnston <rob.johnston@joyent.com>
Date: Wed, 3 Apr 2019 17:24:08 +0000
Subject: [PATCH] OS-7697 Add Joyent/Triton branding to Loader

---
 boot.manifest                                 |   2 ++
 usr/src/boot/sys/boot/forth/Makefile.inc      |   2 ++
 usr/src/boot/sys/boot/forth/brand-smartos.4th |   2 ++
 usr/src/boot/sys/boot/forth/joyent.png        | Bin 0 -> 12303 bytes
 usr/src/boot/sys/boot/forth/logo-smartos.4th  |   2 +-
 usr/src/boot/sys/boot/forth/triton.png        | Bin 0 -> 2561 bytes
 6 files changed, 7 insertions(+), 1 deletion(-)
 create mode 100644 usr/src/boot/sys/boot/forth/joyent.png
 create mode 100644 usr/src/boot/sys/boot/forth/triton.png

diff --git a/boot.manifest b/boot.manifest
index d6e4c932af..2c14cf752b 100644
--- a/boot.manifest
+++ b/boot.manifest
@@ -44,8 +44,10 @@ f boot/forth/support.4th 0444 root sys
 f boot/forth/version.4th 0444 root sys
 f boot/gptzfsboot 0444 root sys
 f boot/illumos.png 0444 root sys
+f boot/joyent.png 0444 root sys
 f boot/loader 0444 root sys
 f boot/loader64.efi 0555 root sys
 f boot/loader.help 0444 root sys
 f boot/loader.rc 0444 root sys
 f boot/pmbr 0444 root sys
+f boot/triton.png 0444 root sys
diff --git a/usr/src/boot/sys/boot/forth/Makefile.inc b/usr/src/boot/sys/boot/forth/Makefile.inc
index 09ac830835..09ff345596 100644
--- a/usr/src/boot/sys/boot/forth/Makefile.inc
+++ b/usr/src/boot/sys/boot/forth/Makefile.inc
@@ -27,3 +27,5 @@ FORTH +=	shortcuts.4th
 FORTH +=	support.4th
 FORTH +=	version.4th
 FILES +=	illumos.png
+FILES +=	joyent.png
+FILES +=	triton.png
diff --git a/usr/src/boot/sys/boot/forth/brand-smartos.4th b/usr/src/boot/sys/boot/forth/brand-smartos.4th
index ec3c6a0782..be492462a0 100644
--- a/usr/src/boot/sys/boot/forth/brand-smartos.4th
+++ b/usr/src/boot/sys/boot/forth/brand-smartos.4th
@@ -23,6 +23,8 @@
 
 : brand ( x y -- ) \ "joyent" [wide] logo in B/W (7 rows x 42 columns)
 
+	0 1 1 0 0 s" /boot/joyent.png" fb-putimage if 2drop exit then
+
 	s"       #                                   " brand+
 	s"       #  ####  #   # ###### #    # #####  " brand+
 	s"       # #    #  # #  #      ##   #   #    " brand+
diff --git a/usr/src/boot/sys/boot/forth/joyent.png b/usr/src/boot/sys/boot/forth/joyent.png
new file mode 100644
index 0000000000..b375a88192
Binary files /dev/null and b/usr/src/boot/sys/boot/forth/joyent.png differ
diff --git a/usr/src/boot/sys/boot/forth/logo-smartos.4th b/usr/src/boot/sys/boot/forth/logo-smartos.4th
index 9641a4fd81..f897c45165 100644
--- a/usr/src/boot/sys/boot/forth/logo-smartos.4th
+++ b/usr/src/boot/sys/boot/forth/logo-smartos.4th
@@ -24,7 +24,7 @@
 
 : logo ( x y -- ) \ color Illumos logo
 
-	0 0 0 0 0 s" /boot/illumos.png" fb-putimage if 2drop exit then
+	0 0 0 0 0 s" /boot/triton.png" fb-putimage if 2drop exit then
 
         s" @[31m--@[0;31m+--@[1;31m*@[0;33m--@[1;33m*" logo+
 	s" @[31m|@[1m\@[0m @[31m|\ |@[33m\ @[1m|\" logo+
diff --git a/usr/src/boot/sys/boot/forth/triton.png b/usr/src/boot/sys/boot/forth/triton.png
new file mode 100644
index 0000000000..9b7e9a94b6
Binary files /dev/null and b/usr/src/boot/sys/boot/forth/triton.png differ
-- 
2.21.0

