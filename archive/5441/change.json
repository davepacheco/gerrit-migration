{"project":"joyent/manta-muskie","branch":"master","topic":"muskie-tests","id":"I02bcc8b6a2e7f0cd2cf8eeae445215df54c0f9ba","number":"5441","subject":"MANTA-4099 Muskie test suite could make it easier to set up access control Reviewed by: Jan Wyszynski \u003cjan.wyszynski@joyent.com\u003e Reviewed by: Cody Peter Mello \u003cmelloc@writev.io\u003e Approved by: Jan Wyszynski \u003cjan.wyszynski@joyent.com\u003e","owner":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"url":"https://cr.joyent.us/5441","commitMessage":"MANTA-4099 Muskie test suite could make it easier to set up access control\nReviewed by: Jan Wyszynski \u003cjan.wyszynski@joyent.com\u003e\nReviewed by: Cody Peter Mello \u003cmelloc@writev.io\u003e\nApproved by: Jan Wyszynski \u003cjan.wyszynski@joyent.com\u003e\n","createdOn":1548723313,"lastUpdated":1549405283,"open":false,"status":"MERGED","comments":[{"timestamp":1548723313,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 1."},{"timestamp":1548723343,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n\"make check\" exited with status 2\n\n /tmp/repo/lib/jobs/index.js\n /tmp/repo/lib/jobs/error.js\n /tmp/repo/lib/jobs/fail.js\n /tmp/repo/lib/jobs/list.js\n /tmp/repo/lib/jobs/get.js\n /tmp/repo/lib/jobs/output.js\n /tmp/repo/lib/jobs/create.js\n /tmp/repo/lib/jobs/post.js\n /tmp/repo/lib/throttle.js\n /tmp/repo/lib/server.js\n /tmp/repo/lib/configure.js\n /tmp/repo/lib/dir.js\n /tmp/repo/lib/picker.js\n /tmp/repo/lib/shark_client.js\n /tmp/repo/lib/utils.js\n /tmp/repo/lib/audit.js\n /tmp/repo/lib/other.js\n /tmp/repo/lib/medusa/index.js\n /tmp/repo/lib/medusa/connector.js\n /tmp/repo/lib/medusa/routes.js\n /tmp/repo/lib/obj.js\n /tmp/repo/lib/check_stream.js\n /tmp/repo/lib/common.js\n /tmp/repo/test/errors.test.js\n /tmp/repo/test/dir.test.js\n /tmp/repo/test/ac.test.js\n /tmp/repo/test/mpu/auth.test.js\n /tmp/repo/test/mpu/del.test.js\n /tmp/repo/test/mpu/get.test.js\n /tmp/repo/test/mpu/upload.test.js\n /tmp/repo/test/mpu/helper.js\n /tmp/repo/test/mpu/create.test.js\n /tmp/repo/test/mpu/abort.test.js\n /tmp/repo/test/mpu/commit.test.js\n /tmp/repo/test/mpu/redirect.test.js\n /tmp/repo/test/acsetup.js\n /tmp/repo/test/integ.test.js\n /tmp/repo/test/helper.js\n /tmp/repo/test/helper.js(459): warning: trailing_comma\n /tmp/repo/test/monitoring.test.js\n /tmp/repo/test/auth.test.js\n /tmp/repo/test/mpicker.test.js\n /tmp/repo/test/configure.test.js\n /tmp/repo/test/link.test.js\n /tmp/repo/test/obj.test.js\n /tmp/repo/test/cors.test.js\n /tmp/repo/test/jobs.test.js\n tools/mk/Makefile.targ:195: recipe for target \u0027check-jsl-node\u0027 failed\n gmake: *** [check-jsl-node] Error 1"},{"timestamp":1548723569,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1548723600,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1549307510,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Topic set to muskie-tests"},{"timestamp":1549319709,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1549319844,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 2: Code-Review+1\n\n(1 comment)"},{"timestamp":1549405054,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 3: Patch Set 2 was rebased"},{"timestamp":1549405088,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3:\n\n\"make check\" passed ok"},{"timestamp":1549405236,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1549405272,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1549405283,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Joshua M. Clulow"}],"currentPatchSet":{"number":"4","revision":"02bcc8b6a2e7f0cd2cf8eeae445215df54c0f9ba","parents":["962f13294766a269802446e251738713a897c040"],"ref":"refs/changes/41/5441/4","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1549405272,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1548723600,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549319709,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1549319709,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549319844,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1549405283,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":12,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":4,"deletions":-5}],"sizeInsertions":16,"sizeDeletions":-5},"patchSets":[{"number":"1","revision":"2573ea4b38a58e1602c0e331cfcac86d48489d4e","parents":["5d5b0f6b1b21472d7443f42c3213bd7c15d87b5e"],"ref":"refs/changes/41/5441/1","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1548723313,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1548723343,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":12,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":4,"deletions":-5}],"sizeInsertions":16,"sizeDeletions":-5},{"number":"2","revision":"42862abe740ab4cfee2f2f563748a44c82be3b23","parents":["a0abd86aa662617c5b34be9501d5545033f36355"],"ref":"refs/changes/41/5441/2","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1548723569,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549319844,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1548723600,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549319709,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1549319709,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}}],"comments":[{"file":"Makefile","line":81,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Between this and the other CR, I\u0027m wondering whether we should do to $(NODE) the same thing that we do to $(NPM), so that not everyone needs to repeat this in their Makefiles:\n\nhttps://github.com/joyent/eng/blob/4443fcd38fe1682556e1851df97c7d652d078f3d/tools/mk/Makefile.node_prebuilt.defs#L169"},{"file":"Makefile","line":81,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"It\u0027s a good question.  I think I did it for $(NPM) because it was pretty clear it couldn\u0027t work any other way.  It was less clear (to me) what all of the possible uses of $(NODE) would be.  In particular, I think it\u0027d be harder to use $(NODE) combination with env(1), for instance, if we always put the PATH modification on the front.\n\nIf we do decide to do this globally, I think we\u0027d probably also want to provide something like $(NODE_NOPATH) as well."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":12,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":4,"deletions":-5}],"sizeInsertions":16,"sizeDeletions":-5},{"number":"3","revision":"f517dbfc533dbdd938c0fe42e92be3d6a7692bc5","parents":["962f13294766a269802446e251738713a897c040"],"ref":"refs/changes/41/5441/3","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1549405054,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549319844,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1548723600,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549319709,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1549319709,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":12,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":4,"deletions":-5}],"sizeInsertions":16,"sizeDeletions":-5},{"number":"4","revision":"02bcc8b6a2e7f0cd2cf8eeae445215df54c0f9ba","parents":["962f13294766a269802446e251738713a897c040"],"ref":"refs/changes/41/5441/4","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1549405272,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549319844,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1549405283,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1548723600,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549319709,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1549319709,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":12,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":4,"deletions":-5}],"sizeInsertions":16,"sizeDeletions":-5}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}]}