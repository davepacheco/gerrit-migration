{"project":"joyent/node-macaddr","branch":"master","id":"Iaa5d43b69451aedb4412b860e113c8091d0ed854","number":"2374","subject":"joyent/node-macaddr#1 Want library for parsing MAC addresses Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Reviewed by: Tim Kordas \u003ctim.kordas@joyent.com\u003e Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e","owner":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"url":"https://cr.joyent.us/2374","commitMessage":"joyent/node-macaddr#1 Want library for parsing MAC addresses\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nReviewed by: Tim Kordas \u003ctim.kordas@joyent.com\u003e\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\n","createdOn":1502403925,"lastUpdated":1502746315,"open":false,"status":"MERGED","comments":[{"timestamp":1502403925,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 1."},{"timestamp":1502403981,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1502404276,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 2."},{"timestamp":1502404349,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1502404627,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 3."},{"timestamp":1502404682,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1502408629,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(7 comments)\n\nIn general, I think this looks good, but I have a few comments to help future readers of the code."},{"timestamp":1502429057,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(5 comments)"},{"timestamp":1502429145,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 4."},{"timestamp":1502429216,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1502429309,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1:\n\n(6 comments)"},{"timestamp":1502432778,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 5."},{"timestamp":1502432801,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1:\n\n(6 comments)"},{"timestamp":1502432844,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1502470708,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1502471006,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1502476889,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 6."},{"timestamp":1502476895,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1502476945,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1502478805,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 6: Code-Review+1\n\n(1 comment)"},{"timestamp":1502483572,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1502746244,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1502746283,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 6: Integration-Approval+1"},{"timestamp":1502746315,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Cody Peter Mello"}],"currentPatchSet":{"number":"6","revision":"aa5d43b69451aedb4412b860e113c8091d0ed854","parents":["1d083f17315e99f8c56a64a6523aaa8bd5be5039"],"ref":"refs/changes/74/2374/6","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1502476889,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1502476945,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502478805,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502483572,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502746244,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1502746283,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1502746315,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":39,"deletions":0},{"file":"lib/macaddr.js","type":"MODIFIED","insertions":225,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/compare.test.js","type":"ADDED","insertions":105,"deletions":0},{"file":"test/constants.js","type":"ADDED","insertions":29,"deletions":0},{"file":"test/output.test.js","type":"ADDED","insertions":63,"deletions":0},{"file":"test/parse.test.js","type":"ADDED","insertions":208,"deletions":0}],"sizeInsertions":670,"sizeDeletions":-1},"patchSets":[{"number":"1","revision":"a003f74061cd8eefb00e651911714da36fbfa0e2","parents":["1d083f17315e99f8c56a64a6523aaa8bd5be5039"],"ref":"refs/changes/74/2374/1","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1502403925,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1502403981,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/macaddr.js","line":16,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Probably want to support uppercase hex chars too."},{"file":"lib/macaddr.js","line":16,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I call .toLowerCase() at the start of parseString() to support uppercase hex chars. I didn\u0027t write any tests for this though, so I\u0027ve gone and added some."},{"file":"lib/macaddr.js","line":16,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Sorry for missing that.  That looks good."},{"file":"lib/macaddr.js","line":57,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Maybe consider storing the value as a pair of numbers, high and low bits, to avoid this silliness?  Totally up to you."},{"file":"lib/macaddr.js","line":57,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027m fine with doing this here. It\u0027s silly that it has to be this way, but it works and keeps the rest of the implementation straightforward."},{"file":"lib/macaddr.js","line":58,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Maybe bitmask to be more consistent?"},{"file":"lib/macaddr.js","line":58,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/macaddr.js","line":98,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Random thought, should we be able to pass in an arbitrary separator?"},{"file":"lib/macaddr.js","line":98,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"We could. I don\u0027t know if I want it yet. I took a look at other forms used to write MAC addresses, like in Postgres:\n\nhttps://www.postgresql.org/docs/9.5/static/datatype-net-types.html#DATATYPE-MACADDR\n\nThey support a form that uses a dot, but other than that it\u0027s just colons and hyphens."},{"file":"lib/macaddr.js","line":105,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Because \u0027v\u0027, \u0027t\u0027, and others are being used in and out of multiple functions here, slightly more descriptive names may be helpful."},{"file":"lib/macaddr.js","line":105,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/macaddr.js","line":108,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I think it\u0027s probably worth a comment somewhere that \u0027sep\u0027 is being used to lock in the character value in the separator. It took me a bit to realize this bit of state."},{"file":"lib/macaddr.js","line":108,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/macaddr.js","line":118,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"\"before separator\" rather than specifying \":\"?"},{"file":"lib/macaddr.js","line":118,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve made it so that this now shows the value of \"sep\" in case someone\u0027s using \u0027-\u0027 as a separator."},{"file":"lib/macaddr.js","line":139,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I realize that based on the definition of issep() you can overwrite sep every time. But it seems like the point of it is to lock it in once, right?"},{"file":"lib/macaddr.js","line":139,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Maybe even look three chars into the string for a potential separator and just split() on that if found?  Tolerating mixed separators seems like an iffy idea."},{"file":"lib/macaddr.js","line":139,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Yes. I initially wrote it this way so that issep() wouldn\u0027t have side affects, but I think that\u0027s fine."},{"file":"lib/macaddr.js","line":139,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Assigning \"sep\" here locks in the separator for the rest of the address. I\u0027ve refactored issep() a bit and added a comment to make this clearer."},{"file":"lib/macaddr.js","line":149,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This could also be the \u0027-\u0027 character right, as they\u0027re both valid separators."},{"file":"lib/macaddr.js","line":149,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Fixed to use \"sep\" instead."},{"file":"lib/macaddr.js","line":153,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"We\u0027d only hit this case if we basically had something that had no separators, is that right?"},{"file":"lib/macaddr.js","line":153,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Is that even a case we want to support?"},{"file":"lib/macaddr.js","line":153,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Yes. In that case we never hit a separator, so we just kept building up \"n\"."},{"file":"lib/macaddr.js","line":153,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"\u003e Is that even a case we want to support?\n\nYes, since that is how NAPI has historically accepted MAC addresses. (I added support for colons several months ago in NAPI-95.) The NAPI client strips colons from the address today."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":36,"deletions":0},{"file":"lib/macaddr.js","type":"MODIFIED","insertions":195,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/compare.test.js","type":"ADDED","insertions":59,"deletions":0},{"file":"test/constants.js","type":"ADDED","insertions":29,"deletions":0},{"file":"test/output.test.js","type":"ADDED","insertions":56,"deletions":0},{"file":"test/parse.test.js","type":"ADDED","insertions":184,"deletions":0}],"sizeInsertions":560,"sizeDeletions":-1},{"number":"2","revision":"50cb081854e075c0a367caf0901746874ba854c6","parents":["1d083f17315e99f8c56a64a6523aaa8bd5be5039"],"ref":"refs/changes/74/2374/2","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1502404276,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1502404349,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":36,"deletions":0},{"file":"lib/macaddr.js","type":"MODIFIED","insertions":195,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/compare.test.js","type":"ADDED","insertions":59,"deletions":0},{"file":"test/constants.js","type":"ADDED","insertions":29,"deletions":0},{"file":"test/output.test.js","type":"ADDED","insertions":56,"deletions":0},{"file":"test/parse.test.js","type":"ADDED","insertions":188,"deletions":0}],"sizeInsertions":564,"sizeDeletions":-1},{"number":"3","revision":"18e2f531500447659d5e1ce7ed56850b7b94a6c5","parents":["1d083f17315e99f8c56a64a6523aaa8bd5be5039"],"ref":"refs/changes/74/2374/3","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1502404627,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1502404682,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":36,"deletions":0},{"file":"lib/macaddr.js","type":"MODIFIED","insertions":195,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/compare.test.js","type":"ADDED","insertions":59,"deletions":0},{"file":"test/constants.js","type":"ADDED","insertions":29,"deletions":0},{"file":"test/output.test.js","type":"ADDED","insertions":63,"deletions":0},{"file":"test/parse.test.js","type":"ADDED","insertions":188,"deletions":0}],"sizeInsertions":571,"sizeDeletions":-1},{"number":"4","revision":"5ef799b58454e463e93ff019fbe1654eb824990d","parents":["1d083f17315e99f8c56a64a6523aaa8bd5be5039"],"ref":"refs/changes/74/2374/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1502429145,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1502429216,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":39,"deletions":0},{"file":"lib/macaddr.js","type":"MODIFIED","insertions":225,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/compare.test.js","type":"ADDED","insertions":105,"deletions":0},{"file":"test/constants.js","type":"ADDED","insertions":29,"deletions":0},{"file":"test/output.test.js","type":"ADDED","insertions":63,"deletions":0},{"file":"test/parse.test.js","type":"ADDED","insertions":193,"deletions":0}],"sizeInsertions":655,"sizeDeletions":-1},{"number":"5","revision":"aab943ebe19b24222724e2792960d897c05bd7a2","parents":["1d083f17315e99f8c56a64a6523aaa8bd5be5039"],"ref":"refs/changes/74/2374/5","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1502432778,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502470708,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1502432844,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/macaddr.js","line":75,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"for symmetry, it might be nice to shift then mask in these cases like the two bytes above ?\n\nie, always mask with 0x0ff\n\n(this._value \u003e\u003e 24) \u0026 0x0ff,\n..."},{"file":"lib/macaddr.js","line":75,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":39,"deletions":0},{"file":"lib/macaddr.js","type":"MODIFIED","insertions":225,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/compare.test.js","type":"ADDED","insertions":105,"deletions":0},{"file":"test/constants.js","type":"ADDED","insertions":29,"deletions":0},{"file":"test/output.test.js","type":"ADDED","insertions":63,"deletions":0},{"file":"test/parse.test.js","type":"ADDED","insertions":208,"deletions":0}],"sizeInsertions":670,"sizeDeletions":-1},{"number":"6","revision":"aa5d43b69451aedb4412b860e113c8091d0ed854","parents":["1d083f17315e99f8c56a64a6523aaa8bd5be5039"],"ref":"refs/changes/74/2374/6","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1502476889,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502483572,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1502746283,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1502746315,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1502476945,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502478805,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502746244,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":39,"deletions":0},{"file":"lib/macaddr.js","type":"MODIFIED","insertions":225,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/compare.test.js","type":"ADDED","insertions":105,"deletions":0},{"file":"test/constants.js","type":"ADDED","insertions":29,"deletions":0},{"file":"test/output.test.js","type":"ADDED","insertions":63,"deletions":0},{"file":"test/parse.test.js","type":"ADDED","insertions":208,"deletions":0}],"sizeInsertions":670,"sizeDeletions":-1}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}]}