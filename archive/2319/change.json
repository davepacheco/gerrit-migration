{"project":"joyent/node-moray","branch":"master","id":"I4b9e0fbee14b3e771b54304bbddb6b9ce0347099","number":"2319","subject":"MORAY-422 node-moray could smooth over connection shuffling MORAY-423 client memory leak Reviewed by: Alex Wilson \u003calex.wilson@joyent.com\u003e Approved by: Alex Wilson \u003calex.wilson@joyent.com\u003e","owner":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"url":"https://cr.joyent.us/2319","commitMessage":"MORAY-422 node-moray could smooth over connection shuffling\nMORAY-423 client memory leak\nReviewed by: Alex Wilson \u003calex.wilson@joyent.com\u003e\nApproved by: Alex Wilson \u003calex.wilson@joyent.com\u003e\n","createdOn":1501698927,"lastUpdated":1509744233,"open":false,"status":"MERGED","comments":[{"timestamp":1501698927,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 1."},{"timestamp":1501698956,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1501699512,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 2."},{"timestamp":1501699545,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1501700318,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 3."},{"timestamp":1501700347,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1502907188,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 4."},{"timestamp":1502907211,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1502929025,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1505436491,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 4:\n\nI may not be able to get back to this very soon.  I\u0027ve left some detailed status in the ticket.  Essentially, PS4 is `make prepush` clean, and it does not appear to leak after running the stress test for a while.  The remaining work is to test what it\u0027s actually trying to fix: namely, the behavior when Binder (and cueball) flap between disjoint sets of backends, leaving us transiently with no connections."},{"timestamp":1509724499,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 5."},{"timestamp":1509724522,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1509724547,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 4:\n\nPatchset 5 is a rebase.  The only conflicts I had to merge by hand were in CHANGES.md and package.json.  The delta looks otherwise the same."},{"timestamp":1509732888,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 6."},{"timestamp":1509732914,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1509743165,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 6:\n\nPS6 pulls in the fix for MORAY-423.\n\nThe complete test plan is in MORAY-422."},{"timestamp":1509743476,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 6: Code-Review+1 Integration-Approval+1"},{"timestamp":1509744138,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 7: Commit message was updated."},{"timestamp":1509744233,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by David Pacheco"}],"currentPatchSet":{"number":"7","revision":"4b9e0fbee14b3e771b54304bbddb6b9ce0347099","parents":["22ab00cf1982302d4cc77546c346ebbbd681e914"],"ref":"refs/changes/19/2319/7","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1509744138,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509732914,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1509743476,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1509743476,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"SUBM","value":"1","grantedOn":1509744233,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":8,"deletions":0},{"file":"lib/client.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/fast_connection.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"lib/pool.js","type":"MODIFIED","insertions":211,"deletions":-22},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":228,"sizeDeletions":-24},"patchSets":[{"number":"1","revision":"57acdb93a44f01b8874def8fa2fdf39bfd9015fe","parents":["e1320409e5c630b6a57b0594947db035057b7924"],"ref":"refs/changes/19/2319/1","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1501698927,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1501698956,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/client.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/pool.js","type":"MODIFIED","insertions":208,"deletions":-23}],"sizeInsertions":209,"sizeDeletions":-23},{"number":"2","revision":"330745639a78de26307200ca8647ce71f2f99515","parents":["e1320409e5c630b6a57b0594947db035057b7924"],"ref":"refs/changes/19/2319/2","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1501699512,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1501699545,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/client.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/pool.js","type":"MODIFIED","insertions":209,"deletions":-22}],"sizeInsertions":210,"sizeDeletions":-22},{"number":"3","revision":"705b38b22c4832e6739be58801317f83057348c5","parents":["e1320409e5c630b6a57b0594947db035057b7924"],"ref":"refs/changes/19/2319/3","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1501700318,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1501700347,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":8,"deletions":0},{"file":"lib/client.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/pool.js","type":"MODIFIED","insertions":209,"deletions":-22},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":219,"sizeDeletions":-23},{"number":"4","revision":"d633ff434eef361c64b1f29cf13d2cd7d2a77384","parents":["e1320409e5c630b6a57b0594947db035057b7924"],"ref":"refs/changes/19/2319/4","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1502907188,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502929025,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1502907211,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":8,"deletions":0},{"file":"lib/client.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/fast_connection.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"lib/pool.js","type":"MODIFIED","insertions":211,"deletions":-22},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":227,"sizeDeletions":-23},{"number":"5","revision":"7ecb8822de8abfde14525930612baab68ad3b916","parents":["22ab00cf1982302d4cc77546c346ebbbd681e914"],"ref":"refs/changes/19/2319/5","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1509724499,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509724522,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":8,"deletions":0},{"file":"lib/client.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/fast_connection.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"lib/pool.js","type":"MODIFIED","insertions":211,"deletions":-22},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":227,"sizeDeletions":-23},{"number":"6","revision":"a2b90667b88c8d23e42fa47e5e0addce9fb434a8","parents":["22ab00cf1982302d4cc77546c346ebbbd681e914"],"ref":"refs/changes/19/2319/6","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1509732888,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1509743476,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1509743476,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509732914,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":8,"deletions":0},{"file":"lib/client.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/fast_connection.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"lib/pool.js","type":"MODIFIED","insertions":211,"deletions":-22},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":228,"sizeDeletions":-24},{"number":"7","revision":"4b9e0fbee14b3e771b54304bbddb6b9ce0347099","parents":["22ab00cf1982302d4cc77546c346ebbbd681e914"],"ref":"refs/changes/19/2319/7","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1509744138,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1509744233,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1509743476,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1509743476,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509732914,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":8,"deletions":0},{"file":"lib/client.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/fast_connection.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"lib/pool.js","type":"MODIFIED","insertions":211,"deletions":-22},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":228,"sizeDeletions":-24}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}]}