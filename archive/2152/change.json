{"project":"joyent/node-vasync","branch":"master","id":"Ia88ef4ca209b2819d45dcefa06fdccdf0bdd83a1","number":"2152","subject":"joyent/node-vasync#33 want filter, filterLimit, and filterSeries Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Reviewed by: David Pacheco \u003cdap@joyent.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"url":"https://cr.joyent.us/2152","commitMessage":"joyent/node-vasync#33 want filter, filterLimit, and filterSeries\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nReviewed by: David Pacheco \u003cdap@joyent.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1498514835,"lastUpdated":1502297924,"open":false,"status":"MERGED","comments":[{"timestamp":1498514835,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 1."},{"timestamp":1498514838,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 60fabbbeb0bb7dc5fb33809227405288aaa89ea1\n    \n    initial commit"},{"timestamp":1498514843,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n(2 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1498514909,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 2."},{"timestamp":1498514912,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 003d68d246801edc10721b7ce36f4c4981121de3\n    \n    make check fixes"},{"timestamp":1498514913,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1498519119,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Patch Set 2: Code-Review+1\n\n(2 comments)"},{"timestamp":1498583398,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1498584376,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1498596926,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1498597078,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1498597135,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 4."},{"timestamp":1498597138,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 494003933d8e9bf219794a18f359a4d6dddc1363\n    \n    name all functions"},{"timestamp":1498597138,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1498597274,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1498684101,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 5."},{"timestamp":1498684104,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit 14136264bf09ef980b49757a6a422d4d69e723a2\n    \n    tests style, ans is always boolean"},{"timestamp":1498684109,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1498684723,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Patch Set 5: Code-Review+1\n\nLGTM"},{"timestamp":1499787513,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1499790402,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Patch Set 5: -Code-Review\n\n(1 comment)"},{"timestamp":1499796684,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 5: Code-Review-1\n\n(5 comments)"},{"timestamp":1500306967,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 5:\n\n(4 comments)"},{"timestamp":1500314673,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 5:\n\n(2 comments)"},{"timestamp":1500392494,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 5:\n\n(2 comments)"},{"timestamp":1500393541,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 6."},{"timestamp":1500393543,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit 23f4bce80261660e2da1b0e455ae0cd5c45a7a52\n    \n    remove each from name, update readme func name, preserve order"},{"timestamp":1500393544,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1500393675,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1500396807,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 5:\n\n(4 comments)"},{"timestamp":1500412274,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 6:\n\n(4 comments)"},{"timestamp":1500502351,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1500578019,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 7."},{"timestamp":1500578022,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 7:\n\nNew commits:\n    \n    commit c3be05dc464bc9781b1f648d4ea5367f01e04cd3\n    \n    rename funcs to filter/filterSeries/filterLimit to match async.js, error\n    handling"},{"timestamp":1500578026,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1500578095,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 8."},{"timestamp":1500578098,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1500578098,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 8:\n\nNew commits:\n    \n    commit 5bb73d676775fcf3cef24faa2a2074c9921d0fe4\n    \n    how did i miss this"},{"timestamp":1500578160,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 9."},{"timestamp":1500578163,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1500578163,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 9:\n\nNew commits:\n    \n    commit 5c69a0a085cdba0da638612d2af93d794f83d466\n    \n    jsl is broken on my build machine"},{"timestamp":1500578251,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1500578350,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 10."},{"timestamp":1500578353,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 10:\n\nNew commits:\n    \n    commit 4e9cd72ba118220716954fda2b1e72801fc7e95b\n    \n    docs"},{"timestamp":1500578354,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1500595536,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 10:\n\n(3 comments)\n\nThis is looking pretty good!"},{"timestamp":1500667798,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 10:\n\n(3 comments)"},{"timestamp":1500669037,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 11."},{"timestamp":1500669040,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 11:\n\nNew commits:\n    \n    commit 661d603f36985deb5f445bac9795c391ae7883fb\n    \n    changes based on dap review"},{"timestamp":1500669040,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1500669187,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 11:\n\nNew patchset pushed.  I added a check for a callback inside filterFunc being called twice - unfortunately because of where the code throws the error (inside a queue function) I can\u0027t catch it inside a test.throws in a test file, so I\u0027m unable to write an effective test for double callback invocation for filter functions."},{"timestamp":1500913517,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 11:\n\n(3 comments)\n\nThanks!"},{"timestamp":1500931267,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 11:\n\n(3 comments)"},{"timestamp":1500931542,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 11:\n\n(1 comment)"},{"timestamp":1500931983,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 12."},{"timestamp":1500931986,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 12:\n\nNew commits:\n    \n    commit 64feea6c5532e75eeeb7bbbdafecfe7d4c9b39b7\n    \n    check for double callback first\n    \n    commit a62de04373b6650a4aed20e14f4ce555e22a1b88\n    \n    use verror list of errors\n    \n    commit bae04444c7abc19aedf170df219a9f20fa50e89b\n    \n    changes based on dap review\n    \n    commit 5b48796c285c3ba657d7b826e029ae63d7c3fcf1\n    \n    docs\n    \n    commit 55dd8d0672452663640f9a9c9036bd372757716a\n    \n    jsl is broken on my build machine\n    \n    commit a7638f7b0e7d94a3400ddc1bf8df0d55f0e04e8c\n    \n    how did i miss this\n    \n    commit 1a174761ae6ad457264ae53d5fcc4d2a5c255152\n    \n    rename funcs to filter/filterSeries/filterLimit to match async.js, error\n    handling\n    \n    commit 285c71c71dda7be8727b48ff2b31fa159f644f76\n    \n    remove each from name, update readme func name, preserve order\n    \n    commit a251cc7a1dd36b1a6415b4fb5353987679a55ef6\n    \n    tests style, ans is always boolean\n    \n    commit 59f15435f17c073356ba756bf6787ef5b4c30cae\n    \n    name all functions\n    \n    commit 7cca76ade301f20617c251daf24a7e4e9af6f0ee\n    \n    make check fixes\n    \n    commit edf4ac27488980e760b8538f103f8981a588ff46\n    \n    initial commit"},{"timestamp":1500931992,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 12: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1500932662,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 13."},{"timestamp":1500932665,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 13:\n\nNew commits:\n    \n    commit 2a313b78d8ba2364bc92fc67b56658d5c5fad390\n    \n    rearrange error checking to properly catch double callback"},{"timestamp":1500932670,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 13: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1500996497,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 11:\n\n(1 comment)\n\nthanks!"},{"timestamp":1500997894,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 14."},{"timestamp":1500997897,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 14: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1500997897,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 14:\n\nNew commits:\n    \n    commit c0ef5be6475b9f7edf54f84f2fd5f4f33b2943e6\n    \n    add double cb test, bump verror for errorFromList"},{"timestamp":1500997938,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 15."},{"timestamp":1500997941,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 15:\n\nNew commits:\n    \n    commit b5886effbd97cda2d8db83def405c06089d2810c\n    \n    line \u003e 80"},{"timestamp":1500997941,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 15: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1500998015,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 16."},{"timestamp":1500998019,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 16:\n\nNew commits:\n    \n    commit a95b5d203fdd08dacabed553ecf889dae7726ab8\n    \n    use proper grammar and puncuation for comments"},{"timestamp":1500998029,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 16: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1501007699,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 16:\n\n(2 comments)\n\nThis is looking great.  I just have a couple more requests for the test suite.  The rest looks great."},{"timestamp":1501102038,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 16:\n\n(2 comments)"},{"timestamp":1501102053,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 17."},{"timestamp":1501102056,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 17:\n\nNew commits:\n    \n    commit 722cd008dc428aef5ab6da3e8cbb7ef82b4935f5\n    \n    test changes based on dap review"},{"timestamp":1501102061,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 17: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1501102103,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 16:\n\nexample test output\n\n $ node tests/filter.js \n TAP version 13\n # filterSeries\n ok 1 input 0: current tasks 1 \u003c\u003d 1\n ok 2 input 1: current tasks 1 \u003c\u003d 1\n ok 3 input 2: current tasks 1 \u003c\u003d 1\n ok 4 input 3: current tasks 1 \u003c\u003d 1\n ok 5 input 4: current tasks 1 \u003c\u003d 1\n ok 6 input 5: current tasks 1 \u003c\u003d 1\n ok 7 error unset\n ok 8 max tasks reached limit\n ok 9 results array correct\n # filterLimit\n ok 10 input 0: current tasks 1 \u003c\u003d 2\n ok 11 input 1: current tasks 2 \u003c\u003d 2\n ok 12 input 2: current tasks 1 \u003c\u003d 2\n ok 13 input 3: current tasks 2 \u003c\u003d 2\n ok 14 input 4: current tasks 1 \u003c\u003d 2\n ok 15 input 5: current tasks 2 \u003c\u003d 2\n ok 16 error unset\n ok 17 max tasks reached limit\n ok 18 results array correct\n  # filter (maintain order)\n ok 19 input 0: current tasks 1 \u003c\u003d 6\n ok 20 input 1: current tasks 2 \u003c\u003d 6\n ok 21 input 2: current tasks 3 \u003c\u003d 6\n ok 22 input 3: current tasks 4 \u003c\u003d 6\n ok 23 input 4: current tasks 5 \u003c\u003d 6\n ok 24 input 5: current tasks 6 \u003c\u003d 6\n ok 25 error unset\n ok 26 max tasks reached limit\n ok 27 results array correct\n # filterSeries error handling\n ok 28 error set\n ok 29 error on input 3\n ok 30 results is unset\n # filterSeries double callback\n ok 31 Expected to throw\n ok 32 Expected to throw\n ok 33 error not set\n ok 34 results array correct \n \n 1..34 \n# tests 34\n # pass  34\n \n # ok"},{"timestamp":1501114265,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 17: Code-Review+1\n\nThanks!  Assuming Trent is actually cool with this, I\u0027m happy to IA as well."},{"timestamp":1501172031,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 18: Commit message was updated."},{"timestamp":1501172742,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 19: Commit message was updated."},{"timestamp":1501184511,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 19: Code-Review+1\n\n(2 comments)"},{"timestamp":1501527258,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 19:\n\n(2 comments)"},{"timestamp":1501527635,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 20."},{"timestamp":1501527638,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 20: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1501527638,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 20:\n\nNew commits:\n    \n    commit 9e450b3e19699de0213bdbab7daaf7c0dfcefe82\n    \n    close vasync queue before returning"},{"timestamp":1501527682,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 21."},{"timestamp":1501527685,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 21:\n\nNew commits:\n    \n    commit c7acbe8cd8a6394fd1e81ef6f238f7f492ec8b2a\n    \n    spaces vs tabs"},{"timestamp":1501527686,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 21: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1501544755,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 21: Code-Review+1 Integration-Approval+1\n\n(1 comment)"},{"timestamp":1501607114,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 19:\n\n(1 comment)"},{"timestamp":1501633551,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 19:\n\n(1 comment)"},{"timestamp":1501633603,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 21: Code-Review+1"},{"timestamp":1502297337,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 22: Commit message was updated."},{"timestamp":1502297924,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Dave Eddy"}],"currentPatchSet":{"number":"22","revision":"a88ef4ca209b2819d45dcefa06fdccdf0bdd83a1","parents":["0132f9ea2104981ca16d1e0360a72c1a7b76c509"],"ref":"refs/changes/52/2152/22","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1502297337,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1501527686,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1501544755,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1501544755,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1501633603,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"SUBM","value":"1","grantedOn":1502297924,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":43,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":121,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tests/filter.js","type":"ADDED","insertions":226,"deletions":0}],"sizeInsertions":391,"sizeDeletions":-1},"patchSets":[{"number":"1","revision":"a33456a4484d68a46270c8d2624647fa1b7daf37","parents":["e7a557e09fea5fcd712324e24f8859c8f1f12736"],"ref":"refs/changes/52/2152/1","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1498514835,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1498514843,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/vasync.js","line":266,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"unparenthesized return expression"},{"file":"lib/vasync.js","line":270,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"unparenthesized return expression"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":44,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":53,"deletions":0},{"file":"tests/filter.js","type":"ADDED","insertions":40,"deletions":0}],"sizeInsertions":137,"sizeDeletions":0},{"number":"2","revision":"5455db29c26bc1544b8b39ab3aaefad9906e328f","parents":["e7a557e09fea5fcd712324e24f8859c8f1f12736"],"ref":"refs/changes/52/2152/2","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1498514909,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1498514913,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1498519119,"by":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"}}],"comments":[{"file":"lib/vasync.js","line":15,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Maybe call it filterParallel? Would be interested to hear others\u0027 opinions"},{"file":"lib/vasync.js","line":15,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"I choose `filterEachParallel` to match the style of `forEachParallel`, since the usage for these functions are almost identical... one function is called on *each* input.  However, I\u0027m opening to changing these function names if it makes sense."},{"file":"lib/vasync.js","line":15,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"That makes sense...\"filterEachParallel\" works for me"},{"file":"lib/vasync.js","line":15,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"chose* that was going to drive me nuts."},{"file":"lib/vasync.js","line":18,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Ditto here"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":44,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":53,"deletions":0},{"file":"tests/filter.js","type":"ADDED","insertions":40,"deletions":0}],"sizeInsertions":137,"sizeDeletions":0},{"number":"3","revision":"44e1e9a5c095f2b31846601986af2647efdbe50f","parents":["e7a557e09fea5fcd712324e24f8859c8f1f12736"],"ref":"refs/changes/52/2152/3","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1498597078,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1498514913,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1498519119,"by":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":44,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":53,"deletions":0},{"file":"tests/filter.js","type":"ADDED","insertions":40,"deletions":0}],"sizeInsertions":137,"sizeDeletions":0},{"number":"4","revision":"8e4fa534a4feebae70f9f1c66a0d314fdbf83554","parents":["e7a557e09fea5fcd712324e24f8859c8f1f12736"],"ref":"refs/changes/52/2152/4","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1498597135,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1498597138,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1498597274,"by":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":44,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":53,"deletions":0},{"file":"tests/filter.js","type":"ADDED","insertions":40,"deletions":0}],"sizeInsertions":137,"sizeDeletions":0},{"number":"5","revision":"81ea8d50ee5467723e82ac6bc476e17e15272a37","parents":["e7a557e09fea5fcd712324e24f8859c8f1f12736"],"ref":"refs/changes/52/2152/5","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1498684101,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1498684109,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1499796684,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"README.md","line":195,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"nit: I\u0027d make that function name *singular*"},{"file":"README.md","line":195,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Done"},{"file":"README.md","line":198,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Error handling? The callback should have an `err` first arg, no?"},{"file":"README.md","line":198,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"I originally had it like this when I drafted the proof of concept (see this gist https://gist.github.com/bahamas10/103d5341b5ec6b7e12272d549c6432ac).\n\nAfter talking with dap over IM we thought it would be best to not change too much of the async.js if it could be avoided.  I don\u0027t think there were very strong feelings on this subject so I\u0027m open to either approach."},{"file":"README.md","line":198,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"My gut would be to include and handle an `err` field (and likely call out that difference from the similar functions in the `async` module).  Otherwise, I don\u0027t see how one can nicely use these new functions with a filter function that *does* do something asynchronous. For example, this contrived case:\n\n```\nmod_vasync.filterEachParallel({\n    inputs: [\u0027bob\u0027, \u0027trent\u0027, \u0027mike\u0027, \u0027alice\u0027],\n    func: function isOperator(login, cb) {\n        ufds.getAccount(login, function (err, account) {\n            if (err) {\n                cb(err);\n            } else {\n                cb(null, account.isOperator());\n            }\n        });\n    }\n}, function (err, results) {\n    if (err) {\n        console.error(\u0027boom:\u0027, err);\n    } else {\n        console.log(\u0027the operators are:\u0027, results);\n    }\n});\n```"},{"file":"README.md","line":198,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Right, that was my thought exactly when I originally had made the gist.  I\u0027ll ping dap for input as well."},{"file":"README.md","line":198,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I think I might be missing some context.  Are these functions modeled on async\u0027s \"filter\" and \"filterSeries\"?  It looks like \"async.filter\"\u0027s final callback does take an error argument:\nhttps://caolan.github.io/async/docs.html#filter\n\nand the same with async.filterSeries.\n\nIs there any reason not to call them \"filter\" and \"filterSeries\" and have them use the exact same function signatures as async (except for the usual change of having vasync return some value you can inspect to see what\u0027s going on)?  Again, sorry if I\u0027m missing some important context."},{"file":"README.md","line":198,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Oh interesting, that must have been added sometime after the version of async.js we have shipping with the platform.\n\n\nSee this line for how async.filter is currently used:  https://github.com/joyent/smartos-live/blob/master/src/vm/node_modules/vmload/index.js#L993-L995\n\n\nI\u0027ll make the change to support the \"err\" arguments to match the documentation above.\n\n\nI called them filterEachParallel and filterEachPipeline to try and match the existing forEach* functions that exist in this code base.  Also, these functions take an object with \"inputs\" and \"func\", would you prefer that they just take an array and a function as the first and second argument respectively?"},{"file":"README.md","line":198,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"My bias would be to have it be a drop-in replacement for async unless there\u0027s a particular reason to do otherwise, so I\u0027d probably start with using the same names and arguments.  We could also create wrappers with names and arguments more like the way we do things.  (Either one could be the wrapper, if we decide to have both.)"},{"file":"README.md","line":198,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Sounds good.  I\u0027ve pushed a new patchset that adds filter/filterLimit/filterSeries that are fully drop in replacements for async.js.  I\u0027ve modeled them after the current documentation for async.js, and not our old out-dated version in the platform."},{"file":"README.md","line":288,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Ditto on error handling Q from above."},{"file":"lib/vasync.js","line":15,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I agree with Isaac that I\u0027d tend to \u0027filterParallel\u0027 (over \u0027filterEachParallel\u0027) for naming.  The idea being that it is the array of inputs that is being filtered (a la Array.prototype.filter) rather than a filtering of each element. It is definitely bikesheddy and minor though."},{"file":"lib/vasync.js","line":15,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"True, that makes more sense to me: we aren\u0027t filter \"each\" input per se, but the entire array of inputs itself.  I\u0027d be interested to see what dap thinks about this."},{"file":"lib/vasync.js","line":15,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Since the implementation of waterfall(), the usual approach for vasync has been to provide drop-in-compatible replacements where possible.  If the node-async functions are reasonable interfaces and we can match them, is there any reason not to match the names?  On the other hand, if ours are different (e.g., because the node-async ones are unsafe at any speed), we definitely should call them something different.\n\nIf ours are different, it does feel like filterParallel() is more consistent with what we\u0027ve done.  I guess the other one would be filterPipeline(), but it\u0027s not really a pipeline.  But then, I\u0027m not sure forEachPipeline() is either."},{"file":"lib/vasync.js","line":292,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"This line is my only real concern.  The async.js versions of these functions (async.filter and async.filterSeries) don\u0027t require the function parameter to strictly be a boolean, but instead just check the truthiness of the value given.  If need be, I can remove this assert to loosen up the function to better match async.js."},{"file":"lib/vasync.js","line":292,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"This is \"do what makes sense\" vs \"async is bad but we must follow it exactly\" - someone else should weigh in?"},{"file":"lib/vasync.js","line":292,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter allows for truthy: \"for which callback returns a value that coerces to true.\"\n\nMy bias would be:\n\n(a) to allow truthy values (and be sure to document that), and\n(b) get dap\u0027s opinion."},{"file":"lib/vasync.js","line":292,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Ah ok, based on the [].filter documentation I\u0027d be more comfortable not asserting booleaness, and just shoving whatever is in \"ans\" into an if statement to coerce it."},{"file":"lib/vasync.js","line":292,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I usually prefer rigidity about types like this, especially booleans, but using truthiness here seems okay since it\u0027s explicit that it will be used as a boolean value (and that\u0027s the only way it could be used).  If that feels reasonable to people, let\u0027s do that."},{"file":"lib/vasync.js","line":292,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Sounds reasonable to me."},{"file":"lib/vasync.js","line":296,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Does this handle maintaining order from args.inputs? (node-async\u0027s \u0027filter\u0027 function documents that it maintains order)\n\nOur test cases should test for that using an asynchronous filter function that takes a longer time for one of the earlier elements."},{"file":"lib/vasync.js","line":296,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Ah, this will not preserve order as written.  I agree that it would be beneficial to do so and can rewrite this to honor that."},{"file":"lib/vasync.js","line":296,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":44,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":53,"deletions":0},{"file":"tests/filter.js","type":"ADDED","insertions":38,"deletions":0}],"sizeInsertions":135,"sizeDeletions":0},{"number":"6","revision":"442cd8aa980e1e9bcf1a94d278fb5b4b137434c6","parents":["e7a557e09fea5fcd712324e24f8859c8f1f12736"],"ref":"refs/changes/52/2152/6","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1500393541,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500393544,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1499796684,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"lib/vasync.js","line":276,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This isn\u0027t quite the indenting style for this repo (see L501)."},{"file":"lib/vasync.js","line":276,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"I tried to match forEachPipeline (L236), but that appears to start with 4 spaces and then use tab characters, so that probably isn\u0027t the best style to copy."},{"file":"lib/vasync.js","line":298,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"@trent the \"err\" is ignored here *for now* until we have consensus on how these filter functions should handle errors."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":44,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":55,"deletions":0},{"file":"tests/filter.js","type":"ADDED","insertions":57,"deletions":0}],"sizeInsertions":156,"sizeDeletions":0},{"number":"7","revision":"cb63e8fec631a5f1025a6459ec78f2b258efcaca","parents":["e7a557e09fea5fcd712324e24f8859c8f1f12736"],"ref":"refs/changes/52/2152/7","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1500578019,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1500578026,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1499796684,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"tests/filter.js","line":82,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: undeclared identifier: t"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":45,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":83,"deletions":0},{"file":"tests/filter.js","type":"ADDED","insertions":95,"deletions":0}],"sizeInsertions":223,"sizeDeletions":0},{"number":"8","revision":"630f7e463829bd38bb490edd3a5681600148b0d3","parents":["e7a557e09fea5fcd712324e24f8859c8f1f12736"],"ref":"refs/changes/52/2152/8","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1500578095,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1500578098,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1499796684,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"lib/vasync.js","line":334,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"unparenthesized return expression"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":45,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":83,"deletions":0},{"file":"tests/filter.js","type":"ADDED","insertions":95,"deletions":0}],"sizeInsertions":223,"sizeDeletions":0},{"number":"9","revision":"6452aee72d968e7368ee5f05c7dea2477267bfc0","parents":["e7a557e09fea5fcd712324e24f8859c8f1f12736"],"ref":"refs/changes/52/2152/9","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1500578160,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500578163,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1499796684,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":45,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":83,"deletions":0},{"file":"tests/filter.js","type":"ADDED","insertions":95,"deletions":0}],"sizeInsertions":223,"sizeDeletions":0},{"number":"10","revision":"7b4fabbd23582bcbc0c0e29fb92be6291aa54d06","parents":["e7a557e09fea5fcd712324e24f8859c8f1f12736"],"ref":"refs/changes/52/2152/10","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1500578350,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500578354,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1499796684,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"lib/vasync.js","line":281,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I didn\u0027t realize you could specify Infinity for the queue\u0027s concurrency!  Does that work?"},{"file":"lib/vasync.js","line":281,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"yep! in my testing it worked just fine.  The assert checks for limit in queue/queuev pass when given Infinity.\n\n \u003e Math.floor(Infinity) \u003d\u003d\u003d Infinity\n true\n \u003e Infinity \u003e 0\n true\n\nAnd then, the only other place concurrency is used to check if the queue is saturated\n\n (this.npending \u003d\u003d\u003d this.concurrency)\n\nwhich will never resolve to true, so this works perfectly."},{"file":"lib/vasync.js","line":292,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"It seems like if two filter callbacks invoked this function with an error on the same tick, we might invoke the user\u0027s callback twice.  Is there anything that would prevent that?\n\nIt might also be nice to assert that the caller didn\u0027t invoke this callback more than once for any one invocation of filterFunc().\n\nIt also seems like as it is now, if a filter function returns an error, we can call the user\u0027s final callback while there are arbitrary other filter callbacks still outstanding.  I suspect that sort of thing is common and something that async.js does, but it also seems potentially fraught (and I kind of hate queue.kill() for this reason).  What do you think about blocking on them all completing?  I think it might also be simpler.  Say, we set a flag here, and we check it at line 284 before calling filterFunc().  Then we don\u0027t bother killing the queue -- we just wait for it to finish normally.  What do you think?"},{"file":"lib/vasync.js","line":292,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"\u003e It seems like if two filter callbacks invoked this function with an error on the same tick\n\nAh yes, that is definitely a possibility.  I will rework it to ensure the callback is only ever called once\n\n\u003e It might also be nice to assert that the caller didn\u0027t invoke this callback more than once for any one invocation of filterFunc().\n\nAgreed, having vasync tell me that a callback has been invoked more than once has saved me multiple times - I\u0027ll ensure that that is in effect with the filter family of functions as well.\n\n\u003e It also seems like as it is now, if a filter function returns an error, we can call the user\u0027s final callback while there are arbitrary other filter callbacks still outstanding\n\nYes, this is true.  This is currently how async.js works, but that doesn\u0027t mean the vasync version will need to.  I would be happy to rewrite this function to wait until *all* currently queued jobs drain when an error is encountered before calling back to the user.  This way, when the users callback is invoked, with either an error or the results array, they are guaranteed that no outstanding tasks are being processed."},{"file":"lib/vasync.js","line":296,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Can we keep the one-line comments complete sentences (with caps and punctuation)?"},{"file":"lib/vasync.js","line":296,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":43,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":83,"deletions":0},{"file":"tests/filter.js","type":"ADDED","insertions":95,"deletions":0}],"sizeInsertions":221,"sizeDeletions":0},{"number":"11","revision":"d946963259528d0e9ecaf04ffd5bf3bee6f2173c","parents":["e7a557e09fea5fcd712324e24f8859c8f1f12736"],"ref":"refs/changes/52/2152/11","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1500669037,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500669040,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1499796684,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"lib/vasync.js","line":273,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Can we assert that this is not NaN as well?  (Sorry for not catching that last time.)  I wouldn\u0027t worry about it except that we did just hit something exactly like that under MANTA-3346."},{"file":"lib/vasync.js","line":273,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Done"},{"file":"lib/vasync.js","line":302,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Do we care which error was preserved?  It seems like this will preserve the last one.  I could also envision preserving the first one or all of them (using `VError.errorFromList`)."},{"file":"lib/vasync.js","line":302,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"I don\u0027t think we actually care which error is preserved, but using VError.errorFromList seems like it could make the most sense here."},{"file":"lib/vasync.js","line":311,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This doesn\u0027t catch the case that a filter function invokes this callback twice with an error.  I\u0027m not sure what would happen in that case -- we presumably will end up invoking `cb()` twice?\n\nIs it worth adding some test cases for stuff like this (i.e., multiple errors, with other filter invocations outstanding)?"},{"file":"lib/vasync.js","line":311,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"That\u0027s true, I will move this logic up earlier to ensure that the callback is *never* called twice.\n\nAlso, see my comment on patchset 11\n\n\u003e New patchset pushed.  I added a check for a callback inside filterFunc being called twice - unfortunately because of where the code throws the error (inside a queue function) I can\u0027t catch it inside a test.throws in a test file, so I\u0027m unable to write an effective test for double callback invocation for filter functions.\n\nI don\u0027t know a good way to test an error being thrown.  Perhaps the error should not be thrown but should instead should be returned via callback? All other functions in vasync throw an error if a callback is invoked twice so I wanted to keep with that standard."},{"file":"lib/vasync.js","line":311,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Could you not provide a filter function that just invokes the callback twice and asserts the second time that an error was thrown?  There\u0027s assert.throws() for that, although I think all it does is wrap the call in a try/catch and blow the assertion if it exits the try block without going through the catch block (and also if the message doesn\u0027t match what\u0027s expected).\n\nFor a test like this, I would consider having a sort of customizable filter function where you can tell it what to do for each input, like \"for input 1, complete quickly.  \"for input 2, invoke the callback twice and assert that the second time throws\", etc."},{"file":"lib/vasync.js","line":311,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Ah yes, I don\u0027t know how I overlooked that solution.  I\u0027ll add tests for this and push a new patchset."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":43,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":116,"deletions":0},{"file":"tests/filter.js","type":"ADDED","insertions":95,"deletions":0}],"sizeInsertions":254,"sizeDeletions":0},{"number":"12","revision":"62f74102126797960b3ffd42023f4784278afa0f","parents":["0132f9ea2104981ca16d1e0360a72c1a7b76c509"],"ref":"refs/changes/52/2152/12","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1500931983,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500931992,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1499796684,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":43,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":118,"deletions":0},{"file":"tests/filter.js","type":"ADDED","insertions":95,"deletions":0}],"sizeInsertions":256,"sizeDeletions":0},{"number":"13","revision":"85a0156e3960950b3d6532e1dcffda0b22cc1137","parents":["0132f9ea2104981ca16d1e0360a72c1a7b76c509"],"ref":"refs/changes/52/2152/13","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1500932662,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500932670,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1499796684,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":43,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":119,"deletions":0},{"file":"tests/filter.js","type":"ADDED","insertions":95,"deletions":0}],"sizeInsertions":257,"sizeDeletions":0},{"number":"14","revision":"5b3e73fd31389327027bdc3fe6d045d76928c9de","parents":["0132f9ea2104981ca16d1e0360a72c1a7b76c509"],"ref":"refs/changes/52/2152/14","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1500997894,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1500997897,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1499796684,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"tests/filter.js","line":130,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line \u003e 80 characters"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":43,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":119,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tests/filter.js","type":"ADDED","insertions":133,"deletions":0}],"sizeInsertions":296,"sizeDeletions":-1},{"number":"15","revision":"aedb9484710e07186a85dd50c0a9fcfef4ac3c2e","parents":["0132f9ea2104981ca16d1e0360a72c1a7b76c509"],"ref":"refs/changes/52/2152/15","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1500997938,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500997941,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1499796684,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":43,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":119,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tests/filter.js","type":"ADDED","insertions":134,"deletions":0}],"sizeInsertions":297,"sizeDeletions":-1},{"number":"16","revision":"6c77895e739d17668f3290e57b3135de0b976942","parents":["0132f9ea2104981ca16d1e0360a72c1a7b76c509"],"ref":"refs/changes/52/2152/16","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1500998015,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500998029,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1499796684,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"tests/filter.js","line":35,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Could we also test that the limit is honored?  I think you could do this reasonably easily by making this filter function asynchronous (maybe with a small delay), bumping a \"concurrency\" counter in it, decrementing it when it calls the callback, and keeping track of the maximum.  We may want to do the same thing for filterSeries and filter without limit."},{"file":"tests/filter.js","line":35,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Done"},{"file":"tests/filter.js","line":41,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I would suggest making the timeout not be random, but explicitly making sure the timeout is longer for the earlier ones.  In fact, you could even have the async filter function wait until all of the invocations had been made without invoking any of the callbacks (which would verify that we use unlimited concurrency), and then invoke the callbacks in any deterministic order other than 0 - 6.\n\nThat\u0027s just an idea -- don\u0027t feel obligated to do it that way.  But it would be nice if the test were deterministic and always verified the correct result.  As it is, it could work by accident sometimes (depending on randomness) and it could produce inconsistent results if the implementation were incorrect."},{"file":"tests/filter.js","line":41,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Ah yes, having it rely on a random value could result in a case where it could work accidentally sometimes even if the logic was fundamentally flawed in the implementation.  I\u0027ll rework this test to ensure maximum concurrency is reached."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":43,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":119,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tests/filter.js","type":"ADDED","insertions":134,"deletions":0}],"sizeInsertions":297,"sizeDeletions":-1},{"number":"17","revision":"90b924dfc2f6d12695e63285b3c230f968d8e19b","parents":["0132f9ea2104981ca16d1e0360a72c1a7b76c509"],"ref":"refs/changes/52/2152/17","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1501102053,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1501114265,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1501102061,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1499796684,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":43,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":119,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tests/filter.js","type":"ADDED","insertions":207,"deletions":0}],"sizeInsertions":370,"sizeDeletions":-1},{"number":"18","revision":"6f607e40d8204c8635210e887c6ad73dfd3ce5ce","parents":["0132f9ea2104981ca16d1e0360a72c1a7b76c509"],"ref":"refs/changes/52/2152/18","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1501172031,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1501114265,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1501102061,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1499796684,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":43,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":119,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tests/filter.js","type":"ADDED","insertions":207,"deletions":0}],"sizeInsertions":370,"sizeDeletions":-1},{"number":"19","revision":"965cdb04f37bb3cb3c74d5c7f8196fb124a0fe6f","parents":["0132f9ea2104981ca16d1e0360a72c1a7b76c509"],"ref":"refs/changes/52/2152/19","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1501172742,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1501114265,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1501102061,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1501184511,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"lib/vasync.js","line":323,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"That could use q.pushOne FWIW."},{"file":"lib/vasync.js","line":323,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"This is an interesting point.  I purposefully used q.push since that is its public interface, and isn\u0027t likely to change (pushOne is marked private).  Since this code is inside vasync.js, using the private interface isn\u0027t as big of an issue as a consumer using that method.\n\nWhat do you think makes the most sense here? I could see either argument for using the private interface inside the module it\u0027s private to itself."},{"file":"lib/vasync.js","line":323,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"pushOne should be (premature optmization alert!) \"faster\" in that it\u0027ll avoid making an array out of each pushed item in the `.push()` impl."},{"file":"lib/vasync.js","line":323,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"That is true. My reasoning here was that I wouldn\u0027t worry about the implementation of the Queue object, and instead just use the interface it advertises.  However, because the filter* function implementations share the same file I think using the private interfaces might be acceptable.\n\nI\u0027m leaning more towards using `q.pushOne` over `q.push` at this point, but will ask dap for his opinion on the matter."},{"file":"lib/vasync.js","line":323,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I\u0027d stick to the public interface until we find it\u0027s a problem."},{"file":"lib/vasync.js","line":329,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"The impl here uses \u0027drain\u0027 on an un-`close()`d queue, which is fine. However, it does mean that we are passing back a queue instance on which the caller could `.push()` more tasks (even though the task objects are an internal format).\nObviously that would be unsupported. However, would it be slightly nicer to:\n\n1. call `q.close()` before returning; and\n2. use the `end` event rather than `drain`?"},{"file":"lib/vasync.js","line":329,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Good point.  I will close the queue before returning it, and use the \u0027end\u0027 event instead of the \u0027drain\u0027 event."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":43,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":119,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tests/filter.js","type":"ADDED","insertions":207,"deletions":0}],"sizeInsertions":370,"sizeDeletions":-1},{"number":"20","revision":"7892a694dbddc2bdea747cbc99ed8ed3a0b47c14","parents":["0132f9ea2104981ca16d1e0360a72c1a7b76c509"],"ref":"refs/changes/52/2152/20","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1501527635,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1501527638,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"tests/filter.js","line":213,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":43,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":121,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tests/filter.js","type":"ADDED","insertions":226,"deletions":0}],"sizeInsertions":391,"sizeDeletions":-1},{"number":"21","revision":"3fe98049f9bf3830b3a19dae590b72886d97551e","parents":["0132f9ea2104981ca16d1e0360a72c1a7b76c509"],"ref":"refs/changes/52/2152/21","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1501527682,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1501633603,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1501527686,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1501544755,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1501544755,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":43,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":121,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tests/filter.js","type":"ADDED","insertions":226,"deletions":0}],"sizeInsertions":391,"sizeDeletions":-1},{"number":"22","revision":"a88ef4ca209b2819d45dcefa06fdccdf0bdd83a1","parents":["0132f9ea2104981ca16d1e0360a72c1a7b76c509"],"ref":"refs/changes/52/2152/22","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1502297337,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1501633603,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1501527686,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1501544755,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1501544755,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1502297924,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":43,"deletions":0},{"file":"lib/vasync.js","type":"MODIFIED","insertions":121,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tests/filter.js","type":"ADDED","insertions":226,"deletions":0}],"sizeInsertions":391,"sizeDeletions":-1}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}]}