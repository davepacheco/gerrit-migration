{"project":"joyent/illumos-joyent","branch":"master","id":"Icc59441dae061aa8d400c05f9b740d4126017e99","number":"6165","subject":"OS-7771 Ship smp driver OS-7772 /usr/lib/scsi/smp should decode general and manufacturer info Reviewed by: Kody Kantor \u003ckody.kantor@joyent.com\u003e Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Approved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e","owner":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"url":"https://cr.joyent.us/6165","commitMessage":"OS-7771 Ship smp driver\nOS-7772 /usr/lib/scsi/smp should decode general and manufacturer info\nReviewed by: Kody Kantor \u003ckody.kantor@joyent.com\u003e\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1556283886,"lastUpdated":1557241938,"open":false,"status":"MERGED","comments":[{"timestamp":1556283886,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 1."},{"timestamp":1556294941,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\n(2 comments)\n\nlooks good, just saw a few nits"},{"timestamp":1556298259,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 1:\n\n(1 comment)\n\nI think this looks good too. The driver was written for SAS-2, like you mentioned earlier. I didn\u0027t go through and make sure that the request/response struct definition(s) line up with SAS-3 or SAS-4. Is that something we should be concerned about when it comes to using this in production?"},{"timestamp":1556313964,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 2."},{"timestamp":1556313965,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(3 comments)\n\n\u003e (1 comment)\n \u003e \n \u003e I think this looks good too. The driver was written for SAS-2, like\n \u003e you mentioned earlier. I didn\u0027t go through and make sure that the\n \u003e request/response struct definition(s) line up with SAS-3 or SAS-4.\n \u003e Is that something we should be concerned about when it comes to\n \u003e using this in production?\n\nI went through and did that while going through the changes. Basically, the way that these things have been revved it\u0027s been in a backwards compatible fashion in terms of the meaning of all the fields. I think that over time, we\u0027ll want to go through and extend this to cover the newer SAS standards. Note, no SAS-4 products are available right now, so the biggest thing is between SAS-2 and SAS-3.\n\nAt the moment, I believe this is generally safe."},{"timestamp":1556551298,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\n(1 comment)\n\nSorry, one more question based on your last update."},{"timestamp":1556556955,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1556731147,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 3."},{"timestamp":1556731159,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1556731397,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1556738631,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1556918958,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1557241884,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1557241924,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1557241938,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Robert Mustacchi"}],"currentPatchSet":{"number":"5","revision":"cc59441dae061aa8d400c05f9b740d4126017e99","parents":["7909161cccf1283e5c7a7057bb9c7f305a30e55a"],"ref":"refs/changes/65/6165/5","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1557241924,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556731397,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556738631,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556918958,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1557241938,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/cmd/scsi/smp/common/smp.c","type":"MODIFIED","insertions":183,"deletions":0}],"sizeInsertions":184,"sizeDeletions":0},"patchSets":[{"number":"1","revision":"852bc4c37fe9f1b6c5c27941129fa7ec3bb65f75","parents":["ce79a84f945c46383786999babb4bcf38fd56a43"],"ref":"refs/changes/65/6165/1","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1556283886,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/cmd/scsi/smp/common/smp.c","line":84,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Does the data we get back come with a bunch of trailing white space?"},{"file":"usr/src/cmd/scsi/smp/common/smp.c","line":84,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Yes, the SCSI standards basically require that these arrays are padded with trailing spaces (0x20)."},{"file":"usr/src/cmd/scsi/smp/common/smp.c","line":690,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"typo"},{"file":"usr/src/cmd/scsi/smp/common/smp.c","line":690,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/scsi/smp/common/smp.c","line":713,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"the capitalization here seems inconsistent with your previous usage of supported/unsupported"},{"file":"usr/src/cmd/scsi/smp/common/smp.c","line":713,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/cmd/scsi/smp/common/smp.c","type":"MODIFIED","insertions":183,"deletions":0}],"sizeInsertions":184,"sizeDeletions":0},{"number":"2","revision":"644408cd846289bd50d8144d50dfb96dd32c4499","parents":["ce79a84f945c46383786999babb4bcf38fd56a43"],"ref":"refs/changes/65/6165/2","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1556313964,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556556955,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"comments":[{"file":"usr/src/cmd/scsi/smp/common/smp.c","line":709,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Do you want to capitalize these to match the usage of \"Supported\" elsewhere?"},{"file":"usr/src/cmd/scsi/smp/common/smp.c","line":709,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I\u0027ve gone through and tried to consistently capitalize everything."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/cmd/scsi/smp/common/smp.c","type":"MODIFIED","insertions":183,"deletions":0}],"sizeInsertions":184,"sizeDeletions":0},{"number":"3","revision":"0f1d309853ae9defe955fbcb9f7b66ab9d0bc3e8","parents":["ce79a84f945c46383786999babb4bcf38fd56a43"],"ref":"refs/changes/65/6165/3","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1556731147,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556731397,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556918958,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556738631,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/cmd/scsi/smp/common/smp.c","type":"MODIFIED","insertions":183,"deletions":0}],"sizeInsertions":184,"sizeDeletions":0},{"number":"4","revision":"d09e4a23e6e50e40429bd97946d22e17226d4dde","parents":["7909161cccf1283e5c7a7057bb9c7f305a30e55a"],"ref":"refs/changes/65/6165/4","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1557241884,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556731397,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556918958,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556738631,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/cmd/scsi/smp/common/smp.c","type":"MODIFIED","insertions":183,"deletions":0}],"sizeInsertions":184,"sizeDeletions":0},{"number":"5","revision":"cc59441dae061aa8d400c05f9b740d4126017e99","parents":["7909161cccf1283e5c7a7057bb9c7f305a30e55a"],"ref":"refs/changes/65/6165/5","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1557241924,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1557241938,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556731397,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556918958,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556738631,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/cmd/scsi/smp/common/smp.c","type":"MODIFIED","insertions":183,"deletions":0}],"sizeInsertions":184,"sizeDeletions":0}],"allReviewers":[{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}]}