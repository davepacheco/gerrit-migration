{"project":"joyent/sdc-docker","branch":"master","id":"Ibdba952122b612d820611b584388951129d30c14","number":"2567","subject":"DOCKER-1103 Docker build works for accounts with provisioning disabled","owner":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"url":"https://cr.joyent.us/2567","commitMessage":"DOCKER-1103 Docker build works for accounts with provisioning disabled\n","createdOn":1505361421,"lastUpdated":1505847241,"open":false,"status":"MERGED","comments":[{"timestamp":1505361421,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 1."},{"timestamp":1505361423,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 3c55e5dbc03c8a02495131389d437c2bb3012594\n    \n    DOCKER-1103 Docker build works for accounts with provisioning disabled"},{"timestamp":1505361455,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1505361458,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 2."},{"timestamp":1505361460,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 0f4c9e32df80c79340fb7436e78ad008238556c3\n    \n    bump package.json version"},{"timestamp":1505361506,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1505751511,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 3: Patch Set 2 was rebased"},{"timestamp":1505751546,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3:\n\n\"make check\" passed ok"},{"timestamp":1505846844,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1505847059,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1505847077,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 4."},{"timestamp":1505847078,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit b2d6a77a30bef7a15568a4f64866fb61a7ed14f9\n    \n    rebase\n    \n    commit ff3bf58ff6416ebb29b8e5df598a092f5e4a60bb\n    \n    DOCKER-1103 Docker build works for accounts with provisioning disabled"},{"timestamp":1505847130,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1505847204,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1"},{"timestamp":1505847241,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Todd Whiteman"}],"currentPatchSet":{"number":"4","revision":"bdba952122b612d820611b584388951129d30c14","parents":["1ec428f81e40103db3e99feb1a30bc35d39655dd"],"ref":"refs/changes/67/2567/4","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1505847077,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505847130,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505847204,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1505847204,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1505847241,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/build.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-build.test.js","type":"MODIFIED","insertions":34,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":0,"deletions":-3}],"sizeInsertions":40,"sizeDeletions":-7},"patchSets":[{"number":"1","revision":"dabceee311a87d04841aa59d739284841f3efd38","parents":["b751d9dc133205bf1a81b28b8eec0ddc2a1cc19f"],"ref":"refs/changes/67/2567/1","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1505361421,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505361455,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/build.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"test/integration/api-build.test.js","type":"MODIFIED","insertions":34,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":0,"deletions":-3}],"sizeInsertions":39,"sizeDeletions":-6},{"number":"2","revision":"b4228858387b7b4a677cf93987c42ca793ca31f0","parents":["b751d9dc133205bf1a81b28b8eec0ddc2a1cc19f"],"ref":"refs/changes/67/2567/2","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1505361458,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505361506,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/build.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-build.test.js","type":"MODIFIED","insertions":34,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":0,"deletions":-3}],"sizeInsertions":40,"sizeDeletions":-7},{"number":"3","revision":"52a7731a7946041d3c71bb47c74aa2b1296c18b3","parents":["9a9337cc3f2e77dd850872d101a7bb01e6872fb9"],"ref":"refs/changes/67/2567/3","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1505751511,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505361506,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/integration/helpers.js","line":1344,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"What was removing this about? Was this bogus code from before?"},{"file":"test/integration/helpers.js","line":1344,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"It just creates spam in the test output - the error is (and should be) checked by the calling function, i.e. using t.ifErr().\n\nThis is the first case of a build actually returning an http status error (all others return 200 and send errors through the JSON body)."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/build.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-build.test.js","type":"MODIFIED","insertions":34,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":0,"deletions":-3}],"sizeInsertions":40,"sizeDeletions":-7},{"number":"4","revision":"bdba952122b612d820611b584388951129d30c14","parents":["1ec428f81e40103db3e99feb1a30bc35d39655dd"],"ref":"refs/changes/67/2567/4","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1505847077,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505847130,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505847204,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1505847204,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1505847241,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/build.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-build.test.js","type":"MODIFIED","insertions":34,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":0,"deletions":-3}],"sizeInsertions":40,"sizeDeletions":-7}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}]}