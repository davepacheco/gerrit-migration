From fa2c0772c675b192af032d0bb34457947174dda0 Mon Sep 17 00:00:00 2001
From: Pedro Palazon Candel <pedro@joyent.com>
Date: Mon, 27 Aug 2018 16:42:23 +0200
Subject: [PATCH] TRITON-716 Add bhyve to list of allowed brands to do
 snapshots

---
 lib/endpoints/vms.js | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/lib/endpoints/vms.js b/lib/endpoints/vms.js
index 1f24c5a..e2cfd35 100644
--- a/lib/endpoints/vms.js
+++ b/lib/endpoints/vms.js
@@ -1472,7 +1472,7 @@ function createVm(req, res, next) {
  */
 function canSnapshot(vm) {
 
-    if (['joyent', 'joyent-minimal', 'lx'].indexOf(vm.brand) === -1) {
+    if (['joyent', 'joyent-minimal', 'lx', 'bhyve'].indexOf(vm.brand) === -1) {
         return (new errors.BrandNotSupportedError(
             'snapshots are not supported for VMs of brand "' + vm.brand + '"'));
     }
-- 
2.21.0

