{"project":"joyent/manta-marlin","branch":"master","id":"I2ee0aabe0c52ac9329f33dd3b2fee135b07b9437","number":"270","subject":"MANTA-2963 add support for 64-bit marlin image 16.1.0 Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Approved by: Robert Mustacchi \u003crm@joyent.com\u003e","owner":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"url":"https://cr.joyent.us/270","commitMessage":"MANTA-2963 add support for 64-bit marlin image 16.1.0\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nApproved by: Robert Mustacchi \u003crm@joyent.com\u003e\n","createdOn":1470932461,"lastUpdated":1471021034,"open":false,"status":"MERGED","comments":[{"timestamp":1470932461,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 1."},{"timestamp":1470932508,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1470932933,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1470933276,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\nThe image itself was tested previously under MANTA-2783.\n\nThere are a few pieces to this change:\n- agentconfig.coal.json is the template config file for new marlin agent deployments\n- config.coal.json is used by the marlin *client*, which is used by muskie when users create jobs, in order to validate the image that the user requested\n\nI tested this by first installing my client into a fresh clone of muskie and then creating a job explicitly with the new image (which worked).  I created jobs that requested the old and new image explicitly and got the correct one each time.  I created a job using the default image and continued getting the old one as expected.\n\nThen I applied the configuration change to my already-deployed marlin agent that changes the default image.  I repeated the process with the same results except that the default image was now the new one as expected."},{"timestamp":1470953931,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1: Integration-Approval+1"},{"timestamp":1470959585,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2: Commit message was updated."},{"timestamp":1471021034,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by David Pacheco"}],"currentPatchSet":{"number":"2","revision":"6424ca8a00bfb8936d31110ed2d30172f205e35f","parents":["c59b640a8651527d654812b7cfab6d79466274a0"],"ref":"refs/changes/70/270/2","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1470959585,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1470932508,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470932933,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470953931,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1471021034,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"agent/etc/agentconfig.coal.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"dev/test/live/tst.main.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"jobsupervisor/etc/config.coal.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"jobsupervisor/sapi_manifests/marlin/template","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":5,"sizeDeletions":-5},"patchSets":[{"number":"1","revision":"2ee0aabe0c52ac9329f33dd3b2fee135b07b9437","parents":["c59b640a8651527d654812b7cfab6d79466274a0"],"ref":"refs/changes/70/270/1","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1470932461,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470932933,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470953931,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1470932508,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"agent/etc/agentconfig.coal.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"dev/test/live/tst.main.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"jobsupervisor/etc/config.coal.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"jobsupervisor/sapi_manifests/marlin/template","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":5,"sizeDeletions":-5},{"number":"2","revision":"6424ca8a00bfb8936d31110ed2d30172f205e35f","parents":["c59b640a8651527d654812b7cfab6d79466274a0"],"ref":"refs/changes/70/270/2","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1470959585,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1471021034,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470932933,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470953931,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1470932508,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"agent/etc/agentconfig.coal.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"dev/test/live/tst.main.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"jobsupervisor/etc/config.coal.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"jobsupervisor/sapi_manifests/marlin/template","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":5,"sizeDeletions":-5}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}]}