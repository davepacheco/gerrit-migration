From 93860685d1877f20b4266917f088ec09b7396ec1 Mon Sep 17 00:00:00 2001
From: Chris Burroughs <chris.burroughs@joyent.com>
Date: Sat, 15 Jun 2019 01:29:32 +0000
Subject: [PATCH] =?UTF-8?q?TRITON-1724=20sapi=20should=20use=20node=20v6.x?=
 =?UTF-8?q?=20TRITON-1725=20update=20sapi=20base=20image=20to=20triton-ori?=
 =?UTF-8?q?gin-x86=5F64-18.4.0=20Reviewed=20by:=20Trent=20Mick=20<trentm@g?=
 =?UTF-8?q?mail.com>=20Reviewed=20by:=20Pedro=20Palaz=C3=B3n=20Candel=20<p?=
 =?UTF-8?q?edro@joyent.com>=20Approved=20by:=20Trent=20Mick=20<trentm@gmai?=
 =?UTF-8?q?l.com>=20Approved=20by:=20Pedro=20Palaz=C3=B3n=20Candel=20<pedr?=
 =?UTF-8?q?o@joyent.com>?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 Makefile | 10 +++++-----
 deps/eng |  2 +-
 2 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/Makefile b/Makefile
index 32283e0..f82f742 100644
--- a/Makefile
+++ b/Makefile
@@ -32,11 +32,10 @@ JSSTYLE_FILES	 = $(JS_FILES)
 JSSTYLE_FLAGS    = -o indent=4,doxygen,unparenthesized-return=0
 SMF_MANIFESTS	 = smf/manifests/sapi.xml
 
-NODE_PREBUILT_VERSION=v4.9.0
+NODE_PREBUILT_VERSION=v6.17.0
 ifeq ($(shell uname -s),SunOS)
-	NODE_PREBUILT_TAG=zone
-	# The sdcnode matching image for triton-origin-multiarch-15.4.1 images.
-	NODE_PREBUILT_IMAGE=18b094b0-eb01-11e5-80c1-175dac7ddf02
+	NODE_PREBUILT_TAG=zone64
+	NODE_PREBUILT_IMAGE=c2c31b00-1d60-11e9-9a77-ff9f06554b0f
 endif
 
 ENGBLD_USE_BUILDIMAGE	= true
@@ -73,7 +72,8 @@ SVC_TARBALL 	:= $(NAME)-pkg-$(STAMP).tar.gz
 SVC_PKGDIR	:= $(TOP)/$(BUILD)/service
 SVC_INSTDIR	:= $(SVC_PKGDIR)/root/opt/smartdc/sapi
 
-BASE_IMAGE_UUID = 04a48d7d-6bb5-4e83-8c3b-e60a99e0f48f
+# our base image is triton-origin-x86_64-18.4.0
+BASE_IMAGE_UUID = a9368831-958e-432d-a031-f8ce6768d190
 BUILDIMAGE_NAME = $(NAME)
 BUILDIMAGE_DESC	= SDC SAPI
 BUILDIMAGE_PKG	= $(PWD)/$(SVC_TARBALL)
diff --git a/deps/eng b/deps/eng
index d25b8fc..ca4a08e 160000
--- a/deps/eng
+++ b/deps/eng
@@ -1 +1 @@
-Subproject commit d25b8fc60fb8c649559924870fe3aaf75e7421d5
+Subproject commit ca4a08e8b7bba7a86d897060338fba27ee4e872b
-- 
2.21.0

