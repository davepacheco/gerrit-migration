{"project":"joyent/sdcadm","branch":"master","id":"I3fbc528636315ec02d63231b4e0f683c5fd37b15","number":"3999","subject":"TRITON-417 sdcadm tests implicitly assume dev channel Reviewed by: Chris Burroughs \u003cchris.burroughs@joyent.com\u003e Approved by: Chris Burroughs \u003cchris.burroughs@joyent.com\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/3999","commitMessage":"TRITON-417 sdcadm tests implicitly assume dev channel\nReviewed by: Chris Burroughs \u003cchris.burroughs@joyent.com\u003e\nApproved by: Chris Burroughs \u003cchris.burroughs@joyent.com\u003e\n","createdOn":1527169688,"lastUpdated":1528481589,"open":false,"status":"MERGED","comments":[{"timestamp":1527169688,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1527169693,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit c113cf2430258fc670fe7b0c0f97450da3e9a1d9\n    \n    TRITON-417 sdcadm tests implicitly assume dev channel"},{"timestamp":1527169723,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1527178029,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2."},{"timestamp":1527178034,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 8dd712bfada3b8f9925be07e6dad7f1250126675\n    \n    TRITON-417 sdcadm tests implicitly assume dev channel"},{"timestamp":1527178070,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1527277862,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Patch Set 1:\n\nI tried running this locally with the channel set to release before running tests.  I\u0027m not sure I fully see what is going on, but it looks like the UUIDs we download and then copy do not match.\n\n[root@headnode (coal-sdcadm) ~]# /opt/smartdc/sdcadm/test/runtests -f update-gz-tools.test.js\nCopying test files to /var/tmp/sdcadmtest\n# Setup a clean output dir (/var/tmp/sdcadmtest/results).\n\n# Running filtered set of test files: test/update-gz-tools.test.js\n# update-gz-tools.test.js\nTAP version 13\n# prepare\nok 1 Execution error\nok 2 Empty stderr\nok 3 undefined\n# setup\nok 4 Get version error\nok 5 Empty gz-tools version file\nok 6 Error listing gz-tools from updates-imgadm\nok 7 Latest gz-tools uuid\nok 8 empty stderr\n# update-gz-tools --latest --just-download\nnull\nUsing channel release\nUUID of latest installed gz-tools image is:\n  b6c24ec8-2e9b-4d3c-9683-7a5c4daf9f36\n\nDownloading gz-tools\n    image: dab61472-07bc-4371-ac53-36efb98c060a (3.0.0)\n    to: /var/tmp/gz-tools-dab61472-07bc-4371-ac53-36efb98c060a.tgz\nValidating gz-tools tarball files\nUpdated gz-tools successfully (elapsed 5s).\n\n\nok 9 Get version error\nok 10 Empty gz-tools version file\nok 11 Expected gz-tools version\n# keep --latest image\nnot ok 12 Copy gz-tools file error\n  ---\n    operator: error\n    expected:\n      undefined\n    actual:\n      { cmd: \u0027/usr/bin/cp /var/tmp/gz-tools-ce678e1b-ad71-4a77-85d4-a40460f00e08.tgz /var/tmp/backup-gz-tools-ce678e1b-ad71-4a77-85d4-a40460f00e08.tgz\u0027, code: 2, killed: false, signal: null }\n    at: maybeClose (internal/child_process.js:920:16)\n    stack:\n      Error: Command failed: /usr/bin/cp /var/tmp/gz-tools-ce678e1b-ad71-4a77-85d4-a40460f00e08.tgz /var/tmp/backup-gz-tools-ce678e1b-ad71-4a77-85d4-a40460f00e08.tgz\n    cp: cannot access /var/tmp/gz-tools-ce678e1b-ad71-4a77-85d4-a40460f00e08.tgz\n    \n        at ChildProcess.exithandler (child_process.js:199:12)\n        at emitTwo (events.js:106:13)\n        at ChildProcess.emit (events.js:191:7)\n        at maybeClose (internal/child_process.js:920:16)\n        at Socket.\u003canonymous\u003e (internal/child_process.js:351:11)\n        at emitOne (events.js:96:13)\n        at Socket.emit (events.js:188:7)\n        at Pipe._handle.close [as _onclose] (net.js:509:12)\n  ...\n\nnot ok 13 Copy gz-tools file\n  ---\n    operator: equal\n    expected:\n      \u0027\u0027\n    actual:\n      \u0027cp: cannot access /var/tmp/gz-tools-ce678e1b-ad71-4a77-85d4-a40460f00e08.tgz\\n\u0027\n    at: maybeClose (internal/child_process.js:920:16)\n  ...\n# update-gz-tools --latest --concurrency\u003d3\nok 14 Update gz-tools error\nUsing channel release\nUUID of latest installed gz-tools image is:\n  b6c24ec8-2e9b-4d3c-9683-7a5c4daf9f36\n\nUsing gz-tools tarball file /var/tmp/gz-tools-dab61472-07bc-4371-ac53-36efb98c060a.tgz from previous download\nDecompressing gz-tools tarball\nValidating gz-tools tarball files\nUpdating \"sdc\" zone tools\nUpdating global zone scripts\nMounting USB key\nUnmounting USB key\nFinding servers to update\nStarting cn_tools update on 1 servers\nCleaning up gz-tools tarball\nUpdated gz-tools successfully (elapsed 12s).\n\nok 15 Update gz.tools stderr\nok 16 Get version error\nok 17 Empty gz-tools version file\nnot ok 18 Expected gz-tools version\n  ---\n    operator: equal\n    expected: \u0027dab61472-07bc-4371-ac53-36efb98c060a\u0027\n    actual:   \u0027ce678e1b-ad71-4a77-85d4-a40460f00e08\u0027\n  ...\n# update-gz-tools --latest w/o --force-reinstall\nok 19 Update gz-tools error\nUsing channel release\nUUID of latest installed gz-tools image is:\n  dab61472-07bc-4371-ac53-36efb98c060a\n\nImage dab61472-07bc-4371-ac53-36efb98c060a is already installed.\nPlease re-run with `--force-reinstall` if you want to override installed image\nUpdated gz-tools successfully (elapsed 1s).\n\nok 20 Update gz.tools stderr\n# update-gz-tools /path/to/installer\nnot ok 21 Update gz-tools error\n  ---\n    operator: error\n    expected:\n      undefined\n    actual:\n      { cmd: \u0027sdcadm experimental update-gz-tools /var/tmp/backup-gz-tools-ce678e1b-ad71-4a77-85d4-a40460f00e08.tgz --force-reinstall\u0027, code: 1, killed: false, signal: null }\n    at: maybeClose (internal/child_process.js:920:16)\n    stack:\n      Error: Command failed: sdcadm experimental update-gz-tools /var/tmp/backup-gz-tools-ce678e1b-ad71-4a77-85d4-a40460f00e08.tgz --force-reinstall\n    sdcadm experimental update-gz-tools: error (SDCClient): updates client error (ResourceNotFound): /images//var/tmp/backup-gz-tools-ce678e1b-ad71-4a77-85d4-a40460f00e08.tgz does not exist\n    \n        at ChildProcess.exithandler (child_process.js:199:12)\n        at emitTwo (events.js:106:13)\n        at ChildProcess.emit (events.js:191:7)\n        at maybeClose (internal/child_process.js:920:16)\n        at Process.ChildProcess._handle.onexit (internal/child_process.js:230:5)"},{"timestamp":1527278485,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Patch Set 1:\n\nroot@headnode (coal-sdcadm) ~]# /opt/smartdc/sdcadm/test/runtests -f self-update-test.test.js\nCopying test files to /var/tmp/sdcadmtest\n# Setup a clean output dir (/var/tmp/sdcadmtest/results).\n\n# Running filtered set of test files: \n\n# test output in /var/tmp/sdcadmtest/results:\n*.tap: No such file or directory\n[root@headnode (coal-sdcadm) ~]# /opt/smartdc/sdcadm/test/runtests -f self-update.test.js     \nCopying test files to /var/tmp/sdcadmtest\n# Setup a clean output dir (/var/tmp/sdcadmtest/results).\n\n# Running filtered set of test files: test/self-update.test.js\n# self-update.test.js\nTAP version 13\n# setup\nok 1 null\nok 2 (unnamed assert)\nok 3 null\nnot ok 4 (unnamed assert)\n  ---\n    operator: ok\n    expected: true\n    actual:   \u0027\u0027\n    at: maybeClose (internal/child_process.js:920:16)\n  ...\nok 5 should be equal\nok 6 null\nnot ok 7 (unnamed assert)\n  ---\n    operator: ok\n    expected: true\n    actual:   \u0027\u0027\n    at: maybeClose (internal/child_process.js:920:16)\n  ...\nok 8 should be equal\n# sdcadm self-update --help\nok 9 null\nok 10 should not be equal\nok 11 should be equal\n# sdcadm self-update --latest --dry-run\nok 12 null\nok 13 should be equal\nok 14 check update string present\nok 15 check update string present\nok 16 check update string present\nok 17 check update string present\n# sdcadm self-update --allow-major-update\nok 18 null\nok 19 should be equal\nok 20 check update string present\nok 21 check update string present\nok 22 check update string present\nok 23 check update string present\n# sdcadm self-update --latest --channel\u003dstaging\nok 24 null\nok 25 should be equal\nok 26 check update string present\nok 27 check update string present\nok 28 check update string present\nok 29 check update string present\nok 30 check update string present\n# sdcadm self-update --latest\nok 31 null\nok 32 should be equal\n# sdcadm self-update IMAGE_UUID\nnot ok 33 Error: Command failed: sdcadm self-update sdcadm self-update: error (Usage): Please provide an image UUID or use `sdcadm self-update --latest` in order to update to the latest available image. \n  ---\n    operator: error\n    expected:\n      undefined\n    actual:\n      { cmd: \u0027sdcadm self-update \u0027, code: 2, killed: false, signal: null }\n    at: checkUpdateResults (/var/tmp/sdcadmtest/test/self-update.test.js:25:7)\n    stack:\n      Error: Command failed: sdcadm self-update \n    sdcadm self-update: error (Usage): Please provide an image UUID or use `sdcadm self-update --latest`\n    in order to update to the latest available image.\n    \n        at ChildProcess.exithandler (child_process.js:199:12)\n        at emitTwo (events.js:106:13)\n        at ChildProcess.emit (events.js:191:7)\n        at maybeClose (internal/child_process.js:920:16)\n        at Process.ChildProcess._handle.onexit (internal/child_process.js:230:5)\n  ...\nnot ok 34 should be equal\n  ---\n    operator: equal\n    expected:\n      \u0027\u0027\n    actual:\n      \u0027sdcadm self-update: error (Usage): Please provide an image UUID or use `sdcadm self-update --latest`\\nin order to update to the latest available image.\\n\u0027\n    at: checkUpdateResults (/var/tmp/sdcadmtest/test/self-update.test.js:26:7)\n  ...\nnot ok 35 check update string present\n  ---\n    operator: ok\n    expected: true\n    actual:   null\n    at: checkUpdateResults (/var/tmp/sdcadmtest/test/self-update.test.js:44:17)\n  ...\nnot ok 36 check update string present\n  ---\n    operator: ok\n    expected: true\n    actual:   null\n    at: checkUpdateResults (/var/tmp/sdcadmtest/test/self-update.test.js:44:17)\n  ...\nnot ok 37 check update string present\n  ---\n    operator: ok\n    expected: true\n    actual:   null\n    at: checkUpdateResults (/var/tmp/sdcadmtest/test/self-update.test.js:44:17)\n  ...\nnot ok 38 check update string present\n  ---\n    operator: ok\n    expected: true\n    actual:   null\n    at: checkUpdateResults (/var/tmp/sdcadmtest/test/self-update.test.js:44:17)\n  ...\nnot ok 39 check update string present\n  ---\n    operator: ok\n    expected: true\n    actual:   null\n    at: checkUpdateResults (/var/tmp/sdcadmtest/test/self-update.test.js:44:17)\n  ...\n\n1..39\n# tests 39\n# pass  30\n# fail  9"},{"timestamp":1527508734,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 3: Patch Set 2 was rebased."},{"timestamp":1527508739,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit e117ff61b0ddb15f5997c530b75c219712d0087e\n    \n    TRITON-417 sdcadm tests implicitly assume dev channel"},{"timestamp":1527508773,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3:\n\n\"make check\" passed ok"},{"timestamp":1527581071,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1527581076,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 9e3edd5f9432c7d524ffdb54d3096a5579c2c3ff\n    \n    TRITON-417 sdcadm tests implicitly assume dev channel"},{"timestamp":1527581116,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4:\n\n\"make check\" passed ok"},{"timestamp":1527627339,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Patch Set 4:\n\nSorry I don\u0027t think my review of the code itself has been very helpful so far.\n\nI tried to apply the latest patch via rsync-to on top of 10c83b8a-5dd3-11e8-906e-13ce8544bcd5 (the original try branch build with node v6 that sparked this) and still get a variety of errors: https://gist.github.com/cburroughs/0c0d4dc21add12c1c030a8d2a5e4b363\n\nI\u0027m doing a zfs rollback of the dataset backing CoaL each run so I think the results are \u0027clean\u0027 and not tainted by previous things I did.  I\u0027m struggling to understand how my setup is different from the one you are using."},{"timestamp":1527792165,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 5."},{"timestamp":1527792170,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit a2c3bfeaf59534c2355c3262685f4e8926708077\n    \n    TRITON-417 sdcadm tests implicitly assume dev channel"},{"timestamp":1527792215,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1527792546,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 6: Patch Set 5 was rebased."},{"timestamp":1527792551,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit c6fce10a9c13d886c1234619f5f9f68e71e02bdb\n    \n    TRITON-417 sdcadm tests implicitly assume dev channel"},{"timestamp":1527792631,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6:\n\n\"make check\" passed ok"},{"timestamp":1527841689,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 7."},{"timestamp":1527841694,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 7:\n\nNew commits:\n    \n    commit e60d4fc99dee4511c8c700bc0e34dbbf5694149a\n    \n    TRITON-417 sdcadm tests implicitly assume dev channel"},{"timestamp":1527841727,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1527848456,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 8: Patch Set 7 was rebased."},{"timestamp":1527848461,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 8:\n\nNew commits:\n    \n    commit 88d818d670c3a416c19222f3b61447d893d960b3\n    \n    TRITON-417 sdcadm tests implicitly assume dev channel"},{"timestamp":1527848499,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8:\n\n\"make check\" passed ok"},{"timestamp":1527863122,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 9."},{"timestamp":1527863129,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 9:\n\nNew commits:\n    \n    commit f8f040d45bfb81f1da85b0573534e9c181df8138\n    \n    TRITON-417 sdcadm tests implicitly assume dev channel"},{"timestamp":1527863164,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1528222261,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 10."},{"timestamp":1528222266,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 10:\n\nNew commits:\n    \n    commit 905d9658cbb8bafc77af3709c532a52513441a84\n    \n    TRITON-417 sdcadm tests implicitly assume dev channel"},{"timestamp":1528222298,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1528231506,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Patch Set 10:\n\nDoing the nodev6 image as explained in chat: https://gist.github.com/cburroughs/7c522b5838cd3383293fc5e682f1cced\n\nJust using the latest experimental build: https://gist.github.com/cburroughs/3796145a29d510b8085b61287e1312d3\n\nStill at a loss for what I am doing differenlty.  Will try to catch you earlier tomorrow."},{"timestamp":1528295200,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 11."},{"timestamp":1528295205,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 11:\n\nNew commits:\n    \n    commit d4c760b26fe9b29d3fde1bfcafc59d069856d874\n    \n    TRITON-417 sdcadm tests implicitly assume dev channel"},{"timestamp":1528295242,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1528296788,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 11:\n\nChris, try running this so we can make sure we\u0027re installing exactly the latest image. \"latest\" may be meaningless in experimental channel:\n\n        sdcadm self-update f9da2a9e-6996-11e8-b109-674427761f60 -C experimental"},{"timestamp":1528393103,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 12."},{"timestamp":1528393109,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 12:\n\nNew commits:\n    \n    commit e5939654ea2e20f5e085d987ac51de2642831e30\n    \n    TRITON-417 sdcadm tests implicitly assume dev channel"},{"timestamp":1528393142,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 12: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1528456907,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 13."},{"timestamp":1528456912,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 13:\n\nNew commits:\n    \n    commit 05b317f762503ed533ec74d0cce07c729bc43d1f\n    \n    TRITON-417 sdcadm tests implicitly assume dev channel"},{"timestamp":1528478336,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 14: Patch Set 13 was rebased."},{"timestamp":1528478340,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 14:\n\nNew commits:\n    \n    commit 8a3054435eec445fa2654f052cf8a13909b9f7ac\n    \n    TRITON-417 sdcadm tests implicitly assume dev channel"},{"timestamp":1528480589,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Patch Set 14: Code-Review+1 Integration-Approval+1\n\nAfter much helpful back and forth, all of the tests that are expected to pass do so on my CoaL."},{"timestamp":1528480971,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 15: Commit message was updated."},{"timestamp":1528481589,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"15","revision":"3fbc528636315ec02d63231b4e0f683c5fd37b15","parents":["ee4bfb9c3acb3dfd730549dfff71fff8d1ab3452"],"ref":"refs/changes/99/3999/15","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1528480971,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528480589,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1528480589,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}},{"type":"SUBM","value":"1","grantedOn":1528481588,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"test/create.test.js","type":"MODIFIED","insertions":33,"deletions":-7},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/manatee.test.js","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"test/platform.test.js","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"test/runtests","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"test/sdcadm.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":24,"deletions":-5},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":72,"deletions":-15},{"file":"test/update.test.js","type":"MODIFIED","insertions":36,"deletions":-23}],"sizeInsertions":173,"sizeDeletions":-62},"patchSets":[{"number":"1","revision":"ca1358f5bcb4d26b78378ae3ac2f5dcd06260f04","parents":["8e04a29a57bcc8d8226bf3b887a06a75021a6bff"],"ref":"refs/changes/99/3999/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1527169688,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527169723,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/platform.test.js","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"test/sdcadm.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":24,"deletions":-5},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":30,"deletions":-10}],"sizeInsertions":57,"sizeDeletions":-21},{"number":"2","revision":"ed9249d4c4483a39bfd95d517044c578237e238e","parents":["8e04a29a57bcc8d8226bf3b887a06a75021a6bff"],"ref":"refs/changes/99/3999/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1527178029,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527178070,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/platform.test.js","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"test/runtests","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"test/sdcadm.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":24,"deletions":-5},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":30,"deletions":-10}],"sizeInsertions":60,"sizeDeletions":-23},{"number":"3","revision":"93594afac40de6453b98a9fe0f2ad9c74341c4a8","parents":["5344723d24831914c0b6a79d66fab57399b03adf"],"ref":"refs/changes/99/3999/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1527508734,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527178070,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/platform.test.js","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"test/runtests","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"test/sdcadm.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":24,"deletions":-5},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":30,"deletions":-10}],"sizeInsertions":60,"sizeDeletions":-23},{"number":"4","revision":"bf0289bb6d597d02e6a4139abe8365eca41ddcc3","parents":["880176503514196257d82013e1a7aacc4274ebb8"],"ref":"refs/changes/99/3999/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1527581071,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527178070,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/platform.test.js","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"test/runtests","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"test/sdcadm.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":24,"deletions":-5},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":30,"deletions":-10}],"sizeInsertions":60,"sizeDeletions":-23},{"number":"5","revision":"0c51b104ca9914a0e366a37f057df9ed3d549396","parents":["880176503514196257d82013e1a7aacc4274ebb8"],"ref":"refs/changes/99/3999/5","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1527792165,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527792215,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/platform.test.js","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"test/runtests","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"test/sdcadm.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":24,"deletions":-5},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":30,"deletions":-10},{"file":"test/update.test.js","type":"MODIFIED","insertions":36,"deletions":-23}],"sizeInsertions":96,"sizeDeletions":-46},{"number":"6","revision":"2d2b92b93df1a274b0e7876c971394c4d9c4eee4","parents":["39aad99285cd9bd845f2f91601d8e8c3216c0d0f"],"ref":"refs/changes/99/3999/6","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1527792546,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527792215,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/platform.test.js","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"test/runtests","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"test/sdcadm.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":24,"deletions":-5},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":30,"deletions":-10},{"file":"test/update.test.js","type":"MODIFIED","insertions":36,"deletions":-23}],"sizeInsertions":96,"sizeDeletions":-46},{"number":"7","revision":"35a1f796544013fb92cda06d49964babc86e0e58","parents":["39aad99285cd9bd845f2f91601d8e8c3216c0d0f"],"ref":"refs/changes/99/3999/7","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1527841689,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527841727,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/platform.test.js","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"test/runtests","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"test/sdcadm.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":24,"deletions":-5},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":38,"deletions":-11},{"file":"test/update.test.js","type":"MODIFIED","insertions":36,"deletions":-23}],"sizeInsertions":104,"sizeDeletions":-47},{"number":"8","revision":"69342a53f12454f440c3d5d56df34770a0027aa5","parents":["e60b92876b73ec7368ea4189e26c8d88dbf17aa5"],"ref":"refs/changes/99/3999/8","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1527848456,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527841727,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/platform.test.js","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"test/runtests","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"test/sdcadm.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":24,"deletions":-5},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":38,"deletions":-11},{"file":"test/update.test.js","type":"MODIFIED","insertions":36,"deletions":-23}],"sizeInsertions":104,"sizeDeletions":-47},{"number":"9","revision":"ab6270e3a27f52202fbd1859c70a327b350d6123","parents":["e60b92876b73ec7368ea4189e26c8d88dbf17aa5"],"ref":"refs/changes/99/3999/9","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1527863122,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527863164,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/platform.test.js","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"test/runtests","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"test/sdcadm.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":24,"deletions":-5},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":38,"deletions":-11},{"file":"test/update.test.js","type":"MODIFIED","insertions":36,"deletions":-23}],"sizeInsertions":105,"sizeDeletions":-48},{"number":"10","revision":"859242bf0addc928515fa7d5622ccf219fc4a468","parents":["4031c5768ae15515a7d4dd28289034343a1eff62"],"ref":"refs/changes/99/3999/10","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1528222261,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528222298,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/platform.test.js","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"test/runtests","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"test/sdcadm.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":24,"deletions":-5},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":38,"deletions":-11},{"file":"test/update.test.js","type":"MODIFIED","insertions":36,"deletions":-23}],"sizeInsertions":105,"sizeDeletions":-48},{"number":"11","revision":"976be7375912b13bb7ae3a0853982c7e06ab8ad3","parents":["4031c5768ae15515a7d4dd28289034343a1eff62"],"ref":"refs/changes/99/3999/11","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1528295200,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528295242,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/platform.test.js","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"test/runtests","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"test/sdcadm.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":24,"deletions":-5},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":38,"deletions":-11},{"file":"test/update.test.js","type":"MODIFIED","insertions":36,"deletions":-23}],"sizeInsertions":105,"sizeDeletions":-48},{"number":"12","revision":"8df28566a5c790f8fd1dba6412f35a587ed538a4","parents":["4c231682c377078dbaaf3131822ff1eef4401441"],"ref":"refs/changes/99/3999/12","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1528393103,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528393142,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/create.test.js","type":"MODIFIED","insertions":33,"deletions":-7},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/platform.test.js","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"test/runtests","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"test/sdcadm.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":24,"deletions":-5},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":48,"deletions":-19},{"file":"test/update.test.js","type":"MODIFIED","insertions":36,"deletions":-23}],"sizeInsertions":149,"sizeDeletions":-64},{"number":"13","revision":"36340834376d8c49464d26e2653f33fa74ac36d4","parents":["4c231682c377078dbaaf3131822ff1eef4401441"],"ref":"refs/changes/99/3999/13","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1528456907,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/create.test.js","type":"MODIFIED","insertions":33,"deletions":-7},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/manatee.test.js","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"test/platform.test.js","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"test/runtests","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"test/sdcadm.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":24,"deletions":-5},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":72,"deletions":-15},{"file":"test/update.test.js","type":"MODIFIED","insertions":36,"deletions":-23}],"sizeInsertions":173,"sizeDeletions":-62},{"number":"14","revision":"2e8a0d4c65c7d4f450689603b07f4022cb74e92f","parents":["ee4bfb9c3acb3dfd730549dfff71fff8d1ab3452"],"ref":"refs/changes/99/3999/14","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1528478336,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528480589,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1528480589,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/create.test.js","type":"MODIFIED","insertions":33,"deletions":-7},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/manatee.test.js","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"test/platform.test.js","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"test/runtests","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"test/sdcadm.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":24,"deletions":-5},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":72,"deletions":-15},{"file":"test/update.test.js","type":"MODIFIED","insertions":36,"deletions":-23}],"sizeInsertions":173,"sizeDeletions":-62},{"number":"15","revision":"3fbc528636315ec02d63231b4e0f683c5fd37b15","parents":["ee4bfb9c3acb3dfd730549dfff71fff8d1ab3452"],"ref":"refs/changes/99/3999/15","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1528480971,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1528481588,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528480589,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1528480589,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"test/create.test.js","type":"MODIFIED","insertions":33,"deletions":-7},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/manatee.test.js","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"test/platform.test.js","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"test/runtests","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"test/sdcadm.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":24,"deletions":-5},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":72,"deletions":-15},{"file":"test/update.test.js","type":"MODIFIED","insertions":36,"deletions":-23}],"sizeInsertions":173,"sizeDeletions":-62}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}