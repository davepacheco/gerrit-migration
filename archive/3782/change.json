{"project":"joyent/node-workflow","branch":"master","id":"I40d0fc2f058d922e05fa7a619528d8771dcb5004","number":"3782","subject":"WORKFLOW-222 artedi metrics for job times Reviewed by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e","owner":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"url":"https://cr.joyent.us/3782","commitMessage":"WORKFLOW-222 artedi metrics for job times\nReviewed by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e\n","createdOn":1523061966,"lastUpdated":1523640776,"open":false,"status":"MERGED","comments":[{"timestamp":1523061966,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Uploaded patch set 1."},{"timestamp":1523061967,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit f7f0e2fcb035dc3a3b3cbd01750105eb75486e42\n    \n    basic working triton-metrics implementation"},{"timestamp":1523061997,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1523427519,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1: Code-Review+1\n\n(5 comments)\n\nOverall, everything looks good to me. I\u0027d suggest to move some stuff to use assert-plus and adding some extra assertions for new required properties, specially considering we\u0027re bumping mayor version here.\n\nAnother thought: Could metrics be made \"optional\"? B/c if so, we could just avoid the bump to 2.0. Not a big deal, though."},{"timestamp":1523427684,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nI still need to run test suite. Running the whole sdcadm test suite, which does a lot of provisioning and workflow usage in general was a complete success."},{"timestamp":1523573350,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Uploaded patch set 2."},{"timestamp":1523573352,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 845fc0b5eb7df6adb6b2c58f1a93f668e2287f84\n    \n    make metrics optional"},{"timestamp":1523573921,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 2:\n\n(5 comments)\n\nThank for the feedback! I added asserts everywhere you mentioned. I also made metrics optional so we don\u0027t have to have a major rev change."},{"timestamp":1523628880,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1523640776,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Dylan Yep"}],"currentPatchSet":{"number":"2","revision":"40d0fc2f058d922e05fa7a619528d8771dcb5004","parents":["aac927e474efae4c075620d15cef8960e7dcb5ba"],"ref":"refs/changes/82/3782/2","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1523573350,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1523628880,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1523628880,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"SUBM","value":"1","grantedOn":1523640775,"by":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/api.js","type":"MODIFIED","insertions":41,"deletions":-12},{"file":"lib/runner.js","type":"MODIFIED","insertions":103,"deletions":-12},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"test/api.test.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"test/runner.test.js","type":"MODIFIED","insertions":4,"deletions":-4}],"sizeInsertions":158,"sizeDeletions":-37},"patchSets":[{"number":"1","revision":"f322783760faefd49751a006bb56781b3daee8b8","parents":["aac927e474efae4c075620d15cef8960e7dcb5ba"],"ref":"refs/changes/82/3782/1","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1523061966,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1523061997,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1523427519,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"comments":[{"file":"lib/api.js","line":28,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Thoughts on moving all these to use assert-plus?"},{"file":"lib/api.js","line":28,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Done"},{"file":"lib/api.js","line":62,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"I\u0027d like to add an assertion for the presence of this before we use it."},{"file":"lib/api.js","line":62,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Done"},{"file":"lib/api.js","line":70,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Ditto. If these are required and not optional, I\u0027d like to add assertions for them too."},{"file":"lib/api.js","line":70,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Done"},{"file":"lib/runner.js","line":45,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Same thoughts about moving these to use assert-plus here."},{"file":"lib/runner.js","line":45,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Done"},{"file":"lib/runner.js","line":119,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Same comments than for the api.js file. If we move this to use assert-plus, I\u0027d love to see some specific assertions for these values."},{"file":"lib/runner.js","line":119,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/api.js","type":"MODIFIED","insertions":26,"deletions":-2},{"file":"lib/runner.js","type":"MODIFIED","insertions":89,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"test/api.test.js","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"test/runner.test.js","type":"MODIFIED","insertions":38,"deletions":-4}],"sizeInsertions":168,"sizeDeletions":-14},{"number":"2","revision":"40d0fc2f058d922e05fa7a619528d8771dcb5004","parents":["aac927e474efae4c075620d15cef8960e7dcb5ba"],"ref":"refs/changes/82/3782/2","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1523573350,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1523628880,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1523628880,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"SUBM","value":"1","grantedOn":1523640775,"by":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/api.js","type":"MODIFIED","insertions":41,"deletions":-12},{"file":"lib/runner.js","type":"MODIFIED","insertions":103,"deletions":-12},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"test/api.test.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"test/runner.test.js","type":"MODIFIED","insertions":4,"deletions":-4}],"sizeInsertions":158,"sizeDeletions":-37}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"}]}