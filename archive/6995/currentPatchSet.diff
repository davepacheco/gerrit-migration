From 49c45d8f42f77be1b9ec28ea90690884b436bdec Mon Sep 17 00:00:00 2001
From: Tim Foster <tim.foster@joyent.com>
Date: Mon, 28 Oct 2019 11:43:03 +0000
Subject: [PATCH] OS-8034 smartos-live ucodecheck should allow hardlinks
 Reviewed by: John Levon <john.levon@joyent.com> Approved by: John Levon
 <john.levon@joyent.com>

---
 tools/ucodecheck/ucodecheck.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

diff --git a/tools/ucodecheck/ucodecheck.c b/tools/ucodecheck/ucodecheck.c
index 98bf4cc4..2eb243b2 100644
--- a/tools/ucodecheck/ucodecheck.c
+++ b/tools/ucodecheck/ucodecheck.c
@@ -10,7 +10,7 @@
  */
 
 /*
- * Copyright (c) 2018, Joyent, Inc.
+ * Copyright 2019 Joyent, Inc.
  */
 
 /*
@@ -97,11 +97,11 @@ ucc_manifest_cb(manifest_ent_t *me, void *arg)
 	}
 
 	/*
-	 * The only entries we expect in here are files and the directory entry
-	 * themselves. If for some reason they exist, then we need to error and
-	 * figure out what happened.
+	 * The only entries we expect in here are files and links and the
+	 * directory entry themselves. If for some reason they exist, then we
+	 * need to error and figure out what happened.
 	 */
-	if (me->me_type != ME_TYPE_FILE) {
+	if (me->me_type != ME_TYPE_FILE && me->me_type != ME_TYPE_HARDLINK) {
 		if (me->me_type == ME_TYPE_DIRECTORY)
 			return (MECB_NEXT);
 
-- 
2.17.2 (Apple Git-113)

