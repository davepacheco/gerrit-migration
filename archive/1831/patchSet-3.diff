From 9bca11289f890427fa4f77af8704560636e4c246 Mon Sep 17 00:00:00 2001
From: Patrick Mooney <pmooney@pfmooney.com>
Date: Mon, 24 Apr 2017 20:09:42 +0000
Subject: [PATCH] OS-6074 lx_sys cpu/kernel_max off by one Reviewed by: Jerry
 Jelinek <jerry.jelinek@joyent.com> Approved by: Jerry Jelinek
 <jerry.jelinek@joyent.com>

---
 usr/src/uts/common/brand/lx/sysfs/lx_sysvnops.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/usr/src/uts/common/brand/lx/sysfs/lx_sysvnops.c b/usr/src/uts/common/brand/lx/sysfs/lx_sysvnops.c
index b85b1e9c41..10c99baa7b 100644
--- a/usr/src/uts/common/brand/lx/sysfs/lx_sysvnops.c
+++ b/usr/src/uts/common/brand/lx/sysfs/lx_sysvnops.c
@@ -1268,7 +1268,7 @@ lxsys_read_devices_syscpu(lxsys_node_t *lnp, lxsys_uiobuf_t *luio)
 	 * see the Documentaion/cputopology.txt file in the Linux src tree.
 	 */
 	if (inst == LXSYS_INST_DEV_SYSCPU_KMAX) {
-		lxsys_uiobuf_printf(luio, "%d\n", NCPU);
+		lxsys_uiobuf_printf(luio, "%d\n", NCPU - 1);
 		return (0);
 	}
 
-- 
2.21.0

