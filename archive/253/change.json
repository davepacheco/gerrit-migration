{"project":"joyent/sdc-vmapi","branch":"master","id":"I0c2f4212985e6f92697384b5c37a8b77df5a4826","number":"253","subject":"TOOLS-1510 Make updating VMAPI moray indices not need changes to sdcadm","owner":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"url":"https://cr.joyent.us/253","commitMessage":"TOOLS-1510 Make updating VMAPI moray indices not need changes to sdcadm\n","createdOn":1470696678,"lastUpdated":1470858414,"open":false,"status":"ABANDONED","comments":[{"timestamp":1470696678,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 1."},{"timestamp":1470696704,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1470716929,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 1: Code-Review+1\n\n(3 comments)"},{"timestamp":1470717002,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1470858414,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Abandoned\n\nClosing in favor of the upcoming work as part of ZAPI-747."}],"currentPatchSet":{"number":"1","revision":"0c2f4212985e6f92697384b5c37a8b77df5a4826","parents":["a5f6c49d674ce896d05266cfcc978634cc97fa2d"],"ref":"refs/changes/53/253/1","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1470696678,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1470696704,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470716929,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"comments":[{"file":"lib/apis/moray.js","line":1048,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"It calls callback() regardless of whether an error occurred, right? The wording here makes it sound like callback() is only called on error."},{"file":"lib/apis/moray.js","line":1063,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Is it intentional that there\u0027s no space before the \u0027+\u0027? I guess `make check` thinks it\u0027s fine... So meh."},{"file":"lib/apis/moray.js","line":1088,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Again sounds like this happens only if an error occurs."},{"file":"tools/migrations/add-new-indices-no-reindex-needed/add-all-new-indices-no-reindex-needed.js","line":91,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"I think \"index migrations\" would be fine in the message here and below instead of indices migrations. But really a nit."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/apis/moray.js","type":"MODIFIED","insertions":64,"deletions":0},{"file":"tools/migrations/add-docker-index.js","type":"DELETED","insertions":0,"deletions":-94},{"file":"tools/migrations/add-new-indices-no-reindex-needed/add-all-new-indices-no-reindex-needed.js","type":"ADDED","insertions":96,"deletions":0},{"file":"tools/migrations/add-new-indices-no-reindex-needed/add-docker-index.js","type":"ADDED","insertions":42,"deletions":0}],"sizeInsertions":202,"sizeDeletions":-94},"patchSets":[{"number":"1","revision":"0c2f4212985e6f92697384b5c37a8b77df5a4826","parents":["a5f6c49d674ce896d05266cfcc978634cc97fa2d"],"ref":"refs/changes/53/253/1","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1470696678,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1470696704,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470716929,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"comments":[{"file":"lib/apis/moray.js","line":1048,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"It calls callback() regardless of whether an error occurred, right? The wording here makes it sound like callback() is only called on error."},{"file":"lib/apis/moray.js","line":1063,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Is it intentional that there\u0027s no space before the \u0027+\u0027? I guess `make check` thinks it\u0027s fine... So meh."},{"file":"lib/apis/moray.js","line":1088,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Again sounds like this happens only if an error occurs."},{"file":"tools/migrations/add-new-indices-no-reindex-needed/add-all-new-indices-no-reindex-needed.js","line":91,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"I think \"index migrations\" would be fine in the message here and below instead of indices migrations. But really a nit."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/apis/moray.js","type":"MODIFIED","insertions":64,"deletions":0},{"file":"tools/migrations/add-docker-index.js","type":"DELETED","insertions":0,"deletions":-94},{"file":"tools/migrations/add-new-indices-no-reindex-needed/add-all-new-indices-no-reindex-needed.js","type":"ADDED","insertions":96,"deletions":0},{"file":"tools/migrations/add-new-indices-no-reindex-needed/add-docker-index.js","type":"ADDED","insertions":42,"deletions":0}],"sizeInsertions":202,"sizeDeletions":-94}],"allReviewers":[{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}]}