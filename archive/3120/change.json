{"project":"joyent/node-triton","branch":"master","id":"I225410b4fce68804367091a8dc0e4fd82c1645b1","number":"3120","subject":"TRITON-24 node-triton ListNetworkIPs has unordered results Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"url":"https://cr.joyent.us/3120","commitMessage":"TRITON-24 node-triton ListNetworkIPs has unordered results\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1513616858,"lastUpdated":1513985928,"open":false,"status":"MERGED","comments":[{"timestamp":1513616858,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 1."},{"timestamp":1513616861,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit c1b33f22d65b002a7ecc14b2b22e0a432c3472ee\n    \n    initial commit"},{"timestamp":1513616888,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1513616943,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 1: Integration-Approval-1\n\nnode-tabula pull #5 must be merged before this will work."},{"timestamp":1513983553,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 2."},{"timestamp":1513983556,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit efe09c8f8c9953490b40dd94bb5518b671442ce3\n    \n    initial commit"},{"timestamp":1513983582,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1513984047,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(2 comments)\n\nAlso need package.json update of tabula."},{"timestamp":1513984148,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 3."},{"timestamp":1513984151,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 2ec401b2c59fd4e242294e52f93c96fe47e7057e\n    \n    bump tabula, assert ip address better"},{"timestamp":1513984177,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1513984945,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 4."},{"timestamp":1513984948,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 1ddae13fde1fd0219c492568fb0ab68bbb178bb0\n    \n    fixes based on trentm review"},{"timestamp":1513984961,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1513984975,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1513985004,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 4: -Integration-Approval\n\nSorting works\n\n $ ./bin/triton network ip list dave-test-net -s ip\n IP          MANAGED  RESERVED  OWNER_UUID  BELONGS_TO_UUID\n 10.0.1.1    true     true      -           -\n 10.0.1.5    false    true      -           -\n 10.0.1.10   false    true      -           -\n 10.0.1.20   false    true      -           -\n 10.0.1.255  true     true      -           -\n $ ./bin/triton network ip list dave-test-net -s -ip\n IP          MANAGED  RESERVED  OWNER_UUID  BELONGS_TO_UUID\n 10.0.1.255  true     true      -           -\n 10.0.1.20   false    true      -           -\n 10.0.1.10   false    true      -           -\n 10.0.1.5    false    true      -           -\n 10.0.1.1    true     true      -           -"},{"timestamp":1513985647,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 5."},{"timestamp":1513985650,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit ce22609fc34b638769990a39db2b1309a47eaa3b\n    \n    roll changes into 5.6.0"},{"timestamp":1513985677,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1513985777,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1"},{"timestamp":1513985915,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1513985928,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Dave Eddy"}],"currentPatchSet":{"number":"6","revision":"225410b4fce68804367091a8dc0e4fd82c1645b1","parents":["ab564177b59f2b8167cb404b7830863801dca373"],"ref":"refs/changes/20/3120/6","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1513985915,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1513985677,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1513985777,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1513985777,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1513985928,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":27,"deletions":-1},{"file":"lib/do_network/do_ip/do_list.js","type":"MODIFIED","insertions":24,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":54,"sizeDeletions":-3},"patchSets":[{"number":"1","revision":"6abc5d64d7868546ae9e01ba3044751f080e306a","parents":["da5f3bade8398c02553c75de1dcbfd14a1814825"],"ref":"refs/changes/20/3120/1","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1513616858,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1513616888,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"-1","grantedOn":1513616943,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}}],"comments":[{"file":"lib/do_network/do_ip/do_list.js","line":47,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Hrm... in tabula@1.10.0 I changed the \"reverse\" handling so that if the object-form is used, you need to separately specify `reverse: true`. I think you\u0027ll need a little more work here. Something like:\n\n```\n    var sort \u003d opts.s.split(\u0027,\u0027).map(function mapSort(field) {\n        var so \u003d {};\n        var field \u003d field.trim();\n        assert.ok(field, \u0027non-empty field\u0027);\n        if (field[0] \u003d\u003d\u003d \u0027-\u0027) {\n            so.field \u003d field.slice(1);\n            so.reverse \u003d true;\n        } else {\n            so.field \u003d field;\n        }\n\n        switch (so.field) {\n        case \u0027ip\u0027:\n            so.keyFunc \u003d common.ipv4ToLong;\n            break;\n        default:\n            break;\n        }\n\n        return so;\n    });\n```"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":21,"deletions":-1},{"file":"lib/do_network/do_ip/do_list.js","type":"MODIFIED","insertions":15,"deletions":-1}],"sizeInsertions":36,"sizeDeletions":-2},{"number":"2","revision":"6593988a4d601b09c95a19ac825d72ff35047545","parents":["ab564177b59f2b8167cb404b7830863801dca373"],"ref":"refs/changes/20/3120/2","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1513983553,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1513983582,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"-1","grantedOn":1513616943,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}}],"comments":[{"file":"lib/do_network/do_ip/do_list.js","line":44,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Hrm... in tabula@1.10.0 I changed the \"reverse\" handling so that if the object-form is used, you need to separately specify `reverse: true`. I think you\u0027ll need a little more work here. Something like:\n\n```\n    var sort \u003d opts.s.split(\u0027,\u0027).map(function mapSort(field) {\n        var so \u003d {};\n        var field \u003d field.trim();\n        assert.ok(field, \u0027non-empty field\u0027);\n        if (field[0] \u003d\u003d\u003d \u0027-\u0027) {\n            so.field \u003d field.slice(1);\n            so.reverse \u003d true;\n        } else {\n            so.field \u003d field;\n        }\n\n        switch (so.field) {\n        case \u0027ip\u0027:\n            so.keyFunc \u003d common.ipv4ToLong;\n            break;\n        default:\n            break;\n        }\n\n        return so;\n    });\n```"},{"file":"lib/do_network/do_ip/do_list.js","line":44,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":23,"deletions":-1},{"file":"lib/do_network/do_ip/do_list.js","type":"MODIFIED","insertions":15,"deletions":-1}],"sizeInsertions":38,"sizeDeletions":-2},{"number":"3","revision":"0d173c3d35d1ab5189b56c6ec91d245c7a2e9494","parents":["ab564177b59f2b8167cb404b7830863801dca373"],"ref":"refs/changes/20/3120/3","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1513984148,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1513984177,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"-1","grantedOn":1513616943,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":27,"deletions":-1},{"file":"lib/do_network/do_ip/do_list.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":43,"sizeDeletions":-3},{"number":"4","revision":"eff88fdd9925ffc1afcb07e343ecdb07edd235e0","parents":["ab564177b59f2b8167cb404b7830863801dca373"],"ref":"refs/changes/20/3120/4","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1513984945,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1513984975,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":27,"deletions":-1},{"file":"lib/do_network/do_ip/do_list.js","type":"MODIFIED","insertions":24,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":58,"sizeDeletions":-4},{"number":"5","revision":"e6e9d25ca4ac24d02ad4deb5c06b75bd5f2ba619","parents":["ab564177b59f2b8167cb404b7830863801dca373"],"ref":"refs/changes/20/3120/5","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1513985647,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1513985677,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1513985777,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1513985777,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":27,"deletions":-1},{"file":"lib/do_network/do_ip/do_list.js","type":"MODIFIED","insertions":24,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":54,"sizeDeletions":-3},{"number":"6","revision":"225410b4fce68804367091a8dc0e4fd82c1645b1","parents":["ab564177b59f2b8167cb404b7830863801dca373"],"ref":"refs/changes/20/3120/6","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1513985915,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1513985677,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1513985777,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1513985777,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1513985928,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":27,"deletions":-1},{"file":"lib/do_network/do_ip/do_list.js","type":"MODIFIED","insertions":24,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":54,"sizeDeletions":-3}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}]}