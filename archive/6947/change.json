{"project":"joyent/smartos-live","branch":"master","id":"Ia11a7d0bed2c1854959846700bf7739983094826","number":"6947","subject":"OS-8002 support for wider raidz1 in disklayout Reviewed by: Kody Kantor \u003ckody.kantor@joyent.com\u003e Approved by: Kody Kantor \u003ckody.kantor@joyent.com\u003e","owner":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"url":"https://cr.joyent.us/6947","commitMessage":"OS-8002 support for wider raidz1 in disklayout\nReviewed by: Kody Kantor \u003ckody.kantor@joyent.com\u003e\nApproved by: Kody Kantor \u003ckody.kantor@joyent.com\u003e\n","createdOn":1569938024,"lastUpdated":1570128872,"open":false,"status":"MERGED","comments":[{"timestamp":1569938024,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 1."},{"timestamp":1569938114,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1570048653,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 1:\n\n(1 comment)\n\nThis looks good. We\u0027ll have to trust that the user won\u0027t shoot themselves in the foot with weird raidz layouts (the 60 disk, 21-wide raidz3 example)."},{"timestamp":1570052851,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1570052868,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 2."},{"timestamp":1570052957,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1570053130,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 2: Code-Review+1\n\nLooks good! Do we also need to update the expected error message string in the 7.di.w7.z1.out file?"},{"timestamp":1570053170,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 2:\n\nerp, sorry, I meant the 7.di.w6.z2.out file."},{"timestamp":1570103720,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\nYes, thanks. I re-ran the tests this morning and fixed that. All tests are now passing."},{"timestamp":1570103748,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 3."},{"timestamp":1570103839,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1570111677,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1570128838,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1570128872,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jerry Jelinek"}],"currentPatchSet":{"number":"4","revision":"a11a7d0bed2c1854959846700bf7739983094826","parents":["1fcc5743c47ccdfb35edc18128f28efe977089c1"],"ref":"refs/changes/47/6947/4","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1570128838,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1570103839,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570111677,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1570111677,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"SUBM","value":"1","grantedOn":1570128872,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"src/node_modules/disklayout.js","type":"MODIFIED","insertions":8,"deletions":-4},{"file":"src/test/disklayout/36.di.w12.z1.out","type":"ADDED","insertions":272,"deletions":0},{"file":"src/test/disklayout/36.di.w3.z1.out","type":"ADDED","insertions":317,"deletions":0},{"file":"src/test/disklayout/36h.di","type":"ADDED","insertions":37,"deletions":0},{"file":"src/test/disklayout/36h.di.0s.out","type":"ADDED","insertions":277,"deletions":0},{"file":"src/test/disklayout/36h.di.1s.out","type":"ADDED","insertions":284,"deletions":0},{"file":"src/test/disklayout/36h.di.out","type":"ADDED","insertions":274,"deletions":0},{"file":"src/test/disklayout/60.di.w21.z3.out","type":"MODIFIED","insertions":437,"deletions":-1},{"file":"src/test/disklayout/7.di.w6.z2.out","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/test/disklayout/7.di.w7.z1.out","type":"MODIFIED","insertions":59,"deletions":-1},{"file":"src/test/disklayout/run","type":"MODIFIED","insertions":23,"deletions":-10}],"sizeInsertions":1989,"sizeDeletions":-17},"patchSets":[{"number":"1","revision":"8cecca618d1d018bcb1d4b91666aef2cfee70b36","parents":["1fcc5743c47ccdfb35edc18128f28efe977089c1"],"ref":"refs/changes/47/6947/1","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1569938024,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1569938114,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/node_modules/disklayout.js","line":344,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Should this be \u0027disks.length\u0027 now that we\u0027re allowing arbitrarily wide raidz stripes? Or do you think we should rephrase this to say something like \u0027recommended min: X, recommended max: Y\u0027?"},{"file":"src/node_modules/disklayout.js","line":344,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Since we\u0027re already printing the number of disks in the msg, I think that would be redundant. However, I changed the wording a little bit to say \"default max\"."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/node_modules/disklayout.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"src/test/disklayout/36.di.w12.z1.out","type":"ADDED","insertions":272,"deletions":0},{"file":"src/test/disklayout/36.di.w3.z1.out","type":"ADDED","insertions":317,"deletions":0},{"file":"src/test/disklayout/36h.di","type":"ADDED","insertions":37,"deletions":0},{"file":"src/test/disklayout/36h.di.0s.out","type":"ADDED","insertions":277,"deletions":0},{"file":"src/test/disklayout/36h.di.1s.out","type":"ADDED","insertions":284,"deletions":0},{"file":"src/test/disklayout/36h.di.out","type":"ADDED","insertions":274,"deletions":0},{"file":"src/test/disklayout/60.di.w21.z3.out","type":"MODIFIED","insertions":437,"deletions":-1},{"file":"src/test/disklayout/7.di.w7.z1.out","type":"MODIFIED","insertions":59,"deletions":-1},{"file":"src/test/disklayout/run","type":"MODIFIED","insertions":23,"deletions":-10}],"sizeInsertions":1986,"sizeDeletions":-15},{"number":"2","revision":"1206dca8fb54f07d3bec31c0546d22bb30c0e259","parents":["1fcc5743c47ccdfb35edc18128f28efe977089c1"],"ref":"refs/changes/47/6947/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1570052868,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1570052957,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570053130,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/node_modules/disklayout.js","type":"MODIFIED","insertions":8,"deletions":-4},{"file":"src/test/disklayout/36.di.w12.z1.out","type":"ADDED","insertions":272,"deletions":0},{"file":"src/test/disklayout/36.di.w3.z1.out","type":"ADDED","insertions":317,"deletions":0},{"file":"src/test/disklayout/36h.di","type":"ADDED","insertions":37,"deletions":0},{"file":"src/test/disklayout/36h.di.0s.out","type":"ADDED","insertions":277,"deletions":0},{"file":"src/test/disklayout/36h.di.1s.out","type":"ADDED","insertions":284,"deletions":0},{"file":"src/test/disklayout/36h.di.out","type":"ADDED","insertions":274,"deletions":0},{"file":"src/test/disklayout/60.di.w21.z3.out","type":"MODIFIED","insertions":437,"deletions":-1},{"file":"src/test/disklayout/7.di.w7.z1.out","type":"MODIFIED","insertions":59,"deletions":-1},{"file":"src/test/disklayout/run","type":"MODIFIED","insertions":23,"deletions":-10}],"sizeInsertions":1988,"sizeDeletions":-16},{"number":"3","revision":"8b4a4f2538ce0e672ff10f67e46b2a28fc5b1f63","parents":["1fcc5743c47ccdfb35edc18128f28efe977089c1"],"ref":"refs/changes/47/6947/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1570103748,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1570103839,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570111677,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1570111677,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/node_modules/disklayout.js","type":"MODIFIED","insertions":8,"deletions":-4},{"file":"src/test/disklayout/36.di.w12.z1.out","type":"ADDED","insertions":272,"deletions":0},{"file":"src/test/disklayout/36.di.w3.z1.out","type":"ADDED","insertions":317,"deletions":0},{"file":"src/test/disklayout/36h.di","type":"ADDED","insertions":37,"deletions":0},{"file":"src/test/disklayout/36h.di.0s.out","type":"ADDED","insertions":277,"deletions":0},{"file":"src/test/disklayout/36h.di.1s.out","type":"ADDED","insertions":284,"deletions":0},{"file":"src/test/disklayout/36h.di.out","type":"ADDED","insertions":274,"deletions":0},{"file":"src/test/disklayout/60.di.w21.z3.out","type":"MODIFIED","insertions":437,"deletions":-1},{"file":"src/test/disklayout/7.di.w6.z2.out","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/test/disklayout/7.di.w7.z1.out","type":"MODIFIED","insertions":59,"deletions":-1},{"file":"src/test/disklayout/run","type":"MODIFIED","insertions":23,"deletions":-10}],"sizeInsertions":1989,"sizeDeletions":-17},{"number":"4","revision":"a11a7d0bed2c1854959846700bf7739983094826","parents":["1fcc5743c47ccdfb35edc18128f28efe977089c1"],"ref":"refs/changes/47/6947/4","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1570128838,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1570103839,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1570128872,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570111677,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1570111677,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"src/node_modules/disklayout.js","type":"MODIFIED","insertions":8,"deletions":-4},{"file":"src/test/disklayout/36.di.w12.z1.out","type":"ADDED","insertions":272,"deletions":0},{"file":"src/test/disklayout/36.di.w3.z1.out","type":"ADDED","insertions":317,"deletions":0},{"file":"src/test/disklayout/36h.di","type":"ADDED","insertions":37,"deletions":0},{"file":"src/test/disklayout/36h.di.0s.out","type":"ADDED","insertions":277,"deletions":0},{"file":"src/test/disklayout/36h.di.1s.out","type":"ADDED","insertions":284,"deletions":0},{"file":"src/test/disklayout/36h.di.out","type":"ADDED","insertions":274,"deletions":0},{"file":"src/test/disklayout/60.di.w21.z3.out","type":"MODIFIED","insertions":437,"deletions":-1},{"file":"src/test/disklayout/7.di.w6.z2.out","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/test/disklayout/7.di.w7.z1.out","type":"MODIFIED","insertions":59,"deletions":-1},{"file":"src/test/disklayout/run","type":"MODIFIED","insertions":23,"deletions":-10}],"sizeInsertions":1989,"sizeDeletions":-17}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}]}