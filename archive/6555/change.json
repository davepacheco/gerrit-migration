{"project":"joyent/sdc-vmapi","branch":"master","id":"I86618ea73c942d90e468d4250a24a8178f903b26","number":"6555","subject":"TRITON-1782 The extra quota attribute should not be displayed for Bhyve VMs","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/6555","commitMessage":"TRITON-1782 The extra quota attribute should not be displayed for Bhyve VMs\n","createdOn":1562261101,"lastUpdated":1566226031,"open":false,"status":"ABANDONED","comments":[{"timestamp":1562261101,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1562261106,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 1e0ec24a4126bc3cb147e13ff1b3c8a310747ae1\n    \n    TRITON-1782 The extra quota attribute should not be displayed for Bhyve VMs"},{"timestamp":1562261131,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nTests passing so far"},{"timestamp":1562261146,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1562595011,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2."},{"timestamp":1562595016,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 30dbfe848071de8f0b542f47d89dfe865a12e202\n    \n    TRITON-1782 The extra quota attribute should not be displayed for Bhyve VMs\n    \n    commit f4d05969295f9a4dcfe7ffce5fab4b446d926e2d\n    \n    TRITON-1783 VM creation for bhyve and kvm VMs shouldn\u0027t pass `quota` attribute to `vmadm`. Just `disks` and `flexible_disk_size`\n    Reviewed by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e\n    Approved by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e"},{"timestamp":1562595058,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1562595123,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3: Patch Set 2 was rebased"},{"timestamp":1562595981,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 3:\n\n(1 comment)\n\nI\u0027m not sure this is the right change to make."},{"timestamp":1566226031,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Abandoned\n\nThis will cause more trouble with sdc-vm-agent than the problem it\u0027s trying to address. We can live with a quota value of 1 in VMAPI for the short term"}],"currentPatchSet":{"number":"3","revision":"7e884e1ba14a625c4051f96bc0990f577d71236d","parents":["f4d05969295f9a4dcfe7ffce5fab4b446d926e2d"],"ref":"refs/changes/55/6555/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1562595123,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1562595058,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/common/vm-common.js","line":112,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"https://github.com/joyent/sdc-vm-agent/blob/master/lib/vmapi-client.js#L59 includes quota.  It seems that deleting quota may not be so straight-forward."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common/vm-common.js","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"test/vms.disks.test.js","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":19,"sizeDeletions":-1},"patchSets":[{"number":"1","revision":"1dd8b4a11c0f0cf68f9cd8b4fba05654bafd1afc","parents":["29ec3bdc126106bb2a27766489e7ece5a52951a4"],"ref":"refs/changes/55/6555/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1562261101,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1562261146,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common/vm-common.js","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"test/vms.disks.test.js","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":19,"sizeDeletions":-1},{"number":"2","revision":"86618ea73c942d90e468d4250a24a8178f903b26","parents":["29ec3bdc126106bb2a27766489e7ece5a52951a4"],"ref":"refs/changes/55/6555/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1562595011,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1562595058,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common/vm-common.js","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"lib/workflows/provision.js","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"test/vms.disks.test.js","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":27,"sizeDeletions":-4},{"number":"3","revision":"7e884e1ba14a625c4051f96bc0990f577d71236d","parents":["f4d05969295f9a4dcfe7ffce5fab4b446d926e2d"],"ref":"refs/changes/55/6555/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1562595123,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1562595058,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/common/vm-common.js","line":112,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"https://github.com/joyent/sdc-vm-agent/blob/master/lib/vmapi-client.js#L59 includes quota.  It seems that deleting quota may not be so straight-forward."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common/vm-common.js","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"test/vms.disks.test.js","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":19,"sizeDeletions":-1}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}]}