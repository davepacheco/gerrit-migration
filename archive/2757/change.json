{"project":"joyent/sdc-manatee","branch":"master","topic":"MANATEE-346","id":"Ie27927ab5acf2b7a579bde4e2136d5646d864b17","number":"2757","subject":"MANATEE-346 Ship both Postgres 9.2 and 9.6 in sdc-manatee images Reviewed By: Richard Bradley \u003crichard.bradley@joyent.com\u003e Approved By: Richard Bradley \u003crichard.bradley@joyent.com\u003e","owner":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"url":"https://cr.joyent.us/2757","commitMessage":"MANATEE-346 Ship both Postgres 9.2 and 9.6 in sdc-manatee images\nReviewed By: Richard Bradley \u003crichard.bradley@joyent.com\u003e\nApproved By: Richard Bradley \u003crichard.bradley@joyent.com\u003e\n","createdOn":1507585628,"lastUpdated":1519745987,"open":false,"status":"MERGED","comments":[{"timestamp":1507585628,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 1."},{"timestamp":1507585637,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1507585654,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Topic set to MANATEE-346"},{"timestamp":1507585743,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1:\n\nI\u0027ve done some initial, basic testing. There\u0027s still some more I\u0027d like to do, but I figured I\u0027d put these up for review.\n\nMost of these changes should look familiar: aside from some different logic in boot/configure.sh, this is almost all just copying across things we\u0027ve done in manta-manatee."},{"timestamp":1507633190,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 1:\n\nI\u0027ve taken a look at this change and manta-manatee as it is today and I\u0027d say this looks good to me.\n\nI\u0027m happy with the testing notes so far in the ticket, but I can help out with any further testing if you\u0027d like. Perhaps I could take staging\u0027s Triton through an image upgrade, or if that\u0027s not HA then go through a HA upgrade in my lab? I understand using `sdcadm` will be blocked on TOOLS-1883, but I\u0027m pretty sure using vanilla reprovisions would work."},{"timestamp":1510046394,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 1: Code-Review+1\n\nAdding my CR+1 (sorry I didn\u0027t do that earlier). The testing looks fine for this, so I can add IA too if it helps, but might be helpful to get a different set of eyes."},{"timestamp":1519434608,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1519434636,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1519721523,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1519745965,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 4: Commit message was updated."},{"timestamp":1519745987,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Cody Peter Mello"}],"currentPatchSet":{"number":"4","revision":"d42388c8378d54406c3b811ee91bfbbd0b98eb0b","parents":["1c2b6e180265508a6a9175818937a383be22db3a"],"ref":"refs/changes/57/2757/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1519745965,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507585637,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1510046394,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1519721523,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"SUBM","value":"1","grantedOn":1519745986,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":9,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"boot/configure.sh","type":"MODIFIED","insertions":33,"deletions":-11},{"file":"boot/setup.sh","type":"MODIFIED","insertions":19,"deletions":-3},{"file":"deps/pg_repack","type":"ADDED","insertions":1,"deletions":0},{"file":"deps/postgresql92","type":"ADDED","insertions":1,"deletions":0},{"file":"deps/postgresql96","type":"ADDED","insertions":1,"deletions":0},{"file":"etc/9.2/pg_hba.conf","fileOld":"etc/pg_hba.conf","type":"RENAMED","insertions":0,"deletions":0},{"file":"etc/9.2/postgresql.sdc.conf","fileOld":"etc/postgresql.sdc.conf","type":"RENAMED","insertions":6,"deletions":-6},{"file":"etc/9.2/recovery.conf","fileOld":"etc/recovery.conf","type":"RENAMED","insertions":0,"deletions":0},{"file":"etc/9.6/pg_hba.conf","fileOld":"etc/pg_hba.conf","type":"COPIED","insertions":0,"deletions":0},{"file":"etc/9.6/postgresql.sdc.conf","type":"ADDED","insertions":656,"deletions":0},{"file":"etc/9.6/recovery.conf","fileOld":"etc/recovery.conf","type":"COPIED","insertions":0,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/pg_overrides/manifest.json","type":"ADDED","insertions":4,"deletions":0},{"file":"sapi_manifests/pg_overrides/template","type":"ADDED","insertions":8,"deletions":0},{"file":"sapi_manifests/sitter/template","type":"MODIFIED","insertions":16,"deletions":-6}],"sizeInsertions":766,"sizeDeletions":-31},"patchSets":[{"number":"1","revision":"d9cd32ef6226f41c537907c60ebb4dea32fb440f","parents":["c587e86eea7fb51fc917b7d0ece816bcd52aafa7"],"ref":"refs/changes/57/2757/1","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1507585628,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507585637,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1510046394,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":9,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"boot/configure.sh","type":"MODIFIED","insertions":33,"deletions":-11},{"file":"boot/setup.sh","type":"MODIFIED","insertions":19,"deletions":-3},{"file":"deps/pg_repack","type":"ADDED","insertions":1,"deletions":0},{"file":"deps/postgresql92","type":"ADDED","insertions":1,"deletions":0},{"file":"deps/postgresql96","type":"ADDED","insertions":1,"deletions":0},{"file":"etc/9.2/pg_hba.conf","fileOld":"etc/pg_hba.conf","type":"RENAMED","insertions":0,"deletions":0},{"file":"etc/9.2/postgresql.sdc.conf","fileOld":"etc/postgresql.sdc.conf","type":"RENAMED","insertions":6,"deletions":-6},{"file":"etc/9.2/recovery.conf","fileOld":"etc/recovery.conf","type":"RENAMED","insertions":0,"deletions":0},{"file":"etc/9.6/pg_hba.conf","fileOld":"etc/pg_hba.conf","type":"COPIED","insertions":0,"deletions":0},{"file":"etc/9.6/postgresql.sdc.conf","type":"ADDED","insertions":656,"deletions":0},{"file":"etc/9.6/recovery.conf","fileOld":"etc/recovery.conf","type":"COPIED","insertions":0,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/pg_overrides/manifest.json","type":"ADDED","insertions":4,"deletions":0},{"file":"sapi_manifests/pg_overrides/template","type":"ADDED","insertions":8,"deletions":0},{"file":"sapi_manifests/sitter/template","type":"MODIFIED","insertions":16,"deletions":-6}],"sizeInsertions":766,"sizeDeletions":-31},{"number":"2","revision":"cee07154a209bc5a6b3c161a9dad156c9831deee","parents":["1c2b6e180265508a6a9175818937a383be22db3a"],"ref":"refs/changes/57/2757/2","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1519434608,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507585637,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1510046394,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":9,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"boot/configure.sh","type":"MODIFIED","insertions":33,"deletions":-11},{"file":"boot/setup.sh","type":"MODIFIED","insertions":19,"deletions":-3},{"file":"deps/pg_repack","type":"ADDED","insertions":1,"deletions":0},{"file":"deps/postgresql92","type":"ADDED","insertions":1,"deletions":0},{"file":"deps/postgresql96","type":"ADDED","insertions":1,"deletions":0},{"file":"etc/9.2/pg_hba.conf","fileOld":"etc/pg_hba.conf","type":"RENAMED","insertions":0,"deletions":0},{"file":"etc/9.2/postgresql.sdc.conf","fileOld":"etc/postgresql.sdc.conf","type":"RENAMED","insertions":6,"deletions":-6},{"file":"etc/9.2/recovery.conf","fileOld":"etc/recovery.conf","type":"RENAMED","insertions":0,"deletions":0},{"file":"etc/9.6/pg_hba.conf","fileOld":"etc/pg_hba.conf","type":"COPIED","insertions":0,"deletions":0},{"file":"etc/9.6/postgresql.sdc.conf","type":"ADDED","insertions":656,"deletions":0},{"file":"etc/9.6/recovery.conf","fileOld":"etc/recovery.conf","type":"COPIED","insertions":0,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/pg_overrides/manifest.json","type":"ADDED","insertions":4,"deletions":0},{"file":"sapi_manifests/pg_overrides/template","type":"ADDED","insertions":8,"deletions":0},{"file":"sapi_manifests/sitter/template","type":"MODIFIED","insertions":16,"deletions":-6}],"sizeInsertions":766,"sizeDeletions":-31},{"number":"3","revision":"e27927ab5acf2b7a579bde4e2136d5646d864b17","parents":["1c2b6e180265508a6a9175818937a383be22db3a"],"ref":"refs/changes/57/2757/3","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1519434636,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507585637,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1510046394,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1519721523,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":9,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"boot/configure.sh","type":"MODIFIED","insertions":33,"deletions":-11},{"file":"boot/setup.sh","type":"MODIFIED","insertions":19,"deletions":-3},{"file":"deps/pg_repack","type":"ADDED","insertions":1,"deletions":0},{"file":"deps/postgresql92","type":"ADDED","insertions":1,"deletions":0},{"file":"deps/postgresql96","type":"ADDED","insertions":1,"deletions":0},{"file":"etc/9.2/pg_hba.conf","fileOld":"etc/pg_hba.conf","type":"RENAMED","insertions":0,"deletions":0},{"file":"etc/9.2/postgresql.sdc.conf","fileOld":"etc/postgresql.sdc.conf","type":"RENAMED","insertions":6,"deletions":-6},{"file":"etc/9.2/recovery.conf","fileOld":"etc/recovery.conf","type":"RENAMED","insertions":0,"deletions":0},{"file":"etc/9.6/pg_hba.conf","fileOld":"etc/pg_hba.conf","type":"COPIED","insertions":0,"deletions":0},{"file":"etc/9.6/postgresql.sdc.conf","type":"ADDED","insertions":656,"deletions":0},{"file":"etc/9.6/recovery.conf","fileOld":"etc/recovery.conf","type":"COPIED","insertions":0,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/pg_overrides/manifest.json","type":"ADDED","insertions":4,"deletions":0},{"file":"sapi_manifests/pg_overrides/template","type":"ADDED","insertions":8,"deletions":0},{"file":"sapi_manifests/sitter/template","type":"MODIFIED","insertions":16,"deletions":-6}],"sizeInsertions":766,"sizeDeletions":-31},{"number":"4","revision":"d42388c8378d54406c3b811ee91bfbbd0b98eb0b","parents":["1c2b6e180265508a6a9175818937a383be22db3a"],"ref":"refs/changes/57/2757/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1519745965,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1519745986,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507585637,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1510046394,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1519721523,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":9,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"boot/configure.sh","type":"MODIFIED","insertions":33,"deletions":-11},{"file":"boot/setup.sh","type":"MODIFIED","insertions":19,"deletions":-3},{"file":"deps/pg_repack","type":"ADDED","insertions":1,"deletions":0},{"file":"deps/postgresql92","type":"ADDED","insertions":1,"deletions":0},{"file":"deps/postgresql96","type":"ADDED","insertions":1,"deletions":0},{"file":"etc/9.2/pg_hba.conf","fileOld":"etc/pg_hba.conf","type":"RENAMED","insertions":0,"deletions":0},{"file":"etc/9.2/postgresql.sdc.conf","fileOld":"etc/postgresql.sdc.conf","type":"RENAMED","insertions":6,"deletions":-6},{"file":"etc/9.2/recovery.conf","fileOld":"etc/recovery.conf","type":"RENAMED","insertions":0,"deletions":0},{"file":"etc/9.6/pg_hba.conf","fileOld":"etc/pg_hba.conf","type":"COPIED","insertions":0,"deletions":0},{"file":"etc/9.6/postgresql.sdc.conf","type":"ADDED","insertions":656,"deletions":0},{"file":"etc/9.6/recovery.conf","fileOld":"etc/recovery.conf","type":"COPIED","insertions":0,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/pg_overrides/manifest.json","type":"ADDED","insertions":4,"deletions":0},{"file":"sapi_manifests/pg_overrides/template","type":"ADDED","insertions":8,"deletions":0},{"file":"sapi_manifests/sitter/template","type":"MODIFIED","insertions":16,"deletions":-6}],"sizeInsertions":766,"sizeDeletions":-31}],"allReviewers":[{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Sam Gwydir","email":"sam.gwydir@joyent.com","username":"gwydirsam"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}]}