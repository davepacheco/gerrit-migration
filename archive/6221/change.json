{"project":"joyent/manta-garbage-collector","branch":"master","id":"I4f56d8a17e71c61ad953133189a7d62a6b26cf76","number":"6221","subject":"MANTA-4251 make garbage-collector capable of storing instructions to local files Reviewed by: Richard Kiene \u003crichard.kiene@joyent.com\u003e Reviewed by: Robert Bogart \u003cRobert.bogart@joyent.com\u003e","owner":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"url":"https://cr.joyent.us/6221","commitMessage":"MANTA-4251 make garbage-collector capable of storing instructions to local files\nReviewed by: Richard Kiene \u003crichard.kiene@joyent.com\u003e\nReviewed by: Robert Bogart \u003cRobert.bogart@joyent.com\u003e\n","createdOn":1557372696,"lastUpdated":1557859250,"open":true,"status":"NEW","comments":[{"timestamp":1557372696,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 1."},{"timestamp":1557372698,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit ea63b37d9fb218ec1bf65b80c11ca028928d934f\n    \n    cleanup\n    \n    commit 79e443ad39188d1236d127c9ea1332df4bfb7b9c\n    \n    a bit more consistent on the naming\n    \n    commit b776fe0992c2a61e00eab03d65278586634ccce2\n    \n    fix rsync module name\n    \n    commit 3cd8df3b31b2d6f18247a8ccceab94cd34ece2d7\n    \n    so tedious\n    \n    commit ece905ab68e035f18256daaf8216e2037c09f0f5\n    \n    these Makefiles are insane\n    \n    commit 48889df029f4e1e996671c43b26925a395eedc30\n    \n    tweaks to try to work around Makefile hell.\n    \n    commit 0bcb7700372a9a8f651a85bc35d7294fceeac0de\n    \n    first pass, pretty rough"},{"timestamp":1557372725,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1557421934,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 2."},{"timestamp":1557421935,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 2eaadb4bff2919ca6f5217c0f1b4d63330f725d0\n    \n    fix mismerge on rebase\n    \n    commit b71a9d01aac75d2bd31f268a5440cb73d842d7f0\n    \n    cleanup\n    \n    commit 1417e97e58097db24d097a7222c4ac667357ba41\n    \n    a bit more consistent on the naming\n    \n    commit 75df5672c28e536dbcec9741552ec7ffce0244d7\n    \n    fix rsync module name\n    \n    commit 9f3e90d159cee4402b91aed89498abcf84452c38\n    \n    so tedious\n    \n    commit 79bc47ff4087e108a90904fb5a820fff20467dfe\n    \n    these Makefiles are insane\n    \n    commit 5ca0c3ba69b57a02b289a93a5f00fdba8a272175\n    \n    tweaks to try to work around Makefile hell.\n    \n    commit 8da08e7d28fe87a6cb234b1d076d291684ee3e98\n    \n    first pass, pretty rough"},{"timestamp":1557421964,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1557426676,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1\n\nThis is a fantastic surgical strike that moves away from using manta. I\u0027m surprised at how simple it is and shocked that I don\u0027t have anything to offer in terms of critical feedback."},{"timestamp":1557435293,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Patch Set 2:\n\n(5 comments)\n\nLooks pretty good.  I didn\u0027t have too much and most of the things that I mentioned were trivial.  If it\u0027s the case that we don\u0027t use a manta client anymore, I recommend making another pass through README.md -- I think there is at least one place where the manta client is mentioned."},{"timestamp":1557447204,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 2:\n\n(4 comments)"},{"timestamp":1557463055,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 3."},{"timestamp":1557463056,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 89911d6e5999e3e8c8e9770d92a453c8a3b3505f\n    \n    missing content-type makes SAPI sad\n    \n    commit 7a7a69df48e3e370b2867b657bd2569dc9f84b20\n    \n    attempt #1 at addressing review comments"},{"timestamp":1557463085,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1557475252,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Patch Set 3: Code-Review+1\n\nLooks good to me.  Also thanks for adding that line in the README about the tests being broken!  I\u0027m fine with your decisions re: the other things we discussed.  You have good reasons for why which is the most important thing in my opinion."},{"timestamp":1557499469,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1\n\n(1 comment)"},{"timestamp":1557514160,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 4."},{"timestamp":1557514161,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit b5dd1e2cc3af991a06709ec41f5fefe12e22f0a5\n    \n    attempt to clarify comment"},{"timestamp":1557514189,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1557514252,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1557515994,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1"},{"timestamp":1557767178,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1557784686,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1557784852,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 5: Integration-Approval-1\n\nShould not go to master yet, as it would break other customers."},{"timestamp":1557798756,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 5: Integration-Approval-1"},{"timestamp":1557859221,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 6."},{"timestamp":1557859222,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit 149b50340a56ddf83032fd0a4ae1b0c1dcb9cb88\n    \n    Jay says: Concurrency is Overrated"},{"timestamp":1557859250,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"}],"currentPatchSet":{"number":"6","revision":"4f56d8a17e71c61ad953133189a7d62a6b26cf76","parents":["7d8ae919efaf62fcc247f56df32ed865ae83122c"],"ref":"refs/changes/21/6221/6","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1557859221,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"-1","grantedOn":1557784852,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"-1","grantedOn":1557798756,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1557859250,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":16,"deletions":-27},{"file":"boot/firstboot.sh","type":"MODIFIED","insertions":110,"deletions":-2},{"file":"cmd/server.js","type":"MODIFIED","insertions":2,"deletions":-24},{"file":"docs/basic.md","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"etc/config.json.template","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"etc/rsyncd.conf","type":"ADDED","insertions":9,"deletions":0},{"file":"etc/testconfig.json.template","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/actors.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/delete_record_transformer.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/gc_worker.js","type":"MODIFIED","insertions":12,"deletions":-14},{"file":"lib/mako_instruction_uploader.js","type":"DELETED","insertions":0,"deletions":-339},{"file":"lib/mako_instruction_writer.js","type":"ADDED","insertions":418,"deletions":0},{"file":"lib/schema.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"sapi_manifests/manta-garbage-collector/template","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"smf/manifests/rsyncd.xml","type":"ADDED","insertions":20,"deletions":0},{"file":"test/common.js","type":"MODIFIED","insertions":3,"deletions":-13},{"file":"tools/records.js","type":"MODIFIED","insertions":1,"deletions":-2}],"sizeInsertions":624,"sizeDeletions":-448},"patchSets":[{"number":"1","revision":"c593fe046ae56d258dd3c0add1165baacf3e8676","parents":["d9384f0fdc5ffc1f32939c2915c2cd080b929b7c"],"ref":"refs/changes/21/6221/1","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1557372696,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1557372725,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"boot/firstboot.sh","type":"MODIFIED","insertions":30,"deletions":-2},{"file":"cmd/server.js","type":"MODIFIED","insertions":2,"deletions":-24},{"file":"docs/basic.md","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"etc/config.json.template","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"etc/rsyncd.conf","type":"ADDED","insertions":9,"deletions":0},{"file":"etc/testconfig.json.template","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/actors.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/delete_record_transformer.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/gc_worker.js","type":"MODIFIED","insertions":12,"deletions":-14},{"file":"lib/mako_instruction_uploader.js","type":"DELETED","insertions":0,"deletions":-339},{"file":"lib/mako_instruction_writer.js","type":"ADDED","insertions":414,"deletions":0},{"file":"lib/schema.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"sapi_manifests/manta-garbage-collector/template","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"smf/manifests/rsyncd.xml","type":"ADDED","insertions":20,"deletions":0},{"file":"test/common.js","type":"MODIFIED","insertions":3,"deletions":-13},{"file":"tools/records.js","type":"MODIFIED","insertions":1,"deletions":-2}],"sizeInsertions":528,"sizeDeletions":-425},{"number":"2","revision":"d88f1363e4e176a0dee78841efb857475bedf282","parents":["7d8ae919efaf62fcc247f56df32ed865ae83122c"],"ref":"refs/changes/21/6221/2","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1557421934,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1557421964,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1557426676,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1557426676,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}}],"comments":[{"file":"README.md","line":319,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"This is my fault for not adding it and I assume you stumbled across it doing a search for original variable names.  I feel bad even asking since it was my mistake, but could you add something here for instr_write_min_batch_size?"},{"file":"README.md","line":319,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Absolutely. Good catch."},{"file":"etc/config.json.template","line":47,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"This is my fault for not doing this, but could you add instr_write_min_batch_size?"},{"file":"lib/mako_instruction_writer.js","line":150,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"This is a nit, but I was wondering if there is a reason you prefer the // style convention of comment syntax over /* */ ?  I personally think it looks better if the same convention is used throughout a file.  If you like // then any subsequent work that I might do in here will use it too.  I just think it looks better if it\u0027s all the same."},{"file":"lib/mako_instruction_writer.js","line":150,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"I generally prefer // everywhere in JS. But I also agree it\u0027s better to be consistent. Thanks for pointing this out. I just do this without thinking at this point. I\u0027ll fix to match the rest of the file."},{"file":"lib/mako_instruction_writer.js","line":174,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Is it necessary to make a temporary directory?  Couldn\u0027t we just as easily write the data out to a temp file and rename that?  I guess it would mean that a mako couldn\u0027t just rsync *anything* they wanted from the target directory, but I wouldn\u0027t think that\u0027s unreasonable."},{"file":"lib/mako_instruction_writer.js","line":174,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"The reason for a temp directory, is that if we did that it\u0027s possible for a client to see a partially written temp file when we point it at this directory and tell it to do a sync.\n\nThis way, if the client just pulls everything from mako/ (instead of mako.tmp/) they will only ever be pulling down complete files. We also want to be able to delete the files after they\u0027re processed and we don\u0027t want to accidentally be deleting temp files as they\u0027re being written. To me it just seemed simpler to keep them separate.\n\nIf you\u0027d strongly prefer files with a .tmp name I could make that work as well. In that case I\u0027d just also need to change the rsync options on the client to ignore files that end with .tmp."},{"file":"sapi_manifests/manta-garbage-collector/template","line":54,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"54-57: My preference would be to rename the variables in SAPI to be consistent with what they\u0027re called in the config file.  I don\u0027t think anything has a dependency on them right now except for humans."},{"file":"sapi_manifests/manta-garbage-collector/template","line":54,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"I agree with that, but I wasn\u0027t sure if we wanted to require that as another step in the installation procedure here. I will write a script to copy all these values so that we have both (and are able to roll back if we needed to)."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"boot/firstboot.sh","type":"MODIFIED","insertions":30,"deletions":-2},{"file":"cmd/server.js","type":"MODIFIED","insertions":2,"deletions":-24},{"file":"docs/basic.md","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"etc/config.json.template","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"etc/rsyncd.conf","type":"ADDED","insertions":9,"deletions":0},{"file":"etc/testconfig.json.template","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/actors.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/delete_record_transformer.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/gc_worker.js","type":"MODIFIED","insertions":12,"deletions":-14},{"file":"lib/mako_instruction_uploader.js","type":"DELETED","insertions":0,"deletions":-339},{"file":"lib/mako_instruction_writer.js","type":"ADDED","insertions":414,"deletions":0},{"file":"lib/schema.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"sapi_manifests/manta-garbage-collector/template","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"smf/manifests/rsyncd.xml","type":"ADDED","insertions":20,"deletions":0},{"file":"test/common.js","type":"MODIFIED","insertions":3,"deletions":-13},{"file":"tools/records.js","type":"MODIFIED","insertions":1,"deletions":-2}],"sizeInsertions":528,"sizeDeletions":-426},{"number":"3","revision":"c1f355fe93fb264ea1ed69c7b3dfe9840054b7ac","parents":["7d8ae919efaf62fcc247f56df32ed865ae83122c"],"ref":"refs/changes/21/6221/3","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1557463055,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1557463085,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1557499469,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1557499469,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1557475252,"by":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"}}],"comments":[{"file":"boot/firstboot.sh","line":62,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"FWIW This was somewhat unclear to me until I read the code below. I think it was mainly \"copy the old values to the new\" that threw me off. I might say something like. \"...it will import the existing configuration values into the new configuration and leave the old configuration file in place in order to support rollback.\""},{"file":"boot/firstboot.sh","line":62,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":16,"deletions":-27},{"file":"boot/firstboot.sh","type":"MODIFIED","insertions":102,"deletions":-2},{"file":"cmd/server.js","type":"MODIFIED","insertions":2,"deletions":-24},{"file":"docs/basic.md","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"etc/config.json.template","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"etc/rsyncd.conf","type":"ADDED","insertions":9,"deletions":0},{"file":"etc/testconfig.json.template","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/actors.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/delete_record_transformer.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/gc_worker.js","type":"MODIFIED","insertions":12,"deletions":-14},{"file":"lib/mako_instruction_uploader.js","type":"DELETED","insertions":0,"deletions":-339},{"file":"lib/mako_instruction_writer.js","type":"ADDED","insertions":418,"deletions":0},{"file":"lib/schema.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"sapi_manifests/manta-garbage-collector/template","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"smf/manifests/rsyncd.xml","type":"ADDED","insertions":20,"deletions":0},{"file":"test/common.js","type":"MODIFIED","insertions":3,"deletions":-13},{"file":"tools/records.js","type":"MODIFIED","insertions":1,"deletions":-2}],"sizeInsertions":615,"sizeDeletions":-447},{"number":"4","revision":"2fd50eb018503d12ca44135c7693669bcf6ce2f0","parents":["7d8ae919efaf62fcc247f56df32ed865ae83122c"],"ref":"refs/changes/21/6221/4","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1557514160,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1557514189,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1557515994,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1557515994,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1557767178,"by":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":16,"deletions":-27},{"file":"boot/firstboot.sh","type":"MODIFIED","insertions":110,"deletions":-2},{"file":"cmd/server.js","type":"MODIFIED","insertions":2,"deletions":-24},{"file":"docs/basic.md","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"etc/config.json.template","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"etc/rsyncd.conf","type":"ADDED","insertions":9,"deletions":0},{"file":"etc/testconfig.json.template","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/actors.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/delete_record_transformer.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/gc_worker.js","type":"MODIFIED","insertions":12,"deletions":-14},{"file":"lib/mako_instruction_uploader.js","type":"DELETED","insertions":0,"deletions":-339},{"file":"lib/mako_instruction_writer.js","type":"ADDED","insertions":418,"deletions":0},{"file":"lib/schema.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"sapi_manifests/manta-garbage-collector/template","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"smf/manifests/rsyncd.xml","type":"ADDED","insertions":20,"deletions":0},{"file":"test/common.js","type":"MODIFIED","insertions":3,"deletions":-13},{"file":"tools/records.js","type":"MODIFIED","insertions":1,"deletions":-2}],"sizeInsertions":623,"sizeDeletions":-447},{"number":"5","revision":"fddc914d93986d1f8a6d885be8851c0e69508e63","parents":["7d8ae919efaf62fcc247f56df32ed865ae83122c"],"ref":"refs/changes/21/6221/5","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1557784686,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1557514189,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1557515994,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"-1","grantedOn":1557798756,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"-1","grantedOn":1557784852,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1557767178,"by":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":16,"deletions":-27},{"file":"boot/firstboot.sh","type":"MODIFIED","insertions":110,"deletions":-2},{"file":"cmd/server.js","type":"MODIFIED","insertions":2,"deletions":-24},{"file":"docs/basic.md","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"etc/config.json.template","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"etc/rsyncd.conf","type":"ADDED","insertions":9,"deletions":0},{"file":"etc/testconfig.json.template","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/actors.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/delete_record_transformer.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/gc_worker.js","type":"MODIFIED","insertions":12,"deletions":-14},{"file":"lib/mako_instruction_uploader.js","type":"DELETED","insertions":0,"deletions":-339},{"file":"lib/mako_instruction_writer.js","type":"ADDED","insertions":418,"deletions":0},{"file":"lib/schema.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"sapi_manifests/manta-garbage-collector/template","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"smf/manifests/rsyncd.xml","type":"ADDED","insertions":20,"deletions":0},{"file":"test/common.js","type":"MODIFIED","insertions":3,"deletions":-13},{"file":"tools/records.js","type":"MODIFIED","insertions":1,"deletions":-2}],"sizeInsertions":623,"sizeDeletions":-447},{"number":"6","revision":"4f56d8a17e71c61ad953133189a7d62a6b26cf76","parents":["7d8ae919efaf62fcc247f56df32ed865ae83122c"],"ref":"refs/changes/21/6221/6","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1557859221,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1557859250,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"-1","grantedOn":1557798756,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"-1","grantedOn":1557784852,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":16,"deletions":-27},{"file":"boot/firstboot.sh","type":"MODIFIED","insertions":110,"deletions":-2},{"file":"cmd/server.js","type":"MODIFIED","insertions":2,"deletions":-24},{"file":"docs/basic.md","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"etc/config.json.template","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"etc/rsyncd.conf","type":"ADDED","insertions":9,"deletions":0},{"file":"etc/testconfig.json.template","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/actors.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/delete_record_transformer.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/gc_worker.js","type":"MODIFIED","insertions":12,"deletions":-14},{"file":"lib/mako_instruction_uploader.js","type":"DELETED","insertions":0,"deletions":-339},{"file":"lib/mako_instruction_writer.js","type":"ADDED","insertions":418,"deletions":0},{"file":"lib/schema.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"sapi_manifests/manta-garbage-collector/template","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"smf/manifests/rsyncd.xml","type":"ADDED","insertions":20,"deletions":0},{"file":"test/common.js","type":"MODIFIED","insertions":3,"deletions":-13},{"file":"tools/records.js","type":"MODIFIED","insertions":1,"deletions":-2}],"sizeInsertions":624,"sizeDeletions":-448}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}]}