{"project":"joyent/sdcadm","branch":"master","id":"I8a083b5b363fb2479d9217dcdb0b0594a390e853","number":"3121","subject":"TOOLS-1940 sdcadm should provide tools to fix sapi0 instance in sapi Reviewed by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e Approved by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/3121","commitMessage":"TOOLS-1940 sdcadm should provide tools to fix sapi0 instance in sapi\nReviewed by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e\nApproved by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e\n","createdOn":1513617601,"lastUpdated":1515692939,"open":false,"status":"MERGED","comments":[{"timestamp":1513617601,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1513617634,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1513642800,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 1:\n\nIs this relevant only for the use case when there\u0027s already a sapi0 instance with missing params/data and we\u0027re creating a new SAPI instance? Or am I misunderstanding something?\n\nIf this is correct, does that mean that the use case when we create the first SAPI instance is fixed?"},{"timestamp":1513680869,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\n\u003e Is this relevant only for the use case when there\u0027s already a sapi0\n \u003e instance with missing params/data and we\u0027re creating a new SAPI\n \u003e instance? Or am I misunderstanding something?\n \u003e \n \u003e If this is correct, does that mean that the use case when we create\n \u003e the first SAPI instance is fixed?\n\nYes, exactly. Unless something totally unexpected happens thats the single use case."},{"timestamp":1513712745,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 1: Code-Review+1\n\n(1 comment)"},{"timestamp":1513787178,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2."},{"timestamp":1513787205,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\n\u003e (1 comment)\n\nCannot see why not. Added!"},{"timestamp":1513787211,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1513810342,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1513974474,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3: Patch Set 2 was rebased"},{"timestamp":1513974506,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3:\n\n\"make check\" passed ok"},{"timestamp":1515510819,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\nJulien, given the simple nature of the Integration testing for this issue, just verify that the sapi service parameters are fixed after creating a new service instance, I\u0027d say we\u0027re good to IA+1 this one?"},{"timestamp":1515633183,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1515692591,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1515692939,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"4","revision":"8a083b5b363fb2479d9217dcdb0b0594a390e853","parents":["47704904431d8fb7d1316cffdc6280a082de7893"],"ref":"refs/changes/21/3121/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1515692591,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1513787211,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1513810342,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1515633183,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"SUBM","value":"1","grantedOn":1515692939,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/procedures/create-service-instance-v1.js","type":"MODIFIED","insertions":23,"deletions":-5},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":85,"deletions":-2}],"sizeInsertions":108,"sizeDeletions":-7},"patchSets":[{"number":"1","revision":"759ef58605057843efc7bc75daf6cd4367eb098c","parents":["c3b20dc42de36fc7b5b1a3a572e76b034d4d2932"],"ref":"refs/changes/21/3121/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1513617601,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1513617634,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1513712745,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"comments":[{"file":"lib/steps/sapi.js","line":321,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Maybe mention HEAD-2384 here?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/procedures/create-service-instance-v1.js","type":"MODIFIED","insertions":23,"deletions":-5},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":83,"deletions":-2}],"sizeInsertions":106,"sizeDeletions":-7},{"number":"2","revision":"73d271bddf4f0966d6c19906e58f93e2800355d4","parents":["c3b20dc42de36fc7b5b1a3a572e76b034d4d2932"],"ref":"refs/changes/21/3121/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1513787178,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1513787211,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1513810342,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/procedures/create-service-instance-v1.js","type":"MODIFIED","insertions":23,"deletions":-5},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":85,"deletions":-2}],"sizeInsertions":108,"sizeDeletions":-7},{"number":"3","revision":"d320874b37ccfa2c98dd241220a5a6d3e68b2bd8","parents":["47704904431d8fb7d1316cffdc6280a082de7893"],"ref":"refs/changes/21/3121/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1513974474,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1513787211,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1513810342,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1515633183,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/procedures/create-service-instance-v1.js","type":"MODIFIED","insertions":23,"deletions":-5},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":85,"deletions":-2}],"sizeInsertions":108,"sizeDeletions":-7},{"number":"4","revision":"8a083b5b363fb2479d9217dcdb0b0594a390e853","parents":["47704904431d8fb7d1316cffdc6280a082de7893"],"ref":"refs/changes/21/3121/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1515692591,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1513787211,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1515692939,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1513810342,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1515633183,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/procedures/create-service-instance-v1.js","type":"MODIFIED","insertions":23,"deletions":-5},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":85,"deletions":-2}],"sizeInsertions":108,"sizeDeletions":-7}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}