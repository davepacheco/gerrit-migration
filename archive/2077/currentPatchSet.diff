From f23bf005a879f4fb1e898aef03108138dbbadffc Mon Sep 17 00:00:00 2001
From: Isaac Davis <isaac.davis@joyent.com>
Date: Mon, 12 Jun 2017 21:32:18 +0000
Subject: [PATCH] OS-6182 dladm segfaults when creating overlay without
 specifying search plugin

---
 usr/src/cmd/dladm/dladm.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/usr/src/cmd/dladm/dladm.c b/usr/src/cmd/dladm/dladm.c
index 40c28ad6ab..797de86319 100644
--- a/usr/src/cmd/dladm/dladm.c
+++ b/usr/src/cmd/dladm/dladm.c
@@ -9925,7 +9925,7 @@ do_create_overlay(int argc, char *argv[], const char *use)
 	if (encap == NULL)
 		die("missing required encapsulation plugin");
 
-	if (encap == NULL)
+	if (search == NULL)
 		die("missing required search plugin");
 
 	if (optind != (argc - 1))
-- 
2.21.0

