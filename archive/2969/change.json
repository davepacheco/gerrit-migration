{"project":"joyent/illumos-joyent","branch":"master","id":"I58853b2326b7e3a605e4e558d0af3e028c87f434","number":"2969","subject":"OS-6448 fmdump(1m) should be more resilient in the face of missing message content Reviewed by: Robert Mustacchi \u003crobert.mustacchi@joyent.com\u003e Approved by: Robert Mustacchi \u003crobert.mustacchi@joyent.com\u003e","owner":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"url":"https://cr.joyent.us/2969","commitMessage":"OS-6448 fmdump(1m) should be more resilient in the face of missing message content\nReviewed by: Robert Mustacchi \u003crobert.mustacchi@joyent.com\u003e\nApproved by: Robert Mustacchi \u003crobert.mustacchi@joyent.com\u003e\n","createdOn":1511203284,"lastUpdated":1511985481,"open":false,"status":"MERGED","comments":[{"timestamp":1511203284,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 1."},{"timestamp":1511818587,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1511827930,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1511896946,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 3: Patch Set 2 was rebased."},{"timestamp":1511981662,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1511982262,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1\n\n(1 comment)"},{"timestamp":1511982883,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 4."},{"timestamp":1511983330,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1"},{"timestamp":1511985427,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1511985481,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Rob Johnston"}],"currentPatchSet":{"number":"5","revision":"58853b2326b7e3a605e4e558d0af3e028c87f434","parents":["62f3edb48bcd64917d8be4e8d0b56de5aab2b3c4"],"ref":"refs/changes/69/2969/5","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1511985427,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1511983330,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1511983330,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1511985480,"by":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/fm/fmdump/common/fault.c","type":"MODIFIED","insertions":9,"deletions":-5}],"sizeInsertions":9,"sizeDeletions":-5},"patchSets":[{"number":"1","revision":"2f0150cfbac6820e037b5b76be41ed933a198555","parents":["2d0998ba9095083be74c87c6dd61bd2d364b00ac"],"ref":"refs/changes/69/2969/1","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1511203284,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/fm/fmdump/common/fault.c","type":"MODIFIED","insertions":8,"deletions":-4}],"sizeInsertions":8,"sizeDeletions":-4},{"number":"2","revision":"4d4db047e4fad00293d3929517b02af960ae9454","parents":["2ba2c786fc7f279dff78bdfdb8d6f8c63b445314"],"ref":"refs/changes/69/2969/2","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1511818587,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"TRIVIAL_REBASE","comments":[{"file":"usr/src/cmd/fm/fmdump/common/fault.c","line":255,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Are we guaranteed that nvlist_lookup_string() won\u0027t modify it\u0027s argument when it fails?"},{"file":"usr/src/cmd/fm/fmdump/common/fault.c","line":255,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Yes, from reading the code in libnvpair, I believe this should be safe."},{"file":"usr/src/cmd/fm/fmdump/common/fault.c","line":255,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"OK. Fair enough. I always get worried about things clobbering, but I guess if that changed, we\u0027d break a lot of code."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/fm/fmdump/common/fault.c","type":"MODIFIED","insertions":8,"deletions":-4}],"sizeInsertions":8,"sizeDeletions":-4},{"number":"3","revision":"912b5ba94e3a9236e8f4998e6f1b4168ee57e2b0","parents":["d34c3f35352d3d27e8f1c35be3da4cb32b1486db"],"ref":"refs/changes/69/2969/3","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1511896946,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1511982262,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1511982262,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/fm/fmdump/common/fault.c","type":"MODIFIED","insertions":8,"deletions":-4}],"sizeInsertions":8,"sizeDeletions":-4},{"number":"4","revision":"6e622dbba5ad6aa4564f3df87ea9efce7b4750db","parents":["62f3edb48bcd64917d8be4e8d0b56de5aab2b3c4"],"ref":"refs/changes/69/2969/4","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1511982883,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1511983330,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1511983330,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/fm/fmdump/common/fault.c","type":"MODIFIED","insertions":9,"deletions":-5}],"sizeInsertions":9,"sizeDeletions":-5},{"number":"5","revision":"58853b2326b7e3a605e4e558d0af3e028c87f434","parents":["62f3edb48bcd64917d8be4e8d0b56de5aab2b3c4"],"ref":"refs/changes/69/2969/5","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1511985427,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1511983330,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1511983330,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1511985480,"by":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/fm/fmdump/common/fault.c","type":"MODIFIED","insertions":9,"deletions":-5}],"sizeInsertions":9,"sizeDeletions":-5}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}]}