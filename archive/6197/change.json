{"project":"joyent/sdcadm","branch":"master","id":"I68397ac09343d8af9ad971a56d57651ea4a2ccf0","number":"6197","subject":"TRITON-1646 Add flexible_disk package to dev-sample-data Reviewed by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e Approved by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/6197","commitMessage":"TRITON-1646 Add flexible_disk package to dev-sample-data\nReviewed by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e\nApproved by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e\n","createdOn":1557140385,"lastUpdated":1557411912,"open":false,"status":"MERGED","comments":[{"timestamp":1557140385,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1557140390,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit f26d77d054a559105b3195403db81f6c41c569b0\n    \n    TRITON-1646 Add flexible_disk package to dev-sample-data"},{"timestamp":1557140427,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1557140444,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nMay I get a quick CR of this? The package is needed in order to make the triton tests related to flexible disk and bhyve run"},{"timestamp":1557147285,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 1:\n\n(2 comments)\n\nIf the sole purpose of this change is to get tests to pass, then it\u0027s probably fine as-is.  If a new Triton installation gets seeded with these samples and customers use these samples for evaluating the product, please consider my suggestions."},{"timestamp":1557251816,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2."},{"timestamp":1557251822,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 92bc2aa0219b7867f8b1b804484b278baacf12d6\n    \n    Applied Mike suggestions"},{"timestamp":1557251863,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1557251896,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\n(2 comments)\n\nWell, the goal of the development data is not only to help tests passing but to help developers figure out how things works quickly, and I think your suggestions will definitely be helpful for anybody w/o previous knowledge of multiple disks or flexible disk support for packages. Applied."},{"timestamp":1557252096,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1557327027,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 3."},{"timestamp":1557327032,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit fba2174913d25af8fc2c0ece89935243c75f61a2\n    \n    Applied Mike suggestions\n    \n    commit f26d77d054a559105b3195403db81f6c41c569b0\n    \n    TRITON-1646 Add flexible_disk package to dev-sample-data"},{"timestamp":1557327062,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1557327068,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\n(1 comment)\n\nDone Mike. Left definition open and bumped the quota and the size to match our defaults for the images."},{"timestamp":1557329450,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1557331878,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 4."},{"timestamp":1557331883,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 685f7028b232c0d380803c9a7eb9b7e7612cdbd1\n    \n    Applied Mike suggestions\n    \n    commit f26d77d054a559105b3195403db81f6c41c569b0\n    \n    TRITON-1646 Add flexible_disk package to dev-sample-data"},{"timestamp":1557331916,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1557336750,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 5."},{"timestamp":1557336754,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit a406502293aa0341845fe677aa25aced35980c3b\n    \n    Applied Mike suggestions\n    \n    commit f26d77d054a559105b3195403db81f6c41c569b0\n    \n    TRITON-1646 Add flexible_disk package to dev-sample-data"},{"timestamp":1557336780,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 4:\n\n(1 comment)\n\nAlmost forgot to push the new patchset I made during our meeting today ..."},{"timestamp":1557336786,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1557337161,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1"},{"timestamp":1557411901,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1557411912,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"6","revision":"68397ac09343d8af9ad971a56d57651ea4a2ccf0","parents":["7b8b7e1075ad2d46510e65a1c57842a3e7070052"],"ref":"refs/changes/97/6197/6","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1557411901,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1557336786,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1557337161,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1557337161,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"SUBM","value":"1","grantedOn":1557411911,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"etc/sample-packages.json","type":"MODIFIED","insertions":63,"deletions":0}],"sizeInsertions":63,"sizeDeletions":0},"patchSets":[{"number":"1","revision":"c94ea471c52816ce84b5545afadfcb1d6aeb8db7","parents":["7b8b7e1075ad2d46510e65a1c57842a3e7070052"],"ref":"refs/changes/97/6197/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1557140385,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1557140427,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"etc/sample-packages.json","line":166,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Someone that tries out bhyve using this sample package will find that performs quite poorly due to so little RAM that it is likely to swap and very little CPU.   Reasonable performance can be had with 1 GiB and 1 vcpu, so it would be better to base this one on sample-1G."},{"file":"etc/sample-packages.json","line":166,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"etc/sample-packages.json","line":182,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"I think that two more samples would be useful illustrating the use of `disks`.  I\u0027m not sure the names I\u0027ve picked are great - maybe they should have \"description\" fields to fill in the details.\n\n1. sample-bhyve-reserved-snapshots-space: Create two disks, each with an explicit size such that the aggregate size of the disks is about half the size of quota\n\n2. sample-bhyve-three-disks: Create three disks, leaving the size unspecified for the boot disk, a specific size for the second disk, and the third disk has `\"size\": \"remaining\"`."},{"file":"etc/sample-packages.json","line":182,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"etc/sample-packages.json","type":"MODIFIED","insertions":18,"deletions":0}],"sizeInsertions":18,"sizeDeletions":0},{"number":"2","revision":"e21511c3b070fead70e86a9afb59f8869245a06f","parents":["7b8b7e1075ad2d46510e65a1c57842a3e7070052"],"ref":"refs/changes/97/6197/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1557251816,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1557251863,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"etc/sample-packages.json","line":201,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"The size should either be left not specified (comes from the image) or specified to a size that is no smaller than our typical image."},{"file":"etc/sample-packages.json","line":201,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Good call. Done!"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"etc/sample-packages.json","type":"MODIFIED","insertions":63,"deletions":0}],"sizeInsertions":63,"sizeDeletions":0},{"number":"3","revision":"5dd5b7fdf6c470b6d680239304f6718e5d7e8483","parents":["7b8b7e1075ad2d46510e65a1c57842a3e7070052"],"ref":"refs/changes/97/6197/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1557327027,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1557327062,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"etc/sample-packages.json","line":201,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"two spaces?"},{"file":"etc/sample-packages.json","line":201,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Yeah, and what it\u0027s worse, see quota below! I just fixed both."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"etc/sample-packages.json","type":"MODIFIED","insertions":63,"deletions":0}],"sizeInsertions":63,"sizeDeletions":0},{"number":"4","revision":"1e534dc85918b9510288bfb0b59f932904ccf8c1","parents":["7b8b7e1075ad2d46510e65a1c57842a3e7070052"],"ref":"refs/changes/97/6197/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1557331878,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1557331916,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"etc/sample-packages.json","type":"MODIFIED","insertions":63,"deletions":0}],"sizeInsertions":63,"sizeDeletions":0},{"number":"5","revision":"272e84496de52472f740d1ff5203c55cee9c8634","parents":["7b8b7e1075ad2d46510e65a1c57842a3e7070052"],"ref":"refs/changes/97/6197/5","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1557336750,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1557336786,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1557337161,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1557337161,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"etc/sample-packages.json","type":"MODIFIED","insertions":63,"deletions":0}],"sizeInsertions":63,"sizeDeletions":0},{"number":"6","revision":"68397ac09343d8af9ad971a56d57651ea4a2ccf0","parents":["7b8b7e1075ad2d46510e65a1c57842a3e7070052"],"ref":"refs/changes/97/6197/6","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1557411901,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1557336786,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1557411911,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1557337161,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1557337161,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"etc/sample-packages.json","type":"MODIFIED","insertions":63,"deletions":0}],"sizeInsertions":63,"sizeDeletions":0}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}]}