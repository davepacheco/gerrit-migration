From bf78f2a5dd9bccc32abe718e3f0039d4814c930c Mon Sep 17 00:00:00 2001
From: Robert Mustacchi <rm@joyent.com>
Date: Thu, 9 Feb 2017 18:16:44 +0000
Subject: [PATCH] MANTA-3154 mpu module should be md5 implementation agnostic

---
 src/http/modules/mpu/ngx_http_mpu_commit_module.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/src/http/modules/mpu/ngx_http_mpu_commit_module.c b/src/http/modules/mpu/ngx_http_mpu_commit_module.c
index 5ba4cf95..43e6c8e5 100644
--- a/src/http/modules/mpu/ngx_http_mpu_commit_module.c
+++ b/src/http/modules/mpu/ngx_http_mpu_commit_module.c
@@ -175,7 +175,6 @@
 #include <libgen.h>
 #include <stdarg.h>
 #include <sys/debug.h>
-#include <md5.h>
 #include <atomic.h>
 
 #include "deps/json-nvlist.h"
@@ -241,7 +240,7 @@ typedef struct {
 	ngx_int_t		mpcr_status;
 	ngx_buf_t		mpcr_ngx_buf;
 	ngx_md5_t		mpcr_md5;
-	char			mpcr_md5_buf[MD5_DIGEST_LENGTH];
+	unsigned char		mpcr_md5_buf[MD5_DIGEST_LENGTH];
 	char			mpcr_md5_b64[MPU_MD5_B64_LEN];
 	char			mpcr_error[MPU_ERR_BUF_LEN];
 } mpu_request_t;
-- 
2.21.0

