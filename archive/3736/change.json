{"project":"joyent/illumos-joyent","branch":"master","id":"Ib409c9a314a881a4aa643e85cd5494af77fa4488","number":"3736","subject":"OS-6837 bhyve must use separate ipi vector for PIR Reviewed by: Bryan Cantrill \u003cbryan@joyent.com\u003e Reviewed by: John Levon \u003cjohn.levon@joyent.com\u003e Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Approved by: Robert Mustacchi \u003crm@joyent.com\u003e","owner":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"url":"https://cr.joyent.us/3736","commitMessage":"OS-6837 bhyve must use separate ipi vector for PIR\nReviewed by: Bryan Cantrill \u003cbryan@joyent.com\u003e\nReviewed by: John Levon \u003cjohn.levon@joyent.com\u003e\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nApproved by: Robert Mustacchi \u003crm@joyent.com\u003e\n","createdOn":1522294683,"lastUpdated":1522373661,"open":false,"status":"MERGED","comments":[{"timestamp":1522294683,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 1."},{"timestamp":1522295544,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1522319913,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\n(5 comments)\n\nSeems much nicer than carving out another PIL!"},{"timestamp":1522335547,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(4 comments)"},{"timestamp":1522335890,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(10 comments)\n\nAs I don\u0027t have much familiarity with the vmm code, I have not reviewed that part."},{"timestamp":1522351242,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 2."},{"timestamp":1522351249,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(11 comments)"},{"timestamp":1522354914,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1522354961,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1522354972,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1522360269,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2:\n\nI\u0027ve added notes about the testing I was able to complete in the ticket."},{"timestamp":1522373325,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1522373500,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 3: Patch Set 2 was rebased."},{"timestamp":1522373639,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1522373661,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Patrick Mooney"}],"currentPatchSet":{"number":"4","revision":"b409c9a314a881a4aa643e85cd5494af77fa4488","parents":["966ea1794ae987e496f16d40f7b45be7e16445cf"],"ref":"refs/changes/36/3736/4","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1522373639,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522354914,"by":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522354961,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522354972,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1522373325,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1522373661,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/apix/apix.c","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/common/intr_common.c","type":"MODIFIED","insertions":19,"deletions":-7},{"file":"usr/src/cmd/mdb/i86pc/modules/common/intr_common.h","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/pcplusmp/pcplusmp.c","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/smp.h","type":"MODIFIED","insertions":4,"deletions":-12},{"file":"usr/src/uts/i86pc/io/apix/apix.c","type":"MODIFIED","insertions":11,"deletions":-2},{"file":"usr/src/uts/i86pc/io/apix/apix_regops.c","type":"MODIFIED","insertions":43,"deletions":-1},{"file":"usr/src/uts/i86pc/io/pcplusmp/apic.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/i86pc/io/pcplusmp/apic_common.c","type":"MODIFIED","insertions":27,"deletions":-11},{"file":"usr/src/uts/i86pc/io/psm/uppc.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","type":"MODIFIED","insertions":20,"deletions":-3},{"file":"usr/src/uts/i86pc/io/vmm/vmm.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_glue.c","type":"MODIFIED","insertions":0,"deletions":-32},{"file":"usr/src/uts/i86pc/os/mp_machdep.c","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/i86pc/sys/apic.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/i86pc/sys/apic_common.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/i86pc/sys/psm_types.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/sys/smp_impldefs.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/i86xpv/io/psm/xpv_psm.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86xpv/io/psm/xpv_uppc.c","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":167,"sizeDeletions":-78},"patchSets":[{"number":"1","revision":"592a80d5c4c06c362e97e59ab6ec91a84db49275","parents":["c71361021aefa698da0636af512389499353e02d"],"ref":"refs/changes/36/3736/1","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1522294683,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522295544,"by":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"}}],"comments":[{"file":"usr/src/compat/freebsd/amd64/machine/smp.h","line":23,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"If we keep it like this, this comment doesn\u0027t make much sense now."},{"file":"usr/src/compat/freebsd/amd64/machine/smp.h","line":23,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Sure, I\u0027ll nuke it."},{"file":"usr/src/uts/i86pc/io/pcplusmp/apic_common.c","line":634,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"If it\u0027s intentional that we don\u0027t have an equivalent for x2apic case, a comment would be appreciated. Either way, a quick comment at apic_switch_ipi_callback() that we don\u0027t care about PIR this early in boot would be good."},{"file":"usr/src/uts/i86pc/io/pcplusmp/apic_common.c","line":634,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"We do have coverage for x2apic?  This is compiled into both modules and each one has its own logic for initializing apic_pir_vect.  (Unless I\u0027m missing something)"},{"file":"usr/src/uts/i86pc/io/pcplusmp/apic_common.c","line":634,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Given the subtle differences in semantics between the two IPI mechanisms and in particular, MSR serialization, etc. we may really want to consider having two different cases for x2apic mode and not."},{"file":"usr/src/uts/i86pc/io/pcplusmp/apic_common.c","line":634,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"},{"file":"usr/src/uts/i86pc/io/pcplusmp/apic_common.c","line":635,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"What makes the guarantee that we\u0027re not ever directing this to the current CPU? As if we are, that should either be an error or we should handle that correctly."},{"file":"usr/src/uts/i86pc/io/pcplusmp/apic_common.c","line":635,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"},{"file":"usr/src/uts/i86pc/io/pcplusmp/apic_common.c","line":644,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Whether or not we do this depends on whether or not we\u0027re using the apix or pcplusmp. If you look at the apix x2apic_send_ipi() function, then we don\u0027t perform this normally if we\u0027re in x2apic mode; however, we will if we\u0027re in the traditional xapic/mmio mode."},{"file":"usr/src/uts/i86pc/io/pcplusmp/apic_common.c","line":644,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"},{"file":"usr/src/uts/i86pc/io/pcplusmp/apic_common.c","line":646,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"If we\u0027re in x2apic mode, then this will turn into a wrmsr and unlike other MSRs, the x2apic MSRs are not serializing instructions. I suspect that we should perform a serializing instruction for those who are doing work on this CPU ala what we do today in x2apic_send_ipi() before actually issuing the IPI."},{"file":"usr/src/uts/i86pc/io/pcplusmp/apic_common.c","line":646,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","line":757,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Can\u0027t this be lapic_ipi_alloc() in glue, then we don\u0027t need any delta at all here? I guess you don\u0027t want the IDTVEC goop?"},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","line":757,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I wanted to rip out the lapic_ipi_alloc() glue because the underlying logic is not actually performing any allocation.  If future additions here also require an additional IPI, we can specifically address them then."},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","line":3562,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"This is diverging from upstream, and I don\u0027t think it should. We went to all the trouble of acquiring pirvec via get_pir_ipivect(). So this should stay as the existing code, then ipi_cpu() is where we should differentiate between poke_cpu() and send_pir_ipi() depending on the \"ipi\" arg. No?"},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","line":3562,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"It was an error of mine when I didn\u0027t guard this change behind and ifdef (and I will fix that), but I don\u0027t think it make sense to \"hide\" it behind the ipi_cpu glue."},{"file":"usr/src/uts/i86pc/sys/apic_common.h","line":187,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"If there are no arguments, please put void in the arg list to make sure there\u0027s no possible confusion with K\u0026R style decls."},{"file":"usr/src/uts/i86pc/sys/apic_common.h","line":187,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"},{"file":"usr/src/uts/i86pc/sys/apic_common.h","line":188,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"See other notes about this being a processorid_t."},{"file":"usr/src/uts/i86pc/sys/apic_common.h","line":188,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"},{"file":"usr/src/uts/i86pc/sys/psm_types.h","line":195,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This should explicitly state that it\u0027s void.\n\nAny particular reason on adding a new func versus just making this an explicit type we pass into the psm_get_ipivect?"},{"file":"usr/src/uts/i86pc/sys/psm_types.h","line":195,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"},{"file":"usr/src/uts/i86pc/sys/psm_types.h","line":196,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is there a reason this is an int versus a processorid_t or other type ala the other psm ops? It seems surprising that this doesn\u0027t use the same type as psm_send_ipi()"},{"file":"usr/src/uts/i86pc/sys/psm_types.h","line":196,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"},{"file":"usr/src/uts/i86pc/sys/smp_impldefs.h","line":77,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Nit, please prefix these function pointers with psm_ so the context is obvious."},{"file":"usr/src/uts/i86pc/sys/smp_impldefs.h","line":77,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Make sure this is void."},{"file":"usr/src/uts/i86pc/sys/smp_impldefs.h","line":77,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"},{"file":"usr/src/uts/i86pc/sys/smp_impldefs.h","line":77,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"},{"file":"usr/src/uts/i86pc/sys/smp_impldefs.h","line":78,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"See notes about processorid_t."},{"file":"usr/src/uts/i86pc/sys/smp_impldefs.h","line":78,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/apix/apix.c","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/common/intr_common.c","type":"MODIFIED","insertions":19,"deletions":-7},{"file":"usr/src/cmd/mdb/i86pc/modules/common/intr_common.h","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/pcplusmp/pcplusmp.c","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/smp.h","type":"MODIFIED","insertions":1,"deletions":-6},{"file":"usr/src/uts/i86pc/io/apix/apix.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/i86pc/io/pcplusmp/apic.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/i86pc/io/pcplusmp/apic_common.c","type":"MODIFIED","insertions":25,"deletions":-11},{"file":"usr/src/uts/i86pc/io/psm/uppc.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"usr/src/uts/i86pc/io/vmm/vmm.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_glue.c","type":"MODIFIED","insertions":0,"deletions":-32},{"file":"usr/src/uts/i86pc/os/mp_machdep.c","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/i86pc/sys/apic_common.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/i86pc/sys/psm_types.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/sys/smp_impldefs.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/i86xpv/io/psm/xpv_psm.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86xpv/io/psm/xpv_uppc.c","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":106,"sizeDeletions":-70},{"number":"2","revision":"f3dd6bbdb5eb130fec3102d9cf8987028655de02","parents":["c71361021aefa698da0636af512389499353e02d"],"ref":"refs/changes/36/3736/2","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1522351242,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522354961,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1522373325,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522354914,"by":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522354972,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/apix/apix.c","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/common/intr_common.c","type":"MODIFIED","insertions":19,"deletions":-7},{"file":"usr/src/cmd/mdb/i86pc/modules/common/intr_common.h","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/pcplusmp/pcplusmp.c","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/smp.h","type":"MODIFIED","insertions":4,"deletions":-12},{"file":"usr/src/uts/i86pc/io/apix/apix.c","type":"MODIFIED","insertions":11,"deletions":-2},{"file":"usr/src/uts/i86pc/io/apix/apix_regops.c","type":"MODIFIED","insertions":43,"deletions":-1},{"file":"usr/src/uts/i86pc/io/pcplusmp/apic.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/i86pc/io/pcplusmp/apic_common.c","type":"MODIFIED","insertions":27,"deletions":-11},{"file":"usr/src/uts/i86pc/io/psm/uppc.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","type":"MODIFIED","insertions":20,"deletions":-3},{"file":"usr/src/uts/i86pc/io/vmm/vmm.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_glue.c","type":"MODIFIED","insertions":0,"deletions":-32},{"file":"usr/src/uts/i86pc/os/mp_machdep.c","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/i86pc/sys/apic.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/i86pc/sys/apic_common.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/i86pc/sys/psm_types.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/sys/smp_impldefs.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/i86xpv/io/psm/xpv_psm.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86xpv/io/psm/xpv_uppc.c","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":167,"sizeDeletions":-78},{"number":"3","revision":"c3bc4fc09dd9e28b2cbefe0265075af4cf040aac","parents":["966ea1794ae987e496f16d40f7b45be7e16445cf"],"ref":"refs/changes/36/3736/3","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1522373500,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522354961,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1522373325,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522354914,"by":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522354972,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/apix/apix.c","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/common/intr_common.c","type":"MODIFIED","insertions":19,"deletions":-7},{"file":"usr/src/cmd/mdb/i86pc/modules/common/intr_common.h","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/pcplusmp/pcplusmp.c","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/smp.h","type":"MODIFIED","insertions":4,"deletions":-12},{"file":"usr/src/uts/i86pc/io/apix/apix.c","type":"MODIFIED","insertions":11,"deletions":-2},{"file":"usr/src/uts/i86pc/io/apix/apix_regops.c","type":"MODIFIED","insertions":43,"deletions":-1},{"file":"usr/src/uts/i86pc/io/pcplusmp/apic.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/i86pc/io/pcplusmp/apic_common.c","type":"MODIFIED","insertions":27,"deletions":-11},{"file":"usr/src/uts/i86pc/io/psm/uppc.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","type":"MODIFIED","insertions":20,"deletions":-3},{"file":"usr/src/uts/i86pc/io/vmm/vmm.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_glue.c","type":"MODIFIED","insertions":0,"deletions":-32},{"file":"usr/src/uts/i86pc/os/mp_machdep.c","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/i86pc/sys/apic.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/i86pc/sys/apic_common.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/i86pc/sys/psm_types.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/sys/smp_impldefs.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/i86xpv/io/psm/xpv_psm.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86xpv/io/psm/xpv_uppc.c","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":167,"sizeDeletions":-78},{"number":"4","revision":"b409c9a314a881a4aa643e85cd5494af77fa4488","parents":["966ea1794ae987e496f16d40f7b45be7e16445cf"],"ref":"refs/changes/36/3736/4","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1522373639,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522354961,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1522373325,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522354914,"by":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"}},{"type":"SUBM","value":"1","grantedOn":1522373661,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522354972,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/apix/apix.c","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/common/intr_common.c","type":"MODIFIED","insertions":19,"deletions":-7},{"file":"usr/src/cmd/mdb/i86pc/modules/common/intr_common.h","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/pcplusmp/pcplusmp.c","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/smp.h","type":"MODIFIED","insertions":4,"deletions":-12},{"file":"usr/src/uts/i86pc/io/apix/apix.c","type":"MODIFIED","insertions":11,"deletions":-2},{"file":"usr/src/uts/i86pc/io/apix/apix_regops.c","type":"MODIFIED","insertions":43,"deletions":-1},{"file":"usr/src/uts/i86pc/io/pcplusmp/apic.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/i86pc/io/pcplusmp/apic_common.c","type":"MODIFIED","insertions":27,"deletions":-11},{"file":"usr/src/uts/i86pc/io/psm/uppc.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","type":"MODIFIED","insertions":20,"deletions":-3},{"file":"usr/src/uts/i86pc/io/vmm/vmm.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_glue.c","type":"MODIFIED","insertions":0,"deletions":-32},{"file":"usr/src/uts/i86pc/os/mp_machdep.c","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/i86pc/sys/apic.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/i86pc/sys/apic_common.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/i86pc/sys/psm_types.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/sys/smp_impldefs.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/i86xpv/io/psm/xpv_psm.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86xpv/io/psm/xpv_uppc.c","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":167,"sizeDeletions":-78}],"allReviewers":[{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}]}