{"project":"joyent/smartos-live","branch":"master","id":"Idd25937d2f9725def16f5e8dbb16a8bcbc2213d5","number":"63","subject":"OS-5492 Tune physical block size for Samsung client SSDs Reviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e Approved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e","owner":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"url":"https://cr.joyent.us/63","commitMessage":"OS-5492 Tune physical block size for Samsung client SSDs\nReviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\nApproved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n","createdOn":1468358757,"lastUpdated":1468963685,"open":false,"status":"MERGED","comments":[{"timestamp":1468358757,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 1."},{"timestamp":1468358938,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 2."},{"timestamp":1468359463,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 2: Code-Review-1\n\n(1 comment)"},{"timestamp":1468517566,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1468949933,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 3."},{"timestamp":1468962878,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1468963250,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 4: Code-Review+1\n\nThe new comment is great.  Thanks."},{"timestamp":1468963385,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4:\n\nFor testing this we had the customer which was affected by the issue validate with mdb that the block size was correctly seen as 4k. They also verified that the 4k block size did not see corruption.\n\nWe also did testing around having existing pools deal with the change in block size. They continued to work fine."},{"timestamp":1468963493,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 4: Integration-Approval+1"},{"timestamp":1468963554,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1468963685,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Robert Mustacchi"}],"currentPatchSet":{"number":"5","revision":"dd25937d2f9725def16f5e8dbb16a8bcbc2213d5","parents":["09953d5eb4ba6c1614a32095f4c8e7d0f1f73e4a"],"ref":"refs/changes/63/63/5","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1468963554,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1468963250,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1468963493,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1468963685,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"overlay/generic/kernel/drv/sd.conf","type":"MODIFIED","insertions":9,"deletions":-1}],"sizeInsertions":9,"sizeDeletions":-1},"patchSets":[{"number":"1","revision":"c65735c352e24da53aa7400799ac2e00975f3a0d","parents":["60330dbb31f1c2b3a2bdf670e0504fdf1bac1a42"],"ref":"refs/changes/63/63/1","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1468358757,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"overlay/generic/kernel/drv/sd.conf","type":"MODIFIED","insertions":7,"deletions":-1}],"sizeInsertions":7,"sizeDeletions":-1},{"number":"2","revision":"7e1fb9505d36027757d94aeeb234928d3789cb38","parents":["60330dbb31f1c2b3a2bdf670e0504fdf1bac1a42"],"ref":"refs/changes/63/63/2","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1468358938,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1468359463,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}}],"comments":[{"file":"overlay/generic/kernel/drv/sd.conf","line":71,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Can you flesh this out a little more?  I think it would be good to point out what an FTL is, and the exact implication of not doing 4K writes to these drives."},{"file":"overlay/generic/kernel/drv/sd.conf","line":71,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I can rephrase that such that FTL is flash translation layer. Sounds like I should just strike the reference to the ticket which should contain the information that you seem to want."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"overlay/generic/kernel/drv/sd.conf","type":"MODIFIED","insertions":7,"deletions":-1}],"sizeInsertions":7,"sizeDeletions":-1},{"number":"3","revision":"f1a77daf00d25635e651ee7f09ba2385734657bd","parents":["60330dbb31f1c2b3a2bdf670e0504fdf1bac1a42"],"ref":"refs/changes/63/63/3","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1468949933,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"overlay/generic/kernel/drv/sd.conf","type":"MODIFIED","insertions":9,"deletions":-1}],"sizeInsertions":9,"sizeDeletions":-1},{"number":"4","revision":"cd172411929a72540ac359d968c3018f7e86b049","parents":["09953d5eb4ba6c1614a32095f4c8e7d0f1f73e4a"],"ref":"refs/changes/63/63/4","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1468962878,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1468963250,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1468963493,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"overlay/generic/kernel/drv/sd.conf","type":"MODIFIED","insertions":9,"deletions":-1}],"sizeInsertions":9,"sizeDeletions":-1},{"number":"5","revision":"dd25937d2f9725def16f5e8dbb16a8bcbc2213d5","parents":["09953d5eb4ba6c1614a32095f4c8e7d0f1f73e4a"],"ref":"refs/changes/63/63/5","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1468963554,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1468963685,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1468963250,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1468963493,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"overlay/generic/kernel/drv/sd.conf","type":"MODIFIED","insertions":9,"deletions":-1}],"sizeInsertions":9,"sizeDeletions":-1}],"allReviewers":[{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}]}