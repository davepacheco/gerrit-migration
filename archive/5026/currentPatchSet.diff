From e54810720958e817107928df5f949d2b6cf4d77a Mon Sep 17 00:00:00 2001
From: Jeff Emershaw <me@jeffemershaw.com>
Date: Sat, 3 Nov 2018 00:16:47 -0400
Subject: [PATCH] mchmod issues with parseCmdOptions

---
 CHANGES.md     | 1 +
 lib/options.js | 3 ++-
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/CHANGES.md b/CHANGES.md
index 204ca2d..7d9a1a8 100644
--- a/CHANGES.md
+++ b/CHANGES.md
@@ -4,6 +4,7 @@ See `CONTRIBUTING.md` for details on how to update this file
 
 ## not yet released
 
+- [#358](https://github.com/joyent/node-manta/issues/358) mchmod command stopped working after v5.1.1
 - [#349](https://github.com/joyent/node-manta/issues/349) issue numbers in
   CHANGES.md should link to GitHub issues
 - [#335](https://github.com/joyent/node-manta/issues/335) Want option to confim
diff --git a/lib/options.js b/lib/options.js
index 3f7fdef..ebe11f0 100644
--- a/lib/options.js
+++ b/lib/options.js
@@ -84,12 +84,13 @@ function parseOptions(args) {
                         assert.ifError(utils.assertPath(p, true));
                         return (client.path(p, true));
                     };
-    opts.paths = opts._args.map(getPath);
 
     if (args.parseCmdOptions) {
         args.parseCmdOptions(opts, parser);
     }
 
+    opts.paths = opts._args.map(getPath);
+
     try {
         cc.checkBinEnv(opts);
     } catch (e) {
-- 
2.21.0

