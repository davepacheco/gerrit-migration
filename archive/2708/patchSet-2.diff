From bee6957d1f29030075695bca560843bb3c43bae7 Mon Sep 17 00:00:00 2001
From: Sam Gwydir <sam.gwydir@joyent.com>
Date: Tue, 3 Oct 2017 22:07:54 +0000
Subject: [PATCH] MANATEE-373 Want additional postgres modules for admin
 purposes

---
 etc/9.6/postgresql.manta.coal.conf       | 2 +-
 etc/9.6/postgresql.manta.lab.conf        | 2 +-
 etc/9.6/postgresql.manta.production.conf | 2 +-
 package.json                             | 2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/etc/9.6/postgresql.manta.coal.conf b/etc/9.6/postgresql.manta.coal.conf
index 5170bb8..2209619 100644
--- a/etc/9.6/postgresql.manta.coal.conf
+++ b/etc/9.6/postgresql.manta.coal.conf
@@ -142,7 +142,7 @@ shared_buffers = 32MB                   # min 128kB
 
 #max_files_per_process = 1000           # min 25
                                         # (change requires restart)
-shared_preload_libraries = 'pg_stat_statements' # (change requires restart)
+shared_preload_libraries = 'auto_explain,pg_buffercache,pg_freespacemap,pg_stat_statements,pg_visibility,pgstattuple' # (change requires restart)
 
 # - Cost-Based Vacuum Delay -
 
diff --git a/etc/9.6/postgresql.manta.lab.conf b/etc/9.6/postgresql.manta.lab.conf
index 9bd60ee..9714901 100644
--- a/etc/9.6/postgresql.manta.lab.conf
+++ b/etc/9.6/postgresql.manta.lab.conf
@@ -142,7 +142,7 @@ maintenance_work_mem = 1GB              # min 1MB
 
 #max_files_per_process = 1000           # min 25
                                         # (change requires restart)
-shared_preload_libraries = 'pg_stat_statements' # (change requires restart)
+shared_preload_libraries = 'auto_explain,pg_buffercache,pg_freespacemap,pg_stat_statements,pg_visibility,pgstattuple' # (change requires restart)
 
 # - Cost-Based Vacuum Delay -
 
diff --git a/etc/9.6/postgresql.manta.production.conf b/etc/9.6/postgresql.manta.production.conf
index 10f800d..dd6c0b1 100644
--- a/etc/9.6/postgresql.manta.production.conf
+++ b/etc/9.6/postgresql.manta.production.conf
@@ -142,7 +142,7 @@ maintenance_work_mem = 4GB              # min 1MB
 
 #max_files_per_process = 1000           # min 25
                                         # (change requires restart)
-shared_preload_libraries = 'pg_stat_statements' # (change requires restart)
+shared_preload_libraries = 'auto_explain,pg_buffercache,pg_freespacemap,pg_stat_statements,pg_visibility,pgstattuple' # (change requires restart)
 
 # - Cost-Based Vacuum Delay -
 
diff --git a/package.json b/package.json
index 9bbd8a1..11dbc67 100644
--- a/package.json
+++ b/package.json
@@ -13,7 +13,7 @@
     },
     "dependencies": {
         "manta": "1.2.6",
-        "manatee": "git+https://github.com/joyent/manatee.git#34238c25",
+        "manatee": "git+https://github.com/joyent/manatee.git#6a769d97",
         "carrier": "0.2.0"
     },
     "sdcDependencies": {
-- 
2.21.0

