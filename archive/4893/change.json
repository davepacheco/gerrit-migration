{"project":"joyent/node-cueball","branch":"master","id":"I615e2dda337c7a546596e6270ac1691bdd0e41b5","number":"4893","subject":"joyent/node-cueball#148 cset with n\u003d1 holds onto dead connections joyent/node-cueball#147 want setUnwanted() exposed to connections Reviewed by: Jan Wyszynski \u003cjan.wyszynski@joyent.com\u003e Approved by: Jan Wyszynski \u003cjan.wyszynski@joyent.com\u003e","owner":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"url":"https://cr.joyent.us/4893","commitMessage":"joyent/node-cueball#148 cset with n\u003d1 holds onto dead connections\njoyent/node-cueball#147 want setUnwanted() exposed to connections\nReviewed by: Jan Wyszynski \u003cjan.wyszynski@joyent.com\u003e\nApproved by: Jan Wyszynski \u003cjan.wyszynski@joyent.com\u003e\n","createdOn":1538161697,"lastUpdated":1539734592,"open":false,"status":"MERGED","comments":[{"timestamp":1538161697,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 1."},{"timestamp":1538163203,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1538437401,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1538515049,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 2."},{"timestamp":1538515111,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1538522206,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1539642148,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 3."},{"timestamp":1539642215,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539725377,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1539730298,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 3: Integration-Approval+1\n\nThe testing added in PS3 along with reproducing the test plan in MORAY-422 seems sufficient."},{"timestamp":1539730724,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 4: Commit message was updated."},{"timestamp":1539734592,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Alex Wilson"}],"currentPatchSet":{"number":"4","revision":"03d6e6e9a1216cced1dd401e3d84a71928b449cc","parents":["f7612cf66490221c3d62001761b3770e571be6f2"],"ref":"refs/changes/93/4893/4","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1539730724,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539642215,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539725377,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1539730298,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}},{"type":"SUBM","value":"1","grantedOn":1539734592,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"CHANGES.adoc","type":"MODIFIED","insertions":14,"deletions":0},{"file":"docs/api.adoc","type":"MODIFIED","insertions":10,"deletions":0},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":14,"deletions":0},{"file":"lib/set.js","type":"MODIFIED","insertions":16,"deletions":-9},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/cset.test.js","type":"MODIFIED","insertions":15,"deletions":0}],"sizeInsertions":70,"sizeDeletions":-10},"patchSets":[{"number":"1","revision":"0d1da1e897ab68136f4537dda21900a8ea79dd36","parents":["f7612cf66490221c3d62001761b3770e571be6f2"],"ref":"refs/changes/93/4893/1","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1538161697,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1538163203,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/connection-fsm.js","line":208,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"What do you think of having a comment here saying that SocketMgrFSM#setUnwanted exists just to pass information about the wanted state of the connection to users of cueball? \n\nIn the ConnectionSlotFSM state machine diagram the wanted state is used as a condition for state transitions, so it might be nice to explain that this is not the case for SocketMgrFSM even though it has a setUnwanted function."},{"file":"lib/set.js","line":417,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Does \u0027working\u0027 \u003d\u003d\u003d \u0027busy\u0027? If so, could this comment say \u0027busy\u0027 instead of \u0027working\u0027? \n\nThis is sort of an aside, but are \u0027idle\u0027 connections not considered to be \u0027working\u0027? Were there cases prior to this change where idle connections would be kept where now they are closed?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.adoc","type":"MODIFIED","insertions":14,"deletions":0},{"file":"docs/api.adoc","type":"MODIFIED","insertions":10,"deletions":0},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":8,"deletions":0},{"file":"lib/set.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":34,"sizeDeletions":-2},{"number":"2","revision":"f3f2acd8402ea766d0b937d2f62a02077ca2e14f","parents":["f7612cf66490221c3d62001761b3770e571be6f2"],"ref":"refs/changes/93/4893/2","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1538515049,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1538515111,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1538522206,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.adoc","type":"MODIFIED","insertions":14,"deletions":0},{"file":"docs/api.adoc","type":"MODIFIED","insertions":10,"deletions":0},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":14,"deletions":0},{"file":"lib/set.js","type":"MODIFIED","insertions":16,"deletions":-9},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":55,"sizeDeletions":-10},{"number":"3","revision":"615e2dda337c7a546596e6270ac1691bdd0e41b5","parents":["f7612cf66490221c3d62001761b3770e571be6f2"],"ref":"refs/changes/93/4893/3","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1539642148,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539642215,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539725377,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1539730298,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.adoc","type":"MODIFIED","insertions":14,"deletions":0},{"file":"docs/api.adoc","type":"MODIFIED","insertions":10,"deletions":0},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":14,"deletions":0},{"file":"lib/set.js","type":"MODIFIED","insertions":16,"deletions":-9},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/cset.test.js","type":"MODIFIED","insertions":15,"deletions":0}],"sizeInsertions":70,"sizeDeletions":-10},{"number":"4","revision":"03d6e6e9a1216cced1dd401e3d84a71928b449cc","parents":["f7612cf66490221c3d62001761b3770e571be6f2"],"ref":"refs/changes/93/4893/4","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1539730724,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1539734592,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539642215,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539725377,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1539730298,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"CHANGES.adoc","type":"MODIFIED","insertions":14,"deletions":0},{"file":"docs/api.adoc","type":"MODIFIED","insertions":10,"deletions":0},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":14,"deletions":0},{"file":"lib/set.js","type":"MODIFIED","insertions":16,"deletions":-9},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/cset.test.js","type":"MODIFIED","insertions":15,"deletions":0}],"sizeInsertions":70,"sizeDeletions":-10}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}]}