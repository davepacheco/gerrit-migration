{"project":"joyent/node-triton","branch":"master","id":"I6f44d329bffd24df86b359f05be30e8ca65caf7f","number":"828","subject":"joyent/node-triton#64 support instance renaming Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"url":"https://cr.joyent.us/828","commitMessage":"joyent/node-triton#64 support instance renaming\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1477962078,"lastUpdated":1480006066,"open":false,"status":"MERGED","comments":[{"timestamp":1477962078,"reviewer":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"message":"Uploaded patch set 1."},{"timestamp":1477962103,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n(6 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1477972927,"reviewer":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"message":"Uploaded patch set 2."},{"timestamp":1477972956,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1477976536,"reviewer":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"message":"Uploaded patch set 3."},{"timestamp":1477976570,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1477987373,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 3:\n\n(7 comments)\n\nI\u0027ll leave the voting to Trent -- he knows best about the direction of node-triton."},{"timestamp":1478047054,"reviewer":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"message":"Uploaded patch set 4."},{"timestamp":1478047088,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1478064392,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4:\n\n(16 comments)\n\nHello. Thanks for taking this on!  I hope all my comments aren\u0027t overwhelming."},{"timestamp":1478243829,"reviewer":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"message":"Uploaded patch set 5."},{"timestamp":1478243878,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1478296432,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 5:\n\n(8 comments)\n\nAlso, please add this patch:\n\n```\ndiff --git a/test/integration/cli-subcommands.test.js b/test/integration/cli-subcommands.test.js\nindex d13f439..4723668 100644\n--- a/test/integration/cli-subcommands.test.js\n+++ b/test/integration/cli-subcommands.test.js\n@@ -45,6 +45,7 @@ var subs \u003d [\n     [\u0027instance delete\u0027, \u0027instance rm\u0027, \u0027delete\u0027, \u0027rm\u0027],\n     [\u0027instance enable-firewall\u0027],\n     [\u0027instance disable-firewall\u0027],\n+    [\u0027instance rename\u0027],\n     [\u0027instance ssh\u0027],\n     [\u0027instance ip\u0027],\n     [\u0027instance wait\u0027],\n```\n\nWe can\u0027t as easily add a test for \u0027triton inst rename ...\u0027 until there is --wait support, so we don\u0027t need a test case right now."},{"timestamp":1478485603,"reviewer":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"message":"Uploaded patch set 6."},{"timestamp":1478485636,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1479858169,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 6:\n\n(1 comment)\n\nSorry for the delay in responding! After the one following change, I think this is ready to integrate."},{"timestamp":1479858186,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 6:\n\nOh, this also needs a rebase on master."},{"timestamp":1479876723,"reviewer":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"message":"Uploaded patch set 7."},{"timestamp":1479876759,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1479949188,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 7:\n\n(2 comments)\n\nThanks for persisting with my reviews. A couple more things:"},{"timestamp":1479949460,"reviewer":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"message":"Uploaded patch set 8."},{"timestamp":1479949514,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1480005380,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 8: Code-Review+1 Integration-Approval+1\n\nThanks!"},{"timestamp":1480006057,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 9: Commit message was updated."},{"timestamp":1480006066,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Trent Mick"}],"currentPatchSet":{"number":"9","revision":"a2c83aab56350e813d74c2b247053c5fdab67e52","parents":["6c7944f2c23a5d317250bd9eeba8b1541f9e7bb1"],"ref":"refs/changes/28/828/9","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1480006057,"author":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1479949514,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480005380,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1480005380,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1480006066,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":25,"deletions":0},{"file":"lib/do_instance/do_rename.js","type":"ADDED","insertions":62,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":29,"deletions":0},{"file":"test/integration/cli-subcommands.test.js","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":119,"sizeDeletions":0},"patchSets":[{"number":"1","revision":"a700f02bf946066a890bce7ee80f6e73b8304add","parents":["0d4850405b74ac2a4b87522ad1ab8526f7e73127"],"ref":"refs/changes/28/828/1","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1477962078,"author":{"name":"Yang Yong","email":"yy1111@samsung.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1477962103,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/cli.js","line":642,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: syntax_error"},{"file":"lib/cloudapi2.js","line":739,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: variable opts hides argument"},{"file":"lib/do_instance/do_rename.js","line":18,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: variable is declared but never referenced: now"},{"file":"lib/do_instance/do_rename.js","line":29,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: comparisons against null, 0, true, false, or an empty string allowing implicit type conversion (use \u003d\u003d\u003d or !\u003d\u003d)"},{"file":"lib/do_instance/do_rename.js","line":29,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: comparisons against null, 0, true, false, or an empty string allowing implicit type conversion (use \u003d\u003d\u003d or !\u003d\u003d)"},{"file":"lib/do_instance/do_rename.js","line":41,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: missing semicolon"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/cli.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":22,"deletions":0},{"file":"lib/do_instance/do_rename.js","type":"ADDED","insertions":91,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/do_rename.js","type":"ADDED","insertions":15,"deletions":0}],"sizeInsertions":132,"sizeDeletions":0},{"number":"2","revision":"ce211b87c40d7f9c2f07990cd35b96a11acf03c2","parents":["0d4850405b74ac2a4b87522ad1ab8526f7e73127"],"ref":"refs/changes/28/828/2","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1477972927,"author":{"name":"Yang Yong","email":"yy1111@samsung.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1477972956,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/cli.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":22,"deletions":0},{"file":"lib/do_instance/do_rename.js","type":"ADDED","insertions":89,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/do_rename.js","type":"ADDED","insertions":15,"deletions":0}],"sizeInsertions":130,"sizeDeletions":0},{"number":"3","revision":"2757ce12dd4e834c60f2189068ad4f3b47656dac","parents":["84338a44b2314225a4233dd1907bf1e4c530012a"],"ref":"refs/changes/28/828/3","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1477976536,"author":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1477976570,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/cloudapi2.js","line":734,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"There is no id arg passed to this function.\n\nConsider adding more details about the opts arg, like in createImageFromMachine()."},{"file":"lib/cloudapi2.js","line":739,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"This is utterly trivial, but other functions in this file (e.g. createKey) are inlining this _opts object into the _request() call. Perhaps follow suit?"},{"file":"lib/do_instance/do_rename.js","line":22,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"If this is changed to args.length \u003c 2, and the error message changed to something like \u0027incorrect number of arguments\u0027, you can omit lines 28-31."},{"file":"lib/do_instance/do_rename.js","line":26,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Can assign args[0] to this immediately."},{"file":"lib/do_instance/do_rename.js","line":41,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Also trivial, but these can be turned into arguments to done(), thus reducing scope."},{"file":"lib/do_instance/do_rename.js","line":46,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"A tab mixed with spaces."},{"file":"lib/do_instance/do_rename.js","line":78,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Rename an instance."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/cli.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":21,"deletions":0},{"file":"lib/do_instance/do_rename.js","type":"ADDED","insertions":89,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/do_rename.js","type":"ADDED","insertions":15,"deletions":0}],"sizeInsertions":129,"sizeDeletions":0},{"number":"4","revision":"3c27e7bb7b086f41b42fc82fc6af1630a3f5fa75","parents":["84338a44b2314225a4233dd1907bf1e4c530012a"],"ref":"refs/changes/28/828/4","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1478047054,"author":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1478047088,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/cloudapi2.js","line":739,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Add:\n\nassert.uuid(opts.id, \u0027opts.id\u0027);\nassert.string(opts.name, \u0027opts.name\u0027);"},{"file":"lib/cloudapi2.js","line":740,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Don\u0027t think \u0027self\u0027 is used."},{"file":"lib/cloudapi2.js","line":747,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"space after the \u0027:\u0027 please"},{"file":"lib/cloudapi2.js","line":748,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"That is meant to be \u0027opts.id\u0027.\n\nWe should add a test case for \u0027triton inst rename\u0027. That would have caught that."},{"file":"lib/do_instance/do_rename.js","line":24,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Sorry if you got conflicting suggestions here from Marsell and I. I\u0027d like that to be better for the separate cases:\n\n$ triton inst rename inst0\ntriton instance rename: error (Usage): missing NEWNAME arg\n\n$ triton inst rename\ntriton instance rename: error (Usage): missing INST arg\n\nTo do that you need two else-if checks."},{"file":"lib/do_instance/do_rename.js","line":26,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Again sorry that there are examples in node-triton.git that you copied where this \u0027getInstance\u0027 handling is done in the CLI file.  I\u0027d like new code to do the following:\n\n- the \"do_*.js\" CLI code calls an API method on self.top.tritonapi\n- that method on TritonApi resolves the given instance name or id to an instance UUID as necessary, then calls the simpler method on self.cloudapi.\n\nA good example to copy is listInstanceSnapshots.\nSee TritonApi.prototype.listInstanceSnapshots (it resolves the instance name/id with \"_stepInstId\", then it calls self.cloudapi.listMachineSnapshots"},{"file":"lib/do_instance/do_rename.js","line":48,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Don\u0027t have a perror. Instead change this line to:\n\ncallback(err);"},{"file":"lib/do_instance/do_rename.js","line":51,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"\"wait\" support: Updating an instance name is asynchronous -- the actual name change is done in an internal job that updates data on the instance living on its compute node (server).  \n\nUnfortunately, cloudapi doesn\u0027t currently support a great method for waiting for that to complete.\nRenames *do* show up in MachineAudit (\u0027triton inst audit INST\u0027) but the RenameMachine endpoint doesn\u0027t return a handle/id to indicate which MachineAudit entry is related, so there is a race there.\n\nThe only reasonable way to wait for completion is to poll on GetMachine to wait for the name change... with the potential that that could have a race if the name is changed back and forth in the polling gap.\n\nSee TritonApi.prototype.waitForInstanceTagChanges for something to copy -- perhaps adding a \"waitForInstanceNameChange\". It should be simpler than \"waitForInstanceTagChanges\". If you want help with this, I\u0027m happy to help.\n\nIf you like, we could do a first pass at \u0027triton inst rename\u0027 *without* wait support. Then add wait support later."},{"file":"lib/do_instance/do_rename.js","line":52,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"\u0027Renamed instance %s (%s)\u0027"},{"file":"lib/do_instance/do_rename.js","line":53,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"need to call \"callback();\" here"},{"file":"lib/do_instance/do_rename.js","line":66,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"please dedent these one level"},{"file":"lib/do_instance/do_rename.js","line":71,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"As Marsell mentioned, please change this to \"Rename an instance.\", capitalized."},{"file":"lib/do_instance/do_rename.js","line":79,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"that should have a second element \u0027none\u0027 to ensure that \u0027tritoninstance\u0027 completion is only done for the first arg. I.e. this:\n\n    ... \u003d [\u0027tritoninstance\u0027, \u0027none\u0027];"},{"file":"lib/do_instance/index.js","line":37,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Remove the top-level \u0027triton rename\u0027 alias. While most \u0027triton instance\u0027 sub-commands *do* have a top-level alias, I don\u0027t think instance renaming is frequent enough to get one."},{"file":"lib/do_instance/index.js","line":67,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"drop this. See discussion above."},{"file":"lib/do_rename.js","line":1,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Drop this file. See comments in index.js about not having a top-level \u0027triton rename\u0027."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/cli.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":25,"deletions":0},{"file":"lib/do_instance/do_rename.js","type":"ADDED","insertions":82,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/do_rename.js","type":"ADDED","insertions":15,"deletions":0}],"sizeInsertions":126,"sizeDeletions":0},{"number":"5","revision":"c786fbb3936e3fda6a65a1bc4a15b3b9041dd64f","parents":["84338a44b2314225a4233dd1907bf1e4c530012a"],"ref":"refs/changes/28/828/5","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1478243829,"author":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1478243878,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/cloudapi2.js","line":752,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"drop this arg. The cloudapi RenameMachine endpoitn doesn\u0027t return a meaningful body."},{"file":"lib/do_instance/do_rename.js","line":21,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"just one INST arg, so this should just be \u0027missing INST arg\u0027."},{"file":"lib/do_instance/do_rename.js","line":24,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"just one NEWNAME arg"},{"file":"lib/do_instance/do_rename.js","line":33,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"let\u0027s use double-quotes instead of parens:\n\u0027Renamed instance %s to \"%s\"\u0027"},{"file":"lib/tritonapi.js","line":2138,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"remove this"},{"file":"lib/tritonapi.js","line":2145,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"remove this arg"},{"file":"lib/tritonapi.js","line":2147,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"remove this"},{"file":"lib/tritonapi.js","line":2152,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"remove this arg"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":25,"deletions":0},{"file":"lib/do_instance/do_rename.js","type":"ADDED","insertions":63,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":31,"deletions":0}],"sizeInsertions":121,"sizeDeletions":0},{"number":"6","revision":"8e83de23513d5cad9d5fefd14d5958f774319570","parents":["84338a44b2314225a4233dd1907bf1e4c530012a"],"ref":"refs/changes/28/828/6","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1478485603,"author":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1478485636,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/do_instance/do_rename.js","line":28,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Drop this arg. It is \u0027res\u0027 and we aren\u0027t using it anyway."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":25,"deletions":0},{"file":"lib/do_instance/do_rename.js","type":"ADDED","insertions":63,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":29,"deletions":0},{"file":"test/integration/cli-subcommands.test.js","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":120,"sizeDeletions":0},{"number":"7","revision":"b0ef84d9a57b8ddb75e314d9a3e67be50ae9c1fb","parents":["6c7944f2c23a5d317250bd9eeba8b1541f9e7bb1"],"ref":"refs/changes/28/828/7","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1479876723,"author":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1479876759,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/do_instance/do_rename.js","line":30,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"sorry I missed this. This should be:\n\n    callback(err);\n\nand then drop the \u0027function perror\u0027 definition above."},{"file":"lib/do_instance/do_rename.js","line":35,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Don\u0027t need this \u0027return;\u0027 statement."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":25,"deletions":0},{"file":"lib/do_instance/do_rename.js","type":"ADDED","insertions":63,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":29,"deletions":0},{"file":"test/integration/cli-subcommands.test.js","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":120,"sizeDeletions":0},{"number":"8","revision":"6f44d329bffd24df86b359f05be30e8ca65caf7f","parents":["6c7944f2c23a5d317250bd9eeba8b1541f9e7bb1"],"ref":"refs/changes/28/828/8","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1479949460,"author":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1479949514,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480005380,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1480005380,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":25,"deletions":0},{"file":"lib/do_instance/do_rename.js","type":"ADDED","insertions":62,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":29,"deletions":0},{"file":"test/integration/cli-subcommands.test.js","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":119,"sizeDeletions":0},{"number":"9","revision":"a2c83aab56350e813d74c2b247053c5fdab67e52","parents":["6c7944f2c23a5d317250bd9eeba8b1541f9e7bb1"],"ref":"refs/changes/28/828/9","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1480006057,"author":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1479949514,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480005380,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1480005380,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1480006066,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":25,"deletions":0},{"file":"lib/do_instance/do_rename.js","type":"ADDED","insertions":62,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":29,"deletions":0},{"file":"test/integration/cli-subcommands.test.js","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":119,"sizeDeletions":0}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}]}