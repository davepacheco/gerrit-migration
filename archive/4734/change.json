{"project":"joyent/pgstatsmon","branch":"master","topic":"pgstatsmon#17","id":"Ic3c085eeac127b37674809d0d41bd5fc368e744e","number":"4734","subject":"joyent/pgstatsmon#17 pgstatsmon should support discovering backend IPs via nic_tag regex joyent/pgstatsmon#18 pgstatsmon shouldn\u0027t try to create functions that depend on missing functions Reviewed by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e Approve","owner":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"url":"https://cr.joyent.us/4734","commitMessage":"joyent/pgstatsmon#17 pgstatsmon should support discovering backend IPs via nic_tag regex\njoyent/pgstatsmon#18 pgstatsmon shouldn\u0027t try to create functions that depend on missing functions\nReviewed by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e\nApproved by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e\n","createdOn":1534968548,"lastUpdated":1535054842,"open":false,"status":"MERGED","comments":[{"timestamp":1534968548,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 1."},{"timestamp":1534968554,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1534968667,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Topic set to pgstatsmon#17"},{"timestamp":1534971703,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1535037315,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1535047190,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 2."},{"timestamp":1535047196,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1535051537,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1535052131,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1535054821,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1535054842,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Kody A Kantor"}],"currentPatchSet":{"number":"3","revision":"c3c085eeac127b37674809d0d41bd5fc368e744e","parents":["adf968a850fa1ce3875ce7741fd70b27087a3d5d"],"ref":"refs/changes/34/4734/3","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1535054821,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1535047196,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1535051537,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1535052131,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"SUBM","value":"1","grantedOn":1535054842,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"docs/overview.md","type":"MODIFIED","insertions":10,"deletions":-11},{"file":"lib/dbinit.js","type":"MODIFIED","insertions":40,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":58,"sizeDeletions":-14},"patchSets":[{"number":"1","revision":"99ac28bba119dbae590d130e67ed1d9391d58b3b","parents":["adf968a850fa1ce3875ce7741fd70b27087a3d5d"],"ref":"refs/changes/34/4734/1","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1534968548,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1534968554,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/dbinit.js","line":122,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"I wonder if it would be safer to rely on the integer version output from `SHOW server_version_num` instead. The reason I say this is that the composition of the internal string that the `server_version` value is not always guaranteed to look like a proper semver version number. e.g. Here\u0027s the output on my local pg instance where I have an older prerelease of pg10: \n\n```\nresults\u003d# SHOW server_version;\n server_version \n----------------\n 10devel\n```\n\nWhereas the `server_version_num` output for the same instance is: \n\n```\nresults\u003d# SHOW server_version_num;\n server_version_num \n--------------------\n 100000\n\n```\n\nI guess the other advantage is that the integer versions can be compared without the need for an extra dependency."},{"file":"lib/dbinit.js","line":122,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Ah, nice. Good catch. I do prefer the (real) version number. Especially because I don\u0027t think PG explicitly follows semver."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/dbinit.js","type":"MODIFIED","insertions":39,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":41,"sizeDeletions":-2},{"number":"2","revision":"07c25b92eee91e21ff8f4c84c790456ae3865652","parents":["adf968a850fa1ce3875ce7741fd70b27087a3d5d"],"ref":"refs/changes/34/4734/2","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1535047190,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1535047196,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1535051537,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1535052131,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"docs/overview.md","type":"MODIFIED","insertions":10,"deletions":-11},{"file":"lib/dbinit.js","type":"MODIFIED","insertions":40,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":58,"sizeDeletions":-14},{"number":"3","revision":"c3c085eeac127b37674809d0d41bd5fc368e744e","parents":["adf968a850fa1ce3875ce7741fd70b27087a3d5d"],"ref":"refs/changes/34/4734/3","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1535054821,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1535047196,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1535054842,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1535051537,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1535052131,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"docs/overview.md","type":"MODIFIED","insertions":10,"deletions":-11},{"file":"lib/dbinit.js","type":"MODIFIED","insertions":40,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":58,"sizeDeletions":-14}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}]}