{"project":"joyent/illumos-joyent","branch":"master","id":"I012f57fdf5877c9e9059a07d4a2e1f05bb575540","number":"1563","subject":"OS-5978 ICMP-initiated TCP retransmits should trigger only when MTU decreases Reviewed by: Dan McDonald \u003cdanmcd@omniti.com\u003e Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Approved by: Jerry Jelinek \u003cjer","owner":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"url":"https://cr.joyent.us/1563","commitMessage":"OS-5978 ICMP-initiated TCP retransmits should trigger only when MTU decreases\nReviewed by: Dan McDonald \u003cdanmcd@omniti.com\u003e\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1487889561,"lastUpdated":1487968899,"open":false,"status":"MERGED","comments":[{"timestamp":1487889561,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 1."},{"timestamp":1487892348,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1487892836,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1487896026,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 2."},{"timestamp":1487940146,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1487958548,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2:\n\nFYI: danmcd has signed off on this as a reviewer."},{"timestamp":1487962051,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1487963283,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2:\n\nDetails about my testing techniques have been posted in the Jira ticket."},{"timestamp":1487965983,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1487966232,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 3: Patch Set 2 was rebased."},{"timestamp":1487966314,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1487968899,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Patrick Mooney"}],"currentPatchSet":{"number":"4","revision":"012f57fdf5877c9e9059a07d4a2e1f05bb575540","parents":["d995dda41781c812878c84191b0e974aacb0cad0"],"ref":"refs/changes/63/1563/4","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1487966314,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487940146,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487962051,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1487965983,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1487968899,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":13,"deletions":-13},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":12,"deletions":-9},{"file":"usr/src/uts/common/inet/tcp_impl.h","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":27,"sizeDeletions":-24},"patchSets":[{"number":"1","revision":"b91e869cd0c06c1c016f20404af74c2671c04491","parents":["8c2ed3e9b7805d10816f461c713c63a8363fa61a"],"ref":"refs/changes/63/1563/1","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1487889561,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/inet/tcp/tcp.c","line":998,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Any particular reason for the changes to this function? Could the tcp stack change somehow?"},{"file":"usr/src/uts/common/inet/tcp/tcp.c","line":998,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"This was to make lint happy on non-DEBUG.  (Otherwise the tcps variable goes unused in the function)"},{"file":"usr/src/uts/common/inet/tcp/tcp.c","line":2471,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Maybe worth noting that the boolean_t indicates whether or not the pmtu was changed?"},{"file":"usr/src/uts/common/inet/tcp/tcp.c","line":2471,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Sure.  I\u0027ll make that update"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":11,"deletions":-13},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":12,"deletions":-9},{"file":"usr/src/uts/common/inet/tcp_impl.h","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":25,"sizeDeletions":-24},{"number":"2","revision":"b6325496b75025b6f14a2a666f80b700c4ee0e17","parents":["8c2ed3e9b7805d10816f461c713c63a8363fa61a"],"ref":"refs/changes/63/1563/2","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1487896026,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487962051,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487940146,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1487965983,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":13,"deletions":-13},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":12,"deletions":-9},{"file":"usr/src/uts/common/inet/tcp_impl.h","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":27,"sizeDeletions":-24},{"number":"3","revision":"8a66b07850ac4db0fc6f2a7269c3a32a43925ae0","parents":["d995dda41781c812878c84191b0e974aacb0cad0"],"ref":"refs/changes/63/1563/3","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1487966232,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487962051,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487940146,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1487965983,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":13,"deletions":-13},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":12,"deletions":-9},{"file":"usr/src/uts/common/inet/tcp_impl.h","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":27,"sizeDeletions":-24},{"number":"4","revision":"012f57fdf5877c9e9059a07d4a2e1f05bb575540","parents":["d995dda41781c812878c84191b0e974aacb0cad0"],"ref":"refs/changes/63/1563/4","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1487966314,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487962051,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487940146,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1487965983,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1487968899,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/uts/common/inet/tcp/tcp.c","type":"MODIFIED","insertions":13,"deletions":-13},{"file":"usr/src/uts/common/inet/tcp/tcp_input.c","type":"MODIFIED","insertions":12,"deletions":-9},{"file":"usr/src/uts/common/inet/tcp_impl.h","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":27,"sizeDeletions":-24}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}]}