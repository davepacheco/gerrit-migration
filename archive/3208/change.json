{"project":"joyent/sdc-headnode","branch":"master","id":"Ice55ce44c9c0cedf34a3b63c8bc077a94b255722","number":"3208","subject":"HEAD-2387 Add \"dns_domain\" to sapi service metadata Reviewed by: Josh Wilsdon \u003cjosh@wilsdon.ca\u003e Approved by: Josh Wilsdon \u003cjosh@wilsdon.ca\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/3208","commitMessage":"HEAD-2387 Add \"dns_domain\" to sapi service metadata\nReviewed by: Josh Wilsdon \u003cjosh@wilsdon.ca\u003e\nApproved by: Josh Wilsdon \u003cjosh@wilsdon.ca\u003e\n","createdOn":1515782461,"lastUpdated":1516384750,"open":false,"status":"MERGED","comments":[{"timestamp":1515782461,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1515782466,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 43769b6c88e9e8c89533010ecd3a3cdafbf44b41\n    \n    HEAD-2387 Add dns_domain to sapi service metadata"},{"timestamp":1515782542,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1515783867,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nSo Josh, you know now why I needed this and, also, that I\u0027ve been testing it all the day today :-)"},{"timestamp":1516131577,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1516131583,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 26a87e961dd3108b9d2c1f20a4032cffb774b6ba\n    \n    HEAD-2387 Add dns_domain to sapi service metadata"},{"timestamp":1516131658,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2:\n\n\"make check\" passed ok"},{"timestamp":1516384080,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1\n\n(4 comments)\n\nLooks good to me, but left a couple questions. And copyright could be updated... Hooray for 2018!"},{"timestamp":1516384433,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 3."},{"timestamp":1516384439,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 32fa7ef6a8e45622750ffba3bfaa1f355bf4152e\n    \n    HEAD-2387 Add dns_domain to sapi service metadata"},{"timestamp":1516384483,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\n(4 comments)\n\nDone!"},{"timestamp":1516384621,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1516384666,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1\n\nlgtm!"},{"timestamp":1516384750,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"3","revision":"ce55ce44c9c0cedf34a3b63c8bc077a94b255722","parents":["82c2c799b3027ec25b4c53cd836ff4be3fb74a1b"],"ref":"refs/changes/08/3208/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1516384433,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1516384621,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1516384666,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1516384666,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"SUBM","value":"1","grantedOn":1516384750,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"scripts/build-payload.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"scripts/sdc-init.js","type":"MODIFIED","insertions":4,"deletions":-1}],"sizeInsertions":6,"sizeDeletions":-2},"patchSets":[{"number":"1","revision":"51b20407904874e55149470870e9d66dbf428985","parents":["d0633277c6122253c70864397e2a81cb03433c29"],"ref":"refs/changes/08/3208/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1515782461,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515782542,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"scripts/build-payload.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"scripts/sdc-init.js","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":4,"sizeDeletions":0},{"number":"2","revision":"99f56bf4762c1224533229938d6d3016aa29e150","parents":["82c2c799b3027ec25b4c53cd836ff4be3fb74a1b"],"ref":"refs/changes/08/3208/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1516131577,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515782542,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1516384080,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1516384080,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"comments":[{"file":"scripts/build-payload.js","line":9,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"2018"},{"file":"scripts/build-payload.js","line":9,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"scripts/build-payload.js","line":317,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"If somehow the config[\u0027dns_domain\u0027] is undefined, it\u0027ll just not be added here, right? Is this validated somewhere?"},{"file":"scripts/build-payload.js","line":317,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"See line 245, it\u0027s being checked by setRegistrarConfig"},{"file":"scripts/sdc-init.js","line":9,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"2018!"},{"file":"scripts/sdc-init.js","line":9,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"scripts/sdc-init.js","line":477,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Same question here: if this is not defined, will anything notice/care?"},{"file":"scripts/sdc-init.js","line":477,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Nothing. See for example serviceDomain function, which is relying into this value to be present. Anyway, I have no problem to add a check here."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"scripts/build-payload.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"scripts/sdc-init.js","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":4,"sizeDeletions":0},{"number":"3","revision":"ce55ce44c9c0cedf34a3b63c8bc077a94b255722","parents":["82c2c799b3027ec25b4c53cd836ff4be3fb74a1b"],"ref":"refs/changes/08/3208/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1516384433,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1516384621,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1516384666,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1516384666,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"SUBM","value":"1","grantedOn":1516384750,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"scripts/build-payload.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"scripts/sdc-init.js","type":"MODIFIED","insertions":4,"deletions":-1}],"sizeInsertions":6,"sizeDeletions":-2}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}