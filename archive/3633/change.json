{"project":"joyent/sdc-vmapi","branch":"master","id":"Ieae411d8fd5490c930141301d4155b0457ab2b1f","number":"3633","subject":"TRITON-223 Use node-triton-metrics for VMAPI metrics collection","owner":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"url":"https://cr.joyent.us/3633","commitMessage":"TRITON-223 Use node-triton-metrics for VMAPI metrics collection\n","createdOn":1521061198,"lastUpdated":1521244230,"open":false,"status":"MERGED","comments":[{"timestamp":1521061198,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Uploaded patch set 1."},{"timestamp":1521061198,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit a991f7bf7a88229b000a32c5096c924018f87b9e\n    \n    Use node-triton-metrics for metrics collection"},{"timestamp":1521061230,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1521062158,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Uploaded patch set 2."},{"timestamp":1521062158,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit e57538f7f1b4b69f14e624e733fee5c7d2b2da4b\n    \n    remove metrics test"},{"timestamp":1521062190,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1521140206,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1521140705,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Uploaded patch set 3."},{"timestamp":1521140705,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit ebd776dced0d73de2f5ba2481bb65bcc48e67ddf\n    \n    declare metrics server port at top of file"},{"timestamp":1521140742,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1521140759,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1521243835,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1521244230,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Dylan Yep"}],"currentPatchSet":{"number":"3","revision":"eae411d8fd5490c930141301d4155b0457ab2b1f","parents":["b75a06993e820005463d87fec47e7a1b44f9c674"],"ref":"refs/changes/33/3633/3","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1521140705,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1521140742,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521243835,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1521243835,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"SUBM","value":"1","grantedOn":1521244230,"by":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":1,"deletions":-33},{"file":"lib/metrics.js","type":"DELETED","insertions":0,"deletions":-125},{"file":"lib/vmapi.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"server.js","type":"MODIFIED","insertions":10,"deletions":-10},{"file":"test/fixtures/vmapi-server-with-throwing-handler.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/metrics.test.js","type":"DELETED","insertions":0,"deletions":-179},{"file":"test/vms.data-migrations.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.reindex-moray-bucket-transient-error.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.update-moray-bucket-non-transient-error.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.update-moray-bucket-removes-index-fails.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.update-moray-bucket-transient-error.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.update-moray-bucket-versioning.test.js","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":22,"sizeDeletions":-357},"patchSets":[{"number":"1","revision":"d267de8f31202329caf6d30b836e0992ff37033a","parents":["b75a06993e820005463d87fec47e7a1b44f9c674"],"ref":"refs/changes/33/3633/1","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1521061198,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1521061230,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":1,"deletions":-33},{"file":"lib/metrics.js","type":"DELETED","insertions":0,"deletions":-125},{"file":"lib/vmapi.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"server.js","type":"MODIFIED","insertions":9,"deletions":-10},{"file":"test/fixtures/vmapi-server-with-throwing-handler.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.data-migrations.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.reindex-moray-bucket-transient-error.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.update-moray-bucket-non-transient-error.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.update-moray-bucket-removes-index-fails.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.update-moray-bucket-transient-error.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.update-moray-bucket-versioning.test.js","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":21,"sizeDeletions":-178},{"number":"2","revision":"7ce5606974473f22aa31be983ee1de3ca24553bd","parents":["b75a06993e820005463d87fec47e7a1b44f9c674"],"ref":"refs/changes/33/3633/2","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1521062158,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1521062190,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"server.js","line":266,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Can we move this to a \"CONSTANT\" at the top of the file?"},{"file":"server.js","line":266,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":1,"deletions":-33},{"file":"lib/metrics.js","type":"DELETED","insertions":0,"deletions":-125},{"file":"lib/vmapi.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"server.js","type":"MODIFIED","insertions":9,"deletions":-10},{"file":"test/fixtures/vmapi-server-with-throwing-handler.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/metrics.test.js","type":"DELETED","insertions":0,"deletions":-179},{"file":"test/vms.data-migrations.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.reindex-moray-bucket-transient-error.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.update-moray-bucket-non-transient-error.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.update-moray-bucket-removes-index-fails.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.update-moray-bucket-transient-error.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.update-moray-bucket-versioning.test.js","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":21,"sizeDeletions":-357},{"number":"3","revision":"eae411d8fd5490c930141301d4155b0457ab2b1f","parents":["b75a06993e820005463d87fec47e7a1b44f9c674"],"ref":"refs/changes/33/3633/3","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1521140705,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1521140742,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521243835,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1521243835,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"SUBM","value":"1","grantedOn":1521244230,"by":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":1,"deletions":-33},{"file":"lib/metrics.js","type":"DELETED","insertions":0,"deletions":-125},{"file":"lib/vmapi.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"server.js","type":"MODIFIED","insertions":10,"deletions":-10},{"file":"test/fixtures/vmapi-server-with-throwing-handler.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/metrics.test.js","type":"DELETED","insertions":0,"deletions":-179},{"file":"test/vms.data-migrations.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.reindex-moray-bucket-transient-error.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.update-moray-bucket-non-transient-error.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.update-moray-bucket-removes-index-fails.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.update-moray-bucket-transient-error.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/vms.update-moray-bucket-versioning.test.js","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":22,"sizeDeletions":-357}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"}]}