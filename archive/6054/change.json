{"project":"joyent/illumos-joyent","branch":"master","id":"I0cba37f035f83ba6fad928fce41542860dfb62cd","number":"6054","subject":"OS-7703 usba should read the device binary object store OS-7704 USB topology could know about supported, minimum speeds OS-7705 usba parsing code should take const data pointers OS-7706 usba kernel module should be CERRWARN and smatch clean Reviewed by: J","owner":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"url":"https://cr.joyent.us/6054","commitMessage":"OS-7703 usba should read the device binary object store\nOS-7704 USB topology could know about supported, minimum speeds\nOS-7705 usba parsing code should take const data pointers\nOS-7706 usba kernel module should be CERRWARN and smatch clean\nReviewed by: John Levon \u003cjohn.levon@joyent.com\u003e\nReviewed by: Rob Johnston \u003crob.johnston@joyent.com\u003e\nApproved by: John Levon \u003cjohn.levon@joyent.com\u003e\n","createdOn":1554496681,"lastUpdated":1556058597,"open":false,"status":"MERGED","comments":[{"timestamp":1554496681,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 1."},{"timestamp":1555002224,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\n(10 comments)\n\nI\u0027m guess the ssplus stuff in the header is just there for later?"},{"timestamp":1555003806,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\n(4 comments)"},{"timestamp":1555342914,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 2."},{"timestamp":1555342921,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(14 comments)\n\n\u003e I\u0027m guess the ssplus stuff in the header is just there for later?\n\nYes, I\u0027m trying to track down some different ssplus hardware so we can test this and better understand the differences that\u0027ll show up. I\u0027m not sure what\u0027ll make the most sense to pass onto user land yet."},{"timestamp":1555351514,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 2: Code-Review+1\n\n(2 comments)"},{"timestamp":1555364328,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 2:\n\n(5 comments)\n\nLooks fine to me. Just a couple typos in the comments - most of which you\u0027ve already fixed in the latest rev."},{"timestamp":1555437319,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 3."},{"timestamp":1555437328,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(5 comments)"},{"timestamp":1556035709,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1556035895,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1556041014,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1556058540,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1556058592,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1556058597,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Robert Mustacchi"}],"currentPatchSet":{"number":"5","revision":"0cba37f035f83ba6fad928fce41542860dfb62cd","parents":["a6a0e2aee988bd529ac3621e19f33518fe40a0b9"],"ref":"refs/changes/54/6054/5","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1556058592,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556035709,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556035895,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556041014,"by":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}},{"type":"SUBM","value":"1","grantedOn":1556058597,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":13,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/usb/topo_usb.c","type":"MODIFIED","insertions":56,"deletions":-1},{"file":"usr/src/man/man9f/usb_parse_data.9f","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/genconsole.c","type":"MODIFIED","insertions":12,"deletions":-21},{"file":"usr/src/uts/common/io/usb/usba/hubdi.c","type":"MODIFIED","insertions":16,"deletions":-10},{"file":"usr/src/uts/common/io/usb/usba/parser.c","type":"MODIFIED","insertions":47,"deletions":-98},{"file":"usr/src/uts/common/io/usb/usba/usba.c","type":"MODIFIED","insertions":16,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/usba10_calls.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/usba_bos.c","type":"ADDED","insertions":420,"deletions":0},{"file":"usr/src/uts/common/io/usb/usba/usba_devdb.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/common/io/usb/usba/usba_ugen.c","type":"MODIFIED","insertions":5,"deletions":-7},{"file":"usr/src/uts/common/io/usb/usba/usbai.c","type":"MODIFIED","insertions":10,"deletions":-9},{"file":"usr/src/uts/common/io/usb/usba/usbai_pipe_mgmt.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/io/usb/usba/usbai_register.c","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/io/usb/usba/usbai_req.c","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/usbai_util.c","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/io/usb/usba10/usba10.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/sys/usb/usba/bos.h","type":"ADDED","insertions":242,"deletions":0},{"file":"usr/src/uts/common/sys/usb/usba/usba10.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/sys/usb/usba/usba_impl.h","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/sys/usb/usba/usba_private.h","type":"MODIFIED","insertions":16,"deletions":-16},{"file":"usr/src/uts/common/sys/usb/usba/usba_types.h","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"usr/src/uts/common/sys/usb/usbai.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/intel/usba/Makefile","type":"MODIFIED","insertions":1,"deletions":-11}],"sizeInsertions":895,"sizeDeletions":-195},"patchSets":[{"number":"1","revision":"dfda1aa2a21b13b549e414bc88b0a0cf6f4a5aee","parents":["aa83f7866d4ccccbf9e96c81fbcdada05e180700"],"ref":"refs/changes/54/6054/1","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1554496681,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/lib/fm/topo/modules/common/usb/topo_usb.c","line":1406,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"double semi-colon"},{"file":"usr/src/lib/fm/topo/modules/common/usb/topo_usb.c","line":1406,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/lib/fm/topo/modules/common/usb/topo_usb.c","line":1610,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"This seems generic and useful enough that we could have\ntop_prop_set_string_nul_array() or somesuch? I\u0027m kind of surprised this seems to be the first instance in topo"},{"file":"usr/src/lib/fm/topo/modules/common/usb/topo_usb.c","line":1610,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"If you were designing that though, would you take total size of the string or the number of nul-concatenated strings that exist?"},{"file":"usr/src/lib/fm/topo/modules/common/usb/topo_usb.c","line":1610,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Probably the number? (And check against it of course). It\u0027s what we have readily available from di_prop_strings() after all."},{"file":"usr/src/uts/common/io/usb/usba/hubdi.c","line":2140,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"since you touch it: \"hubd !\u003d NULL\" ?"},{"file":"usr/src/uts/common/io/usb/usba/hubdi.c","line":2140,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/usb/usba/usba.c","line":2271,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"\"full-speed\" I think. Curious as to why it was missing previously?"},{"file":"usr/src/uts/common/io/usb/usba/usba.c","line":2271,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Yeah, it should be that.\n\nAs to why it was previously missing, my best guess is that at some point it was considered a default speed. It was pretty clearly overlooked when high-speed was added. And I overlooked that fact entirely when I did USB 3.x."},{"file":"usr/src/uts/common/io/usb/usba/usba_bos.c","line":17,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"manage"},{"file":"usr/src/uts/common/io/usb/usba/usba_bos.c","line":17,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/usb/usba/usba_bos.c","line":17,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"s/mange/manage/"},{"file":"usr/src/uts/common/io/usb/usba/usba_bos.c","line":17,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/usb/usba/usba_bos.c","line":104,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"\"length of each device capability\""},{"file":"usr/src/uts/common/io/usb/usba/usba_bos.c","line":104,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/usb/usba/usba_bos.c","line":195,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"can this be a define please?"},{"file":"usr/src/uts/common/io/usb/usba/usba_bos.c","line":195,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Although, since we do store the data, I wonder if we should actually record the type still (maybe not there), and otherwise mark the entry as parsed versus raw?"},{"file":"usr/src/uts/common/io/usb/usba/usba_bos.c","line":195,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/usb/usba/usba_bos.c","line":195,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I had approached it this way, but ultimately had decided to keep the original mblk_t around for understanding our parsing. I had thought about keeping a separate flag around, but it seemed like it wasn\u0027t worth adding that also to consumers, though it\u0027s minor. I didn\u0027t want to store the type without some kind of flag because then it wouldn\u0027t be clear if the parsed structure or the raw one was to be used. \n\nDoes this feel too weird a way to approach it?"},{"file":"usr/src/uts/common/io/usb/usba/usba_bos.c","line":195,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I guess it\u0027s fine, we still have the raw data there in the case I\u0027m worried about."},{"file":"usr/src/uts/common/io/usb/usba/usba_bos.c","line":206,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"why are we doing this bzero? Just paranoia?\nI\u0027m wondering if we should keep even invalid caps around - seems like it might be useful for debugging any issues. And that way we don\u0027t even need to track usb_bos_nalloc"},{"file":"usr/src/uts/common/io/usb/usba/usba_bos.c","line":206,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"So, with the current implementation of this, we\u0027d potentially reuse this on the next iteration. I wanted to insure that there was no data leaked from one parsed capability to the next.\n\nWe keep the original mblk_t around, so that way we have something we can go through an debug. It\u0027s true you wouldn\u0027t need to keep around both nalloc and nents, but you do need one of them at least."},{"file":"usr/src/uts/common/io/usb/usba/usba_bos.c","line":272,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"what about the mblk?"},{"file":"usr/src/uts/common/io/usb/usba/usba_bos.c","line":272,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Good catch, thanks."},{"file":"usr/src/uts/common/io/usb/usba/usbai_req.c","line":147,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"seems a little inconsistent not to have a default: here too?"},{"file":"usr/src/uts/common/io/usb/usba/usbai_req.c","line":147,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I originally did the one below because I realized that the compiler didn\u0027t realize that it was being constrained to a 2-bit value with all possible values. I\u0027ll add one here, I guess?"},{"file":"usr/src/uts/common/sys/usb/usba/bos.h","line":20,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"s/that related/that are related/"},{"file":"usr/src/uts/common/sys/usb/usba/bos.h","line":20,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Changed to a slightly different wording."},{"file":"usr/src/uts/common/sys/usb/usba/bos.h","line":23,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"separate"},{"file":"usr/src/uts/common/sys/usb/usba/bos.h","line":23,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/usb/usba/bos.h","line":23,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"s/seperate/separate/"},{"file":"usr/src/uts/common/sys/usb/usba/bos.h","line":23,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/usb/usba/usba_private.h","line":203,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Why has this stayed non-const?"},{"file":"usr/src/uts/common/sys/usb/usba/usba_private.h","line":203,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I missed it."},{"file":"usr/src/uts/common/sys/usb/usba/usba_private.h","line":426,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"const too?"},{"file":"usr/src/uts/common/sys/usb/usba/usba_private.h","line":426,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/usb/usba/usba_types.h","line":246,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"not introduced by you, but looks like this comment block has some oddly placed tabs?"},{"file":"usr/src/uts/common/sys/usb/usba/usba_types.h","line":246,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/usb/topo_usb.c","type":"MODIFIED","insertions":56,"deletions":-1},{"file":"usr/src/man/man9f/usb_parse_data.9f","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/genconsole.c","type":"MODIFIED","insertions":12,"deletions":-21},{"file":"usr/src/uts/common/io/usb/usba/hubdi.c","type":"MODIFIED","insertions":16,"deletions":-10},{"file":"usr/src/uts/common/io/usb/usba/parser.c","type":"MODIFIED","insertions":44,"deletions":-95},{"file":"usr/src/uts/common/io/usb/usba/usba.c","type":"MODIFIED","insertions":16,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/usba10_calls.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/usba_bos.c","type":"ADDED","insertions":420,"deletions":0},{"file":"usr/src/uts/common/io/usb/usba/usba_devdb.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/common/io/usb/usba/usba_ugen.c","type":"MODIFIED","insertions":5,"deletions":-7},{"file":"usr/src/uts/common/io/usb/usba/usbai.c","type":"MODIFIED","insertions":10,"deletions":-9},{"file":"usr/src/uts/common/io/usb/usba/usbai_pipe_mgmt.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/io/usb/usba/usbai_register.c","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/io/usb/usba/usbai_req.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/usbai_util.c","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/io/usb/usba10/usba10.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/sys/usb/usba/bos.h","type":"ADDED","insertions":241,"deletions":0},{"file":"usr/src/uts/common/sys/usb/usba/usba10.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/sys/usb/usba/usba_impl.h","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/sys/usb/usba/usba_private.h","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"usr/src/uts/common/sys/usb/usba/usba_types.h","type":"MODIFIED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/sys/usb/usbai.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/intel/usba/Makefile","type":"MODIFIED","insertions":1,"deletions":-11}],"sizeInsertions":886,"sizeDeletions":-189},{"number":"2","revision":"63a7380d78e94d4f2ba99acef2aa9c64baa85cb1","parents":["f45a4a6a71194fb218dc93b77f1d5f597d25cfd3"],"ref":"refs/changes/54/6054/2","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1555342914,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555351514,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"comments":[{"file":"usr/src/uts/common/sys/usb/usba/bos.h","line":20,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"s/that related/that are related/"},{"file":"usr/src/uts/common/sys/usb/usba/bos.h","line":20,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/usb/topo_usb.c","type":"MODIFIED","insertions":56,"deletions":-1},{"file":"usr/src/man/man9f/usb_parse_data.9f","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/genconsole.c","type":"MODIFIED","insertions":12,"deletions":-21},{"file":"usr/src/uts/common/io/usb/usba/hubdi.c","type":"MODIFIED","insertions":16,"deletions":-10},{"file":"usr/src/uts/common/io/usb/usba/parser.c","type":"MODIFIED","insertions":47,"deletions":-98},{"file":"usr/src/uts/common/io/usb/usba/usba.c","type":"MODIFIED","insertions":16,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/usba10_calls.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/usba_bos.c","type":"ADDED","insertions":420,"deletions":0},{"file":"usr/src/uts/common/io/usb/usba/usba_devdb.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/common/io/usb/usba/usba_ugen.c","type":"MODIFIED","insertions":5,"deletions":-7},{"file":"usr/src/uts/common/io/usb/usba/usbai.c","type":"MODIFIED","insertions":10,"deletions":-9},{"file":"usr/src/uts/common/io/usb/usba/usbai_pipe_mgmt.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/io/usb/usba/usbai_register.c","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/io/usb/usba/usbai_req.c","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/usbai_util.c","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/io/usb/usba10/usba10.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/sys/usb/usba/bos.h","type":"ADDED","insertions":242,"deletions":0},{"file":"usr/src/uts/common/sys/usb/usba/usba10.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/sys/usb/usba/usba_impl.h","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/sys/usb/usba/usba_private.h","type":"MODIFIED","insertions":16,"deletions":-16},{"file":"usr/src/uts/common/sys/usb/usba/usba_types.h","type":"MODIFIED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/sys/usb/usbai.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/intel/usba/Makefile","type":"MODIFIED","insertions":1,"deletions":-11}],"sizeInsertions":894,"sizeDeletions":-194},{"number":"3","revision":"ac5b95b14dbc606d2d40fb00579543e488dfddf0","parents":["39324c3c3e700905593cf884cb6987cf0db01381"],"ref":"refs/changes/54/6054/3","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1555437319,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556041014,"by":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556035709,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556035895,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/usb/topo_usb.c","type":"MODIFIED","insertions":56,"deletions":-1},{"file":"usr/src/man/man9f/usb_parse_data.9f","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/genconsole.c","type":"MODIFIED","insertions":12,"deletions":-21},{"file":"usr/src/uts/common/io/usb/usba/hubdi.c","type":"MODIFIED","insertions":16,"deletions":-10},{"file":"usr/src/uts/common/io/usb/usba/parser.c","type":"MODIFIED","insertions":47,"deletions":-98},{"file":"usr/src/uts/common/io/usb/usba/usba.c","type":"MODIFIED","insertions":16,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/usba10_calls.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/usba_bos.c","type":"ADDED","insertions":420,"deletions":0},{"file":"usr/src/uts/common/io/usb/usba/usba_devdb.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/common/io/usb/usba/usba_ugen.c","type":"MODIFIED","insertions":5,"deletions":-7},{"file":"usr/src/uts/common/io/usb/usba/usbai.c","type":"MODIFIED","insertions":10,"deletions":-9},{"file":"usr/src/uts/common/io/usb/usba/usbai_pipe_mgmt.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/io/usb/usba/usbai_register.c","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/io/usb/usba/usbai_req.c","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/usbai_util.c","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/io/usb/usba10/usba10.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/sys/usb/usba/bos.h","type":"ADDED","insertions":242,"deletions":0},{"file":"usr/src/uts/common/sys/usb/usba/usba10.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/sys/usb/usba/usba_impl.h","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/sys/usb/usba/usba_private.h","type":"MODIFIED","insertions":16,"deletions":-16},{"file":"usr/src/uts/common/sys/usb/usba/usba_types.h","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"usr/src/uts/common/sys/usb/usbai.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/intel/usba/Makefile","type":"MODIFIED","insertions":1,"deletions":-11}],"sizeInsertions":895,"sizeDeletions":-195},{"number":"4","revision":"ec3c8cd88d3e28ca04c9760b9b96f64c830b7543","parents":["a6a0e2aee988bd529ac3621e19f33518fe40a0b9"],"ref":"refs/changes/54/6054/4","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1556058540,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556041014,"by":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556035709,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556035895,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/usb/topo_usb.c","type":"MODIFIED","insertions":56,"deletions":-1},{"file":"usr/src/man/man9f/usb_parse_data.9f","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/genconsole.c","type":"MODIFIED","insertions":12,"deletions":-21},{"file":"usr/src/uts/common/io/usb/usba/hubdi.c","type":"MODIFIED","insertions":16,"deletions":-10},{"file":"usr/src/uts/common/io/usb/usba/parser.c","type":"MODIFIED","insertions":47,"deletions":-98},{"file":"usr/src/uts/common/io/usb/usba/usba.c","type":"MODIFIED","insertions":16,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/usba10_calls.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/usba_bos.c","type":"ADDED","insertions":420,"deletions":0},{"file":"usr/src/uts/common/io/usb/usba/usba_devdb.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/common/io/usb/usba/usba_ugen.c","type":"MODIFIED","insertions":5,"deletions":-7},{"file":"usr/src/uts/common/io/usb/usba/usbai.c","type":"MODIFIED","insertions":10,"deletions":-9},{"file":"usr/src/uts/common/io/usb/usba/usbai_pipe_mgmt.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/io/usb/usba/usbai_register.c","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/io/usb/usba/usbai_req.c","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/usbai_util.c","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/io/usb/usba10/usba10.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/sys/usb/usba/bos.h","type":"ADDED","insertions":242,"deletions":0},{"file":"usr/src/uts/common/sys/usb/usba/usba10.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/sys/usb/usba/usba_impl.h","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/sys/usb/usba/usba_private.h","type":"MODIFIED","insertions":16,"deletions":-16},{"file":"usr/src/uts/common/sys/usb/usba/usba_types.h","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"usr/src/uts/common/sys/usb/usbai.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/intel/usba/Makefile","type":"MODIFIED","insertions":1,"deletions":-11}],"sizeInsertions":895,"sizeDeletions":-195},{"number":"5","revision":"0cba37f035f83ba6fad928fce41542860dfb62cd","parents":["a6a0e2aee988bd529ac3621e19f33518fe40a0b9"],"ref":"refs/changes/54/6054/5","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1556058592,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1556058597,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556041014,"by":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556035709,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556035895,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":13,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/usb/topo_usb.c","type":"MODIFIED","insertions":56,"deletions":-1},{"file":"usr/src/man/man9f/usb_parse_data.9f","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/genconsole.c","type":"MODIFIED","insertions":12,"deletions":-21},{"file":"usr/src/uts/common/io/usb/usba/hubdi.c","type":"MODIFIED","insertions":16,"deletions":-10},{"file":"usr/src/uts/common/io/usb/usba/parser.c","type":"MODIFIED","insertions":47,"deletions":-98},{"file":"usr/src/uts/common/io/usb/usba/usba.c","type":"MODIFIED","insertions":16,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/usba10_calls.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/usba_bos.c","type":"ADDED","insertions":420,"deletions":0},{"file":"usr/src/uts/common/io/usb/usba/usba_devdb.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/common/io/usb/usba/usba_ugen.c","type":"MODIFIED","insertions":5,"deletions":-7},{"file":"usr/src/uts/common/io/usb/usba/usbai.c","type":"MODIFIED","insertions":10,"deletions":-9},{"file":"usr/src/uts/common/io/usb/usba/usbai_pipe_mgmt.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/io/usb/usba/usbai_register.c","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/io/usb/usba/usbai_req.c","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/uts/common/io/usb/usba/usbai_util.c","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/io/usb/usba10/usba10.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/sys/usb/usba/bos.h","type":"ADDED","insertions":242,"deletions":0},{"file":"usr/src/uts/common/sys/usb/usba/usba10.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/sys/usb/usba/usba_impl.h","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/sys/usb/usba/usba_private.h","type":"MODIFIED","insertions":16,"deletions":-16},{"file":"usr/src/uts/common/sys/usb/usba/usba_types.h","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"usr/src/uts/common/sys/usb/usbai.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/intel/usba/Makefile","type":"MODIFIED","insertions":1,"deletions":-11}],"sizeInsertions":895,"sizeDeletions":-195}],"allReviewers":[{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}]}