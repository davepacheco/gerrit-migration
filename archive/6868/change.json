{"project":"joyent/illumos-joyent","branch":"master","topic":"OS-7979","id":"I813a17c89abd9ce8c804eaa00e50228b478d6319","number":"6868","subject":"OS-7979 introduce /etc/versions/build Reviewed by: Tim Foster \u003ctim.foster@joyent.com\u003e Reviewed by: Jason King \u003cjason.king@joyent.com\u003e Approved by: Tim Foster \u003ctim.foster@joyent.com\u003e","owner":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"url":"https://cr.joyent.us/6868","commitMessage":"OS-7979 introduce /etc/versions/build\nReviewed by: Tim Foster \u003ctim.foster@joyent.com\u003e\nReviewed by: Jason King \u003cjason.king@joyent.com\u003e\nApproved by: Tim Foster \u003ctim.foster@joyent.com\u003e\n","createdOn":1567601193,"lastUpdated":1568288192,"open":false,"status":"MERGED","comments":[{"timestamp":1567601193,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 1."},{"timestamp":1567601195,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit eaebc836f29b6500c9f853c0e7fa72ad4d260426\n    \n    first bv2"},{"timestamp":1567601206,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Topic set to OS-7979"},{"timestamp":1568198246,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1568198251,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 5689afc3dd283e9fed3a34a2d1d6e7ea8b29aca4\n    \n    OS-7979 introduce /etc/versions/build"},{"timestamp":1568210121,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1568211199,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1568212448,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1568222368,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 2:\n\nI added testing notes to the ticket"},{"timestamp":1568231632,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1568285242,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1568288100,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1568288128,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 4: Patch Set 3 was rebased"},{"timestamp":1568288192,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by John Levon"}],"currentPatchSet":{"number":"4","revision":"a684d52c70031374c438f8d0fecbbf3e872c9753","parents":["f575b548814883ebc2eb65fe406ec62d0d6b5bbb"],"ref":"refs/changes/68/6868/4","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1568288128,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1568212448,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1568231632,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1568285242,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}},{"type":"SUBM","value":"1","grantedOn":1568288192,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/Makefile","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"usr/src/cmd/boot/filelist/i386/filelist.ramdisk","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/cmd/mdb/common/modules/mdb_ks/mdb_ks.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/cmd/nsadmin/Makefile","type":"MODIFIED","insertions":18,"deletions":-2},{"file":"usr/src/cmd/nsadmin/system","type":"MODIFIED","insertions":0,"deletions":-5},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/tools/env/illumos.sh","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/tools/scripts/nightly.sh","type":"MODIFIED","insertions":0,"deletions":-13},{"file":"usr/src/uts/common/os/buildversion.c","type":"DELETED","insertions":0,"deletions":-112},{"file":"usr/src/uts/common/os/modsysfile.c","type":"MODIFIED","insertions":20,"deletions":-1},{"file":"usr/src/uts/intel/Makefile.intel","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/uts/intel/buildversion/Makefile","type":"DELETED","insertions":0,"deletions":-50},{"file":"usr/src/uts/intel/os/name_to_major","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"usr/src/uts/sparc/Makefile.sparc","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/uts/sparc/buildversion/Makefile","type":"DELETED","insertions":0,"deletions":-50}],"sizeInsertions":52,"sizeDeletions":-245},"patchSets":[{"number":"1","revision":"d29efd3bb7c783da50c693708ae0c625fab268c9","parents":["1ed9823d08fd2b08c4d4f0d9a57075899d36b295"],"ref":"refs/changes/68/6868/1","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1567601193,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/Makefile","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"usr/src/cmd/boot/filelist/i386/filelist.ramdisk","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/cmd/mdb/common/modules/mdb_ks/mdb_ks.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/cmd/nsadmin/Makefile","type":"MODIFIED","insertions":18,"deletions":-2},{"file":"usr/src/cmd/nsadmin/system","type":"MODIFIED","insertions":0,"deletions":-5},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/tools/env/illumos.sh","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/tools/scripts/nightly.sh","type":"MODIFIED","insertions":0,"deletions":-13},{"file":"usr/src/uts/common/os/buildversion.c","type":"DELETED","insertions":0,"deletions":-112},{"file":"usr/src/uts/common/os/modsysfile.c","type":"MODIFIED","insertions":20,"deletions":-1},{"file":"usr/src/uts/intel/Makefile.intel","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/uts/intel/buildversion/Makefile","type":"DELETED","insertions":0,"deletions":-50},{"file":"usr/src/uts/intel/os/name_to_major","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"usr/src/uts/sparc/Makefile.sparc","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/uts/sparc/buildversion/Makefile","type":"DELETED","insertions":0,"deletions":-50}],"sizeInsertions":52,"sizeDeletions":-245},{"number":"2","revision":"f30deb96542dd0614dabeffca0945c9afde09dbe","parents":["fa49197bae58cc9833edfa12d6b7ba60b1cd1d94"],"ref":"refs/changes/68/6868/2","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1568198246,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1568231632,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1568212448,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1568285242,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"comments":[{"file":"usr/src/cmd/mdb/common/modules/mdb_ks/mdb_ks.c","line":1836,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Does it matter that we\u0027re not also falling back to \u0027buildversion_start\u0027 here, or is the intent that there are likely to be few crashdumps that used that symbol? (maybe mdb_lookup_by_name uses a search anchored at the start of the string, and so this is fine?)"},{"file":"usr/src/cmd/mdb/common/modules/mdb_ks/mdb_ks.c","line":1836,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Yes, it doesn\u0027t seem worth it for the relatively small gap, given it\u0027s easy enough to dig out by hand. And anyway, you\u0027re *supposed* to use a matching mdb..."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/Makefile","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"usr/src/cmd/boot/filelist/i386/filelist.ramdisk","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/cmd/mdb/common/modules/mdb_ks/mdb_ks.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/cmd/nsadmin/Makefile","type":"MODIFIED","insertions":18,"deletions":-2},{"file":"usr/src/cmd/nsadmin/system","type":"MODIFIED","insertions":0,"deletions":-5},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/tools/env/illumos.sh","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/tools/scripts/nightly.sh","type":"MODIFIED","insertions":0,"deletions":-13},{"file":"usr/src/uts/common/os/buildversion.c","type":"DELETED","insertions":0,"deletions":-112},{"file":"usr/src/uts/common/os/modsysfile.c","type":"MODIFIED","insertions":20,"deletions":-1},{"file":"usr/src/uts/intel/Makefile.intel","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/uts/intel/buildversion/Makefile","type":"DELETED","insertions":0,"deletions":-50},{"file":"usr/src/uts/intel/os/name_to_major","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"usr/src/uts/sparc/Makefile.sparc","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/uts/sparc/buildversion/Makefile","type":"DELETED","insertions":0,"deletions":-50}],"sizeInsertions":52,"sizeDeletions":-245},{"number":"3","revision":"813a17c89abd9ce8c804eaa00e50228b478d6319","parents":["fa49197bae58cc9833edfa12d6b7ba60b1cd1d94"],"ref":"refs/changes/68/6868/3","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1568288100,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1568231632,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1568212448,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1568285242,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/Makefile","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"usr/src/cmd/boot/filelist/i386/filelist.ramdisk","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/cmd/mdb/common/modules/mdb_ks/mdb_ks.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/cmd/nsadmin/Makefile","type":"MODIFIED","insertions":18,"deletions":-2},{"file":"usr/src/cmd/nsadmin/system","type":"MODIFIED","insertions":0,"deletions":-5},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/tools/env/illumos.sh","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/tools/scripts/nightly.sh","type":"MODIFIED","insertions":0,"deletions":-13},{"file":"usr/src/uts/common/os/buildversion.c","type":"DELETED","insertions":0,"deletions":-112},{"file":"usr/src/uts/common/os/modsysfile.c","type":"MODIFIED","insertions":20,"deletions":-1},{"file":"usr/src/uts/intel/Makefile.intel","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/uts/intel/buildversion/Makefile","type":"DELETED","insertions":0,"deletions":-50},{"file":"usr/src/uts/intel/os/name_to_major","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"usr/src/uts/sparc/Makefile.sparc","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/uts/sparc/buildversion/Makefile","type":"DELETED","insertions":0,"deletions":-50}],"sizeInsertions":52,"sizeDeletions":-245},{"number":"4","revision":"a684d52c70031374c438f8d0fecbbf3e872c9753","parents":["f575b548814883ebc2eb65fe406ec62d0d6b5bbb"],"ref":"refs/changes/68/6868/4","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1568288128,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1568231632,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"SUBM","value":"1","grantedOn":1568288192,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1568212448,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1568285242,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/Makefile","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"usr/src/cmd/boot/filelist/i386/filelist.ramdisk","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/cmd/mdb/common/modules/mdb_ks/mdb_ks.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/cmd/nsadmin/Makefile","type":"MODIFIED","insertions":18,"deletions":-2},{"file":"usr/src/cmd/nsadmin/system","type":"MODIFIED","insertions":0,"deletions":-5},{"file":"usr/src/pkg/manifests/SUNWcs.mf","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/tools/env/illumos.sh","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/tools/scripts/nightly.sh","type":"MODIFIED","insertions":0,"deletions":-13},{"file":"usr/src/uts/common/os/buildversion.c","type":"DELETED","insertions":0,"deletions":-112},{"file":"usr/src/uts/common/os/modsysfile.c","type":"MODIFIED","insertions":20,"deletions":-1},{"file":"usr/src/uts/intel/Makefile.intel","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/uts/intel/buildversion/Makefile","type":"DELETED","insertions":0,"deletions":-50},{"file":"usr/src/uts/intel/os/name_to_major","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"usr/src/uts/sparc/Makefile.sparc","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/uts/sparc/buildversion/Makefile","type":"DELETED","insertions":0,"deletions":-50}],"sizeInsertions":52,"sizeDeletions":-245}],"allReviewers":[{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}]}