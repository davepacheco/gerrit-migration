{"project":"joyent/smartos-live","branch":"master","id":"Ia8b1126292d49455fe6aeed0ae2895af2dd7b88a","number":"5321","subject":"TRITON-1012 vmadmd needs to be rack aware Reviewed by: Michael Zeller \u003cmike.zeller@joyent.com\u003e Reviewed by: Dave Eddy \u003cdave.eddy@joyent.com\u003e Approved by: Dave Eddy \u003cdave.eddy@joyent.com\u003e","owner":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"url":"https://cr.joyent.us/5321","commitMessage":"TRITON-1012 vmadmd needs to be rack aware\nReviewed by: Michael Zeller \u003cmike.zeller@joyent.com\u003e\nReviewed by: Dave Eddy \u003cdave.eddy@joyent.com\u003e\nApproved by: Dave Eddy \u003cdave.eddy@joyent.com\u003e\n","createdOn":1546893443,"lastUpdated":1547747310,"open":false,"status":"MERGED","comments":[{"timestamp":1546893443,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 1."},{"timestamp":1546893496,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1546908264,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(2 comments)\n\nI didn\u0027t look over the integrated module, as I assume that was previously reviewed."},{"timestamp":1546961190,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 2."},{"timestamp":1546961242,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1546961377,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1546988252,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2:\n\nThe surrounding bits look OK. I haven\u0027t reviewed the module at all."},{"timestamp":1547585877,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1547586759,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1547655732,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 3."},{"timestamp":1547655765,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Patch Set 2:\n\n(2 comments)"},{"timestamp":1547655788,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1547656780,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 3:\n\nYou can probably remove src/vm/node_modules/triton-netconfig/README.md all together as well."},{"timestamp":1547657092,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 4."},{"timestamp":1547657148,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1547657317,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 5."},{"timestamp":1547657373,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1547657958,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1547672348,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1547745783,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 5: Integration-Approval+1"},{"timestamp":1547747253,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 6: Patch Set 5 was rebased."},{"timestamp":1547747280,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 7: Commit message was updated."},{"timestamp":1547747299,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Rui"},{"timestamp":1547747310,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6:\n\n\"make check\" passed ok"}],"currentPatchSet":{"number":"7","revision":"a8b1126292d49455fe6aeed0ae2895af2dd7b88a","parents":["9d98018c7deaa96ac7eb9f6a26095c4c7bc08bc4"],"ref":"refs/changes/21/5321/7","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1547747280,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1547657373,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547657958,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547672348,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1547745783,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"SUBM","value":"1","grantedOn":1547747299,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":5,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/LICENSE","type":"ADDED","insertions":373,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/lib/index.js","type":"ADDED","insertions":152,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/package.json","type":"ADDED","insertions":68,"deletions":0},{"file":"src/vm/package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"src/vm/sbin/vmadmd.js","type":"MODIFIED","insertions":9,"deletions":-13}],"sizeInsertions":610,"sizeDeletions":-15},"patchSets":[{"number":"1","revision":"6c2722d0de770a19c3cf2dafd3c1e67a5fa6896b","parents":["47c8d48c0ff4e89136990052262d3ef4f34e1e91"],"ref":"refs/changes/21/5321/1","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1546893443,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1546893496,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/manifest","line":770,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I think current directory convention is 0755."},{"file":"src/manifest","line":770,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Done"},{"file":"src/vm/sbin/vmadmd.js","line":443,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Was this meant to be a + sign?"},{"file":"src/vm/sbin/vmadmd.js","line":443,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Either works, but I switched this up to be a bit more bunyany."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":6,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/CHANGES.md","type":"ADDED","insertions":5,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/LICENSE","type":"ADDED","insertions":373,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/README.md","type":"ADDED","insertions":100,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/lib/index.js","type":"ADDED","insertions":152,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/package.json","type":"ADDED","insertions":68,"deletions":0},{"file":"src/vm/package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"src/vm/sbin/vmadmd.js","type":"MODIFIED","insertions":8,"deletions":-13}],"sizeInsertions":715,"sizeDeletions":-15},{"number":"2","revision":"0f197942614e1f60f6f2ba81ffd83ae71223dae0","parents":["47c8d48c0ff4e89136990052262d3ef4f34e1e91"],"ref":"refs/changes/21/5321/2","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1546961190,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1546961242,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/manifest","line":772,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"I only see one other readme in the manifest and that belongs to ejs. It looks like none of the other joyent specific node modules (vasync etc) ship it.  It\u0027s probably safe to drop as it\u0027s only adding to the smartos platform image size."},{"file":"src/manifest","line":772,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"removed."},{"file":"src/vm/sbin/vmadmd.js","line":24,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"2019"},{"file":"src/vm/sbin/vmadmd.js","line":24,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":6,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/CHANGES.md","type":"ADDED","insertions":5,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/LICENSE","type":"ADDED","insertions":373,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/README.md","type":"ADDED","insertions":100,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/lib/index.js","type":"ADDED","insertions":152,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/package.json","type":"ADDED","insertions":68,"deletions":0},{"file":"src/vm/package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"src/vm/sbin/vmadmd.js","type":"MODIFIED","insertions":9,"deletions":-13}],"sizeInsertions":716,"sizeDeletions":-15},{"number":"3","revision":"e6a2f602b4f5140d13fcd6aa6a8f8d3210b77954","parents":["47c8d48c0ff4e89136990052262d3ef4f34e1e91"],"ref":"refs/changes/21/5321/3","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1547655732,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1547655788,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":5,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/CHANGES.md","type":"ADDED","insertions":5,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/LICENSE","type":"ADDED","insertions":373,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/README.md","type":"ADDED","insertions":100,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/lib/index.js","type":"ADDED","insertions":152,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/package.json","type":"ADDED","insertions":68,"deletions":0},{"file":"src/vm/package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"src/vm/sbin/vmadmd.js","type":"MODIFIED","insertions":10,"deletions":-14}],"sizeInsertions":716,"sizeDeletions":-16},{"number":"4","revision":"6af95092b233ce889a9a07a87d113a8321d56a15","parents":["47c8d48c0ff4e89136990052262d3ef4f34e1e91"],"ref":"refs/changes/21/5321/4","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1547657092,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1547657148,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":5,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/CHANGES.md","type":"ADDED","insertions":5,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/LICENSE","type":"ADDED","insertions":373,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/lib/index.js","type":"ADDED","insertions":152,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/package.json","type":"ADDED","insertions":68,"deletions":0},{"file":"src/vm/package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"src/vm/sbin/vmadmd.js","type":"MODIFIED","insertions":10,"deletions":-14}],"sizeInsertions":616,"sizeDeletions":-16},{"number":"5","revision":"15655411729e5d46f643de250ad9b036038163bf","parents":["47c8d48c0ff4e89136990052262d3ef4f34e1e91"],"ref":"refs/changes/21/5321/5","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1547657317,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1547657373,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547672348,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1547745783,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547657958,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":5,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/LICENSE","type":"ADDED","insertions":373,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/lib/index.js","type":"ADDED","insertions":152,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/package.json","type":"ADDED","insertions":68,"deletions":0},{"file":"src/vm/package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"src/vm/sbin/vmadmd.js","type":"MODIFIED","insertions":10,"deletions":-14}],"sizeInsertions":611,"sizeDeletions":-16},{"number":"6","revision":"1f91ad7419b397d75ec9c5c1162b1a80c0070a96","parents":["9d98018c7deaa96ac7eb9f6a26095c4c7bc08bc4"],"ref":"refs/changes/21/5321/6","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1547747253,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1547657373,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547672348,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1547745783,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547657958,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":5,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/LICENSE","type":"ADDED","insertions":373,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/lib/index.js","type":"ADDED","insertions":152,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/package.json","type":"ADDED","insertions":68,"deletions":0},{"file":"src/vm/package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"src/vm/sbin/vmadmd.js","type":"MODIFIED","insertions":9,"deletions":-13}],"sizeInsertions":610,"sizeDeletions":-15},{"number":"7","revision":"a8b1126292d49455fe6aeed0ae2895af2dd7b88a","parents":["9d98018c7deaa96ac7eb9f6a26095c4c7bc08bc4"],"ref":"refs/changes/21/5321/7","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1547747280,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1547657373,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547672348,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1547745783,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547657958,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"SUBM","value":"1","grantedOn":1547747299,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":5,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/LICENSE","type":"ADDED","insertions":373,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/lib/index.js","type":"ADDED","insertions":152,"deletions":0},{"file":"src/vm/node_modules/triton-netconfig/package.json","type":"ADDED","insertions":68,"deletions":0},{"file":"src/vm/package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"src/vm/sbin/vmadmd.js","type":"MODIFIED","insertions":9,"deletions":-13}],"sizeInsertions":610,"sizeDeletions":-15}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}]}