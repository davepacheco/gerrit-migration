{"project":"joyent/node-cueball","branch":"master","id":"Iea6cc1da196ffdb018ef7c7157066d40e229cf00","number":"1158","subject":"joyent/node-cueball#64 Resolver should keep cached A/AAAA records from last SRV joyent/node-cueball#63 NIC_CACHE expiring causes re-do of A lookups before real TTL Reviewed by: David Pacheco \u003cdap@joyent.com\u003e","owner":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"url":"https://cr.joyent.us/1158","commitMessage":"joyent/node-cueball#64 Resolver should keep cached A/AAAA records from last SRV\njoyent/node-cueball#63 NIC_CACHE expiring causes re-do of A lookups before real TTL\nReviewed by: David Pacheco \u003cdap@joyent.com\u003e\n","createdOn":1482364610,"lastUpdated":1482367886,"open":false,"status":"MERGED","comments":[{"timestamp":1482364610,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 1."},{"timestamp":1482364691,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1482366348,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1482367411,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 2."},{"timestamp":1482367477,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1482367550,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1482367780,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 3: Commit message was updated."},{"timestamp":1482367884,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1482367886,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Alex Wilson"}],"currentPatchSet":{"number":"3","revision":"9df101c00269f387854ea3aa33a21627f2ccf29a","parents":["5c29f784435b6e315f2a0a4c8bc06ec126fc90cb"],"ref":"refs/changes/58/1158/3","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1482367780,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1482367477,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482367550,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1482367884,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"SUBM","value":"1","grantedOn":1482367886,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/resolver.js","type":"MODIFIED","insertions":116,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/dns.test.js","type":"MODIFIED","insertions":203,"deletions":-10}],"sizeInsertions":320,"sizeDeletions":-13},"patchSets":[{"number":"1","revision":"41873dc148e1d504223d7ef9d4d4bc20172974b4","parents":["5c29f784435b6e315f2a0a4c8bc06ec126fc90cb"],"ref":"refs/changes/58/1158/1","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1482364610,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482364691,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/resolver.js","line":561,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Is this supposed to be \"\u003d srv.expiry_v6\"?\n\nIt seems like we\u0027re saying that we want to lookup V6 records again when the current ones expire, even if the NIC cache indicates we don\u0027t have IPv6 addresses and that cache is valid for longer than the expire time.  Is that right?"},{"file":"lib/resolver.js","line":674,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Same typo here, and same question about the cache expire time."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/resolver.js","type":"MODIFIED","insertions":55,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/dns.test.js","type":"MODIFIED","insertions":203,"deletions":-10}],"sizeInsertions":259,"sizeDeletions":-13},{"number":"2","revision":"ea6cc1da196ffdb018ef7c7157066d40e229cf00","parents":["5c29f784435b6e315f2a0a4c8bc06ec126fc90cb"],"ref":"refs/changes/58/1158/2","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1482367411,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1482367477,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482367550,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/resolver.js","type":"MODIFIED","insertions":116,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/dns.test.js","type":"MODIFIED","insertions":203,"deletions":-10}],"sizeInsertions":320,"sizeDeletions":-13},{"number":"3","revision":"9df101c00269f387854ea3aa33a21627f2ccf29a","parents":["5c29f784435b6e315f2a0a4c8bc06ec126fc90cb"],"ref":"refs/changes/58/1158/3","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1482367780,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1482367477,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1482367884,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"SUBM","value":"1","grantedOn":1482367886,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482367550,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/resolver.js","type":"MODIFIED","insertions":116,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/dns.test.js","type":"MODIFIED","insertions":203,"deletions":-10}],"sizeInsertions":320,"sizeDeletions":-13}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}]}