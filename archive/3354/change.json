{"project":"joyent/illumos-joyent","branch":"master","id":"I016c6e4a03266bfa546041c49c47c62000cded99","number":"3354","subject":"OS-6560 Extend smbios enumerator module to enumerate motherboard Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Approved by: Jason King \u003cjason.king@joyent.com\u003e","owner":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"url":"https://cr.joyent.us/3354","commitMessage":"OS-6560 Extend smbios enumerator module to enumerate motherboard\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nApproved by: Jason King \u003cjason.king@joyent.com\u003e\n","createdOn":1518480528,"lastUpdated":1518559143,"open":false,"status":"MERGED","comments":[{"timestamp":1518480528,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 1."},{"timestamp":1518544626,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(2 comments)\n\nIt looks like this will only be enumerated if we opt into it in the current platform xml, is that right? Maybe we can follow up for older platforms with this and the DIMMs in subsequent change?"},{"timestamp":1518549679,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 1:\n\n(2 comments)\n\nI did change things so that we enumerate DIMMs even on older platforms as part of the changes for OS-6490 - but that felt safe because in general the data in SMBIOS for DIMMs tends to always be solid.\n\nI agree that as a followup we should go back and enable this on the older Joyent platforms."},{"timestamp":1518550281,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 2."},{"timestamp":1518550319,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 1:\n\nOk - this time with the change actually pushed :)"},{"timestamp":1518551446,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1518552066,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 3."},{"timestamp":1518552134,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 3:\n\n1-line update to remove spurious whitespace from topo_hc.h."},{"timestamp":1518557139,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1518557318,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1518557871,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 4: Integration-Approval+1"},{"timestamp":1518558350,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1518559143,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Rob Johnston"}],"currentPatchSet":{"number":"5","revision":"016c6e4a03266bfa546041c49c47c62000cded99","parents":["eb59b26d5cb2b7c86671e852208c9b1f50365db2"],"ref":"refs/changes/54/3354/5","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1518558350,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1518557139,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1518557871,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"SUBM","value":"1","grantedOn":1518559143,"by":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"MODIFIED","insertions":139,"deletions":-3},{"file":"usr/src/uts/common/sys/smbios.h","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":154,"sizeDeletions":-6},"patchSets":[{"number":"1","revision":"a30024fb0ab11870eb7e0d7e8ab2a675f3b2c0ac","parents":["d2b9e3b956fbfcd189ef7088e7602f8f8383ce39"],"ref":"refs/changes/54/3354/1","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1518480528,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":414,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"How do you determine which strings to clean versus which ones not to?"},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":414,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Basic rule is we want to clean all the strings we pull from hardware.  The reason we don\u0027t explicitly call topo_mod_clean_str() for part/rev/manuf/serial is they get cleaned under the hood when. we pass them to topo_mod_hcfmri()"},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":470,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Join with previous line?"},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":470,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"MODIFIED","insertions":140,"deletions":-3},{"file":"usr/src/uts/common/sys/smbios.h","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":156,"sizeDeletions":-7},{"number":"2","revision":"6d0f79951d9be157d286990c3fbff323c635f53a","parents":["d2b9e3b956fbfcd189ef7088e7602f8f8383ce39"],"ref":"refs/changes/54/3354/2","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1518550281,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1518551446,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"MODIFIED","insertions":139,"deletions":-3},{"file":"usr/src/uts/common/sys/smbios.h","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":155,"sizeDeletions":-7},{"number":"3","revision":"f37f7ee9498b35b771e4348f7a37cf3a57e0c24e","parents":["ed0e03ac24c4a80fc1dca6c059801da8356cd81a"],"ref":"refs/changes/54/3354/3","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1518552066,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1518557139,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"MODIFIED","insertions":139,"deletions":-3},{"file":"usr/src/uts/common/sys/smbios.h","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":154,"sizeDeletions":-6},{"number":"4","revision":"ae3e10e3c34a4bbb1487b8cf87091e4ff376f8cb","parents":["eb59b26d5cb2b7c86671e852208c9b1f50365db2"],"ref":"refs/changes/54/3354/4","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1518557318,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1518557139,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1518557871,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"MODIFIED","insertions":139,"deletions":-3},{"file":"usr/src/uts/common/sys/smbios.h","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":154,"sizeDeletions":-6},{"number":"5","revision":"016c6e4a03266bfa546041c49c47c62000cded99","parents":["eb59b26d5cb2b7c86671e852208c9b1f50365db2"],"ref":"refs/changes/54/3354/5","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1518558350,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1518557139,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1518557871,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"SUBM","value":"1","grantedOn":1518559143,"by":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"MODIFIED","insertions":139,"deletions":-3},{"file":"usr/src/uts/common/sys/smbios.h","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":154,"sizeDeletions":-6}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}]}