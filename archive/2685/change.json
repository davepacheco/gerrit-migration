{"project":"joyent/sdc-cnapi","branch":"master","topic":"tritonnfs","id":"I7538cfaee259fedc377ce583bf689949fcdeb5c3","number":"2685","subject":"DAPI-345 filter out CNs not matching platform requirements for VMs that mount volumes Reviewed by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e Approved by: Orlando Vazquez \u003corlando@joyent.com\u003e","owner":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"url":"https://cr.joyent.us/2685","commitMessage":"DAPI-345 filter out CNs not matching platform requirements for VMs that mount volumes\nReviewed by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e\nApproved by: Orlando Vazquez \u003corlando@joyent.com\u003e\n","createdOn":1506642354,"lastUpdated":1507673039,"open":false,"status":"MERGED","comments":[{"timestamp":1506642354,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 1."},{"timestamp":1506642406,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1507071383,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Topic set to tritonnfs"},{"timestamp":1507105672,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1507128988,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1507199409,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1507251969,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1507671352,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 2."},{"timestamp":1507671391,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1507671424,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1507671805,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1507673010,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 3: Commit message was updated."},{"timestamp":1507673039,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Julien Gilli"}],"currentPatchSet":{"number":"3","revision":"6e83bc4b4a1e87ace5ab808a0b5a28cbf2b0821c","parents":["1b8ea8127be7bb5045418bf7436e790f31bd00ee"],"ref":"refs/changes/85/2685/3","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1507673010,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507671391,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507671424,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507671805,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"SUBM","value":"1","grantedOn":1507673039,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/designation.js","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/cnapi/template","type":"MODIFIED","insertions":1,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":0,"deletions":-1}],"sizeInsertions":15,"sizeDeletions":-4},"patchSets":[{"number":"1","revision":"9adcbae3c0ef43d802f291beef15602b70ffa1de","parents":["1b8ea8127be7bb5045418bf7436e790f31bd00ee"],"ref":"refs/changes/85/2685/1","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1506642354,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506642406,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/designation.js","line":41,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"If this isn\u0027t configurable, why not put it in DAPI itself? What do we gain by adding additional machinery here?"},{"file":"lib/designation.js","line":41,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Practically I agree that for us it would have the same effect. But I see node-designation more as a library than an application, and so I find it slightly cleaner to set these values in the application (CNAPI).\n\nAlso, these values could be made configurable in the future,  I can point you to the chat history in private if you\u0027re interested."},{"file":"package.json","line":12,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"I imagine we\u0027ll probably want to point this reference to a commit on the master branch."},{"file":"package.json","line":12,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Absolutely. Once the corresponding node-designation change is merged, I\u0027ll update this reference to that commit."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/designation.js","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/cnapi/template","type":"MODIFIED","insertions":1,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":0,"deletions":-1}],"sizeInsertions":15,"sizeDeletions":-4},{"number":"2","revision":"7538cfaee259fedc377ce583bf689949fcdeb5c3","parents":["1b8ea8127be7bb5045418bf7436e790f31bd00ee"],"ref":"refs/changes/85/2685/2","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1507671352,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507671391,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507671424,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507671805,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/designation.js","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/cnapi/template","type":"MODIFIED","insertions":1,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":0,"deletions":-1}],"sizeInsertions":15,"sizeDeletions":-4},{"number":"3","revision":"6e83bc4b4a1e87ace5ab808a0b5a28cbf2b0821c","parents":["1b8ea8127be7bb5045418bf7436e790f31bd00ee"],"ref":"refs/changes/85/2685/3","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1507673010,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507671391,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1507673039,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507671424,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507671805,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/designation.js","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/cnapi/template","type":"MODIFIED","insertions":1,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":0,"deletions":-1}],"sizeInsertions":15,"sizeDeletions":-4}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}]}