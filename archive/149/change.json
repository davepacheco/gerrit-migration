{"project":"joyent/smartos-live","branch":"master","topic":"HEAD-2315","id":"Ic7f4fdf5209fb3d1037af08c3b5da02f69d0e057","number":"149","subject":"HEAD-2315 boot media should use current grub Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Approved by: Cody Mello \u003ccody.mello@joyent.com\u003e","owner":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"url":"https://cr.joyent.us/149","commitMessage":"HEAD-2315 boot media should use current grub\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nApproved by: Cody Mello \u003ccody.mello@joyent.com\u003e\n","createdOn":1469598115,"lastUpdated":1469837067,"open":false,"status":"MERGED","comments":[{"timestamp":1469598115,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 1."},{"timestamp":1469598139,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Topic set to HEAD-2315"},{"timestamp":1469726193,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(7 comments)"},{"timestamp":1469752642,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 1:\n\n(7 comments)"},{"timestamp":1469752718,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 2."},{"timestamp":1469765277,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 3."},{"timestamp":1469831892,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3: Code-Review+1\n\nIn general, the lack of a well defined usage statement and way to get this from tools/images/make_image is unfortunate. It\u0027s still hard to discover what arguments mean and what should be used, but given that it\u0027s not designed to be used manually it probably isn\u0027t worth too much more time."},{"timestamp":1469836857,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1469836996,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 4: Patch Set 3 was rebased"},{"timestamp":1469837018,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 5: Commit message was updated."},{"timestamp":1469837067,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Joshua M. Clulow"}],"currentPatchSet":{"number":"5","revision":"0b86a346956089800977dbf4691b628812eb1674","parents":["25c4488665b35932fea625f19a77633e504b4458"],"ref":"refs/changes/49/149/5","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1469837018,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1469831892,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1469836857,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1469837067,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"tools/images/1gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/2gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/4gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/8gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/make_image","type":"ADDED","insertions":263,"deletions":0}],"sizeInsertions":319,"sizeDeletions":-1},"patchSets":[{"number":"1","revision":"b421eb860374098217ded8d07d6b7196833ae406","parents":["11c5e7f766ff4ddcac6d51ef65fabd362b092ac2"],"ref":"refs/changes/49/149/1","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1469598115,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","comments":[{"file":"tools/images/make_image","line":1,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Missing CDDL / MPL header?"},{"file":"tools/images/make_image","line":1,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Done"},{"file":"tools/images/make_image","line":2,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Do we really need modelines in our files?"},{"file":"tools/images/make_image","line":2,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Done"},{"file":"tools/images/make_image","line":3,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Missing a pipefile?"},{"file":"tools/images/make_image","line":3,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"(*pipefail).  I\u0027ve added a comment that describes why these aren\u0027t being set."},{"file":"tools/images/make_image","line":15,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is there a reason that some variables are in all caps and some are lowercase?\n\nNo prefixes?"},{"file":"tools/images/make_image","line":15,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Yes, the capitalised names are CONSTANTS and the others are just globals.  I have added \"g_\" prefixes to the globals to distinguish them from local variables within functions."},{"file":"tools/images/make_image","line":94,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It\u0027d help if the usage error said what the usage was."},{"file":"tools/images/make_image","line":94,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"getopts(1) prints out a message describing the usage error; I\u0027m just using the default case arm to exit if it does so."},{"file":"tools/images/make_image","line":96,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"You need a case for \u0027:\u0027 here that contains the fact that something is missing a required argument."},{"file":"tools/images/make_image","line":96,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"getopts(1) prints that message as well."},{"file":"tools/images/make_image","line":102,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This isn\u0027t a helpful error message. How do I determine what I should be passing?"},{"file":"tools/images/make_image","line":102,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"tools/images/1gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/2gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/4gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/8gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/make_image","type":"ADDED","insertions":241,"deletions":0}],"sizeInsertions":297,"sizeDeletions":-1},{"number":"2","revision":"6cf42d218fd6c7ddcf6ef8478e6812c33c7be4f5","parents":["11c5e7f766ff4ddcac6d51ef65fabd362b092ac2"],"ref":"refs/changes/49/149/2","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1469752718,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"tools/images/1gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/2gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/4gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/8gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/make_image","type":"ADDED","insertions":263,"deletions":0}],"sizeInsertions":319,"sizeDeletions":-1},{"number":"3","revision":"c7f4fdf5209fb3d1037af08c3b5da02f69d0e057","parents":["11c5e7f766ff4ddcac6d51ef65fabd362b092ac2"],"ref":"refs/changes/49/149/3","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1469765277,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1469831892,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1469836857,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"tools/images/1gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/2gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/4gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/8gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/make_image","type":"ADDED","insertions":263,"deletions":0}],"sizeInsertions":319,"sizeDeletions":-1},{"number":"4","revision":"f41cbbf0c3b656984effc4a7dc5edea7a9f2091e","parents":["25c4488665b35932fea625f19a77633e504b4458"],"ref":"refs/changes/49/149/4","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1469836996,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1469831892,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1469836857,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"tools/images/1gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/2gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/4gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/8gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/make_image","type":"ADDED","insertions":263,"deletions":0}],"sizeInsertions":319,"sizeDeletions":-1},{"number":"5","revision":"0b86a346956089800977dbf4691b628812eb1674","parents":["25c4488665b35932fea625f19a77633e504b4458"],"ref":"refs/changes/49/149/5","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1469837018,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1469831892,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1469836857,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1469837067,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"tools/images/1gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/2gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/4gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/8gb.fdisk","type":"ADDED","insertions":6,"deletions":0},{"file":"tools/images/make_image","type":"ADDED","insertions":263,"deletions":0}],"sizeInsertions":319,"sizeDeletions":-1}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}]}