{"project":"joyent/sdcadm","branch":"master","id":"I0f4f6995d7e51f0f6cb17f1fcbe60efd8c684f36","number":"312","subject":"TOOLS-1521 sdcadm should avoid updating duplicated agent instances on the same CN Reviewed by: Trent Mick \u003ctrent.mick@joyent.com\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/312","commitMessage":"TOOLS-1521 sdcadm should avoid updating duplicated agent instances on the same CN\nReviewed by: Trent Mick \u003ctrent.mick@joyent.com\u003e\n","createdOn":1471539687,"lastUpdated":1471545162,"open":false,"status":"MERGED","comments":[{"timestamp":1471539687,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1471539718,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1471541123,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\n(4 comments)"},{"timestamp":1471541429,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2."},{"timestamp":1471541459,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1471542220,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1471545162,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"2","revision":"0f4f6995d7e51f0f6cb17f1fcbe60efd8c684f36","parents":["b834aca07d6f4eb5aac08cb9ae65c002d78f0a06"],"ref":"refs/changes/12/312/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1471541429,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1471541459,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1471542220,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1471542220,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1471545162,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":21,"deletions":-1}],"sizeInsertions":21,"sizeDeletions":-1},"patchSets":[{"number":"1","revision":"5bb8ba02e38fba786fd32f10c604650783e07ca2","parents":["b834aca07d6f4eb5aac08cb9ae65c002d78f0a06"],"ref":"refs/changes/12/312/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1471539687,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1471539718,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/procedures/update-agent-v1.js","line":8,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"update copyright year"},{"file":"lib/procedures/update-agent-v1.js","line":166,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Perhaps change the above two paragraphs with the following. Basically, I don\u0027t think this comment should have the particular root cause of that ticket. It is possible that there are other causes of duplicate agent entries in sysinfo.\n\n\n\"Guard against duplicate agent instance entries (e.g. see TOOLS-1521).\""},{"file":"lib/procedures/update-agent-v1.js","line":182,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Lowercase \"There\" -\u003e \"there\", please."},{"file":"lib/procedures/update-agent-v1.js","line":186,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"extra blank line here to show that the block comment belongs to just this one function in the pipeline"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":28,"deletions":0}],"sizeInsertions":28,"sizeDeletions":0},{"number":"2","revision":"0f4f6995d7e51f0f6cb17f1fcbe60efd8c684f36","parents":["b834aca07d6f4eb5aac08cb9ae65c002d78f0a06"],"ref":"refs/changes/12/312/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1471541429,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1471541459,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1471542220,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1471542220,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1471545162,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":21,"deletions":-1}],"sizeInsertions":21,"sizeDeletions":-1}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}