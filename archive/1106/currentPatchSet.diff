From 176e482195a7e54ca478f2dd86c77d34f0ca3934 Mon Sep 17 00:00:00 2001
From: Jerry Jelinek <jerry.jelinek@joyent.com>
Date: Fri, 9 Dec 2016 21:33:08 +0000
Subject: [PATCH] OS-5838 lint errors in lx_brand Reviewed by: Patrick Mooney
 <patrick.mooney@joyent.com> Approved by: Patrick Mooney
 <patrick.mooney@joyent.com>

---
 usr/src/uts/common/brand/lx/syscall/lx_sched.c       | 4 ++--
 usr/src/uts/common/brand/lx/syscall/lx_thread_area.c | 3 ---
 usr/src/uts/intel/lx_brand/Makefile                  | 2 ++
 3 files changed, 4 insertions(+), 5 deletions(-)

diff --git a/usr/src/uts/common/brand/lx/syscall/lx_sched.c b/usr/src/uts/common/brand/lx/syscall/lx_sched.c
index 9e313406c0..72d920d2ba 100644
--- a/usr/src/uts/common/brand/lx/syscall/lx_sched.c
+++ b/usr/src/uts/common/brand/lx/syscall/lx_sched.c
@@ -140,7 +140,7 @@ lx_sched_yield(void)
 static void
 ltos_cpuset(lx_affmask_t *lmask, cpuset_t *smask)
 {
-	ASSERT(NCPU <= LX_NCPU);
+	/* NOTE: fix this code if NCPU is ever made > LX_NCPU */
 
 	cpuset_zero(smask);
 	for (int i = 0; i < NCPU; i++) {
@@ -153,7 +153,7 @@ ltos_cpuset(lx_affmask_t *lmask, cpuset_t *smask)
 static void
 stol_cpuset(cpuset_t *smask, lx_affmask_t *lmask)
 {
-	ASSERT(NCPU <= LX_NCPU);
+	/* NOTE: fix this code if NCPU is ever made > LX_NCPU */
 
 	bzero(lmask, sizeof (*lmask));
 	for (int i = 0; i < NCPU; i++) {
diff --git a/usr/src/uts/common/brand/lx/syscall/lx_thread_area.c b/usr/src/uts/common/brand/lx/syscall/lx_thread_area.c
index 50607fac9b..98b1e44780 100644
--- a/usr/src/uts/common/brand/lx/syscall/lx_thread_area.c
+++ b/usr/src/uts/common/brand/lx/syscall/lx_thread_area.c
@@ -138,9 +138,6 @@ lx_set_thread_area(struct ldt_info *inf)
 	int entry;
 	int i;
 
-	/* Check that casts for accessing the words in user_desc are valid */
-	ASSERT(sizeof (user_desc_t) == 8);
-
 	if (copyin(inf, &ldt_inf, sizeof (ldt_inf)))
 		return (set_errno(EFAULT));
 
diff --git a/usr/src/uts/intel/lx_brand/Makefile b/usr/src/uts/intel/lx_brand/Makefile
index daa16fa868..b0a4e96412 100644
--- a/usr/src/uts/intel/lx_brand/Makefile
+++ b/usr/src/uts/intel/lx_brand/Makefile
@@ -77,6 +77,8 @@ LDFLAGS		+= -dy -Nexec/elfexec -Nfs/fifofs -Nfs/sockfs -Ndrv/ip -Nfs/zfs
 #
 LINTTAGS	+= -erroff=E_ASSIGN_NARROW_CONV
 LINTTAGS	+= -erroff=E_SUSPICIOUS_COMPARISON
+# Due to zfs_ioctl.h inlines.  gcc catches non-inline ones during compilation.
+LINTTAGS	+= -erroff=E_STATIC_UNUSED
 
 #
 #	Default build targets.
-- 
2.21.0

