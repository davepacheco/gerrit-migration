{"project":"joyent/sdc-docker","branch":"master","id":"I4df6893b5ee4ad6a60cbf5e9c4f354f315d39891","number":"2184","subject":"DOCKER-1056 support `docker network inspect` Reviewed by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e Approved by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e","owner":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"url":"https://cr.joyent.us/2184","commitMessage":"DOCKER-1056 support `docker network inspect`\nReviewed by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e\nApproved by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e\n","createdOn":1499207398,"lastUpdated":1500580534,"open":false,"status":"MERGED","comments":[{"timestamp":1499207398,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 1."},{"timestamp":1499207399,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 84e9a08b2faf75cf65a6b3e0015b47af7e9b1df7\n    \n    add the `docker network inspect` code and tests\n    \n    commit 8250c6a51426e75bfc05887c9bfc260c69de471a\n    \n    DOCKER-1056 support `docker network inspect`"},{"timestamp":1499207429,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1499207600,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\nNote that a big part of the code changes involves moving the network lookup function into networks.findNetworkByNameOrId (previously containers.namedNetwork)."},{"timestamp":1500423876,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1500511306,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 2."},{"timestamp":1500511307,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 5e803cd695b17e09e016ba7aaebe8e65e7830a31\n    \n    update HostConfig.NetworkMode checks"},{"timestamp":1500511310,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1500511368,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1500573913,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1500573990,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1500580314,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 3: Patch Set 2 was rebased"},{"timestamp":1500580334,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 4."},{"timestamp":1500580353,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 5: Patch Set 4 was rebased"},{"timestamp":1500580360,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Todd Whiteman"},{"timestamp":1500580383,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3:\n\n\"make check\" passed ok"},{"timestamp":1500580391,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4:\n\n\"make check\" passed ok"},{"timestamp":1500580534,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5:\n\n\"make check\" passed ok"}],"currentPatchSet":{"number":"5","revision":"bf38a7f08889ec11d5fc87ef660f0163bd6bc593","parents":["d75efa79ca8f887db9b3b38324494db2d6d1248f"],"ref":"refs/changes/84/2184/5","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1500580353,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500511368,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1500573913,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1500573990,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1500580360,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":23,"deletions":-173},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":185,"deletions":0},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":37,"deletions":-7},{"file":"test/integration/api-network.test.js","type":"MODIFIED","insertions":15,"deletions":0}],"sizeInsertions":262,"sizeDeletions":-180},"patchSets":[{"number":"1","revision":"43e908f172a2f91266fe300fa61db9ac4f882833","parents":["edb2de0e0d5cbe79b5d78340e39527a3ed8b35ee"],"ref":"refs/changes/84/2184/1","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1499207398,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1499207429,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/backends/sdc/containers.js","line":586,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Should the string length check be added to assertNetworkMode() in lib/validate.js?"},{"file":"lib/backends/sdc/containers.js","line":586,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"After re-reviewing, I don\u0027t think we want an assert here (the validation does this already), and I think that HostConfig.NetworkMode can actually be undefined."},{"file":"lib/backends/sdc/containers.js","line":590,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I guess this is supposed to be true when networkMode is the empty string, null, or undefined? Could we replace this with a check for null or undefined instead? objEmpty() makes me think that NetworkMode could be an object sometimes, which isn\u0027t true."},{"file":"lib/backends/sdc/containers.js","line":590,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Yes, it should just be a falsey check, objEmpty is not the right thing."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":28,"deletions":-173},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":185,"deletions":0},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":37,"deletions":-7},{"file":"test/integration/api-network.test.js","type":"MODIFIED","insertions":15,"deletions":0}],"sizeInsertions":267,"sizeDeletions":-180},{"number":"2","revision":"31f167993aa829e1961d72d257ee723e5308241a","parents":["edb2de0e0d5cbe79b5d78340e39527a3ed8b35ee"],"ref":"refs/changes/84/2184/2","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1500511306,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1500573913,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1500573990,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500511368,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":23,"deletions":-173},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":185,"deletions":0},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":37,"deletions":-7},{"file":"test/integration/api-network.test.js","type":"MODIFIED","insertions":15,"deletions":0}],"sizeInsertions":262,"sizeDeletions":-180},{"number":"3","revision":"4c04a419a002493de7ca1faaf92eb1a1a08ef231","parents":["d75efa79ca8f887db9b3b38324494db2d6d1248f"],"ref":"refs/changes/84/2184/3","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1500580314,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1500573913,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1500573990,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500511368,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":23,"deletions":-173},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":185,"deletions":0},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":37,"deletions":-7},{"file":"test/integration/api-network.test.js","type":"MODIFIED","insertions":15,"deletions":0}],"sizeInsertions":262,"sizeDeletions":-180},{"number":"4","revision":"4df6893b5ee4ad6a60cbf5e9c4f354f315d39891","parents":["edb2de0e0d5cbe79b5d78340e39527a3ed8b35ee"],"ref":"refs/changes/84/2184/4","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1500580334,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1500573913,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1500573990,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500511368,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":23,"deletions":-173},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":185,"deletions":0},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":37,"deletions":-7},{"file":"test/integration/api-network.test.js","type":"MODIFIED","insertions":15,"deletions":0}],"sizeInsertions":262,"sizeDeletions":-180},{"number":"5","revision":"bf38a7f08889ec11d5fc87ef660f0163bd6bc593","parents":["d75efa79ca8f887db9b3b38324494db2d6d1248f"],"ref":"refs/changes/84/2184/5","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1500580353,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1500573913,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1500573990,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500511368,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1500580360,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":23,"deletions":-173},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":185,"deletions":0},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":37,"deletions":-7},{"file":"test/integration/api-network.test.js","type":"MODIFIED","insertions":15,"deletions":0}],"sizeInsertions":262,"sizeDeletions":-180}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}]}