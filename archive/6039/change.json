{"project":"joyent/triton-origin-image","branch":"master","id":"I982b0cece9997133b79acc117c9837f6a3f00d2d","number":"6039","subject":"TRITON-1277 triton-origin-images could probably just use engbuild TRITON-1159 add new triton-origin-minimal-64-18.4.0 image Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"url":"https://cr.joyent.us/6039","commitMessage":"TRITON-1277 triton-origin-images could probably just use engbuild\nTRITON-1159 add new triton-origin-minimal-64-18.4.0 image\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1554212871,"lastUpdated":1554921083,"open":false,"status":"MERGED","comments":[{"timestamp":1554212871,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Uploaded patch set 1."},{"timestamp":1554212876,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n fatal: No tags can describe \u0027a5ddf54e727421e99b3c2ebd900697dcf340b3b6\u0027.\n Try --always, or create some tags.\n version is: 1.1.0\n [[ `cat package.json | json version` \u003d\u003d `grep \u0027^## \u0027 CHANGES.md | head -2 | tail -1 | awk \u0027{print $2}\u0027` ]]\n Makefile:39: recipe for target \u0027check-version\u0027 failed\n gmake: *** [check-version] Error 1"},{"timestamp":1554213108,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Uploaded patch set 2."},{"timestamp":1554213113,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n fatal: No tags can describe \u0027b9b130142d553c8d0b948f2bf468e847fcd40706\u0027.\n Try --always, or create some tags.\n version is: 1.1.0\n [[ `cat package.json | json version` \u003d\u003d `grep \u0027^## \u0027 CHANGES.md | head -2 | tail -1 | awk \u0027{print $2}\u0027` ]]\n Makefile:39: recipe for target \u0027check-version\u0027 failed\n gmake: *** [check-version] Error 1"},{"timestamp":1554213413,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Patch Set 1:\n\nThis is not quiet done, but I think it is ready for any early feedback.  Have I twisted engbld in an unholy way?\n\nWhile I converted all of the old images, I don\u0027t intend to \"release\" revisions of them.\n\nStill outstanding:\n * Almost all the dos\n  * I\u0027m unsure what to do about the version string.  In the RFD I had the clever idea of using the tiemstamp as the z in x.y.z.  However, because z contains \"T\" and \"Z\" it isn\u0027t a number and renders the string invalid semver."},{"timestamp":1554232815,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(8 comments)"},{"timestamp":1554391259,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Uploaded patch set 3."},{"timestamp":1554391264,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554391362,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Patch Set 2:\n\nI think this covers feedback so far. No one has objected that this is a wicked use of engbld, so I\u0027ll get up a diff that includes the README later today."},{"timestamp":1554391424,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1554391428,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4:\n\n\"make check\" passed ok"},{"timestamp":1554393223,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 4:\n\n(2 comments)\n\nJust a few Makefile stunts here, otherwise looks great."},{"timestamp":1554397295,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1554399949,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Uploaded patch set 5."},{"timestamp":1554399954,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554399995,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Patch Set 5:\n\nDocs up; ready to review \"for real\"."},{"timestamp":1554737344,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 5:\n\n(5 comments)"},{"timestamp":1554742710,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Uploaded patch set 6."},{"timestamp":1554742715,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554746363,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Uploaded patch set 7."},{"timestamp":1554746368,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554747221,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 7: Code-Review+1 Integration-Approval+1\n\n(1 comment)"},{"timestamp":1554919964,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Uploaded patch set 8: Commit message was updated."},{"timestamp":1554921083,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Chris Burroughs"}],"currentPatchSet":{"number":"8","revision":"982b0cece9997133b79acc117c9837f6a3f00d2d","parents":["948225708813042e6b00cc87c8bc577347009751"],"ref":"refs/changes/39/6039/8","uploader":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"createdOn":1554919964,"author":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554746368,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554747221,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554747221,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1554921083,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":44,"deletions":-51},{"file":"Makefile.origin.defs","type":"ADDED","insertions":34,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":59,"deletions":-152},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"empty.tar.gz","type":"ADDED","insertions":0,"deletions":0},{"file":"images.json","type":"DELETED","insertions":0,"deletions":-36},{"file":"images/triton-origin-multiarch-15.4.1/Makefile","type":"ADDED","insertions":22,"deletions":0},{"file":"images/triton-origin-multiarch-18.1.0/Makefile","type":"ADDED","insertions":22,"deletions":0},{"file":"images/triton-origin-x86_64-18.4.0/Makefile","type":"ADDED","insertions":24,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"tools/build-image.sh","type":"DELETED","insertions":0,"deletions":-227},{"file":"tools/build-images.sh","type":"DELETED","insertions":0,"deletions":-100},{"file":"tools/publish-images.sh","type":"DELETED","insertions":0,"deletions":-144}],"sizeInsertions":219,"sizeDeletions":-715},"patchSets":[{"number":"1","revision":"a5ddf54e727421e99b3c2ebd900697dcf340b3b6","parents":["6a909569b9427841facabe7d81e8ed3925932ef3"],"ref":"refs/changes/39/6039/1","uploader":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"createdOn":1554212871,"author":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1554212876,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":26,"deletions":-50},{"file":"Makefile.origin.defs","type":"ADDED","insertions":35,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":2,"deletions":0},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"empty.tar.gz","type":"ADDED","insertions":0,"deletions":0},{"file":"images.json","type":"MODIFIED","insertions":17,"deletions":0},{"file":"images/triton-origin-multiarch-15.4.1/Makefile","type":"ADDED","insertions":23,"deletions":0},{"file":"images/triton-origin-multiarch-18.1.0/Makefile","type":"ADDED","insertions":22,"deletions":0},{"file":"images/triton-origin-x86_64-18.4.0/Makefile","type":"ADDED","insertions":24,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tools/build-image.sh","type":"DELETED","insertions":0,"deletions":-227},{"file":"tools/build-images.sh","type":"DELETED","insertions":0,"deletions":-100},{"file":"tools/publish-images.sh","type":"DELETED","insertions":0,"deletions":-144}],"sizeInsertions":156,"sizeDeletions":-522},{"number":"2","revision":"b9b130142d553c8d0b948f2bf468e847fcd40706","parents":["6a909569b9427841facabe7d81e8ed3925932ef3"],"ref":"refs/changes/39/6039/2","uploader":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"createdOn":1554213108,"author":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1554213113,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"Makefile","line":34,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Drop this. We get a `@echo \"check ok\"` from eng.git Makefiles now."},{"file":"Makefile.origin.defs","line":19,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"A comment for this line explaining why buildimage requires this fake-out, please."},{"file":"README.md","line":116,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Escape the underscore please. Vi\u0027s Markdown syntax highlighting at least doesn\u0027t cope well."},{"file":"README.md","line":138,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Ditto."},{"file":"README.md","line":188,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Will need to update these and surrounding instructions for the  new Makefile targets."},{"file":"README.md","line":207,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Ditto."},{"file":"package.json","line":4,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"A CHANGES.md section for this version will make \u0027make check\u0027 happy."},{"file":"package.json","line":12,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"how many of these can be dropped now? all of them?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":26,"deletions":-50},{"file":"Makefile.origin.defs","type":"ADDED","insertions":32,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":2,"deletions":0},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"empty.tar.gz","type":"ADDED","insertions":0,"deletions":0},{"file":"images.json","type":"DELETED","insertions":0,"deletions":-36},{"file":"images/triton-origin-multiarch-15.4.1/Makefile","type":"ADDED","insertions":22,"deletions":0},{"file":"images/triton-origin-multiarch-18.1.0/Makefile","type":"ADDED","insertions":22,"deletions":0},{"file":"images/triton-origin-x86_64-18.4.0/Makefile","type":"ADDED","insertions":24,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tools/build-image.sh","type":"DELETED","insertions":0,"deletions":-227},{"file":"tools/build-images.sh","type":"DELETED","insertions":0,"deletions":-100},{"file":"tools/publish-images.sh","type":"DELETED","insertions":0,"deletions":-144}],"sizeInsertions":135,"sizeDeletions":-558},{"number":"3","revision":"80db567e2b1e8c69309e2dbf4b9e9b69044a8912","parents":["6a909569b9427841facabe7d81e8ed3925932ef3"],"ref":"refs/changes/39/6039/3","uploader":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"createdOn":1554391259,"author":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554391264,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":44,"deletions":-51},{"file":"Makefile.origin.defs","type":"ADDED","insertions":33,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":2,"deletions":0},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"empty.tar.gz","type":"ADDED","insertions":0,"deletions":0},{"file":"images.json","type":"DELETED","insertions":0,"deletions":-36},{"file":"images/triton-origin-multiarch-15.4.1/Makefile","type":"ADDED","insertions":22,"deletions":0},{"file":"images/triton-origin-multiarch-18.1.0/Makefile","type":"ADDED","insertions":22,"deletions":0},{"file":"images/triton-origin-x86_64-18.4.0/Makefile","type":"ADDED","insertions":24,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"tools/build-image.sh","type":"DELETED","insertions":0,"deletions":-227},{"file":"tools/build-images.sh","type":"DELETED","insertions":0,"deletions":-100},{"file":"tools/publish-images.sh","type":"DELETED","insertions":0,"deletions":-144}],"sizeInsertions":161,"sizeDeletions":-563},{"number":"4","revision":"979dc86836ca3b1fda98faa55ac0ee827570dccf","parents":["948225708813042e6b00cc87c8bc577347009751"],"ref":"refs/changes/39/6039/4","uploader":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"createdOn":1554391424,"author":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554391264,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"Makefile","line":58,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"We could simplify here with a single rule that builds a bunch of parameterized targets. eg.\n\n$ cat Makefile\nTARGS\u003dfoo% baz%\n\n$(TARGS):\n        echo $*\n        echo cheese $@ strings\n$ make foobar bazboop\necho bar\nbar\necho cheese foobar strings\ncheese foobar strings\necho boop\nboop\necho cheese bazboop strings\ncheese bazboop strings\n$"},{"file":"Makefile","line":58,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"I tried\nIMAGE_TARGETS\u003dtriton-origin-multiarch-15.4.1-% triton-origin-multiarch-18.1.0-% \\\n\ttriton-origin-x86_64-18.4.0-%\n$(IMAGE_TARGETS):\n\t@echo \u0027$*\u0027\n\tcd images/$@ \u0026\u0026 $(MAKE) $*\n\nBut that fails with:\n# make triton-origin-x86_64-18.4.0-buildimage\nbuildimage\ncd images/triton-origin-x86_64-18.4.0-buildimage \u0026\u0026 make buildimage\n/bin/sh[1]: cd: images/triton-origin-x86_64-18.4.0-buildimage: [No such file or directory]\nMakefile:62: recipe for target \u0027triton-origin-x86_64-18.4.0-buildimage\u0027 failed\nmake: *** [triton-origin-x86_64-18.4.0-buildimage] Error 1\n\nI think I\u0027d rather leave it the dumber repetitive way. I\u0027m not going to remember how  the fancy punctuation characters work together if a few months pass before I look at this again."},{"file":"Makefile","line":74,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"I can\u0027t come up with anything clever for this, other than a shell \u0027for\u0027 loop that iterates over $TARGS or whatever you call the variable with the list of names (and even then, I\u0027m not sure that\u0027ll work when TARGS is used outside of a target name)"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":44,"deletions":-51},{"file":"Makefile.origin.defs","type":"ADDED","insertions":33,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":2,"deletions":0},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"empty.tar.gz","type":"ADDED","insertions":0,"deletions":0},{"file":"images.json","type":"DELETED","insertions":0,"deletions":-36},{"file":"images/triton-origin-multiarch-15.4.1/Makefile","type":"ADDED","insertions":22,"deletions":0},{"file":"images/triton-origin-multiarch-18.1.0/Makefile","type":"ADDED","insertions":22,"deletions":0},{"file":"images/triton-origin-x86_64-18.4.0/Makefile","type":"ADDED","insertions":24,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"tools/build-image.sh","type":"DELETED","insertions":0,"deletions":-227},{"file":"tools/build-images.sh","type":"DELETED","insertions":0,"deletions":-100},{"file":"tools/publish-images.sh","type":"DELETED","insertions":0,"deletions":-144}],"sizeInsertions":161,"sizeDeletions":-563},{"number":"5","revision":"61f720e3db2834163eb9e1d2de1ee02131bc0f25","parents":["948225708813042e6b00cc87c8bc577347009751"],"ref":"refs/changes/39/6039/5","uploader":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"createdOn":1554399949,"author":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554399954,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"Makefile.origin.defs","line":9,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Could we have a block-comment here explaining where these definitions are used? (the ./images/*/Makefiles)"},{"file":"README.md","line":23,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"They *are* actually intended to go to images.joyent.com as well:\n\n```\n$ joyent-imgadm list name\u003d~origin\nUUID                                  NAME                            VERSION  FLAGS  OS       PUBLISHED\n04a48d7d-6bb5-4e83-8c3b-e60a99e0f48f  triton-origin-multiarch-15.4.1  1.0.1    IP     smartos  2017-05-09T22:06:48Z\nb6ea7cb4-6b90-48c0-99e7-1d34c2895248  triton-origin-multiarch-18.1.0  1.0.1    IP     smartos  2018-05-21T18:28:19Z\n```\n\nThe reasoning is/was that this is where (a) open source users can get these images so they can build Triton/Manta components themselves and (b) so operators of JPC can get those images to make them available for JPC users to be able to build Triton/Manta components.\n\n... However, I think that picture has all changed with engbld.\n\nWe discussed on ~manta-backplane and think publishing joyent-retro is more valuable/correct at this point. Tim opened TRITON-1376 to followup."},{"file":"README.md","line":54,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"apostrophe, or just \u0027component `Makefile` would be fine"},{"file":"README.md","line":101,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"typo here I think?"},{"file":"README.md","line":197,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"do we mean \u0027refer\u0027 here or maybe just clarify as \u0027Official builds are done using the \"triton-origin-image\" Jenkins jobs.\""},{"file":"README.md","line":233,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"could we point at the jira ticket that explains how to update pkgsrc packages at build-time (in case component builders absolutely have to get security fixes in advance of an official origin image build)"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":44,"deletions":-51},{"file":"Makefile.origin.defs","type":"ADDED","insertions":33,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":52,"deletions":-152},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"empty.tar.gz","type":"ADDED","insertions":0,"deletions":0},{"file":"images.json","type":"DELETED","insertions":0,"deletions":-36},{"file":"images/triton-origin-multiarch-15.4.1/Makefile","type":"ADDED","insertions":22,"deletions":0},{"file":"images/triton-origin-multiarch-18.1.0/Makefile","type":"ADDED","insertions":22,"deletions":0},{"file":"images/triton-origin-x86_64-18.4.0/Makefile","type":"ADDED","insertions":24,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"tools/build-image.sh","type":"DELETED","insertions":0,"deletions":-227},{"file":"tools/build-images.sh","type":"DELETED","insertions":0,"deletions":-100},{"file":"tools/publish-images.sh","type":"DELETED","insertions":0,"deletions":-144}],"sizeInsertions":211,"sizeDeletions":-715},{"number":"6","revision":"b8dc22639040ec2b9ce46afc18722d5eed301090","parents":["948225708813042e6b00cc87c8bc577347009751"],"ref":"refs/changes/39/6039/6","uploader":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"createdOn":1554742710,"author":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554742715,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":44,"deletions":-51},{"file":"Makefile.origin.defs","type":"ADDED","insertions":34,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":52,"deletions":-152},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"empty.tar.gz","type":"ADDED","insertions":0,"deletions":0},{"file":"images.json","type":"DELETED","insertions":0,"deletions":-36},{"file":"images/triton-origin-multiarch-15.4.1/Makefile","type":"ADDED","insertions":22,"deletions":0},{"file":"images/triton-origin-multiarch-18.1.0/Makefile","type":"ADDED","insertions":22,"deletions":0},{"file":"images/triton-origin-x86_64-18.4.0/Makefile","type":"ADDED","insertions":24,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"tools/build-image.sh","type":"DELETED","insertions":0,"deletions":-227},{"file":"tools/build-images.sh","type":"DELETED","insertions":0,"deletions":-100},{"file":"tools/publish-images.sh","type":"DELETED","insertions":0,"deletions":-144}],"sizeInsertions":212,"sizeDeletions":-715},{"number":"7","revision":"91dea28fa18dd60dca971c71e73485a49abb8a99","parents":["948225708813042e6b00cc87c8bc577347009751"],"ref":"refs/changes/39/6039/7","uploader":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"createdOn":1554746363,"author":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554746368,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554747221,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554747221,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":44,"deletions":-51},{"file":"Makefile.origin.defs","type":"ADDED","insertions":34,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":59,"deletions":-152},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"empty.tar.gz","type":"ADDED","insertions":0,"deletions":0},{"file":"images.json","type":"DELETED","insertions":0,"deletions":-36},{"file":"images/triton-origin-multiarch-15.4.1/Makefile","type":"ADDED","insertions":22,"deletions":0},{"file":"images/triton-origin-multiarch-18.1.0/Makefile","type":"ADDED","insertions":22,"deletions":0},{"file":"images/triton-origin-x86_64-18.4.0/Makefile","type":"ADDED","insertions":24,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"tools/build-image.sh","type":"DELETED","insertions":0,"deletions":-227},{"file":"tools/build-images.sh","type":"DELETED","insertions":0,"deletions":-100},{"file":"tools/publish-images.sh","type":"DELETED","insertions":0,"deletions":-144}],"sizeInsertions":219,"sizeDeletions":-715},{"number":"8","revision":"982b0cece9997133b79acc117c9837f6a3f00d2d","parents":["948225708813042e6b00cc87c8bc577347009751"],"ref":"refs/changes/39/6039/8","uploader":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"createdOn":1554919964,"author":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554746368,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554747221,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554747221,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1554921083,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":44,"deletions":-51},{"file":"Makefile.origin.defs","type":"ADDED","insertions":34,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":59,"deletions":-152},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"empty.tar.gz","type":"ADDED","insertions":0,"deletions":0},{"file":"images.json","type":"DELETED","insertions":0,"deletions":-36},{"file":"images/triton-origin-multiarch-15.4.1/Makefile","type":"ADDED","insertions":22,"deletions":0},{"file":"images/triton-origin-multiarch-18.1.0/Makefile","type":"ADDED","insertions":22,"deletions":0},{"file":"images/triton-origin-x86_64-18.4.0/Makefile","type":"ADDED","insertions":24,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"tools/build-image.sh","type":"DELETED","insertions":0,"deletions":-227},{"file":"tools/build-images.sh","type":"DELETED","insertions":0,"deletions":-100},{"file":"tools/publish-images.sh","type":"DELETED","insertions":0,"deletions":-144}],"sizeInsertions":219,"sizeDeletions":-715}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}]}