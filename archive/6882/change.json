{"project":"joyent/illumos-joyent","branch":"master","id":"I84f458b3cf7fa5c8b19bba6ff3611e85a843aac3","number":"6882","subject":"OS-7935 infinite loop in mdb ::load Reviewed by: John Levon \u003cjohn.levon@joyent.com\u003e Approved by: John Levon \u003cjohn.levon@joyent.com\u003e","owner":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"},"url":"https://cr.joyent.us/6882","commitMessage":"OS-7935 infinite loop in mdb ::load\nReviewed by: John Levon \u003cjohn.levon@joyent.com\u003e\nApproved by: John Levon \u003cjohn.levon@joyent.com\u003e\n","createdOn":1568138726,"lastUpdated":1572956273,"open":false,"status":"MERGED","comments":[{"timestamp":1568138726,"reviewer":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"},"message":"Uploaded patch set 1."},{"timestamp":1568139862,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1568229018,"reviewer":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"},"message":"Uploaded patch set 2."},{"timestamp":1568231307,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1572709106,"reviewer":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"},"message":"Uploaded patch set 3."},{"timestamp":1572709361,"reviewer":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"},"message":"Patch Set 3:\n\n(1 comment)\n\n\u003e Uploaded patch set 3.\n\n \u003e Uploaded patch set 3.\n\nThe strstr() code did not work for all cases. Latest version has been re-tested and works as expected."},{"timestamp":1572860915,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3:\n\nCan you give further details on what didn\u0027t work please?"},{"timestamp":1572878712,"reviewer":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"},"message":"Patch Set 3:\n\n\u003e Can you give further details on what didn\u0027t work please?\n\nIt worked for .so.[0-9]+ - not .so(.[0-9]+)?"},{"timestamp":1572882515,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1572954103,"reviewer":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1572956258,"reviewer":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"},"message":"Patch Set 5: Patch Set 4 was rebased"},{"timestamp":1572956273,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Mark Brooks"}],"currentPatchSet":{"number":"5","revision":"e77e89c1413d1b43560c28ccc3aaeb3aa8f2fbe5","parents":["e5f16aa846188e1940efcda89b77269a6fb3159b"],"ref":"refs/changes/82/6882/5","uploader":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"},"createdOn":1572956258,"author":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1572882515,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1572882515,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"SUBM","value":"1","grantedOn":1572956273,"by":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/mdb/common/mdb/mdb_module_load.c","type":"MODIFIED","insertions":11,"deletions":-10}],"sizeInsertions":11,"sizeDeletions":-10},"patchSets":[{"number":"1","revision":"ad6a922ce8a03153e991d91aaa7ed08c7b805c95","parents":["4e7ed5ff5aed7830c00a00fde7205951f49b4f05"],"ref":"refs/changes/82/6882/1","uploader":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"},"createdOn":1568138726,"author":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/cmd/mdb/common/mdb/mdb_module_load.c","line":63,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"thanks for fixing this, but I think this can be simplified further by:\n\n  if (p \u003d strstr(buf, \".so.\") !\u003d NULL) {\n      q \u003d p + strlen(\".so.\");\n\n      while (isdigit(*q))\n           q++;\n\n      if (*q \u003d\u003d \u0027\\0\u0027)\n          *p \u003d \u0027\\0\u0027;\n  }\n\nWhat do you think?"},{"file":"usr/src/cmd/mdb/common/mdb/mdb_module_load.c","line":63,"reviewer":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/common/mdb/mdb_module_load.c","type":"MODIFIED","insertions":12,"deletions":-10}],"sizeInsertions":12,"sizeDeletions":-10},{"number":"2","revision":"67b561a4c7d400d8fcfd83c2351718397d417e85","parents":["4e7ed5ff5aed7830c00a00fde7205951f49b4f05"],"ref":"refs/changes/82/6882/2","uploader":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"},"createdOn":1568229018,"author":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/cmd/mdb/common/mdb/mdb_module_load.c","line":25,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"nit, this isn\u0027t the current form required for copyright notices (git pbchk)"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/common/mdb/mdb_module_load.c","type":"MODIFIED","insertions":7,"deletions":-14}],"sizeInsertions":7,"sizeDeletions":-14},{"number":"3","revision":"a7200c9f3a0aa7c8dab9ddfc3a6998348a5a1412","parents":["4e7ed5ff5aed7830c00a00fde7205951f49b4f05"],"ref":"refs/changes/82/6882/3","uploader":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"},"createdOn":1572709106,"author":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1572882515,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1572882515,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/common/mdb/mdb_module_load.c","type":"MODIFIED","insertions":11,"deletions":-10}],"sizeInsertions":11,"sizeDeletions":-10},{"number":"4","revision":"84f458b3cf7fa5c8b19bba6ff3611e85a843aac3","parents":["4e7ed5ff5aed7830c00a00fde7205951f49b4f05"],"ref":"refs/changes/82/6882/4","uploader":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"},"createdOn":1572954103,"author":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1572882515,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1572882515,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/mdb/common/mdb/mdb_module_load.c","type":"MODIFIED","insertions":11,"deletions":-10}],"sizeInsertions":11,"sizeDeletions":-10},{"number":"5","revision":"e77e89c1413d1b43560c28ccc3aaeb3aa8f2fbe5","parents":["e5f16aa846188e1940efcda89b77269a6fb3159b"],"ref":"refs/changes/82/6882/5","uploader":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"},"createdOn":1572956258,"author":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"SUBM","value":"1","grantedOn":1572956273,"by":{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1572882515,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1572882515,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/mdb/common/mdb/mdb_module_load.c","type":"MODIFIED","insertions":11,"deletions":-10}],"sizeInsertions":11,"sizeDeletions":-10}],"allReviewers":[{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},{"name":"Mark Brooks","email":"mark.brooks@joyent.com","username":"markebrooks"}]}