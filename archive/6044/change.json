{"project":"joyent/node-triton","branch":"master","id":"I23a1adeff089239ae064c74a70911adf86fa0710","number":"6044","subject":"TRITON-899 Add node-triton support for instance migration Reviewed by: Todd Whiteman \u003ctodd.whiteman@joyent.com\u003e Approved by: Todd Whiteman \u003ctodd.whiteman@joyent.com\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/6044","commitMessage":"TRITON-899 Add node-triton support for instance migration\nReviewed by: Todd Whiteman \u003ctodd.whiteman@joyent.com\u003e\nApproved by: Todd Whiteman \u003ctodd.whiteman@joyent.com\u003e\n","createdOn":1554389944,"lastUpdated":1561484286,"open":false,"status":"MERGED","comments":[{"timestamp":1554389944,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1554389949,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit eb985704fb0b66f01cf3997c11cc9f8edb8699e8\n    \n    TRITON-899 Add node-triton support for triton instance migration"},{"timestamp":1554389981,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554390228,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2."},{"timestamp":1554390232,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit eb11d4035870195c38aff5c54a72919301818e7e\n    \n    Version bump"},{"timestamp":1554390260,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554755024,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 2:\n\n(36 comments)"},{"timestamp":1554825074,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 3."},{"timestamp":1554825079,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 158b4bcfb5855f751ff064c5f955c9ee126edf01\n    \n    Applied Marsell\u0027s suggested changes\n    \n    commit eb985704fb0b66f01cf3997c11cc9f8edb8699e8\n    \n    TRITON-899 Add node-triton support for triton instance migration"},{"timestamp":1554825107,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554827347,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 4."},{"timestamp":1554827351,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 9c0457bb42934ac82e014b3b671c0d4a728905da\n    \n    Applied Marsell\u0027s suggested changes\n    \n    commit 1300ca25cc879effa143f2f71e0f6b660cf4b2a0\n    \n    TRITON-899 Add node-triton support for triton instance migration"},{"timestamp":1554827377,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 4:\n\n(29 comments)\n\nThanks for the feedback Marsell!"},{"timestamp":1554827384,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554846036,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 4: Code-Review+1\n\n(2 comments)\n\nObligatory \"did the tests all pass\"?"},{"timestamp":1556818603,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 4:\n\n(2 comments)\n\nGeez, CR\u0027ing my own stuff and leaving notes for my future self ..."},{"timestamp":1558374346,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 5."},{"timestamp":1558374351,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit 3834e22d95ce677528f7715b446bf0f3f710a4d0\n    \n    Applied Marsell\u0027s suggested changes\n    \n    commit 6efe26483459c12f363bae52fc4b4815c0b77bb7\n    \n    TRITON-899 Add node-triton support for triton instance migration"},{"timestamp":1558374379,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1559835439,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 6."},{"timestamp":1559835444,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit ff7f49a64001bd6e25a98fcb884cf573a7569041\n    \n    TRITON-899 Add node-triton support for triton instance migration"},{"timestamp":1559835485,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1559842836,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 7."},{"timestamp":1559842840,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 7:\n\nNew commits:\n    \n    commit 6587c4ceb8364ac2fd4e93b96279530a7ecf9ed2\n    \n    TRITON-899 Add node-triton support for triton instance migration"},{"timestamp":1559842882,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1560189951,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 7:\n\n(13 comments)"},{"timestamp":1560454528,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 8."},{"timestamp":1560454532,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 8:\n\nNew commits:\n    \n    commit 2bdacf5d70e80bd90e66f7d3480070525c1ec3a6\n    \n    TRITON-899 Add node-triton support for triton instance migration"},{"timestamp":1560454578,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1560454618,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 7:\n\n(13 comments)\n\nTodd, mind to take another pass before I bug Trent?. Some notes left into the JIRA Issue regarding testing."},{"timestamp":1560830419,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 8:\n\n(2 comments)"},{"timestamp":1560845615,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 9: Patch Set 8 was rebased."},{"timestamp":1560845620,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 9:\n\nNew commits:\n    \n    commit 8b2b166a063dd0fd0b7d78400d853846dfffaf2c\n    \n    TRITON-899 Add node-triton support for triton instance migration"},{"timestamp":1560845660,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9:\n\n\"make check\" passed ok"},{"timestamp":1561481651,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 10."},{"timestamp":1561481656,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 10:\n\nNew commits:\n    \n    commit e9153b9f33e4633ee8c87f8bb3449cd07c2e5261\n    \n    TRITON-899 Add node-triton support for triton instance migration"},{"timestamp":1561481694,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1561482712,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 10:\n\n(2 comments)"},{"timestamp":1561483533,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 11."},{"timestamp":1561483538,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 11:\n\nNew commits:\n    \n    commit 8609cebc300d54d5dc42a2fb5bbdeb5d638e45b1\n    \n    TRITON-899 Add node-triton support for triton instance migration"},{"timestamp":1561483578,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1561484005,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 12."},{"timestamp":1561484009,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 12:\n\nNew commits:\n    \n    commit 92f2899348056d32457148330d33de164dd8978a\n    \n    TRITON-899 Add node-triton support for triton instance migration"},{"timestamp":1561484045,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 12: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1561484136,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 12: Code-Review+1 Integration-Approval+1"},{"timestamp":1561484273,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 13: Commit message was updated."},{"timestamp":1561484286,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"13","revision":"23a1adeff089239ae064c74a70911adf86fa0710","parents":["803775fb4dd21a231421ed5215ebf6e962ca00d1"],"ref":"refs/changes/44/6044/13","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1561484273,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1561484045,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1561484136,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1561484136,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}},{"type":"SUBM","value":"1","grantedOn":1561484286,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":93,"deletions":0},{"file":"lib/do_instance/do_migration/do_abort.js","type":"ADDED","insertions":112,"deletions":0},{"file":"lib/do_instance/do_migration/do_automatic.js","type":"ADDED","insertions":140,"deletions":0},{"file":"lib/do_instance/do_migration/do_begin.js","type":"ADDED","insertions":139,"deletions":0},{"file":"lib/do_instance/do_migration/do_get.js","type":"ADDED","insertions":157,"deletions":0},{"file":"lib/do_instance/do_migration/do_list.js","type":"ADDED","insertions":115,"deletions":0},{"file":"lib/do_instance/do_migration/do_pause.js","type":"ADDED","insertions":111,"deletions":0},{"file":"lib/do_instance/do_migration/do_switch.js","type":"ADDED","insertions":120,"deletions":0},{"file":"lib/do_instance/do_migration/do_sync.js","type":"ADDED","insertions":126,"deletions":0},{"file":"lib/do_instance/do_migration/index.js","type":"ADDED","insertions":53,"deletions":0},{"file":"lib/do_instance/do_migration/watcher.js","type":"ADDED","insertions":254,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":88,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/cli-migrations.test.js","type":"ADDED","insertions":267,"deletions":0},{"file":"test/integration/cli-subcommands.test.js","type":"MODIFIED","insertions":8,"deletions":0}],"sizeInsertions":1793,"sizeDeletions":-3},"patchSets":[{"number":"1","revision":"021caf1b6c999aba57738b045f935b84a36a5137","parents":["aa1b7ff5bc8403eb64367e1cb112e8efe559ed61"],"ref":"refs/changes/44/6044/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1554389944,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554389981,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":118,"deletions":-13},{"file":"lib/do_instance/do_migration/do_abort.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/do_instance/do_migration/do_automatic.js","type":"ADDED","insertions":140,"deletions":0},{"file":"lib/do_instance/do_migration/do_begin.js","type":"ADDED","insertions":139,"deletions":0},{"file":"lib/do_instance/do_migration/do_estimate.js","type":"ADDED","insertions":95,"deletions":0},{"file":"lib/do_instance/do_migration/do_get.js","type":"ADDED","insertions":157,"deletions":0},{"file":"lib/do_instance/do_migration/do_list.js","type":"ADDED","insertions":111,"deletions":0},{"file":"lib/do_instance/do_migration/do_pause.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/do_instance/do_migration/do_switch.js","type":"ADDED","insertions":120,"deletions":0},{"file":"lib/do_instance/do_migration/do_sync.js","type":"ADDED","insertions":125,"deletions":0},{"file":"lib/do_instance/do_migration/index.js","type":"ADDED","insertions":69,"deletions":0},{"file":"lib/do_instance/do_migration/watcher.js","type":"ADDED","insertions":222,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":131,"deletions":-13},{"file":"test/integration/cli-migrations.test.js","type":"ADDED","insertions":138,"deletions":0}],"sizeInsertions":1744,"sizeDeletions":-26},{"number":"2","revision":"a47da7c5b2bb87f76c74f24c525e34fa8031fb51","parents":["aa1b7ff5bc8403eb64367e1cb112e8efe559ed61"],"ref":"refs/changes/44/6044/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1554390228,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554390260,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"CHANGES.md","line":11,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Maybe remove this."},{"file":"CHANGES.md","line":11,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"CHANGES.md","line":11,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Really? :D"},{"file":"CHANGES.md","line":11,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Then I rebased and re-added the same thing! Geeez"},{"file":"lib/cloudapi2.js","line":8,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"elide"},{"file":"lib/cloudapi2.js","line":8,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cloudapi2.js","line":1940,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Does not match `actions` array below."},{"file":"lib/cloudapi2.js","line":1940,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cloudapi2.js","line":1957,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Less code if using + instead of format(). Your call."},{"file":"lib/cloudapi2.js","line":1957,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cloudapi2.js","line":1968,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"It\u0027d be safer and more usable if we threw an error if: affinity was set, but the other conditions were not met."},{"file":"lib/cloudapi2.js","line":1968,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cloudapi2.js","line":1982,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"What kind of estimate? Time estimate?"},{"file":"lib/cloudapi2.js","line":1982,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Yeah, once it\u0027s properly implemented in VMAPI it should do. Now we could eventually comment the whole method until that happens."},{"file":"lib/cloudapi2.js","line":2020,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Different from format of other comments, although I think it\u0027s a good idea to have the link as well."},{"file":"lib/cloudapi2.js","line":2020,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/cloudapi2.js","line":2033,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Put four more spaces here?"},{"file":"lib/cloudapi2.js","line":2033,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/do_instance/do_migration/do_abort.js","line":79,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"A"},{"file":"lib/do_instance/do_migration/do_abort.js","line":79,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/do_instance/do_migration/do_get.js","line":75,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Use \\t in these logs?"},{"file":"lib/do_instance/do_migration/do_get.js","line":75,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Not really tabs. I\u0027m just using selective number of spaces here, depending on the strings length."},{"file":"lib/do_instance/do_migration/do_get.js","line":84,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"How \u0027bout:\n\n    var msg \u003d state;\n    if (state \u003d\u003d\u003d \u0027successful\u0027) {\n        msg \u003d stylize(state, \u0027green\u0027);\n    } else if (state \u003d\u003d\u003d \u0027running\u0027) {\n        msg \u003d stylize(state, \u0027bold\u0027);\n    } else if (state \u003d\u003d\u003d \u0027failed\u0027) {\n        msg \u003d stylize(state, \u0027red\u0027));\n    }\n\n    console.log(\u0027State:\\t\u0027 + msg);"},{"file":"lib/do_instance/do_migration/do_get.js","line":84,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"I\u0027m intentionally leaving one w/o any color, like sdc-migration does"},{"file":"lib/do_instance/do_migration/do_get.js","line":84,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"The code I posted above does that.\n\nThe main point is that \"console.log(\u0027State:          \" is redundant, since the only thing that changes is the last bit."},{"file":"lib/do_instance/do_migration/do_get.js","line":120,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Not familiar with this. Why this over stylize() used everywhere else?"},{"file":"lib/do_instance/do_migration/do_get.js","line":120,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"B/C I forgot to replace this one too!"},{"file":"lib/do_instance/do_migration/do_list.js","line":44,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Put a \\n after the }"},{"file":"lib/do_instance/do_migration/do_list.js","line":44,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"I gotta wonder if maybe copying here the vasync.pipeline pattern used in the other files is worth it?"},{"file":"lib/do_instance/do_migration/do_list.js","line":44,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"I don\u0027t think so ... unless we have the need to add another function. Other than that, this is just pure formatting."},{"file":"lib/do_instance/do_migration/do_list.js","line":44,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/do_instance/do_migration/do_list.js","line":54,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"You could remove this else and save a level of indentation if you put a cb/return after the common.jsonStream()."},{"file":"lib/do_instance/do_migration/do_list.js","line":54,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/do_instance/do_migration/do_list.js","line":64,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/do_instance/do_migration/do_list.js","line":64,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/do_instance/do_migration/do_list.js","line":71,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"I\u0027d move this up and group it with the if/else if conditionals handling columns above."},{"file":"lib/do_instance/do_migration/do_list.js","line":71,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Taking this path since it\u0027s the default one used across the whole project, though."},{"file":"lib/do_instance/do_migration/do_pause.js","line":79,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"\"Pauses an in-progress migration\"? Is the synchronization bit a relevant detail?"},{"file":"lib/do_instance/do_migration/do_pause.js","line":79,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Yeah, it can only pause the sync phrase, not others."},{"file":"lib/do_instance/do_migration/do_switch.js","line":63,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"I\u0027ve noticed this is a really common pattern in this diff. The only notable change between all of them is the log message.\n\nIs there a reasonable way to unify them all into a single function and reuse it?"},{"file":"lib/do_instance/do_migration/do_switch.js","line":80,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Same with this func."},{"file":"lib/do_instance/do_migration/do_switch.js","line":111,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"As someone not well acquainted to migrations, what does this mean?"},{"file":"lib/do_instance/do_migration/do_sync.js","line":116,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"To an existing migration? This sentence confuses me a bit."},{"file":"lib/do_instance/do_migration/index.js","line":21,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"it is"},{"file":"lib/do_instance/do_migration/index.js","line":21,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/do_instance/do_migration/watcher.js","line":8,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Copyright 2019 Joyent, Inc."},{"file":"lib/do_instance/do_migration/watcher.js","line":8,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/do_instance/do_migration/watcher.js","line":40,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Haha! Definitely future proof! :D"},{"file":"lib/do_instance/do_migration/watcher.js","line":40,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"That was Todd in sdc-migrate, iirc :D"},{"file":"lib/do_instance/do_migration/watcher.js","line":51,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"in"},{"file":"lib/do_instance/do_migration/watcher.js","line":52,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"because"},{"file":"lib/do_instance/do_migration/watcher.js","line":52,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/do_instance/do_migration/watcher.js","line":55,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"--\n\nSame with the other \"-\" too"},{"file":"lib/do_instance/do_migration/watcher.js","line":55,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/do_instance/do_migration/watcher.js","line":58,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"as the"},{"file":"lib/do_instance/do_migration/watcher.js","line":58,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/do_instance/do_migration/watcher.js","line":84,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Not the more typical @param listing?"},{"file":"lib/do_instance/do_migration/watcher.js","line":84,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Well, the @param is more for watchOpts. Taking that path."},{"file":"lib/do_instance/do_migration/watcher.js","line":102,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Is this needed?\n\nAlso, if you\u0027re so inclined, I think !!watchOpts.quiet is nicer than Boolean(watchOpts.quiet). Feel free to ignore."},{"file":"lib/do_instance/do_migration/watcher.js","line":102,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Feeling free to ignore on this case ;-)"},{"file":"lib/do_instance/do_migration/watcher.js","line":152,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"The if() can be removed, and the watchCb()/return put inside the catch clause."},{"file":"lib/do_instance/do_migration/watcher.js","line":152,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/do_instance/do_migration/watcher.js","line":174,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Heh. Evil!"},{"file":"lib/do_instance/do_migration/watcher.js","line":174,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Still, there is something to review here from the information coming from VMAPI. Sometimes this result into 1%, 3%, 1% :-("},{"file":"lib/tritonapi.js","line":1949,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Eh. Just use \"this\" direct?"},{"file":"lib/tritonapi.js","line":1949,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Why not?"},{"file":"lib/tritonapi.js","line":1986,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Add another \\n"},{"file":"test/integration/cli-migrations.test.js","line":8,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"You know what ta doooo."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":118,"deletions":-13},{"file":"lib/do_instance/do_migration/do_abort.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/do_instance/do_migration/do_automatic.js","type":"ADDED","insertions":140,"deletions":0},{"file":"lib/do_instance/do_migration/do_begin.js","type":"ADDED","insertions":139,"deletions":0},{"file":"lib/do_instance/do_migration/do_estimate.js","type":"ADDED","insertions":95,"deletions":0},{"file":"lib/do_instance/do_migration/do_get.js","type":"ADDED","insertions":157,"deletions":0},{"file":"lib/do_instance/do_migration/do_list.js","type":"ADDED","insertions":111,"deletions":0},{"file":"lib/do_instance/do_migration/do_pause.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/do_instance/do_migration/do_switch.js","type":"ADDED","insertions":120,"deletions":0},{"file":"lib/do_instance/do_migration/do_sync.js","type":"ADDED","insertions":125,"deletions":0},{"file":"lib/do_instance/do_migration/index.js","type":"ADDED","insertions":69,"deletions":0},{"file":"lib/do_instance/do_migration/watcher.js","type":"ADDED","insertions":222,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":131,"deletions":-13},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/cli-migrations.test.js","type":"ADDED","insertions":138,"deletions":0}],"sizeInsertions":1749,"sizeDeletions":-27},{"number":"3","revision":"52ad3922bebb2408a680e7f83a195c45ac0cc8db","parents":["aa1b7ff5bc8403eb64367e1cb112e8efe559ed61"],"ref":"refs/changes/44/6044/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1554825074,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554825107,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":125,"deletions":-13},{"file":"lib/do_instance/do_migration/do_abort.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/do_instance/do_migration/do_automatic.js","type":"ADDED","insertions":140,"deletions":0},{"file":"lib/do_instance/do_migration/do_begin.js","type":"ADDED","insertions":139,"deletions":0},{"file":"lib/do_instance/do_migration/do_estimate.js","type":"ADDED","insertions":95,"deletions":0},{"file":"lib/do_instance/do_migration/do_get.js","type":"ADDED","insertions":157,"deletions":0},{"file":"lib/do_instance/do_migration/do_list.js","type":"ADDED","insertions":115,"deletions":0},{"file":"lib/do_instance/do_migration/do_pause.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/do_instance/do_migration/do_switch.js","type":"ADDED","insertions":120,"deletions":0},{"file":"lib/do_instance/do_migration/do_sync.js","type":"ADDED","insertions":125,"deletions":0},{"file":"lib/do_instance/do_migration/index.js","type":"ADDED","insertions":69,"deletions":0},{"file":"lib/do_instance/do_migration/watcher.js","type":"ADDED","insertions":219,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":131,"deletions":-13},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/cli-migrations.test.js","type":"ADDED","insertions":138,"deletions":0}],"sizeInsertions":1757,"sizeDeletions":-27},{"number":"4","revision":"3235b6876384df09ca27c2176d19f65eba8b49ad","parents":["55e1d66964e8527fa3c210044f91a2a03faa5e29"],"ref":"refs/changes/44/6044/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1554827347,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554827384,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554846036,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"comments":[{"file":"test/integration/cli-migrations.test.js","line":60,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"This is a self reminder that I should skip these tests if INST_SHORT is not set, just to make clear that the reason for the failure is the instance creation and not the remaining crap"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":125,"deletions":-13},{"file":"lib/do_instance/do_migration/do_abort.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/do_instance/do_migration/do_automatic.js","type":"ADDED","insertions":140,"deletions":0},{"file":"lib/do_instance/do_migration/do_begin.js","type":"ADDED","insertions":139,"deletions":0},{"file":"lib/do_instance/do_migration/do_estimate.js","type":"ADDED","insertions":95,"deletions":0},{"file":"lib/do_instance/do_migration/do_get.js","type":"ADDED","insertions":157,"deletions":0},{"file":"lib/do_instance/do_migration/do_list.js","type":"ADDED","insertions":115,"deletions":0},{"file":"lib/do_instance/do_migration/do_pause.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/do_instance/do_migration/do_switch.js","type":"ADDED","insertions":120,"deletions":0},{"file":"lib/do_instance/do_migration/do_sync.js","type":"ADDED","insertions":125,"deletions":0},{"file":"lib/do_instance/do_migration/index.js","type":"ADDED","insertions":69,"deletions":0},{"file":"lib/do_instance/do_migration/watcher.js","type":"ADDED","insertions":219,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":131,"deletions":-13},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/cli-migrations.test.js","type":"ADDED","insertions":138,"deletions":0}],"sizeInsertions":1757,"sizeDeletions":-27},{"number":"5","revision":"1bfcc02c04294d49dfc0dd71f9d9d1084c788311","parents":["f48e96dcfbe8a5910c420d76b70ff1c8f6ccdc6e"],"ref":"refs/changes/44/6044/5","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1558374346,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1558374379,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":115,"deletions":0},{"file":"lib/do_instance/do_migration/do_abort.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/do_instance/do_migration/do_automatic.js","type":"ADDED","insertions":140,"deletions":0},{"file":"lib/do_instance/do_migration/do_begin.js","type":"ADDED","insertions":139,"deletions":0},{"file":"lib/do_instance/do_migration/do_estimate.js","type":"ADDED","insertions":95,"deletions":0},{"file":"lib/do_instance/do_migration/do_get.js","type":"ADDED","insertions":157,"deletions":0},{"file":"lib/do_instance/do_migration/do_list.js","type":"ADDED","insertions":115,"deletions":0},{"file":"lib/do_instance/do_migration/do_pause.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/do_instance/do_migration/do_switch.js","type":"ADDED","insertions":120,"deletions":0},{"file":"lib/do_instance/do_migration/do_sync.js","type":"ADDED","insertions":125,"deletions":0},{"file":"lib/do_instance/do_migration/index.js","type":"ADDED","insertions":69,"deletions":0},{"file":"lib/do_instance/do_migration/watcher.js","type":"ADDED","insertions":219,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":122,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/cli-migrations.test.js","type":"ADDED","insertions":138,"deletions":0}],"sizeInsertions":1740,"sizeDeletions":-3},{"number":"6","revision":"a52b0c180e181f7e7f9839cab352ba1d253b36bc","parents":["84234d7fea654f7318c51df51aa4f1487072c0e1"],"ref":"refs/changes/44/6044/6","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1559835439,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1559835485,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":115,"deletions":0},{"file":"lib/do_instance/do_migration/do_abort.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/do_instance/do_migration/do_automatic.js","type":"ADDED","insertions":140,"deletions":0},{"file":"lib/do_instance/do_migration/do_begin.js","type":"ADDED","insertions":139,"deletions":0},{"file":"lib/do_instance/do_migration/do_estimate.js","type":"ADDED","insertions":95,"deletions":0},{"file":"lib/do_instance/do_migration/do_get.js","type":"ADDED","insertions":157,"deletions":0},{"file":"lib/do_instance/do_migration/do_list.js","type":"ADDED","insertions":115,"deletions":0},{"file":"lib/do_instance/do_migration/do_pause.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/do_instance/do_migration/do_switch.js","type":"ADDED","insertions":120,"deletions":0},{"file":"lib/do_instance/do_migration/do_sync.js","type":"ADDED","insertions":125,"deletions":0},{"file":"lib/do_instance/do_migration/index.js","type":"ADDED","insertions":69,"deletions":0},{"file":"lib/do_instance/do_migration/watcher.js","type":"ADDED","insertions":219,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":122,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/cli-migrations.test.js","type":"ADDED","insertions":138,"deletions":0}],"sizeInsertions":1740,"sizeDeletions":-3},{"number":"7","revision":"dd7ebc2838723993b615b0289e69f4cb1bdfeea6","parents":["84234d7fea654f7318c51df51aa4f1487072c0e1"],"ref":"refs/changes/44/6044/7","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1559842836,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1559842882,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/cloudapi2.js","line":2018,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Either do, or do not... there is no try (in the voice of Yoda). I.e. do it, or remove it :)"},{"file":"lib/cloudapi2.js","line":2018,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/do_instance/do_migration/do_abort.js","line":63,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"It would be good to allow the wait option here, to wait until the migration is stopped/aborted (you can use the watch facilities like a begin/sync/switch command)."},{"file":"lib/do_instance/do_migration/do_abort.js","line":63,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/do_instance/do_migration/do_pause.js","line":63,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"I think pause should also have a wait option (to wait until the migration is stopped)."},{"file":"lib/do_instance/do_migration/do_pause.js","line":63,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/do_instance/do_migration/do_switch.js","line":111,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Maybe \"Switch control to the migrated instance.\" Could also add \"The original instance will be hidden and the migrated instance will take over as the visible instance.\""},{"file":"lib/do_instance/do_migration/do_switch.js","line":111,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/do_instance/do_migration/index.js","line":17,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Most of this comment is obsolete (with the exception of the estimate, which I don\u0027t think returns an ETA at this moment)."},{"file":"lib/do_instance/do_migration/index.js","line":17,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/do_instance/do_migration/watcher.js","line":52,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"may or may not be"},{"file":"lib/do_instance/do_migration/watcher.js","line":52,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/do_instance/do_migration/watcher.js","line":143,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"I not sure this will works correctly in the case of multiple lines:\n\n\u003e var chunk \u003d \u0027{\"one\": \"one\"}\\n{\"two\": \"two\"}\u0027;\n\u003e var frags \u003d JSON.parse(chunk.trim().split(\u0027\\n\u0027));\nSyntaxError: Unexpected token ,\n    at Object.parse (native)\n    at repl:1:18\n    at REPLServer.defaultEval (repl.js:272:27)\n    at bound (domain.js:287:14)\n    at REPLServer.runBound [as eval] (domain.js:300:12)\n    at REPLServer.\u003canonymous\u003e (repl.js:441:12)\n    at emitOne (events.js:82:20)\n    at REPLServer.emit (events.js:169:7)\n    at REPLServer.Interface._onLine (readline.js:203:10)\n    at REPLServer.Interface._line (readline.js:542:8)\n\nNote: I generally pipe the http response stream to a line reader, and then parse each line that way."},{"file":"lib/do_instance/do_migration/watcher.js","line":143,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Yeah, I saw the line reader. Not sure I want to add another dependency here, though."},{"file":"lib/do_instance/do_migration/watcher.js","line":169,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Not all progress events will use 0..100, for sync it is the total number of bytes. So compare current_progress to total_progress to get the percentage."},{"file":"lib/do_instance/do_migration/watcher.js","line":169,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/do_instance/do_migration/watcher.js","line":181,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Why not just set this once at the beginning? Then this check here isn\u0027t needed."},{"file":"lib/do_instance/do_migration/watcher.js","line":181,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/do_instance/do_migration/watcher.js","line":210,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Does it need an error handler? \"res.on(\u0027error\u0027, handler)\""},{"file":"lib/do_instance/do_migration/watcher.js","line":210,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Is there an \"error\" event?"},{"file":"lib/do_instance/do_migration/watcher.js","line":210,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Doesn\u0027t look like it :)"},{"file":"lib/tritonapi.js","line":1975,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Nit: try not to reference other code in comments (as it can be moved/deleted making the comment obsolete). Just use the same comment: // gross hack, in case caller needs it"},{"file":"lib/tritonapi.js","line":1975,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/integration/cli-migrations.test.js","line":74,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Can we catch the case where the instance does not allow migration (e.g. if testing in a DC, east-3b for example), and then gracefully skip the rest of the tests?"},{"file":"test/integration/cli-migrations.test.js","line":74,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/integration/cli-migrations.test.js","line":80,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"It might be worth throwing in a watch command on these, or use a separate \"begin, watch, abort\" test, as the \"watch\" part is an important component."},{"file":"test/integration/cli-migrations.test.js","line":80,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Note that the \"watch\" part is being tested as part of every action, though. There\u0027s no separate \"do_watch\" action, but the option to watch after each command run. Added another test case with a begin and an abort commands run."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":94,"deletions":0},{"file":"lib/do_instance/do_migration/do_abort.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/do_instance/do_migration/do_automatic.js","type":"ADDED","insertions":140,"deletions":0},{"file":"lib/do_instance/do_migration/do_begin.js","type":"ADDED","insertions":139,"deletions":0},{"file":"lib/do_instance/do_migration/do_get.js","type":"ADDED","insertions":157,"deletions":0},{"file":"lib/do_instance/do_migration/do_list.js","type":"ADDED","insertions":115,"deletions":0},{"file":"lib/do_instance/do_migration/do_pause.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/do_instance/do_migration/do_switch.js","type":"ADDED","insertions":120,"deletions":0},{"file":"lib/do_instance/do_migration/do_sync.js","type":"ADDED","insertions":125,"deletions":0},{"file":"lib/do_instance/do_migration/index.js","type":"ADDED","insertions":67,"deletions":0},{"file":"lib/do_instance/do_migration/watcher.js","type":"ADDED","insertions":219,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":87,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/cli-migrations.test.js","type":"ADDED","insertions":158,"deletions":0},{"file":"test/integration/cli-subcommands.test.js","type":"MODIFIED","insertions":8,"deletions":0}],"sizeInsertions":1615,"sizeDeletions":-3},{"number":"8","revision":"b002abcb6e3bdcd368652cf32f70af1b47fc8bbb","parents":["84234d7fea654f7318c51df51aa4f1487072c0e1"],"ref":"refs/changes/44/6044/8","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1560454528,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1560454578,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/do_instance/do_migration/watcher.js","line":154,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Whilst better, this is still not correctly handling stream data. There is no guarantee that the last string in rawFrags is a complete JSON line (it may be part of a line like \u0027{ \"foo\": \"this is cut off\u0027).\n\nYou\u0027d need to try to parse that last line separately, and if it\u0027s not valid JSON, then keep it (leftover) for the next on(\u0027data\u0027) call where you\u0027d then prepend it to the chunk."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":93,"deletions":0},{"file":"lib/do_instance/do_migration/do_abort.js","type":"ADDED","insertions":112,"deletions":0},{"file":"lib/do_instance/do_migration/do_automatic.js","type":"ADDED","insertions":140,"deletions":0},{"file":"lib/do_instance/do_migration/do_begin.js","type":"ADDED","insertions":139,"deletions":0},{"file":"lib/do_instance/do_migration/do_get.js","type":"ADDED","insertions":157,"deletions":0},{"file":"lib/do_instance/do_migration/do_list.js","type":"ADDED","insertions":115,"deletions":0},{"file":"lib/do_instance/do_migration/do_pause.js","type":"ADDED","insertions":111,"deletions":0},{"file":"lib/do_instance/do_migration/do_switch.js","type":"ADDED","insertions":120,"deletions":0},{"file":"lib/do_instance/do_migration/do_sync.js","type":"ADDED","insertions":126,"deletions":0},{"file":"lib/do_instance/do_migration/index.js","type":"ADDED","insertions":53,"deletions":0},{"file":"lib/do_instance/do_migration/watcher.js","type":"ADDED","insertions":228,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":88,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/cli-migrations.test.js","type":"ADDED","insertions":267,"deletions":0},{"file":"test/integration/cli-subcommands.test.js","type":"MODIFIED","insertions":8,"deletions":0}],"sizeInsertions":1767,"sizeDeletions":-3},{"number":"9","revision":"d4bde0d918cfea872001a22de540ae1a71b48d23","parents":["803775fb4dd21a231421ed5215ebf6e962ca00d1"],"ref":"refs/changes/44/6044/9","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1560845615,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1560454578,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":93,"deletions":0},{"file":"lib/do_instance/do_migration/do_abort.js","type":"ADDED","insertions":112,"deletions":0},{"file":"lib/do_instance/do_migration/do_automatic.js","type":"ADDED","insertions":140,"deletions":0},{"file":"lib/do_instance/do_migration/do_begin.js","type":"ADDED","insertions":139,"deletions":0},{"file":"lib/do_instance/do_migration/do_get.js","type":"ADDED","insertions":157,"deletions":0},{"file":"lib/do_instance/do_migration/do_list.js","type":"ADDED","insertions":115,"deletions":0},{"file":"lib/do_instance/do_migration/do_pause.js","type":"ADDED","insertions":111,"deletions":0},{"file":"lib/do_instance/do_migration/do_switch.js","type":"ADDED","insertions":120,"deletions":0},{"file":"lib/do_instance/do_migration/do_sync.js","type":"ADDED","insertions":126,"deletions":0},{"file":"lib/do_instance/do_migration/index.js","type":"ADDED","insertions":53,"deletions":0},{"file":"lib/do_instance/do_migration/watcher.js","type":"ADDED","insertions":228,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":88,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/cli-migrations.test.js","type":"ADDED","insertions":267,"deletions":0},{"file":"test/integration/cli-subcommands.test.js","type":"MODIFIED","insertions":8,"deletions":0}],"sizeInsertions":1767,"sizeDeletions":-3},{"number":"10","revision":"75724a49ce5d20640e3a7fef98ce95e6ab4e18ec","parents":["803775fb4dd21a231421ed5215ebf6e962ca00d1"],"ref":"refs/changes/44/6044/10","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1561481651,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1561481694,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/do_instance/do_migration/watcher.js","line":161,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Just noting that this could be reached multiple times during the [].forEach(fn) - and that it would then be silently ignoring all SyntaxError occurrences except the last one (the last one is then kept for the next iteration, but this then repeats on the next \u0027data\u0027 event). Better to raise an error when this is not the last index:\n  if (index \u003d\u003d\u003d lastIndex \u0026\u0026 jsonErr instanceof SyntaxError \u0026\u0026 ..."},{"file":"lib/do_instance/do_migration/watcher.js","line":166,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"This watchCb could be fired multiple times - since your running in a [].forEach(fn). You could use [].some(fn) and return true when you want to stop iterating."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":93,"deletions":0},{"file":"lib/do_instance/do_migration/do_abort.js","type":"ADDED","insertions":112,"deletions":0},{"file":"lib/do_instance/do_migration/do_automatic.js","type":"ADDED","insertions":140,"deletions":0},{"file":"lib/do_instance/do_migration/do_begin.js","type":"ADDED","insertions":139,"deletions":0},{"file":"lib/do_instance/do_migration/do_get.js","type":"ADDED","insertions":157,"deletions":0},{"file":"lib/do_instance/do_migration/do_list.js","type":"ADDED","insertions":115,"deletions":0},{"file":"lib/do_instance/do_migration/do_pause.js","type":"ADDED","insertions":111,"deletions":0},{"file":"lib/do_instance/do_migration/do_switch.js","type":"ADDED","insertions":120,"deletions":0},{"file":"lib/do_instance/do_migration/do_sync.js","type":"ADDED","insertions":126,"deletions":0},{"file":"lib/do_instance/do_migration/index.js","type":"ADDED","insertions":53,"deletions":0},{"file":"lib/do_instance/do_migration/watcher.js","type":"ADDED","insertions":243,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":88,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/cli-migrations.test.js","type":"ADDED","insertions":267,"deletions":0},{"file":"test/integration/cli-subcommands.test.js","type":"MODIFIED","insertions":8,"deletions":0}],"sizeInsertions":1782,"sizeDeletions":-3},{"number":"11","revision":"248cbdcd03bf5a01975eafcdf1d0d65878a43bf0","parents":["803775fb4dd21a231421ed5215ebf6e962ca00d1"],"ref":"refs/changes/44/6044/11","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1561483533,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1561483578,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":93,"deletions":0},{"file":"lib/do_instance/do_migration/do_abort.js","type":"ADDED","insertions":112,"deletions":0},{"file":"lib/do_instance/do_migration/do_automatic.js","type":"ADDED","insertions":140,"deletions":0},{"file":"lib/do_instance/do_migration/do_begin.js","type":"ADDED","insertions":139,"deletions":0},{"file":"lib/do_instance/do_migration/do_get.js","type":"ADDED","insertions":157,"deletions":0},{"file":"lib/do_instance/do_migration/do_list.js","type":"ADDED","insertions":115,"deletions":0},{"file":"lib/do_instance/do_migration/do_pause.js","type":"ADDED","insertions":111,"deletions":0},{"file":"lib/do_instance/do_migration/do_switch.js","type":"ADDED","insertions":120,"deletions":0},{"file":"lib/do_instance/do_migration/do_sync.js","type":"ADDED","insertions":126,"deletions":0},{"file":"lib/do_instance/do_migration/index.js","type":"ADDED","insertions":53,"deletions":0},{"file":"lib/do_instance/do_migration/watcher.js","type":"ADDED","insertions":251,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":88,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/cli-migrations.test.js","type":"ADDED","insertions":267,"deletions":0},{"file":"test/integration/cli-subcommands.test.js","type":"MODIFIED","insertions":8,"deletions":0}],"sizeInsertions":1790,"sizeDeletions":-3},{"number":"12","revision":"c944d7ea026b0a30debaf7c1de3a0546a1dd5d49","parents":["803775fb4dd21a231421ed5215ebf6e962ca00d1"],"ref":"refs/changes/44/6044/12","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1561484005,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1561484045,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1561484136,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1561484136,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":93,"deletions":0},{"file":"lib/do_instance/do_migration/do_abort.js","type":"ADDED","insertions":112,"deletions":0},{"file":"lib/do_instance/do_migration/do_automatic.js","type":"ADDED","insertions":140,"deletions":0},{"file":"lib/do_instance/do_migration/do_begin.js","type":"ADDED","insertions":139,"deletions":0},{"file":"lib/do_instance/do_migration/do_get.js","type":"ADDED","insertions":157,"deletions":0},{"file":"lib/do_instance/do_migration/do_list.js","type":"ADDED","insertions":115,"deletions":0},{"file":"lib/do_instance/do_migration/do_pause.js","type":"ADDED","insertions":111,"deletions":0},{"file":"lib/do_instance/do_migration/do_switch.js","type":"ADDED","insertions":120,"deletions":0},{"file":"lib/do_instance/do_migration/do_sync.js","type":"ADDED","insertions":126,"deletions":0},{"file":"lib/do_instance/do_migration/index.js","type":"ADDED","insertions":53,"deletions":0},{"file":"lib/do_instance/do_migration/watcher.js","type":"ADDED","insertions":254,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":88,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/cli-migrations.test.js","type":"ADDED","insertions":267,"deletions":0},{"file":"test/integration/cli-subcommands.test.js","type":"MODIFIED","insertions":8,"deletions":0}],"sizeInsertions":1793,"sizeDeletions":-3},{"number":"13","revision":"23a1adeff089239ae064c74a70911adf86fa0710","parents":["803775fb4dd21a231421ed5215ebf6e962ca00d1"],"ref":"refs/changes/44/6044/13","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1561484273,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1561484045,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1561484286,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1561484136,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1561484136,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/cloudapi2.js","type":"MODIFIED","insertions":93,"deletions":0},{"file":"lib/do_instance/do_migration/do_abort.js","type":"ADDED","insertions":112,"deletions":0},{"file":"lib/do_instance/do_migration/do_automatic.js","type":"ADDED","insertions":140,"deletions":0},{"file":"lib/do_instance/do_migration/do_begin.js","type":"ADDED","insertions":139,"deletions":0},{"file":"lib/do_instance/do_migration/do_get.js","type":"ADDED","insertions":157,"deletions":0},{"file":"lib/do_instance/do_migration/do_list.js","type":"ADDED","insertions":115,"deletions":0},{"file":"lib/do_instance/do_migration/do_pause.js","type":"ADDED","insertions":111,"deletions":0},{"file":"lib/do_instance/do_migration/do_switch.js","type":"ADDED","insertions":120,"deletions":0},{"file":"lib/do_instance/do_migration/do_sync.js","type":"ADDED","insertions":126,"deletions":0},{"file":"lib/do_instance/do_migration/index.js","type":"ADDED","insertions":53,"deletions":0},{"file":"lib/do_instance/do_migration/watcher.js","type":"ADDED","insertions":254,"deletions":0},{"file":"lib/do_instance/index.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/tritonapi.js","type":"MODIFIED","insertions":88,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/cli-migrations.test.js","type":"ADDED","insertions":267,"deletions":0},{"file":"test/integration/cli-subcommands.test.js","type":"MODIFIED","insertions":8,"deletions":0}],"sizeInsertions":1793,"sizeDeletions":-3}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}