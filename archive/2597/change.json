{"project":"joyent/manta-scripts","branch":"master","id":"I253ae31df06a8b5a3d520e3874d0eb060dda4fa3","number":"2597","subject":"MANTA-3418 manta log uploader lockfile logic removes lockfile when it fails to obtain lock Reviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e Approved by: Joshua M. Clulow \u003cjmc@joyent.com\u003e","owner":{"name":"Jared Morrow","email":"jm@joyent.com","username":"jaredmorrow"},"url":"https://cr.joyent.us/2597","commitMessage":"MANTA-3418 manta log uploader lockfile logic removes lockfile when it fails to obtain lock\nReviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\nApproved by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\n","createdOn":1505764455,"lastUpdated":1505844099,"open":false,"status":"MERGED","comments":[{"timestamp":1505764455,"reviewer":{"name":"Jared Morrow","email":"jm@joyent.com","username":"jaredmorrow"},"message":"Uploaded patch set 1."},{"timestamp":1505764457,"reviewer":{"name":"Jared Morrow","email":"jm@joyent.com","username":"jaredmorrow"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 1418c563eda61a0212dd377c196d2a52bde834f7\n    \n    MANTA-3418 lockfile logic removes lockfile when it fails to run"},{"timestamp":1505841645,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1505841715,"reviewer":{"name":"Jared Morrow","email":"jm@joyent.com","username":"jaredmorrow"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1505842143,"reviewer":{"name":"Jared Morrow","email":"jm@joyent.com","username":"jaredmorrow"},"message":"Uploaded patch set 2."},{"timestamp":1505842144,"reviewer":{"name":"Jared Morrow","email":"jm@joyent.com","username":"jaredmorrow"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 022ccbc36c1341ee1b72857437f37bf29a4aafd5\n    \n    Change subshell usage re: code review changes"},{"timestamp":1505843944,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1\n\nThanks for the changes.  Testing notes in the ticket look good to me as well, so I approve!"},{"timestamp":1505844088,"reviewer":{"name":"Jared Morrow","email":"jm@joyent.com","username":"jaredmorrow"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1505844099,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jared Morrow"}],"currentPatchSet":{"number":"3","revision":"253ae31df06a8b5a3d520e3874d0eb060dda4fa3","parents":["264dbeaaf6c38de41f2591d8772ec648e15638aa"],"ref":"refs/changes/97/2597/3","uploader":{"name":"Jared Morrow","email":"jm@joyent.com","username":"jaredmorrow"},"createdOn":1505844088,"author":{"name":"Jared Morrow","email":"jm@joyent.com","username":"jaredmorrow"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505843944,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1505843944,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"SUBM","value":"1","grantedOn":1505844099,"by":{"name":"Jared Morrow","email":"jm@joyent.com","username":"jaredmorrow"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"backup.sh","type":"MODIFIED","insertions":12,"deletions":-6}],"sizeInsertions":12,"sizeDeletions":-6},"patchSets":[{"number":"1","revision":"8748b9fed444da9644733d0e344daaab09581176","parents":["264dbeaaf6c38de41f2591d8772ec648e15638aa"],"ref":"refs/changes/97/2597/1","uploader":{"name":"Jared Morrow","email":"jm@joyent.com","username":"jaredmorrow"},"createdOn":1505764455,"author":{"name":"Jared Morrow","email":"jm@joyent.com","username":"jaredmorrow"},"isDraft":false,"kind":"REWORK","comments":[{"file":"backup.sh","line":171,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Can you change this to:\n\n    RPID\u003d$(\u003c$LOCKFILE)"},{"file":"backup.sh","line":171,"reviewer":{"name":"Jared Morrow","email":"jm@joyent.com","username":"jaredmorrow"},"message":"Yes indeed"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"backup.sh","type":"MODIFIED","insertions":11,"deletions":-5}],"sizeInsertions":11,"sizeDeletions":-5},{"number":"2","revision":"138bd50a7bb77e0377f68faf0c0c342cdcc0b379","parents":["264dbeaaf6c38de41f2591d8772ec648e15638aa"],"ref":"refs/changes/97/2597/2","uploader":{"name":"Jared Morrow","email":"jm@joyent.com","username":"jaredmorrow"},"createdOn":1505842143,"author":{"name":"Jared Morrow","email":"jm@joyent.com","username":"jaredmorrow"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505843944,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1505843944,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"backup.sh","type":"MODIFIED","insertions":12,"deletions":-6}],"sizeInsertions":12,"sizeDeletions":-6},{"number":"3","revision":"253ae31df06a8b5a3d520e3874d0eb060dda4fa3","parents":["264dbeaaf6c38de41f2591d8772ec648e15638aa"],"ref":"refs/changes/97/2597/3","uploader":{"name":"Jared Morrow","email":"jm@joyent.com","username":"jaredmorrow"},"createdOn":1505844088,"author":{"name":"Jared Morrow","email":"jm@joyent.com","username":"jaredmorrow"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505843944,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1505843944,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"SUBM","value":"1","grantedOn":1505844099,"by":{"name":"Jared Morrow","email":"jm@joyent.com","username":"jaredmorrow"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"backup.sh","type":"MODIFIED","insertions":12,"deletions":-6}],"sizeInsertions":12,"sizeDeletions":-6}],"allReviewers":[{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Jared Morrow","email":"jm@joyent.com","username":"jaredmorrow"}]}