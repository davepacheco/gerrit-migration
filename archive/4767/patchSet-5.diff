commit 45e03aa6fd9c317118b592ea1e6518c25ae4a108 (refs/changes/67/4767/5)
Author: Pedro Palazon Candel <pedro@joyent.com>
Date:   2018-09-11T17:14:01+02:00 (1 year, 1 month ago)
    
    TRITON-739 Get rid of "$SERVICE_root_pw" and other deprecated values for usb-headnode config

diff --git a/config/config.inc/generic b/config/config.inc/generic
index 217ed6e5..157d2070 100644
--- a/config/config.inc/generic
+++ b/config/config.inc/generic
@@ -47,7 +47,6 @@ utc_offset=0
 
 # Agents will be installed here
 agents_root=/opt/smartdc/agents
-zonetracker_database_path=/opt/smartdc/agents/db/zonetracker.sqlite3
 
 # Set this to the name of a file in config.inc and it will be copied in as
 # root's .ssh/authorized_keys in GZs:
diff --git a/scripts/prompt-config.sh b/scripts/prompt-config.sh
index 60b5f2b1..e846ffcb 100755
--- a/scripts/prompt-config.sh
+++ b/scripts/prompt-config.sh
@@ -1464,70 +1464,56 @@ echo "swap=0.25x" >>$tmp_config
 echo "compute_node_swap=0.25x" >>$tmp_config
 echo >>$tmp_config
 
-echo "binder_root_pw='$escaped_zone_admin_pw'" >>$tmp_config
 echo "binder_admin_ips=$binder_admin_ip" >>$tmp_config
 echo >>$tmp_config
 
-echo "manatee_root_pw='$escaped_zone_admin_pw'" >>$tmp_config
 echo "manatee_admin_ips=$manatee_admin_ip" >>$tmp_config
 echo >>$tmp_config
 
-echo "moray_root_pw='$escaped_zone_admin_pw'" >>$tmp_config
 echo "moray_admin_ips=$moray_admin_ip" >>$tmp_config
 echo "moray_domain=moray.${datacenter_name}.${dns_domain}" >>$tmp_config
 echo >>$tmp_config
 
-echo "ufds_root_pw='$escaped_zone_admin_pw'" >>$tmp_config
 echo "ufds_admin_ips=$ufds_admin_ip" >>$tmp_config
 echo "ufds_domain=ufds.${datacenter_name}.${dns_domain}" >>$tmp_config
 echo >>$tmp_config
 
-echo "workflow_root_pw='$escaped_zone_admin_pw'" >>$tmp_config
 echo "workflow_admin_ips=$workflow_admin_ip" >>$tmp_config
 echo "workflow_domain=workflow.${datacenter_name}.${dns_domain}" >>$tmp_config
 echo >>$tmp_config
 
-echo "imgapi_root_pw='$escaped_zone_admin_pw'" >>$tmp_config
 echo "imgapi_admin_ips=$imgapi_admin_ip" >>$tmp_config
 echo "imgapi_domain=imgapi.${datacenter_name}.${dns_domain}" >>$tmp_config
 echo >>$tmp_config
 
-echo "cnapi_root_pw='$escaped_zone_admin_pw'" >>$tmp_config
 echo "cnapi_admin_ips=$cnapi_admin_ip" >>$tmp_config
 echo "cnapi_domain=cnapi.${datacenter_name}.${dns_domain}" >>$tmp_config
 echo >>$tmp_config
 
-echo "fwapi_root_pw='$escaped_zone_admin_pw'" >>$tmp_config
 echo "fwapi_admin_ips=$fwapi_admin_ip" >>$tmp_config
 echo "fwapi_domain=fwapi.${datacenter_name}.${dns_domain}" >>$tmp_config
 echo >>$tmp_config
 
-echo "vmapi_root_pw='$escaped_zone_admin_pw'" >>$tmp_config
 echo "vmapi_admin_ips=$vmapi_admin_ip" >>$tmp_config
 echo "vmapi_domain=vmapi.${datacenter_name}.${dns_domain}" >>$tmp_config
 echo >>$tmp_config
 
-echo "sdc_root_pw='$escaped_zone_admin_pw'" >>$tmp_config
 echo "sdc_admin_ips=$sdc_admin_ip" >>$tmp_config
 echo "sdc_domain=sdc.${datacenter_name}.${dns_domain}" >>$tmp_config
 echo >>$tmp_config
 
-echo "papi_root_pw='$escaped_zone_admin_pw'" >>$tmp_config
 echo "papi_admin_ips=$papi_admin_ip" >>$tmp_config
 echo "papi_domain=papi.${datacenter_name}.${dns_domain}" >>$tmp_config
 echo >>$tmp_config
 
-echo "ca_root_pw='$escaped_zone_admin_pw'" >>$tmp_config
 echo "ca_admin_ips=$ca_admin_ip" >>$tmp_config
 echo "ca_domain=ca.${datacenter_name}.${dns_domain}" >>$tmp_config
 echo >>$tmp_config
 
-echo "adminui_root_pw='$escaped_zone_admin_pw'" >>$tmp_config
 echo "adminui_admin_ips=$adminui_admin_ip" >>$tmp_config
 echo "adminui_domain=adminui.${datacenter_name}.${dns_domain}" >>$tmp_config
 echo >>$tmp_config
 
-echo "mahi_root_pw='$escaped_zone_admin_pw'" >>$tmp_config
 echo "mahi_admin_ips=$mahi_admin_ip" >>$tmp_config
 echo "mahi_domain=mahi.${datacenter_name}.${dns_domain}" >>$tmp_config
 echo >>$tmp_config
@@ -1642,12 +1628,10 @@ echo "adminui_help_url=http://wiki.joyent.com/display/sdc/Overview+of+SmartDataC
 echo >>$tmp_config
 
 echo "amon_admin_ips=$amon_admin_ip" >>$tmp_config
-echo "amon_root_pw='$escaped_zone_admin_pw'" >>$tmp_config
 echo "amon_domain=amon.${datacenter_name}.${dns_domain}" >>$tmp_config
 echo >>$tmp_config
 
 echo "amonredis_admin_ips=$amonredis_admin_ip" >>$tmp_config
-echo "amonredis_root_pw='$escaped_zone_admin_pw'" >>$tmp_config
 echo "amonredis_domain=amonredis.${datacenter_name}.${dns_domain}" >>$tmp_config
 echo >>$tmp_config
 
@@ -1655,22 +1639,15 @@ echo >>$tmp_config
 #       use admin_ip.  When this is cleaned up we can just keep ips.
 echo "assets_admin_ip=$assets_admin_ip" >>$tmp_config
 echo "assets_admin_ips=$assets_admin_ip" >>$tmp_config
-echo "assets_root_pw='$escaped_zone_admin_pw'" >>$tmp_config
 echo >>$tmp_config
 
 # NOTE: we add admin_ip and admin_ips here because some stuff is hardcoded to
 #       use admin_ip.  When this is cleaned up we can just keep ips.
 echo "dhcpd_admin_ip=$dhcpd_admin_ip" >>$tmp_config
 echo "dhcpd_admin_ips=$dhcpd_admin_ip" >>$tmp_config
-echo "dhcpd_root_pw='$escaped_zone_admin_pw'" >>$tmp_config
 echo "dhcpd_domain=dhcpd.${datacenter_name}.${dns_domain}" >>$tmp_config
 echo >>$tmp_config
 
-echo "dsapi_url=https://datasets.joyent.com" >>$tmp_config
-echo "dsapi_http_user=honeybadger" >>$tmp_config
-echo "dsapi_http_pass=IEatSnakes4Fun" >>$tmp_config
-echo >>$tmp_config
-
 if [[ -n ${external_nic} ]]; then
 	if [ -z "$external_vlan_id" ]; then
 		echo "# cloudapi_external_vlan=0" >>$tmp_config
@@ -1678,14 +1655,12 @@ if [[ -n ${external_nic} ]]; then
 		echo "cloudapi_external_vlan=$external_vlan_id" >>$tmp_config
 	fi
 fi
-echo "cloudapi_root_pw='$escaped_zone_admin_pw'" >>$tmp_config
 echo >>$tmp_config
 
 # NOTE: we add admin_ip and admin_ips here because some stuff is hardcoded to
 #       use admin_ip.  When this is cleaned up we can just keep ips.
 echo "rabbitmq_admin_ip=$rabbitmq_admin_ip" >>$tmp_config
 echo "rabbitmq_admin_ips=$rabbitmq_admin_ip" >>$tmp_config
-echo "rabbitmq_root_pw='$escaped_zone_admin_pw'" >>$tmp_config
 echo "rabbitmq=$rabbitmq" >>$tmp_config
 echo "rabbitmq_domain=rabbitmq.${datacenter_name}.${dns_domain}" >>$tmp_config
 echo >>$tmp_config
@@ -1709,7 +1684,6 @@ echo >>$tmp_config
 echo "fwapi_client_url=$fwapi_client_url" >>$tmp_config
 echo >>$tmp_config
 
-echo "napi_root_pw='$escaped_zone_admin_pw'" >>$tmp_config
 echo "napi_admin_ips=$napi_admin_ip" >>$tmp_config
 echo "napi_client_url=$napi_client_url" >>$tmp_config
 echo "napi_mac_prefix=90b8d0" >>$tmp_config
