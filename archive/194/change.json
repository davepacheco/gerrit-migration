{"project":"joyent/zfs_snapshot_tar","branch":"master","id":"I1ee644bf6e278b51bf659b4d6daa9e22aef701c2","number":"194","subject":"DOCKER-774 docker build omits all but one hard linked file from images DOCKER-751 docker build failure for files with adjusted hard links Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Approved by: Alex Wilson \u003calex.wilson@joyent.com\u003e","owner":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"url":"https://cr.joyent.us/194","commitMessage":"DOCKER-774 docker build omits all but one hard linked file from images\nDOCKER-751 docker build failure for files with adjusted hard links\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nApproved by: Alex Wilson \u003calex.wilson@joyent.com\u003e\n","createdOn":1470175818,"lastUpdated":1470983943,"open":false,"status":"MERGED","comments":[{"timestamp":1470175818,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 1."},{"timestamp":1470780740,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 2: Commit message was updated."},{"timestamp":1470869050,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 3."},{"timestamp":1470874416,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3: Code-Review+1\n\n(1 comment)\n\nSeemed reasonable, though trying to follow the O_LARGEFILE, etc. bits were a bit confusing."},{"timestamp":1470900472,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 4: Patch Set 3 was rebased"},{"timestamp":1470900627,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 5."},{"timestamp":1470900734,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1470930948,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 5: Code-Review+1\n\nThanks for putting that together. Just make sure to try and test with something where we\u0027d need the O_LARGEFILE readdir\u0027s."},{"timestamp":1470983733,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 5: Integration-Approval+1"},{"timestamp":1470983895,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 6: Commit message was updated."},{"timestamp":1470983937,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 7: Patch Set 6 was rebased"},{"timestamp":1470983943,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Joshua M. Clulow"}],"currentPatchSet":{"number":"7","revision":"7603eca7c3475598d4f543ac61cd0e9d7dfa7d9b","parents":["1e90f215f6d47664f580373af07493e03bd1ae3f"],"ref":"refs/changes/94/194/7","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1470983937,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"NO_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470930948,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470983733,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"SUBM","value":"1","grantedOn":1470983943,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"cmd.c","type":"MODIFIED","insertions":407,"deletions":-127}],"sizeInsertions":407,"sizeDeletions":-127},"patchSets":[{"number":"1","revision":"f0a3709fd398da5c15b52523915bde6e7d7e0418","parents":["abd00b1545309eb25f7291c1e7ebf6c7507cff98"],"ref":"refs/changes/94/194/1","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1470175818,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"cmd.c","type":"MODIFIED","insertions":405,"deletions":-124}],"sizeInsertions":405,"sizeDeletions":-124},{"number":"2","revision":"00fe85f0888f625217ff9406b5e16567f2e4c4eb","parents":["abd00b1545309eb25f7291c1e7ebf6c7507cff98"],"ref":"refs/changes/94/194/2","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1470780740,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"NO_CODE_CHANGE","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"cmd.c","type":"MODIFIED","insertions":405,"deletions":-124}],"sizeInsertions":405,"sizeDeletions":-124},{"number":"3","revision":"4c3c49746686a0197d0400042a33273e98b6cb4a","parents":["abd00b1545309eb25f7291c1e7ebf6c7507cff98"],"ref":"refs/changes/94/194/3","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1470869050,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470874416,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"comments":[{"file":"cmd.c","line":0,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Comment on the use of O_LARGEFILE please."},{"file":"cmd.c","line":0,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I opted instead to remove the O_LARGEFILE usage.  You were right in that it\u0027s confusing; because the program is (and must be) built with the lfcompile(5) environment, it\u0027s also entirely superfluous.\n\nI retested and there was no change in the behaviour."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"cmd.c","type":"MODIFIED","insertions":405,"deletions":-124}],"sizeInsertions":405,"sizeDeletions":-124},{"number":"4","revision":"dce4ffa9c84ab2e77ebf7681048a58561bae56f2","parents":["9f0d7444804730bd29f3f2a6783d504f93a546db"],"ref":"refs/changes/94/194/4","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1470900472,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470874416,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"cmd.c","type":"MODIFIED","insertions":405,"deletions":-124}],"sizeInsertions":405,"sizeDeletions":-124},{"number":"5","revision":"1ee644bf6e278b51bf659b4d6daa9e22aef701c2","parents":["9f0d7444804730bd29f3f2a6783d504f93a546db"],"ref":"refs/changes/94/194/5","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1470900627,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470930948,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470983733,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"cmd.c","type":"MODIFIED","insertions":407,"deletions":-127}],"sizeInsertions":407,"sizeDeletions":-127},{"number":"6","revision":"91bf6003ba1e038ef0b499d87ba2a493b2b180c0","parents":["9f0d7444804730bd29f3f2a6783d504f93a546db"],"ref":"refs/changes/94/194/6","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1470983895,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470930948,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470983733,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"cmd.c","type":"MODIFIED","insertions":407,"deletions":-127}],"sizeInsertions":407,"sizeDeletions":-127},{"number":"7","revision":"7603eca7c3475598d4f543ac61cd0e9d7dfa7d9b","parents":["1e90f215f6d47664f580373af07493e03bd1ae3f"],"ref":"refs/changes/94/194/7","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1470983937,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"NO_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470930948,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470983733,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"SUBM","value":"1","grantedOn":1470983943,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"cmd.c","type":"MODIFIED","insertions":407,"deletions":-127}],"sizeInsertions":407,"sizeDeletions":-127}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}]}