{"project":"joyent/manta-manatee","branch":"master","topic":"lullaby-phase3","id":"I4647871d6a2e3d82dfc0242d5dd3ee0d2a73fca8","number":"5663","subject":"MANTA-4079 convert manta-manatee to engbld framework Reviewed by: Richard Bradley \u003crichard.bradley@joyent.com\u003e Approved by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e","owner":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"url":"https://cr.joyent.us/5663","commitMessage":"MANTA-4079 convert manta-manatee to engbld framework\nReviewed by: Richard Bradley \u003crichard.bradley@joyent.com\u003e\nApproved by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e\n","createdOn":1551374770,"lastUpdated":1552473343,"open":false,"status":"MERGED","comments":[{"timestamp":1551374770,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 1."},{"timestamp":1551374777,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit aac529cbd3cdbc608e38c87a85f272362847a03f\n    \n    MANTA-4079 convert manta-manatee to engbld framework"},{"timestamp":1551374942,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Topic set to lullaby-phase3"},{"timestamp":1551375698,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1551812507,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1551833503,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1551874941,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1551934114,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1551979257,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1:\n\nGreat, incoming.."},{"timestamp":1551979318,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 2."},{"timestamp":1551979324,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit c9fd6d21909da5365277567745443633c40875b0\n    \n    Node prebuilt image should complement base_image_uuid"},{"timestamp":1551993692,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\nTim:  (I haven\u0027t looked at the earlier comments here.)   A build of this failed for me in the AMON-prebuilt-build step. Build log: https://gist.githubusercontent.com/trentm/dfa7629f8677466f09aa1201f912ce5a/raw/c6e39a827037b75e86cb867f3556411fd2cd3ed1/manta-manatee-build-fail.txt\n\nI\u0027m trying a pgstatsmon build on the same builder VM now to compare."},{"timestamp":1551997444,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\nI got the same AMON-prebuilt-build error when attempting to build pgstatsmon on this same trent-builder-1541-multiarch-20190221T002615 builder VM.\n\nFWIW, this is the same builder VM on which I\u0027d built many components for phase2 reviews:\n\n```\n[root@trent-builder-1541-multiarch-20190221T002615 ~/joy]# ls\nelectric-moray           manta-mola        pgstatsmon            sdc-cn-agent          sdc-manatee    sdc-portolan\ngrr                      manta-muskie      sdc-adminui           sdc-docker            sdc-manta      sdc-sdc\nmahi                     manta-reshard     sdc-agents-core       sdc-dockerlogger      sdc-napi       sdc-vm-agent\nmanta-garbage-collector  moray             sdc-agents-installer  sdc-firewaller-agent  sdc-nat        sdcboot\nmanta-manatee            mountain-gorilla  sdc-amonredis         sdc-fwapi             sdc-net-agent  triton-cmon-agent\nmanta-marlin             muppet            sdc-assets            sdc-hagfish-watcher   sdc-nfsserver  triton-cns\n```\n\nso I don\u0027t *think* the VM is totally busted.  I\u0027ll go back and try to build one of those phase2 repos on this builder VM."},{"timestamp":1551998193,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\nI\u0027m getting the same AMON-prebuilt-build error for sdc-fwapi#master now on this build machine, so it is:\n\n- something that changed on my build machine,\n- some bulid step I\u0027m doing differently from before, or\n- something that has changed in sources (e.g. in sdc-amon.git?)"},{"timestamp":1551999918,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 2:\n\n\u003e I\u0027m getting the same AMON-prebuilt-build error for sdc-fwapi#master\n \u003e now on this build machine, so it is:\n \u003e \n \u003e - something that changed on my build machine,\n \u003e - some bulid step I\u0027m doing differently from before, or\n \u003e - something that has changed in sources (e.g. in sdc-amon.git?)\n\nI just tried another build on my multiarch-15.4.1 zone (1356e735-456e-4886-aebd-d6677921694c). I did not see an amon error and was able to build the image."},{"timestamp":1552047934,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 2:\n\n\u003e I\u0027m getting the same AMON-prebuilt-build error for sdc-fwapi#master\n \u003e now on this build machine, so it is:\n \u003e \n \u003e - something that changed on my build machine,\n \u003e - some bulid step I\u0027m doing differently from before, or\n \u003e - something that has changed in sources (e.g. in sdc-amon.git?)\n\nI haven\u0027t been able to reproduce this locally, building with a fresh workspace as \u0027root\u0027 on a jenkins-agent 15.4.1 build machine.\n\nI can\u0027t see any recent sdc-amon changes that might be relevant. We\u0027re failing on something that looks like it might be platform specific though - you didn\u0027t update the platform on this system recently?\n\nThis also looks suspicious:\n\n```\nmkdir -p make_stamps; touch make_stamps/buildimage-prep\n/root/joy/manta-manatee/deps/eng/tools/agent-prebuilt.sh \\\n        -b \u0027cr-5663-2\u0027 \\\n        -B \u0027\u0027 \\\n        -c \u0027/var/tmp/agent-cache.root\u0027 \\\n        -p \u0027build/amon-agent-.*.tgz\u0027 \\\n        -r \u0027sdc-amon\u0027 \\\n        -t \u0027distclean agent pkg_agent\u0027 \\\n        -u \u0027https://github.com/joyent/sdc-amon.git\u0027 clone\nremote: Enumerating objects: 4, done.\nremote: Counting objects: 100% (4/4), done.\nremote: Compressing objects: 100% (4/4), done.\nremote: Total 4 (delta 0), reused 4 (delta 0), pack-reused 0\nUnpacking objects: 100% (4/4), done.\nFrom https://github.com/joyent/sdc-amon\n   a5e54d7..902d68a  master     -\u003e origin/master\nFirst, rewinding head to replay your work on top of it...\nFast-forwarded master to 902d68a65813ecdd092d553775a40eac243197a4.\nfatal: invalid reference: cr-5663-2\nChecking out cr-5663-2 failed, falling back to cr-5663-2\nfatal: invalid reference: cr-5663-2\nChecking out cr-5663-2 also failed, falling back to master\nAlready on \u0027master\u0027\nYour branch is up-to-date with \u0027origin/master\u0027.\n/root/joy/manta-manatee/deps/eng/tools/agent-prebuilt.sh \\\n        -b \u0027cr-5663-2\u0027 \\\n        -B \u0027\u0027 \\\n        -c \u0027/var/tmp/agent-cache.root\u0027 \\\n        -p \u0027build/amon-agent-.*.tgz\u0027 \\\n        -r \u0027sdc-amon\u0027 \\\n        -t \u0027distclean agent pkg_agent\u0027 build\ngmake[1]: Entering directory \u0027/var/tmp/agent-cache.root/sdc-amon\u0027\n```\nsuggesting we somehow had local changes in the sdc-amon cache? Could we perhaps have a partial amon build here that\u0027s confusing things?\n\nCould you tar up agent-cache.root and point me at it? I\u0027d be interested in seeing what\u0027s going on.\n\nDoing this from the manta-manatee workspace should clear the cache (the nuclear option being rm -rf /var/tmp/agent-cache.root/sdc-amon)\n\n```\n[root@jenkins-agent-multiarch-15 /space/root/manta-manatee.git]# make AMON-prebuilt-clean\n/space/root/manta-manatee.git/deps/eng/tools/agent-prebuilt.sh \\\n        -b \u0027grr-MANTA-4079\u0027 \\\n        -B \u0027\u0027 \\\n        -c \u0027/var/tmp/agent-cache.root\u0027 \\\n        -p \u0027build/amon-agent-.*.tgz\u0027 \\\n        -r \u0027sdc-amon\u0027 \\\n        -U \u0027\u0027 clean\n[root@jenkins-agent-multiarch-15 /space/root/manta-manatee.git]#\n```"},{"timestamp":1552053156,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 2:\n\n(3 comments)\n\nThanks for putting this together. I have a few questions here that also apply to the other changes, but figure it\u0027s best to focus them to one point. Hopefully these aren\u0027t silly questions!"},{"timestamp":1552055793,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 2:\n\n(3 comments)\n\n\u003e (3 comments)\n \u003e \n \u003e Thanks for putting this together. I have a few questions here that\n \u003e also apply to the other changes, but figure it\u0027s best to focus them\n \u003e to one point. Hopefully these aren\u0027t silly questions!\n\nNo worries - these are great questions that will definitely help when reviewing other components, as the patterns are similar there."},{"timestamp":1552064351,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 2: Integration-Approval+1\n\nThe buildimage process works as described and I deployed the resulting images and verified my system still functions correctly afterwards. +1 from me once code review is complete."},{"timestamp":1552065048,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 2: Code-Review+1\n\nThanks for helping me understand, and sorry for missing the earlier discussion! I think your answers have helped me with the other repos now, so I\u0027ll work through and CR+1."},{"timestamp":1552082749,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1552082890,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1552083102,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n\u003e I\u0027m getting the same AMON-prebuilt-build error for sdc-fwapi#master\n\nI\u0027ll pull my experiences here out to a separate email thread. Obviously the problem is something on my end only. THanks."},{"timestamp":1552325600,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 3."},{"timestamp":1552325609,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 16c96c843d9a7971a8e89982496b04590c7ce9f1\n    \n    bump deps/eng to get pfexec detection fix, TOOLS-2199"},{"timestamp":1552388440,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1552402368,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1552473343,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Tim Foster"}],"currentPatchSet":{"number":"3","revision":"4647871d6a2e3d82dfc0242d5dd3ee0d2a73fca8","parents":["dc70bbc3bf9e9a2cb02ed7319409ecad1e034ec4"],"ref":"refs/changes/63/5663/3","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1552325600,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552388440,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1552402368,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"SUBM","value":"1","grantedOn":1552473343,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":3,"deletions":-1},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":32,"deletions":-24},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-105},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-54},{"file":"tools/mk/Makefile.go_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-132},{"file":"tools/mk/Makefile.go_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-55},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-159},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-334}],"sizeInsertions":39,"sizeDeletions":-975},"patchSets":[{"number":"1","revision":"4321ab770cced2ae19db0bff4e9ba0978e33307a","parents":["dc70bbc3bf9e9a2cb02ed7319409ecad1e034ec4"],"ref":"refs/changes/63/5663/1","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1551374770,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1551375698,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"Makefile","line":37,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Yeah this image id and the preceding comment date back 5 years to when the code was open-sourced. The node prebuilt version was changed, but the image id is the same since the version was v0.10.26. I wonder if there\u0027s a reason it can\u0027t use the same image id here as muskie uses. I might try that out and see what happens."},{"file":"Makefile","line":37,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"I went ahead and built an image with the image id that muskie currently uses for the NODE_PREBUILD_IMAGE and deployed it to a shard on my test system. Everything appears to be working just fine afterwards. Tomorrow I plan to run the muskie test suite to exercise a few of my images built with the engbld changes to make sure it is working properly."},{"file":"Makefile","line":37,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Thanks - I\u0027ll change that to 15.4.1 assuming your testing checks out."},{"file":"Makefile","line":37,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"All the tests passed so I think we can go ahead and make that change."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":3,"deletions":-1},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":32,"deletions":-22},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-105},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-54},{"file":"tools/mk/Makefile.go_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-132},{"file":"tools/mk/Makefile.go_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-55},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-159},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-334}],"sizeInsertions":39,"sizeDeletions":-973},{"number":"2","revision":"c389f1f32e8e13b802f319d22f32311e710978e9","parents":["dc70bbc3bf9e9a2cb02ed7319409ecad1e034ec4"],"ref":"refs/changes/63/5663/2","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1551979318,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552065048,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1552064351,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"comments":[{"file":"Makefile","line":38,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"What does this image change signify? And what is the difference between this and BASE_IMAGE_UUID?"},{"file":"Makefile","line":38,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"You missed the earlier XXX question where I asked about this discrepancy :)\n\nMG has us deploying our image based on a pkgsrc 15.4.1 origin, but we had been building using a node 0.10.48 binary compiled for a pkgsrc 13.3.1 zone. This change just fixes the build so that we\u0027re running with a version of node that was compiled on the correct flavour zone.\n\nIt\u0027s unlikely that breakage would have ever impacted anything (after all, we\u0027ve been building and running with the compiled-on-13.x node on top of a 15.4.1 origin for some time) but it\u0027s good to be consistent."},{"file":"Makefile","line":53,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"What does this do, and when?"},{"file":"Makefile","line":53,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"This effectively is executed every time you run a \u0027make\u0027 command that sources this Makefile.\n\nIt clones and checks-out the \u0027deps/eng\u0027 git submodule, always at the specific version we committed the submodule at.\n\nThis specific ENGBLD_REQUIRE macro is really a developer convenience so that developers don\u0027t need to remember to either checkout the submodule manually, or pass the \"--recurse-submodules\" option when cloning the containing repository (manta-manatee.git in this case). Instead, by virtue of running \u0027make\u0027, we get that done for us.\n\nThe lullaby change generally moves all makefiles previously copy/pasted across repositories into a single shared repository, eng.git, made available as a submodule for all components in ./deps/eng. There\u0027s a heap more detail and some examples in TOOLS-2062."},{"file":"Makefile","line":143,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Other repos seem to have an `ifeq` for SunOS around this point.  Why does this repo (as well as muppet, reshard, manta-muskie, manta-garbage-collector) omit this?"},{"file":"Makefile","line":143,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"I honestly don\u0027t know - it\u0027s possible that this repository is more cross-OS compatible, such that building it on other operating systems is more viable than other components.\n\nWe\u0027re not terribly consistent across manta/triton components for this sort of thing. As much as possible, I tried to honour the existing practice in each component, assuming developers for each component had reasons for their different patterns."},{"file":"Makefile","line":143,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Richard, Tim,\n\nThe node_prebuilt stuff is about pulling down sdcnode builds. We only make sdcnode builds for smartos (not, for example, for linux or macos). \n\nPutting the node_prebuilt-related Makefiles behind `ifeq SunOS` guards allows us to run some node- and npm-using Makefile tasks on a non-SunOS dev machine (e.g. macos or linux) that we wouldn\u0027t otherwise be able to. \n\nExamples where this are useful is for \u0027make check\u0027, \u0027make fmt\u0027 (for the very rare repo that has \u0027make fmt\u0027), and occassionally \u0027make all\u0027 and \u0027make test-unit\u0027. Typically the latter can work on a component that has no smaros-specific node modules.\n\nIt is this \"allow node/npm tasks to work on non-SmartOS\" that allows me (and perhaps others that use it) to build some components on my Mac and use \"./tools/rsync-to coal\" for a faster edit/test dev cycle that doesn\u0027t require full image builds. This certainly doesn\u0027t allow full builds that can work for release, but is useful for dev.\n\nThe reason this is only in a subset of repos, and biased to *Triton-y* repos, is because I\u0027ve added most of these."},{"file":"Makefile","line":143,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Perhaps I should have attempted to push this as a standard, have it documented and used more consistently in all/most repos. I\u0027m not exactly sure on our engineering process for that, and frankly I\u0027ve received some light resistance in the past at \"developer beware\" limited build support tweaks."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":3,"deletions":-1},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":32,"deletions":-24},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-105},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-54},{"file":"tools/mk/Makefile.go_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-132},{"file":"tools/mk/Makefile.go_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-55},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-159},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-334}],"sizeInsertions":39,"sizeDeletions":-975},{"number":"3","revision":"4647871d6a2e3d82dfc0242d5dd3ee0d2a73fca8","parents":["dc70bbc3bf9e9a2cb02ed7319409ecad1e034ec4"],"ref":"refs/changes/63/5663/3","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1552325600,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552388440,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1552402368,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"SUBM","value":"1","grantedOn":1552473343,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":3,"deletions":-1},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":32,"deletions":-24},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-105},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-54},{"file":"tools/mk/Makefile.go_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-132},{"file":"tools/mk/Makefile.go_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-55},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-159},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-334}],"sizeInsertions":39,"sizeDeletions":-975}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}]}