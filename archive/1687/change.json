{"project":"joyent/illumos-joyent","branch":"master","id":"I6e02122b92ae0ff127c7ad1013d751eddc8b85e0","number":"1687","subject":"OS-5873 Need NFS client lockd support: fcntl F_SETLK returns ENOLCK in LX zone Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Reviewed by: Ryan Zezeski \u003cryan.zeseski@joyent.com\u003e Approved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e","owner":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"url":"https://cr.joyent.us/1687","commitMessage":"OS-5873 Need NFS client lockd support: fcntl F_SETLK returns ENOLCK in LX zone\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nReviewed by: Ryan Zezeski \u003cryan.zeseski@joyent.com\u003e\nApproved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n","createdOn":1490027764,"lastUpdated":1490378988,"open":false,"status":"MERGED","comments":[{"timestamp":1490027764,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 1."},{"timestamp":1490028408,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\nFor CR, lockd.c is not too bad and I made extensive mods in there, so probably best to look at all of it. For nfs_tbind.c the functions to set/unset the rpcbind connection are pulled in from elsewhere and only slightly modified. lx_nfslib_bindit has new code to handle the kernel upcall /dev/ticotsord device. nlm_do_one is heavily modified. nlm_unreg is new. The rest is basically unchanged except for replacing calls to syslog with calls to lx_syslog, which can basically be ignored and some cstyle cleanup."},{"timestamp":1490029978,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 2."},{"timestamp":1490037791,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2:\n\n(6 comments)"},{"timestamp":1490121672,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 3."},{"timestamp":1490123146,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1490199651,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 3:\n\n(7 comments)"},{"timestamp":1490208518,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3:\n\n(6 comments)"},{"timestamp":1490208528,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 4."},{"timestamp":1490213964,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 4:\n\n(2 comments)"},{"timestamp":1490218119,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 5."},{"timestamp":1490299510,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1490313125,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1490370491,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 6."},{"timestamp":1490370556,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1490376326,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1490376335,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 6: Integration-Approval+1"},{"timestamp":1490378211,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 7: Patch Set 6 was rebased."},{"timestamp":1490378298,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 8: Commit message was updated."},{"timestamp":1490378988,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jerry Jelinek"}],"currentPatchSet":{"number":"8","revision":"6e02122b92ae0ff127c7ad1013d751eddc8b85e0","parents":["751479cf313828c890bc40ee872a4143b8c31a77"],"ref":"refs/changes/87/1687/8","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1490378298,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1490370556,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1490376326,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1490376335,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1490378988,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/brand/lx/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/brand/lx/lx_brand/common/mount_nfs.c","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"usr/src/lib/brand/lx/lx_lockd/Makefile","type":"ADDED","insertions":61,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_lockd/lockd.c","type":"ADDED","insertions":558,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c","type":"ADDED","insertions":1833,"deletions":0},{"file":"usr/src/lib/brand/lx/zone/platform.xml","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","type":"ADDED","insertions":230,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/intel/Makefile.files","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":2711,"sizeDeletions":-6},"patchSets":[{"number":"1","revision":"3220981a46e1b71cb23c09575f6438de4703c1b8","parents":["282642e497204e64144beac6ac94dbe281fc53f3"],"ref":"refs/changes/87/1687/1","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1490027764,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/brand/lx/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/brand/lx/lx_brand/common/mount_nfs.c","type":"MODIFIED","insertions":63,"deletions":-3},{"file":"usr/src/lib/brand/lx/lx_lockd/Makefile","type":"ADDED","insertions":58,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_lockd/lockd.c","type":"ADDED","insertions":550,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c","type":"ADDED","insertions":1721,"deletions":0},{"file":"usr/src/lib/brand/lx/zone/platform.xml","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":2396,"sizeDeletions":-5},{"number":"2","revision":"09786209c63a36ac44c6cfb3648400914e4babe7","parents":["282642e497204e64144beac6ac94dbe281fc53f3"],"ref":"refs/changes/87/1687/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1490029978,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/lib/brand/lx/lx_brand/common/mount_nfs.c","line":794,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Maybe use vfork?"},{"file":"usr/src/lib/brand/lx/lx_lockd/lockd.c","line":139,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Perhaps add a note about how we expect these to be fulfilled."},{"file":"usr/src/lib/brand/lx/lx_lockd/lockd.c","line":189,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"The smorgasbord of two-letter variables and pointer math makes this rather opaque at first glance."},{"file":"usr/src/lib/brand/lx/lx_lockd/lockd.c","line":196,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Is a syslog formatted message expected here?"},{"file":"usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c","line":30,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I would try to minimize the diff between the original and this copy.  If that means disabling warnings or checks which trigger on the style of the old code, I think it\u0027s worthwhile."},{"file":"usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c","line":137,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I would consider adding a static wrapper function that implemented the same interface as syslog(), which threw away the type argument and called into lx_syslog().  It would cut down on the diff between the native nfs_tbind.c and this one."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/brand/lx/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/brand/lx/lx_brand/common/mount_nfs.c","type":"MODIFIED","insertions":62,"deletions":-3},{"file":"usr/src/lib/brand/lx/lx_lockd/Makefile","type":"ADDED","insertions":58,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_lockd/lockd.c","type":"ADDED","insertions":551,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c","type":"ADDED","insertions":1721,"deletions":0},{"file":"usr/src/lib/brand/lx/zone/platform.xml","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":2396,"sizeDeletions":-5},{"number":"3","revision":"812bb9b1ff6c2024ed5be58edc7b4741a67ced17","parents":["282642e497204e64144beac6ac94dbe281fc53f3"],"ref":"refs/changes/87/1687/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1490121672,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c","line":696,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Maybe just immediately return zero instead of doing all this looping?"},{"file":"usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c","line":696,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Since this function is never used by the lockd, it doesn\u0027t matter, but if we were to return here then technically we should first call endnetconfig. Given this, I\u0027d rather leave it as is."},{"file":"usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c","line":1113,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Nuke this extra line"},{"file":"usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c","line":1113,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"done"},{"file":"usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c","line":1706,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"If the nlm_bindit call fails, do we want to freenetconfigent() the nconf like the other cases?"},{"file":"usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c","line":1706,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"good catch, fixed"},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":59,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Would it be more expedient to use prfind()?"},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":59,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"good idea, I rewrote this function based on your two suggestions."},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":64,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"If we want to be really paranoid, we could vnodetopath p_exec and compare it against LX_LOCKD_PATH."},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":176,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Maybe toss in some ASSERTs/VERIFYs to ensure we\u0027re in the right branding context?"},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":176,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"done"},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":200,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"missing mutex_exit here, I have already added it locally"},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":218,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Even though there may be nothing to do from the userspace emulation, it might be worth having this function return an int for status.  It would make dtracing easier in the face of trouble."},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":218,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/brand/lx/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/brand/lx/lx_brand/common/mount_nfs.c","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"usr/src/lib/brand/lx/lx_lockd/Makefile","type":"ADDED","insertions":61,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_lockd/lockd.c","type":"ADDED","insertions":558,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c","type":"ADDED","insertions":1832,"deletions":0},{"file":"usr/src/lib/brand/lx/zone/platform.xml","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","type":"ADDED","insertions":220,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/intel/Makefile.files","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":2700,"sizeDeletions":-6},{"number":"4","revision":"b59f5b95a29384a83038292b948c3e88ee1f7af0","parents":["282642e497204e64144beac6ac94dbe281fc53f3"],"ref":"refs/changes/87/1687/4","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1490208528,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":60,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"This should be done under p_lock."},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":81,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"This and all the other \u0027curproc\u0027 references in the function could probably use the assigned \u0027p\u0027 instead."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/brand/lx/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/brand/lx/lx_brand/common/mount_nfs.c","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"usr/src/lib/brand/lx/lx_lockd/Makefile","type":"ADDED","insertions":61,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_lockd/lockd.c","type":"ADDED","insertions":558,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c","type":"ADDED","insertions":1833,"deletions":0},{"file":"usr/src/lib/brand/lx/zone/platform.xml","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","type":"ADDED","insertions":228,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/intel/Makefile.files","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":2709,"sizeDeletions":-6},{"number":"5","revision":"fe3c1fa73e91a42c73b3171d53ffacaa55fec38b","parents":["282642e497204e64144beac6ac94dbe281fc53f3"],"ref":"refs/changes/87/1687/5","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1490218119,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1490299510,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"comments":[{"file":"usr/src/lib/brand/lx/lx_lockd/lockd.c","line":62,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"s/of/or/"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/brand/lx/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/brand/lx/lx_brand/common/mount_nfs.c","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"usr/src/lib/brand/lx/lx_lockd/Makefile","type":"ADDED","insertions":61,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_lockd/lockd.c","type":"ADDED","insertions":558,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c","type":"ADDED","insertions":1833,"deletions":0},{"file":"usr/src/lib/brand/lx/zone/platform.xml","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","type":"ADDED","insertions":230,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/intel/Makefile.files","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":2711,"sizeDeletions":-6},{"number":"6","revision":"9099ae0c33a40c96023d75a2e22463b7cf1f047d","parents":["282642e497204e64144beac6ac94dbe281fc53f3"],"ref":"refs/changes/87/1687/6","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1490370491,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1490376326,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1490376335,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1490370556,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/brand/lx/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/brand/lx/lx_brand/common/mount_nfs.c","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"usr/src/lib/brand/lx/lx_lockd/Makefile","type":"ADDED","insertions":61,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_lockd/lockd.c","type":"ADDED","insertions":558,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c","type":"ADDED","insertions":1833,"deletions":0},{"file":"usr/src/lib/brand/lx/zone/platform.xml","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","type":"ADDED","insertions":230,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/intel/Makefile.files","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":2711,"sizeDeletions":-6},{"number":"7","revision":"7f3927498daf63ab72ca4c0aaaf06499f216b388","parents":["751479cf313828c890bc40ee872a4143b8c31a77"],"ref":"refs/changes/87/1687/7","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1490378211,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1490376326,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1490376335,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1490370556,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/brand/lx/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/brand/lx/lx_brand/common/mount_nfs.c","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"usr/src/lib/brand/lx/lx_lockd/Makefile","type":"ADDED","insertions":61,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_lockd/lockd.c","type":"ADDED","insertions":558,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c","type":"ADDED","insertions":1833,"deletions":0},{"file":"usr/src/lib/brand/lx/zone/platform.xml","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","type":"ADDED","insertions":230,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/intel/Makefile.files","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":2711,"sizeDeletions":-6},{"number":"8","revision":"6e02122b92ae0ff127c7ad1013d751eddc8b85e0","parents":["751479cf313828c890bc40ee872a4143b8c31a77"],"ref":"refs/changes/87/1687/8","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1490378298,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1490378988,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1490376326,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1490376335,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1490370556,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/brand/lx/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/brand/lx/lx_brand/common/mount_nfs.c","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"usr/src/lib/brand/lx/lx_lockd/Makefile","type":"ADDED","insertions":61,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_lockd/lockd.c","type":"ADDED","insertions":558,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c","type":"ADDED","insertions":1833,"deletions":0},{"file":"usr/src/lib/brand/lx/zone/platform.xml","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","type":"ADDED","insertions":230,"deletions":0},{"file":"usr/src/uts/common/brand/lx/sys/lx_brand.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/intel/Makefile.files","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":2711,"sizeDeletions":-6}],"allReviewers":[{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}]}