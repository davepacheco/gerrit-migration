{"project":"joyent/illumos-joyent","branch":"master","id":"I13ccd3f0b1c4d0733930e44c1f3e5d0656f953e3","number":"6095","subject":"OS-7689 ctfdump -c goes off the rails with a missing parent OS-7694 ctfdump -c drops last type OS-7700 GCC7-derived CTF can double qualifiers on arrays OS-7733 should ignore DW_TAG_subprogram with DW_AT_declaration tags Reviewed by: Robert Mustacchi \u003crm@j","owner":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"url":"https://cr.joyent.us/6095","commitMessage":"OS-7689 ctfdump -c goes off the rails with a missing parent\nOS-7694 ctfdump -c drops last type\nOS-7700 GCC7-derived CTF can double qualifiers on arrays\nOS-7733 should ignore DW_TAG_subprogram with DW_AT_declaration tags\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nReviewed by: Jason King \u003cjason.king@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1554991423,"lastUpdated":1555516507,"open":false,"status":"MERGED","comments":[{"timestamp":1554991423,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 1."},{"timestamp":1554991425,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit be233830c6be3794840ab86f09382de1ef7b8c64\n    \n    m"},{"timestamp":1554991454,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1: Code-Review-1\n\nnot ready yet"},{"timestamp":1555064133,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 2."},{"timestamp":1555065213,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 3."},{"timestamp":1555065234,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3: -Code-Review"},{"timestamp":1555080313,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1555087171,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3:\n\n(13 comments)"},{"timestamp":1555169966,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3:\n\n(14 comments)"},{"timestamp":1555170015,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 4."},{"timestamp":1555172863,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 5."},{"timestamp":1555298073,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3:\n\n(4 comments)"},{"timestamp":1555330024,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3:\n\n(3 comments)"},{"timestamp":1555331614,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 6."},{"timestamp":1555423946,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 6: Code-Review+1\n\n(1 comment)"},{"timestamp":1555439265,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 6: Code-Review+1\n\nI\u0027ve followed all of Robert\u0027s comments and your responses. I have nothing else useful to add. As best I can see, this all looks good."},{"timestamp":1555441547,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1555462371,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 6:\n\nTesting notes added to the bugs."},{"timestamp":1555514341,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 6: Integration-Approval+1"},{"timestamp":1555515048,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 7: Commit message was updated."},{"timestamp":1555515057,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 8: Patch Set 7 was rebased"},{"timestamp":1555516507,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by John Levon"}],"currentPatchSet":{"number":"8","revision":"adeaa2b6918d69fe48c140f0ca1779a3275f195f","parents":["6dec4a05385ed1b5f25175e319c87f8e96dd992f"],"ref":"refs/changes/95/6095/8","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1555515057,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555423946,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555439265,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555441547,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1555514341,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1555516507,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":14,"deletions":0},{"file":"usr/src/cmd/ctfdump/ctfdump.c","type":"MODIFIED","insertions":55,"deletions":-29},{"file":"usr/src/common/ctf/ctf_impl.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/common/ctf/ctf_lookup.c","type":"MODIFIED","insertions":50,"deletions":-1},{"file":"usr/src/lib/libctf/common/ctf_dwarf.c","type":"MODIFIED","insertions":104,"deletions":-5},{"file":"usr/src/test/util-tests/tests/ctf/Makefile","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-array.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/test/util-tests/tests/ctf/check-common.c","type":"MODIFIED","insertions":53,"deletions":-30},{"file":"usr/src/test/util-tests/tests/ctf/check-common.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/test/util-tests/tests/ctf/check-enum.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/test/util-tests/tests/ctf/check-forward.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/test/util-tests/tests/ctf/check-qualifiers.c","type":"ADDED","insertions":318,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/check-reference.c","type":"MODIFIED","insertions":52,"deletions":-15},{"file":"usr/src/test/util-tests/tests/ctf/check-sou.c","type":"MODIFIED","insertions":38,"deletions":-7},{"file":"usr/src/test/util-tests/tests/ctf/test-merge-weak/test-merge-weak.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/test-qualifiers.c","type":"ADDED","insertions":42,"deletions":0}],"sizeInsertions":732,"sizeDeletions":-98},"patchSets":[{"number":"1","revision":"43d848c5a1e8791f7676851696262da0966d9b78","parents":["e4f70ac1007dda1e42e5f5a7f307834cb429824c"],"ref":"refs/changes/95/6095/1","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1554991423,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1554991454,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/ctfdump/ctfdump.c","type":"MODIFIED","insertions":50,"deletions":-28},{"file":"usr/src/common/ctf/ctf_lookup.c","type":"MODIFIED","insertions":50,"deletions":-1},{"file":"usr/src/lib/libctf/common/ctf_dwarf.c","type":"MODIFIED","insertions":105,"deletions":-4},{"file":"usr/src/lib/libctf/common/mapfile-vers","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/Makefile","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/check-array.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-common.c","type":"MODIFIED","insertions":52,"deletions":-29},{"file":"usr/src/test/util-tests/tests/ctf/check-common.h","type":"MODIFIED","insertions":25,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-enum.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-forward.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-qualifiers.c","type":"ADDED","insertions":318,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/check-reference.c","type":"MODIFIED","insertions":51,"deletions":-14},{"file":"usr/src/test/util-tests/tests/ctf/check-sou.c","type":"MODIFIED","insertions":37,"deletions":-6},{"file":"usr/src/test/util-tests/tests/ctf/test-merge-weak/test-merge-weak.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/test-qualifiers.c","type":"ADDED","insertions":42,"deletions":0},{"file":"usr/src/uts/common/sys/ctf_api.h","type":"MODIFIED","insertions":4,"deletions":0}],"sizeInsertions":745,"sizeDeletions":-86},{"number":"2","revision":"700dfbfb2bf59241230deb05fadbb9cf7a14f454","parents":["e4f70ac1007dda1e42e5f5a7f307834cb429824c"],"ref":"refs/changes/95/6095/2","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1555064133,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1554991454,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/cmd/ctfdump/ctfdump.c","type":"MODIFIED","insertions":50,"deletions":-28},{"file":"usr/src/common/ctf/ctf_lookup.c","type":"MODIFIED","insertions":50,"deletions":-1},{"file":"usr/src/lib/libctf/common/ctf_dwarf.c","type":"MODIFIED","insertions":105,"deletions":-4},{"file":"usr/src/lib/libctf/common/mapfile-vers","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/Makefile","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/check-array.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-common.c","type":"MODIFIED","insertions":52,"deletions":-29},{"file":"usr/src/test/util-tests/tests/ctf/check-common.h","type":"MODIFIED","insertions":25,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-enum.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-forward.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-qualifiers.c","type":"ADDED","insertions":318,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/check-reference.c","type":"MODIFIED","insertions":51,"deletions":-14},{"file":"usr/src/test/util-tests/tests/ctf/check-sou.c","type":"MODIFIED","insertions":37,"deletions":-6},{"file":"usr/src/test/util-tests/tests/ctf/test-merge-weak/test-merge-weak.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/test-qualifiers.c","type":"ADDED","insertions":42,"deletions":0},{"file":"usr/src/uts/common/sys/ctf_api.h","type":"MODIFIED","insertions":4,"deletions":0}],"sizeInsertions":745,"sizeDeletions":-86},{"number":"3","revision":"fe7450ba957cf22c139bde94520adcc6844280b9","parents":["e4f70ac1007dda1e42e5f5a7f307834cb429824c"],"ref":"refs/changes/95/6095/3","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1555065213,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/cmd/ctfdump/ctfdump.c","line":721,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Why are we losing the casting to void of these functions? I don\u0027t believe that\u0027s correct. Won\u0027t smatch and other things complain? Don\u0027t want we to indicate to the reader that we\u0027re opting to ignore these? There are definitely programs where ignoring these can be erroneous, like the bugs in yes that we had to fix. I feel like at least being upfront about the fact that we\u0027re ignoring them is an important indicator."},{"file":"usr/src/cmd/ctfdump/ctfdump.c","line":721,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"smatch has this test explicitly disabled, so there is no noise associated. 99.9% of code *never* cares about printf() return. I find it exceedingly difficult to believe that everyone typing (void) printf() is carefully considering the few circumstances where it\u0027s useful, either."},{"file":"usr/src/cmd/ctfdump/ctfdump.c","line":721,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"OK, I\u0027m not a fan really, but fair enough."},{"file":"usr/src/cmd/ctfdump/ctfdump.c","line":811,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This comment should probably be expanded. Someone who\u0027s not familiar with this isn\u0027t going to know what they should do or what it means."},{"file":"usr/src/cmd/ctfdump/ctfdump.c","line":811,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Done"},{"file":"usr/src/cmd/ctfdump/ctfdump.c","line":1220,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Shouldn\u0027t these go to stderr?"},{"file":"usr/src/cmd/ctfdump/ctfdump.c","line":1220,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Definitely not for the C output, but I did the other"},{"file":"usr/src/cmd/ctfdump/ctfdump.c","line":1220,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I guess the reason you don\u0027t want it there for the C output is so it\u0027s obvious? I guess that seems reasonable for that case."},{"file":"usr/src/cmd/ctfdump/ctfdump.c","line":1220,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Right, especially for running full diffs of proto areas, being able to keep it in the output file seems useful."},{"file":"usr/src/common/ctf/ctf_lookup.c","line":321,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Maybe we should change the normal routines to look things up in the dynamic list before we\u0027ve called ctf_update? At the very least, I don\u0027t think these should be exposed to normal consumers, as at that point, it feels like we\u0027ve done something wrong."},{"file":"usr/src/common/ctf/ctf_lookup.c","line":321,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Can you explain what you\u0027d like to see? I\u0027m not sure attempting to modify every lookup routine to respect the dyn types is worthwhile, but then it\u0027s not really clear to me why this wasn\u0027t done originally either."},{"file":"usr/src/common/ctf/ctf_lookup.c","line":321,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Thinking on it, I suspect the idea was that none of the changes to the CTF container were supposed to be visible until you called ctf_update(). So I guess it\u0027s reasonable to have separate ones which are internal to the library that indicate that you want this other source to be considered."},{"file":"usr/src/common/ctf/ctf_lookup.c","line":321,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"That makes sense, thanks."},{"file":"usr/src/common/ctf/ctf_lookup.c","line":334,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Shouldn\u0027t we check the dtd first?"},{"file":"usr/src/common/ctf/ctf_lookup.c","line":334,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I don\u0027t know, should I? When does this matter?"},{"file":"usr/src/common/ctf/ctf_lookup.c","line":334,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I guess technically they can\u0027t have anything overlapping, so it probably doesn\u0027t need it? I think I would probably check the dynamic stuff first, but I don\u0027t have a good reason for that."},{"file":"usr/src/common/ctf/ctf_lookup.c","line":334,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"OK, I was worried that wasn\u0027t the case and I\u0027d mis-understood this. I went with this order mainly because it\u0027s what all the NULL checks in ctf_create.c do. While they\u0027re all just validity checks, it seems OK? Happy to switch around if you like though."},{"file":"usr/src/lib/libctf/common/ctf_dwarf.c","line":1500,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Would you mind summarizing what the return values mean here? Seems like -1 is error, 0 is don\u0027t add it, one is we need the type? It\u0027s just a bit confusing to try and sort out the exact semantics. Hopefully I have that right."},{"file":"usr/src/lib/libctf/common/ctf_dwarf.c","line":1500,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Done"},{"file":"usr/src/lib/libctf/common/ctf_dwarf.c","line":1504,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"This is defined, but doesn\u0027t appear to be used -- instead \u0027cup-\u003ecu_ctfp\u0027 is still used throughout."},{"file":"usr/src/lib/libctf/common/ctf_dwarf.c","line":1504,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Done"},{"file":"usr/src/lib/libctf/common/ctf_dwarf.c","line":1600,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Shouldn\u0027t this be ctf_errno()?"},{"file":"usr/src/lib/libctf/common/ctf_dwarf.c","line":1600,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Done"},{"file":"usr/src/lib/libctf/common/ctf_dwarf.c","line":2017,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Maybe it\u0027s worth describing how this differs from an extern function declaration? I\u0027m trying to at least convince myself this doesn\u0027t overlap there."},{"file":"usr/src/lib/libctf/common/ctf_dwarf.c","line":2017,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"This is exactly what they are. Have I totally missed some way that we make use of these otherwise?"},{"file":"usr/src/lib/libctf/common/ctf_dwarf.c","line":2017,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"OK, that wasn\u0027t clear to me initially. I guess that\u0027s fine as we\u0027ll have a function pointer in via a different type."},{"file":"usr/src/lib/libctf/common/mapfile-vers","line":82,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"There are no consumers of this external to the library, so should they really be added as visible symbols?"},{"file":"usr/src/lib/libctf/common/mapfile-vers","line":82,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Yeah, I didn\u0027t really think this through properly. I removed this, and moved the declarations to ctf_impl.h"},{"file":"usr/src/test/util-tests/tests/ctf/check-qualifiers.c","line":303,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Once we find a good one, should we break out and stop processing additional variants?"},{"file":"usr/src/test/util-tests/tests/ctf/check-qualifiers.c","line":303,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Done"},{"file":"usr/src/test/util-tests/tests/ctf/check-reference.c","line":215,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Any reason not to declare this with everything else?"},{"file":"usr/src/test/util-tests/tests/ctf/check-reference.c","line":215,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Done"},{"file":"usr/src/test/util-tests/tests/ctf/test-merge-weak/test-merge-weak.c","line":29,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Why was this added?"},{"file":"usr/src/test/util-tests/tests/ctf/test-merge-weak/test-merge-weak.c","line":29,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"GCC7 complains about an undefined function without it."},{"file":"usr/src/uts/common/sys/ctf_api.h","line":276,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"So, the ctf_type_t isn\u0027t traditionally exposed at all through the main library APIs and is usually kept to ctf_impl.h. Is there a reason we need them here?"},{"file":"usr/src/uts/common/sys/ctf_api.h","line":276,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/cmd/ctfdump/ctfdump.c","type":"MODIFIED","insertions":50,"deletions":-28},{"file":"usr/src/common/ctf/ctf_lookup.c","type":"MODIFIED","insertions":50,"deletions":-1},{"file":"usr/src/lib/libctf/common/ctf_dwarf.c","type":"MODIFIED","insertions":105,"deletions":-4},{"file":"usr/src/lib/libctf/common/mapfile-vers","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/Makefile","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/check-array.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-common.c","type":"MODIFIED","insertions":52,"deletions":-29},{"file":"usr/src/test/util-tests/tests/ctf/check-common.h","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-enum.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-forward.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-qualifiers.c","type":"ADDED","insertions":318,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/check-reference.c","type":"MODIFIED","insertions":51,"deletions":-14},{"file":"usr/src/test/util-tests/tests/ctf/check-sou.c","type":"MODIFIED","insertions":37,"deletions":-6},{"file":"usr/src/test/util-tests/tests/ctf/test-merge-weak/test-merge-weak.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/test-qualifiers.c","type":"ADDED","insertions":42,"deletions":0},{"file":"usr/src/uts/common/sys/ctf_api.h","type":"MODIFIED","insertions":4,"deletions":0}],"sizeInsertions":721,"sizeDeletions":-86},{"number":"4","revision":"a5af21d89abc8be5c37bd43701456468c472c92f","parents":["e4f70ac1007dda1e42e5f5a7f307834cb429824c"],"ref":"refs/changes/95/6095/4","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1555170015,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/cmd/ctfdump/ctfdump.c","type":"MODIFIED","insertions":50,"deletions":-28},{"file":"usr/src/common/ctf/ctf_impl.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/common/ctf/ctf_lookup.c","type":"MODIFIED","insertions":50,"deletions":-1},{"file":"usr/src/lib/libctf/common/ctf_dwarf.c","type":"MODIFIED","insertions":105,"deletions":-4},{"file":"usr/src/test/util-tests/tests/ctf/Makefile","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/check-array.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-common.c","type":"MODIFIED","insertions":52,"deletions":-29},{"file":"usr/src/test/util-tests/tests/ctf/check-common.h","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-enum.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-forward.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-qualifiers.c","type":"ADDED","insertions":318,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/check-reference.c","type":"MODIFIED","insertions":51,"deletions":-14},{"file":"usr/src/test/util-tests/tests/ctf/check-sou.c","type":"MODIFIED","insertions":37,"deletions":-6},{"file":"usr/src/test/util-tests/tests/ctf/test-merge-weak/test-merge-weak.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/test-qualifiers.c","type":"ADDED","insertions":42,"deletions":0}],"sizeInsertions":719,"sizeDeletions":-87},{"number":"5","revision":"f7d281490781ab97274b996fd0b837f0674e813a","parents":["e4f70ac1007dda1e42e5f5a7f307834cb429824c"],"ref":"refs/changes/95/6095/5","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1555172863,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/cmd/ctfdump/ctfdump.c","type":"MODIFIED","insertions":54,"deletions":-28},{"file":"usr/src/common/ctf/ctf_impl.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/common/ctf/ctf_lookup.c","type":"MODIFIED","insertions":50,"deletions":-1},{"file":"usr/src/lib/libctf/common/ctf_dwarf.c","type":"MODIFIED","insertions":103,"deletions":-4},{"file":"usr/src/test/util-tests/tests/ctf/Makefile","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/check-array.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-common.c","type":"MODIFIED","insertions":52,"deletions":-29},{"file":"usr/src/test/util-tests/tests/ctf/check-common.h","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-enum.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-forward.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-qualifiers.c","type":"ADDED","insertions":318,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/check-reference.c","type":"MODIFIED","insertions":51,"deletions":-14},{"file":"usr/src/test/util-tests/tests/ctf/check-sou.c","type":"MODIFIED","insertions":37,"deletions":-6},{"file":"usr/src/test/util-tests/tests/ctf/test-merge-weak/test-merge-weak.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/test-qualifiers.c","type":"ADDED","insertions":42,"deletions":0}],"sizeInsertions":721,"sizeDeletions":-87},{"number":"6","revision":"e4267cd7538491320694e1baf221efae8d628a54","parents":["e4f70ac1007dda1e42e5f5a7f307834cb429824c"],"ref":"refs/changes/95/6095/6","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1555331614,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555423946,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555439265,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1555514341,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555441547,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/cmd/ctfdump/ctfdump.c","type":"MODIFIED","insertions":55,"deletions":-29},{"file":"usr/src/common/ctf/ctf_impl.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/common/ctf/ctf_lookup.c","type":"MODIFIED","insertions":50,"deletions":-1},{"file":"usr/src/lib/libctf/common/ctf_dwarf.c","type":"MODIFIED","insertions":104,"deletions":-5},{"file":"usr/src/test/util-tests/tests/ctf/Makefile","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-array.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/test/util-tests/tests/ctf/check-common.c","type":"MODIFIED","insertions":53,"deletions":-30},{"file":"usr/src/test/util-tests/tests/ctf/check-common.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/test/util-tests/tests/ctf/check-enum.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/test/util-tests/tests/ctf/check-forward.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/test/util-tests/tests/ctf/check-qualifiers.c","type":"ADDED","insertions":318,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/check-reference.c","type":"MODIFIED","insertions":52,"deletions":-15},{"file":"usr/src/test/util-tests/tests/ctf/check-sou.c","type":"MODIFIED","insertions":38,"deletions":-7},{"file":"usr/src/test/util-tests/tests/ctf/test-merge-weak/test-merge-weak.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/test-qualifiers.c","type":"ADDED","insertions":42,"deletions":0}],"sizeInsertions":732,"sizeDeletions":-98},{"number":"7","revision":"13ccd3f0b1c4d0733930e44c1f3e5d0656f953e3","parents":["e4f70ac1007dda1e42e5f5a7f307834cb429824c"],"ref":"refs/changes/95/6095/7","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1555515048,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555423946,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555439265,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1555514341,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555441547,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":14,"deletions":0},{"file":"usr/src/cmd/ctfdump/ctfdump.c","type":"MODIFIED","insertions":55,"deletions":-29},{"file":"usr/src/common/ctf/ctf_impl.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/common/ctf/ctf_lookup.c","type":"MODIFIED","insertions":50,"deletions":-1},{"file":"usr/src/lib/libctf/common/ctf_dwarf.c","type":"MODIFIED","insertions":104,"deletions":-5},{"file":"usr/src/test/util-tests/tests/ctf/Makefile","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-array.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/test/util-tests/tests/ctf/check-common.c","type":"MODIFIED","insertions":53,"deletions":-30},{"file":"usr/src/test/util-tests/tests/ctf/check-common.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/test/util-tests/tests/ctf/check-enum.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/test/util-tests/tests/ctf/check-forward.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/test/util-tests/tests/ctf/check-qualifiers.c","type":"ADDED","insertions":318,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/check-reference.c","type":"MODIFIED","insertions":52,"deletions":-15},{"file":"usr/src/test/util-tests/tests/ctf/check-sou.c","type":"MODIFIED","insertions":38,"deletions":-7},{"file":"usr/src/test/util-tests/tests/ctf/test-merge-weak/test-merge-weak.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/test-qualifiers.c","type":"ADDED","insertions":42,"deletions":0}],"sizeInsertions":732,"sizeDeletions":-98},{"number":"8","revision":"adeaa2b6918d69fe48c140f0ca1779a3275f195f","parents":["6dec4a05385ed1b5f25175e319c87f8e96dd992f"],"ref":"refs/changes/95/6095/8","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1555515057,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555423946,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555439265,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1555514341,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555441547,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"SUBM","value":"1","grantedOn":1555516507,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":14,"deletions":0},{"file":"usr/src/cmd/ctfdump/ctfdump.c","type":"MODIFIED","insertions":55,"deletions":-29},{"file":"usr/src/common/ctf/ctf_impl.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/common/ctf/ctf_lookup.c","type":"MODIFIED","insertions":50,"deletions":-1},{"file":"usr/src/lib/libctf/common/ctf_dwarf.c","type":"MODIFIED","insertions":104,"deletions":-5},{"file":"usr/src/test/util-tests/tests/ctf/Makefile","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/check-array.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/test/util-tests/tests/ctf/check-common.c","type":"MODIFIED","insertions":53,"deletions":-30},{"file":"usr/src/test/util-tests/tests/ctf/check-common.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/test/util-tests/tests/ctf/check-enum.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/test/util-tests/tests/ctf/check-forward.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/test/util-tests/tests/ctf/check-qualifiers.c","type":"ADDED","insertions":318,"deletions":0},{"file":"usr/src/test/util-tests/tests/ctf/check-reference.c","type":"MODIFIED","insertions":52,"deletions":-15},{"file":"usr/src/test/util-tests/tests/ctf/check-sou.c","type":"MODIFIED","insertions":38,"deletions":-7},{"file":"usr/src/test/util-tests/tests/ctf/test-merge-weak/test-merge-weak.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/test/util-tests/tests/ctf/test-qualifiers.c","type":"ADDED","insertions":42,"deletions":0}],"sizeInsertions":732,"sizeDeletions":-98}],"allReviewers":[{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}]}