{"project":"joyent/illumos-extra","branch":"master","id":"Id6afa5f0952c18c4ba688ca22659d836f8db7cb3","number":"3162","subject":"OS-6532 Add rsync patches that don\u0027t ship in the 3.1.2 tarball Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Reviewed by: Jason King \u003cjason.king@joyent.com\u003e Approved by: Jason King \u003cjason.king@joyent.com\u003e","owner":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"url":"https://cr.joyent.us/3162","commitMessage":"OS-6532 Add rsync patches that don\u0027t ship in the 3.1.2 tarball\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nReviewed by: Jason King \u003cjason.king@joyent.com\u003e\nApproved by: Jason King \u003cjason.king@joyent.com\u003e\n","createdOn":1515187645,"lastUpdated":1516230620,"open":false,"status":"MERGED","comments":[{"timestamp":1515187645,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 1."},{"timestamp":1515685582,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1515686041,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1515686263,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1515686275,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\nOverall comment:  Can we keep the same \u0027git-am\u0027-style formatting for all the patches, including 000X-Synopsis.patch file naming?  The consistency in other illumos-extra areas (such as openssl1x/Patches) is nice, IMO"},{"timestamp":1515687703,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 2."},{"timestamp":1515688287,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1516218841,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1516230509,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1516230577,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 3: Commit message was updated."},{"timestamp":1516230620,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Cody Peter Mello"}],"currentPatchSet":{"number":"3","revision":"fac27a4a65743aa3a39761878d2c14b1877e707f","parents":["b90ebff225fc60d39168ae4a83df9915cb889c9a"],"ref":"refs/changes/62/3162/3","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1516230577,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515688287,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1516218841,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1516230509,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"SUBM","value":"1","grantedOn":1516230620,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"rsync/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"rsync/Patches/0001-Enforce-trailing-0-when-receiving-xattr-name-values.patch","type":"ADDED","insertions":31,"deletions":0},{"file":"rsync/Patches/0002-Check-fname-in-recv_files-sooner.patch","type":"ADDED","insertions":44,"deletions":0},{"file":"rsync/Patches/0003-Sanitize-xname-in-read_ndx_and_attrs.patch","type":"ADDED","insertions":38,"deletions":0},{"file":"rsync/Patches/0004-Check-daemon-filter-against-fnamecmp-in-recv_files.patch","type":"ADDED","insertions":27,"deletions":0},{"file":"rsync/Patches/0005-Add-copy-devices-option.patch","type":"ADDED","insertions":117,"deletions":0},{"file":"rsync/Patches/0006-Fix-rsync-manual-page.patch","fileOld":"rsync/rsync.1.diff","type":"RENAMED","insertions":5,"deletions":0},{"file":"rsync/Patches/0007-Speedup-xattrs.patch","type":"ADDED","insertions":833,"deletions":0},{"file":"rsync/Patches/0008-Pass-along-ssh-4-6-options.patch","type":"ADDED","insertions":120,"deletions":0},{"file":"rsync/Patches/0009-Fix-progress-quirks.patch","type":"ADDED","insertions":130,"deletions":0},{"file":"rsync/Patches/0010-Add-time-limit-option.patch","type":"ADDED","insertions":352,"deletions":0}],"sizeInsertions":1698,"sizeDeletions":-1},"patchSets":[{"number":"1","revision":"df52c245df39f2c540ea70828815ca53af312d22","parents":["b90ebff225fc60d39168ae4a83df9915cb889c9a"],"ref":"refs/changes/62/3162/1","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1515187645,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515686263,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"comments":[{"file":"rsync/Patches/0003-Sanitize-xname-in-read_ndx_and_attrs.patch","line":20,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"I don\u0027t see where this can ever be set.  Are we missing part of this?"},{"file":"rsync/Patches/0003-Sanitize-xname-in-read_ndx_and_attrs.patch","line":20,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"The value lives in util.c (initialized to 0), and gets set in clientserver.c to 1. This patch just makes rsync.c pay attention to what the value is."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"rsync/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"rsync/Patches/0001-Enforce-trailing-0-when-receiving-xattr-name-values.patch","type":"ADDED","insertions":31,"deletions":0},{"file":"rsync/Patches/0002-Check-fname-in-recv_files-sooner.patch","type":"ADDED","insertions":44,"deletions":0},{"file":"rsync/Patches/0003-Sanitize-xname-in-read_ndx_and_attrs.patch","type":"ADDED","insertions":38,"deletions":0},{"file":"rsync/Patches/0004-Check-daemon-filter-against-fnamecmp-in-recv_files.patch","type":"ADDED","insertions":27,"deletions":0},{"file":"rsync/Patches/copy-devices.diff","type":"ADDED","insertions":113,"deletions":0},{"file":"rsync/Patches/rsync.1.diff","fileOld":"rsync/rsync.1.diff","type":"RENAMED","insertions":0,"deletions":0},{"file":"rsync/Patches/speedup-xattrs.diff","type":"ADDED","insertions":833,"deletions":0},{"file":"rsync/Patches/ssh-4-6-options.diff","type":"ADDED","insertions":116,"deletions":0},{"file":"rsync/Patches/templines.diff","type":"ADDED","insertions":122,"deletions":0},{"file":"rsync/Patches/time-limit.diff","type":"ADDED","insertions":348,"deletions":0}],"sizeInsertions":1673,"sizeDeletions":-1},{"number":"2","revision":"d6afa5f0952c18c4ba688ca22659d836f8db7cb3","parents":["b90ebff225fc60d39168ae4a83df9915cb889c9a"],"ref":"refs/changes/62/3162/2","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1515687703,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1516218841,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515688287,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1516230509,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"rsync/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"rsync/Patches/0001-Enforce-trailing-0-when-receiving-xattr-name-values.patch","type":"ADDED","insertions":31,"deletions":0},{"file":"rsync/Patches/0002-Check-fname-in-recv_files-sooner.patch","type":"ADDED","insertions":44,"deletions":0},{"file":"rsync/Patches/0003-Sanitize-xname-in-read_ndx_and_attrs.patch","type":"ADDED","insertions":38,"deletions":0},{"file":"rsync/Patches/0004-Check-daemon-filter-against-fnamecmp-in-recv_files.patch","type":"ADDED","insertions":27,"deletions":0},{"file":"rsync/Patches/0005-Add-copy-devices-option.patch","type":"ADDED","insertions":117,"deletions":0},{"file":"rsync/Patches/0006-Fix-rsync-manual-page.patch","fileOld":"rsync/rsync.1.diff","type":"RENAMED","insertions":5,"deletions":0},{"file":"rsync/Patches/0007-Speedup-xattrs.patch","type":"ADDED","insertions":833,"deletions":0},{"file":"rsync/Patches/0008-Pass-along-ssh-4-6-options.patch","type":"ADDED","insertions":120,"deletions":0},{"file":"rsync/Patches/0009-Fix-progress-quirks.patch","type":"ADDED","insertions":130,"deletions":0},{"file":"rsync/Patches/0010-Add-time-limit-option.patch","type":"ADDED","insertions":352,"deletions":0}],"sizeInsertions":1698,"sizeDeletions":-1},{"number":"3","revision":"fac27a4a65743aa3a39761878d2c14b1877e707f","parents":["b90ebff225fc60d39168ae4a83df9915cb889c9a"],"ref":"refs/changes/62/3162/3","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1516230577,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1516230620,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1516218841,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515688287,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1516230509,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"rsync/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"rsync/Patches/0001-Enforce-trailing-0-when-receiving-xattr-name-values.patch","type":"ADDED","insertions":31,"deletions":0},{"file":"rsync/Patches/0002-Check-fname-in-recv_files-sooner.patch","type":"ADDED","insertions":44,"deletions":0},{"file":"rsync/Patches/0003-Sanitize-xname-in-read_ndx_and_attrs.patch","type":"ADDED","insertions":38,"deletions":0},{"file":"rsync/Patches/0004-Check-daemon-filter-against-fnamecmp-in-recv_files.patch","type":"ADDED","insertions":27,"deletions":0},{"file":"rsync/Patches/0005-Add-copy-devices-option.patch","type":"ADDED","insertions":117,"deletions":0},{"file":"rsync/Patches/0006-Fix-rsync-manual-page.patch","fileOld":"rsync/rsync.1.diff","type":"RENAMED","insertions":5,"deletions":0},{"file":"rsync/Patches/0007-Speedup-xattrs.patch","type":"ADDED","insertions":833,"deletions":0},{"file":"rsync/Patches/0008-Pass-along-ssh-4-6-options.patch","type":"ADDED","insertions":120,"deletions":0},{"file":"rsync/Patches/0009-Fix-progress-quirks.patch","type":"ADDED","insertions":130,"deletions":0},{"file":"rsync/Patches/0010-Add-time-limit-option.patch","type":"ADDED","insertions":352,"deletions":0}],"sizeInsertions":1698,"sizeDeletions":-1}],"allReviewers":[{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}]}