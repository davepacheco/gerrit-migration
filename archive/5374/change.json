{"project":"joyent/smartos-live","branch":"master","topic":"newboot","id":"I0eb84aeaf1a2ee0bdecd520a4d41aa22867f96b5","number":"5374","subject":"OS-7260 SmartOS should support booting with loader OS-7271 proto.boot should include loader instead of grub OS-7309 build tools should support loader-based boot images OS-7364 fs_joyent.sh test needs quotes Portions contributed by: Rob Johnston \u003crob.johns","owner":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"url":"https://cr.joyent.us/5374","commitMessage":"OS-7260 SmartOS should support booting with loader\nOS-7271 proto.boot should include loader instead of grub\nOS-7309 build tools should support loader-based boot images\nOS-7364 fs_joyent.sh test needs quotes\nPortions contributed by: Rob Johnston \u003crob.johnston@joyent.com\u003e\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nApproved by: Robert Mustacchi \u003crm@joyent.com\u003e\n","createdOn":1547734324,"lastUpdated":1554714310,"open":false,"status":"MERGED","comments":[{"timestamp":1547734324,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 1."},{"timestamp":1547734371,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\nThis is a preliminary CR for newboot. Please do review but bear in mind we are still beginning to test etc. so there may be changes to come still"},{"timestamp":1547734380,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1547840393,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(25 comments)"},{"timestamp":1547904254,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\n(16 comments)"},{"timestamp":1548169073,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 2."},{"timestamp":1548169129,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1548205170,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2:\n\n(10 comments)\n\nThanks for the clean up. A few additional comments and follow ups."},{"timestamp":1548249746,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 2:\n\n(4 comments)"},{"timestamp":1548251286,"reviewer":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1548254375,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 3."},{"timestamp":1548254440,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1548258351,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3:\n\n(8 comments)\n\nI don\u0027t have much to add beyond all of Robert\u0027s comments. I did notice a few nits."},{"timestamp":1548258590,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3:\n\n(2 comments)"},{"timestamp":1548265716,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 4."},{"timestamp":1548265775,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1548273477,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 4:\n\nI know this is still WIP, but the latest changes look good to me. I can re-review again after the final update."},{"timestamp":1548283483,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1548323407,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1548373983,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4: Code-Review+1\n\n(2 comments)"},{"timestamp":1548374255,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 4:\n\n(2 comments)"},{"timestamp":1550512066,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 5."},{"timestamp":1550512118,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1550831514,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 6."},{"timestamp":1550831570,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1550882254,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 6:\n\n(3 comments)"},{"timestamp":1551013819,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 4:\n\n(1 comment)\n\n/etc/issue was changed by Rob as:\n\n    Fix /etc/issue so that it renders better with white background"},{"timestamp":1551013858,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1551102961,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 7."},{"timestamp":1551103021,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1551112178,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 7: Code-Review+1"},{"timestamp":1551124488,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 7:\n\n(1 comment)"},{"timestamp":1551125870,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 7:\n\n(1 comment)"},{"timestamp":1551126630,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 7:\n\n(1 comment)"},{"timestamp":1551127084,"reviewer":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"message":"Patch Set 7: Code-Review+1\n\n(2 comments)\n\nOverall it looks good and with a few tiny tweaks for personal usage i have the exact same behavior as my old setup. (Minus some pcskr beeps at starting screen on efi console)"},{"timestamp":1551190541,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 8."},{"timestamp":1551190571,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 8:\n\nRob fixed the colours back as requested"},{"timestamp":1551190597,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1551205370,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 8: Code-Review+1\n\nIn general, looks good. I did notice we\u0027re missing copyright headers for the new files."},{"timestamp":1551223341,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 8: Code-Review+1"},{"timestamp":1551784982,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Topic set to newboot"},{"timestamp":1553953536,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 9."},{"timestamp":1553953565,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 9:\n\nResync with master"},{"timestamp":1553953589,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554112530,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 10: Patch Set 9 was rebased."},{"timestamp":1554112572,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 10:\n\nSorry, try that again, should have actually rebased this time."},{"timestamp":1554305885,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 10: Integration-Approval+1"},{"timestamp":1554312599,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 11: Commit message was updated."},{"timestamp":1554389634,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 12: Patch Set 11 was rebased"},{"timestamp":1554389689,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 12:\n\n\"make check\" passed ok"},{"timestamp":1554714310,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by John Levon"}],"currentPatchSet":{"number":"12","revision":"b1b596be209110c23936346fdf403020c3fca336","parents":["f09afc33f0583bd1b86519a99756cbc9b905bd45"],"ref":"refs/changes/74/5374/12","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1554389634,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551205370,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551223341,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553953589,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554305885,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1554714310,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":14,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":16,"deletions":-20},{"file":"configure","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"overlay/generic/boot/forth/menu.rc","type":"ADDED","insertions":116,"deletions":0},{"file":"overlay/generic/lib/sdc/config.sh","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"overlay/generic/lib/sdc/usb-key.sh","type":"ADDED","insertions":208,"deletions":0},{"file":"overlay/generic/lib/svc/method/fs-joyent","type":"MODIFIED","insertions":8,"deletions":-72},{"file":"overlay/generic/lib/svc/method/smartdc-init","type":"MODIFIED","insertions":1,"deletions":-267},{"file":"overlay/generic/manifest","type":"MODIFIED","insertions":3,"deletions":0},{"file":"src/nictagadm","type":"MODIFIED","insertions":4,"deletions":-27},{"file":"tools/build_boot_image","type":"ADDED","insertions":412,"deletions":0},{"file":"tools/build_iso","type":"DELETED","insertions":0,"deletions":-392},{"file":"tools/build_live","type":"MODIFIED","insertions":9,"deletions":0},{"file":"tools/build_usb","type":"DELETED","insertions":0,"deletions":-1},{"file":"tools/format_image/Makefile","type":"ADDED","insertions":40,"deletions":0},{"file":"tools/format_image/format_image.c","type":"ADDED","insertions":406,"deletions":0},{"file":"tools/images/1gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/2gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/4gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/8gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/make_image","type":"DELETED","insertions":0,"deletions":-263},{"file":"tools/usb_fdisk_table","type":"DELETED","insertions":0,"deletions":-52}],"sizeInsertions":1243,"sizeDeletions":-1123},"patchSets":[{"number":"1","revision":"c462a4a92266d2a2e18ae4bf34be025d0a0c53cf","parents":["8f1e83bbc31331e3df3195a73ce4aff4797d60fe"],"ref":"refs/changes/74/5374/1","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1547734324,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1547734380,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"Makefile","line":160,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Are we dropping all the other image sizes?"},{"file":"Makefile","line":160,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"We asked around and couldn\u0027t find someone who needed them, and they are significantly slower to build now"},{"file":"Makefile","line":160,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"OK, thanks for clarifying."},{"file":"TODO","line":1,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Obviously this will get removed"},{"file":"TODO","line":2,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I assume this\u0027ll go away when this is wrapped up?"},{"file":"TODO","line":2,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Yes"},{"file":"overlay/generic/boot/forth/menu.rc","line":14,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is this actually the FreeBSD title that we\u0027re drawing?"},{"file":"overlay/generic/lib/sdc/usb-key.sh","line":27,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I know these are all commented above, but I think it\u0027d be a bit nicer if we could just make them actual variables. But I defer on that."},{"file":"overlay/generic/lib/sdc/usb-key.sh","line":27,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Thanks."},{"file":"overlay/generic/lib/sdc/usb-key.sh","line":54,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Do we care about failure here at all? This is true for the other occurrences of this motif in this file."},{"file":"overlay/generic/lib/sdc/usb-key.sh","line":54,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"In this usage elsewhere, we don\u0027t care. If this doesn\u0027t work, nothing\u0027s going to work."},{"file":"overlay/generic/lib/sdc/usb-key.sh","line":54,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"OK, fair enough."},{"file":"overlay/generic/lib/sdc/usb-key.sh","line":144,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Two copies of the same function?"},{"file":"overlay/generic/lib/sdc/usb-key.sh","line":144,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"oops"},{"file":"src/vm/node_modules/VM.js","line":8134,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Why is this change here? It seems unrelated to anything related to what we\u0027re doing. It seems like if it is, we should probably pull it out and integrate it separately."},{"file":"src/vm/node_modules/VM.js","line":8134,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Mistake in my CR generation"},{"file":"tools/build_boot_image","line":1,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I think we\u0027ve conventionally used /bin/bash for these scripts."},{"file":"tools/build_boot_image","line":36,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Sounds like we should file a follow on bug to add uspport to this."},{"file":"tools/build_boot_image","line":36,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I\u0027m not sure I agree. The crappy, weird, old syntax we had for mounting partitions in PCFS is/was a wart. If we\u0027re going to fix anything, we should fix our whole suite of disk management tools to understand things outside of cmlb."},{"file":"tools/build_boot_image","line":36,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"OK, whatever the right way forward is, let\u0027s get something filed at least? I agree the pcfs bits are odd, but if we can\u0027t mount the things we need to, that seems problematic in general."},{"file":"tools/build_boot_image","line":36,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Note it\u0027s only in NGZs we really have the problem.\n\nI filed:\n\nOS-7530 labeled lofi should work in a zone\nOS-7531 would like a filesystem image tool"},{"file":"tools/build_boot_image","line":36,"reviewer":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"message":"Just checking if I got this right, mounting the usb key and dropping in a new platform folder will no longer be support?\n\nDoes that also apply to the vanilla SmartOS images? If so, I think a lot of people (me included) use that methode to update our remote servers where we cannot just swap the USB."},{"file":"tools/build_boot_image","line":36,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"No, that still works fine. For Triton, you should use sdc-usbkey mount, though. For SmartOS, you\u0027ll need to adjust your mount command if you\u0027re using newboot (or make use of /lib/sdc/usb-key.sh)"},{"file":"tools/build_boot_image","line":36,"reviewer":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"message":"Right, because in the gz pcfs does not need to parse an MBR/GPT partition because that is already done and it can mount from /dev/(r)dsk/whatever! Just the offset needs to change because the first partition will be the EFI one."},{"file":"tools/build_boot_image","line":44,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"The reason that these variables have a bi_ prefix is so that way globals are easier to spot and have a similar form, like in C. Optional, but would be nice if new globals were similar."},{"file":"tools/build_boot_image","line":44,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Realised I forgot to do this"},{"file":"tools/build_boot_image","line":101,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Minor, but the old mode of having the the arg name in there was nice for consistency."},{"file":"tools/build_boot_image","line":101,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Do you mean $0 ?"},{"file":"tools/build_boot_image","line":101,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I always set it explicitly to the basename of $0."},{"file":"tools/build_boot_image","line":117,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is there a reason we\u0027re losing the older options to default to kmdb or to allow someone to append to the kernel command line? I\u0027d like to understand how we picked what got to say and what had to go."},{"file":"tools/build_boot_image","line":117,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I don\u0027t want to speak for Rob but:\n\nFor me we have way too many config options and flags in general that are either potentially unused, don\u0027t work, are untested, or all three. (Whether joysetup.sh actually takes argv or not is another example). This ends up causing a fair amount of development friction where people new to the code have no idea what\u0027s actually important.\n\nSo I\u0027ve tried to be a bit stricter about what we actually support, to reduce our dev/test load (it\u0027d still be nice to auto-test some of this but that\u0027s non-obvious in a few cases).\n\nOn this basis I feel it\u0027s much easier for somebody to complain and we go add something later, than to have something that never gets removed.\n\n(And on that note, I meant to cycle round on the UFS support - why is it there, does it work, and who uses it?)"},{"file":"tools/build_boot_image","line":117,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I can\u0027t speak to ufs support, but the various things like going to kmdb by default or allowing for extra boot options were all things I added for development cases. It sounds like if I need it again in the future, I should just add it then.\n\nAs for UFS, I\u0027m not sure it certainly was not part of the original tools/build_iso and eventual tools/build_usb support. ./tools/build_usb has only ever supported PCFS."},{"file":"tools/build_boot_image","line":117,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I\u0027ve removed UFS.\n\nRe the other options: it\u0027s much easier in loader for a bunch of this stuff. If you really do need to supply additional arguments permanently for a created image, you can create and deliver boot/loader.rc.local with them in (boot-args).\n\nI guess I\u0027m not clear on what circumstances this is useful as opposed to having people change it as needed, though."},{"file":"tools/build_boot_image","line":117,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"They were there because sometimes when dealing with hardware, you can\u0027t simply just select an option for various bad reasons. I didn\u0027t add them just because I was lazy. But it\u0027s fine, I\u0027ll just deal with it another way in the future."},{"file":"tools/build_boot_image","line":117,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I wasn\u0027t trying to imply laziness (after all, building a new image is clearly more effort), just trying to understand. Either way, loader.rc.local is a much simpler way to do what you need."},{"file":"tools/build_boot_image","line":182,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I know on PCFS perms are meaningless, but should it really be 666?"},{"file":"tools/build_boot_image","line":347,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"We lost the shopt -c xpg_echo from the old scripts, but are using the same techniques in printing."},{"file":"tools/build_boot_image","line":347,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I don\u0027t think it\u0027s necessary?"},{"file":"tools/build_boot_image","line":349,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Probably worth throwing in an unalias -a to make sure that others don\u0027t throw things off."},{"file":"tools/format_image/Makefile","line":7,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is there a reason we need this?"},{"file":"tools/format_image/Makefile","line":7,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"/home/gk/src/uefi/tools/format_image/../../projects/illumos/usr/src/lib/libefi/common/rdwr_efi.c: In function \u0027efi_read\u0027:\n/home/gk/src/uefi/tools/format_image/../../projects/illumos/usr/src/lib/libefi/common/rdwr_efi.c:637:16: error: comparison between signed and unsigned integer expressions [-Werror\u003dsign-compare]\n\nLots of this"},{"file":"tools/format_image/Makefile","line":8,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"You want -isystem, which will solve the likely no-unknown-pragmas. However, it\u0027s not generally safe to actually be pulling in from the proto area. For example, if we #pragma redefine_extname a symbol, we\u0027ll not be able to correctly build this program anymore."},{"file":"tools/format_image/Makefile","line":8,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"RE isystem will fix (Have to fix an ident too, but that\u0027s fine.)\n\nRe: the proto stuff. If this breaks, we\u0027ll have to keep a copy of our source. Until then, this approach seems less likely to cause problems. I\u0027m aware it\u0027s not pretty.\n\nI actually wonder if it\u0027s better not to have the -isystem at all?"},{"file":"tools/format_image/Makefile","line":8,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Well, taking a step back, what are the actual paths you want and what order do you want them searched?"},{"file":"tools/format_image/Makefile","line":8,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I\u0027ve removed the proto header now as discussed in chat"},{"file":"tools/format_image/Makefile","line":11,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This combined with the above -I could easily cause this to no longer work. For example, when we do the update for SMBIOS 3.2 we update what the most recent SBMIOS version software will get is; however, the library that we\u0027re actually using which isn\u0027t from the proto area, will not have support for that and so any use of the smbios library will fail.\n\nHowever, I don\u0027t see any use of smbios in the actual build file, so is this really necessary?"},{"file":"tools/format_image/Makefile","line":11,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"it\u0027s used from the libefi code."},{"file":"tools/format_image/format_image.c","line":81,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"You define SECTOR_SIZE at +91, probably this whole chunk needs to be after that?"},{"file":"tools/format_image/format_image.c","line":140,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"vwarnx(3C)?"},{"file":"tools/format_image/format_image.c","line":235,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is there a reason we don\u0027t care about overflow and aborting here? I know by inspection that this is currently right, but there\u0027s nothing that guarantees that in the future."},{"file":"tools/format_image/format_image.c","line":247,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It this supposed to be using libefi? Why isn\u0027t there a -lefi in the LDLIBS?"},{"file":"tools/format_image/format_image.c","line":247,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I guess you picked this up from looking at the Makefile, where this is explained."},{"file":"tools/format_image/format_image.c","line":247,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I misunderstood the original comment."},{"file":"tools/format_image/format_image.c","line":296,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Why do we need to do unary negation? Aren\u0027t these all uint32_t values? What does it mean to apply unary negation to a uint32_t?"},{"file":"tools/format_image/format_image.c","line":296,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"This is copied code from mboot_extra.c. Still want me to investigate?"},{"file":"tools/format_image/format_image.c","line":296,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I see, OK. Would be nice to understand, but not the most important."},{"file":"tools/format_image/format_image.c","line":373,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It\u0027d be kind of nice if we said what was missing."},{"file":"tools/format_image/format_image.c","line":373,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I can if you want, but this isn\u0027t a utility people are supposed to be running themselves. You\u0027d only hit that if you were messing with the Makefiles."},{"file":"tools/format_image/format_image.c","line":378,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Any reason we never close outfile?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":17,"deletions":-21},{"file":"TODO","type":"ADDED","insertions":34,"deletions":0},{"file":"overlay/generic/boot/forth/menu.rc","type":"ADDED","insertions":116,"deletions":0},{"file":"overlay/generic/lib/sdc/config.sh","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"overlay/generic/lib/sdc/usb-key.sh","type":"ADDED","insertions":189,"deletions":0},{"file":"overlay/generic/lib/svc/method/fs-joyent","type":"MODIFIED","insertions":8,"deletions":-72},{"file":"overlay/generic/lib/svc/method/smartdc-init","type":"MODIFIED","insertions":1,"deletions":-267},{"file":"overlay/generic/manifest","type":"MODIFIED","insertions":3,"deletions":0},{"file":"src/nictagadm","type":"MODIFIED","insertions":4,"deletions":-27},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":20,"deletions":-1},{"file":"tools/build_boot_image","type":"ADDED","insertions":421,"deletions":0},{"file":"tools/build_iso","type":"DELETED","insertions":0,"deletions":-392},{"file":"tools/build_live","type":"MODIFIED","insertions":9,"deletions":0},{"file":"tools/build_usb","type":"DELETED","insertions":0,"deletions":-1},{"file":"tools/format_image/Makefile","type":"ADDED","insertions":32,"deletions":0},{"file":"tools/format_image/format_image.c","type":"ADDED","insertions":403,"deletions":0},{"file":"tools/images/1gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/2gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/4gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/8gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/make_image","type":"DELETED","insertions":0,"deletions":-263},{"file":"tools/usb_fdisk_table","type":"DELETED","insertions":0,"deletions":-52}],"sizeInsertions":1276,"sizeDeletions":-1124},{"number":"2","revision":"86450612ca79af88f093f366a3d7d085d50575e1","parents":["6c1f3983a964960d8f988414267c278a0f000c92"],"ref":"refs/changes/74/5374/2","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1548169073,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1548169129,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"Makefile","line":13,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This went back in time between revs?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":17,"deletions":-21},{"file":"TODO","type":"ADDED","insertions":36,"deletions":0},{"file":"configure","type":"MODIFIED","insertions":1,"deletions":0},{"file":"overlay/generic/boot/forth/menu.rc","type":"ADDED","insertions":116,"deletions":0},{"file":"overlay/generic/lib/sdc/config.sh","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"overlay/generic/lib/sdc/usb-key.sh","type":"ADDED","insertions":245,"deletions":0},{"file":"overlay/generic/lib/svc/method/fs-joyent","type":"MODIFIED","insertions":8,"deletions":-72},{"file":"overlay/generic/lib/svc/method/smartdc-init","type":"MODIFIED","insertions":1,"deletions":-267},{"file":"overlay/generic/manifest","type":"MODIFIED","insertions":3,"deletions":0},{"file":"src/nictagadm","type":"MODIFIED","insertions":4,"deletions":-27},{"file":"tools/build_boot_image","type":"ADDED","insertions":422,"deletions":0},{"file":"tools/build_iso","type":"DELETED","insertions":0,"deletions":-392},{"file":"tools/build_live","type":"MODIFIED","insertions":9,"deletions":0},{"file":"tools/build_usb","type":"DELETED","insertions":0,"deletions":-1},{"file":"tools/format_image/Makefile","type":"ADDED","insertions":39,"deletions":0},{"file":"tools/format_image/format_image.c","type":"ADDED","insertions":406,"deletions":0},{"file":"tools/images/1gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/2gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/4gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/8gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/make_image","type":"DELETED","insertions":0,"deletions":-263},{"file":"tools/usb_fdisk_table","type":"DELETED","insertions":0,"deletions":-52}],"sizeInsertions":1326,"sizeDeletions":-1123},{"number":"3","revision":"ae98283ffb2a8a9e13303bb8373eb7fd6093422d","parents":["6c1f3983a964960d8f988414267c278a0f000c92"],"ref":"refs/changes/74/5374/3","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1548254375,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1548254440,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"Makefile","line":157,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"extraneous"},{"file":"overlay/generic/lib/sdc/usb-key.sh","line":59,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"this seems wrong since you can assign mnt at line 62"},{"file":"overlay/generic/lib/sdc/usb-key.sh","line":72,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"shouldn\u0027t this be \u003e\u00262"},{"file":"overlay/generic/lib/sdc/usb-key.sh","line":115,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"this seems wrong since you can assign at line 118"},{"file":"overlay/generic/lib/sdc/usb-key.sh","line":153,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"do you want to redirect error the same as above functions?"},{"file":"overlay/generic/lib/sdc/usb-key.sh","line":168,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"are we mounting the usbkey twice (first from the call at line 141)?"},{"file":"overlay/generic/lib/sdc/usb-key.sh","line":168,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"No, this is mounting the ESP (s0) not the root partition (s2)"},{"file":"overlay/generic/lib/sdc/usb-key.sh","line":243,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"similar question about error redirection"},{"file":"tools/format_image/format_image.c","line":169,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"remove"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":17,"deletions":-21},{"file":"TODO","type":"ADDED","insertions":36,"deletions":0},{"file":"configure","type":"MODIFIED","insertions":1,"deletions":0},{"file":"overlay/generic/boot/forth/menu.rc","type":"ADDED","insertions":116,"deletions":0},{"file":"overlay/generic/lib/sdc/config.sh","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"overlay/generic/lib/sdc/usb-key.sh","type":"ADDED","insertions":245,"deletions":0},{"file":"overlay/generic/lib/svc/method/fs-joyent","type":"MODIFIED","insertions":8,"deletions":-72},{"file":"overlay/generic/lib/svc/method/smartdc-init","type":"MODIFIED","insertions":1,"deletions":-267},{"file":"overlay/generic/manifest","type":"MODIFIED","insertions":3,"deletions":0},{"file":"src/nictagadm","type":"MODIFIED","insertions":4,"deletions":-27},{"file":"tools/build_boot_image","type":"ADDED","insertions":408,"deletions":0},{"file":"tools/build_iso","type":"DELETED","insertions":0,"deletions":-392},{"file":"tools/build_live","type":"MODIFIED","insertions":9,"deletions":0},{"file":"tools/build_usb","type":"DELETED","insertions":0,"deletions":-1},{"file":"tools/format_image/Makefile","type":"ADDED","insertions":39,"deletions":0},{"file":"tools/format_image/format_image.c","type":"ADDED","insertions":406,"deletions":0},{"file":"tools/images/1gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/2gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/4gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/8gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/make_image","type":"DELETED","insertions":0,"deletions":-263},{"file":"tools/usb_fdisk_table","type":"DELETED","insertions":0,"deletions":-52}],"sizeInsertions":1312,"sizeDeletions":-1123},{"number":"4","revision":"3fffed9a8bc81bae14094382f768506508bf92ae","parents":["6c1f3983a964960d8f988414267c278a0f000c92"],"ref":"refs/changes/74/5374/4","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1548265716,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1548373983,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1548265775,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"overlay/generic/lib/sdc/config.sh","line":81,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Out of curiosity, why the change from awk to cut?"},{"file":"overlay/generic/lib/sdc/config.sh","line":81,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I don\u0027t know of an equally brief way for awk to print all columns other than the first. And the old code broke on an equals sign in the value."},{"file":"overlay/generic/lib/sdc/usb-key.sh","line":139,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I assume this was removed because it\u0027s no longer needed?"},{"file":"overlay/generic/lib/sdc/usb-key.sh","line":139,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Yes, we can\u0027t rely on it from a CN so we don\u0027t need a PI copy"},{"file":"overlay/generic/lib/sdc/usb-key.sh","line":243,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Minor nit, but any reason we can\u0027t have the default case styled the same way?"},{"file":"overlay/generic/lib/sdc/usb-key.sh","line":243,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"will do"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":17,"deletions":-21},{"file":"TODO","type":"ADDED","insertions":36,"deletions":0},{"file":"configure","type":"MODIFIED","insertions":1,"deletions":0},{"file":"overlay/generic/boot/forth/menu.rc","type":"ADDED","insertions":116,"deletions":0},{"file":"overlay/generic/lib/sdc/config.sh","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"overlay/generic/lib/sdc/usb-key.sh","type":"ADDED","insertions":245,"deletions":0},{"file":"overlay/generic/lib/svc/method/fs-joyent","type":"MODIFIED","insertions":8,"deletions":-72},{"file":"overlay/generic/lib/svc/method/smartdc-init","type":"MODIFIED","insertions":1,"deletions":-267},{"file":"overlay/generic/manifest","type":"MODIFIED","insertions":3,"deletions":0},{"file":"src/nictagadm","type":"MODIFIED","insertions":4,"deletions":-27},{"file":"tools/build_boot_image","type":"ADDED","insertions":408,"deletions":0},{"file":"tools/build_iso","type":"DELETED","insertions":0,"deletions":-392},{"file":"tools/build_live","type":"MODIFIED","insertions":9,"deletions":0},{"file":"tools/build_usb","type":"DELETED","insertions":0,"deletions":-1},{"file":"tools/format_image/Makefile","type":"ADDED","insertions":39,"deletions":0},{"file":"tools/format_image/format_image.c","type":"ADDED","insertions":406,"deletions":0},{"file":"tools/images/1gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/2gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/4gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/8gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/make_image","type":"DELETED","insertions":0,"deletions":-263},{"file":"tools/usb_fdisk_table","type":"DELETED","insertions":0,"deletions":-52}],"sizeInsertions":1312,"sizeDeletions":-1123},{"number":"5","revision":"9605c6c90d5a90fce5f875f2f69264b7c325ae7b","parents":["1633dfcadffd609293a38d9aac697db2fa6e7f90"],"ref":"refs/changes/74/5374/5","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1550512066,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550512118,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":17,"deletions":-21},{"file":"TODO","type":"ADDED","insertions":78,"deletions":0},{"file":"overlay/generic/boot/forth/menu.rc","type":"ADDED","insertions":116,"deletions":0},{"file":"overlay/generic/etc/issue","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"overlay/generic/lib/sdc/config.sh","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"overlay/generic/lib/sdc/usb-key.sh","type":"ADDED","insertions":208,"deletions":0},{"file":"overlay/generic/lib/svc/method/fs-joyent","type":"MODIFIED","insertions":8,"deletions":-72},{"file":"overlay/generic/lib/svc/method/smartdc-init","type":"MODIFIED","insertions":1,"deletions":-267},{"file":"overlay/generic/manifest","type":"MODIFIED","insertions":3,"deletions":0},{"file":"src/nictagadm","type":"MODIFIED","insertions":4,"deletions":-27},{"file":"tools/build_boot_image","type":"ADDED","insertions":431,"deletions":0},{"file":"tools/build_iso","type":"DELETED","insertions":0,"deletions":-392},{"file":"tools/build_live","type":"MODIFIED","insertions":9,"deletions":0},{"file":"tools/build_usb","type":"DELETED","insertions":0,"deletions":-1},{"file":"tools/format_image/Makefile","type":"ADDED","insertions":40,"deletions":0},{"file":"tools/format_image/format_image.c","type":"ADDED","insertions":406,"deletions":0},{"file":"tools/images/1gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/2gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/4gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/8gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/make_image","type":"DELETED","insertions":0,"deletions":-263},{"file":"tools/usb_fdisk_table","type":"DELETED","insertions":0,"deletions":-52}],"sizeInsertions":1348,"sizeDeletions":-1131},{"number":"6","revision":"9847d3175493ed1ed4d6acfa9b21e752cf151fe0","parents":["1633dfcadffd609293a38d9aac697db2fa6e7f90"],"ref":"refs/changes/74/5374/6","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1550831514,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550831570,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"overlay/generic/etc/issue","line":0,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Why does this need to change? The original image had those colors: https://i.no.de/713ff4d2722e4081"},{"file":"tools/build_boot_image","line":306,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"If we\u0027re going to be telling everyone about this every time, why aren\u0027t we adding it to the package list to install?"},{"file":"tools/build_boot_image","line":306,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Will take a look"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":17,"deletions":-21},{"file":"overlay/generic/boot/forth/menu.rc","type":"ADDED","insertions":116,"deletions":0},{"file":"overlay/generic/etc/issue","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"overlay/generic/lib/sdc/config.sh","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"overlay/generic/lib/sdc/usb-key.sh","type":"ADDED","insertions":208,"deletions":0},{"file":"overlay/generic/lib/svc/method/fs-joyent","type":"MODIFIED","insertions":8,"deletions":-72},{"file":"overlay/generic/lib/svc/method/smartdc-init","type":"MODIFIED","insertions":1,"deletions":-267},{"file":"overlay/generic/manifest","type":"MODIFIED","insertions":3,"deletions":0},{"file":"src/nictagadm","type":"MODIFIED","insertions":4,"deletions":-27},{"file":"tools/build_boot_image","type":"ADDED","insertions":431,"deletions":0},{"file":"tools/build_iso","type":"DELETED","insertions":0,"deletions":-392},{"file":"tools/build_live","type":"MODIFIED","insertions":9,"deletions":0},{"file":"tools/build_usb","type":"DELETED","insertions":0,"deletions":-1},{"file":"tools/format_image/Makefile","type":"ADDED","insertions":40,"deletions":0},{"file":"tools/format_image/format_image.c","type":"ADDED","insertions":406,"deletions":0},{"file":"tools/images/1gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/2gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/4gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/8gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/make_image","type":"DELETED","insertions":0,"deletions":-263},{"file":"tools/usb_fdisk_table","type":"DELETED","insertions":0,"deletions":-52}],"sizeInsertions":1270,"sizeDeletions":-1131},{"number":"7","revision":"f629882e743ca0ffe7d66e2244996f42835957e0","parents":["1633dfcadffd609293a38d9aac697db2fa6e7f90"],"ref":"refs/changes/74/5374/7","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1551102961,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1551103021,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551112178,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551127084,"by":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"}}],"comments":[{"file":"overlay/generic/etc/issue","line":0,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"How come this file is changing?  Here\u0027s a visual rendering of the differences:\n\n    https://i.no.de/9a97af869f2611f0\n\nThe art is meant to be an ASCII rendering of:\n\n    https://i.no.de/713ff4d2722e4081\n\n... which is why it has the non-coloured stars right now."},{"file":"overlay/generic/etc/issue","line":0,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Because it rendered badly on the new bitmapped console, which by default is white-background, black foreground.  Of course, this brings up the question of do we want a default of white-background, black foreground, or change the default settings on smartos/triton back to the more traditional black background? In which case we could revert these changes."},{"file":"overlay/generic/etc/issue","line":0,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I think we should probably stick with the same colour scheme we get today; i.e., the traditional slightly off-white on a black background."},{"file":"overlay/generic/etc/issue","line":0,"reviewer":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"message":"I would also prefer gray on black, I set the options in loader.rc.local and it looks much better IMHO, the only issues is the default illumos logo looks bad.\n\nBut I talked with Andyf about this at FOSDEM, this is just the logo file, the OmniOS ones have correct alpha channels and look fine."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":17,"deletions":-21},{"file":"configure","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"overlay/generic/boot/forth/menu.rc","type":"ADDED","insertions":116,"deletions":0},{"file":"overlay/generic/etc/issue","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"overlay/generic/lib/sdc/config.sh","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"overlay/generic/lib/sdc/usb-key.sh","type":"ADDED","insertions":208,"deletions":0},{"file":"overlay/generic/lib/svc/method/fs-joyent","type":"MODIFIED","insertions":8,"deletions":-72},{"file":"overlay/generic/lib/svc/method/smartdc-init","type":"MODIFIED","insertions":1,"deletions":-267},{"file":"overlay/generic/manifest","type":"MODIFIED","insertions":3,"deletions":0},{"file":"src/nictagadm","type":"MODIFIED","insertions":4,"deletions":-27},{"file":"tools/build_boot_image","type":"ADDED","insertions":412,"deletions":0},{"file":"tools/build_iso","type":"DELETED","insertions":0,"deletions":-392},{"file":"tools/build_live","type":"MODIFIED","insertions":9,"deletions":0},{"file":"tools/build_usb","type":"DELETED","insertions":0,"deletions":-1},{"file":"tools/format_image/Makefile","type":"ADDED","insertions":40,"deletions":0},{"file":"tools/format_image/format_image.c","type":"ADDED","insertions":406,"deletions":0},{"file":"tools/images/1gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/2gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/4gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/8gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/make_image","type":"DELETED","insertions":0,"deletions":-263},{"file":"tools/usb_fdisk_table","type":"DELETED","insertions":0,"deletions":-52}],"sizeInsertions":1252,"sizeDeletions":-1132},{"number":"8","revision":"64dc5f5ed01927207827bba777ca464bfa3666c7","parents":["1633dfcadffd609293a38d9aac697db2fa6e7f90"],"ref":"refs/changes/74/5374/8","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1551190541,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551205370,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1551190597,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551223341,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":17,"deletions":-21},{"file":"configure","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"overlay/generic/boot/forth/menu.rc","type":"ADDED","insertions":116,"deletions":0},{"file":"overlay/generic/lib/sdc/config.sh","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"overlay/generic/lib/sdc/usb-key.sh","type":"ADDED","insertions":208,"deletions":0},{"file":"overlay/generic/lib/svc/method/fs-joyent","type":"MODIFIED","insertions":8,"deletions":-72},{"file":"overlay/generic/lib/svc/method/smartdc-init","type":"MODIFIED","insertions":1,"deletions":-267},{"file":"overlay/generic/manifest","type":"MODIFIED","insertions":3,"deletions":0},{"file":"src/nictagadm","type":"MODIFIED","insertions":4,"deletions":-27},{"file":"tools/build_boot_image","type":"ADDED","insertions":412,"deletions":0},{"file":"tools/build_iso","type":"DELETED","insertions":0,"deletions":-392},{"file":"tools/build_live","type":"MODIFIED","insertions":9,"deletions":0},{"file":"tools/build_usb","type":"DELETED","insertions":0,"deletions":-1},{"file":"tools/format_image/Makefile","type":"ADDED","insertions":40,"deletions":0},{"file":"tools/format_image/format_image.c","type":"ADDED","insertions":406,"deletions":0},{"file":"tools/images/1gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/2gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/4gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/8gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/make_image","type":"DELETED","insertions":0,"deletions":-263},{"file":"tools/usb_fdisk_table","type":"DELETED","insertions":0,"deletions":-52}],"sizeInsertions":1244,"sizeDeletions":-1124},{"number":"9","revision":"654d1d01cec4601e13f73fe9b7d44edf6ee61b20","parents":["1633dfcadffd609293a38d9aac697db2fa6e7f90"],"ref":"refs/changes/74/5374/9","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1553953536,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553953589,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":19,"deletions":-21},{"file":"configure","type":"MODIFIED","insertions":12,"deletions":-21},{"file":"overlay/generic/boot/forth/menu.rc","type":"ADDED","insertions":116,"deletions":0},{"file":"overlay/generic/kernel/drv/amd64/bnx","type":"DELETED","insertions":0,"deletions":0},{"file":"overlay/generic/lib/sdc/config.sh","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"overlay/generic/lib/sdc/usb-key.sh","type":"ADDED","insertions":208,"deletions":0},{"file":"overlay/generic/lib/svc/method/fs-joyent","type":"MODIFIED","insertions":8,"deletions":-72},{"file":"overlay/generic/lib/svc/method/smartdc-init","type":"MODIFIED","insertions":1,"deletions":-267},{"file":"overlay/generic/manifest","type":"MODIFIED","insertions":3,"deletions":0},{"file":"pkgsrc/dmake/prefix","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/Makefile","type":"MODIFIED","insertions":41,"deletions":-55},{"file":"src/Makefile.defs","type":"MODIFIED","insertions":46,"deletions":-24},{"file":"src/Makefile.targ","type":"MODIFIED","insertions":22,"deletions":-4},{"file":"src/common/strings/Makefile","type":"MODIFIED","insertions":16,"deletions":-51},{"file":"src/dockerinit/Makefile","type":"MODIFIED","insertions":17,"deletions":-74},{"file":"src/fw/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/lx_hook_postnet/Makefile","type":"MODIFIED","insertions":21,"deletions":-89},{"file":"src/nictagadm","type":"MODIFIED","insertions":4,"deletions":-27},{"file":"src/node_modules/disklayout.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/routeinfo/Makefile","type":"MODIFIED","insertions":19,"deletions":-78},{"file":"src/test/disklayout/16.di.w16.z3.out","type":"DELETED","insertions":0,"deletions":-1},{"file":"src/test/disklayout/36.0s.w17.z3.out","type":"ADDED","insertions":262,"deletions":0},{"file":"src/test/disklayout/36.di","type":"ADDED","insertions":37,"deletions":0},{"file":"src/test/disklayout/36.di.0s.out","type":"ADDED","insertions":284,"deletions":0},{"file":"src/test/disklayout/36.di.1s.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/36.di.out","type":"ADDED","insertions":276,"deletions":0},{"file":"src/test/disklayout/60.di.w21.z3.out","type":"ADDED","insertions":1,"deletions":0},{"file":"src/test/disklayout/run","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"src/test/disklayout/s16.di.z3-0.out","type":"MODIFIED","insertions":122,"deletions":-1},{"file":"src/vm/node_modules/vminfod/vminfod.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/vm/package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/vmunbundle.c","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"tools/build_boot_image","type":"ADDED","insertions":412,"deletions":0},{"file":"tools/build_illumos","type":"MODIFIED","insertions":8,"deletions":0},{"file":"tools/build_iso","type":"DELETED","insertions":0,"deletions":-392},{"file":"tools/build_live","type":"MODIFIED","insertions":9,"deletions":0},{"file":"tools/build_usb","type":"DELETED","insertions":0,"deletions":-1},{"file":"tools/clobber_illumos","type":"MODIFIED","insertions":6,"deletions":-59},{"file":"tools/format_image/Makefile","type":"ADDED","insertions":40,"deletions":0},{"file":"tools/format_image/format_image.c","type":"ADDED","insertions":406,"deletions":0},{"file":"tools/images/1gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/2gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/4gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/8gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/make_image","type":"DELETED","insertions":0,"deletions":-263},{"file":"tools/usb_fdisk_table","type":"DELETED","insertions":0,"deletions":-52}],"sizeInsertions":2457,"sizeDeletions":-1592},{"number":"10","revision":"e2b83388239f6c4aae1010bf0c45a2cf4eddce46","parents":["112205803a1f40acbfad463908ce9d5ed8ad0657"],"ref":"refs/changes/74/5374/10","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1554112530,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551205370,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554305885,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553953589,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551223341,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":16,"deletions":-20},{"file":"configure","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"overlay/generic/boot/forth/menu.rc","type":"ADDED","insertions":116,"deletions":0},{"file":"overlay/generic/lib/sdc/config.sh","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"overlay/generic/lib/sdc/usb-key.sh","type":"ADDED","insertions":208,"deletions":0},{"file":"overlay/generic/lib/svc/method/fs-joyent","type":"MODIFIED","insertions":8,"deletions":-72},{"file":"overlay/generic/lib/svc/method/smartdc-init","type":"MODIFIED","insertions":1,"deletions":-267},{"file":"overlay/generic/manifest","type":"MODIFIED","insertions":3,"deletions":0},{"file":"src/nictagadm","type":"MODIFIED","insertions":4,"deletions":-27},{"file":"tools/build_boot_image","type":"ADDED","insertions":412,"deletions":0},{"file":"tools/build_iso","type":"DELETED","insertions":0,"deletions":-392},{"file":"tools/build_live","type":"MODIFIED","insertions":9,"deletions":0},{"file":"tools/build_usb","type":"DELETED","insertions":0,"deletions":-1},{"file":"tools/format_image/Makefile","type":"ADDED","insertions":40,"deletions":0},{"file":"tools/format_image/format_image.c","type":"ADDED","insertions":406,"deletions":0},{"file":"tools/images/1gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/2gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/4gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/8gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/make_image","type":"DELETED","insertions":0,"deletions":-263},{"file":"tools/usb_fdisk_table","type":"DELETED","insertions":0,"deletions":-52}],"sizeInsertions":1243,"sizeDeletions":-1123},{"number":"11","revision":"0eb84aeaf1a2ee0bdecd520a4d41aa22867f96b5","parents":["112205803a1f40acbfad463908ce9d5ed8ad0657"],"ref":"refs/changes/74/5374/11","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1554312599,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551205370,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554305885,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553953589,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551223341,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":14,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":16,"deletions":-20},{"file":"configure","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"overlay/generic/boot/forth/menu.rc","type":"ADDED","insertions":116,"deletions":0},{"file":"overlay/generic/lib/sdc/config.sh","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"overlay/generic/lib/sdc/usb-key.sh","type":"ADDED","insertions":208,"deletions":0},{"file":"overlay/generic/lib/svc/method/fs-joyent","type":"MODIFIED","insertions":8,"deletions":-72},{"file":"overlay/generic/lib/svc/method/smartdc-init","type":"MODIFIED","insertions":1,"deletions":-267},{"file":"overlay/generic/manifest","type":"MODIFIED","insertions":3,"deletions":0},{"file":"src/nictagadm","type":"MODIFIED","insertions":4,"deletions":-27},{"file":"tools/build_boot_image","type":"ADDED","insertions":412,"deletions":0},{"file":"tools/build_iso","type":"DELETED","insertions":0,"deletions":-392},{"file":"tools/build_live","type":"MODIFIED","insertions":9,"deletions":0},{"file":"tools/build_usb","type":"DELETED","insertions":0,"deletions":-1},{"file":"tools/format_image/Makefile","type":"ADDED","insertions":40,"deletions":0},{"file":"tools/format_image/format_image.c","type":"ADDED","insertions":406,"deletions":0},{"file":"tools/images/1gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/2gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/4gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/8gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/make_image","type":"DELETED","insertions":0,"deletions":-263},{"file":"tools/usb_fdisk_table","type":"DELETED","insertions":0,"deletions":-52}],"sizeInsertions":1243,"sizeDeletions":-1123},{"number":"12","revision":"b1b596be209110c23936346fdf403020c3fca336","parents":["f09afc33f0583bd1b86519a99756cbc9b905bd45"],"ref":"refs/changes/74/5374/12","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1554389634,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551205370,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554305885,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553953589,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551223341,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1554714310,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":14,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":16,"deletions":-20},{"file":"configure","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"overlay/generic/boot/forth/menu.rc","type":"ADDED","insertions":116,"deletions":0},{"file":"overlay/generic/lib/sdc/config.sh","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"overlay/generic/lib/sdc/usb-key.sh","type":"ADDED","insertions":208,"deletions":0},{"file":"overlay/generic/lib/svc/method/fs-joyent","type":"MODIFIED","insertions":8,"deletions":-72},{"file":"overlay/generic/lib/svc/method/smartdc-init","type":"MODIFIED","insertions":1,"deletions":-267},{"file":"overlay/generic/manifest","type":"MODIFIED","insertions":3,"deletions":0},{"file":"src/nictagadm","type":"MODIFIED","insertions":4,"deletions":-27},{"file":"tools/build_boot_image","type":"ADDED","insertions":412,"deletions":0},{"file":"tools/build_iso","type":"DELETED","insertions":0,"deletions":-392},{"file":"tools/build_live","type":"MODIFIED","insertions":9,"deletions":0},{"file":"tools/build_usb","type":"DELETED","insertions":0,"deletions":-1},{"file":"tools/format_image/Makefile","type":"ADDED","insertions":40,"deletions":0},{"file":"tools/format_image/format_image.c","type":"ADDED","insertions":406,"deletions":0},{"file":"tools/images/1gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/2gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/4gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/8gb.fdisk","type":"DELETED","insertions":0,"deletions":-6},{"file":"tools/images/make_image","type":"DELETED","insertions":0,"deletions":-263},{"file":"tools/usb_fdisk_table","type":"DELETED","insertions":0,"deletions":-52}],"sizeInsertions":1243,"sizeDeletions":-1123}],"allReviewers":[{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}]}