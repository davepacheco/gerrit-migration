{"project":"joyent/sdc-napi","branch":"master","topic":"NAPI-409","id":"I9977d2074bbcb794247504c64bf89989c1fceb46","number":"2102","subject":"NAPI-409 allow listing of network pools by UUID prefix","owner":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"url":"https://cr.joyent.us/2102","commitMessage":"NAPI-409 allow listing of network pools by UUID prefix\n","createdOn":1497484328,"lastUpdated":1500944690,"open":false,"status":"MERGED","comments":[{"timestamp":1497484328,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 1."},{"timestamp":1497484366,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1497484567,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 2."},{"timestamp":1497484673,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1497499883,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1497561688,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 2:\n\n(6 comments)"},{"timestamp":1499299144,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 3."},{"timestamp":1500413222,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 4."},{"timestamp":1500413587,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1500415517,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 5."},{"timestamp":1500415950,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1500416282,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 6."},{"timestamp":1500932166,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 7."},{"timestamp":1500932890,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 7: Code-Review+1 Integration-Approval+1"},{"timestamp":1500932989,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Patch Set 8: Patch Set 7 was rebased"},{"timestamp":1500933013,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Nick Zivkovic"},{"timestamp":1500944690,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Topic set to NAPI-409"}],"currentPatchSet":{"number":"8","revision":"b681c649fbe71964d44f8271bce9a9324715b001","parents":["392178ed2d1de72d814cfd9fea0b728b8dbd84d9"],"ref":"refs/changes/02/2102/8","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1500932989,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1500932890,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1500932890,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1500933013,"by":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/models/network-pool.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/models/network.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/util/validate.js","type":"MODIFIED","insertions":5,"deletions":-64},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/network-pools.test.js","type":"MODIFIED","insertions":80,"deletions":0},{"file":"test/integration/networks.test.js","type":"MODIFIED","insertions":78,"deletions":-6},{"file":"test/lib/pool.js","type":"MODIFIED","insertions":1,"deletions":-2}],"sizeInsertions":171,"sizeDeletions":-74},"patchSets":[{"number":"1","revision":"943a92a5644c35a78076470a5647efec1cb7839b","parents":["1787041a591aa84fa5e4001200b843fef4cf36cc"],"ref":"refs/changes/02/2102/1","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1497484328,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1497484366,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/util/validate.js","line":339,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Expected \u0027\u003d\u003d\u003d\u0027 and instead saw \u0027\u003d\u003d\u0027"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/models/network-pool.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/models/network.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/util/validate.js","type":"MODIFIED","insertions":48,"deletions":-4},{"file":"test/integration/network-pools.test.js","type":"MODIFIED","insertions":83,"deletions":0},{"file":"test/integration/networks.test.js","type":"MODIFIED","insertions":76,"deletions":0}],"sizeInsertions":213,"sizeDeletions":-5},{"number":"2","revision":"380ff6f7861f2490886ab4c72a06cceb75792880","parents":["1787041a591aa84fa5e4001200b843fef4cf36cc"],"ref":"refs/changes/02/2102/2","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1497484567,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1497484673,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/util/validate.js","line":328,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"missing blank before close comment"},{"file":"lib/util/validate.js","line":328,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"WAT?"},{"file":"lib/util/validate.js","line":328,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"You can add this right before this line:\n\n    /* JSSTYLED */"},{"file":"lib/util/validate.js","line":335,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"How about:\n\n    \u0027only UUID prefixes are allowed\u0027\n\nWe should also check that the prefix is [a-f0-9-]+."},{"file":"test/integration/network-pools.test.js","line":142,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Can you refactor these to use mod_pool.list()? There are some examples of how to use it elsewhere in this file."},{"file":"test/integration/network-pools.test.js","line":223,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Can we add some tests for searching for one of the pools we\u0027ve created in state.pools? One for searching for the full uuid, and one for searching for a prefix."},{"file":"test/integration/networks.test.js","line":278,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Let\u0027s use mod_net.list() for these."},{"file":"test/integration/networks.test.js","line":353,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Can we also add tests that search for one of the networks from NETS? We can have one that searches for the whole uuid, and one that searches for the first half + asterisk."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/models/network-pool.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/models/network.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/util/validate.js","type":"MODIFIED","insertions":48,"deletions":-4},{"file":"test/integration/network-pools.test.js","type":"MODIFIED","insertions":83,"deletions":0},{"file":"test/integration/networks.test.js","type":"MODIFIED","insertions":76,"deletions":0}],"sizeInsertions":213,"sizeDeletions":-5},{"number":"3","revision":"16a7edf1efe84e83990de779fcbe5dc29f703092","parents":["1787041a591aa84fa5e4001200b843fef4cf36cc"],"ref":"refs/changes/02/2102/3","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1499299144,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/models/network-pool.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/models/network.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/util/validate.js","type":"MODIFIED","insertions":5,"deletions":-64},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/network-pools.test.js","type":"MODIFIED","insertions":83,"deletions":0},{"file":"test/integration/networks.test.js","type":"MODIFIED","insertions":76,"deletions":0}],"sizeInsertions":171,"sizeDeletions":-66},{"number":"4","revision":"923f1b961be92d64556e6767c31cc2c9fd5a9b75","parents":["1787041a591aa84fa5e4001200b843fef4cf36cc"],"ref":"refs/changes/02/2102/4","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1500413222,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","comments":[{"file":"test/integration/network-pools.test.js","line":148,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Thanks for switching these over. Can you pass the object literal to the .list() calls instead so that it matches how they\u0027re used elsewhere? For example:\n\n    mod_pool.list(t, {\n        ...\n    });"},{"file":"test/integration/network-pools.test.js","line":148,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Yeah, will do."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/models/network-pool.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/models/network.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/util/validate.js","type":"MODIFIED","insertions":5,"deletions":-64},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/network-pools.test.js","type":"MODIFIED","insertions":75,"deletions":0},{"file":"test/integration/networks.test.js","type":"MODIFIED","insertions":74,"deletions":-5},{"file":"test/lib/pool.js","type":"MODIFIED","insertions":1,"deletions":-2}],"sizeInsertions":162,"sizeDeletions":-73},{"number":"5","revision":"7b926c04861745102d36a12cf1907bb5fb8252c0","parents":["1787041a591aa84fa5e4001200b843fef4cf36cc"],"ref":"refs/changes/02/2102/5","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1500415517,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/models/network-pool.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/models/network.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/util/validate.js","type":"MODIFIED","insertions":5,"deletions":-64},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/network-pools.test.js","type":"MODIFIED","insertions":86,"deletions":0},{"file":"test/integration/networks.test.js","type":"MODIFIED","insertions":74,"deletions":-5},{"file":"test/lib/pool.js","type":"MODIFIED","insertions":1,"deletions":-2}],"sizeInsertions":173,"sizeDeletions":-73},{"number":"6","revision":"e1e31f05ea2056f5d42304c16fab9f4f47c5cba3","parents":["1787041a591aa84fa5e4001200b843fef4cf36cc"],"ref":"refs/changes/02/2102/6","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1500416282,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/models/network-pool.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/models/network.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/util/validate.js","type":"MODIFIED","insertions":5,"deletions":-64},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/network-pools.test.js","type":"MODIFIED","insertions":80,"deletions":0},{"file":"test/integration/networks.test.js","type":"MODIFIED","insertions":69,"deletions":-6},{"file":"test/lib/pool.js","type":"MODIFIED","insertions":1,"deletions":-2}],"sizeInsertions":162,"sizeDeletions":-74},{"number":"7","revision":"9977d2074bbcb794247504c64bf89989c1fceb46","parents":["1787041a591aa84fa5e4001200b843fef4cf36cc"],"ref":"refs/changes/02/2102/7","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1500932166,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1500932890,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1500932890,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/models/network-pool.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/models/network.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/util/validate.js","type":"MODIFIED","insertions":5,"deletions":-64},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/network-pools.test.js","type":"MODIFIED","insertions":80,"deletions":0},{"file":"test/integration/networks.test.js","type":"MODIFIED","insertions":78,"deletions":-6},{"file":"test/lib/pool.js","type":"MODIFIED","insertions":1,"deletions":-2}],"sizeInsertions":171,"sizeDeletions":-74},{"number":"8","revision":"b681c649fbe71964d44f8271bce9a9324715b001","parents":["392178ed2d1de72d814cfd9fea0b728b8dbd84d9"],"ref":"refs/changes/02/2102/8","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1500932989,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1500932890,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1500932890,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1500933013,"by":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/models/network-pool.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/models/network.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/util/validate.js","type":"MODIFIED","insertions":5,"deletions":-64},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/network-pools.test.js","type":"MODIFIED","insertions":80,"deletions":0},{"file":"test/integration/networks.test.js","type":"MODIFIED","insertions":78,"deletions":-6},{"file":"test/lib/pool.js","type":"MODIFIED","insertions":1,"deletions":-2}],"sizeInsertions":171,"sizeDeletions":-74}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"}]}