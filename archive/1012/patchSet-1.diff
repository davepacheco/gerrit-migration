From 249fef658625e98e406d9f6d924078223b3eface Mon Sep 17 00:00:00 2001
From: Chris Burroughs <chris.burroughs@joyent.com>
Date: Mon, 28 Nov 2016 16:38:31 -0500
Subject: [PATCH] ./bin/triton instance wait 8e65bf9b

---
 lib/do_instance/do_wait.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/lib/do_instance/do_wait.js b/lib/do_instance/do_wait.js
index 529acb2..a472238 100644
--- a/lib/do_instance/do_wait.js
+++ b/lib/do_instance/do_wait.js
@@ -12,6 +12,7 @@
 
 var vasync = require('vasync');
 
+var common = require('../common');
 var distractions = require('../distractions');
 var errors = require('../errors');
 
@@ -34,7 +35,8 @@ function do_wait(subcmd, opts, args, cb) {
     var done = 0;
     var instFromId = {};
 
-    vasync.pipeline({funcs: [
+    vasync.pipeline({arg: {cli: this.top}, funcs: [
+        common.cliSetupTritonApi,
         function getInsts(_, next) {
             vasync.forEachParallel({
                 inputs: ids,
-- 
2.21.0

