{"project":"joyent/sdcadm","branch":"master","id":"I921c784f6c6d61af1869d63d6ccf93eb2f0465e7","number":"1036","subject":"TOOLS-1625 Want sdcadm deployable cmon and cmon-agent Reviewed by: Richard Kiene \u003crichard.kiene@joyent.com\u003e Approved by: Richard Kiene \u003crichard.kiene@joyent.com\u003e","owner":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"url":"https://cr.joyent.us/1036","commitMessage":"TOOLS-1625 Want sdcadm deployable cmon and cmon-agent\nReviewed by: Richard Kiene \u003crichard.kiene@joyent.com\u003e\nApproved by: Richard Kiene \u003crichard.kiene@joyent.com\u003e\n","createdOn":1480569356,"lastUpdated":1480637802,"open":false,"status":"MERGED","comments":[{"timestamp":1480569356,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Uploaded patch set 1."},{"timestamp":1480569392,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1480569630,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 1: Code-Review+1\n\nLGTM and it\u0027s been working great for a long time :)"},{"timestamp":1480569634,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 1: Integration-Approval+1"},{"timestamp":1480587627,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2: Patch Set 1 was rebased"},{"timestamp":1480587669,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2:\n\n\"make check\" passed ok"},{"timestamp":1480588802,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nI\u0027d like to add the help entry to the man page too before we merge"},{"timestamp":1480588963,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nAlso, do we have any working cmon image so we can test this code using \"dev\" channel? Actually any attempt to run post-setup cmon on the default dev channel will result into\n\n        [root@headnode (coal) ~]# sdcadm post-setup cmon\n        sdcadm post-setup: error: no \"cmon\" image found"},{"timestamp":1480605003,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\nPedro,\nNot currently. Richard said he wondered if he should leave triton-cmon.git work on the \u0027CMON-8\u0027 branch until he is ready to get it CR\u0027d to move it to master. So until then it is only on the \u0027experimental\u0027 updates.jo channel."},{"timestamp":1480607572,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nTrent: OK, sounds good, complained b/c I didn\u0027t know"},{"timestamp":1480636833,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 3."},{"timestamp":1480636835,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 1528ead567fa8997626972db82d8960f82483a15\n    \n    update man page\n    \n    commit 21bb5d0dfe7defc822605604f0a6f6eda244adf4\n    \n    Merge Master into CMON-8\n    \n    commit b0b61588ff10fb02aa846f389aae66da5f45871e\n    \n    AFAIK cmon is HA ready\n    \n    commit a54933883e460302df9dc92cebc5fb983725010c\n    \n    add \u0027cmon-agent\u0027 to \u0027sdcadm ex add-new-agents-svcs\u0027 for now, this is debatable\n    \n    commit d766162b19d73c5cc963f657e0167262c20965db\n    \n    a first crack at \u0027sdcadm post-setup cmon\u0027 and \u0027sdcadm up cmon\u0027\n    \n    commit 5692eaae947767d2f8012e7ebc734b8bbe4655d7\n    \n    CMON-8 cmon zone\n    \n    commit ba152e9cb86b28c1f6c42bf4314ad8ea00b5e0e4\n    \n    AFAIK cmon is HA ready\n    \n    commit 0c1cccb442e9226847522b856e031ff7554b9a0b\n    \n    add \u0027cmon-agent\u0027 to \u0027sdcadm ex add-new-agents-svcs\u0027 for now, this is debatable\n    \n    commit 6decf68b4d21728d8ccd8b6f509cf60f7112e239\n    \n    a first crack at \u0027sdcadm post-setup cmon\u0027 and \u0027sdcadm up cmon\u0027\n    \n    commit 7234808771d4b041046fed8c36d926d56a3a3543\n    \n    CMON-8 cmon zone"},{"timestamp":1480636928,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 4."},{"timestamp":1480636929,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 2c1c60348ee11dee0256e602363439824cfcf498\n    \n    man formatting fix"},{"timestamp":1480636936,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1480637003,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1480637417,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1\n\nLGTM"},{"timestamp":1480637789,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1480637802,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Trent Mick"}],"currentPatchSet":{"number":"5","revision":"921c784f6c6d61af1869d63d6ccf93eb2f0465e7","parents":["4dadc8f75196f3aa78ed3d5c767570b7121ada19"],"ref":"refs/changes/36/1036/5","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1480637789,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1480637003,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480637417,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1480637417,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"SUBM","value":"1","grantedOn":1480637802,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/cli/do_add_new_agent_svcs.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/cmon.js","type":"ADDED","insertions":283,"deletions":0},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":24,"deletions":-7}],"sizeInsertions":313,"sizeDeletions":-9},"patchSets":[{"number":"1","revision":"b19ad3411d99f16468c55a0f6128183c117a02f1","parents":["21d1fde64f343c5c01969e0323c4b64359718b17"],"ref":"refs/changes/36/1036/1","uploader":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"createdOn":1480569356,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1480569392,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480569630,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1480569634,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/cli/do_add_new_agent_svcs.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/cmon.js","type":"ADDED","insertions":283,"deletions":0},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":289,"sizeDeletions":-2},{"number":"2","revision":"055391823f817ad07cd83e05a35ba14329fd0e85","parents":["4dadc8f75196f3aa78ed3d5c767570b7121ada19"],"ref":"refs/changes/36/1036/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1480587627,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1480569392,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480569630,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1480569634,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/cli/do_add_new_agent_svcs.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/cmon.js","type":"ADDED","insertions":283,"deletions":0},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":289,"sizeDeletions":-2},{"number":"3","revision":"ee749c5027a75da7b5250b048ebc96da9ede7b1d","parents":["4dadc8f75196f3aa78ed3d5c767570b7121ada19"],"ref":"refs/changes/36/1036/3","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1480636833,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1480636936,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/cli/do_add_new_agent_svcs.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/cmon.js","type":"ADDED","insertions":283,"deletions":0},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":23,"deletions":-7}],"sizeInsertions":312,"sizeDeletions":-9},{"number":"4","revision":"4414a7de53dcb389b80a0ac0140a23adcf106ffe","parents":["4dadc8f75196f3aa78ed3d5c767570b7121ada19"],"ref":"refs/changes/36/1036/4","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1480636928,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1480637003,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480637417,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1480637417,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/cli/do_add_new_agent_svcs.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/cmon.js","type":"ADDED","insertions":283,"deletions":0},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":24,"deletions":-7}],"sizeInsertions":313,"sizeDeletions":-9},{"number":"5","revision":"921c784f6c6d61af1869d63d6ccf93eb2f0465e7","parents":["4dadc8f75196f3aa78ed3d5c767570b7121ada19"],"ref":"refs/changes/36/1036/5","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1480637789,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1480637003,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480637417,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1480637417,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"SUBM","value":"1","grantedOn":1480637802,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/cli/do_add_new_agent_svcs.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/cmon.js","type":"ADDED","insertions":283,"deletions":0},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":24,"deletions":-7}],"sizeInsertions":313,"sizeDeletions":-9}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}