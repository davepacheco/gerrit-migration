From 32a909dea83cc0bb6de07e53939c1650151ec1b3 Mon Sep 17 00:00:00 2001
From: Pedro Palazon Candel <pedro@joyent.com>
Date: Thu, 4 May 2017 16:19:21 +0200
Subject: [PATCH] TOOLS-1764 'sdcadm up SERVICE@VERSION' fails for services
 where the image name is different

---
 lib/sdcadm.js | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/lib/sdcadm.js b/lib/sdcadm.js
index 8ac6c2e..4d1f268 100644
--- a/lib/sdcadm.js
+++ b/lib/sdcadm.js
@@ -3446,7 +3446,8 @@ SdcAdm.prototype.genUpdatePlan = function genUpdatePlan(options, cb) {
                     } else if (ch.version) {
                         self.updates.listImages({
                             version: ch.version,
-                            name: ch.service.name
+                            name:
+                                self.config.imgNameFromSvcName[ch.service.name]
                         }, function (iErr, img) {
                             if (iErr) {
                                 return nextChange(new errors.UpdateError(
-- 
2.21.0

