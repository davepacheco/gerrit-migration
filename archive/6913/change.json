{"project":"joyent/sdcadm","branch":"master","id":"If3376b4cd7e3c43b35660929fc98f5adff907148","number":"6913","subject":"TRITON-1822 `sdcadm up manatee` should not left registrar svc disabled on the moray instances Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/6913","commitMessage":"TRITON-1822 `sdcadm up manatee` should not left registrar svc disabled on the moray instances\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1568731315,"lastUpdated":1568737255,"open":false,"status":"MERGED","comments":[{"timestamp":1568731315,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1568731319,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 1aa10d58f2af208757990539c35847a7bf369656\n    \n    TRITON-1822 `sdcadm up manatee` should not left registrar svc disabled on the moray instances"},{"timestamp":1568731357,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1568731448,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nTrent, mind to take a look and let me know if it has sense to take this approach here? i.e. bump timeout waiting for manatee primary to come up from 5 to 10 minutes and, despite of possible failure waiting for it, make sure we left the moray registrars enabled."},{"timestamp":1568736394,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1568736743,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2."},{"timestamp":1568736748,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit f3389823c153b6d8a467f64b66eb03fbc164e542\n    \n    Updated user feedback and comment about timeout"},{"timestamp":1568736788,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\n(2 comments)\n\nAdded as suggested. Thanks!"},{"timestamp":1568736790,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1568737202,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1568737223,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1568737255,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"3","revision":"f3376b4cd7e3c43b35660929fc98f5adff907148","parents":["b42f866067bd98ec35333ec069d1975e641bc1f7"],"ref":"refs/changes/13/6913/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1568737223,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1568736790,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1568737202,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1568737202,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1568737255,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":28,"deletions":-24},{"file":"lib/procedures/update-manatee-v2.js","type":"MODIFIED","insertions":31,"deletions":-7}],"sizeInsertions":59,"sizeDeletions":-31},"patchSets":[{"number":"1","revision":"9f092556ae64d0c72a59230bdbf3e61bb9278d2f","parents":["b42f866067bd98ec35333ec069d1975e641bc1f7"],"ref":"refs/changes/13/6913/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1568731315,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1568731357,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/procedures/update-manatee-v2.js","line":1037,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Khang had suggested/requested: \"Display a message on the console to say that the \"registrar\" service is disabled in moray. Then display another message when the \"registrar\" service is enabled.\"\n\nThoughts on doing that?"},{"file":"lib/procedures/update-manatee-v2.js","line":1037,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"It\u0027s somewhat an Implementation detail but not opposed. Added."},{"file":"lib/procedures/update-manatee-v2.js","line":1086,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Changing this comment to answer *why* would be more helpful. The \"why\" for this change is, I guess, because in QA lab testing we\u0027ve found the previous timeout to be too short. Having that in a comment will help a future maintainer know that it is just a number from experience and not from any particular math."},{"file":"lib/procedures/update-manatee-v2.js","line":1086,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":28,"deletions":-24},{"file":"lib/procedures/update-manatee-v2.js","type":"MODIFIED","insertions":26,"deletions":-7}],"sizeInsertions":54,"sizeDeletions":-31},{"number":"2","revision":"2e18fab7697f0949951527d3fecd5531ffe7b57f","parents":["b42f866067bd98ec35333ec069d1975e641bc1f7"],"ref":"refs/changes/13/6913/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1568736743,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1568736790,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1568737202,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1568737202,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":28,"deletions":-24},{"file":"lib/procedures/update-manatee-v2.js","type":"MODIFIED","insertions":31,"deletions":-7}],"sizeInsertions":59,"sizeDeletions":-31},{"number":"3","revision":"f3376b4cd7e3c43b35660929fc98f5adff907148","parents":["b42f866067bd98ec35333ec069d1975e641bc1f7"],"ref":"refs/changes/13/6913/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1568737223,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1568736790,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1568737202,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1568737202,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1568737255,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":28,"deletions":-24},{"file":"lib/procedures/update-manatee-v2.js","type":"MODIFIED","insertions":31,"deletions":-7}],"sizeInsertions":59,"sizeDeletions":-31}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}