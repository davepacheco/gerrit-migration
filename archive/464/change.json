{"project":"joyent/node-cueball","branch":"master","id":"I002483524493d9136591abe037abb1cb683c2d45","number":"464","subject":"joyent/node-cueball#13 Pool can enter \"failed\" when 1 backend is down out of N and spares \u003d 1 joyent/node-cueball#18 periodic randomness in preference lists Reviewed by: David Pacheco \u003cdap@joyent.com\u003e","owner":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"url":"https://cr.joyent.us/464","commitMessage":"joyent/node-cueball#13 Pool can enter \"failed\" when 1 backend is down out of N and spares \u003d 1\njoyent/node-cueball#18 periodic randomness in preference lists\nReviewed by: David Pacheco \u003cdap@joyent.com\u003e\n","createdOn":1473811344,"lastUpdated":1473983353,"open":false,"status":"MERGED","comments":[{"timestamp":1473811344,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 1."},{"timestamp":1473811377,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n(6 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1473811488,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 2."},{"timestamp":1473811576,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1473977336,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2:\n\n(4 comments)"},{"timestamp":1473981743,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 3."},{"timestamp":1473981794,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 3:\n\n(4 comments)"},{"timestamp":1473981830,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1473983326,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1473983351,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1473983353,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Alex Wilson"}],"currentPatchSet":{"number":"3","revision":"002483524493d9136591abe037abb1cb683c2d45","parents":["abd678739ef1bd66bd0bb0d636cf41d8262fb829"],"ref":"refs/changes/64/464/3","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1473981743,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1473981830,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1473983326,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1473983351,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"SUBM","value":"1","grantedOn":1473983353,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/pool-monitor.js","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"lib/pool.js","type":"MODIFIED","insertions":141,"deletions":-58},{"file":"lib/utils.js","type":"MODIFIED","insertions":117,"deletions":-99},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/pool.test.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/utils.test.js","type":"MODIFIED","insertions":131,"deletions":-14}],"sizeInsertions":406,"sizeDeletions":-175},"patchSets":[{"number":"1","revision":"61ac05dadbf96ae0d503ae6f9505c7d6eae6c9bd","parents":["abd678739ef1bd66bd0bb0d636cf41d8262fb829"],"ref":"refs/changes/64/464/1","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1473811344,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1473811377,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/pool.js","line":886,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: variable is declared but never referenced: keyMap"},{"file":"lib/utils.js","line":86,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: variable is declared but never referenced: liveSpares"},{"file":"lib/utils.js","line":88,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: variable is declared but never referenced: countIdx"},{"file":"lib/utils.js","line":137,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: redeclaration of i"},{"file":"lib/utils.js","line":162,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: identifer k hides an identifier in a parent scope"},{"file":"test/utils.test.js","line":243,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: trailing_comma"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/pool-monitor.js","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"lib/pool.js","type":"MODIFIED","insertions":127,"deletions":-58},{"file":"lib/utils.js","type":"MODIFIED","insertions":101,"deletions":-99},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/pool.test.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/utils.test.js","type":"MODIFIED","insertions":131,"deletions":-14}],"sizeInsertions":377,"sizeDeletions":-176},{"number":"2","revision":"e261a8278d9f8c5c8902bdb55efa49bd0afefa0f","parents":["abd678739ef1bd66bd0bb0d636cf41d8262fb829"],"ref":"refs/changes/64/464/2","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1473811488,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1473811576,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/pool-monitor.js","line":55,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Isn\u0027t \"obj.connections\" always an empty object at this point?"},{"file":"lib/pool-monitor.js","line":55,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Yes. That should be pool.p_connections, thanks."},{"file":"lib/pool.js","line":200,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Shouldn\u0027t this include \u0027close\u0027, too?"},{"file":"lib/pool.js","line":200,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Done"},{"file":"lib/pool.js","line":270,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Why does it matter whether cf_retries is Infinity here?"},{"file":"lib/pool.js","line":270,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Done"},{"file":"lib/utils.js","line":85,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I think it would be useful to document this function."},{"file":"lib/utils.js","line":85,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/pool-monitor.js","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"lib/pool.js","type":"MODIFIED","insertions":126,"deletions":-58},{"file":"lib/utils.js","type":"MODIFIED","insertions":99,"deletions":-99},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/pool.test.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/utils.test.js","type":"MODIFIED","insertions":131,"deletions":-14}],"sizeInsertions":374,"sizeDeletions":-176},{"number":"3","revision":"002483524493d9136591abe037abb1cb683c2d45","parents":["abd678739ef1bd66bd0bb0d636cf41d8262fb829"],"ref":"refs/changes/64/464/3","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1473981743,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1473983326,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1473983351,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"SUBM","value":"1","grantedOn":1473983353,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1473981830,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/pool-monitor.js","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"lib/pool.js","type":"MODIFIED","insertions":141,"deletions":-58},{"file":"lib/utils.js","type":"MODIFIED","insertions":117,"deletions":-99},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/pool.test.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/utils.test.js","type":"MODIFIED","insertions":131,"deletions":-14}],"sizeInsertions":406,"sizeDeletions":-175}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}]}