{"project":"joyent/illumos-joyent","branch":"master","id":"I289e41bc2a2b4d5d99886bea0534b96ace98d833","number":"530","subject":"OS-5679 fwflash for sd needs to handle partial writes OS-5680 fwflash sd plugin shouldn\u0027t hardcode maximum image size OS-5766 libscsi improperly translates request sense and isolate options to uscsi Reviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e Approved ","owner":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"url":"https://cr.joyent.us/530","commitMessage":"OS-5679 fwflash for sd needs to handle partial writes\nOS-5680 fwflash sd plugin shouldn\u0027t hardcode maximum image size\nOS-5766 libscsi improperly translates request sense and isolate options to uscsi\nReviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\nApproved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n","createdOn":1474669407,"lastUpdated":1479261506,"open":false,"status":"MERGED","comments":[{"timestamp":1474669407,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 1."},{"timestamp":1474671887,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 2."},{"timestamp":1475175474,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2:\n\n(6 comments)"},{"timestamp":1475182841,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 3."},{"timestamp":1475182893,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2:\n\n(5 comments)"},{"timestamp":1475253539,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1476489821,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 3:\n\n(30 comments)"},{"timestamp":1478128158,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Removed the following votes:\n\n* Code-Review+1 by Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n"},{"timestamp":1478152197,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 4."},{"timestamp":1478152202,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3:\n\n(30 comments)"},{"timestamp":1478152264,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3:\n\nTo test this I upgraded the firmware on a disk and then also verified that when upgrading the firmware with a garbage file it failed with a reasonable sense error code."},{"timestamp":1479147134,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 4:\n\n(5 comments)\n\nLooks basically read to go, modulo a couple of grammar nits in the updated comments!"},{"timestamp":1479160156,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 5."},{"timestamp":1479160177,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4:\n\n(5 comments)"},{"timestamp":1479250023,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1479253935,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 6."},{"timestamp":1479254459,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1479256713,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 6: Integration-Approval+1"},{"timestamp":1479261485,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 7: Commit message was updated."},{"timestamp":1479261496,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 8: Patch Set 7 was rebased."},{"timestamp":1479261506,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Robert Mustacchi"}],"currentPatchSet":{"number":"8","revision":"289e41bc2a2b4d5d99886bea0534b96ace98d833","parents":["31047669e3f3d1dcd6f9421034e92b6490cd793c"],"ref":"refs/changes/30/530/8","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1479261496,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1479254459,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1479256713,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1479261506,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/cmd/fwflash/Makefile.com","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/cmd/fwflash/Makefile.targ","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/cmd/fwflash/plugins/Makefile.targ","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","type":"MODIFIED","insertions":336,"deletions":-89},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","type":"MODIFIED","insertions":129,"deletions":-68},{"file":"usr/src/lib/scsi/libscsi/common/libscsi.h","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/scsi/libscsi/common/scsi_engine.c","type":"MODIFIED","insertions":14,"deletions":0},{"file":"usr/src/lib/scsi/libscsi/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/scsi/plugins/scsi/engines/uscsi/uscsi.c","type":"MODIFIED","insertions":37,"deletions":-5},{"file":"usr/src/man/man7i/uscsi.7i","type":"MODIFIED","insertions":29,"deletions":-11},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","type":"MODIFIED","insertions":26,"deletions":-1},{"file":"usr/src/uts/common/sys/scsi/impl/spc3_types.h","type":"MODIFIED","insertions":25,"deletions":0},{"file":"usr/src/uts/common/sys/scsi/impl/uscsi.h","type":"MODIFIED","insertions":9,"deletions":-1}],"sizeInsertions":616,"sizeDeletions":-179},"patchSets":[{"number":"1","revision":"63d7e3f65f8de7876695052654c4166acb3e8fd9","parents":["9608e4c230925bfc3f7987c1f8d43ad6e01e8f86"],"ref":"refs/changes/30/530/1","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1474669407,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/cmd/fwflash/Makefile.targ","line":69,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"nuke the trailing space?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/fwflash/Makefile.com","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/cmd/fwflash/Makefile.targ","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/fwflash/common/fwflash.c","type":"MODIFIED","insertions":18,"deletions":-18},{"file":"usr/src/cmd/fwflash/plugins/Makefile.targ","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","type":"MODIFIED","insertions":310,"deletions":-85},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","type":"MODIFIED","insertions":115,"deletions":-68},{"file":"usr/src/lib/scsi/libscsi/common/libscsi.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/scsi/libscsi/common/scsi_engine.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/lib/scsi/libscsi/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/scsi/plugins/scsi/engines/uscsi/uscsi.c","type":"MODIFIED","insertions":33,"deletions":-3},{"file":"usr/src/man/man7i/uscsi.7i","type":"MODIFIED","insertions":27,"deletions":-4},{"file":"usr/src/uts/common/io/scsi/adapters/mpt_sas/mptsas.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","type":"MODIFIED","insertions":24,"deletions":-1},{"file":"usr/src/uts/common/sys/scsi/impl/spc3_types.h","type":"MODIFIED","insertions":24,"deletions":0},{"file":"usr/src/uts/common/sys/scsi/impl/uscsi.h","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":580,"sizeDeletions":-182},{"number":"2","revision":"742df9082fb10a50a69608bd496625dd4ba39f2b","parents":["9608e4c230925bfc3f7987c1f8d43ad6e01e8f86"],"ref":"refs/changes/30/530/2","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1474671887,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","line":24,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Shouldn\u0027t this reference the buffer size _and_ alignment?"},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","line":24,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It should, yeah."},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","line":27,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"lowercase"},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","line":27,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/man/man7i/uscsi.7i","line":354,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"determining"},{"file":"usr/src/man/man7i/uscsi.7i","line":354,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/man/man7i/uscsi.7i","line":356,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"comma between \u0027work\u0027 and \u0027depending"},{"file":"usr/src/man/man7i/uscsi.7i","line":356,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/man/man7i/uscsi.7i","line":471,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"This reads a little awkward.  Perhaps consider \"maximum transfer size\" or \"maximum sized transfer\"."},{"file":"usr/src/man/man7i/uscsi.7i","line":471,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/cmd/fwflash/Makefile.com","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/cmd/fwflash/Makefile.targ","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/cmd/fwflash/common/fwflash.c","type":"MODIFIED","insertions":20,"deletions":-18},{"file":"usr/src/cmd/fwflash/plugins/Makefile.targ","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","type":"MODIFIED","insertions":322,"deletions":-85},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","type":"MODIFIED","insertions":120,"deletions":-68},{"file":"usr/src/lib/scsi/libscsi/common/libscsi.h","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/scsi/libscsi/common/scsi_engine.c","type":"MODIFIED","insertions":14,"deletions":0},{"file":"usr/src/lib/scsi/libscsi/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/scsi/plugins/scsi/engines/uscsi/uscsi.c","type":"MODIFIED","insertions":35,"deletions":-3},{"file":"usr/src/man/man7i/uscsi.7i","type":"MODIFIED","insertions":29,"deletions":-11},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","type":"MODIFIED","insertions":25,"deletions":-1},{"file":"usr/src/uts/common/sys/scsi/impl/spc3_types.h","type":"MODIFIED","insertions":25,"deletions":0},{"file":"usr/src/uts/common/sys/scsi/impl/uscsi.h","type":"MODIFIED","insertions":9,"deletions":-1}],"sizeInsertions":610,"sizeDeletions":-191},{"number":"3","revision":"bf2b1d5894abc4f3e0043987b2e2166ae451f626","parents":["dcdce866277bb3ad59e2c63c5019591446df9f27"],"ref":"refs/changes/30/530/3","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1475182841,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/cmd/fwflash/common/fwflash.c","line":0,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"It feels like the only changes in this file are stylistic.  If that\u0027s the case, perhaps we can do this clean-up in a separate commit?"},{"file":"usr/src/cmd/fwflash/common/fwflash.c","line":0,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I\u0027ve undone all of these changes."},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":68,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Why have _both_ the NULL sentinel but _also_ the \"NSAM4_STATUS\" constant, which doesn\u0027t account for the extra entry in the array?  In this particular case, SAM4_STATUS_GOOD is 0, as is NULL, but still."},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":68,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I didn\u0027t write this, so harder to say. But I\u0027m removing the NULL terminator."},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":123,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Surely this string is already zero-terminated, by virtue of being a C string?!"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":123,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This is used for games with the \"ssd\" driver, at least based on my read."},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":172,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"VERIFY3P()?"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":172,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":185,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"From where does the buffer ID 0 originate?"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":185,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":189,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"sizeof (descbuf) ?"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":189,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":231,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"This failure appears to result in returning FWFLASH_SUCCESS anyway at the moment.  Is that intended?  Should it be MSG_WARN instead?\n\nFeels like the common error stanza should probably be dragged down the bottom (with a \"goto err\") as it is in sdfw_write().  That is, the following lines:\n\n    libscsi_action_free(action);\n    return (FWFLASH_FAILURE);"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":231,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":250,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I think basically all of these should be %u, not %d?"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":250,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":256,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"VERIFY3U?  (size_t)"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":256,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":257,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"VERIFY3U() here as well?"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":257,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":283,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"%u?"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":283,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":393,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"How did you determine that this was the case?"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":393,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I think this was leftover from a previous attempt which wasn\u0027t great. I\u0027m going to remove this."},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":400,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Is the \"it\", here, the SCSI target in question?  Also, what exactly doesn\u0027t it support: the READ BUFFER to get the offset requirement, or the entire operation?"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":400,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":407,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Should these be %u rather than %d?  size_t and uint8_t are both unsigned -- and possibly not int-sized?"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":407,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":412,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"%u for maxxfer here, also?"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":412,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":425,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"%u for maxxfer?"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":425,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":429,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"\"imgsize\" in \"struct vrfyplugin\" appears to be unsigned as well (%u)"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":429,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":964,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"While you\u0027re cstyling: \"future\"?"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":964,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","line":20,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I would ditch \"Using\" from this sentence."},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","line":20,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","line":27,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Comma after Unfortunately."},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","line":27,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","line":90,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"From where did you get buffer ID 0?"},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","line":90,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I\u0027ve added a comment to try and explain this."},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","line":94,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"sizeof (descbuf)?"},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","line":94,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","line":109,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Do we need to check the part of descbuf that turns into \"align\" in the other file?"},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","line":109,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","line":119,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"size, %u?"},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","line":119,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","line":123,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"size is unsigned, so %u?"},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","line":123,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/lib/scsi/plugins/scsi/engines/uscsi/uscsi.c","line":224,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"This should probably be a VERIFY3S()?"},{"file":"usr/src/lib/scsi/plugins/scsi/engines/uscsi/uscsi.c","line":224,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It could be an ASSERT3S, but I\u0027m not 100% sure it should be a verify and if the library should just return that back up to the user."},{"file":"usr/src/man/man7i/uscsi.7i","line":429,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Probably needs \"the\" before \"uscsi_rqbuf\"?"},{"file":"usr/src/man/man7i/uscsi.7i","line":429,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","line":14192,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"This sentence feels off.  Perhaps, instead:\n\n    There is, in general, no guarantee that arbitrary SCSI commands\n    are idempotent."},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","line":14192,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I changed this up a bit more in an attempt to make it a bit clearer as to why we were talking about it."},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","line":22855,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Should this be USCSIMAXXFER?"},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","line":22855,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Erm. Yes."},{"file":"usr/src/uts/common/sys/scsi/impl/uscsi.h","line":200,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"\"get max transfer size\"?"},{"file":"usr/src/uts/common/sys/scsi/impl/uscsi.h","line":200,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/cmd/fwflash/Makefile.com","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/cmd/fwflash/Makefile.targ","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/cmd/fwflash/common/fwflash.c","type":"MODIFIED","insertions":20,"deletions":-18},{"file":"usr/src/cmd/fwflash/plugins/Makefile.targ","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","type":"MODIFIED","insertions":322,"deletions":-85},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","type":"MODIFIED","insertions":121,"deletions":-68},{"file":"usr/src/lib/scsi/libscsi/common/libscsi.h","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/scsi/libscsi/common/scsi_engine.c","type":"MODIFIED","insertions":14,"deletions":0},{"file":"usr/src/lib/scsi/libscsi/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/scsi/plugins/scsi/engines/uscsi/uscsi.c","type":"MODIFIED","insertions":35,"deletions":-3},{"file":"usr/src/man/man7i/uscsi.7i","type":"MODIFIED","insertions":29,"deletions":-11},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","type":"MODIFIED","insertions":25,"deletions":-1},{"file":"usr/src/uts/common/sys/scsi/impl/spc3_types.h","type":"MODIFIED","insertions":25,"deletions":0},{"file":"usr/src/uts/common/sys/scsi/impl/uscsi.h","type":"MODIFIED","insertions":9,"deletions":-1}],"sizeInsertions":611,"sizeDeletions":-191},{"number":"4","revision":"e87f360e925ef788cfd43596165c6ed197f720f2","parents":["7d53bdba409762b912a867a7edc5aa4be0c70c46"],"ref":"refs/changes/30/530/4","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1478152197,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":186,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"is?"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":186,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":188,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Greengrocer\u0027s Apostrophe!"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":188,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":265,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I think \"flashbuf\" is also unsigned?"},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","line":265,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Yeah, I missed this one."},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","line":95,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Capostrophe!"},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","line":95,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","line":14193,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"comma before \"which\", I think.  Also, \"if _we_ want\" on the next line."},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","line":14193,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/fwflash/Makefile.com","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/cmd/fwflash/Makefile.targ","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/cmd/fwflash/plugins/Makefile.targ","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","type":"MODIFIED","insertions":336,"deletions":-89},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","type":"MODIFIED","insertions":129,"deletions":-68},{"file":"usr/src/lib/scsi/libscsi/common/libscsi.h","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/scsi/libscsi/common/scsi_engine.c","type":"MODIFIED","insertions":14,"deletions":0},{"file":"usr/src/lib/scsi/libscsi/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/scsi/plugins/scsi/engines/uscsi/uscsi.c","type":"MODIFIED","insertions":37,"deletions":-5},{"file":"usr/src/man/man7i/uscsi.7i","type":"MODIFIED","insertions":29,"deletions":-11},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","type":"MODIFIED","insertions":26,"deletions":-1},{"file":"usr/src/uts/common/sys/scsi/impl/spc3_types.h","type":"MODIFIED","insertions":25,"deletions":0},{"file":"usr/src/uts/common/sys/scsi/impl/uscsi.h","type":"MODIFIED","insertions":9,"deletions":-1}],"sizeInsertions":616,"sizeDeletions":-179},{"number":"5","revision":"38f537f4817eed5a7d13d66097552d1341fb5815","parents":["01e5b2318bd46ccafc1634fa45623f5dcccfc412"],"ref":"refs/changes/30/530/5","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1479160156,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","line":95,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I think you might have been off by one here..."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/fwflash/Makefile.com","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/cmd/fwflash/Makefile.targ","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/cmd/fwflash/plugins/Makefile.targ","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","type":"MODIFIED","insertions":336,"deletions":-89},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","type":"MODIFIED","insertions":129,"deletions":-68},{"file":"usr/src/lib/scsi/libscsi/common/libscsi.h","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/scsi/libscsi/common/scsi_engine.c","type":"MODIFIED","insertions":14,"deletions":0},{"file":"usr/src/lib/scsi/libscsi/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/scsi/plugins/scsi/engines/uscsi/uscsi.c","type":"MODIFIED","insertions":37,"deletions":-5},{"file":"usr/src/man/man7i/uscsi.7i","type":"MODIFIED","insertions":29,"deletions":-11},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","type":"MODIFIED","insertions":26,"deletions":-1},{"file":"usr/src/uts/common/sys/scsi/impl/spc3_types.h","type":"MODIFIED","insertions":25,"deletions":0},{"file":"usr/src/uts/common/sys/scsi/impl/uscsi.h","type":"MODIFIED","insertions":9,"deletions":-1}],"sizeInsertions":616,"sizeDeletions":-179},{"number":"6","revision":"807c5da7c81b74851474c4378dbfa5200d2e29cd","parents":["01e5b2318bd46ccafc1634fa45623f5dcccfc412"],"ref":"refs/changes/30/530/6","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1479253935,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1479254459,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1479256713,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/fwflash/Makefile.com","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/cmd/fwflash/Makefile.targ","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/cmd/fwflash/plugins/Makefile.targ","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","type":"MODIFIED","insertions":336,"deletions":-89},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","type":"MODIFIED","insertions":129,"deletions":-68},{"file":"usr/src/lib/scsi/libscsi/common/libscsi.h","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/scsi/libscsi/common/scsi_engine.c","type":"MODIFIED","insertions":14,"deletions":0},{"file":"usr/src/lib/scsi/libscsi/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/scsi/plugins/scsi/engines/uscsi/uscsi.c","type":"MODIFIED","insertions":37,"deletions":-5},{"file":"usr/src/man/man7i/uscsi.7i","type":"MODIFIED","insertions":29,"deletions":-11},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","type":"MODIFIED","insertions":26,"deletions":-1},{"file":"usr/src/uts/common/sys/scsi/impl/spc3_types.h","type":"MODIFIED","insertions":25,"deletions":0},{"file":"usr/src/uts/common/sys/scsi/impl/uscsi.h","type":"MODIFIED","insertions":9,"deletions":-1}],"sizeInsertions":616,"sizeDeletions":-179},{"number":"7","revision":"40b9cbe46b979ed011f4d30ad57d13232f534e1e","parents":["01e5b2318bd46ccafc1634fa45623f5dcccfc412"],"ref":"refs/changes/30/530/7","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1479261485,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1479254459,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1479256713,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/cmd/fwflash/Makefile.com","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/cmd/fwflash/Makefile.targ","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/cmd/fwflash/plugins/Makefile.targ","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","type":"MODIFIED","insertions":336,"deletions":-89},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","type":"MODIFIED","insertions":129,"deletions":-68},{"file":"usr/src/lib/scsi/libscsi/common/libscsi.h","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/scsi/libscsi/common/scsi_engine.c","type":"MODIFIED","insertions":14,"deletions":0},{"file":"usr/src/lib/scsi/libscsi/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/scsi/plugins/scsi/engines/uscsi/uscsi.c","type":"MODIFIED","insertions":37,"deletions":-5},{"file":"usr/src/man/man7i/uscsi.7i","type":"MODIFIED","insertions":29,"deletions":-11},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","type":"MODIFIED","insertions":26,"deletions":-1},{"file":"usr/src/uts/common/sys/scsi/impl/spc3_types.h","type":"MODIFIED","insertions":25,"deletions":0},{"file":"usr/src/uts/common/sys/scsi/impl/uscsi.h","type":"MODIFIED","insertions":9,"deletions":-1}],"sizeInsertions":616,"sizeDeletions":-179},{"number":"8","revision":"289e41bc2a2b4d5d99886bea0534b96ace98d833","parents":["31047669e3f3d1dcd6f9421034e92b6490cd793c"],"ref":"refs/changes/30/530/8","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1479261496,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"SUBM","value":"1","grantedOn":1479261506,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1479254459,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1479256713,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/cmd/fwflash/Makefile.com","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/cmd/fwflash/Makefile.targ","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/cmd/fwflash/plugins/Makefile.targ","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/fwflash/plugins/transport/common/sd.c","type":"MODIFIED","insertions":336,"deletions":-89},{"file":"usr/src/cmd/fwflash/plugins/vendor/sd-GENERIC.c","type":"MODIFIED","insertions":129,"deletions":-68},{"file":"usr/src/lib/scsi/libscsi/common/libscsi.h","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/scsi/libscsi/common/scsi_engine.c","type":"MODIFIED","insertions":14,"deletions":0},{"file":"usr/src/lib/scsi/libscsi/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/scsi/plugins/scsi/engines/uscsi/uscsi.c","type":"MODIFIED","insertions":37,"deletions":-5},{"file":"usr/src/man/man7i/uscsi.7i","type":"MODIFIED","insertions":29,"deletions":-11},{"file":"usr/src/uts/common/io/scsi/targets/sd.c","type":"MODIFIED","insertions":26,"deletions":-1},{"file":"usr/src/uts/common/sys/scsi/impl/spc3_types.h","type":"MODIFIED","insertions":25,"deletions":0},{"file":"usr/src/uts/common/sys/scsi/impl/uscsi.h","type":"MODIFIED","insertions":9,"deletions":-1}],"sizeInsertions":616,"sizeDeletions":-179}],"allReviewers":[{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}]}