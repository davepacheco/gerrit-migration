{"project":"joyent/node-cueball","branch":"master","id":"Ia61f24bfd0b008bed64c8372708e01fc9b25579e","number":"1677","subject":"joyent/node-cueball#103 pinger running should not trigger creation of more connections Reviewed by: David Pacheco \u003cdap@joyent.com\u003e","owner":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"url":"https://cr.joyent.us/1677","commitMessage":"joyent/node-cueball#103 pinger running should not trigger creation of more connections\nReviewed by: David Pacheco \u003cdap@joyent.com\u003e\n","createdOn":1489705038,"lastUpdated":1489797310,"open":false,"status":"MERGED","comments":[{"timestamp":1489705038,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 1."},{"timestamp":1489705112,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1489705369,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 2."},{"timestamp":1489705460,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1489711537,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1489776208,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1489792077,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1489796841,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1489796953,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1489796996,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 3: Commit message was updated."},{"timestamp":1489797072,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 4: Patch Set 3 was rebased"},{"timestamp":1489797308,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 4: Integration-Approval+1"},{"timestamp":1489797310,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Alex Wilson"}],"currentPatchSet":{"number":"4","revision":"b1c53b5f49dd91cadc7c8ad0e6cef7101dab834b","parents":["b65e82e21df6f34ab3de25fa9494bcf2138c6df4"],"ref":"refs/changes/77/1677/4","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1489797072,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"NO_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489705460,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489796953,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1489797308,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"SUBM","value":"1","grantedOn":1489797309,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.adoc","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"lib/pool.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"test/pool.test.js","type":"MODIFIED","insertions":54,"deletions":-1}],"sizeInsertions":64,"sizeDeletions":-2},"patchSets":[{"number":"1","revision":"e8154e760c19cdfcd0bfbb382873717089af742f","parents":["7fc241da3f52fdb2b9956a98a785c4bd425aff7a"],"ref":"refs/changes/77/1677/1","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1489705038,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489705112,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"lib/pool.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"test/pool.test.js","type":"MODIFIED","insertions":54,"deletions":-1}],"sizeInsertions":63,"sizeDeletions":-2},{"number":"2","revision":"a61f24bfd0b008bed64c8372708e01fc9b25579e","parents":["7fc241da3f52fdb2b9956a98a785c4bd425aff7a"],"ref":"refs/changes/77/1677/2","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1489705369,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489796953,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489705460,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/pool.js","line":651,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Is the comment about the initq (and the check for it) wrong?"},{"file":"lib/pool.js","line":651,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"In what way? It\u0027s still correct that if it\u0027s doing a health check we put it back on the initq (that\u0027s what we do in this \"if\", by doing self.p_initq.push(fsm))"},{"file":"lib/pool.js","line":651,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Sorry, I misread what this code was doing.\n\nSo was this code written for a time when \u0027ping\u0027 was its own state in the FSM, and it\u0027s being updated here to reflect the modern way to tell that an FSM is pinging?"},{"file":"lib/pool.js","line":651,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Yes, that\u0027s correct."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.adoc","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"lib/pool.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"test/pool.test.js","type":"MODIFIED","insertions":54,"deletions":-1}],"sizeInsertions":64,"sizeDeletions":-2},{"number":"3","revision":"6e266c8cdb6a8979d932b5296790a00b47f4806a","parents":["7fc241da3f52fdb2b9956a98a785c4bd425aff7a"],"ref":"refs/changes/77/1677/3","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1489796996,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489796953,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489705460,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.adoc","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"lib/pool.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"test/pool.test.js","type":"MODIFIED","insertions":54,"deletions":-1}],"sizeInsertions":64,"sizeDeletions":-2},{"number":"4","revision":"b1c53b5f49dd91cadc7c8ad0e6cef7101dab834b","parents":["b65e82e21df6f34ab3de25fa9494bcf2138c6df4"],"ref":"refs/changes/77/1677/4","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1489797072,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"NO_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489796953,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1489797308,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"SUBM","value":"1","grantedOn":1489797309,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489705460,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.adoc","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"lib/pool.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"test/pool.test.js","type":"MODIFIED","insertions":54,"deletions":-1}],"sizeInsertions":64,"sizeDeletions":-2}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}]}