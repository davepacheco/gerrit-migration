From 8a77b905539870586893a14739e66648370cd6ee Mon Sep 17 00:00:00 2001
From: Todd Whiteman <todd.whiteman@joyent.com>
Date: Fri, 21 Apr 2017 11:17:58 -0700
Subject: [PATCH] DOCKER-1020 Define "public" network using Docker label

---
 CHANGES.md   |  4 ++++
 lib/index.js | 10 +++++++++-
 package.json |  2 +-
 3 files changed, 14 insertions(+), 2 deletions(-)

diff --git a/CHANGES.md b/CHANGES.md
index 6e15e1b..bc8a34e 100644
--- a/CHANGES.md
+++ b/CHANGES.md
@@ -1,5 +1,9 @@
 # node-triton-tags changelog
 
+## 1.1.4
+
+- DOCKER-1020: Add 'triton.network.public' tag
+
 ## 1.1.3
 
 - joyent/node-triton-tags#2: allow DNS names to start with a number. Even
diff --git a/lib/index.js b/lib/index.js
index d09c384..7be9f55 100644
--- a/lib/index.js
+++ b/lib/index.js
@@ -5,7 +5,7 @@
  */
 
 /*
- * Copyright 2016, Joyent, Inc.
+ * Copyright 2017, Joyent, Inc.
  */
 
 /*
@@ -21,6 +21,8 @@
  *   for the CNS service.
  * - `triton.cns.reverse_ptr` (string): DNS reverse pointer for this VM. Used
  *   by the CNS service.
+ * - `triton.network.public` (string): Set on a VM, used to specify the external
+ *   network name a VM will use.
  */
 
 var assert = require('assert-plus');
@@ -39,6 +41,7 @@ var typeFromKey = {
     'triton.cns.services': 'string',
     'triton.cns.disable': 'boolean',
     'triton.cns.reverse_ptr': 'string',
+    'triton.network.public': 'string',
 
     // Internal testing Triton tags
     'triton._test.string': 'string',
@@ -136,6 +139,11 @@ var validatorFromKey = {
         return null;
     },
 
+    'triton.network.public': function validateTritonNetworkPublic(val) {
+        assert.string(val, 'val');
+        return null;
+    },
+
     /*
      * Triton tags used for internal testing.
      */
diff --git a/package.json b/package.json
index 4db90f2..b24211c 100644
--- a/package.json
+++ b/package.json
@@ -1,7 +1,7 @@
 {
   "name": "triton-tags",
   "description": "Triton tags parsing and validation",
-  "version": "1.1.3",
+  "version": "1.1.4",
   "author": "Joyent (joyent.com)",
   "dependencies": {
     "assert-plus": "^1.0.0"
-- 
2.21.0

