{"project":"joyent/illumos-kvm","branch":"master","id":"I3a643852e3308ed9c47b2499adf00de5ec61061c","number":"6788","subject":"OS-7928 KVM %gs reload needs to prevent FBT Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Reviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Approved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e","owner":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"url":"https://cr.joyent.us/6788","commitMessage":"OS-7928 KVM %gs reload needs to prevent FBT\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nReviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nApproved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n","createdOn":1565686432,"lastUpdated":1565783561,"open":false,"status":"MERGED","comments":[{"timestamp":1565686432,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 1."},{"timestamp":1565686434,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 0f90e32b11b551c88b1d9bb50a2af1c4238bd4ea\n    \n    fix"},{"timestamp":1565691047,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 2: Commit message was updated."},{"timestamp":1565691141,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 3."},{"timestamp":1565691143,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 3f42c27593a32d079fdbff5471e6d752a4ea3369\n    \n    fix copyright"},{"timestamp":1565717112,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 3:\n\n(1 comment)\n\nJust need the one dumb question answered (and maybe its answer needs to be in comments?)."},{"timestamp":1565717174,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 3:\n\njlevon and I began diving into why we\u0027re mucking about with %gs in the first place.  It\u0027s still not totally clear."},{"timestamp":1565717559,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3:\n\n(1 comment)\n\nI know there are questions as to why KVM is doing this, but even absent that this seems reasonably sensible."},{"timestamp":1565722040,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1565723867,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 4."},{"timestamp":1565723869,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 16889366c4344b3696d4a140c172d60aa3fd5dee\n    \n    improve comment"},{"timestamp":1565723936,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1565724181,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1565727310,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1565728559,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 4: Integration-Approval+1"},{"timestamp":1565728723,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1565783561,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by John Levon"}],"currentPatchSet":{"number":"5","revision":"3a643852e3308ed9c47b2499adf00de5ec61061c","parents":["a40ccdebb9773dc0c23527bf5a74646a3c037563"],"ref":"refs/changes/88/6788/5","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1565728723,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1565723936,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1565724181,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1565727310,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1565728559,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1565783561,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"kvm_vmx.c","type":"MODIFIED","insertions":7,"deletions":-12},{"file":"kvm_x86.c","type":"MODIFIED","insertions":6,"deletions":-2}],"sizeInsertions":13,"sizeDeletions":-14},"patchSets":[{"number":"1","revision":"db950cdc2292a9e05e25de28cde6e5a07a63ed83","parents":["a40ccdebb9773dc0c23527bf5a74646a3c037563"],"ref":"refs/changes/88/6788/1","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1565686432,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"kvm_vmx.c","type":"MODIFIED","insertions":6,"deletions":-11},{"file":"kvm_x86.c","type":"MODIFIED","insertions":6,"deletions":-2}],"sizeInsertions":12,"sizeDeletions":-13},{"number":"2","revision":"cd75c7fdbe2233892ab61f7ba3a82e207a8f204a","parents":["a40ccdebb9773dc0c23527bf5a74646a3c037563"],"ref":"refs/changes/88/6788/2","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1565691047,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"kvm_vmx.c","type":"MODIFIED","insertions":6,"deletions":-11},{"file":"kvm_x86.c","type":"MODIFIED","insertions":6,"deletions":-2}],"sizeInsertions":12,"sizeDeletions":-13},{"number":"3","revision":"49453bc29736df9859c95249be8c9739d302f0b7","parents":["a40ccdebb9773dc0c23527bf5a74646a3c037563"],"ref":"refs/changes/88/6788/3","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1565691141,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","comments":[{"file":"kvm_x86.c","line":5065,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Can you expand the comment here and below to note that this is load bearing to making sure these aren\u0027t traceable via fbt and that it\u0027s the dtrace prefix that does that?"},{"file":"kvm_x86.c","line":5065,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I\u0027d rather not have that comment twice, which is why I put \"See ...\" ?"},{"file":"kvm_x86.c","line":5068,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Dumb question, does merely having dtrace_ as a prefix prevent this function from being FBT-marked?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"kvm_vmx.c","type":"MODIFIED","insertions":7,"deletions":-12},{"file":"kvm_x86.c","type":"MODIFIED","insertions":6,"deletions":-2}],"sizeInsertions":13,"sizeDeletions":-14},{"number":"4","revision":"e1d7c826195482b66760b837decd87bc2073ae14","parents":["a40ccdebb9773dc0c23527bf5a74646a3c037563"],"ref":"refs/changes/88/6788/4","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1565723867,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1565723936,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1565727310,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1565728559,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1565724181,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"kvm_vmx.c","type":"MODIFIED","insertions":7,"deletions":-12},{"file":"kvm_x86.c","type":"MODIFIED","insertions":6,"deletions":-2}],"sizeInsertions":13,"sizeDeletions":-14},{"number":"5","revision":"3a643852e3308ed9c47b2499adf00de5ec61061c","parents":["a40ccdebb9773dc0c23527bf5a74646a3c037563"],"ref":"refs/changes/88/6788/5","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1565728723,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1565723936,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1565727310,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1565728559,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1565724181,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"SUBM","value":"1","grantedOn":1565783561,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"kvm_vmx.c","type":"MODIFIED","insertions":7,"deletions":-12},{"file":"kvm_x86.c","type":"MODIFIED","insertions":6,"deletions":-2}],"sizeInsertions":13,"sizeDeletions":-14}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}]}