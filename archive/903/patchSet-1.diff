From aaab48fa677485dee45fabc5be1e4e879fa98e54 Mon Sep 17 00:00:00 2001
From: Pedro Palazon Candel <pedro@joyent.com>
Date: Tue, 15 Nov 2016 17:58:40 +0100
Subject: [PATCH] MANTA-3031 node-libmanta: Upgrade Node.js version from 0.10
 to 4.x

---
 lib/bunyan.js |  4 ++--
 lib/mahi.js   |  4 +---
 package.json  | 20 ++++++++++----------
 3 files changed, 13 insertions(+), 15 deletions(-)

diff --git a/lib/bunyan.js b/lib/bunyan.js
index 22e2935..906736e 100644
--- a/lib/bunyan.js
+++ b/lib/bunyan.js
@@ -5,11 +5,11 @@
  */
 
 /*
- * Copyright (c) 2014, Joyent, Inc.
+ * Copyright (c) 2016, Joyent, Inc.
  */
 
 var bunyan = require('bunyan');
-var restify = require('restify');
+var restify = require('restify-clients');
 
 
 
diff --git a/lib/mahi.js b/lib/mahi.js
index e45ba7f..71ed596 100644
--- a/lib/mahi.js
+++ b/lib/mahi.js
@@ -5,7 +5,7 @@
  */
 
 /*
- * Copyright (c) 2014, Joyent, Inc.
+ * Copyright (c) 2016, Joyent, Inc.
  */
 
 var dns = require('dns');
@@ -173,8 +173,6 @@ function createRedisClient(opts, cb) {
 
     var retry = backoff.call(connect, _opts, function (err, client) {
         retry.removeAllListeners('backoff');
-        var attempts = retry.getResults().length;
-        log.debug('client acquired after %d attempts', attempts);
         cb(err, client);
     });
 
diff --git a/package.json b/package.json
index 90e09e8..9dce229 100644
--- a/package.json
+++ b/package.json
@@ -10,25 +10,25 @@
         "url": "git+ssh://git@git.github.com:joyent/node-libmanta.git"
     },
     "dependencies": {
-        "assert-plus": "0.1.5",
-        "backoff": "2.3.0",
-        "bunyan": "0.22.1",
+        "assert-plus": "1.0.0",
+        "backoff": "2.4.1",
+        "bunyan": "1.8.1",
         "lru-cache": "2.3.1",
         "moray": "^2.0.0",
         "once": "1.3.0",
-        "restify": "2.6.3",
+        "restify-clients": "1.3.3",
         "redis": "0.10.1",
-        "vasync": "1.6.3",
-        "verror": "1.6.0",
+        "vasync": "1.6.4",
+        "verror": "1.7.0",
         "xtend": "2.1.2"
     },
     "devDependencies": {
-        "cmdutil": "0.1.0",
+        "cmdutil": "1.1.0",
         "extsprintf": "1.3.0",
-        "jsprim": "0.6.1",
-        "libuuid": "0.1.2",
+        "jsprim": "1.2.2",
+        "libuuid": "0.2.1",
         "lstream": "0.0.4",
-        "manta": "1.5.2",
+        "manta": "3.1.2",
         "nodeunit": "0.8.4",
         "posix-getopt": "1.2.0"
     },
-- 
2.21.0

