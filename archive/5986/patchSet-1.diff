From 10d5ce39f8be1c47ff9e3ec8bade541780ba4ef7 Mon Sep 17 00:00:00 2001
From: Josh Wilsdon <jwilsdon@joyent.com>
Date: Tue, 19 Mar 2019 17:28:53 -0700
Subject: [PATCH] TRITON-1314 sdc-agents-core should move into the future (node
 v6.17.0)

---
 Makefile     | 20 ++------------------
 package.json |  2 +-
 2 files changed, 3 insertions(+), 19 deletions(-)

diff --git a/Makefile b/Makefile
index fdd4711..1d20914 100644
--- a/Makefile
+++ b/Makefile
@@ -23,23 +23,12 @@ JSL_FILES_NODE   = $(JS_FILES)
 JSSTYLE_FILES	 = $(JS_FILES)
 JSSTYLE_FLAGS    = -o indent=4,doxygen,unparenthesized-return=0
 
-# Should be the same version as the platform's /usr/node/bin/node.
-NODE_PREBUILT_VERSION=v0.12.14
-NODE_PREBUILT_TAG=gz
-ifeq ($(shell uname -s),SunOS)
-    NODE_PREBUILT_IMAGE=fd2cc906-8938-11e3-beab-4359c665ac99
-endif
-
+NPM := npm
+BASE_IMAGE_UUID := fd2cc906-8938-11e3-beab-4359c665ac99
 ENGBLD_REQUIRE := $(shell git submodule update --init deps/eng)
 include ./deps/eng/tools/mk/Makefile.defs
 TOP ?= $(error Unable to access eng.git submodule Makefiles.)
 
-ifeq ($(shell uname -s),SunOS)
-    include ./deps/eng/tools/mk/Makefile.node_prebuilt.defs
-else
-    include ./deps/eng/tools/mk/Makefile.node.defs
-endif
-
 include ./deps/eng/tools/mk/Makefile.smf.defs
 
 NAME		:= agents_core
@@ -106,10 +95,5 @@ dumpvar:
 
 
 include ./deps/eng/tools/mk/Makefile.deps
-ifeq ($(shell uname -s),SunOS)
-    include ./deps/eng/tools/mk/Makefile.node_prebuilt.targ
-else
-    include ./deps/eng/tools/mk/Makefile.node.targ
-endif
 include ./deps/eng/tools/mk/Makefile.smf.targ
 include ./deps/eng/tools/mk/Makefile.targ
diff --git a/package.json b/package.json
index f648766..c8be70a 100644
--- a/package.json
+++ b/package.json
@@ -1,7 +1,7 @@
 {
   "name": "agents_core",
   "description": "Joyent SmartDC Agent Core",
-  "version": "2.2.1",
+  "version": "2.2.2",
   "author": "Joyent (joyent.com)",
   "private": true,
   "dependencies": {
-- 
2.21.0

