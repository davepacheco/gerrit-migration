{"project":"joyent/node-lockfd","branch":"master","id":"I715e9449b0ede277a3d3297b631abb6cb4b83117","number":"147","subject":"joyent/node-lockfd#5 Add support for flock(3C) Reviewed by: Alex Wilson \u003calex.wilson@joyent.com\u003e Reviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e Approved by: Joshua M. Clulow \u003cjmc@joyent.com\u003e","owner":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"url":"https://cr.joyent.us/147","commitMessage":"joyent/node-lockfd#5 Add support for flock(3C)\nReviewed by: Alex Wilson \u003calex.wilson@joyent.com\u003e\nReviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\nApproved by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\n","createdOn":1469572804,"lastUpdated":1470942461,"open":false,"status":"MERGED","comments":[{"timestamp":1469572804,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 1."},{"timestamp":1469574718,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 2."},{"timestamp":1469576628,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 3."},{"timestamp":1469576956,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1469577723,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 4."},{"timestamp":1469577792,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1469739816,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 4:\n\n(5 comments)"},{"timestamp":1469741606,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 5."},{"timestamp":1469741671,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 5:\n\n(4 comments)"},{"timestamp":1469741679,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1469741860,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1469741939,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 6: Commit message was updated."},{"timestamp":1469741979,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1469817237,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 7."},{"timestamp":1469817309,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1470162457,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 8: Commit message was updated."},{"timestamp":1470162478,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 8:\n\n@jclulow: Do the pthreads changes look good to you?"},{"timestamp":1470177354,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 6:\n\n(4 comments)"},{"timestamp":1470199867,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 9."},{"timestamp":1470199943,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1470200041,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 9: Code-Review+1"},{"timestamp":1470200048,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 9:\n\n(3 comments)"},{"timestamp":1470774549,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 10."},{"timestamp":1470774626,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1470903730,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 11: Commit message was updated."},{"timestamp":1470903776,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 11: Code-Review+1 Integration-Approval+1\n\nI have spoken with Cody about the testing he\u0027s been doing with \"vmadm\" and \"imgadm\" (which continue to use the fcntl-based locking) in a branch of the platform, as well as new testing for the \"fwadm\" changes that motivate this work.  I approve!"},{"timestamp":1470942461,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Cody Peter Mello"}],"currentPatchSet":{"number":"11","revision":"fb830e09605e402e541e7d17c79e0cd1530ee14e","parents":["a54ebf1a4ef951faf39dad6ec1a94028b6c1f029"],"ref":"refs/changes/47/147/11","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1470903730,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1470774626,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470903776,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470903776,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"SUBM","value":"1","grantedOn":1470942460,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":0,"deletions":-1},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":".npmignore","type":"ADDED","insertions":6,"deletions":0},{"file":"Makefile","type":"ADDED","insertions":75,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":64,"deletions":-6},{"file":"deps/jsstyle","type":"ADDED","insertions":1,"deletions":0},{"file":"lib/index.js","type":"MODIFIED","insertions":58,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/lockfd.c","type":"MODIFIED","insertions":165,"deletions":-9},{"file":"test/unit/flock.test.js","type":"ADDED","insertions":205,"deletions":0},{"file":"test/unit/lock-and-reply.js","type":"ADDED","insertions":16,"deletions":0},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":21,"deletions":0},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":12,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":51,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"ADDED","insertions":54,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"ADDED","insertions":318,"deletions":0}],"sizeInsertions":1058,"sizeDeletions":-20},"patchSets":[{"number":"1","revision":"d522aa3a515c429455cc3acf65c7c30a56860450","parents":["a54ebf1a4ef951faf39dad6ec1a94028b6c1f029"],"ref":"refs/changes/47/147/1","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1469572804,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":50,"deletions":0},{"file":"deps/jsstyle","type":"ADDED","insertions":1,"deletions":0},{"file":"lib/index.js","type":"MODIFIED","insertions":58,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/lockfd.c","type":"MODIFIED","insertions":126,"deletions":-9},{"file":"test/unit/flock.test.js","type":"ADDED","insertions":205,"deletions":0},{"file":"test/unit/lock-and-reply.js","type":"ADDED","insertions":16,"deletions":0},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":21,"deletions":0},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":13,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":51,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"ADDED","insertions":54,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"ADDED","insertions":318,"deletions":0}],"sizeInsertions":925,"sizeDeletions":-13},{"number":"2","revision":"9ab243feb7ce041ec6e045b19df90def947c0cc6","parents":["a54ebf1a4ef951faf39dad6ec1a94028b6c1f029"],"ref":"refs/changes/47/147/2","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1469574718,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":50,"deletions":0},{"file":"deps/jsstyle","type":"ADDED","insertions":1,"deletions":0},{"file":"lib/index.js","type":"MODIFIED","insertions":58,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/lockfd.c","type":"MODIFIED","insertions":126,"deletions":-9},{"file":"test/unit/flock.test.js","type":"ADDED","insertions":205,"deletions":0},{"file":"test/unit/lock-and-reply.js","type":"ADDED","insertions":16,"deletions":0},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":21,"deletions":0},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":13,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":51,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"ADDED","insertions":54,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"ADDED","insertions":318,"deletions":0}],"sizeInsertions":925,"sizeDeletions":-13},{"number":"3","revision":"84981fc414b2132eec9ae5ca164c968b96f90a5c","parents":["a54ebf1a4ef951faf39dad6ec1a94028b6c1f029"],"ref":"refs/changes/47/147/3","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1469576628,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1469576956,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":0,"deletions":-1},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"Makefile","type":"ADDED","insertions":75,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":50,"deletions":0},{"file":"deps/jsstyle","type":"ADDED","insertions":1,"deletions":0},{"file":"lib/index.js","type":"MODIFIED","insertions":58,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/lockfd.c","type":"MODIFIED","insertions":126,"deletions":-9},{"file":"test/unit/flock.test.js","type":"ADDED","insertions":205,"deletions":0},{"file":"test/unit/lock-and-reply.js","type":"ADDED","insertions":16,"deletions":0},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":21,"deletions":0},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":13,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":51,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"ADDED","insertions":54,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"ADDED","insertions":318,"deletions":0}],"sizeInsertions":1000,"sizeDeletions":-14},{"number":"4","revision":"1f886ee03c0e77717494ccb21d8df8a405147b92","parents":["a54ebf1a4ef951faf39dad6ec1a94028b6c1f029"],"ref":"refs/changes/47/147/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1469577723,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1469577792,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":".gitmodules","line":3,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"As discussed yesterday, should we start making these all https://?"},{"file":".gitmodules","line":3,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Yes, we should. I\u0027ll do that."},{"file":"/COMMIT_MSG","line":7,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Might want to make a bug for this, just one on the github issues for the repo itself should be fine"},{"file":"/COMMIT_MSG","line":7,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"Makefile","line":67,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Did you mean this to be a double-colon rule? If so, why? It seems like you removed the \"check\" rule from tools/mk/Makefile.targ so this could just be a normal rule, right?"},{"file":"Makefile","line":67,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Nope, the \"check\" rule is still in tools/mk/Makefile.targ, and is what\u0027s running jsstyle, so this needs to remain a double-colon rule."},{"file":"src/lockfd.c","line":46,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"I\u0027m not sure about the style here, but I think these should probably be return (\"CODE\"); on the line following the \"case:\", for regularity. The aligned returns are cute, but not really in the style of the rest of the file."},{"file":"src/lockfd.c","line":46,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"src/lockfd.c","line":89,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Should these be static, in keeping with the other callback functions?"},{"file":"src/lockfd.c","line":89,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":0,"deletions":-1},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"Makefile","type":"ADDED","insertions":75,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":50,"deletions":0},{"file":"deps/jsstyle","type":"ADDED","insertions":1,"deletions":0},{"file":"lib/index.js","type":"MODIFIED","insertions":58,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/lockfd.c","type":"MODIFIED","insertions":126,"deletions":-9},{"file":"test/unit/flock.test.js","type":"ADDED","insertions":205,"deletions":0},{"file":"test/unit/lock-and-reply.js","type":"ADDED","insertions":16,"deletions":0},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":21,"deletions":0},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":13,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":51,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"ADDED","insertions":54,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"ADDED","insertions":318,"deletions":0}],"sizeInsertions":1000,"sizeDeletions":-14},{"number":"5","revision":"254f1db607614da1f464747cc2145bdf36a5ac7b","parents":["a54ebf1a4ef951faf39dad6ec1a94028b6c1f029"],"ref":"refs/changes/47/147/5","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1469741606,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1469741860,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1469741679,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":0,"deletions":-1},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"Makefile","type":"ADDED","insertions":75,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":50,"deletions":0},{"file":"deps/jsstyle","type":"ADDED","insertions":1,"deletions":0},{"file":"lib/index.js","type":"MODIFIED","insertions":58,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/lockfd.c","type":"MODIFIED","insertions":134,"deletions":-9},{"file":"test/unit/flock.test.js","type":"ADDED","insertions":205,"deletions":0},{"file":"test/unit/lock-and-reply.js","type":"ADDED","insertions":16,"deletions":0},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":21,"deletions":0},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":13,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":51,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"ADDED","insertions":54,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"ADDED","insertions":318,"deletions":0}],"sizeInsertions":1008,"sizeDeletions":-14},{"number":"6","revision":"b06e59318ff0b26e18ade402b4c9f6033cd66498","parents":["a54ebf1a4ef951faf39dad6ec1a94028b6c1f029"],"ref":"refs/changes/47/147/6","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1469741939,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1469741860,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1469741679,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":0,"deletions":-1},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"Makefile","type":"ADDED","insertions":75,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":50,"deletions":0},{"file":"deps/jsstyle","type":"ADDED","insertions":1,"deletions":0},{"file":"lib/index.js","type":"MODIFIED","insertions":58,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/lockfd.c","type":"MODIFIED","insertions":134,"deletions":-9},{"file":"test/unit/flock.test.js","type":"ADDED","insertions":205,"deletions":0},{"file":"test/unit/lock-and-reply.js","type":"ADDED","insertions":16,"deletions":0},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":21,"deletions":0},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":13,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":51,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"ADDED","insertions":54,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"ADDED","insertions":318,"deletions":0}],"sizeInsertions":1008,"sizeDeletions":-14},{"number":"7","revision":"ff333a5e733a7b2c05af129acfac650cedd61400","parents":["a54ebf1a4ef951faf39dad6ec1a94028b6c1f029"],"ref":"refs/changes/47/147/7","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1469817237,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1469817309,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":0,"deletions":-1},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"Makefile","type":"ADDED","insertions":75,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":50,"deletions":0},{"file":"deps/jsstyle","type":"ADDED","insertions":1,"deletions":0},{"file":"lib/index.js","type":"MODIFIED","insertions":58,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/lockfd.c","type":"MODIFIED","insertions":161,"deletions":-9},{"file":"test/unit/flock.test.js","type":"ADDED","insertions":205,"deletions":0},{"file":"test/unit/lock-and-reply.js","type":"ADDED","insertions":16,"deletions":0},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":21,"deletions":0},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":13,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":51,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"ADDED","insertions":54,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"ADDED","insertions":318,"deletions":0}],"sizeInsertions":1035,"sizeDeletions":-14},{"number":"8","revision":"c1cc2db822db159bd341fef99b85daf1fb23448d","parents":["a54ebf1a4ef951faf39dad6ec1a94028b6c1f029"],"ref":"refs/changes/47/147/8","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1470162457,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1469817309,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"README.md","line":16,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I think this paragraph now mostly belongs to \"lockfd()\" and \"lockfdSync()\", right?"},{"file":"README.md","line":16,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve updated this section of the README to explain that there\u0027s a difference between lockfd* and flock*. I\u0027ve linked to the section of fcntl(2) that discusses the differences. Let me know if you think it needs more work."},{"file":"README.md","line":62,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"It would be good to expand OFD here, I think."},{"file":"src/lockfd.c","line":274,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Presumably we should be doing this in \"lockfd_lockfd()\" as well?"},{"file":"src/lockfd.c","line":274,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"tools/jsstyle.conf","line":12,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Should probably turn this one off.  I don\u0027t think there are any weird comments in this repository?"},{"file":"tools/jsstyle.conf","line":12,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":0,"deletions":-1},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"Makefile","type":"ADDED","insertions":75,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":50,"deletions":0},{"file":"deps/jsstyle","type":"ADDED","insertions":1,"deletions":0},{"file":"lib/index.js","type":"MODIFIED","insertions":58,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/lockfd.c","type":"MODIFIED","insertions":161,"deletions":-9},{"file":"test/unit/flock.test.js","type":"ADDED","insertions":205,"deletions":0},{"file":"test/unit/lock-and-reply.js","type":"ADDED","insertions":16,"deletions":0},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":21,"deletions":0},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":13,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":51,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"ADDED","insertions":54,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"ADDED","insertions":318,"deletions":0}],"sizeInsertions":1035,"sizeDeletions":-14},{"number":"9","revision":"4f81c9a7df63020c676f00c785162b0d04a1cb41","parents":["a54ebf1a4ef951faf39dad6ec1a94028b6c1f029"],"ref":"refs/changes/47/147/9","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1470199867,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470200041,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1470199943,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":0,"deletions":-1},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"Makefile","type":"ADDED","insertions":75,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":64,"deletions":-6},{"file":"deps/jsstyle","type":"ADDED","insertions":1,"deletions":0},{"file":"lib/index.js","type":"MODIFIED","insertions":58,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/lockfd.c","type":"MODIFIED","insertions":165,"deletions":-9},{"file":"test/unit/flock.test.js","type":"ADDED","insertions":205,"deletions":0},{"file":"test/unit/lock-and-reply.js","type":"ADDED","insertions":16,"deletions":0},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":21,"deletions":0},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":12,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":51,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"ADDED","insertions":54,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"ADDED","insertions":318,"deletions":0}],"sizeInsertions":1052,"sizeDeletions":-20},{"number":"10","revision":"715e9449b0ede277a3d3297b631abb6cb4b83117","parents":["a54ebf1a4ef951faf39dad6ec1a94028b6c1f029"],"ref":"refs/changes/47/147/10","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1470774549,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1470774626,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":0,"deletions":-1},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":".npmignore","type":"ADDED","insertions":6,"deletions":0},{"file":"Makefile","type":"ADDED","insertions":75,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":64,"deletions":-6},{"file":"deps/jsstyle","type":"ADDED","insertions":1,"deletions":0},{"file":"lib/index.js","type":"MODIFIED","insertions":58,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/lockfd.c","type":"MODIFIED","insertions":165,"deletions":-9},{"file":"test/unit/flock.test.js","type":"ADDED","insertions":205,"deletions":0},{"file":"test/unit/lock-and-reply.js","type":"ADDED","insertions":16,"deletions":0},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":21,"deletions":0},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":12,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":51,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"ADDED","insertions":54,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"ADDED","insertions":318,"deletions":0}],"sizeInsertions":1058,"sizeDeletions":-20},{"number":"11","revision":"fb830e09605e402e541e7d17c79e0cd1530ee14e","parents":["a54ebf1a4ef951faf39dad6ec1a94028b6c1f029"],"ref":"refs/changes/47/147/11","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1470903730,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1470942460,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470903776,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470903776,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1470774626,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":0,"deletions":-1},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":".npmignore","type":"ADDED","insertions":6,"deletions":0},{"file":"Makefile","type":"ADDED","insertions":75,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":64,"deletions":-6},{"file":"deps/jsstyle","type":"ADDED","insertions":1,"deletions":0},{"file":"lib/index.js","type":"MODIFIED","insertions":58,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"src/Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/lockfd.c","type":"MODIFIED","insertions":165,"deletions":-9},{"file":"test/unit/flock.test.js","type":"ADDED","insertions":205,"deletions":0},{"file":"test/unit/lock-and-reply.js","type":"ADDED","insertions":16,"deletions":0},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":21,"deletions":0},{"file":"tools/jsstyle.conf","type":"ADDED","insertions":12,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":51,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"ADDED","insertions":54,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"ADDED","insertions":318,"deletions":0}],"sizeInsertions":1058,"sizeDeletions":-20}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}]}