commit c429623c2e7dd306aeb85b20a22444e34e5a6ee8 (refs/changes/84/5084/3)
Author: Tim Foster <tim.foster@joyent.com>
Date:   2018-11-21T17:39:38+00:00 (11 months ago)
    
    MANTA-4024 madtom doesn't use its nodeunit dependency

diff --git a/Makefile b/Makefile
index 27176bc..9be8549 100644
--- a/Makefile
+++ b/Makefile
@@ -5,7 +5,7 @@
 #
 
 #
-# Copyright (c) 2017, Joyent, Inc.
+# Copyright (c) 2018, Joyent, Inc.
 #
 
 #
@@ -25,7 +25,6 @@
 #
 # Tools
 #
-NODEUNIT        := ./node_modules/.bin/nodeunit
 NPM             := npm
 
 #
@@ -74,17 +73,15 @@ NPM_ENV		 = MAKE_OVERRIDES="CTFCONVERT=/bin/true CTFMERGE=/bin/true"
 # Repo-specific targets
 #
 .PHONY: all
-all: $(SMF_MANIFESTS) | $(NODEUNIT) $(REPO_DEPS) scripts
-	$(NPM) install
-$(NODEUNIT): | $(NPM_EXEC)
+all: $(SMF_MANIFESTS) | $(REPO_DEPS) scripts
 	$(NPM) install
 
 CLEAN_FILES += $(NODEUNIT) ./node_modules/nodeunit
 
 .PHONY: test
-test: $(NODEUNIT)
+test:
 	mkdir -p ./tmp
-	find test/ -name '*.test.js' | xargs -t -L1 ctrun -o noorphan node
+	find test/ -name '*.test.js' | xargs -t -L1 ctrun -o noorphan $(NODE_EXEC)
 
 .PHONY: scripts
 scripts: deps/manta-scripts/.git
diff --git a/package.json b/package.json
index 3992d81..73dc502 100644
--- a/package.json
+++ b/package.json
@@ -17,7 +17,7 @@
                 "vasync": "1.5.0"
         },
         "devDependencies": {
-                "nodeunit": "0.7.4"
+                "debug": "3.1.0"
         },
         "engines": {
                 "node": "0.8.18"
