From dfcb9b1791b1fa35d990a00d85991d6fde4725c6 Mon Sep 17 00:00:00 2001
From: Alex Wilson <alex.wilson@joyent.com>
Date: Mon, 17 Oct 2016 16:54:29 -0700
Subject: [PATCH] PUBAPI-1334 CloudAPI should use cueball for talking to FWAPI
 PUBAPI-1335 fwapi left in the cold with no logger

---
 lib/app.js | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/lib/app.js b/lib/app.js
index e4d7970..06b9ab4 100644
--- a/lib/app.js
+++ b/lib/app.js
@@ -187,6 +187,7 @@ function createClients(options, callback) {
     assert.ok(options.vmapi);
     assert.ok(options.napi);
     assert.ok(options.imgapi);
+    assert.ok(options.fwapi);
     assert.ok(options.papi);
     assert.ok(options.ufds);
     assert.ok(options.ufds_master);
@@ -203,6 +204,9 @@ function createClients(options, callback) {
     options.napi.log   = options.log.child({ component: 'napi' });
     options.imgapi.log = options.log.child({ component: 'imgapi' });
     options.papi.log   = options.log.child({ component: 'papi' });
+    options.fwapi.log  = options.log.child({ component: 'fwapi' });
+
+    options.fwapi.agent = agent;
 
     if (options.mahi) {
         options.mahi.log = options.log.child({ component: 'mahi' });
-- 
2.21.0

