{"project":"joyent/node-watershed","branch":"master","id":"I97454dd7c3ec007d3915afd05bd4175c34086afb","number":"2443","subject":"joyent/node-watershed#4 WatershedConnections crash after receiving a ping joyent/node-watershed#3 Update dtrace-provider to 0.8.x for further node compatibility Reviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e Approved by: Joshua M. Clulow \u003cjmc@joyent.com\u003e","owner":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"url":"https://cr.joyent.us/2443","commitMessage":"joyent/node-watershed#4 WatershedConnections crash after receiving a ping\njoyent/node-watershed#3 Update dtrace-provider to 0.8.x for further node compatibility\nReviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\nApproved by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\n","createdOn":1503445652,"lastUpdated":1505941229,"open":false,"status":"MERGED","comments":[{"timestamp":1503445652,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 1."},{"timestamp":1503445676,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1503446622,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 2."},{"timestamp":1503446656,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1504984957,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 2:\n\n(5 comments)\n\nThanks for catching this!\n\nHave you done testing with node-manta?  It appears to depend on \"^0.3.1\", so I think that would pull a micro roll in automatically?  It looks like sdc-hermes.git depends on \"^0.3.0\" as well.\n\nOther dependents that I could see (medusa, cnapi) appear to depend on fixed version numbers."},{"timestamp":1504986768,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 3."},{"timestamp":1504986792,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1504987058,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 3:\n\n(5 comments)\n\nI installed patchset into a checked out node-manta repo, and ran an mlogin session. I played around in it for a little bit, to make sure there weren\u0027t any problems. I also ran:\n\n    cat /dev/random | base64-encode\n\nTo generate some activity.\n\nI haven\u0027t tried testing this out in hermes. If you\u0027d like me to do so, let me know."},{"timestamp":1505889470,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1\n\nThanks for the changes.  Ship it!"},{"timestamp":1505941218,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 4: Commit message was updated."},{"timestamp":1505941229,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Cody Peter Mello"}],"currentPatchSet":{"number":"4","revision":"214d02f17ac35ab13de12e179e4a223c7251dba8","parents":["84d01ea350c5bd7ade083badf08c49fef46e125b"],"ref":"refs/changes/43/2443/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1505941218,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1504986792,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505889470,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1505889470,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"SUBM","value":"1","grantedOn":1505941229,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".npmignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/watershed.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":11,"deletions":-6},{"file":"test/basic.js","type":"ADDED","insertions":152,"deletions":0}],"sizeInsertions":184,"sizeDeletions":-10},"patchSets":[{"number":"1","revision":"58347f1ecb9f48d51f110f46158387a42c4819eb","parents":["84d01ea350c5bd7ade083badf08c49fef46e125b"],"ref":"refs/changes/43/2443/1","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1503445652,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1503445676,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":9,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/watershed.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":11,"deletions":-6},{"file":"test/basic.js","type":"ADDED","insertions":152,"deletions":0}],"sizeInsertions":181,"sizeDeletions":-8},{"number":"2","revision":"3b0d763a11a63927b5afe3d6ffa9e4cc8e68fc6d","parents":["84d01ea350c5bd7ade083badf08c49fef46e125b"],"ref":"refs/changes/43/2443/2","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1503446622,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1503446656,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"CHANGES.md","line":9,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Should we bump the minor (i.e., release 0.4.0) because of this dtrace-provider bump?"},{"file":"CHANGES.md","line":9,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I don\u0027t think it\u0027s necessary. dtrace-provider hasn\u0027t dropped support for any node versions, only gained support for newer ones."},{"file":"Makefile","line":2,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"It\u0027s nitty, but can you make this eng.git-consistent; i.e.\n\n    Copyright (c) 2017, Joyent, Inc."},{"file":"Makefile","line":2,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"README.md","line":68,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"This should probably be a string value, i.e.\n\n    ...: \u002713\u0027"},{"file":"README.md","line":68,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/watershed.js","line":5,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"It\u0027s nitty, but can you make this eng.git-consistent; i.e.\n\n    Copyright (c) 2017, Joyent, Inc."},{"file":"lib/watershed.js","line":5,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"test/basic.js","line":2,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"It\u0027s nitty, but can you make this eng.git-consistent; i.e.\n\n    Copyright (c) 2017, Joyent, Inc."},{"file":"test/basic.js","line":2,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".npmignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/watershed.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":11,"deletions":-6},{"file":"test/basic.js","type":"ADDED","insertions":152,"deletions":0}],"sizeInsertions":184,"sizeDeletions":-10},{"number":"3","revision":"97454dd7c3ec007d3915afd05bd4175c34086afb","parents":["84d01ea350c5bd7ade083badf08c49fef46e125b"],"ref":"refs/changes/43/2443/3","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1504986768,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505889470,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1505889470,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1504986792,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".npmignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/watershed.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":11,"deletions":-6},{"file":"test/basic.js","type":"ADDED","insertions":152,"deletions":0}],"sizeInsertions":184,"sizeDeletions":-10},{"number":"4","revision":"214d02f17ac35ab13de12e179e4a223c7251dba8","parents":["84d01ea350c5bd7ade083badf08c49fef46e125b"],"ref":"refs/changes/43/2443/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1505941218,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1505941229,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505889470,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1505889470,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1504986792,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".npmignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/watershed.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":11,"deletions":-6},{"file":"test/basic.js","type":"ADDED","insertions":152,"deletions":0}],"sizeInsertions":184,"sizeDeletions":-10}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}]}