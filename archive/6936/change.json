{"project":"joyent/illumos-joyent","branch":"master","id":"Idd2057f36e5c6cad2132dfaf780d9252ac42a07b","number":"6936","subject":"OS-7999 out of bounds read in ict_siocgifconf64() Reviewed by: Mike Zeller \u003cmike.zeller@joyent.com\u003e Reviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e Approved by: Dan McDonald \u003cdanmcd@joyent.com\u003e","owner":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"url":"https://cr.joyent.us/6936","commitMessage":"OS-7999 out of bounds read in ict_siocgifconf64()\nReviewed by: Mike Zeller \u003cmike.zeller@joyent.com\u003e\nReviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e\nApproved by: Dan McDonald \u003cdanmcd@joyent.com\u003e\n","createdOn":1569560571,"lastUpdated":1569609814,"open":false,"status":"MERGED","comments":[{"timestamp":1569560571,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Uploaded patch set 1."},{"timestamp":1569594281,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 1: Code-Review+1 Integration-Approval+1"},{"timestamp":1569595782,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1569602011,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 1:\n\n(3 comments)\n\nAs I was looking at this with fresh eyes this morning, I found a nearby issue that should be dealt with at the same time."},{"timestamp":1569602065,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Uploaded patch set 2."},{"timestamp":1569603307,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 2: Code-Review+1\n\nNot only do you fix more bugs this way, it\u0027s more readable now (lx_len \u0026 native_len) too."},{"timestamp":1569604631,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1569604640,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1569604711,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 2: -Integration-Approval"},{"timestamp":1569607030,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 2: Integration-Approval+1\n\nThank you for the updated testing notes."},{"timestamp":1569609808,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 3: Commit message was updated."},{"timestamp":1569609814,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Mike Gerdts"}],"currentPatchSet":{"number":"3","revision":"9025f331a2570d6d68b91bc20ea24ab6a5b9d8b4","parents":["d34708cffc24f32c1138efa4de13db7b240c1b90"],"ref":"refs/changes/36/6936/3","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1569609808,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1569603307,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1569604640,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1569607030,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"SUBM","value":"1","grantedOn":1569609814,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_ioctl.c","type":"MODIFIED","insertions":61,"deletions":-33}],"sizeInsertions":61,"sizeDeletions":-33},"patchSets":[{"number":"1","revision":"a4a3f22de02c7098699f97750ba5da296bf3f7b2","parents":["d34708cffc24f32c1138efa4de13db7b240c1b90"],"ref":"refs/changes/36/6936/1","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1569560571,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1569595782,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1569594281,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1569594281,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"comments":[{"file":"usr/src/uts/common/brand/lx/syscall/lx_ioctl.c","line":1459,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"The 32-bit version is not vulnerable to the problem originally reported, but it does need to be more careful about allocations."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_ioctl.c","line":1545,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"We should avoid allocating arbitrary sized buffers."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_ioctl.c","line":1556,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"We don\u0027t ned to allocate a buffer that is sized for the maximum number of interfaces that the caller can accept.  We know how many interfaces will be returned (via sconf.ifc_len, which was modified by ict_if_ioctl) so allocate a buffer that is the right size."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_ioctl.c","type":"MODIFIED","insertions":8,"deletions":-2}],"sizeInsertions":8,"sizeDeletions":-2},{"number":"2","revision":"dd2057f36e5c6cad2132dfaf780d9252ac42a07b","parents":["d34708cffc24f32c1138efa4de13db7b240c1b90"],"ref":"refs/changes/36/6936/2","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1569602065,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1569604640,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1569603307,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1569607030,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_ioctl.c","type":"MODIFIED","insertions":61,"deletions":-33}],"sizeInsertions":61,"sizeDeletions":-33},{"number":"3","revision":"9025f331a2570d6d68b91bc20ea24ab6a5b9d8b4","parents":["d34708cffc24f32c1138efa4de13db7b240c1b90"],"ref":"refs/changes/36/6936/3","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1569609808,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1569604640,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1569603307,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1569607030,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"SUBM","value":"1","grantedOn":1569609814,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_ioctl.c","type":"MODIFIED","insertions":61,"deletions":-33}],"sizeInsertions":61,"sizeDeletions":-33}],"allReviewers":[{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}]}