{"project":"joyent/sdc-cloudapi","branch":"master","id":"If768bf7a5565ab0d9f45b3eeef4f6f83acbcc4f7","number":"3978","subject":"TRITON-52 x-DC image copy Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"url":"https://cr.joyent.us/3978","commitMessage":"TRITON-52 x-DC image copy\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1526671120,"lastUpdated":1530315836,"open":false,"status":"MERGED","comments":[{"timestamp":1526671120,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 1."},{"timestamp":1526671121,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit fbbe8b2cd7fd0ab2705cc04f20089fadf0149fa3\n    \n    TRITON-52 x-DC image copy"},{"timestamp":1526671155,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1526895624,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 1:\n\n(9 comments)"},{"timestamp":1527031715,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\n(9 comments)"},{"timestamp":1527048164,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1527617059,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 2."},{"timestamp":1527617061,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit aa0834cdb47508ffe04b87e41f4e503ee05fcdd6\n    \n    rename \u0027dc\u0027 to \u0027datacenter\u0027, updates from code review\n    \n    commit ab8e19762e9f782c185556d617344c44995b9e0c\n    \n    TRITON-52 x-DC image copy"},{"timestamp":1527617093,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1527632932,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 3."},{"timestamp":1527632935,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 31453092f3448ea199edd4c003a64158870a8d4b\n    \n    translate the resulting image object before returning"},{"timestamp":1527632969,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1527633013,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1527633015,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit ab81b9595d067e3c83afce29c9fda083b58210c7\n    \n    translate the resulting image object before returning\n    \n    commit 82ebdce2ae005ec4cb85f5fb71ab57b7eadae302\n    \n    rename \u0027dc\u0027 to \u0027datacenter\u0027, updates from code review\n    \n    commit e69f3597b55908ecebb91209e0eee7cdc776b6d3\n    \n    TRITON-52 x-DC image copy"},{"timestamp":1527633049,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4:\n\n\"make check\" passed ok"},{"timestamp":1528144157,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 5: Patch Set 4 was rebased."},{"timestamp":1528144159,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit 549cdb15b9e17a0af1339c4ca64432b8bbde6a28\n    \n    translate the resulting image object before returning\n    \n    commit 65036e4d3164bc7b8240bd9282ef1bd09a2a4a60\n    \n    rename \u0027dc\u0027 to \u0027datacenter\u0027, updates from code review\n    \n    commit bc58cf4d4e7f2201793c125c35bbe05994c73fc0\n    \n    TRITON-52 x-DC image copy"},{"timestamp":1528144194,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5:\n\n\"make check\" passed ok"},{"timestamp":1528227358,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 5:\n\n(2 comments)\n\nPartial review. I\u0027m still looking at the related CRs."},{"timestamp":1529605338,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 6: Patch Set 5 was rebased."},{"timestamp":1529605340,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit 1afec3810ede62fe56439dd74c8b27df47e72dfd\n    \n    translate the resulting image object before returning\n    \n    commit 16a5a0f74b1003c07509a4ef2ae16e3382aae08b\n    \n    rename \u0027dc\u0027 to \u0027datacenter\u0027, updates from code review\n    \n    commit 2dfac5ade88b7f5b982638c7bb94bce192262ff3\n    \n    TRITON-52 x-DC image copy"},{"timestamp":1529605374,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6:\n\n\"make check\" passed ok"},{"timestamp":1530146313,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 7."},{"timestamp":1530146315,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 7:\n\nNew commits:\n    \n    commit aad5949ebf1c0221d76da01b78adf8bbcfba93c2\n    \n    translate the resulting image object before returning\n    \n    commit b287d6d8664c86d46302f272f8135c06dfc83c4b\n    \n    rename \u0027dc\u0027 to \u0027datacenter\u0027, updates from code review\n    \n    commit 10857b4d8fe6ea38f935c1b72ab9272501380110\n    \n    TRITON-52 x-DC image copy"},{"timestamp":1530146351,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1530219384,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 7:\n\n(4 comments)"},{"timestamp":1530293471,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 7:\n\n(4 comments)"},{"timestamp":1530293478,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 8."},{"timestamp":1530293480,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 8:\n\nNew commits:\n    \n    commit 0094d5bcf05aab7606169e1b1c19498b02b1c3cc\n    \n    update exception for an invalid image uuid\n    \n    commit dbcb28faecd43574a59a1c9c2fd90488cca2a4bf\n    \n    update docs"},{"timestamp":1530293514,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1530295817,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 8:\n\n(2 comments)\n\nTodd,\n\nAlso now want to add a \u0027Datacenter: $dcName\u0027 header to ListDatacenters at least so `triton image copy ...` can get it?"},{"timestamp":1530296431,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 8:\n\n(2 comments)"},{"timestamp":1530296434,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 9."},{"timestamp":1530296436,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 9:\n\nNew commits:\n    \n    commit 858e41cbadde7c689f10c744aee0f8f6d5c3f663\n    \n    use cloudapi string in Server header example"},{"timestamp":1530296471,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1530308830,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 10."},{"timestamp":1530308832,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 10:\n\nNew commits:\n    \n    commit 357fabd577a86124a3c939930984fc8ce76cfefb\n    \n    add Triton-Datacenter-Name header to ping and ListDatacenters"},{"timestamp":1530308867,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1530309444,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 10:\n\n(4 comments)"},{"timestamp":1530311150,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 11."},{"timestamp":1530311152,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 11:\n\nNew commits:\n    \n    commit 80c68d87d736f621ab13cd651270b117fbf9d7cc\n    \n    add docs notes on Triton-Datacenter-Name, add test for Triton-Datacenter-Name\n    response in ListHeaders"},{"timestamp":1530311184,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 10:\n\n(4 comments)"},{"timestamp":1530311186,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1530315577,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 11: Code-Review+1 Integration-Approval+1"},{"timestamp":1530315626,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 12: Commit message was updated."},{"timestamp":1530315836,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Todd Whiteman"}],"currentPatchSet":{"number":"12","revision":"f768bf7a5565ab0d9f45b3eeef4f6f83acbcc4f7","parents":["accd84d9fd81f412cd642016cd3d79b3ac82400f"],"ref":"refs/changes/78/3978/12","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1530315626,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1530311186,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1530315577,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1530315577,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1530315836,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":111,"deletions":-5},{"file":"lib/account.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/datacenters.js","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":52,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/datacenters.test.js","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":174,"sizeDeletions":-9},"patchSets":[{"number":"1","revision":"201b4388f56ed3e2d429bc03586412074dedba72","parents":["497bcf9395a92564a9fd268e818f9afc0e0cb64b"],"ref":"refs/changes/78/3978/1","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1526671120,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1526671155,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"docs/index.md","line":924,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Isn\u0027t our current terminology \"region\"?\n\nCloud is a vague term. This is confusing without something more concrete."},{"file":"docs/index.md","line":924,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"This feature is to allow copying of images between different regions in the same cloud. E.g. within TPC (Triton Public Cloud) or within SPC (Samsung Private Cloud).\n\nNote that ListDatacenters uses the terminology \"this cloud\":\n\"Provides a list of all datacenters this cloud is aware of.\"\n\nRegion is for a geographical area right? E.g. us-west-1 or eu-ams-1\n\nHonestly, I\u0027m not sure what the correct terminology for this is (if not cloud). From my POV \"region\" and \"datacenter\" are interchangable. C.f. \nhttps://docs.joyent.com/public-cloud/data-centers"},{"file":"docs/index.md","line":924,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"\"cloud\" is appropriate. The sharing domain here is any number of DCs that (a) can be linked (e.g. admin networks are accessible so IMGAPIs can talk to each other and (b) share the same UFDS user database.\n\nI\u0027m still a little confused on region myself, e.g.:\n- JPC us-east-1/2/3 are a single \"us-east\" region on some internal terminology\n- SPC us-east-1{abc} are ... three DCs in on \"us-east-1\" region? I\u0027m not sure."},{"file":"docs/index.md","line":3837,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"remove"},{"file":"docs/index.md","line":3837,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"docs/index.md","line":3840,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"region?"},{"file":"docs/index.md","line":3840,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Same as first comment."},{"file":"docs/index.md","line":3849,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Considering that we don\u0027t generally use shortened attributes in cloudapi (other than id), I wonder if maybe this should be \"datacenter\"?"},{"file":"docs/index.md","line":3849,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Sure - a longer name will also make searching easier (e.g. from logs).\n\nI guess I should also change the endpoint action to be \"import-from-datacenter\":\n/:login/images?action\u003dimport-from-datacenter"},{"file":"docs/index.md","line":3865,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Probably should be hyphenated. Or rephrase as \"image owned by the admin\"."},{"file":"docs/index.md","line":3865,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"docs/index.md","line":3866,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"remove"},{"file":"docs/index.md","line":3866,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/datasets.js","line":8,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Channeling JoshW: 2018!"},{"file":"lib/datasets.js","line":8,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/datasets.js","line":445,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Usually I\u0027m a fan of pulling variables out like this, but since it\u0027s only used in one place in this func, maybe just leave it inside if()."},{"file":"lib/datasets.js","line":445,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/datasets.js","line":595,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/datasets.js","line":595,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":96,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":51,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":149,"sizeDeletions":-3},{"number":"2","revision":"defa052e54d6d14f687dacdde5d5aff9b385e1fa","parents":["a404ed6c72d2e42bd20b69e9c35f8a3a13d56a33"],"ref":"refs/changes/78/3978/2","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1527617059,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527617093,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":97,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":51,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":150,"sizeDeletions":-4},{"number":"3","revision":"fc6fd829d45da6ad4291c6c18b59a8d056d3956c","parents":["a404ed6c72d2e42bd20b69e9c35f8a3a13d56a33"],"ref":"refs/changes/78/3978/3","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1527632932,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527632969,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":97,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":52,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":151,"sizeDeletions":-4},{"number":"4","revision":"6b71cfe7452d4a29b81bfd289bd8d88f4bbbd05a","parents":["14ff789a417e5ecf448fbbbc67b22440c98a9f1b"],"ref":"refs/changes/78/3978/4","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1527633013,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527632969,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":97,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":52,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":151,"sizeDeletions":-4},{"number":"5","revision":"d7d982529d981d6bceaf6bc4aa6eb4acf1a53bc6","parents":["7fc4a79d42d88b0c63449bcf23be4124d09f27e1"],"ref":"refs/changes/78/3978/5","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1528144157,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527632969,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"docs/index.md","line":3836,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"quote this to not get markdown handling for `_`."},{"file":"docs/index.md","line":3849,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Mention the \u0027action\u0027 query param in the table here? I *think* other endpoints do so."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":97,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":52,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":151,"sizeDeletions":-4},{"number":"6","revision":"c085a24c8e13dce69e8d6b5f7c9f0548580bd581","parents":["6ebcae4340dd19c556c7de890e90b3bb6cebe97d"],"ref":"refs/changes/78/3978/6","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1529605338,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527632969,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":97,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":52,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":151,"sizeDeletions":-4},{"number":"7","revision":"9969fb2747e1a29f12ded893b93dc83f1f1a2a09","parents":["accd84d9fd81f412cd642016cd3d79b3ac82400f"],"ref":"refs/changes/78/3978/7","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1530146313,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1530146351,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"docs/index.md","line":3848,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"put in backticks to avoid markdowning on the underscore"},{"file":"docs/index.md","line":3848,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"docs/index.md","line":3910,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I believe that\u0027ll now be: \"cloudapi/9.2.0\""},{"file":"docs/index.md","line":3910,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/datasets.js","line":581,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"If they pass id, but not as a UUID, this error msg is a little misleading."},{"file":"lib/datasets.js","line":581,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/datasets.js","line":592,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Okay, so the CloudAPI call is sync. If the image is huge, then we could relatively easily get a connection fail and the job would still be going on.  There had been talk in the RFD (or the ticket) about being able to resume. I.e. make the same call again, and if there was a job in progress for this one, then it would just wait on that job.\n\n... can we at least open a separate ticket to follow up on this. The first time we hit a multi-GB image in JPC/SPC I\u0027ll wager we are going to be talking about this."},{"file":"lib/datasets.js","line":592,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Will do - we discussed this previously before (maybe in chat) - most image copies (if configured properly) should be a manta snaplink, so this should be a fast operation."},{"file":"lib/datasets.js","line":592,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"snaplink: Only in either JPC (one shared remote manta across all regions), or with DCs within a region. So... perhaps \"many\" rather than most."},{"file":"lib/datasets.js","line":592,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Ah, I forgot that JPC isn\u0027t the norm, and that SPC has different Manta deployments."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":97,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":52,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":151,"sizeDeletions":-4},{"number":"8","revision":"482d5fe56fef687a4b24335fdbfa9b930a15c514","parents":["accd84d9fd81f412cd642016cd3d79b3ac82400f"],"ref":"refs/changes/78/3978/8","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1530293478,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1530293514,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"docs/index.md","line":3910,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Actually \"cloudapi/9.2.0\" rather than \"Joyent Triton $version\" per https://github.com/joyent/sdc-cloudapi/blob/accd84d9fd81f412cd642016cd3d79b3ac82400f/lib/app.js#L276"},{"file":"docs/index.md","line":3910,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":97,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":52,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":151,"sizeDeletions":-4},{"number":"9","revision":"9e54714faab72b69cb61e54b2de2e903b0749b58","parents":["accd84d9fd81f412cd642016cd3d79b3ac82400f"],"ref":"refs/changes/78/3978/9","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1530296434,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1530296471,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":97,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":52,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":151,"sizeDeletions":-4},{"number":"10","revision":"0bd8c6a3646edf1e80a66fb9606f63055efbc754","parents":["accd84d9fd81f412cd642016cd3d79b3ac82400f"],"ref":"refs/changes/78/3978/10","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1530308830,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1530308867,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/account.js","line":39,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Likewise, don\u0027t need this guard."},{"file":"lib/account.js","line":39,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/account.js","line":40,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Likewise a doc note for the ping endpoint including this header."},{"file":"lib/account.js","line":40,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/datacenters.js","line":47,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Dn\u0027t really need this guard. It will alwasy be there (according to the sapi manifest). Not sure if cloudapi validates its config explicitly tho."},{"file":"lib/datacenters.js","line":47,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/datacenters.js","line":48,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"We should add a doc note on this endpoint so that future maintainers know that it is a promised interface.\n\nTechnically a test case would be nice, but that can come later."},{"file":"lib/datacenters.js","line":48,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done - added test on ListDatacenters response header."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":97,"deletions":0},{"file":"lib/account.js","type":"MODIFIED","insertions":7,"deletions":0},{"file":"lib/datacenters.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":52,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":163,"sizeDeletions":-4},{"number":"11","revision":"979e97c65734de55154b5f9ad6fa61aa85bac577","parents":["accd84d9fd81f412cd642016cd3d79b3ac82400f"],"ref":"refs/changes/78/3978/11","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1530311150,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1530311186,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1530315577,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1530315577,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":111,"deletions":-5},{"file":"lib/account.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/datacenters.js","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":52,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/datacenters.test.js","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":174,"sizeDeletions":-9},{"number":"12","revision":"f768bf7a5565ab0d9f45b3eeef4f6f83acbcc4f7","parents":["accd84d9fd81f412cd642016cd3d79b3ac82400f"],"ref":"refs/changes/78/3978/12","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1530315626,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1530311186,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1530315577,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1530315577,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1530315836,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":111,"deletions":-5},{"file":"lib/account.js","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/datacenters.js","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":52,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/datacenters.test.js","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":174,"sizeDeletions":-9}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}]}