{"project":"joyent/illumos-extra","branch":"master","topic":"OS-7042","id":"I7466916649919244085a28868864bd1fe0b4c3e1","number":"4412","subject":"OS-7042 illumos-extra should support building optional, extra gcc versions Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Approved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e","owner":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"url":"https://cr.joyent.us/4412","commitMessage":"OS-7042 illumos-extra should support building optional, extra gcc versions\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1529687283,"lastUpdated":1531851376,"open":false,"status":"MERGED","comments":[{"timestamp":1529687283,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 1."},{"timestamp":1529687299,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Topic set to OS-7042"},{"timestamp":1529687428,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 2."},{"timestamp":1529687443,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\nApologies for the initial update, I accidentally had a slightly out of date branch pushed."},{"timestamp":1529696065,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2:\n\n(7 comments)\n\nHow much scrutiny do you want on the gcc patches themselves?"},{"timestamp":1529950624,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 3."},{"timestamp":1529950637,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2:\n\n(7 comments)"},{"timestamp":1530131071,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1530548433,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1530793306,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1530795050,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3: Code-Review+1\n\nThanks for the pointer."},{"timestamp":1531232649,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1531851227,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1531851376,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Robert Mustacchi"}],"currentPatchSet":{"number":"4","revision":"7466916649919244085a28868864bd1fe0b4c3e1","parents":["76f3901bdbeb12acaeafa85e0ca52846f52a3c6e"],"ref":"refs/changes/12/4412/4","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1531851227,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1530131071,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1530795050,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1531232649,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1531851376,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":40,"deletions":-3},{"file":"Makefile.defs","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"gcc4/Makefile","type":"MODIFIED","insertions":27,"deletions":-15},{"file":"gcc6/Makefile","type":"ADDED","insertions":173,"deletions":0},{"file":"gcc6/Patches/001-illumos-gcc.patch","type":"ADDED","insertions":695,"deletions":0},{"file":"gcc6/Patches/002-ld-flags.patch","type":"ADDED","insertions":24,"deletions":0},{"file":"gcc6/Patches/003-cilk-sparc.patch","type":"ADDED","insertions":327,"deletions":0},{"file":"gcc6/Patches/004-alignment.patch","type":"ADDED","insertions":111,"deletions":0},{"file":"gcc6/Patches/fixinc.in.patch","type":"ADDED","insertions":21,"deletions":0},{"file":"gcc6/Patches/libgo_runtime_proc.c.patch","type":"ADDED","insertions":17,"deletions":0},{"file":"gcc6/Patches/libstdc++-no-rt.patch","type":"ADDED","insertions":22,"deletions":0},{"file":"gcc6/Patches/use-cxa_atexit.patch","type":"ADDED","insertions":11,"deletions":0},{"file":"gcc6/gcc-6.4.0.tar.gz.sha1","type":"ADDED","insertions":1,"deletions":0},{"file":"gcc6/gmp-6.1.2.tar.bz2.sha1","type":"ADDED","insertions":1,"deletions":0},{"file":"gcc6/mpc-1.0.3.tar.gz.sha1","type":"ADDED","insertions":1,"deletions":0},{"file":"gcc6/mpfr-3.1.6.tar.bz2.sha1","type":"ADDED","insertions":1,"deletions":0}],"sizeInsertions":1479,"sizeDeletions":-21},"patchSets":[{"number":"1","revision":"2de95da6a82cb24fad39f52559b05e2fa7f78a80","parents":["76f3901bdbeb12acaeafa85e0ca52846f52a3c6e"],"ref":"refs/changes/12/4412/1","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1529687283,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":39,"deletions":-2},{"file":"Makefile.defs","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"gcc4/Makefile","type":"MODIFIED","insertions":21,"deletions":-9},{"file":"gcc6/Makefile","type":"ADDED","insertions":162,"deletions":0},{"file":"gcc6/Patches/001-illumos-gcc.patch","type":"ADDED","insertions":695,"deletions":0},{"file":"gcc6/Patches/002-ld-flags.patch","type":"ADDED","insertions":24,"deletions":0},{"file":"gcc6/Patches/003-cilk-sparc.patch","type":"ADDED","insertions":327,"deletions":0},{"file":"gcc6/Patches/004-alignment.patch","type":"ADDED","insertions":111,"deletions":0},{"file":"gcc6/Patches/fixinc.in.patch","type":"ADDED","insertions":21,"deletions":0},{"file":"gcc6/Patches/libgo_runtime_proc.c.patch","type":"ADDED","insertions":17,"deletions":0},{"file":"gcc6/Patches/libstdc++-no-rt.patch","type":"ADDED","insertions":22,"deletions":0},{"file":"gcc6/Patches/use-cxa_atexit.patch","type":"ADDED","insertions":11,"deletions":0},{"file":"gcc6/gcc-6.4.0.tar.gz.sha1","type":"ADDED","insertions":1,"deletions":0},{"file":"gcc6/gmp-6.1.2.tar.bz2.sha1","type":"ADDED","insertions":1,"deletions":0},{"file":"gcc6/mpc-1.0.3.tar.gz.sha1","type":"ADDED","insertions":1,"deletions":0},{"file":"gcc6/mpfr-3.1.6.tar.bz2.sha1","type":"ADDED","insertions":1,"deletions":0}],"sizeInsertions":1460,"sizeDeletions":-13},{"number":"2","revision":"c33b5f244db9854bf38dc04ffcc91552a52585b2","parents":["76f3901bdbeb12acaeafa85e0ca52846f52a3c6e"],"ref":"refs/changes/12/4412/2","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1529687428,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","comments":[{"file":"gcc4/Makefile","line":68,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"minor nit: any reason not to include this (with its comment) in the block below?"},{"file":"gcc4/Makefile","line":68,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I didn\u0027t want to originally conflate the STRAP logic with the prefix with the fixups, given the comments explaining what we do."},{"file":"gcc6/Makefile","line":13,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"nix trailing space"},{"file":"gcc6/Makefile","line":13,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"gcc6/Makefile","line":58,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"same nit as before: any reason to keep this separate from the block below?"},{"file":"gcc6/Makefile","line":58,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Same answer as previous."},{"file":"gcc6/Makefile","line":83,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"not sure this comma makes sense here"},{"file":"gcc6/Makefile","line":83,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"gcc6/Makefile","line":117,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"nit: nix the \"so\""},{"file":"gcc6/Makefile","line":117,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"gcc6/Makefile","line":119,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"wrap this in commas?"},{"file":"gcc6/Makefile","line":119,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"gcc6/Makefile","line":127,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"nix the \"so\""},{"file":"gcc6/Makefile","line":127,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":40,"deletions":-3},{"file":"Makefile.defs","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"gcc4/Makefile","type":"MODIFIED","insertions":22,"deletions":-10},{"file":"gcc6/Makefile","type":"ADDED","insertions":173,"deletions":0},{"file":"gcc6/Patches/001-illumos-gcc.patch","type":"ADDED","insertions":695,"deletions":0},{"file":"gcc6/Patches/002-ld-flags.patch","type":"ADDED","insertions":24,"deletions":0},{"file":"gcc6/Patches/003-cilk-sparc.patch","type":"ADDED","insertions":327,"deletions":0},{"file":"gcc6/Patches/004-alignment.patch","type":"ADDED","insertions":111,"deletions":0},{"file":"gcc6/Patches/fixinc.in.patch","type":"ADDED","insertions":21,"deletions":0},{"file":"gcc6/Patches/libgo_runtime_proc.c.patch","type":"ADDED","insertions":17,"deletions":0},{"file":"gcc6/Patches/libstdc++-no-rt.patch","type":"ADDED","insertions":22,"deletions":0},{"file":"gcc6/Patches/use-cxa_atexit.patch","type":"ADDED","insertions":11,"deletions":0},{"file":"gcc6/gcc-6.4.0.tar.gz.sha1","type":"ADDED","insertions":1,"deletions":0},{"file":"gcc6/gmp-6.1.2.tar.bz2.sha1","type":"ADDED","insertions":1,"deletions":0},{"file":"gcc6/mpc-1.0.3.tar.gz.sha1","type":"ADDED","insertions":1,"deletions":0},{"file":"gcc6/mpfr-3.1.6.tar.bz2.sha1","type":"ADDED","insertions":1,"deletions":0}],"sizeInsertions":1474,"sizeDeletions":-16},{"number":"3","revision":"38fce57b058fb01207412f07a5ca968591d3a45d","parents":["76f3901bdbeb12acaeafa85e0ca52846f52a3c6e"],"ref":"refs/changes/12/4412/3","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1529950624,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1530795050,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1531232649,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1530131071,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"comments":[{"file":"Makefile.defs","line":25,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"I don\u0027t see where this is being used in this change. Am I missing it?"},{"file":"Makefile.defs","line":25,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"See https://cr.joyent.us/#/c/4412/3/gcc6/Makefile@105"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":40,"deletions":-3},{"file":"Makefile.defs","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"gcc4/Makefile","type":"MODIFIED","insertions":27,"deletions":-15},{"file":"gcc6/Makefile","type":"ADDED","insertions":173,"deletions":0},{"file":"gcc6/Patches/001-illumos-gcc.patch","type":"ADDED","insertions":695,"deletions":0},{"file":"gcc6/Patches/002-ld-flags.patch","type":"ADDED","insertions":24,"deletions":0},{"file":"gcc6/Patches/003-cilk-sparc.patch","type":"ADDED","insertions":327,"deletions":0},{"file":"gcc6/Patches/004-alignment.patch","type":"ADDED","insertions":111,"deletions":0},{"file":"gcc6/Patches/fixinc.in.patch","type":"ADDED","insertions":21,"deletions":0},{"file":"gcc6/Patches/libgo_runtime_proc.c.patch","type":"ADDED","insertions":17,"deletions":0},{"file":"gcc6/Patches/libstdc++-no-rt.patch","type":"ADDED","insertions":22,"deletions":0},{"file":"gcc6/Patches/use-cxa_atexit.patch","type":"ADDED","insertions":11,"deletions":0},{"file":"gcc6/gcc-6.4.0.tar.gz.sha1","type":"ADDED","insertions":1,"deletions":0},{"file":"gcc6/gmp-6.1.2.tar.bz2.sha1","type":"ADDED","insertions":1,"deletions":0},{"file":"gcc6/mpc-1.0.3.tar.gz.sha1","type":"ADDED","insertions":1,"deletions":0},{"file":"gcc6/mpfr-3.1.6.tar.bz2.sha1","type":"ADDED","insertions":1,"deletions":0}],"sizeInsertions":1479,"sizeDeletions":-21},{"number":"4","revision":"7466916649919244085a28868864bd1fe0b4c3e1","parents":["76f3901bdbeb12acaeafa85e0ca52846f52a3c6e"],"ref":"refs/changes/12/4412/4","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1531851227,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1531851376,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1530795050,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1531232649,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1530131071,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":40,"deletions":-3},{"file":"Makefile.defs","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"gcc4/Makefile","type":"MODIFIED","insertions":27,"deletions":-15},{"file":"gcc6/Makefile","type":"ADDED","insertions":173,"deletions":0},{"file":"gcc6/Patches/001-illumos-gcc.patch","type":"ADDED","insertions":695,"deletions":0},{"file":"gcc6/Patches/002-ld-flags.patch","type":"ADDED","insertions":24,"deletions":0},{"file":"gcc6/Patches/003-cilk-sparc.patch","type":"ADDED","insertions":327,"deletions":0},{"file":"gcc6/Patches/004-alignment.patch","type":"ADDED","insertions":111,"deletions":0},{"file":"gcc6/Patches/fixinc.in.patch","type":"ADDED","insertions":21,"deletions":0},{"file":"gcc6/Patches/libgo_runtime_proc.c.patch","type":"ADDED","insertions":17,"deletions":0},{"file":"gcc6/Patches/libstdc++-no-rt.patch","type":"ADDED","insertions":22,"deletions":0},{"file":"gcc6/Patches/use-cxa_atexit.patch","type":"ADDED","insertions":11,"deletions":0},{"file":"gcc6/gcc-6.4.0.tar.gz.sha1","type":"ADDED","insertions":1,"deletions":0},{"file":"gcc6/gmp-6.1.2.tar.bz2.sha1","type":"ADDED","insertions":1,"deletions":0},{"file":"gcc6/mpc-1.0.3.tar.gz.sha1","type":"ADDED","insertions":1,"deletions":0},{"file":"gcc6/mpfr-3.1.6.tar.bz2.sha1","type":"ADDED","insertions":1,"deletions":0}],"sizeInsertions":1479,"sizeDeletions":-21}],"allReviewers":[{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}]}