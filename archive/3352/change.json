{"project":"joyent/pgstatsmon","branch":"master","id":"Ied0f937f5f778ad8d26d028741fe3b05d5826982","number":"3352","subject":"joyent/pgstatsmon#4 improve connection handling and backend discovery joyent/pgstatsmon#5 add and improve queries joyent/pgstatsmon#7 add \u0027release\u0027 and \u0027publish\u0027 targets joyent/pgstatsmon#8 create a Postgres user for pgstatsmon Reviewed by: Richard Kiene ","owner":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"url":"https://cr.joyent.us/3352","commitMessage":"joyent/pgstatsmon#4 improve connection handling and backend discovery\njoyent/pgstatsmon#5 add and improve queries\njoyent/pgstatsmon#7 add \u0027release\u0027 and \u0027publish\u0027 targets\njoyent/pgstatsmon#8 create a Postgres user for pgstatsmon\nReviewed by: Richard Kiene \u003crichard.kiene@joyent.com\u003e\nApproved by: Richard Kiene \u003crichard.kiene@joyent.com\u003e\n","createdOn":1518464724,"lastUpdated":1525980479,"open":false,"status":"MERGED","comments":[{"timestamp":1518464724,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 1."},{"timestamp":1518464729,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1518465820,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 2."},{"timestamp":1518465824,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1522780456,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 3."},{"timestamp":1522780460,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1522785521,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 4."},{"timestamp":1522785524,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1522785563,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 5."},{"timestamp":1522785567,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1522970710,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 6."},{"timestamp":1522970713,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1522970737,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 7."},{"timestamp":1522970741,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1523054109,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 8."},{"timestamp":1523054113,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1523477619,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 9."},{"timestamp":1523477625,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1524270249,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 10."},{"timestamp":1524270255,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1524510840,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 11."},{"timestamp":1524510846,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1524512557,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 12."},{"timestamp":1524512562,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 12: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1524581463,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 13."},{"timestamp":1524581468,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 13: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1524854078,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 14."},{"timestamp":1524854085,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 14: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1524854150,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 14:\n\nPatch set 14 is a rebase onto the latest changes from the pgstatsmon#3 CR. There were some merge conflicts that I had to handle. The latest pgstatsmon#3 changes modified how the tests run, and we also changed the way we initialize some data structures in the pgstatsmon-proper code."},{"timestamp":1524856369,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 15."},{"timestamp":1524856376,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 15: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1524856426,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 15:\n\nPatch set 15 changes the DTrace probes. I found it\u0027s actually easier to use the built-in artedi DTrace probes rather than having pgstatsmon define its own for metric operations. This patch also fixes a Makefile issue from the rebase."},{"timestamp":1525450616,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 15: Code-Review+1\n\n(17 comments)"},{"timestamp":1525460484,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 15:\n\n(3 comments)\n\nThanks for taking a look!"},{"timestamp":1525723814,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 16."},{"timestamp":1525723822,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 16: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1525724051,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 16:\n\n(14 comments)\n\nThanks! I left some comments on the previous patch set too."},{"timestamp":1525782190,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 16:\n\n(1 comment)"},{"timestamp":1525794561,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 17."},{"timestamp":1525794569,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 17: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1525794595,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 16:\n\n(1 comment)"},{"timestamp":1525816493,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 17: Code-Review+1 Integration-Approval+1"},{"timestamp":1525891654,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 18."},{"timestamp":1525891662,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 18: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1525891732,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 18:\n\nRichard Bradley pointed out that one of the changes I made to handle bogus data coming from node-postgres actually opened up an earlier bug. This fixes that bug, which caused pgstatsmon to blow an assertion when a query returns rows with \u0027null\u0027 values."},{"timestamp":1525971607,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 19."},{"timestamp":1525971614,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 19: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1525979850,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 19: Code-Review+1 Integration-Approval+1"},{"timestamp":1525980422,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 20: Patch Set 19 was rebased."},{"timestamp":1525980441,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 21: Commit message was updated."},{"timestamp":1525980479,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Kody A Kantor"}],"currentPatchSet":{"number":"21","revision":"ed0f937f5f778ad8d26d028741fe3b05d5826982","parents":["9387748417710f740009d4b9ea16181c34bf9838"],"ref":"refs/changes/52/3352/21","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1525980441,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1525971614,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525979850,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1525979850,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"SUBM","value":"1","grantedOn":1525980479,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":169,"deletions":-13},{"file":"README.md","type":"MODIFIED","insertions":104,"deletions":-15},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"boot/everyboot.sh","type":"ADDED","insertions":18,"deletions":0},{"file":"boot/firstboot.sh","type":"ADDED","insertions":82,"deletions":0},{"file":"deps/manta-scripts","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/overview.md","type":"ADDED","insertions":132,"deletions":0},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":25,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":28,"deletions":0},{"file":"lib/dbinit.js","type":"ADDED","insertions":254,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":68,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":239,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":843,"deletions":-177},{"file":"lib/queries.js","type":"MODIFIED","insertions":48,"deletions":-31},{"file":"package.json","type":"MODIFIED","insertions":10,"deletions":-8},{"file":"sapi_manifests/pgstatsmon/manifest.json","type":"ADDED","insertions":4,"deletions":0},{"file":"sapi_manifests/pgstatsmon/template","type":"ADDED","insertions":28,"deletions":0},{"file":"smf/manifests/pgstatsmon.xml","type":"ADDED","insertions":53,"deletions":0},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":29,"deletions":-3},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":13,"deletions":-4},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":21,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":105,"deletions":0},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"ADDED","insertions":159,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.targ","fileOld":"Makefile.targ","type":"RENAMED","insertions":1,"deletions":-1}],"sizeInsertions":2592,"sizeDeletions":-279},"patchSets":[{"number":"1","revision":"02610df644f66fd5954f6ee18fd20b931fc350b8","parents":["b439908c344d5da6cbc9b980c62e94014596f5fe"],"ref":"refs/changes/52/3352/1","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1518464724,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1518464729,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":74,"deletions":-5},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":22,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":25,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":71,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":243,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":474,"deletions":-91},{"file":"lib/queries.js","type":"MODIFIED","insertions":12,"deletions":-11},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":9,"deletions":-4},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":17,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":7,"deletions":-1}],"sizeInsertions":979,"sizeDeletions":-142},{"number":"2","revision":"4cde5c6355add3a9bce9a52f2acf951327b52abe","parents":["b439908c344d5da6cbc9b980c62e94014596f5fe"],"ref":"refs/changes/52/3352/2","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1518465820,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1518465824,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":74,"deletions":-5},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":22,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":25,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":71,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":243,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":466,"deletions":-85},{"file":"lib/queries.js","type":"MODIFIED","insertions":12,"deletions":-11},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":17,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":964,"sizeDeletions":-134},{"number":"3","revision":"93db4af2a132be251361398a18bfbdaef0417562","parents":["b439908c344d5da6cbc9b980c62e94014596f5fe"],"ref":"refs/changes/52/3352/3","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1522780456,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1522780460,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":74,"deletions":-5},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":22,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":25,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":71,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":245,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":553,"deletions":-101},{"file":"lib/queries.js","type":"MODIFIED","insertions":12,"deletions":-11},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":17,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":1054,"sizeDeletions":-150},{"number":"4","revision":"a83762eb40f7423fb696ee1e4f4d38fe11fa9735","parents":["b439908c344d5da6cbc9b980c62e94014596f5fe"],"ref":"refs/changes/52/3352/4","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1522785521,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1522785524,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":72,"deletions":-5},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":21,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":24,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":71,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":237,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":553,"deletions":-103},{"file":"lib/queries.js","type":"MODIFIED","insertions":12,"deletions":-11},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":17,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":1042,"sizeDeletions":-152},{"number":"5","revision":"8ef0d41df1d9957c5e2fcba270485647f5c26b9e","parents":["b439908c344d5da6cbc9b980c62e94014596f5fe"],"ref":"refs/changes/52/3352/5","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1522785563,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1522785567,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":72,"deletions":-5},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"docs/overview.md","type":"ADDED","insertions":85,"deletions":0},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":21,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":24,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":71,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":237,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":553,"deletions":-103},{"file":"lib/queries.js","type":"MODIFIED","insertions":12,"deletions":-11},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":17,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":1127,"sizeDeletions":-152},{"number":"6","revision":"84572c2b8aa4134d194556137ab1cb6b7beeccc2","parents":["b439908c344d5da6cbc9b980c62e94014596f5fe"],"ref":"refs/changes/52/3352/6","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1522970710,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1522970713,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/queries.js","line":195,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":72,"deletions":-5},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"docs/overview.md","type":"ADDED","insertions":85,"deletions":0},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":21,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":24,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":71,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":237,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":554,"deletions":-103},{"file":"lib/queries.js","type":"MODIFIED","insertions":50,"deletions":-30},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":17,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":1166,"sizeDeletions":-171},{"number":"7","revision":"41239e90a80bd64bc7f5c61f1b74ae6c1bcec4a7","parents":["b439908c344d5da6cbc9b980c62e94014596f5fe"],"ref":"refs/changes/52/3352/7","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1522970737,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1522970741,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":72,"deletions":-5},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"docs/overview.md","type":"ADDED","insertions":85,"deletions":0},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":21,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":24,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":71,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":237,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":554,"deletions":-103},{"file":"lib/queries.js","type":"MODIFIED","insertions":50,"deletions":-30},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":17,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":1166,"sizeDeletions":-171},{"number":"8","revision":"07bfe4ba5e55581a4bdc1a2664310f3a4320949d","parents":["b439908c344d5da6cbc9b980c62e94014596f5fe"],"ref":"refs/changes/52/3352/8","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1523054109,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1523054113,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":72,"deletions":-5},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"docs/overview.md","type":"ADDED","insertions":85,"deletions":0},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":21,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":24,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":74,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":235,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":659,"deletions":-116},{"file":"lib/queries.js","type":"MODIFIED","insertions":51,"deletions":-31},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":17,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":1273,"sizeDeletions":-185},{"number":"9","revision":"da4b08669dab3d1dcd5012f54f718873c837f7b9","parents":["b439908c344d5da6cbc9b980c62e94014596f5fe"],"ref":"refs/changes/52/3352/9","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1523477619,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1523477625,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":165,"deletions":-6},{"file":"README.md","type":"MODIFIED","insertions":72,"deletions":-5},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"boot/everyboot.sh","type":"ADDED","insertions":18,"deletions":0},{"file":"boot/firstboot.sh","type":"ADDED","insertions":82,"deletions":0},{"file":"deps/manta-scripts","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/overview.md","type":"ADDED","insertions":85,"deletions":0},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":21,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":24,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":74,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":235,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":659,"deletions":-116},{"file":"lib/queries.js","type":"MODIFIED","insertions":51,"deletions":-31},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"sapi_manifests/pgstatsmon/manifest.json","type":"ADDED","insertions":4,"deletions":0},{"file":"sapi_manifests/pgstatsmon/template","type":"ADDED","insertions":24,"deletions":0},{"file":"smf/manifests/pgstatsmon.xml","type":"ADDED","insertions":53,"deletions":0},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":17,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":105,"deletions":0},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"ADDED","insertions":159,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.targ","fileOld":"Makefile.targ","type":"RENAMED","insertions":0,"deletions":0}],"sizeInsertions":2028,"sizeDeletions":-191},{"number":"10","revision":"dfbfc817944624692bbaaffec3eeca1aad014afe","parents":["b439908c344d5da6cbc9b980c62e94014596f5fe"],"ref":"refs/changes/52/3352/10","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1524270249,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1524270255,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":165,"deletions":-6},{"file":"README.md","type":"MODIFIED","insertions":104,"deletions":-15},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"boot/everyboot.sh","type":"ADDED","insertions":18,"deletions":0},{"file":"boot/firstboot.sh","type":"ADDED","insertions":82,"deletions":0},{"file":"deps/manta-scripts","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/overview.md","type":"ADDED","insertions":132,"deletions":0},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":24,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":27,"deletions":0},{"file":"lib/dbinit.js","type":"ADDED","insertions":248,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":77,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":240,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":792,"deletions":-139},{"file":"lib/queries.js","type":"MODIFIED","insertions":51,"deletions":-31},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"sapi_manifests/pgstatsmon/manifest.json","type":"ADDED","insertions":4,"deletions":0},{"file":"sapi_manifests/pgstatsmon/template","type":"ADDED","insertions":28,"deletions":0},{"file":"smf/manifests/pgstatsmon.xml","type":"ADDED","insertions":53,"deletions":0},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":34,"deletions":-6},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":13,"deletions":-4},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":21,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":105,"deletions":0},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"ADDED","insertions":159,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.targ","fileOld":"Makefile.targ","type":"RENAMED","insertions":0,"deletions":0}],"sizeInsertions":2540,"sizeDeletions":-227},{"number":"11","revision":"8e76fcf11df6a370df10d282baccc11a2cd4be2b","parents":["b439908c344d5da6cbc9b980c62e94014596f5fe"],"ref":"refs/changes/52/3352/11","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1524510840,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1524510846,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":165,"deletions":-6},{"file":"README.md","type":"MODIFIED","insertions":104,"deletions":-15},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"boot/everyboot.sh","type":"ADDED","insertions":18,"deletions":0},{"file":"boot/firstboot.sh","type":"ADDED","insertions":82,"deletions":0},{"file":"deps/manta-scripts","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/overview.md","type":"ADDED","insertions":132,"deletions":0},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":25,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":28,"deletions":0},{"file":"lib/dbinit.js","type":"ADDED","insertions":248,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":77,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":240,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":818,"deletions":-138},{"file":"lib/queries.js","type":"MODIFIED","insertions":51,"deletions":-31},{"file":"package.json","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"sapi_manifests/pgstatsmon/manifest.json","type":"ADDED","insertions":4,"deletions":0},{"file":"sapi_manifests/pgstatsmon/template","type":"ADDED","insertions":28,"deletions":0},{"file":"smf/manifests/pgstatsmon.xml","type":"ADDED","insertions":53,"deletions":0},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":34,"deletions":-6},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":13,"deletions":-4},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":21,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":105,"deletions":0},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"ADDED","insertions":159,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.targ","fileOld":"Makefile.targ","type":"RENAMED","insertions":0,"deletions":0}],"sizeInsertions":2572,"sizeDeletions":-226},{"number":"12","revision":"c472e2ae7c0aec82087de91b4f41d81438cda4d0","parents":["b439908c344d5da6cbc9b980c62e94014596f5fe"],"ref":"refs/changes/52/3352/12","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1524512557,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1524512562,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":165,"deletions":-6},{"file":"README.md","type":"MODIFIED","insertions":104,"deletions":-15},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"boot/everyboot.sh","type":"ADDED","insertions":18,"deletions":0},{"file":"boot/firstboot.sh","type":"ADDED","insertions":82,"deletions":0},{"file":"deps/manta-scripts","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/overview.md","type":"ADDED","insertions":132,"deletions":0},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":25,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":28,"deletions":0},{"file":"lib/dbinit.js","type":"ADDED","insertions":248,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":77,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":240,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":823,"deletions":-138},{"file":"lib/queries.js","type":"MODIFIED","insertions":51,"deletions":-31},{"file":"package.json","type":"MODIFIED","insertions":9,"deletions":-8},{"file":"sapi_manifests/pgstatsmon/manifest.json","type":"ADDED","insertions":4,"deletions":0},{"file":"sapi_manifests/pgstatsmon/template","type":"ADDED","insertions":28,"deletions":0},{"file":"smf/manifests/pgstatsmon.xml","type":"ADDED","insertions":53,"deletions":0},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":34,"deletions":-6},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":13,"deletions":-4},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":21,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":105,"deletions":0},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"ADDED","insertions":159,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.targ","fileOld":"Makefile.targ","type":"RENAMED","insertions":0,"deletions":0}],"sizeInsertions":2579,"sizeDeletions":-231},{"number":"13","revision":"06955cf814ebb4d2c844c3ebe4f8c0e763b032a4","parents":["b439908c344d5da6cbc9b980c62e94014596f5fe"],"ref":"refs/changes/52/3352/13","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1524581463,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1524581468,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitmodules","type":"ADDED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":165,"deletions":-6},{"file":"README.md","type":"MODIFIED","insertions":104,"deletions":-15},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"boot/everyboot.sh","type":"ADDED","insertions":18,"deletions":0},{"file":"boot/firstboot.sh","type":"ADDED","insertions":82,"deletions":0},{"file":"deps/manta-scripts","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/overview.md","type":"ADDED","insertions":132,"deletions":0},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":25,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":28,"deletions":0},{"file":"lib/dbinit.js","type":"ADDED","insertions":248,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":77,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":239,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":831,"deletions":-154},{"file":"lib/queries.js","type":"MODIFIED","insertions":51,"deletions":-31},{"file":"package.json","type":"MODIFIED","insertions":9,"deletions":-8},{"file":"sapi_manifests/pgstatsmon/manifest.json","type":"ADDED","insertions":4,"deletions":0},{"file":"sapi_manifests/pgstatsmon/template","type":"ADDED","insertions":28,"deletions":0},{"file":"smf/manifests/pgstatsmon.xml","type":"ADDED","insertions":53,"deletions":0},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":34,"deletions":-6},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":13,"deletions":-4},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":21,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":105,"deletions":0},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"ADDED","insertions":159,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.targ","fileOld":"Makefile.targ","type":"RENAMED","insertions":0,"deletions":0}],"sizeInsertions":2586,"sizeDeletions":-247},{"number":"14","revision":"07d0f38f6f34eef002e61771432ecdc2e4b41606","parents":["bd507bb8fea1850e598f798f4a511b8508a3d0bb"],"ref":"refs/changes/52/3352/14","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1524854078,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1524854085,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":169,"deletions":-13},{"file":"README.md","type":"MODIFIED","insertions":104,"deletions":-15},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"boot/everyboot.sh","type":"ADDED","insertions":18,"deletions":0},{"file":"boot/firstboot.sh","type":"ADDED","insertions":82,"deletions":0},{"file":"deps/manta-scripts","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/overview.md","type":"ADDED","insertions":132,"deletions":0},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":25,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":28,"deletions":0},{"file":"lib/dbinit.js","type":"ADDED","insertions":248,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":77,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":239,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":837,"deletions":-162},{"file":"lib/queries.js","type":"MODIFIED","insertions":51,"deletions":-31},{"file":"package.json","type":"MODIFIED","insertions":9,"deletions":-8},{"file":"sapi_manifests/pgstatsmon/manifest.json","type":"ADDED","insertions":4,"deletions":0},{"file":"sapi_manifests/pgstatsmon/template","type":"ADDED","insertions":28,"deletions":0},{"file":"smf/manifests/pgstatsmon.xml","type":"ADDED","insertions":53,"deletions":0},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":29,"deletions":-3},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":13,"deletions":-4},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":21,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":105,"deletions":0},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"ADDED","insertions":159,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.targ","fileOld":"Makefile.targ","type":"RENAMED","insertions":0,"deletions":0}],"sizeInsertions":2590,"sizeDeletions":-263},{"number":"15","revision":"67454aa9dfab734977bf7f57c2c1236abb4e0a49","parents":["bd507bb8fea1850e598f798f4a511b8508a3d0bb"],"ref":"refs/changes/52/3352/15","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1524856369,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1524856376,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525450616,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}}],"comments":[{"file":"README.md","line":84,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Why not use changefeed?"},{"file":"docs/overview.md","line":17,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Changefeed was written to alleviate the need for polling VMAPI. My preference would be to use changefeed here rather than polling."},{"file":"docs/overview.md","line":17,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Sure thing. I filed a GitHub issue for this effort: https://github.com/joyent/pgstatsmon/issues/9 .\n\nI think this might involve a small change to the way pgstatsmon uses cueball too."},{"file":"docs/overview.md","line":52,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"It\u0027s a touch scary that we run the risk of unknowingly overloading postgres with this. Perhaps we need some smarts to back off when responses get beyond some threshold?"},{"file":"docs/overview.md","line":52,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"pgstatsmon should prevent piling up of queries. This is done on a query-by-query basis. So if the previous query to pg_stat_activity (for example) is still running on the next \u0027tick\u0027, the pg_stat_activity query won\u0027t run again until the next tick (or whenever the original query either times out or returns). So it\u0027s effectively backing off infinitely by one more \u0027tick\u0027 until the query times out or returns.  Is that sufficient for this?\n\nIf not, I can file a GitHub issue for this to take a different approach."},{"file":"docs/overview.md","line":92,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"if?"},{"file":"docs/overview.md","line":92,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"},{"file":"lib/dbinit.js","line":206,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"It seems like args.log is required as well, should that be added?"},{"file":"lib/dbinit.js","line":206,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"},{"file":"lib/dbinit.js","line":216,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Should we check that the log property is actually set? It looks like we could blow up when we try to use log later on. Also, it seems like dot notation might be better here and elsewhere."},{"file":"lib/dbinit.js","line":216,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"},{"file":"lib/pgstatsmon.js","line":62,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Perhaps we should assert that config is an object?"},{"file":"lib/pgstatsmon.js","line":62,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"},{"file":"lib/pgstatsmon.js","line":127,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"The mix of `foo.bar` and `foo[\u0027bar\u0027]` here and elsewhere is confusing to me. I think I get why you\u0027re using latter when asserting, but I don\u0027t get it elsewhere and it does make it hard for the linter to do its job. My preference would be to use `foo.bar` instead of `foo[\u0027bar\u0027]` unless there is a good reason (e.g. dynamic property usage, assert checking, etc.). It\u0027s quite possible I\u0027m missing a good reason for your usage here, so let me know."},{"file":"lib/pgstatsmon.js","line":127,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"I switched everything to dot notation where it wasn\u0027t required (things like mon.pm_pgs[pi] are still bracket).\n\nShould I keep the assertion stuff using brackets?"},{"file":"lib/pgstatsmon.js","line":428,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Did you consider using the backoff module?"},{"file":"lib/pgstatsmon.js","line":428,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"I hadn\u0027t! I\u0027ll look into this."},{"file":"lib/pgstatsmon.js","line":428,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done. Let me know how this looks."},{"file":"lib/pgstatsmon.js","line":789,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"perhaps pi, qi, and cb should be validated with mod_assertplus?"},{"file":"lib/pgstatsmon.js","line":922,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"perhaps pi, qi, and datum should be validated with mod_assertplus?"},{"file":"lib/pgstatsmon.js","line":922,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"},{"file":"lib/pgstatsmon.js","line":1061,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"perhaps pi, qi, row, and field should be validated with mod_assertplus?"},{"file":"lib/pgstatsmon.js","line":1061,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"},{"file":"lib/queries.js","line":205,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"I\u0027m somewhat concerned about the impact of this query being run every tick (or at any regular interval at all). The sub query select, left join, and order by are going to have some noticeable overhead. Have we profiled this to see how quickly it runs? Is there any way we can pair this down a bit to avoid the left join?"},{"file":"lib/queries.js","line":205,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Good point. I think this could use some optimization.\nI did write a tool for doing basic profiling of pgstatsmon. It uses the dtrace probes built into node-artedi and pgstatsmon to get an idea of the health of pgstatsmon.\n\nThe worst latency I saw with the existing query was about 105ms and the average latency was probably around 90ms. After a tweak to remove the LEFT JOIN, the worst latency I saw was 97ms, with an average around 80ms. This might be different on bigger databases.\n\nIf we wanted to make this even faster we could see about avoiding the interior SELECT on pg_settings, which will return the same value for \u0027setting\u0027 each time. I think this would require us to wrap this in a PL/pgsql function so we could hold onto that value and reference it later without another SELECT."},{"file":"tools/mk/Makefile.node_modules.defs","line":8,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Can you believe it is 2018 already?"},{"file":"tools/mk/Makefile.node_modules.defs","line":8,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"},{"file":"tools/mk/Makefile.node_modules.targ","line":8,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Can you believe it is 2018 already?"},{"file":"tools/mk/Makefile.node_modules.targ","line":8,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"},{"file":"tools/mk/Makefile.node_prebuilt.defs","line":8,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Can you believe it is 2018 already?"},{"file":"tools/mk/Makefile.node_prebuilt.defs","line":8,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"},{"file":"tools/mk/Makefile.node_prebuilt.targ","line":9,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Can you believe it is 2018 already?"},{"file":"tools/mk/Makefile.node_prebuilt.targ","line":9,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":169,"deletions":-13},{"file":"README.md","type":"MODIFIED","insertions":104,"deletions":-15},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"boot/everyboot.sh","type":"ADDED","insertions":18,"deletions":0},{"file":"boot/firstboot.sh","type":"ADDED","insertions":82,"deletions":0},{"file":"deps/manta-scripts","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/overview.md","type":"ADDED","insertions":132,"deletions":0},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":25,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":28,"deletions":0},{"file":"lib/dbinit.js","type":"ADDED","insertions":248,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":68,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":239,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":799,"deletions":-163},{"file":"lib/queries.js","type":"MODIFIED","insertions":51,"deletions":-31},{"file":"package.json","type":"MODIFIED","insertions":9,"deletions":-8},{"file":"sapi_manifests/pgstatsmon/manifest.json","type":"ADDED","insertions":4,"deletions":0},{"file":"sapi_manifests/pgstatsmon/template","type":"ADDED","insertions":28,"deletions":0},{"file":"smf/manifests/pgstatsmon.xml","type":"ADDED","insertions":53,"deletions":0},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":29,"deletions":-3},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":13,"deletions":-4},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":21,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":105,"deletions":0},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"ADDED","insertions":159,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.targ","fileOld":"Makefile.targ","type":"RENAMED","insertions":0,"deletions":0}],"sizeInsertions":2543,"sizeDeletions":-264},{"number":"16","revision":"9b4145298816d43c66fb7d42159b84dfc44512c1","parents":["bd507bb8fea1850e598f798f4a511b8508a3d0bb"],"ref":"refs/changes/52/3352/16","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1525723814,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1525723822,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/dbinit.js","line":151,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"The function names here and on L164 appear to be the wrong way around."},{"file":"lib/dbinit.js","line":151,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Good catch! This should be fixed in the latest patch."},{"file":"package.json","line":21,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"I\u0027ll modify this once the vmapi-resolver is checked in"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":169,"deletions":-13},{"file":"README.md","type":"MODIFIED","insertions":104,"deletions":-15},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"boot/everyboot.sh","type":"ADDED","insertions":18,"deletions":0},{"file":"boot/firstboot.sh","type":"ADDED","insertions":82,"deletions":0},{"file":"deps/manta-scripts","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/overview.md","type":"ADDED","insertions":132,"deletions":0},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":25,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":28,"deletions":0},{"file":"lib/dbinit.js","type":"ADDED","insertions":250,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":68,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":239,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":843,"deletions":-177},{"file":"lib/queries.js","type":"MODIFIED","insertions":48,"deletions":-31},{"file":"package.json","type":"MODIFIED","insertions":10,"deletions":-8},{"file":"sapi_manifests/pgstatsmon/manifest.json","type":"ADDED","insertions":4,"deletions":0},{"file":"sapi_manifests/pgstatsmon/template","type":"ADDED","insertions":28,"deletions":0},{"file":"smf/manifests/pgstatsmon.xml","type":"ADDED","insertions":53,"deletions":0},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":29,"deletions":-3},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":13,"deletions":-4},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":21,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":105,"deletions":0},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"ADDED","insertions":159,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.targ","fileOld":"Makefile.targ","type":"RENAMED","insertions":1,"deletions":-1}],"sizeInsertions":2588,"sizeDeletions":-279},{"number":"17","revision":"9fe489baacf7839778abb5bcc2bcdcddd0d03aa1","parents":["bd507bb8fea1850e598f798f4a511b8508a3d0bb"],"ref":"refs/changes/52/3352/17","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1525794561,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1525794569,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525816493,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1525816493,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":169,"deletions":-13},{"file":"README.md","type":"MODIFIED","insertions":104,"deletions":-15},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"boot/everyboot.sh","type":"ADDED","insertions":18,"deletions":0},{"file":"boot/firstboot.sh","type":"ADDED","insertions":82,"deletions":0},{"file":"deps/manta-scripts","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/overview.md","type":"ADDED","insertions":132,"deletions":0},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":25,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":28,"deletions":0},{"file":"lib/dbinit.js","type":"ADDED","insertions":254,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":68,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":239,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":843,"deletions":-177},{"file":"lib/queries.js","type":"MODIFIED","insertions":48,"deletions":-31},{"file":"package.json","type":"MODIFIED","insertions":10,"deletions":-8},{"file":"sapi_manifests/pgstatsmon/manifest.json","type":"ADDED","insertions":4,"deletions":0},{"file":"sapi_manifests/pgstatsmon/template","type":"ADDED","insertions":28,"deletions":0},{"file":"smf/manifests/pgstatsmon.xml","type":"ADDED","insertions":53,"deletions":0},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":29,"deletions":-3},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":13,"deletions":-4},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":21,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":105,"deletions":0},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"ADDED","insertions":159,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.targ","fileOld":"Makefile.targ","type":"RENAMED","insertions":1,"deletions":-1}],"sizeInsertions":2592,"sizeDeletions":-279},{"number":"18","revision":"a4bb18bd70e5fc01af612807bd37248d5ad9878c","parents":["bd507bb8fea1850e598f798f4a511b8508a3d0bb"],"ref":"refs/changes/52/3352/18","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1525891654,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1525891662,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":169,"deletions":-13},{"file":"README.md","type":"MODIFIED","insertions":104,"deletions":-15},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"boot/everyboot.sh","type":"ADDED","insertions":18,"deletions":0},{"file":"boot/firstboot.sh","type":"ADDED","insertions":82,"deletions":0},{"file":"deps/manta-scripts","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/overview.md","type":"ADDED","insertions":132,"deletions":0},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":25,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":28,"deletions":0},{"file":"lib/dbinit.js","type":"ADDED","insertions":254,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":68,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":239,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":843,"deletions":-177},{"file":"lib/queries.js","type":"MODIFIED","insertions":48,"deletions":-31},{"file":"package.json","type":"MODIFIED","insertions":10,"deletions":-8},{"file":"sapi_manifests/pgstatsmon/manifest.json","type":"ADDED","insertions":4,"deletions":0},{"file":"sapi_manifests/pgstatsmon/template","type":"ADDED","insertions":28,"deletions":0},{"file":"smf/manifests/pgstatsmon.xml","type":"ADDED","insertions":53,"deletions":0},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":29,"deletions":-3},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":13,"deletions":-4},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":21,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":105,"deletions":0},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"ADDED","insertions":159,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.targ","fileOld":"Makefile.targ","type":"RENAMED","insertions":1,"deletions":-1}],"sizeInsertions":2592,"sizeDeletions":-279},{"number":"19","revision":"0d8029228d5d1c34c86e0321a4607bed4cb03240","parents":["bd507bb8fea1850e598f798f4a511b8508a3d0bb"],"ref":"refs/changes/52/3352/19","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1525971607,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1525971614,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525979850,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1525979850,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":169,"deletions":-13},{"file":"README.md","type":"MODIFIED","insertions":104,"deletions":-15},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"boot/everyboot.sh","type":"ADDED","insertions":18,"deletions":0},{"file":"boot/firstboot.sh","type":"ADDED","insertions":82,"deletions":0},{"file":"deps/manta-scripts","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/overview.md","type":"ADDED","insertions":132,"deletions":0},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":25,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":28,"deletions":0},{"file":"lib/dbinit.js","type":"ADDED","insertions":254,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":68,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":239,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":843,"deletions":-177},{"file":"lib/queries.js","type":"MODIFIED","insertions":48,"deletions":-31},{"file":"package.json","type":"MODIFIED","insertions":10,"deletions":-8},{"file":"sapi_manifests/pgstatsmon/manifest.json","type":"ADDED","insertions":4,"deletions":0},{"file":"sapi_manifests/pgstatsmon/template","type":"ADDED","insertions":28,"deletions":0},{"file":"smf/manifests/pgstatsmon.xml","type":"ADDED","insertions":53,"deletions":0},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":29,"deletions":-3},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":13,"deletions":-4},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":21,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":105,"deletions":0},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"ADDED","insertions":159,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.targ","fileOld":"Makefile.targ","type":"RENAMED","insertions":1,"deletions":-1}],"sizeInsertions":2592,"sizeDeletions":-279},{"number":"20","revision":"69c1dfc04920c27f2a971924d9b222cbf957347d","parents":["9387748417710f740009d4b9ea16181c34bf9838"],"ref":"refs/changes/52/3352/20","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1525980422,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"NO_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1525971614,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525979850,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1525979850,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":169,"deletions":-13},{"file":"README.md","type":"MODIFIED","insertions":104,"deletions":-15},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"boot/everyboot.sh","type":"ADDED","insertions":18,"deletions":0},{"file":"boot/firstboot.sh","type":"ADDED","insertions":82,"deletions":0},{"file":"deps/manta-scripts","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/overview.md","type":"ADDED","insertions":132,"deletions":0},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":25,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":28,"deletions":0},{"file":"lib/dbinit.js","type":"ADDED","insertions":254,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":68,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":239,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":843,"deletions":-177},{"file":"lib/queries.js","type":"MODIFIED","insertions":48,"deletions":-31},{"file":"package.json","type":"MODIFIED","insertions":10,"deletions":-8},{"file":"sapi_manifests/pgstatsmon/manifest.json","type":"ADDED","insertions":4,"deletions":0},{"file":"sapi_manifests/pgstatsmon/template","type":"ADDED","insertions":28,"deletions":0},{"file":"smf/manifests/pgstatsmon.xml","type":"ADDED","insertions":53,"deletions":0},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":29,"deletions":-3},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":13,"deletions":-4},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":21,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":105,"deletions":0},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"ADDED","insertions":159,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.targ","fileOld":"Makefile.targ","type":"RENAMED","insertions":1,"deletions":-1}],"sizeInsertions":2592,"sizeDeletions":-279},{"number":"21","revision":"ed0f937f5f778ad8d26d028741fe3b05d5826982","parents":["9387748417710f740009d4b9ea16181c34bf9838"],"ref":"refs/changes/52/3352/21","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1525980441,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1525971614,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525979850,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1525979850,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"SUBM","value":"1","grantedOn":1525980479,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":169,"deletions":-13},{"file":"README.md","type":"MODIFIED","insertions":104,"deletions":-15},{"file":"bin/pgstatsmon.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"boot/everyboot.sh","type":"ADDED","insertions":18,"deletions":0},{"file":"boot/firstboot.sh","type":"ADDED","insertions":82,"deletions":0},{"file":"deps/manta-scripts","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/overview.md","type":"ADDED","insertions":132,"deletions":0},{"file":"etc/config.json","type":"DELETED","insertions":0,"deletions":-12},{"file":"etc/static.json","type":"ADDED","insertions":25,"deletions":0},{"file":"etc/vmapi.json","type":"ADDED","insertions":28,"deletions":0},{"file":"lib/dbinit.js","type":"ADDED","insertions":254,"deletions":0},{"file":"lib/dtrace.js","type":"ADDED","insertions":68,"deletions":0},{"file":"lib/pgclient.js","type":"ADDED","insertions":239,"deletions":0},{"file":"lib/pgstatsmon.js","type":"MODIFIED","insertions":843,"deletions":-177},{"file":"lib/queries.js","type":"MODIFIED","insertions":48,"deletions":-31},{"file":"package.json","type":"MODIFIED","insertions":10,"deletions":-8},{"file":"sapi_manifests/pgstatsmon/manifest.json","type":"ADDED","insertions":4,"deletions":0},{"file":"sapi_manifests/pgstatsmon/template","type":"ADDED","insertions":28,"deletions":0},{"file":"smf/manifests/pgstatsmon.xml","type":"ADDED","insertions":53,"deletions":0},{"file":"test/badquery.tst.js","type":"MODIFIED","insertions":29,"deletions":-3},{"file":"test/basic.tst.js","type":"MODIFIED","insertions":13,"deletions":-4},{"file":"test/etc/testconfig.json","type":"MODIFIED","insertions":21,"deletions":-7},{"file":"test/helper.js","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"tools/mk/Makefile.defs","type":"ADDED","insertions":105,"deletions":0},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"ADDED","insertions":159,"deletions":0},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"ADDED","insertions":42,"deletions":0},{"file":"tools/mk/Makefile.targ","fileOld":"Makefile.targ","type":"RENAMED","insertions":1,"deletions":-1}],"sizeInsertions":2592,"sizeDeletions":-279}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}]}