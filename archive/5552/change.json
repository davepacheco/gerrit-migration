{"project":"joyent/sdc-cloudapi","branch":"master","id":"I86ab999fd03f539e0f51fc76a544df6ced40620f","number":"5552","subject":"TRITON-965 Support flexible disk information for Machines/Packages Reviewed by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e Reviewed by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e Approved by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e","owner":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"url":"https://cr.joyent.us/5552","commitMessage":"TRITON-965 Support flexible disk information for Machines/Packages\nReviewed by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e\nReviewed by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e\nApproved by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e\n","createdOn":1549628125,"lastUpdated":1550251709,"open":false,"status":"MERGED","comments":[{"timestamp":1549628125,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Uploaded patch set 1."},{"timestamp":1549628126,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 1fba561768c209c2dbc5db4a59a81e2dc3b5cd2f\n    \n    cleaning up\n    \n    commit 5cecb76310f55cc5ad9c7cf37fe4bf00c4e5639f\n    \n    update test\n    \n    commit 8082436038605e3b32cec54e07cf7d15292f8313\n    \n    sort of working"},{"timestamp":1549628245,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Uploaded patch set 2."},{"timestamp":1549628246,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit e684bc8e361f7efb19c3a90964a2a98e5067033e\n    \n    fix typo"},{"timestamp":1549628284,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1549628372,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 2:\n\nStill finishing up the updates to the docs, but I wanted to get eyes on the code sooner rather than later. There are a few older tests that are failing, but I believe that is expected behavior. I\u0027m still double checking though."},{"timestamp":1549640218,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2: Code-Review+1\n\n(1 comment)\n\nCode looks good overall. Which tests are failing? Afaik here is a list of what it\u0027s expected to raise failures as of today: https://jenkins.joyent.us/view/nightly/job/nightly1-080-test-cloudapi/2154/console You can also check with Marsell about this."},{"timestamp":1549728072,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 2:\n\n(8 comments)"},{"timestamp":1550038834,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Uploaded patch set 3."},{"timestamp":1550038835,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 330b76394fc4835ea9f020de830561f17c70b6a4\n    \n    respond to cr"},{"timestamp":1550039003,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Uploaded patch set 4."},{"timestamp":1550039004,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit aaf71230ed1ec2561f400b32ed0dc5f8f6bf71b4\n    \n    fix snapshot test"},{"timestamp":1550039015,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 4:\n\n(9 comments)"},{"timestamp":1550066763,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 4:\n\n(4 comments)"},{"timestamp":1550079964,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Uploaded patch set 5."},{"timestamp":1550079965,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit c462c77c4020cc0ad6b97c4223d027c3c0fe7f11\n    \n    respond to cr"},{"timestamp":1550080043,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1550080058,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 5:\n\n(4 comments)"},{"timestamp":1550093700,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1550093936,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1550095458,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1550245835,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1\n\nLGTM. Thanks for adding the tests, though."},{"timestamp":1550251687,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1550251709,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Dylan Yep"}],"currentPatchSet":{"number":"6","revision":"86ab999fd03f539e0f51fc76a544df6ced40620f","parents":["8a7c59f3ae196a53d4957914d22bc97be7c39588"],"ref":"refs/changes/52/5552/6","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1550251687,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550080043,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550095458,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550245835,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1550245835,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"SUBM","value":"1","grantedOn":1550251709,"by":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":47,"deletions":-1},{"file":"lib/datasets.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/machines.js","type":"MODIFIED","insertions":123,"deletions":-5},{"file":"lib/snapshots.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/machines.70.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/machines.94.test.js","type":"ADDED","insertions":1009,"deletions":0},{"file":"test/machines/common.js","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"test/machines/snapshots.js","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":1197,"sizeDeletions":-12},"patchSets":[{"number":"1","revision":"ad503e5a4ea80757779946c0913e2a9c8f5c8dee","parents":["8a7c59f3ae196a53d4957914d22bc97be7c39588"],"ref":"refs/changes/52/5552/1","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1549628125,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/machines.js","type":"MODIFIED","insertions":93,"deletions":-6},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/common.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/machines.70.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/machines.94.test.js","type":"ADDED","insertions":682,"deletions":0},{"file":"test/machines/common.js","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"test/machines/snapshots.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":791,"sizeDeletions":-12},{"number":"2","revision":"f679433665708e1970c060a58b2bd6648d369723","parents":["8a7c59f3ae196a53d4957914d22bc97be7c39588"],"ref":"refs/changes/52/5552/2","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1549628245,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1549628284,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549640218,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"comments":[{"file":"lib/machines.js","line":159,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Will `machine.free_space` exist always?"},{"file":"lib/machines.js","line":159,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Good catch. Fixed."},{"file":"lib/machines.js","line":462,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"It wasn\u0027t my intent to say that only the last disk could use `remaining`, just that there could be at most one disk that uses `remaining`.  Rather than forcing it to be the last disk, you could just keep track of which disk has `remaining` set."},{"file":"lib/machines.js","line":462,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Done"},{"file":"lib/machines.js","line":485,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Why \u003e\u003d rather than \u003e?"},{"file":"lib/machines.js","line":485,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"To make sure that there\u0027s still space to create a \u0027remaining\u0027 disk. That should just go after the remaining disk size is assigned though."},{"file":"lib/machines.js","line":492,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Verify \u003e 0\n\nIf the disk comes from an image, verify that remaining \u003e\u003d image size"},{"file":"lib/machines.js","line":492,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Done"},{"file":"lib/machines.js","line":498,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"maybe:\n\nif (pkg.flexible_disk) {\n    throw new InvalidArgumentError(\u0027The use of `flexible_disk` is not supported with \u0027 + brand);\n}"},{"file":"lib/machines.js","line":498,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Done"},{"file":"lib/machines.js","line":528,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Shouldn\u0027t this be set IFF pkg.flexible_disk?  Maybe move this up to the block that starts at 448."},{"file":"lib/machines.js","line":528,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Done"},{"file":"test/machines.94.test.js","line":99,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"The proper way to check this is to be sure that img.brand is not set or it is set to `bhyve`."},{"file":"test/machines.94.test.js","line":99,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Done"},{"file":"test/machines.94.test.js","line":302,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"t.ok(true, ...) seems to be the more common way to do this.  This can lead to less confusion as t.*() output appears during t.end(), but console.log() appears immediately.\n\nSame goes for other uses of console.log()"},{"file":"test/machines.94.test.js","line":302,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Done. This was just copied from other tests."},{"file":"test/machines.94.test.js","line":683,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"To test conditions I mentioned in my comments in lib/*.js, please add tests for:\n\n- Boot disk only with size \"remaining\"\n- \"remaining\" used on one disk that is not the last disk\n- sum(disks.*.size) \u003d\u003d\u003d pkg.quota"},{"file":"test/machines.94.test.js","line":683,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"I believe \u0027Boot disk only with size \"remaining\" is covered by the \"Package has remaining boot disk\", but please let me know if I\u0027m misinterpreting.\n\nTests have been added for the other two."},{"file":"test/machines.94.test.js","line":683,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"A test where all disks specify an explicit size and those sizes sum to the maximum size tests a different code path than calculating a value for \"remaining\" and using it.  Such a test would have caught the \u003e\u003d vs \u003e bug I mentioned in my feedback in the previous round."},{"file":"test/machines.94.test.js","line":683,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/machines.js","type":"MODIFIED","insertions":93,"deletions":-6},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/machines.70.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/machines.94.test.js","type":"ADDED","insertions":682,"deletions":0},{"file":"test/machines/common.js","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"test/machines/snapshots.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":790,"sizeDeletions":-11},{"number":"3","revision":"9682009bd66cbc74c1aca2d1cb6c38214d7f992d","parents":["8a7c59f3ae196a53d4957914d22bc97be7c39588"],"ref":"refs/changes/52/5552/3","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1550038834,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550093700,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":47,"deletions":-1},{"file":"lib/datasets.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/machines.js","type":"MODIFIED","insertions":122,"deletions":-5},{"file":"lib/snapshots.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/machines.70.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/machines.94.test.js","type":"ADDED","insertions":899,"deletions":0},{"file":"test/machines/common.js","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"test/machines/snapshots.js","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":1086,"sizeDeletions":-12},{"number":"4","revision":"df736f7657b596dc7ea992c1b74296db4a2187c8","parents":["8a7c59f3ae196a53d4957914d22bc97be7c39588"],"ref":"refs/changes/52/5552/4","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1550039003,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550093936,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"docs/index.md","line":4812,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Do we have any tests that allow for an image to be used for disks other than the boot disk?  I though that we decided to leave this feature for the future.  If it works and we have tests, I\u0027m happy for this to stay."},{"file":"docs/index.md","line":4812,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Resolved over chat. These are disk uuids not image uuids."},{"file":"docs/index.md","line":4836,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"9.4.0+"},{"file":"docs/index.md","line":4836,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Done"},{"file":"lib/machines.js","line":479,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"What if remainingIdx \u003d\u003d\u003d 0?"},{"file":"lib/machines.js","line":479,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":47,"deletions":-1},{"file":"lib/datasets.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/machines.js","type":"MODIFIED","insertions":122,"deletions":-5},{"file":"lib/snapshots.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/machines.70.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/machines.94.test.js","type":"ADDED","insertions":899,"deletions":0},{"file":"test/machines/common.js","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"test/machines/snapshots.js","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":1086,"sizeDeletions":-12},{"number":"5","revision":"0d7cc19ba3347e717c7c3aae19fee297649373c5","parents":["8a7c59f3ae196a53d4957914d22bc97be7c39588"],"ref":"refs/changes/52/5552/5","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1550079964,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550095458,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550245835,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1550245835,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550080043,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":47,"deletions":-1},{"file":"lib/datasets.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/machines.js","type":"MODIFIED","insertions":123,"deletions":-5},{"file":"lib/snapshots.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/machines.70.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/machines.94.test.js","type":"ADDED","insertions":1009,"deletions":0},{"file":"test/machines/common.js","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"test/machines/snapshots.js","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":1197,"sizeDeletions":-12},{"number":"6","revision":"86ab999fd03f539e0f51fc76a544df6ced40620f","parents":["8a7c59f3ae196a53d4957914d22bc97be7c39588"],"ref":"refs/changes/52/5552/6","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1550251687,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550095458,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550245835,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1550245835,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550080043,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"SUBM","value":"1","grantedOn":1550251709,"by":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":47,"deletions":-1},{"file":"lib/datasets.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/machines.js","type":"MODIFIED","insertions":123,"deletions":-5},{"file":"lib/snapshots.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/machines.70.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/machines.94.test.js","type":"ADDED","insertions":1009,"deletions":0},{"file":"test/machines/common.js","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"test/machines/snapshots.js","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":1197,"sizeDeletions":-12}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"}]}