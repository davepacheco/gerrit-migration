{"project":"joyent/sdc-docker","branch":"master","id":"I19f2a47043deb22b9c4a729812bc0da91362cb34","number":"2467","subject":"DOCKER-705 \"docker build\" containers are assigned public IP Reviewed by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e Approved by: Todd Whiteman \u003ctodd.whiteman@joyent.com\u003e","owner":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"url":"https://cr.joyent.us/2467","commitMessage":"DOCKER-705 \"docker build\" containers are assigned public IP\nReviewed by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e\nApproved by: Todd Whiteman \u003ctodd.whiteman@joyent.com\u003e\n","createdOn":1503703097,"lastUpdated":1506030086,"open":false,"status":"MERGED","comments":[{"timestamp":1503703097,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 1."},{"timestamp":1503703153,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1505147151,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2: Patch Set 1 was rebased"},{"timestamp":1505147164,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\nBump."},{"timestamp":1505147189,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2:\n\n\"make check\" passed ok"},{"timestamp":1505153073,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 2:\n\n(2 comments)"},{"timestamp":1505153510,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\n(2 comments)"},{"timestamp":1505154088,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 3."},{"timestamp":1505154131,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1505154180,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1505154519,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1506029853,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1506029873,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 4: Patch Set 3 was rebased"},{"timestamp":1506029909,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 5."},{"timestamp":1506029928,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4:\n\n\"make check\" passed ok"},{"timestamp":1506029945,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 6."},{"timestamp":1506029970,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1506029992,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 7: Commit message was updated."},{"timestamp":1506030036,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Todd Whiteman"},{"timestamp":1506030086,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6:\n\n\"make check\" passed ok"}],"currentPatchSet":{"number":"7","revision":"19f2a47043deb22b9c4a729812bc0da91362cb34","parents":["bdba952122b612d820611b584388951129d30c14"],"ref":"refs/changes/67/2467/7","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1506029992,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505154131,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505154519,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506029853,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}},{"type":"SUBM","value":"1","grantedOn":1506030036,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/backends/sdc/build.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":3,"deletions":-15}],"sizeInsertions":3,"sizeDeletions":-16},"patchSets":[{"number":"1","revision":"06ea566d1af0119c76451bcaac3eb406d6eeb01d","parents":["dd60b9382541cf47819979cdbcc8e9c12819746c"],"ref":"refs/changes/67/2467/1","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1503703097,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1503703153,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/build.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":5,"deletions":-14}],"sizeInsertions":5,"sizeDeletions":-15},{"number":"2","revision":"ba2d06ce96fd956b040ee88c1515565d33f99f8c","parents":["94fa554d7402b61ddfa643d4e76f5169797d049e"],"ref":"refs/changes/67/2467/2","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1505147151,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1503703153,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/backends/sdc/containers.js","line":601,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"This condition doesn\u0027t seem to match the comment above saying:\n\n\"An external network is added in these cases:\n *    1. fabrics are *not* enabled, or\n *    2. fabrics are enabled and the user wants to expose ports\"\n\nWhat am I missing?"},{"file":"lib/backends/sdc/containers.js","line":601,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Good catch, I accidentally left in a stray \u0027!\u0027, will fix."},{"file":"lib/backends/sdc/containers.js","line":710,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"This comment doesn\u0027t seem to be relevant to what the function \"defaultFabricNetwork\" does.\n\nIt seems the \"defaultFabricNetwork\" function only gets the default fabric network, and has nothing to do with network pools. Should that comment be moved elsewhere?"},{"file":"lib/backends/sdc/containers.js","line":710,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Right - that comment doesn\u0027t belong here - I will move it to the previous \u0027addNetworksToPayload\u0027 function."},{"file":"lib/backends/sdc/containers.js","line":710,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Actually- it\u0027s already covered by the \u0027addNetworksToPayload\u0027 function comments, so I dropped this comment altogether."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/build.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":5,"deletions":-14}],"sizeInsertions":5,"sizeDeletions":-15},{"number":"3","revision":"008999f3f8f30a4e80a7ad918816cd72ce3bcbf1","parents":["94fa554d7402b61ddfa643d4e76f5169797d049e"],"ref":"refs/changes/67/2467/3","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1505154088,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505154131,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505154519,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506029853,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/build.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":3,"deletions":-15}],"sizeInsertions":3,"sizeDeletions":-16},{"number":"4","revision":"d689ebabe18e1f6343e7c63be8122dea736093f5","parents":["bdba952122b612d820611b584388951129d30c14"],"ref":"refs/changes/67/2467/4","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1506029873,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505154131,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505154519,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506029853,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/build.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":3,"deletions":-15}],"sizeInsertions":3,"sizeDeletions":-16},{"number":"5","revision":"8823a0c7ce0123c423c043aa0161f2ec761555df","parents":["1ec428f81e40103db3e99feb1a30bc35d39655dd"],"ref":"refs/changes/67/2467/5","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1506029909,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506029970,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/backends/sdc/build.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":3,"deletions":-15}],"sizeInsertions":3,"sizeDeletions":-16},{"number":"6","revision":"ca344fad38f2d4a5e23792415b95958f6f039203","parents":["bdba952122b612d820611b584388951129d30c14"],"ref":"refs/changes/67/2467/6","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1506029945,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505154131,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505154519,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506029853,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/build.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":3,"deletions":-15}],"sizeInsertions":3,"sizeDeletions":-16},{"number":"7","revision":"19f2a47043deb22b9c4a729812bc0da91362cb34","parents":["bdba952122b612d820611b584388951129d30c14"],"ref":"refs/changes/67/2467/7","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1506029992,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505154131,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505154519,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506029853,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}},{"type":"SUBM","value":"1","grantedOn":1506030036,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/backends/sdc/build.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":3,"deletions":-15}],"sizeInsertions":3,"sizeDeletions":-16}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}]}