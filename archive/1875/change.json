{"project":"joyent/sdc-vmapi","branch":"master","topic":"CNS-147","id":"I551e3ce4f67dbbac8e25cbbee32d455ea24141f9","number":"1875","subject":"CNS-147 want unified tag parser for triton.cns.services Reviewed by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e Reviewed by: Trent Mick \u003ctrent.mick@joyent.com\u003e Approved by: Trent Mick \u003ctrent.mick@joyent.com\u003e","owner":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"url":"https://cr.joyent.us/1875","commitMessage":"CNS-147 want unified tag parser for triton.cns.services\nReviewed by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e\nReviewed by: Trent Mick \u003ctrent.mick@joyent.com\u003e\nApproved by: Trent Mick \u003ctrent.mick@joyent.com\u003e\n","createdOn":1493422226,"lastUpdated":1493680922,"open":false,"status":"MERGED","comments":[{"timestamp":1493422226,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 1."},{"timestamp":1493422253,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1493422273,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 1:\n\nbuilt as image e739cf96-2c63-11e7-8ade-673b6992914c"},{"timestamp":1493425764,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 2."},{"timestamp":1493425794,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 2:\n\npassed full test suite run on CoaL, plus some ad-hoc testing to verify the tags work"},{"timestamp":1493425798,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1493661091,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 2: Code-Review+1\n\n(2 comments)"},{"timestamp":1493665767,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 3."},{"timestamp":1493665780,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 3:\n\nbuild ps#3 as image 5437b476-2ea0-11e7-a64e-7380c3fc653d"},{"timestamp":1493665796,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 3:\n\nI\u0027ve also taken the old regex out of the documentation"},{"timestamp":1493665805,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1493666521,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1493673865,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1\n\nPer private chage, https://github.com/joyent/sdc-cloudapi/blob/master/test/machines/tags.js#L178 should be updated for this error message change."},{"timestamp":1493674025,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 4: Commit message was updated."},{"timestamp":1493680000,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Topic set to CNS-147"},{"timestamp":1493680922,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Alex Wilson"}],"currentPatchSet":{"number":"4","revision":"590a4e09c0c76093f66f4ff69d6b4fd66de09bb6","parents":["f820739ba8b3689c5f3d92ab65645b865fa67e9d"],"ref":"refs/changes/75/1875/4","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1493674025,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1493665805,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1493666521,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1493673865,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1493673865,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1493680922,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":5,"deletions":-9},{"file":"lib/common/validation.js","type":"MODIFIED","insertions":8,"deletions":-38},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"sapi_manifests/vmapi/template","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"test/vms.full.test.js","type":"MODIFIED","insertions":13,"deletions":-7}],"sizeInsertions":27,"sizeDeletions":-57},"patchSets":[{"number":"1","revision":"868a7722e9fd90343daa23892b2463e567135c7f","parents":["f820739ba8b3689c5f3d92ab65645b865fa67e9d"],"ref":"refs/changes/75/1875/1","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1493422226,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1493422253,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common/validation.js","type":"MODIFIED","insertions":6,"deletions":-28},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/vms.full.test.js","type":"MODIFIED","insertions":7,"deletions":-4}],"sizeInsertions":14,"sizeDeletions":-32},{"number":"2","revision":"9ebed612c6d2b4aaae5d54236d2266273dc93108","parents":["f820739ba8b3689c5f3d92ab65645b865fa67e9d"],"ref":"refs/changes/75/1875/2","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1493425764,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1493425798,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1493661091,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"comments":[{"file":"lib/common/validation.js","line":30,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"It might be a good opportunity to fix the alphabetization of modules declaration/require. \n\nIt should be:\n\nvar jsprim \u003d require(\u0027jsprim\u0027);\nvar libuuid \u003d require(\u0027libuuid\u0027);\nvar net \u003d require(\u0027net\u0027);\nvar tritonTags \u003d require(\u0027triton-tags\u0027);\n\nvar common \u003d require(\u0027./vm-common\u0027);\nvar errors \u003d require(\u0027../errors\u0027);\nvar markerUtils \u003d require(\u0027./marker\u0027);\nvar predicateUtils \u003d require(\u0027./predicate\u0027);\nvar sortValidation \u003d require(\u0027../validation/sort\u0027);"},{"file":"lib/common/validation.js","line":1918,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"nit: rename \"err\" to \"errMsg\". I was initially confused that \"err\" was an Error instance, but after checking the implementation of triton-tags.validateTritonTag I realized it was actually returning a string."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common/validation.js","type":"MODIFIED","insertions":6,"deletions":-28},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/vms.full.test.js","type":"MODIFIED","insertions":13,"deletions":-7}],"sizeInsertions":20,"sizeDeletions":-35},{"number":"3","revision":"551e3ce4f67dbbac8e25cbbee32d455ea24141f9","parents":["f820739ba8b3689c5f3d92ab65645b865fa67e9d"],"ref":"refs/changes/75/1875/3","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1493665767,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1493665805,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1493673865,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1493673865,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1493666521,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":5,"deletions":-9},{"file":"lib/common/validation.js","type":"MODIFIED","insertions":8,"deletions":-38},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"sapi_manifests/vmapi/template","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"test/vms.full.test.js","type":"MODIFIED","insertions":13,"deletions":-7}],"sizeInsertions":27,"sizeDeletions":-57},{"number":"4","revision":"590a4e09c0c76093f66f4ff69d6b4fd66de09bb6","parents":["f820739ba8b3689c5f3d92ab65645b865fa67e9d"],"ref":"refs/changes/75/1875/4","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1493674025,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1493680922,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1493665805,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1493673865,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1493673865,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1493666521,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":5,"deletions":-9},{"file":"lib/common/validation.js","type":"MODIFIED","insertions":8,"deletions":-38},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"sapi_manifests/vmapi/template","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"test/vms.full.test.js","type":"MODIFIED","insertions":13,"deletions":-7}],"sizeInsertions":27,"sizeDeletions":-57}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}]}