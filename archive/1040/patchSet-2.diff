From 859a75f1950ca9d463ec87cb5e35f8a2ec6df74f Mon Sep 17 00:00:00 2001
From: Trent Mick <trentm@gmail.com>
Date: Thu, 1 Dec 2016 15:32:52 -0800
Subject: [PATCH] OS-5823 'imgadm install' of a type=docker image should work
 Reviewed by: Todd Whiteman <todd.whiteman@joyent.com> Approved by: Todd
 Whiteman <todd.whiteman@joyent.com>

---
 src/img/CHANGES.md    | 4 ++++
 src/img/lib/imgadm.js | 1 -
 src/img/package.json  | 2 +-
 3 files changed, 5 insertions(+), 2 deletions(-)

diff --git a/src/img/CHANGES.md b/src/img/CHANGES.md
index d2b25b90..101bafb0 100644
--- a/src/img/CHANGES.md
+++ b/src/img/CHANGES.md
@@ -6,6 +6,10 @@ Known issues:
   Docker Registry v1, which is now deprecated.
 
 
+## 3.7.1
+
+- OS-5823 Allow 'imgadm install' to be able to install a type=docker image.
+
 ## 3.7.0
 
 - OS-5798 Allow '+' in the image manifest "version" field.
diff --git a/src/img/lib/imgadm.js b/src/img/lib/imgadm.js
index 2763ad4b..8b733c31 100644
--- a/src/img/lib/imgadm.js
+++ b/src/img/lib/imgadm.js
@@ -2340,7 +2340,6 @@ IMGADM.prototype._lockPathFromUuid = function _lockPathFromUuid(uuid) {
 IMGADM.prototype._installDockerImage = function _installDockerImage(ctx, cb) {
     var self = this;
     assert.object(ctx, 'ctx');
-    assert.object(ctx.source, 'ctx.source');
     assert.string(ctx.filePath, 'ctx.filePath');
     assert.string(ctx.dsName, 'ctx.dsName');
     assert.string(ctx.zpool, 'ctx.zpool');
diff --git a/src/img/package.json b/src/img/package.json
index 7cdad364..66b86a93 100644
--- a/src/img/package.json
+++ b/src/img/package.json
@@ -1,7 +1,7 @@
 {
   "name": "imgadm",
   "description": "Manage SmartOS virtual machine images.",
-  "version": "3.7.0",
+  "version": "3.7.1",
   "author": "Joyent (joyent.com)",
   "private": true,
   "dependencies": {
-- 
2.21.0

