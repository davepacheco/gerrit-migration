{"project":"joyent/manta-manatee","branch":"master","id":"I2162801457399b3efeab96a9454825f36be60e48","number":"2478","subject":"MANATEE-303 postgresql needs to be configured with tcp keepalive or equivalent","owner":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"url":"https://cr.joyent.us/2478","commitMessage":"MANATEE-303 postgresql needs to be configured with tcp keepalive or equivalent\n","createdOn":1504098323,"lastUpdated":1504731475,"open":false,"status":"MERGED","comments":[{"timestamp":1504098323,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Uploaded patch set 1."},{"timestamp":1504098325,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit c7655b816e5bcfd9b649a0b7fbd49084b5ddf3af\n    \n    Set TCP keepalive configuration in postgres 9.6 config files\n    \n    commit c1e6e7cd0f64857938e272ba86536404d372f138\n    \n    MANATEE-303 postgresql needs to be configured with tcp keepalive or equivalent"},{"timestamp":1504098332,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1504121062,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1504211516,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1504215087,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\nFrom the notes in MANATEE-303, it looks like you did manage to reproduce the original problem where the PG connection was not cleaned up (at least within 2 hours) without the change.  Then you applied the change and in the same case, the connection was cleaned up within a minute?"},{"timestamp":1504217988,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 1:\n\n\u003e From the notes in MANATEE-303, it looks like you did manage to\n \u003e reproduce the original problem where the PG connection was not\n \u003e cleaned up (at least within 2 hours) without the change.  Then you\n \u003e applied the change and in the same case, the connection was cleaned\n \u003e up within a minute?\n\nYep, that\u0027s correct."},{"timestamp":1504218671,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1: Integration-Approval+1"},{"timestamp":1504731475,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Kelly McLaughlin"}],"currentPatchSet":{"number":"1","revision":"2162801457399b3efeab96a9454825f36be60e48","parents":["cbc43816a223011285f933b604cc79049488ddcf"],"ref":"refs/changes/78/2478/1","uploader":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"createdOn":1504098323,"author":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1504098332,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1504121062,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1504211516,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1504218671,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"SUBM","value":"1","grantedOn":1504731475,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"etc/9.2/postgresql.manta.coal.conf","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"etc/9.2/postgresql.manta.lab.conf","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"etc/9.2/postgresql.manta.production.conf","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"etc/9.6/postgresql.manta.coal.conf","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"etc/9.6/postgresql.manta.lab.conf","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"etc/9.6/postgresql.manta.production.conf","type":"MODIFIED","insertions":3,"deletions":-3}],"sizeInsertions":27,"sizeDeletions":-27},"patchSets":[{"number":"1","revision":"2162801457399b3efeab96a9454825f36be60e48","parents":["cbc43816a223011285f933b604cc79049488ddcf"],"ref":"refs/changes/78/2478/1","uploader":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"createdOn":1504098323,"author":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1504211516,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1504218671,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1504098332,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1504731475,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1504121062,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"etc/9.2/postgresql.manta.coal.conf","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"etc/9.2/postgresql.manta.lab.conf","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"etc/9.2/postgresql.manta.production.conf","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"etc/9.6/postgresql.manta.coal.conf","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"etc/9.6/postgresql.manta.lab.conf","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"etc/9.6/postgresql.manta.production.conf","type":"MODIFIED","insertions":3,"deletions":-3}],"sizeInsertions":27,"sizeDeletions":-27}],"allReviewers":[{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}]}