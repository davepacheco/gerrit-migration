From cd38df37e8a03efd044e21b40c648a69b8e525ee Mon Sep 17 00:00:00 2001
From: Trent Mick <trentm@gmail.com>
Date: Thu, 9 Mar 2017 16:48:34 -0800
Subject: [PATCH] IMGAPI-622 avoid restify's uncaughtException handler so we
 can get cores

---
 lib/app.js | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

diff --git a/lib/app.js b/lib/app.js
index 4af886f..4aaae72 100644
--- a/lib/app.js
+++ b/lib/app.js
@@ -307,6 +307,7 @@ function App(config, log) {
         formatters: {
             'application/json': formatJSON
         },
+        handleUncaughtExceptions: false,
         version: ['1.0.0', '2.0.0']
     });
 
@@ -405,10 +406,6 @@ function App(config, log) {
             body: body
         })(req, res, route, err);
     });
-    server.on('uncaughtException', function (req, res, route, err) {
-        req.log.error(err);
-        res.send(err);
-    });
 
     var reqAuth = getAuthMiddleware(this, config, false);
     var reqPassiveAuth = getAuthMiddleware(this, config, true);
-- 
2.21.0

