{"project":"joyent/illumos-joyent","branch":"master","id":"Ieb3642a63a4b76721d1d3857654137d69aee122e","number":"1072","subject":"OS-5741 incorrect \u0027free -m\u0027 when over memory cap Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Approved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e","owner":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"url":"https://cr.joyent.us/1072","commitMessage":"OS-5741 incorrect \u0027free -m\u0027 when over memory cap\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nApproved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n","createdOn":1481048129,"lastUpdated":1481050940,"open":false,"status":"MERGED","comments":[{"timestamp":1481048129,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 1."},{"timestamp":1481049850,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1481050407,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 2."},{"timestamp":1481050623,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1481050925,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1481050940,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jerry Jelinek"}],"currentPatchSet":{"number":"3","revision":"eb3642a63a4b76721d1d3857654137d69aee122e","parents":["4d40f408a02b644aa917c5b99fd44bd7ac476254"],"ref":"refs/changes/72/1072/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1481050925,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481050623,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1481050623,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1481050940,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/brand/lx/procfs/lx_prvnops.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_sysinfo.c","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/uts/common/fs/lxproc/lxpr_vnops.c","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":13,"sizeDeletions":-2},"patchSets":[{"number":"1","revision":"07d9e1ccc8c08a982d78415a3e328e20beb427f1","parents":["5fc66956efebd334fb60bbad62d8cc175ef79d4f"],"ref":"refs/changes/72/1072/1","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1481048129,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/brand/lx/syscall/lx_sysinfo.c","line":106,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"It\u0027s probably best to keep the result of the subtraction in a temp variable and check from that.  (Avoids a TOCTOU race)"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/procfs/lx_prvnops.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_sysinfo.c","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/uts/common/fs/lxproc/lxpr_vnops.c","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":11,"sizeDeletions":-2},{"number":"2","revision":"b2ea70d8679758169b7e528642ac4daadf0cb4ec","parents":["4d40f408a02b644aa917c5b99fd44bd7ac476254"],"ref":"refs/changes/72/1072/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1481050407,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481050623,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1481050623,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/procfs/lx_prvnops.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_sysinfo.c","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/uts/common/fs/lxproc/lxpr_vnops.c","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":13,"sizeDeletions":-2},{"number":"3","revision":"eb3642a63a4b76721d1d3857654137d69aee122e","parents":["4d40f408a02b644aa917c5b99fd44bd7ac476254"],"ref":"refs/changes/72/1072/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1481050925,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1481050940,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481050623,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1481050623,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/brand/lx/procfs/lx_prvnops.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_sysinfo.c","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/uts/common/fs/lxproc/lxpr_vnops.c","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":13,"sizeDeletions":-2}],"allReviewers":[{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}]}