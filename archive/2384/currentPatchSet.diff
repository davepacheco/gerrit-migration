From 80fc318b433cdf63fbd9f7317453d8300a980096 Mon Sep 17 00:00:00 2001
From: "Joshua M. Clulow" <jmc@joyent.com>
Date: Sat, 12 Aug 2017 01:49:58 +0000
Subject: [PATCH] TOOLS-1836 update hermes README Reviewed by: Trent Mick
 <trentm@gmail.com> Approved by: Trent Mick <trentm@gmail.com>

---
 README.md | 88 +++++++++++++++++++++++++++++++++++++++++++------------
 1 file changed, 70 insertions(+), 18 deletions(-)

diff --git a/README.md b/README.md
index b5f452c..3522b81 100644
--- a/README.md
+++ b/README.md
@@ -1,16 +1,26 @@
+<!--
+    This Source Code Form is subject to the terms of the Mozilla Public
+    License, v. 2.0. If a copy of the MPL was not distributed with this
+    file, You can obtain one at http://mozilla.org/MPL/2.0/.
+-->
+
+<!--
+    Copyright (c) 2017, Joyent, Inc.
+-->
+
 # sdc-hermes
 
-This repository is part of the Joyent SmartDataCenter project (SDC).  For
-contribution guidelines, issues, and general documentation, visit the main
-[SDC](http://github.com/joyent/sdc) project page.
+This repository is part of the Joyent Triton project. See the [contribution
+guidelines](https://github.com/joyent/triton/blob/master/CONTRIBUTING.md) --
+*Triton does not use GitHub PRs* -- and general documentation at the main
+[Triton project](https://github.com/joyent/triton) page.
 
 ## Overview
 
-Hermes is a log and data file archival system provided as part of a
-SmartDataCenter (SDC) deployment.  Hermes archives log (or other data) files
-from compute nodes and SDC internal service zones; for example, the usage
-telemetry files from the _hagfish-watcher_ agent, or audit logs from
-_CloudAPI_.
+Hermes is a log and data file archival system provided as part of a Triton
+deployment.  Hermes archives log (or other data) files from compute nodes and
+Triton internal service zones; for example, the usage telemetry files from the
+_hagfish-watcher_ agent, or audit logs from _CloudAPI_.
 
 Hermes transfers the nominated set of data or log files to the storage provided
 by a Joyent Manta instance, removing them from local disk only after the upload
@@ -18,24 +28,66 @@ is complete _and_ a configurable retention period has passed.  Users without
 their own Manta deployment may use the public Manta instance available through
 the Joyent Public Cloud.
 
-The server process expects to run in the `"sdc"` zone within an SDC deployment.
-That zone must be able to access the Internet, or the network to which the
-target Manta instance is available.  Compute nodes access the target Manta
-through a proxy running in the `"sdc"` zone, and thus do not themselves require
-direct access.
+The server process expects to run in the `"sdc"` zone within a Triton
+deployment.  That zone must be able to access the Internet, or the network on
+which the target Manta instance is available.  Compute nodes access the target
+Manta through a proxy running in the `"sdc"` zone, and thus do not themselves
+require direct access.
 
 
 ## Architecture
 
-"hermes" svc in the "sdc" zone
-    --config-->     "hermes-actor" svc in GZ
-    --http-->       "hermes-proxy" svc in the "sdc" zone
-    --CONNECT-->    manta
 
+```
+  +-------------------------------------------------------------+
+  | COMPUTE NODE GLOBAL ZONE                                    |
+  |                                                             |
+  |   <global zone log files> ............> ****************    |
+  |                                         *              *    |
+  |    +-------------------------+          *              *    |
+  |    | TRITON SERVICE ZONE(S)  |          * hermes-actor *    |
+  |    |                         |          *              *    |
+  |    |    <log files> ..................> *              *    |
+  |    +-------------------------+          ****************    |
+  |                                                   :         |
+  |                                 ,---------^       :         |
+  |                                /                  :         |
+  +------------------------------ / ----------------- : --------+
+                                 /                    :
+                          deployment,               CONNECT
+                        config, control              proxy
+                              /                       :
+  +------------------------- / ---------------------- : --------+
+  | "sdc" ZONE              /                         V         |
+  |   ________       ****************       ****************    |
+  |  (________)      *              *       *              *    |
+  |  | config |----> *              *  ,--> *              *    |
+  |  | files  |      *    hermes    *  |    * hermes-proxy *    |
+  |  \________/      *              *  |    *              *    |
+  |        |         *              *  |    *              *    |
+  |        |         ****************  |    ****************    |
+  |        |                           |              :         |
+  |        `---------------------------'              :         |
+  |                                                   :         |
+  +-------------------------------------------------- : --------+
+                                                      :
+                .     .                             HTTPS
+                |_.-._|                               :
+              ./       \.     <.......................;
+         _.-'`           `'-._
+      .-'        Manta        '-.
+    ,'_.._      Storage      _.._',           LEGEND:
+    '`    `'-.           .-'`    `'           +-- zone/server --+
+              '.       .'                     *** smf service ***
+                \_/|\_/                       ... log data .....>
+                   |                          --- config ------->
+                   |
+                   |
+```
 
 ## License
 
 This Source Code Form is subject to the terms of the Mozilla Public License, v.
 2.0.  For the full license text see LICENSE, or http://mozilla.org/MPL/2.0/.
 
-Copyright (c) 2014, Joyent, Inc.
+Copyright (c) 2017, Joyent, Inc.
-- 
2.21.0

