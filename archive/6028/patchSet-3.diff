commit cb3266e5d93b49bede08c2346baaacd32eccdcc2
Author: John Levon <john.levon@joyent.com>
Date:   2019-05-01T14:10:03+00:00 (5 months ago)
    
    TRITON-1353 Triton systems should ship with HT disabled

diff --git a/www/js/tpl/server.hbs b/www/js/tpl/server.hbs
index b8b1683e..049e86a1 100644
--- a/www/js/tpl/server.hbs
+++ b/www/js/tpl/server.hbs
@@ -5,7 +5,7 @@
 -->
 
 <!--
-    Copyright (c) 2014, Joyent, Inc.
+    Copyright 2019 Joyent, Inc.
 -->
 
 <div class="server-page-header"></div>
@@ -149,12 +149,16 @@
           <td>{{cpu_type}}</td>
         </tr>
         <tr>
-          <th>Physical CPUs</th>
-          <td>{{cpu_physical_cores}}</td>
+          <th>CPU Sockets / Cores</th>
+          <td>{{cpu_sockets}} / {{cpu_cores}}</td>
         </tr>
         <tr>
-          <th>Total CPU Cores</th>
-          <td>{{cpu_total_cores}}</td>
+          <th>Online CPUs</th>
+          <td>{{cpu_online_cpus}}</td>
+        </tr>
+        <tr>
+          <th>Hyper-threading enabled</th>
+          <td>{{ht_enabled}}</td>
         </tr>
         <tr>
           <th>Serial Number</th>
diff --git a/www/js/views/server.js b/www/js/views/server.js
index 07c9d262..2b793833 100644
--- a/www/js/views/server.js
+++ b/www/js/views/server.js
@@ -5,7 +5,7 @@
  */
 
 /*
- * Copyright (c) 2015, Joyent, Inc.
+ * Copyright 2019 Joyent, Inc.
  */
 
 'use strict';
@@ -161,12 +161,29 @@ var ServerView = Backbone.Marionette.Layout.extend({
         cpu_type: function () {
             return this.sysinfo['CPU Type'];
         },
-        cpu_physical_cores: function () {
+        cpu_sockets: function () {
+            if (this.sysinfo.hasOwnProperty('CPU Socket Count'))
+                return this.sysinfo['CPU Socket Count'];
+            // legacy value: this is really number of sockets
             return this.sysinfo['CPU Physical Cores'];
         },
-        cpu_total_cores: function () {
+        cpu_cores: function () {
+            if (this.sysinfo.hasOwnProperty('CPU Core Count'))
+                return this.sysinfo['CPU Core Count'];
+            return 'unknown';
+        },
+        cpu_online_cpus: function () {
+            if (this.sysinfo.hasOwnProperty('CPU Online Count'))
+                return this.sysinfo['CPU Online Count'];
+            // legacy value: this is really *all* *CPUs*
             return this.sysinfo['CPU Total Cores'];
         },
+        ht_enabled: function () {
+            if (this.sysinfo.hasOwnProperty('Psrinfo'))
+                return this.sysinfo.Psrinfo.ht_enabled;
+            // legacy value: HT is - probably - enabled
+            return 'true';
+        },
         serial_number: function () {
             return this.sysinfo['Serial Number'];
         },
