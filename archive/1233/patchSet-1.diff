From f1c3d50e813b0db8efacd0f93102d422eb13d100 Mon Sep 17 00:00:00 2001
From: Alex Wilson <alex.wilson@joyent.com>
Date: Tue, 10 Jan 2017 14:06:36 -0800
Subject: [PATCH] MANTA-3078 muskie -> mako connection retries should be less
 aggressive

---
 main.js                        | 2 +-
 sapi_manifests/muskie/template | 6 +++---
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/main.js b/main.js
index 6957b95..b5a7606 100644
--- a/main.js
+++ b/main.js
@@ -225,7 +225,7 @@ function createCueballHttpAgent(cfg) {
                 retries: sharkCfg.retry.retries,
                 timeout: sharkCfg.connectTimeout,
                 maxTimeout: sharkCfg.maxTimeout,
-                delay: sharkCfg.maxTimeout
+                delay: sharkCfg.delay
             },
             'dns_srv': {
                 retries: 0,
diff --git a/sapi_manifests/muskie/template b/sapi_manifests/muskie/template
index 02b92a6..1273c31 100644
--- a/sapi_manifests/muskie/template
+++ b/sapi_manifests/muskie/template
@@ -98,10 +98,10 @@
   "sharkConfig": {
     {{! These are translated into cueball recovery parameters. }}
     "connectTimeout": 2000,
-    "maxTimeout": 10000,
-    "delay": 250,
+    "maxTimeout": 30000,
+    "delay": 500,
     "retry": {
-      "retries": 2
+      "retries": 5
     },
 
     {{! Use bootstrap mode to find binder, same as for cueballHttpAgent. }}
-- 
2.21.0

