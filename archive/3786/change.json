{"project":"joyent/sdcadm","branch":"master","id":"Id6fa013c245ceb9c11155238f76705205097a704","number":"3786","subject":"TOOLS-2007 Fix sdcadm tests broken by updates made during the past year Reviewed by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e Approved by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/3786","commitMessage":"TOOLS-2007 Fix sdcadm tests broken by updates made during the past year\nReviewed by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e\nApproved by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e\n","createdOn":1523289608,"lastUpdated":1524751638,"open":false,"status":"MERGED","comments":[{"timestamp":1523289608,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1523289614,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 5f297d4c48c0cbb7042d117a42821ab28349871c\n    \n    TOOLS-2007 Fix sdcadm tests broken by updates made during the past year"},{"timestamp":1523289644,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1523289674,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1523289679,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 62fd9fd8ad8cb69406c25b153d9d7e6c10c4d4cd\n    \n    TOOLS-2007 Fix sdcadm tests broken by updates made during the past year"},{"timestamp":1523289708,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2:\n\n\"make check\" passed ok"},{"timestamp":1523622628,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 2:\n\n(46 comments)\n\nI didn\u0027t see anything notable. Just nits."},{"timestamp":1524673171,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\n(46 comments)\n\nThanks for the review man! I know it\u0027s annoying. I\u0027ve made the suggested changes. Another patch to come in a bit"},{"timestamp":1524673206,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 3."},{"timestamp":1524673215,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 9fa863813b61f2456f9d57a3eb82e16c005d861a\n    \n    TOOLS-2007 Fix sdcadm tests broken by updates made during the past year"},{"timestamp":1524673246,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1524727886,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1524729131,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 4."},{"timestamp":1524729137,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit d25da8a7611c13d66de1c2d227a7c01a26741715\n    \n    TOOLS-2007 Fix sdcadm tests broken by updates made during the past year"},{"timestamp":1524729148,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\n(1 comment)\n\nDone again!"},{"timestamp":1524729167,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1524730299,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 3:\n\n(15 comments)"},{"timestamp":1524738772,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 5."},{"timestamp":1524738778,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit 4c42e19c45d4fcb36b8d192256bac84e901dc5ae\n    \n    TOOLS-2007 Fix sdcadm tests broken by updates made during the past year"},{"timestamp":1524738788,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\n(15 comments)\n\nDone again Marsell. Thanks for the feedback!"},{"timestamp":1524738808,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1524743433,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1"},{"timestamp":1524751581,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1524751638,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"6","revision":"d6fa013c245ceb9c11155238f76705205097a704","parents":["1ad282c7141bdb6fe13a2cd03264dc9e77997226"],"ref":"refs/changes/86/3786/6","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1524751581,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1524738808,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1524743433,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1524743433,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"SUBM","value":"1","grantedOn":1524751638,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"test/available.test.js","type":"MODIFIED","insertions":15,"deletions":-8},{"file":"test/check-config.test.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"test/create.test.js","type":"MODIFIED","insertions":45,"deletions":-42},{"file":"test/dc-maint.test.js","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":2,"deletions":-39},{"file":"test/history.test.js","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"test/instances.test.js","type":"MODIFIED","insertions":19,"deletions":-13},{"file":"test/platform.test.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"test/post-setup.test.js","type":"MODIFIED","insertions":39,"deletions":-36},{"file":"test/rollback.test.js","type":"MODIFIED","insertions":12,"deletions":-7},{"file":"test/shared.js","type":"ADDED","insertions":162,"deletions":0},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":43,"deletions":-24},{"file":"test/update.test.js","type":"MODIFIED","insertions":6,"deletions":-11}],"sizeInsertions":386,"sizeDeletions":-207},"patchSets":[{"number":"1","revision":"c90463c3f4128afa435bc4d048ebddc53c1e4686","parents":["0c6fe547da723ad345a8da055dc79a6ee494d8f1"],"ref":"refs/changes/86/3786/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1523289608,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1523289644,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/available.test.js","type":"MODIFIED","insertions":16,"deletions":-9},{"file":"test/check-config.test.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/create.test.js","type":"MODIFIED","insertions":30,"deletions":-28},{"file":"test/dc-maint.test.js","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":2,"deletions":-39},{"file":"test/history.test.js","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"test/instances.test.js","type":"MODIFIED","insertions":18,"deletions":-10},{"file":"test/platform.test.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"test/post-setup.test.js","type":"MODIFIED","insertions":37,"deletions":-34},{"file":"test/rollback.test.js","type":"MODIFIED","insertions":12,"deletions":-7},{"file":"test/shared.js","type":"ADDED","insertions":163,"deletions":0},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":42,"deletions":-24},{"file":"test/update.test.js","type":"MODIFIED","insertions":6,"deletions":-11}],"sizeInsertions":367,"sizeDeletions":-189},{"number":"2","revision":"ac6fb607a55cfc95f73660b412e8df450d1dcb1e","parents":["fb179c09ff4131e781cdbdd372496f44db462ca0"],"ref":"refs/changes/86/3786/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1523289674,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1523289644,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/available.test.js","line":103,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"I know it\u0027s not used, but I\u0027m not convinced a _ is more useful. Your call though."},{"file":"test/available.test.js","line":103,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/check-config.test.js","line":30,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"It might still be worth running anyway to check no exceptions? Even if the flag itself is currently useless."},{"file":"test/check-config.test.js","line":30,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"I\u0027d say skip this until https://jira.joyent.us/browse/TOOLS-1517 is fixed. I\u0027ll update the comment"},{"file":"test/create.test.js","line":74,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/create.test.js","line":74,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/create.test.js","line":88,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/create.test.js","line":88,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/create.test.js","line":101,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/create.test.js","line":101,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/create.test.js","line":123,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/create.test.js","line":123,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/create.test.js","line":155,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/create.test.js","line":155,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/create.test.js","line":172,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/create.test.js","line":172,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/create.test.js","line":208,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/create.test.js","line":208,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/history.test.js","line":70,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/history.test.js","line":70,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/history.test.js","line":260,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/history.test.js","line":260,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/instances.test.js","line":82,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/instances.test.js","line":82,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/instances.test.js","line":95,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/instances.test.js","line":95,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/instances.test.js","line":215,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"What\u0027s this for? It does nothing?"},{"file":"test/instances.test.js","line":215,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/instances.test.js","line":267,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/instances.test.js","line":267,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/instances.test.js","line":274,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/instances.test.js","line":274,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/instances.test.js","line":284,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/instances.test.js","line":284,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/platform.test.js","line":44,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Since we\u0027re here, no need for the \"2\". I\u0027m guessing you want to minimize changes in this diff though."},{"file":"test/platform.test.js","line":44,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/platform.test.js","line":44,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/platform.test.js","line":44,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/platform.test.js","line":222,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/platform.test.js","line":222,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/platform.test.js","line":279,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/platform.test.js","line":279,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/post-setup.test.js","line":34,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/post-setup.test.js","line":34,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/post-setup.test.js","line":295,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/post-setup.test.js","line":295,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/post-setup.test.js","line":297,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Move this to the top of the file."},{"file":"test/post-setup.test.js","line":297,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/post-setup.test.js","line":354,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Why this?"},{"file":"test/post-setup.test.js","line":354,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"To make easy continue writing tests where I left it looking at the commands output. It\u0027ll be removed as soon as I get this merged into sdcadm so I can write the ha-binder tests, which is exactly the next thing I\u0027ll do as part of TOOLS-1977"},{"file":"test/post-setup.test.js","line":386,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"ditto"},{"file":"test/post-setup.test.js","line":386,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/post-setup.test.js","line":427,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/post-setup.test.js","line":427,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/post-setup.test.js","line":440,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/post-setup.test.js","line":440,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/post-setup.test.js","line":451,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Wait, you can pass an arg to t.end()?"},{"file":"test/post-setup.test.js","line":451,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Yessir: https://github.com/substack/tape#tenderr"},{"file":"test/rollback.test.js","line":32,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/rollback.test.js","line":32,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/rollback.test.js","line":51,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/rollback.test.js","line":51,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/rollback.test.js","line":66,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/rollback.test.js","line":66,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/rollback.test.js","line":82,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/rollback.test.js","line":82,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/rollback.test.js","line":98,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/rollback.test.js","line":98,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/rollback.test.js","line":252,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/rollback.test.js","line":252,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/shared.js","line":27,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"assert"},{"file":"test/shared.js","line":27,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/shared.js","line":29,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Why adminui?"},{"file":"test/shared.js","line":29,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"B/c `sdcadm post-setup common-external-nics` creates external nics for AdminUI and IMGAPI"},{"file":"test/shared.js","line":35,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name this."},{"file":"test/shared.js","line":35,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/shared.js","line":49,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"assert"},{"file":"test/shared.js","line":49,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/shared.js","line":89,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/shared.js","line":89,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/shared.js","line":99,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/shared.js","line":99,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/shared.js","line":100,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Is this desirable if there\u0027s a catch-all t.ifError() in pipeCb() anyway?"},{"file":"test/shared.js","line":100,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Good call"},{"file":"test/shared.js","line":121,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/shared.js","line":121,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Just curious: why err3 and not err2? Same with the exec() in prepareDocker()."},{"file":"test/shared.js","line":121,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"B/C it was wrapped into another function in the past and I\u0027ve been lazy to modify it!"},{"file":"test/shared.js","line":121,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/shared.js","line":143,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/shared.js","line":143,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/update-gz-tools.test.js","line":59,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"In that case, is there a ticket for this?"},{"file":"test/update-gz-tools.test.js","line":59,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"TRITON-347"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/available.test.js","type":"MODIFIED","insertions":16,"deletions":-9},{"file":"test/check-config.test.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/create.test.js","type":"MODIFIED","insertions":30,"deletions":-28},{"file":"test/dc-maint.test.js","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":2,"deletions":-39},{"file":"test/history.test.js","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"test/instances.test.js","type":"MODIFIED","insertions":18,"deletions":-10},{"file":"test/platform.test.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"test/post-setup.test.js","type":"MODIFIED","insertions":37,"deletions":-34},{"file":"test/rollback.test.js","type":"MODIFIED","insertions":12,"deletions":-7},{"file":"test/shared.js","type":"ADDED","insertions":163,"deletions":0},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":42,"deletions":-24},{"file":"test/update.test.js","type":"MODIFIED","insertions":6,"deletions":-11}],"sizeInsertions":367,"sizeDeletions":-189},{"number":"3","revision":"c2ffa1981b132848141360485f2c17063ad2da0a","parents":["1ad282c7141bdb6fe13a2cd03264dc9e77997226"],"ref":"refs/changes/86/3786/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1524673206,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1524673246,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/create.test.js","line":29,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Does this requires shared.prepare() to be called in this file then? It isn\u0027t..."},{"file":"test/create.test.js","line":29,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"No, it doesn\u0027t. updates-imgadm uses the GlobalZone external network to reach the outside world"},{"file":"test/create.test.js","line":84,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Not clear. I suggest:\n\nCheck that --dev-allow-multiple-instances is mandatory to allow multiple instances of non-HA services. We should err out without it."},{"file":"test/create.test.js","line":84,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/create.test.js","line":197,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"\u00272\u0027 not really needed in this func."},{"file":"test/create.test.js","line":197,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/post-setup.test.js","line":36,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Second arg"},{"file":"test/post-setup.test.js","line":36,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/post-setup.test.js","line":218,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"add a search"},{"file":"test/post-setup.test.js","line":218,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"add a comma here"},{"file":"test/post-setup.test.js","line":218,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/post-setup.test.js","line":218,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/post-setup.test.js","line":219,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"in"},{"file":"test/post-setup.test.js","line":219,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/post-setup.test.js","line":220,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"in"},{"file":"test/post-setup.test.js","line":220,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/shared.js","line":14,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"To make this clearer, I think parens would work better:\n\nWe want to be able to test some sdcadm subcommands (most of them part of the post-setup subcommands) which are usually required before we can run any other commands."},{"file":"test/shared.js","line":14,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"required before \u003d\u003e used in a previous set of tests"},{"file":"test/shared.js","line":14,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/shared.js","line":14,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/shared.js","line":32,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"test/shared.js","line":32,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/shared.js","line":49,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"on"},{"file":"test/shared.js","line":49,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/shared.js","line":118,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Normally I\u0027m cool with this, but in this case I think a \"numInsts \u003e 0\" would clarify things a bit."},{"file":"test/shared.js","line":118,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/shared.js","line":124,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Give the third arg."},{"file":"test/shared.js","line":124,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/shared.js","line":139,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Clarify."},{"file":"test/shared.js","line":139,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/shared.js","line":145,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Third arg."},{"file":"test/shared.js","line":145,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/available.test.js","type":"MODIFIED","insertions":15,"deletions":-8},{"file":"test/check-config.test.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"test/create.test.js","type":"MODIFIED","insertions":43,"deletions":-41},{"file":"test/dc-maint.test.js","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":2,"deletions":-39},{"file":"test/history.test.js","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"test/instances.test.js","type":"MODIFIED","insertions":19,"deletions":-13},{"file":"test/platform.test.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"test/post-setup.test.js","type":"MODIFIED","insertions":38,"deletions":-35},{"file":"test/rollback.test.js","type":"MODIFIED","insertions":12,"deletions":-7},{"file":"test/shared.js","type":"ADDED","insertions":162,"deletions":0},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":43,"deletions":-24},{"file":"test/update.test.js","type":"MODIFIED","insertions":6,"deletions":-11}],"sizeInsertions":383,"sizeDeletions":-205},{"number":"4","revision":"c46cac415881fbbfd4da65fab59aa9143f694af2","parents":["1ad282c7141bdb6fe13a2cd03264dc9e77997226"],"ref":"refs/changes/86/3786/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1524729131,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1524729167,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/available.test.js","type":"MODIFIED","insertions":15,"deletions":-8},{"file":"test/check-config.test.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"test/create.test.js","type":"MODIFIED","insertions":44,"deletions":-42},{"file":"test/dc-maint.test.js","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":2,"deletions":-39},{"file":"test/history.test.js","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"test/instances.test.js","type":"MODIFIED","insertions":19,"deletions":-13},{"file":"test/platform.test.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"test/post-setup.test.js","type":"MODIFIED","insertions":38,"deletions":-35},{"file":"test/rollback.test.js","type":"MODIFIED","insertions":12,"deletions":-7},{"file":"test/shared.js","type":"ADDED","insertions":162,"deletions":0},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":43,"deletions":-24},{"file":"test/update.test.js","type":"MODIFIED","insertions":6,"deletions":-11}],"sizeInsertions":384,"sizeDeletions":-206},{"number":"5","revision":"5a91c76199fa645f6400b6971bcb4ef9a69e3e11","parents":["1ad282c7141bdb6fe13a2cd03264dc9e77997226"],"ref":"refs/changes/86/3786/5","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1524738772,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1524738808,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1524743433,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1524743433,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/available.test.js","type":"MODIFIED","insertions":15,"deletions":-8},{"file":"test/check-config.test.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"test/create.test.js","type":"MODIFIED","insertions":45,"deletions":-42},{"file":"test/dc-maint.test.js","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":2,"deletions":-39},{"file":"test/history.test.js","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"test/instances.test.js","type":"MODIFIED","insertions":19,"deletions":-13},{"file":"test/platform.test.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"test/post-setup.test.js","type":"MODIFIED","insertions":39,"deletions":-36},{"file":"test/rollback.test.js","type":"MODIFIED","insertions":12,"deletions":-7},{"file":"test/shared.js","type":"ADDED","insertions":162,"deletions":0},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":43,"deletions":-24},{"file":"test/update.test.js","type":"MODIFIED","insertions":6,"deletions":-11}],"sizeInsertions":386,"sizeDeletions":-207},{"number":"6","revision":"d6fa013c245ceb9c11155238f76705205097a704","parents":["1ad282c7141bdb6fe13a2cd03264dc9e77997226"],"ref":"refs/changes/86/3786/6","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1524751581,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1524738808,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1524751638,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1524743433,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1524743433,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"test/available.test.js","type":"MODIFIED","insertions":15,"deletions":-8},{"file":"test/check-config.test.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"test/create.test.js","type":"MODIFIED","insertions":45,"deletions":-42},{"file":"test/dc-maint.test.js","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":2,"deletions":-39},{"file":"test/history.test.js","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"test/instances.test.js","type":"MODIFIED","insertions":19,"deletions":-13},{"file":"test/platform.test.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"test/post-setup.test.js","type":"MODIFIED","insertions":39,"deletions":-36},{"file":"test/rollback.test.js","type":"MODIFIED","insertions":12,"deletions":-7},{"file":"test/shared.js","type":"ADDED","insertions":162,"deletions":0},{"file":"test/update-gz-tools.test.js","type":"MODIFIED","insertions":43,"deletions":-24},{"file":"test/update.test.js","type":"MODIFIED","insertions":6,"deletions":-11}],"sizeInsertions":386,"sizeDeletions":-207}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}