{"project":"joyent/illumos-joyent","branch":"master","id":"I60f89b42cd13d6888f948d7ffe4edcfa535e02a6","number":"3595","subject":"OS-6546 Use PCID if KPTI is enabled Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Reviewed by: Alex Wilson \u003calex.wilson@joyent.com\u003e Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Approved by: Alex Wilson \u003calex.wilson@joyent.com\u003e","owner":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"url":"https://cr.joyent.us/3595","commitMessage":"OS-6546 Use PCID if KPTI is enabled\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nReviewed by: Alex Wilson \u003calex.wilson@joyent.com\u003e\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nApproved by: Alex Wilson \u003calex.wilson@joyent.com\u003e\n","createdOn":1520883567,"lastUpdated":1520973766,"open":false,"status":"MERGED","comments":[{"timestamp":1520883567,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 1."},{"timestamp":1520886338,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1: Code-Review+1\n\nLast week I did a preliminary review of a webrev of this work and gave a little bit of feedback. I did a quick pass through this official review and it still looks good to me. Nice work on this!"},{"timestamp":1520887460,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 2."},{"timestamp":1520889215,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 1:\n\nso, my comment on chat:\nI think we should make it so that x86_use_pcid and friends always reflect the real status of the system (i.e. whether we are actually going to use PCID and whether we are going to run the invpcid emulation trampoline or not). I think it\u0027s a bit confusing right now trying to figure out what the system is doing from mdb -k"},{"timestamp":1520938254,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 3."},{"timestamp":1520938752,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3:\n\nUpdated for Alex\u0027s comment. I remembered now why I shied away from doing so before: it\u0027s slightly complicated in that x86_use_invpcid can get used early on, so if we\u0027re to make it that the indicator of invpcid support, we have to default to -1 first until we can reliably check actual support.\n\nSimilarly for x86_use_pcid, we can\u0027t let users force it on (which is pointless anyway), because then we wouldn\u0027t check for support. Or we complicate things further by explicitly having different paths in enable_pcid() for boot cpu versus other CPUs."},{"timestamp":1520948454,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1520961819,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1520972809,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1520972898,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1520973168,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1520973590,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1520973766,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by John Levon"}],"currentPatchSet":{"number":"5","revision":"60f89b42cd13d6888f948d7ffe4edcfa535e02a6","parents":["0e957fcabecc0abb13226b12f474359f4ea711ea"],"ref":"refs/changes/95/3595/5","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1520973590,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520948454,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520961819,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520972809,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1520972898,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"SUBM","value":"1","grantedOn":1520973765,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/unix.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/cmd/mdb/intel/kmdb/kaif.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/i86pc/io/gfx_private/gfxp_vm.c","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/uts/i86pc/ml/fb_swtch_src.s","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/uts/i86pc/ml/kpti_trampolines.s","type":"MODIFIED","insertions":32,"deletions":0},{"file":"usr/src/uts/i86pc/ml/mpcore.s","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":47,"deletions":-2},{"file":"usr/src/uts/i86pc/os/fakebop.c","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/uts/i86pc/os/mach_kdi.c","type":"MODIFIED","insertions":2,"deletions":-8},{"file":"usr/src/uts/i86pc/os/mlsetup.c","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"usr/src/uts/i86pc/os/mp_pc.c","type":"MODIFIED","insertions":8,"deletions":-11},{"file":"usr/src/uts/i86pc/os/mp_startup.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/uts/i86pc/os/trap.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/i86pc/sys/mach_mmu.h","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/uts/i86pc/sys/machcpuvar.h","type":"MODIFIED","insertions":0,"deletions":-4},{"file":"usr/src/uts/i86pc/sys/pc_mmu.h","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"usr/src/uts/i86pc/sys/rm_platter.h","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hat_i86.c","type":"MODIFIED","insertions":188,"deletions":-178},{"file":"usr/src/uts/i86pc/vm/hat_i86.h","type":"MODIFIED","insertions":38,"deletions":-28},{"file":"usr/src/uts/i86pc/vm/hat_kdi.c","type":"MODIFIED","insertions":18,"deletions":-3},{"file":"usr/src/uts/i86pc/vm/hat_pte.h","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/i86pc/vm/htable.c","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"usr/src/uts/i86pc/vm/htable.h","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/i86_mmu.c","type":"MODIFIED","insertions":183,"deletions":-106},{"file":"usr/src/uts/i86pc/vm/kboot_mmu.c","type":"MODIFIED","insertions":8,"deletions":-6},{"file":"usr/src/uts/i86pc/vm/vm_machdep.c","type":"MODIFIED","insertions":86,"deletions":-1},{"file":"usr/src/uts/i86xpv/os/xpv_panic.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/intel/asm/htable.h","type":"MODIFIED","insertions":2,"deletions":-13},{"file":"usr/src/uts/intel/asm/mmu.h","type":"MODIFIED","insertions":35,"deletions":-17},{"file":"usr/src/uts/intel/ia32/ml/i86_subr.s","type":"MODIFIED","insertions":4,"deletions":-15},{"file":"usr/src/uts/intel/ia32/os/desctbls.c","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"usr/src/uts/intel/sys/controlregs.h","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":10,"deletions":-2}],"sizeInsertions":763,"sizeDeletions":-441},"patchSets":[{"number":"1","revision":"31c83f0906d312e5d61648d6aaafe3ca8fc2024d","parents":["b4d3cc05ba69320101da4e02e8d10f11063f2ff7"],"ref":"refs/changes/95/3595/1","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1520883567,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520886338,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/unix.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/cmd/mdb/intel/kmdb/kaif.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/i86pc/io/gfx_private/gfxp_vm.c","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/uts/i86pc/ml/fb_swtch_src.s","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/uts/i86pc/ml/kpti_trampolines.s","type":"MODIFIED","insertions":32,"deletions":0},{"file":"usr/src/uts/i86pc/ml/mpcore.s","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":36,"deletions":-2},{"file":"usr/src/uts/i86pc/os/fakebop.c","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/uts/i86pc/os/mach_kdi.c","type":"MODIFIED","insertions":2,"deletions":-8},{"file":"usr/src/uts/i86pc/os/mlsetup.c","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"usr/src/uts/i86pc/os/mp_pc.c","type":"MODIFIED","insertions":8,"deletions":-11},{"file":"usr/src/uts/i86pc/os/mp_startup.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/uts/i86pc/os/trap.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/i86pc/sys/mach_mmu.h","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/uts/i86pc/sys/machcpuvar.h","type":"MODIFIED","insertions":0,"deletions":-4},{"file":"usr/src/uts/i86pc/sys/pc_mmu.h","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"usr/src/uts/i86pc/sys/rm_platter.h","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hat_i86.c","type":"MODIFIED","insertions":188,"deletions":-178},{"file":"usr/src/uts/i86pc/vm/hat_i86.h","type":"MODIFIED","insertions":38,"deletions":-28},{"file":"usr/src/uts/i86pc/vm/hat_kdi.c","type":"MODIFIED","insertions":18,"deletions":-3},{"file":"usr/src/uts/i86pc/vm/hat_pte.h","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/i86pc/vm/htable.c","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"usr/src/uts/i86pc/vm/htable.h","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/i86_mmu.c","type":"MODIFIED","insertions":184,"deletions":-106},{"file":"usr/src/uts/i86pc/vm/kboot_mmu.c","type":"MODIFIED","insertions":8,"deletions":-6},{"file":"usr/src/uts/i86pc/vm/vm_machdep.c","type":"MODIFIED","insertions":86,"deletions":-1},{"file":"usr/src/uts/i86xpv/os/xpv_panic.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/intel/asm/htable.h","type":"MODIFIED","insertions":2,"deletions":-13},{"file":"usr/src/uts/intel/asm/mmu.h","type":"MODIFIED","insertions":35,"deletions":-17},{"file":"usr/src/uts/intel/ia32/ml/i86_subr.s","type":"MODIFIED","insertions":4,"deletions":-15},{"file":"usr/src/uts/intel/ia32/os/desctbls.c","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"usr/src/uts/intel/sys/controlregs.h","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":10,"deletions":-2}],"sizeInsertions":754,"sizeDeletions":-441},{"number":"2","revision":"9fa7704900efe48db079d41caa39a9bb4642c83d","parents":["b4d3cc05ba69320101da4e02e8d10f11063f2ff7"],"ref":"refs/changes/95/3595/2","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1520887460,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/unix.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/cmd/mdb/intel/kmdb/kaif.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/i86pc/io/gfx_private/gfxp_vm.c","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/uts/i86pc/ml/fb_swtch_src.s","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/uts/i86pc/ml/kpti_trampolines.s","type":"MODIFIED","insertions":32,"deletions":0},{"file":"usr/src/uts/i86pc/ml/mpcore.s","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":46,"deletions":-2},{"file":"usr/src/uts/i86pc/os/fakebop.c","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/uts/i86pc/os/mach_kdi.c","type":"MODIFIED","insertions":2,"deletions":-8},{"file":"usr/src/uts/i86pc/os/mlsetup.c","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"usr/src/uts/i86pc/os/mp_pc.c","type":"MODIFIED","insertions":8,"deletions":-11},{"file":"usr/src/uts/i86pc/os/mp_startup.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/uts/i86pc/os/trap.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/i86pc/sys/mach_mmu.h","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/uts/i86pc/sys/machcpuvar.h","type":"MODIFIED","insertions":0,"deletions":-4},{"file":"usr/src/uts/i86pc/sys/pc_mmu.h","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"usr/src/uts/i86pc/sys/rm_platter.h","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hat_i86.c","type":"MODIFIED","insertions":188,"deletions":-178},{"file":"usr/src/uts/i86pc/vm/hat_i86.h","type":"MODIFIED","insertions":38,"deletions":-28},{"file":"usr/src/uts/i86pc/vm/hat_kdi.c","type":"MODIFIED","insertions":18,"deletions":-3},{"file":"usr/src/uts/i86pc/vm/hat_pte.h","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/i86pc/vm/htable.c","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"usr/src/uts/i86pc/vm/htable.h","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/i86_mmu.c","type":"MODIFIED","insertions":182,"deletions":-106},{"file":"usr/src/uts/i86pc/vm/kboot_mmu.c","type":"MODIFIED","insertions":8,"deletions":-6},{"file":"usr/src/uts/i86pc/vm/vm_machdep.c","type":"MODIFIED","insertions":86,"deletions":-1},{"file":"usr/src/uts/i86xpv/os/xpv_panic.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/intel/asm/htable.h","type":"MODIFIED","insertions":2,"deletions":-13},{"file":"usr/src/uts/intel/asm/mmu.h","type":"MODIFIED","insertions":35,"deletions":-17},{"file":"usr/src/uts/intel/ia32/ml/i86_subr.s","type":"MODIFIED","insertions":4,"deletions":-15},{"file":"usr/src/uts/intel/ia32/os/desctbls.c","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"usr/src/uts/intel/sys/controlregs.h","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":10,"deletions":-2}],"sizeInsertions":762,"sizeDeletions":-441},{"number":"3","revision":"1115f349b84d2530b24bc26b4039b31795aa9da0","parents":["b4d3cc05ba69320101da4e02e8d10f11063f2ff7"],"ref":"refs/changes/95/3595/3","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1520938254,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520961819,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520972809,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1520972898,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520948454,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/unix.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/cmd/mdb/intel/kmdb/kaif.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/i86pc/io/gfx_private/gfxp_vm.c","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/uts/i86pc/ml/fb_swtch_src.s","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/uts/i86pc/ml/kpti_trampolines.s","type":"MODIFIED","insertions":32,"deletions":0},{"file":"usr/src/uts/i86pc/ml/mpcore.s","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":47,"deletions":-2},{"file":"usr/src/uts/i86pc/os/fakebop.c","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/uts/i86pc/os/mach_kdi.c","type":"MODIFIED","insertions":2,"deletions":-8},{"file":"usr/src/uts/i86pc/os/mlsetup.c","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"usr/src/uts/i86pc/os/mp_pc.c","type":"MODIFIED","insertions":8,"deletions":-11},{"file":"usr/src/uts/i86pc/os/mp_startup.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/uts/i86pc/os/trap.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/i86pc/sys/mach_mmu.h","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/uts/i86pc/sys/machcpuvar.h","type":"MODIFIED","insertions":0,"deletions":-4},{"file":"usr/src/uts/i86pc/sys/pc_mmu.h","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"usr/src/uts/i86pc/sys/rm_platter.h","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hat_i86.c","type":"MODIFIED","insertions":188,"deletions":-178},{"file":"usr/src/uts/i86pc/vm/hat_i86.h","type":"MODIFIED","insertions":38,"deletions":-28},{"file":"usr/src/uts/i86pc/vm/hat_kdi.c","type":"MODIFIED","insertions":18,"deletions":-3},{"file":"usr/src/uts/i86pc/vm/hat_pte.h","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/i86pc/vm/htable.c","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"usr/src/uts/i86pc/vm/htable.h","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/i86_mmu.c","type":"MODIFIED","insertions":183,"deletions":-106},{"file":"usr/src/uts/i86pc/vm/kboot_mmu.c","type":"MODIFIED","insertions":8,"deletions":-6},{"file":"usr/src/uts/i86pc/vm/vm_machdep.c","type":"MODIFIED","insertions":86,"deletions":-1},{"file":"usr/src/uts/i86xpv/os/xpv_panic.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/intel/asm/htable.h","type":"MODIFIED","insertions":2,"deletions":-13},{"file":"usr/src/uts/intel/asm/mmu.h","type":"MODIFIED","insertions":35,"deletions":-17},{"file":"usr/src/uts/intel/ia32/ml/i86_subr.s","type":"MODIFIED","insertions":4,"deletions":-15},{"file":"usr/src/uts/intel/ia32/os/desctbls.c","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"usr/src/uts/intel/sys/controlregs.h","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":10,"deletions":-2}],"sizeInsertions":763,"sizeDeletions":-441},{"number":"4","revision":"a6f1c28e9be0e48658d8461aa149fa79a06f1641","parents":["0e957fcabecc0abb13226b12f474359f4ea711ea"],"ref":"refs/changes/95/3595/4","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1520973168,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520961819,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520972809,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1520972898,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520948454,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/unix.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/cmd/mdb/intel/kmdb/kaif.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/i86pc/io/gfx_private/gfxp_vm.c","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/uts/i86pc/ml/fb_swtch_src.s","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/uts/i86pc/ml/kpti_trampolines.s","type":"MODIFIED","insertions":32,"deletions":0},{"file":"usr/src/uts/i86pc/ml/mpcore.s","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":47,"deletions":-2},{"file":"usr/src/uts/i86pc/os/fakebop.c","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/uts/i86pc/os/mach_kdi.c","type":"MODIFIED","insertions":2,"deletions":-8},{"file":"usr/src/uts/i86pc/os/mlsetup.c","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"usr/src/uts/i86pc/os/mp_pc.c","type":"MODIFIED","insertions":8,"deletions":-11},{"file":"usr/src/uts/i86pc/os/mp_startup.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/uts/i86pc/os/trap.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/i86pc/sys/mach_mmu.h","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/uts/i86pc/sys/machcpuvar.h","type":"MODIFIED","insertions":0,"deletions":-4},{"file":"usr/src/uts/i86pc/sys/pc_mmu.h","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"usr/src/uts/i86pc/sys/rm_platter.h","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hat_i86.c","type":"MODIFIED","insertions":188,"deletions":-178},{"file":"usr/src/uts/i86pc/vm/hat_i86.h","type":"MODIFIED","insertions":38,"deletions":-28},{"file":"usr/src/uts/i86pc/vm/hat_kdi.c","type":"MODIFIED","insertions":18,"deletions":-3},{"file":"usr/src/uts/i86pc/vm/hat_pte.h","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/i86pc/vm/htable.c","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"usr/src/uts/i86pc/vm/htable.h","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/i86_mmu.c","type":"MODIFIED","insertions":183,"deletions":-106},{"file":"usr/src/uts/i86pc/vm/kboot_mmu.c","type":"MODIFIED","insertions":8,"deletions":-6},{"file":"usr/src/uts/i86pc/vm/vm_machdep.c","type":"MODIFIED","insertions":86,"deletions":-1},{"file":"usr/src/uts/i86xpv/os/xpv_panic.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/intel/asm/htable.h","type":"MODIFIED","insertions":2,"deletions":-13},{"file":"usr/src/uts/intel/asm/mmu.h","type":"MODIFIED","insertions":35,"deletions":-17},{"file":"usr/src/uts/intel/ia32/ml/i86_subr.s","type":"MODIFIED","insertions":4,"deletions":-15},{"file":"usr/src/uts/intel/ia32/os/desctbls.c","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"usr/src/uts/intel/sys/controlregs.h","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":10,"deletions":-2}],"sizeInsertions":763,"sizeDeletions":-441},{"number":"5","revision":"60f89b42cd13d6888f948d7ffe4edcfa535e02a6","parents":["0e957fcabecc0abb13226b12f474359f4ea711ea"],"ref":"refs/changes/95/3595/5","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1520973590,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520961819,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520972809,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1520972898,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520948454,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1520973765,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/unix.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/cmd/mdb/intel/kmdb/kaif.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/i86pc/io/gfx_private/gfxp_vm.c","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/uts/i86pc/ml/fb_swtch_src.s","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/uts/i86pc/ml/kpti_trampolines.s","type":"MODIFIED","insertions":32,"deletions":0},{"file":"usr/src/uts/i86pc/ml/mpcore.s","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":47,"deletions":-2},{"file":"usr/src/uts/i86pc/os/fakebop.c","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/uts/i86pc/os/mach_kdi.c","type":"MODIFIED","insertions":2,"deletions":-8},{"file":"usr/src/uts/i86pc/os/mlsetup.c","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"usr/src/uts/i86pc/os/mp_pc.c","type":"MODIFIED","insertions":8,"deletions":-11},{"file":"usr/src/uts/i86pc/os/mp_startup.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/uts/i86pc/os/trap.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/i86pc/sys/mach_mmu.h","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/uts/i86pc/sys/machcpuvar.h","type":"MODIFIED","insertions":0,"deletions":-4},{"file":"usr/src/uts/i86pc/sys/pc_mmu.h","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"usr/src/uts/i86pc/sys/rm_platter.h","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/hat_i86.c","type":"MODIFIED","insertions":188,"deletions":-178},{"file":"usr/src/uts/i86pc/vm/hat_i86.h","type":"MODIFIED","insertions":38,"deletions":-28},{"file":"usr/src/uts/i86pc/vm/hat_kdi.c","type":"MODIFIED","insertions":18,"deletions":-3},{"file":"usr/src/uts/i86pc/vm/hat_pte.h","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/i86pc/vm/htable.c","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"usr/src/uts/i86pc/vm/htable.h","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"usr/src/uts/i86pc/vm/i86_mmu.c","type":"MODIFIED","insertions":183,"deletions":-106},{"file":"usr/src/uts/i86pc/vm/kboot_mmu.c","type":"MODIFIED","insertions":8,"deletions":-6},{"file":"usr/src/uts/i86pc/vm/vm_machdep.c","type":"MODIFIED","insertions":86,"deletions":-1},{"file":"usr/src/uts/i86xpv/os/xpv_panic.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/intel/asm/htable.h","type":"MODIFIED","insertions":2,"deletions":-13},{"file":"usr/src/uts/intel/asm/mmu.h","type":"MODIFIED","insertions":35,"deletions":-17},{"file":"usr/src/uts/intel/ia32/ml/i86_subr.s","type":"MODIFIED","insertions":4,"deletions":-15},{"file":"usr/src/uts/intel/ia32/os/desctbls.c","type":"MODIFIED","insertions":0,"deletions":-3},{"file":"usr/src/uts/intel/sys/controlregs.h","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":10,"deletions":-2}],"sizeInsertions":763,"sizeDeletions":-441}],"allReviewers":[{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}]}