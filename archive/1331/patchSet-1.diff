From 357c8b79a9bc6991ef69d83e1013b5d0c917b21a Mon Sep 17 00:00:00 2001
From: Robert Mustacchi <rm@joyent.com>
Date: Tue, 24 Jan 2017 22:58:47 +0000
Subject: [PATCH] MANTA-3113 Want README/CONTRIBUTING files for our nginx
 branch

---
 CONTRIBUTING.md |  5 +++++
 README.md       | 58 +++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 63 insertions(+)
 create mode 100644 CONTRIBUTING.md
 create mode 100644 README.md

diff --git a/CONTRIBUTING.md b/CONTRIBUTING.md
new file mode 100644
index 00000000..208d435c
--- /dev/null
+++ b/CONTRIBUTING.md
@@ -0,0 +1,5 @@
+# Contributing
+
+This repository is part of the Joyent Manta project.  See the [contribution
+guidelines for the Manta
+project](https://github.com/joyent/manta/blob/master/CONTRIBUTING.md).
diff --git a/README.md b/README.md
new file mode 100644
index 00000000..a27e4a2a
--- /dev/null
+++ b/README.md
@@ -0,0 +1,58 @@
+# nginx
+
+This repository represents the version of [nginx](https://nginx.com)
+that is used as part of the [Manta
+project](https://github.com/joyent/manta) in the
+[mako](https://github.com/joyent/manta-mako) project.
+
+We have changes to nginx currently covering the following broader
+features:
+
+* Returning calculated md5 checksums from streamed request bodies
+* Ensuring that the dav module properly renames are atomic (fsync)
+
+## Repository Management
+
+This repository is downstream of the [github nginx
+mirror](https://github.com/nginx/nginx).
+
+To better understand and maintain our differences from nginx, we try to
+manage branches and tags in a specific fashion. First and foremost, all
+branches and tags from the upstream nginx repository are mirrored here.
+
+Anything that is Joyent specific begins with a `joyent/` prefix. The one
+exception to this is the old `mako` branch which represents an older
+original version of this repository.
+
+Branches with Joyent modifications are named `joyent/<version>`, such as
+`joyent/1.10.2`. This is a branch that starts from the nginx
+`release-1.10.2` tag. These branches will have all of our patches
+rebased on top of them. When we want to use this in tandem with `mako`
+we create and push a tag labeled
+`joyent/v<version>j<branch release num>`. The first release as described
+above would be: `joyent/v1.10.2j1`. If we need to cut another release
+from this branch, we would tag it `joyent/v1.10.2j2` and continue to
+increment the number after the `j`. Note we use the `j` instead of the
+traditional `r` to indicate that it is the Joyent revision and protect
+ourselves in case nginx ever uses the `r` syntax.
+
+When it comes time to update to a newer version of nginx, we would take
+the following steps:
+
+* Ensure that we have pushed all changes from `nginx/nginx` and synced
+all of our branches and tags.
+* Identify the release tag that corresponds to the point release. For
+this example, we'll say that's `release-1.12.3`.
+* Create a new branch named `joyent/<version>' from the tag, in this
+case that would be called `joyent/1.12.3`.
+* Rebase all of our patches on to that new branch, removing any patches
+that are no longer necessary.
+* Test the new nginx binary
+* Review and Commit all relevant changes
+* Create a new tag `joyent/v1.12.3j1`
+* Update the [manta-mako](https://github.com/joyent/manta-mako) submodule
+
+## Licensing
+
+All of our changes to nginx are under the terms of nginx's 2-clause BSD
+license.
-- 
2.21.0

