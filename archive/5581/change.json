{"project":"joyent/illumos-joyent","branch":"master","id":"Ic6a22c86f2d0254060157d591af12a83e37b9a50","number":"5581","subject":"OS-7580 bhyve upstream sync 2019 Feb Reviewed by: John Levon \u003cjohn.levon@joyent.com\u003e Reviewed by: Hans Rosenfeld \u003chans.rosenfeld@joyent.com\u003e Approved by: Robert Mustacchi \u003crm@joyent.com\u003e","owner":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"url":"https://cr.joyent.us/5581","commitMessage":"OS-7580 bhyve upstream sync 2019 Feb\nReviewed by: John Levon \u003cjohn.levon@joyent.com\u003e\nReviewed by: Hans Rosenfeld \u003chans.rosenfeld@joyent.com\u003e\nApproved by: Robert Mustacchi \u003crm@joyent.com\u003e\n","createdOn":1550096724,"lastUpdated":1550699422,"open":false,"status":"MERGED","comments":[{"timestamp":1550096724,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 1."},{"timestamp":1550098576,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(4 comments)\n\nThis wad consists mostly of changes pulled from upstream bhyve.\nAny changes I\u0027ve made are wrapped in #if(n)def __FreeBSD__ guards."},{"timestamp":1550160836,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1550160876,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1550161808,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 2:\n\n(3 comments)"},{"timestamp":1550165962,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 3."},{"timestamp":1550166084,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1550271893,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1550272778,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 5."},{"timestamp":1550272824,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 5:\n\nOne quick update to fix spaces-vs-tabs for the #undefs"},{"timestamp":1550493513,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 5: Code-Review+1\n\n(4 comments)"},{"timestamp":1550499958,"reviewer":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1550501109,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 5:\n\n(4 comments)"},{"timestamp":1550588963,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1550590917,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 6."},{"timestamp":1550591016,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 7: Patch Set 6 was rebased."},{"timestamp":1550591225,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 7: Code-Review+1\n\n(1 comment)"},{"timestamp":1550678928,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 7: Code-Review+1"},{"timestamp":1550694076,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 7:\n\ntest notes are in the ticket"},{"timestamp":1550694111,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 8: Patch Set 7 was rebased."},{"timestamp":1550698481,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 8: Integration-Approval+1"},{"timestamp":1550698615,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 9: Commit message was updated."},{"timestamp":1550699422,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Patrick Mooney"}],"currentPatchSet":{"number":"9","revision":"c6a22c86f2d0254060157d591af12a83e37b9a50","parents":["d7e5de8ade719deb02b214bb5901ab33c0406f0f"],"ref":"refs/changes/81/5581/9","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1550698615,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550591225,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550678928,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1550698481,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1550699422,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/contrib/freebsd/x86/specialreg.h","type":"MODIFIED","insertions":238,"deletions":-20},{"file":"usr/src/cmd/bhyve/bhyverun.c","type":"MODIFIED","insertions":88,"deletions":-8},{"file":"usr/src/cmd/bhyve/block_if.c","type":"MODIFIED","insertions":15,"deletions":-3},{"file":"usr/src/cmd/bhyve/consport.c","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"usr/src/cmd/bhyve/dbgport.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/gdb.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/bhyve/iov.c","type":"MODIFIED","insertions":32,"deletions":-25},{"file":"usr/src/cmd/bhyve/iov.h","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/cmd/bhyve/mevent.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/bhyve/pci_ahci.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/bhyve/pci_e82545.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_fbuf.c","type":"MODIFIED","insertions":30,"deletions":-9},{"file":"usr/src/cmd/bhyve/pci_nvme.c","type":"MODIFIED","insertions":88,"deletions":-49},{"file":"usr/src/cmd/bhyve/pci_passthru.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_virtio_block.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/cmd/bhyve/pci_virtio_console.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_net.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_rnd.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_scsi.c","type":"MODIFIED","insertions":48,"deletions":-29},{"file":"usr/src/cmd/bhyve/pci_xhci.c","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/cmd/bhyve/ps2kbd.c","type":"MODIFIED","insertions":130,"deletions":-227},{"file":"usr/src/cmd/bhyve/rfb.c","type":"MODIFIED","insertions":34,"deletions":-14},{"file":"usr/src/cmd/bhyve/uart_emul.c","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"usr/src/compat/freebsd/amd64/machine/cpufunc.h","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/param.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/specialreg.h","type":"MODIFIED","insertions":16,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/README.sync","type":"MODIFIED","insertions":7,"deletions":-12},{"file":"usr/src/uts/i86pc/io/vmm/amd/svm.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/amd/svm_msr.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmcs.h","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","type":"MODIFIED","insertions":58,"deletions":-13},{"file":"usr/src/uts/i86pc/io/vmm/vmm_instruction_emul.c","type":"MODIFIED","insertions":40,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","type":"MODIFIED","insertions":119,"deletions":-36},{"file":"usr/src/uts/i86pc/io/vmm/x86.h","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":1055,"sizeDeletions":-477},"patchSets":[{"number":"1","revision":"d8ee6c7e919073709f9e334e446b55278399f226","parents":["a34efbb67708deaa7bfc683cfc95bc54c769d912"],"ref":"refs/changes/81/5581/1","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1550096724,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/contrib/freebsd/x86/specialreg.h","line":2,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I just pulled the latest copy of this from the FreeBSD sources to get the needed defines for the update."},{"file":"usr/src/cmd/bhyve/block_if.c","line":710,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Am I missing something here? This looks like a multiple-free of the same buffer (or parts of it).\n\noptstr is duplicated on line 496 and assigned to nopt and xopts. The calls to strsep just insert \\0 in some places inside that buffer, and xopts and cp end up pointing somewhere in it.\n\nWouldn\u0027t it be correct to free() only nopt, which always points at the whole buffer for the duplicated optstr?"},{"file":"usr/src/cmd/bhyve/block_if.c","line":710,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"},{"file":"usr/src/cmd/bhyve/pci_nvme.c","line":94,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Hans: Since you\u0027ve done a bunch of work in NVME, I would appreciate your scrutiny on this portion."},{"file":"usr/src/cmd/bhyve/pci_nvme.c","line":94,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Done"},{"file":"usr/src/cmd/bhyve/pci_virtio_scsi.c","line":104,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"FYI: We\u0027re neither building nor using virtio-scsi today."},{"file":"usr/src/cmd/bhyve/pci_xhci.c","line":2755,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Is there anything preventing us from freeing uopt twice?"},{"file":"usr/src/cmd/bhyve/pci_xhci.c","line":2755,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"No, I\u0027m going to mask out the conditional one"},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","line":3366,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"jlevon: Do you think it makes sense to put a comment here referencing the ctx-driven GDT limit restoration that you put in place?  (To justify ifdef-ing the FreeBSD logic out)"},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","line":3366,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I think it\u0027s worth a comment yes, given the security implications. Re the LDT you could either comment or add an assert, I don\u0027t mind which."},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","line":3366,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Will do"},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","line":3366,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I\u0027m going with a runtime error, so this doesn\u0027t become an easy DoS panic vector."},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","line":3366,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Hah, yes :)"},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","line":3382,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"We could perhaps choose to verify that vm_run() callers are 64-bit and will never have an LDT loaded."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/contrib/freebsd/x86/specialreg.h","type":"MODIFIED","insertions":238,"deletions":-20},{"file":"usr/src/cmd/bhyve/bhyverun.c","type":"MODIFIED","insertions":88,"deletions":-8},{"file":"usr/src/cmd/bhyve/block_if.c","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"usr/src/cmd/bhyve/consport.c","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"usr/src/cmd/bhyve/dbgport.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/gdb.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/bhyve/iov.c","type":"MODIFIED","insertions":32,"deletions":-25},{"file":"usr/src/cmd/bhyve/iov.h","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/cmd/bhyve/mevent.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/bhyve/pci_ahci.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/bhyve/pci_e82545.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_fbuf.c","type":"MODIFIED","insertions":30,"deletions":-9},{"file":"usr/src/cmd/bhyve/pci_nvme.c","type":"MODIFIED","insertions":88,"deletions":-49},{"file":"usr/src/cmd/bhyve/pci_passthru.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_virtio_block.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/cmd/bhyve/pci_virtio_console.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_net.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_rnd.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_scsi.c","type":"MODIFIED","insertions":48,"deletions":-29},{"file":"usr/src/cmd/bhyve/pci_xhci.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/cmd/bhyve/ps2kbd.c","type":"MODIFIED","insertions":130,"deletions":-227},{"file":"usr/src/cmd/bhyve/rfb.c","type":"MODIFIED","insertions":34,"deletions":-14},{"file":"usr/src/cmd/bhyve/uart_emul.c","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"usr/src/compat/freebsd/amd64/machine/cpufunc.h","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/param.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/specialreg.h","type":"MODIFIED","insertions":16,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/README.sync","type":"MODIFIED","insertions":7,"deletions":-12},{"file":"usr/src/uts/i86pc/io/vmm/amd/svm.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/amd/svm_msr.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmcs.h","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","type":"MODIFIED","insertions":38,"deletions":-13},{"file":"usr/src/uts/i86pc/io/vmm/vmm_instruction_emul.c","type":"MODIFIED","insertions":40,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","type":"MODIFIED","insertions":119,"deletions":-36},{"file":"usr/src/uts/i86pc/io/vmm/x86.h","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":1029,"sizeDeletions":-477},{"number":"2","revision":"48b937337513dabde39b01803f2fe40fc7deea51","parents":["c8b89b2e0ef5e796d5ea1ee45802f7ebc39545f4"],"ref":"refs/changes/81/5581/2","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1550160876,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/contrib/freebsd/x86/specialreg.h","type":"MODIFIED","insertions":238,"deletions":-20},{"file":"usr/src/cmd/bhyve/bhyverun.c","type":"MODIFIED","insertions":88,"deletions":-8},{"file":"usr/src/cmd/bhyve/block_if.c","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"usr/src/cmd/bhyve/consport.c","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"usr/src/cmd/bhyve/dbgport.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/gdb.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/bhyve/iov.c","type":"MODIFIED","insertions":32,"deletions":-25},{"file":"usr/src/cmd/bhyve/iov.h","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/cmd/bhyve/mevent.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/bhyve/pci_ahci.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/bhyve/pci_e82545.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_fbuf.c","type":"MODIFIED","insertions":30,"deletions":-9},{"file":"usr/src/cmd/bhyve/pci_nvme.c","type":"MODIFIED","insertions":88,"deletions":-49},{"file":"usr/src/cmd/bhyve/pci_passthru.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_virtio_block.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/cmd/bhyve/pci_virtio_console.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_net.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_rnd.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_scsi.c","type":"MODIFIED","insertions":48,"deletions":-29},{"file":"usr/src/cmd/bhyve/pci_xhci.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/cmd/bhyve/ps2kbd.c","type":"MODIFIED","insertions":130,"deletions":-227},{"file":"usr/src/cmd/bhyve/rfb.c","type":"MODIFIED","insertions":34,"deletions":-14},{"file":"usr/src/cmd/bhyve/uart_emul.c","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"usr/src/compat/freebsd/amd64/machine/cpufunc.h","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/param.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/specialreg.h","type":"MODIFIED","insertions":16,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/README.sync","type":"MODIFIED","insertions":7,"deletions":-12},{"file":"usr/src/uts/i86pc/io/vmm/amd/svm.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/amd/svm_msr.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmcs.h","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","type":"MODIFIED","insertions":38,"deletions":-13},{"file":"usr/src/uts/i86pc/io/vmm/vmm_instruction_emul.c","type":"MODIFIED","insertions":40,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","type":"MODIFIED","insertions":119,"deletions":-36},{"file":"usr/src/uts/i86pc/io/vmm/x86.h","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":1029,"sizeDeletions":-477},{"number":"3","revision":"b41c1096c4ac94769ec65a87793329d82dd985aa","parents":["c8b89b2e0ef5e796d5ea1ee45802f7ebc39545f4"],"ref":"refs/changes/81/5581/3","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1550165962,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/contrib/freebsd/x86/specialreg.h","type":"MODIFIED","insertions":238,"deletions":-20},{"file":"usr/src/cmd/bhyve/bhyverun.c","type":"MODIFIED","insertions":88,"deletions":-8},{"file":"usr/src/cmd/bhyve/block_if.c","type":"MODIFIED","insertions":15,"deletions":-3},{"file":"usr/src/cmd/bhyve/consport.c","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"usr/src/cmd/bhyve/dbgport.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/gdb.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/bhyve/iov.c","type":"MODIFIED","insertions":32,"deletions":-25},{"file":"usr/src/cmd/bhyve/iov.h","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/cmd/bhyve/mevent.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/bhyve/pci_ahci.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/bhyve/pci_e82545.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_fbuf.c","type":"MODIFIED","insertions":30,"deletions":-9},{"file":"usr/src/cmd/bhyve/pci_nvme.c","type":"MODIFIED","insertions":88,"deletions":-49},{"file":"usr/src/cmd/bhyve/pci_passthru.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_virtio_block.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/cmd/bhyve/pci_virtio_console.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_net.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_rnd.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_scsi.c","type":"MODIFIED","insertions":48,"deletions":-29},{"file":"usr/src/cmd/bhyve/pci_xhci.c","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/cmd/bhyve/ps2kbd.c","type":"MODIFIED","insertions":130,"deletions":-227},{"file":"usr/src/cmd/bhyve/rfb.c","type":"MODIFIED","insertions":34,"deletions":-14},{"file":"usr/src/cmd/bhyve/uart_emul.c","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"usr/src/compat/freebsd/amd64/machine/cpufunc.h","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/param.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/specialreg.h","type":"MODIFIED","insertions":16,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/README.sync","type":"MODIFIED","insertions":7,"deletions":-12},{"file":"usr/src/uts/i86pc/io/vmm/amd/svm.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/amd/svm_msr.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmcs.h","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","type":"MODIFIED","insertions":38,"deletions":-13},{"file":"usr/src/uts/i86pc/io/vmm/vmm_instruction_emul.c","type":"MODIFIED","insertions":40,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","type":"MODIFIED","insertions":119,"deletions":-36},{"file":"usr/src/uts/i86pc/io/vmm/x86.h","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":1035,"sizeDeletions":-477},{"number":"4","revision":"a12dc7e9718fff75f91113fcadf72b5a7e68b810","parents":["cae3a8510282b8d062b677f03a671b304db5e1be"],"ref":"refs/changes/81/5581/4","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1550271893,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/contrib/freebsd/x86/specialreg.h","type":"MODIFIED","insertions":238,"deletions":-20},{"file":"usr/src/cmd/bhyve/bhyverun.c","type":"MODIFIED","insertions":88,"deletions":-8},{"file":"usr/src/cmd/bhyve/block_if.c","type":"MODIFIED","insertions":15,"deletions":-3},{"file":"usr/src/cmd/bhyve/consport.c","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"usr/src/cmd/bhyve/dbgport.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/gdb.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/bhyve/iov.c","type":"MODIFIED","insertions":32,"deletions":-25},{"file":"usr/src/cmd/bhyve/iov.h","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/cmd/bhyve/mevent.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/bhyve/pci_ahci.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/bhyve/pci_e82545.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_fbuf.c","type":"MODIFIED","insertions":30,"deletions":-9},{"file":"usr/src/cmd/bhyve/pci_nvme.c","type":"MODIFIED","insertions":88,"deletions":-49},{"file":"usr/src/cmd/bhyve/pci_passthru.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_virtio_block.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/cmd/bhyve/pci_virtio_console.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_net.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_rnd.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_scsi.c","type":"MODIFIED","insertions":48,"deletions":-29},{"file":"usr/src/cmd/bhyve/pci_xhci.c","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/cmd/bhyve/ps2kbd.c","type":"MODIFIED","insertions":130,"deletions":-227},{"file":"usr/src/cmd/bhyve/rfb.c","type":"MODIFIED","insertions":34,"deletions":-14},{"file":"usr/src/cmd/bhyve/uart_emul.c","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"usr/src/compat/freebsd/amd64/machine/cpufunc.h","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/param.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/specialreg.h","type":"MODIFIED","insertions":16,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/README.sync","type":"MODIFIED","insertions":7,"deletions":-12},{"file":"usr/src/uts/i86pc/io/vmm/amd/svm.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/amd/svm_msr.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmcs.h","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","type":"MODIFIED","insertions":38,"deletions":-13},{"file":"usr/src/uts/i86pc/io/vmm/vmm_instruction_emul.c","type":"MODIFIED","insertions":40,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","type":"MODIFIED","insertions":119,"deletions":-36},{"file":"usr/src/uts/i86pc/io/vmm/x86.h","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":1035,"sizeDeletions":-477},{"number":"5","revision":"a8c4a6fc0f0128877e8328fc6d6eb666e76eb6c9","parents":["cae3a8510282b8d062b677f03a671b304db5e1be"],"ref":"refs/changes/81/5581/5","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1550272778,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550493513,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"comments":[{"file":"usr/src/cmd/bhyve/pci_xhci.c","line":2724,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Presume we\u0027re going to report this issue upstream or somesuch?"},{"file":"usr/src/cmd/bhyve/pci_xhci.c","line":2724,"reviewer":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"message":"https://reviews.freebsd.org/D19202 I think part of this might already be fixed?"},{"file":"usr/src/cmd/bhyve/pci_xhci.c","line":2724,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Both double-free issues found have been addressed upstream already."},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","line":167,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"worth verifying our shiny new cpuid.c code makes sense of this?"},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","line":167,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I\u0027m inclined to defer that until our AMD port is closer to being merged."},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","line":248,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Not sure how useful nits for upstream are, but \"fictitious\""},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","line":248,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I can mention it to upstream.  For something as small as a spelling nit, I\u0027d prefer to just let it ride in our copy until the next sync."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/contrib/freebsd/x86/specialreg.h","type":"MODIFIED","insertions":238,"deletions":-20},{"file":"usr/src/cmd/bhyve/bhyverun.c","type":"MODIFIED","insertions":88,"deletions":-8},{"file":"usr/src/cmd/bhyve/block_if.c","type":"MODIFIED","insertions":15,"deletions":-3},{"file":"usr/src/cmd/bhyve/consport.c","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"usr/src/cmd/bhyve/dbgport.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/gdb.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/bhyve/iov.c","type":"MODIFIED","insertions":32,"deletions":-25},{"file":"usr/src/cmd/bhyve/iov.h","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/cmd/bhyve/mevent.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/bhyve/pci_ahci.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/bhyve/pci_e82545.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_fbuf.c","type":"MODIFIED","insertions":30,"deletions":-9},{"file":"usr/src/cmd/bhyve/pci_nvme.c","type":"MODIFIED","insertions":88,"deletions":-49},{"file":"usr/src/cmd/bhyve/pci_passthru.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_virtio_block.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/cmd/bhyve/pci_virtio_console.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_net.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_rnd.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_scsi.c","type":"MODIFIED","insertions":48,"deletions":-29},{"file":"usr/src/cmd/bhyve/pci_xhci.c","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/cmd/bhyve/ps2kbd.c","type":"MODIFIED","insertions":130,"deletions":-227},{"file":"usr/src/cmd/bhyve/rfb.c","type":"MODIFIED","insertions":34,"deletions":-14},{"file":"usr/src/cmd/bhyve/uart_emul.c","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"usr/src/compat/freebsd/amd64/machine/cpufunc.h","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/param.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/specialreg.h","type":"MODIFIED","insertions":16,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/README.sync","type":"MODIFIED","insertions":7,"deletions":-12},{"file":"usr/src/uts/i86pc/io/vmm/amd/svm.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/amd/svm_msr.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmcs.h","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","type":"MODIFIED","insertions":38,"deletions":-13},{"file":"usr/src/uts/i86pc/io/vmm/vmm_instruction_emul.c","type":"MODIFIED","insertions":40,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","type":"MODIFIED","insertions":119,"deletions":-36},{"file":"usr/src/uts/i86pc/io/vmm/x86.h","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":1035,"sizeDeletions":-477},{"number":"6","revision":"661624557b9e57b5629e1a9c56bb5a3bc4f1d0d1","parents":["cae3a8510282b8d062b677f03a671b304db5e1be"],"ref":"refs/changes/81/5581/6","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1550590917,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/contrib/freebsd/x86/specialreg.h","type":"MODIFIED","insertions":238,"deletions":-20},{"file":"usr/src/cmd/bhyve/bhyverun.c","type":"MODIFIED","insertions":88,"deletions":-8},{"file":"usr/src/cmd/bhyve/block_if.c","type":"MODIFIED","insertions":15,"deletions":-3},{"file":"usr/src/cmd/bhyve/consport.c","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"usr/src/cmd/bhyve/dbgport.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/gdb.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/bhyve/iov.c","type":"MODIFIED","insertions":32,"deletions":-25},{"file":"usr/src/cmd/bhyve/iov.h","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/cmd/bhyve/mevent.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/bhyve/pci_ahci.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/bhyve/pci_e82545.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_fbuf.c","type":"MODIFIED","insertions":30,"deletions":-9},{"file":"usr/src/cmd/bhyve/pci_nvme.c","type":"MODIFIED","insertions":88,"deletions":-49},{"file":"usr/src/cmd/bhyve/pci_passthru.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_virtio_block.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/cmd/bhyve/pci_virtio_console.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_net.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_rnd.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_scsi.c","type":"MODIFIED","insertions":48,"deletions":-29},{"file":"usr/src/cmd/bhyve/pci_xhci.c","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/cmd/bhyve/ps2kbd.c","type":"MODIFIED","insertions":130,"deletions":-227},{"file":"usr/src/cmd/bhyve/rfb.c","type":"MODIFIED","insertions":34,"deletions":-14},{"file":"usr/src/cmd/bhyve/uart_emul.c","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"usr/src/compat/freebsd/amd64/machine/cpufunc.h","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/param.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/specialreg.h","type":"MODIFIED","insertions":16,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/README.sync","type":"MODIFIED","insertions":7,"deletions":-12},{"file":"usr/src/uts/i86pc/io/vmm/amd/svm.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/amd/svm_msr.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmcs.h","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","type":"MODIFIED","insertions":58,"deletions":-13},{"file":"usr/src/uts/i86pc/io/vmm/vmm_instruction_emul.c","type":"MODIFIED","insertions":40,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","type":"MODIFIED","insertions":119,"deletions":-36},{"file":"usr/src/uts/i86pc/io/vmm/x86.h","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":1055,"sizeDeletions":-477},{"number":"7","revision":"b5476ad7e97642a5a3b59b6df83eeea702460aca","parents":["9d82cc6e253729bf201a51afdca5e105cf9c8902"],"ref":"refs/changes/81/5581/7","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1550591016,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550678928,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550591225,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/contrib/freebsd/x86/specialreg.h","type":"MODIFIED","insertions":238,"deletions":-20},{"file":"usr/src/cmd/bhyve/bhyverun.c","type":"MODIFIED","insertions":88,"deletions":-8},{"file":"usr/src/cmd/bhyve/block_if.c","type":"MODIFIED","insertions":15,"deletions":-3},{"file":"usr/src/cmd/bhyve/consport.c","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"usr/src/cmd/bhyve/dbgport.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/gdb.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/bhyve/iov.c","type":"MODIFIED","insertions":32,"deletions":-25},{"file":"usr/src/cmd/bhyve/iov.h","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/cmd/bhyve/mevent.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/bhyve/pci_ahci.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/bhyve/pci_e82545.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_fbuf.c","type":"MODIFIED","insertions":30,"deletions":-9},{"file":"usr/src/cmd/bhyve/pci_nvme.c","type":"MODIFIED","insertions":88,"deletions":-49},{"file":"usr/src/cmd/bhyve/pci_passthru.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_virtio_block.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/cmd/bhyve/pci_virtio_console.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_net.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_rnd.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_scsi.c","type":"MODIFIED","insertions":48,"deletions":-29},{"file":"usr/src/cmd/bhyve/pci_xhci.c","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/cmd/bhyve/ps2kbd.c","type":"MODIFIED","insertions":130,"deletions":-227},{"file":"usr/src/cmd/bhyve/rfb.c","type":"MODIFIED","insertions":34,"deletions":-14},{"file":"usr/src/cmd/bhyve/uart_emul.c","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"usr/src/compat/freebsd/amd64/machine/cpufunc.h","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/param.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/specialreg.h","type":"MODIFIED","insertions":16,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/README.sync","type":"MODIFIED","insertions":7,"deletions":-12},{"file":"usr/src/uts/i86pc/io/vmm/amd/svm.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/amd/svm_msr.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmcs.h","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","type":"MODIFIED","insertions":58,"deletions":-13},{"file":"usr/src/uts/i86pc/io/vmm/vmm_instruction_emul.c","type":"MODIFIED","insertions":40,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","type":"MODIFIED","insertions":119,"deletions":-36},{"file":"usr/src/uts/i86pc/io/vmm/x86.h","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":1055,"sizeDeletions":-477},{"number":"8","revision":"59310af3edf11d0b5dda147ecbead1b9d49cbe43","parents":["d7e5de8ade719deb02b214bb5901ab33c0406f0f"],"ref":"refs/changes/81/5581/8","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1550694111,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1550698481,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550678928,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550591225,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/contrib/freebsd/x86/specialreg.h","type":"MODIFIED","insertions":238,"deletions":-20},{"file":"usr/src/cmd/bhyve/bhyverun.c","type":"MODIFIED","insertions":88,"deletions":-8},{"file":"usr/src/cmd/bhyve/block_if.c","type":"MODIFIED","insertions":15,"deletions":-3},{"file":"usr/src/cmd/bhyve/consport.c","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"usr/src/cmd/bhyve/dbgport.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/gdb.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/bhyve/iov.c","type":"MODIFIED","insertions":32,"deletions":-25},{"file":"usr/src/cmd/bhyve/iov.h","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/cmd/bhyve/mevent.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/bhyve/pci_ahci.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/bhyve/pci_e82545.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_fbuf.c","type":"MODIFIED","insertions":30,"deletions":-9},{"file":"usr/src/cmd/bhyve/pci_nvme.c","type":"MODIFIED","insertions":88,"deletions":-49},{"file":"usr/src/cmd/bhyve/pci_passthru.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_virtio_block.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/cmd/bhyve/pci_virtio_console.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_net.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_rnd.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_scsi.c","type":"MODIFIED","insertions":48,"deletions":-29},{"file":"usr/src/cmd/bhyve/pci_xhci.c","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/cmd/bhyve/ps2kbd.c","type":"MODIFIED","insertions":130,"deletions":-227},{"file":"usr/src/cmd/bhyve/rfb.c","type":"MODIFIED","insertions":34,"deletions":-14},{"file":"usr/src/cmd/bhyve/uart_emul.c","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"usr/src/compat/freebsd/amd64/machine/cpufunc.h","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/param.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/specialreg.h","type":"MODIFIED","insertions":16,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/README.sync","type":"MODIFIED","insertions":7,"deletions":-12},{"file":"usr/src/uts/i86pc/io/vmm/amd/svm.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/amd/svm_msr.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmcs.h","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","type":"MODIFIED","insertions":58,"deletions":-13},{"file":"usr/src/uts/i86pc/io/vmm/vmm_instruction_emul.c","type":"MODIFIED","insertions":40,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","type":"MODIFIED","insertions":119,"deletions":-36},{"file":"usr/src/uts/i86pc/io/vmm/x86.h","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":1055,"sizeDeletions":-477},{"number":"9","revision":"c6a22c86f2d0254060157d591af12a83e37b9a50","parents":["d7e5de8ade719deb02b214bb5901ab33c0406f0f"],"ref":"refs/changes/81/5581/9","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1550698615,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1550698481,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1550699422,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550678928,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550591225,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/contrib/freebsd/x86/specialreg.h","type":"MODIFIED","insertions":238,"deletions":-20},{"file":"usr/src/cmd/bhyve/bhyverun.c","type":"MODIFIED","insertions":88,"deletions":-8},{"file":"usr/src/cmd/bhyve/block_if.c","type":"MODIFIED","insertions":15,"deletions":-3},{"file":"usr/src/cmd/bhyve/consport.c","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"usr/src/cmd/bhyve/dbgport.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/gdb.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/bhyve/iov.c","type":"MODIFIED","insertions":32,"deletions":-25},{"file":"usr/src/cmd/bhyve/iov.h","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/cmd/bhyve/mevent.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/bhyve/pci_ahci.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/bhyve/pci_e82545.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_fbuf.c","type":"MODIFIED","insertions":30,"deletions":-9},{"file":"usr/src/cmd/bhyve/pci_nvme.c","type":"MODIFIED","insertions":88,"deletions":-49},{"file":"usr/src/cmd/bhyve/pci_passthru.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_virtio_block.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/cmd/bhyve/pci_virtio_console.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_net.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_rnd.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_scsi.c","type":"MODIFIED","insertions":48,"deletions":-29},{"file":"usr/src/cmd/bhyve/pci_xhci.c","type":"MODIFIED","insertions":9,"deletions":0},{"file":"usr/src/cmd/bhyve/ps2kbd.c","type":"MODIFIED","insertions":130,"deletions":-227},{"file":"usr/src/cmd/bhyve/rfb.c","type":"MODIFIED","insertions":34,"deletions":-14},{"file":"usr/src/cmd/bhyve/uart_emul.c","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"usr/src/compat/freebsd/amd64/machine/cpufunc.h","type":"MODIFIED","insertions":19,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/param.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/specialreg.h","type":"MODIFIED","insertions":16,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/README.sync","type":"MODIFIED","insertions":7,"deletions":-12},{"file":"usr/src/uts/i86pc/io/vmm/amd/svm.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/amd/svm_msr.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmcs.h","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","type":"MODIFIED","insertions":58,"deletions":-13},{"file":"usr/src/uts/i86pc/io/vmm/vmm_instruction_emul.c","type":"MODIFIED","insertions":40,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","type":"MODIFIED","insertions":119,"deletions":-36},{"file":"usr/src/uts/i86pc/io/vmm/x86.h","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":1055,"sizeDeletions":-477}],"allReviewers":[{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}]}