{"project":"joyent/illumos-joyent","branch":"master","id":"Id75322689f0e889d6cf3f26063c9149a154a2641","number":"2758","subject":"OS-5531 smbios(1M) could decode voltage and curent probes OS-6379 smbios(1M) could decode cooling devices OS-5532 smbios(1M) could decode temperature probes OS-6378 smb_impl.h structs should comment corresponding type OS-6380 overshifted smbios major vers","owner":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"url":"https://cr.joyent.us/2758","commitMessage":"OS-5531 smbios(1M) could decode voltage and curent probes\nOS-6379 smbios(1M) could decode cooling devices\nOS-5532 smbios(1M) could decode temperature probes\nOS-6378 smb_impl.h structs should comment corresponding type\nOS-6380 overshifted smbios major version leads to undershifted data\nOS-6381 smbios(1M) shouldn\u0027t print non-existant bios versions\nReviewed by: Tim Kordas \u003ctim.kordas@joyent.com\u003e\nReviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e\nApproved by: Jason King \u003cjason.king@joyent.com\u003e\n","createdOn":1507666302,"lastUpdated":1507857048,"open":false,"status":"MERGED","comments":[{"timestamp":1507666302,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 1."},{"timestamp":1507670053,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 1:\n\n(3 comments)\n\nNothing showstopping, just some nits."},{"timestamp":1507670194,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1507670245,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 1:\n\n(5 comments)"},{"timestamp":1507677108,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1507768359,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 2."},{"timestamp":1507768368,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(7 comments)"},{"timestamp":1507768584,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 2: Code-Review+1\n\nThe new *NOMINAL* macros make things clearer, for sure."},{"timestamp":1507768947,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1507773213,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1507856859,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 3: Patch Set 2 was rebased."},{"timestamp":1507856976,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1507857048,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Robert Mustacchi"}],"currentPatchSet":{"number":"4","revision":"d75322689f0e889d6cf3f26063c9149a154a2641","parents":["6e2565f3acfa482680efd7dc4568275eec52fcc0"],"ref":"refs/changes/58/2758/4","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1507856976,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507768584,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507768947,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507773213,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"SUBM","value":"1","grantedOn":1507857048,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":15,"deletions":0},{"file":"usr/src/cmd/smbios/smbios.c","type":"MODIFIED","insertions":244,"deletions":-1},{"file":"usr/src/common/smbios/mktables.sh","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/common/smbios/smb_info.c","type":"MODIFIED","insertions":152,"deletions":0},{"file":"usr/src/lib/libsmbios/common/mapfile-vers","type":"MODIFIED","insertions":12,"deletions":0},{"file":"usr/src/uts/common/sys/smbios.h","type":"MODIFIED","insertions":162,"deletions":0},{"file":"usr/src/uts/common/sys/smbios_impl.h","type":"MODIFIED","insertions":169,"deletions":-1}],"sizeInsertions":747,"sizeDeletions":-2},"patchSets":[{"number":"1","revision":"36f3b55a9ee1a9caad6005a070918057f1d4658d","parents":["3df01e00bc5ef3f882d18e8188e4165831f8b694"],"ref":"refs/changes/58/2758/1","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1507666302,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/common/smbios/smb_info.c","line":1335,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"would it be worth putting this \"magic number\" in a macro (and then potentially removing the comment) ?"},{"file":"usr/src/common/smbios/smb_info.c","line":1335,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Yeah, that\u0027s a good idea."},{"file":"usr/src/common/smbios/smb_info.c","line":1371,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"magic-number with comment may be less clear than a macro ? (same as vprobe min-len above)."},{"file":"usr/src/common/smbios/smb_info.c","line":1371,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/common/smbios/smb_info.c","line":1385,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"would this be clearer with a macro and/or possibly with a speed-test function or something ?"},{"file":"usr/src/common/smbios/smb_info.c","line":1385,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/common/smbios/smb_info.c","line":1422,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"magic number, same as above calls."},{"file":"usr/src/common/smbios/smb_info.c","line":1422,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/common/smbios/smb_info.c","line":1436,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"You explained about nominal speed above, is that the case here as well for nominal temperature?"},{"file":"usr/src/common/smbios/smb_info.c","line":1436,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"With all of the macros added, I\u0027ve removed the comments as I hope the macros make it clearer. Let me know if not."},{"file":"usr/src/common/smbios/smb_info.c","line":1458,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"magic number same as others.\n\nsince these are used a bunch, one macro definition of SMBH_MIN_LEN seems like it\u0027d make this clearer."},{"file":"usr/src/common/smbios/smb_info.c","line":1458,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/common/smbios/smb_info.c","line":1472,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Same here."},{"file":"usr/src/common/smbios/smb_info.c","line":1472,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/smbios_impl.h","line":649,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Should this one just go up by itself?"},{"file":"usr/src/uts/common/sys/smbios_impl.h","line":649,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is this asking if this change should be a separate logical commit? If it is, maybe? There are some of the changes here that address the fallout from that. Mostly I had developed and tested it all together, which is why it ended up this way. But if there\u0027s a strong desire, I can try to factor this (and the related changes to smbios(1M)) into their own separately tested and reviewed change."},{"file":"usr/src/uts/common/sys/smbios_impl.h","line":649,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Not a strong desire.  More of a curiosity."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":"usr/src/cmd/smbios/smbios.c","type":"MODIFIED","insertions":244,"deletions":-1},{"file":"usr/src/common/smbios/mktables.sh","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/common/smbios/smb_info.c","type":"MODIFIED","insertions":159,"deletions":0},{"file":"usr/src/lib/libsmbios/common/mapfile-vers","type":"MODIFIED","insertions":12,"deletions":0},{"file":"usr/src/uts/common/sys/smbios.h","type":"MODIFIED","insertions":162,"deletions":0},{"file":"usr/src/uts/common/sys/smbios_impl.h","type":"MODIFIED","insertions":156,"deletions":-1}],"sizeInsertions":741,"sizeDeletions":-2},{"number":"2","revision":"2b966fb2db7cd8a76dfb9027e15e476c3c671974","parents":["3df01e00bc5ef3f882d18e8188e4165831f8b694"],"ref":"refs/changes/58/2758/2","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1507768359,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507773213,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507768584,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507768947,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":"usr/src/cmd/smbios/smbios.c","type":"MODIFIED","insertions":244,"deletions":-1},{"file":"usr/src/common/smbios/mktables.sh","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/common/smbios/smb_info.c","type":"MODIFIED","insertions":152,"deletions":0},{"file":"usr/src/lib/libsmbios/common/mapfile-vers","type":"MODIFIED","insertions":12,"deletions":0},{"file":"usr/src/uts/common/sys/smbios.h","type":"MODIFIED","insertions":162,"deletions":0},{"file":"usr/src/uts/common/sys/smbios_impl.h","type":"MODIFIED","insertions":169,"deletions":-1}],"sizeInsertions":747,"sizeDeletions":-2},{"number":"3","revision":"42a2fdba6a9118869fc591a77ffd22fd263497aa","parents":["6e2565f3acfa482680efd7dc4568275eec52fcc0"],"ref":"refs/changes/58/2758/3","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1507856859,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507773213,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507768584,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507768947,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":"usr/src/cmd/smbios/smbios.c","type":"MODIFIED","insertions":244,"deletions":-1},{"file":"usr/src/common/smbios/mktables.sh","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/common/smbios/smb_info.c","type":"MODIFIED","insertions":152,"deletions":0},{"file":"usr/src/lib/libsmbios/common/mapfile-vers","type":"MODIFIED","insertions":12,"deletions":0},{"file":"usr/src/uts/common/sys/smbios.h","type":"MODIFIED","insertions":162,"deletions":0},{"file":"usr/src/uts/common/sys/smbios_impl.h","type":"MODIFIED","insertions":169,"deletions":-1}],"sizeInsertions":747,"sizeDeletions":-2},{"number":"4","revision":"d75322689f0e889d6cf3f26063c9149a154a2641","parents":["6e2565f3acfa482680efd7dc4568275eec52fcc0"],"ref":"refs/changes/58/2758/4","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1507856976,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1507857048,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507773213,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507768584,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507768947,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":15,"deletions":0},{"file":"usr/src/cmd/smbios/smbios.c","type":"MODIFIED","insertions":244,"deletions":-1},{"file":"usr/src/common/smbios/mktables.sh","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/common/smbios/smb_info.c","type":"MODIFIED","insertions":152,"deletions":0},{"file":"usr/src/lib/libsmbios/common/mapfile-vers","type":"MODIFIED","insertions":12,"deletions":0},{"file":"usr/src/uts/common/sys/smbios.h","type":"MODIFIED","insertions":162,"deletions":0},{"file":"usr/src/uts/common/sys/smbios_impl.h","type":"MODIFIED","insertions":169,"deletions":-1}],"sizeInsertions":747,"sizeDeletions":-2}],"allReviewers":[{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}]}