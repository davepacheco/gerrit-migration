{"project":"joyent/node-docker-registry-client","branch":"master","id":"I136fc82a3ef5f771a6771b92a6fc858953ecefeb","number":"1917","subject":"DOCKER-1050 add redirect handling for docker registry client getManifest() call Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"url":"https://cr.joyent.us/1917","commitMessage":"DOCKER-1050 add redirect handling for docker registry client getManifest() call\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1494269769,"lastUpdated":1512756910,"open":false,"status":"MERGED","comments":[{"timestamp":1494269769,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 1."},{"timestamp":1494269775,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 69b4b4e6851fed2ef04e1e2f0f2caf48296be8e6\n    \n    DOCKER-1050 add redirect handling for docker registry client getManifest() call"},{"timestamp":1494269800,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1494269840,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 2."},{"timestamp":1494269843,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit e9ed15ea7b65921febfcfb9dcdf34f461cdd0f5c\n    \n    DOCKER-1050 add redirect handling for docker registry client getManifest() call"},{"timestamp":1494269864,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1500079902,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 3."},{"timestamp":1500079904,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 428b15d5a38ae6be6a47a12c73b163f44d989ae9\n    \n    DOCKER-1050 add redirect handling for docker registry client getManifest() call"},{"timestamp":1500079928,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1500307950,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1512503046,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 4."},{"timestamp":1512503047,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit a36cadc95b1d63c4ef008e8deda9751a711921e2\n    \n    DOCKER-1050 add redirect handling for docker registry client getManifest() call"},{"timestamp":1512503070,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1512689225,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 5."},{"timestamp":1512689226,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit 0ca436eb9f9ef92cb14d778cb69fe5dda34e186f\n    \n    update redhat image tag - old image tag was a 404"},{"timestamp":1512689329,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1"},{"timestamp":1512755936,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 6."},{"timestamp":1512755937,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit 8369f744ecf4bd25e19d81bacc075acaa5ca250f\n    \n    remove unused vasync.barrier in make request code"},{"timestamp":1512756125,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 6: Code-Review+1 Integration-Approval+1"},{"timestamp":1512756639,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 7."},{"timestamp":1512756640,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 7:\n\nNew commits:\n    \n    commit f0ae4629249a6363ab8900c65206ec338a809b95\n    \n    bump package.json version and add changelog entry"},{"timestamp":1512756871,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 7: Code-Review+1 Integration-Approval+1"},{"timestamp":1512756904,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 7: Code-Review+1 Integration-Approval+1\n\nCarrying forward CR and IA (just bumped package.json version and added changelog entry)."},{"timestamp":1512756910,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Todd Whiteman"}],"currentPatchSet":{"number":"7","revision":"136fc82a3ef5f771a6771b92a6fc858953ecefeb","parents":["09242aa896b9511d91715d964d0d5ae3bc331d09"],"ref":"refs/changes/17/1917/7","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1512756639,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1512756871,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1512756871,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1512756904,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1512756904,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}},{"type":"SUBM","value":"1","grantedOn":1512756910,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/registry-client-v2.js","type":"MODIFIED","insertions":125,"deletions":-60},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/v2.dockerioprivate.test.js","type":"MODIFIED","insertions":45,"deletions":-9},{"file":"test/v2.gcrio.test.js","type":"MODIFIED","insertions":15,"deletions":-12},{"file":"test/v2.redhat.test.js","type":"ADDED","insertions":95,"deletions":0}],"sizeInsertions":285,"sizeDeletions":-82},"patchSets":[{"number":"1","revision":"56d93c9ce902027a6f5ae3f1dc8aed7bd73fb651","parents":["bb2d29750f757dbff4ef371a957d9316e24321c4"],"ref":"refs/changes/17/1917/1","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1494269769,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1494269800,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/registry-client-v2.js","line":1424,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"improper boolean continuation"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/registry-client-v2.js","type":"MODIFIED","insertions":132,"deletions":-61},{"file":"test/v2.amazonecr.test.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/v2.dockerioprivate.test.js","type":"MODIFIED","insertions":45,"deletions":-10},{"file":"test/v2.gcrio.test.js","type":"MODIFIED","insertions":11,"deletions":-2},{"file":"test/v2.redhat.test.js","type":"ADDED","insertions":95,"deletions":0}],"sizeInsertions":285,"sizeDeletions":-75},{"number":"2","revision":"f182cf6ab0cd103e3a2475a4f2012a0763c7562c","parents":["bb2d29750f757dbff4ef371a957d9316e24321c4"],"ref":"refs/changes/17/1917/2","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1494269840,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1494269864,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/registry-client-v2.js","type":"MODIFIED","insertions":132,"deletions":-61},{"file":"test/v2.amazonecr.test.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/v2.dockerioprivate.test.js","type":"MODIFIED","insertions":45,"deletions":-10},{"file":"test/v2.gcrio.test.js","type":"MODIFIED","insertions":11,"deletions":-2},{"file":"test/v2.redhat.test.js","type":"ADDED","insertions":95,"deletions":0}],"sizeInsertions":285,"sizeDeletions":-75},{"number":"3","revision":"671335e65d4ef33765426b55a9b0d0f0497b89b2","parents":["b66d1a442da2a3a6bdad4bcb018acc795b99a165"],"ref":"refs/changes/17/1917/3","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1500079902,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500079928,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/v2.dockerioprivate.test.js","line":182,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I see an error here running the test suite (at least with the test/config.json that I have):\n\nhttps://gist.github.com/trentm/7d2625b4ca6420a34f8c460f52b133da"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/registry-client-v2.js","type":"MODIFIED","insertions":132,"deletions":-61},{"file":"test/v2.amazonecr.test.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/v2.dockerioprivate.test.js","type":"MODIFIED","insertions":45,"deletions":-10},{"file":"test/v2.gcrio.test.js","type":"MODIFIED","insertions":15,"deletions":-12},{"file":"test/v2.redhat.test.js","type":"ADDED","insertions":95,"deletions":0}],"sizeInsertions":289,"sizeDeletions":-85},{"number":"4","revision":"f33158880f15f1a87b10bd60ab0017d3c5640299","parents":["09242aa896b9511d91715d964d0d5ae3bc331d09"],"ref":"refs/changes/17/1917/4","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1512503046,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1512503070,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/registry-client-v2.js","type":"MODIFIED","insertions":132,"deletions":-60},{"file":"test/v2.dockerioprivate.test.js","type":"MODIFIED","insertions":45,"deletions":-9},{"file":"test/v2.gcrio.test.js","type":"MODIFIED","insertions":15,"deletions":-12},{"file":"test/v2.redhat.test.js","type":"ADDED","insertions":95,"deletions":0}],"sizeInsertions":287,"sizeDeletions":-81},{"number":"5","revision":"1d967db1f6bed79ea19bcb848a60baf5140eb66d","parents":["09242aa896b9511d91715d964d0d5ae3bc331d09"],"ref":"refs/changes/17/1917/5","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1512689225,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1512689329,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1512689329,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/registry-client-v2.js","type":"MODIFIED","insertions":132,"deletions":-60},{"file":"test/v2.dockerioprivate.test.js","type":"MODIFIED","insertions":45,"deletions":-9},{"file":"test/v2.gcrio.test.js","type":"MODIFIED","insertions":15,"deletions":-12},{"file":"test/v2.redhat.test.js","type":"ADDED","insertions":95,"deletions":0}],"sizeInsertions":287,"sizeDeletions":-81},{"number":"6","revision":"faaa59803c32f89556fb2c407bd3e6e6d96947b0","parents":["09242aa896b9511d91715d964d0d5ae3bc331d09"],"ref":"refs/changes/17/1917/6","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1512755936,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1512756125,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1512756125,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/registry-client-v2.js","type":"MODIFIED","insertions":125,"deletions":-60},{"file":"test/v2.dockerioprivate.test.js","type":"MODIFIED","insertions":45,"deletions":-9},{"file":"test/v2.gcrio.test.js","type":"MODIFIED","insertions":15,"deletions":-12},{"file":"test/v2.redhat.test.js","type":"ADDED","insertions":95,"deletions":0}],"sizeInsertions":280,"sizeDeletions":-81},{"number":"7","revision":"136fc82a3ef5f771a6771b92a6fc858953ecefeb","parents":["09242aa896b9511d91715d964d0d5ae3bc331d09"],"ref":"refs/changes/17/1917/7","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1512756639,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1512756871,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1512756871,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1512756904,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1512756904,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}},{"type":"SUBM","value":"1","grantedOn":1512756910,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/registry-client-v2.js","type":"MODIFIED","insertions":125,"deletions":-60},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/v2.dockerioprivate.test.js","type":"MODIFIED","insertions":45,"deletions":-9},{"file":"test/v2.gcrio.test.js","type":"MODIFIED","insertions":15,"deletions":-12},{"file":"test/v2.redhat.test.js","type":"ADDED","insertions":95,"deletions":0}],"sizeInsertions":285,"sizeDeletions":-82}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}]}