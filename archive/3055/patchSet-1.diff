From 0429bbbfc41b610ccc65397e344d5446ff7e4548 Mon Sep 17 00:00:00 2001
From: Robert Mustacchi <rm@joyent.com>
Date: Wed, 6 Dec 2017 17:45:42 +0000
Subject: [PATCH] OS-6499 dlled uses wrong link name when the link doesn't
 exist

---
 usr/src/cmd/dlutil/dlled.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/usr/src/cmd/dlutil/dlled.c b/usr/src/cmd/dlutil/dlled.c
index 65f2cdc6f7..f6d6a7aab2 100644
--- a/usr/src/cmd/dlutil/dlled.c
+++ b/usr/src/cmd/dlutil/dlled.c
@@ -268,7 +268,7 @@ main(int argc, char *argv[])
 			if ((status = dladm_name2info(dlled_hdl, argv[i],
 			    &linkid, NULL, NULL, NULL)) != DLADM_STATUS_OK) {
 				(void) fprintf(stderr, "failed to get link "
-				    "id for link %s: %s\n", link,
+				    "id for link %s: %s\n", argv[i],
 				    dladm_status2str(status, dlled_dlerrmsg));
 				return (1);
 			}
-- 
2.21.0

