{"project":"joyent/manatee","branch":"master","topic":"MANATEE-335","id":"I5c0de39da2d8abdfbba804c0f069ba09e6cf1110","number":"2190","subject":"MANATEE-335 Ship both Postgres 9.2 and 9.6 in manta-manatee images MANATEE-348 Include pg_repack for Postgres 9.6 Reviewed by: David Pacheco \u003cdap@joyent.com\u003e Approved by: Joshua M. Clulow \u003cjmc@joyent.com\u003e","owner":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"url":"https://cr.joyent.us/2190","commitMessage":"MANATEE-335 Ship both Postgres 9.2 and 9.6 in manta-manatee images\nMANATEE-348 Include pg_repack for Postgres 9.6\nReviewed by: David Pacheco \u003cdap@joyent.com\u003e\nApproved by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\n","createdOn":1499366294,"lastUpdated":1501886601,"open":false,"status":"MERGED","comments":[{"timestamp":1499366294,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 1."},{"timestamp":1499366323,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1499366341,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Topic set to MANATEE-335"},{"timestamp":1499373924,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\n(4 comments)"},{"timestamp":1499460852,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 1:\n\n(5 comments)"},{"timestamp":1499475550,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 2."},{"timestamp":1499475579,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1499475653,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 2:\n\n(4 comments)\n\nI\u0027ve thrown in support for several different tunables, but I\u0027m probably going to change this a bit to be more flexible with what people can change through SAPI.\n\nI\u0027ve also made some logging changes that made it easier for me to debug what was going on in manatee-sitter."},{"timestamp":1499699974,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2:\n\n(3 comments)"},{"timestamp":1499797630,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 3."},{"timestamp":1499797660,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1499797797,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 3:\n\n(6 comments)"},{"timestamp":1499904504,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 4."},{"timestamp":1499904532,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1499905609,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 5."},{"timestamp":1499905638,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1500946325,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 6."},{"timestamp":1500946354,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1500947149,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 7."},{"timestamp":1500947177,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1501007039,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\n(4 comments)\n\nThanks.  This is looking good!"},{"timestamp":1501009179,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 8."},{"timestamp":1501009200,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 8:\n\n(4 comments)"},{"timestamp":1501009207,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1501009392,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 7:\n\n(1 comment)"},{"timestamp":1501009689,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 8:\n\n(1 comment)"},{"timestamp":1501776459,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 8: Code-Review+1"},{"timestamp":1501886390,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 8: Integration-Approval+1\n\nWith the testing you\u0027ve listed in MANATEE-335 and MANATEE-348, this seems ready to go!"},{"timestamp":1501886522,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 9: Commit message was updated."},{"timestamp":1501886601,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Cody Peter Mello"}],"currentPatchSet":{"number":"9","revision":"45f8cbd29cc642dc32985d140de395faf9c518e6","parents":["c525bc705fff52644471bd5c9ab7286ca368dbfb"],"ref":"refs/changes/90/2190/9","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1501886522,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1501009207,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1501776459,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1501886390,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"SUBM","value":"1","grantedOn":1501886601,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile.postgres","type":"ADDED","insertions":91,"deletions":0},{"file":"lib/postgresMgr.js","type":"MODIFIED","insertions":484,"deletions":-176},{"file":"lib/zfsClient.js","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":583,"sizeDeletions":-179},"patchSets":[{"number":"1","revision":"c2aec2e977112e8c75d1eb1142f1369772eddb41","parents":["c525bc705fff52644471bd5c9ab7286ca368dbfb"],"ref":"refs/changes/90/2190/1","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1499366294,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1499366323,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/postgresMgr.js","line":55,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"How about asserting that this is a string, and that lastIndexOf returns a positive integer?"},{"file":"lib/postgresMgr.js","line":55,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/postgresMgr.js","line":55,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Thanks.  It looks like we\u0027re only asserting that lastIndexOf returns a number, but I really meant positive.  If it\u0027s -1 or 0, I think that\u0027s an invalid version string that I\u0027d like to have us catch right away."},{"file":"lib/postgresMgr.js","line":73,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I think it would be less racey and slightly more efficient to just do the readlink and handle the ENOENT case like the symlink was missing.  That said, I don\u0027t think there\u0027s another possible racer, and efficiency here probably doesn\u0027t matter."},{"file":"lib/postgresMgr.js","line":73,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I did it that way initially, but I wasn\u0027t crazy about the rethrow. Either way is fine by me, though. I\u0027ve updated this to catch the ENOENT instead."},{"file":"lib/postgresMgr.js","line":73,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"It would be nice to wrap this with a VError that provides some context about what Manatee was doing."},{"file":"lib/postgresMgr.js","line":77,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"All of these synchronous system call wrappers throw on errors, right?  I think we should probably be doing something to contain those errors if they occur; or, at least, putting together a more helpful failure message?"},{"file":"lib/postgresMgr.js","line":77,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve made it so that they now get caught and bail out so that manatee-state-machine will retry later."},{"file":"lib/postgresMgr.js","line":77,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"How does that happen?  It looks like this is called by resolveVersionedPaths, which is called from a pipeline function.  I\u0027m not sure how errors here would be caught."},{"file":"lib/postgresMgr.js","line":77,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Each of the calls to resolveVersionedPaths is wrapped in a try/catch, which then calls the callback with the caught error."},{"file":"lib/postgresMgr.js","line":77,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Maybe I\u0027m looking at the wrong thing?  The call at L1139 doesn\u0027t seem to be wrapped in a try/catch, nor the one in _start()?"},{"file":"lib/postgresMgr.js","line":77,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"If you\u0027re scrolling down after reading this comment, then you\u0027re still looking at patchset 1. You\u0027ll want to go to:\n\nhttps://cr.joyent.us/#/c/2190/7/lib/postgresMgr.js@1224\nhttps://cr.joyent.us/#/c/2190/7/lib/postgresMgr.js@1602\nhttps://cr.joyent.us/#/c/2190/7/lib/postgresMgr.js@1798"},{"file":"lib/postgresMgr.js","line":186,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"So these are actually the directory for, and names of, the input _template_ configuration files, right?  Might be worth calling that out with a comment."},{"file":"lib/postgresMgr.js","line":186,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/postgresMgr.js","line":375,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Could we document precisely what \"current\" and \"initialized\" represent?"},{"file":"lib/postgresMgr.js","line":375,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/postgresMgr.js","line":377,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Similarly to above, I think this would be a little more correct if we always tried to read the file, and if that fails, then fallback (rather than checking for existence and not handling the readFileSync error below).\n\nI think it would also be nice if we always verify that our config file is consistent with PG_VERSION.  The case at line 386 seems like it should basically be fatal (or else, we should report that we\u0027re initialized to \"null\" -- there is no database here)."},{"file":"lib/postgresMgr.js","line":377,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve rewritten this to catch the ENOENT instead.\n\nLine 386 is the case where manatee-sitter is running for the very first time, and we need to run initdb to create the database. In this case, we need to set \"initialized\" and \"current\" to the default value for when we run initdb."},{"file":"lib/postgresMgr.js","line":436,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Should \"dbBinDir\" have an underscore prefix like all of the other internal properties?"},{"file":"lib/postgresMgr.js","line":436,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/postgresMgr.js","line":1484,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Assert that \"self._postgresPath\" is a string, now that it\u0027s not unconditionally set?"},{"file":"lib/postgresMgr.js","line":1484,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/postgresMgr.js","line":1649,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"We should probably assert that \"self._pgInitDbPath\" is a string, now that it\u0027s no longer unconditionally set."},{"file":"lib/postgresMgr.js","line":1649,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/postgresMgr.js","type":"MODIFIED","insertions":189,"deletions":-41}],"sizeInsertions":189,"sizeDeletions":-41},{"number":"2","revision":"0c1ad945781242bb0b33267501347a6a5a8d73ce","parents":["c525bc705fff52644471bd5c9ab7286ca368dbfb"],"ref":"refs/changes/90/2190/2","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1499475550,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1499475579,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/postgresMgr.js","line":30,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I think one of these is redundant (and it looks like we previously used a prefix only for this \u0027require\u0027)."},{"file":"lib/postgresMgr.js","line":30,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Ah, I missed that I\u0027d introduced the other one. It\u0027s unused, so I\u0027ll remove it."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/postgresMgr.js","type":"MODIFIED","insertions":400,"deletions":-127},{"file":"lib/zfsClient.js","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":408,"sizeDeletions":-130},{"number":"3","revision":"3b1c81578df678462936e8181661141741aeaa7e","parents":["c525bc705fff52644471bd5c9ab7286ca368dbfb"],"ref":"refs/changes/90/2190/3","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1499797630,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1499797660,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/postgresMgr.js","type":"MODIFIED","insertions":442,"deletions":-130},{"file":"lib/zfsClient.js","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":450,"sizeDeletions":-133},{"number":"4","revision":"887e89ba355195ecbef79f3225c8683fc8f1f1eb","parents":["c525bc705fff52644471bd5c9ab7286ca368dbfb"],"ref":"refs/changes/90/2190/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1499904504,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1499904532,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/postgresMgr.js","type":"MODIFIED","insertions":476,"deletions":-171},{"file":"lib/zfsClient.js","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":484,"sizeDeletions":-174},{"number":"5","revision":"78f66509aeee23899e33b90ba0c2ef6e65380fe0","parents":["c525bc705fff52644471bd5c9ab7286ca368dbfb"],"ref":"refs/changes/90/2190/5","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1499905609,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1499905638,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/postgresMgr.js","type":"MODIFIED","insertions":484,"deletions":-176},{"file":"lib/zfsClient.js","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":492,"sizeDeletions":-179},{"number":"6","revision":"f318466c2b21893740f629c60d04ce6053eb78be","parents":["c525bc705fff52644471bd5c9ab7286ca368dbfb"],"ref":"refs/changes/90/2190/6","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1500946325,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500946354,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Makefile.postgres","type":"ADDED","insertions":69,"deletions":0},{"file":"lib/postgresMgr.js","type":"MODIFIED","insertions":484,"deletions":-176},{"file":"lib/zfsClient.js","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":561,"sizeDeletions":-179},{"number":"7","revision":"0c10dedae0ff232ce123aefbcf85b87f4fa615d9","parents":["c525bc705fff52644471bd5c9ab7286ca368dbfb"],"ref":"refs/changes/90/2190/7","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1500947149,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500947177,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"Makefile.postgres","line":0,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This file is missing the copyright and license notes and an overview comment.  I think it would be worth a sentence or two explaining the interface here (namely, that it\u0027s used by consuming repos like manta-manatee, which targets to use, etc)."},{"file":"Makefile.postgres","line":0,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/postgresMgr.js","line":988,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Can you explain why it\u0027s safe to remove the \"synchronous_commit\" piece here?  How does that property\u0027s value get managed?"},{"file":"lib/postgresMgr.js","line":988,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"This is now taken care of in the .getTunables() method, where we default to \"remote_write\", but possibly override it with a value from pg_overrides.json. Those values then get used by ._updatePgConf(). We could put something like:\n\n    confOpts[self.SYNCHRONOUS_COMMIT] \u003d\n        this._additionalPgOptions[self.SYNCHRONOUS_COMMIT];\n\nBut that\u0027s what ._updatePgConf() is doing for us, so it seemed repetitive."},{"file":"lib/postgresMgr.js","line":1130,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"It doesn\u0027t look like the semantics changed here, but this seems surprising.  Why do we go to read-only when we have a standby, and not if we don\u0027t?"},{"file":"lib/postgresMgr.js","line":1130,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"We also go to read-only mode if there isn\u0027t a standby, and we aren\u0027t doing ONWM, we just don\u0027t configure the synchronous standby names value.\n\nWe then exit read-only mode below when ._waitForStandby() finishes."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Makefile.postgres","type":"ADDED","insertions":69,"deletions":0},{"file":"lib/postgresMgr.js","type":"MODIFIED","insertions":484,"deletions":-176},{"file":"lib/zfsClient.js","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":561,"sizeDeletions":-179},{"number":"8","revision":"5c0de39da2d8abdfbba804c0f069ba09e6cf1110","parents":["c525bc705fff52644471bd5c9ab7286ca368dbfb"],"ref":"refs/changes/90/2190/8","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1501009179,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1501776459,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1501886390,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1501009207,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Makefile.postgres","type":"ADDED","insertions":91,"deletions":0},{"file":"lib/postgresMgr.js","type":"MODIFIED","insertions":484,"deletions":-176},{"file":"lib/zfsClient.js","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":583,"sizeDeletions":-179},{"number":"9","revision":"45f8cbd29cc642dc32985d140de395faf9c518e6","parents":["c525bc705fff52644471bd5c9ab7286ca368dbfb"],"ref":"refs/changes/90/2190/9","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1501886522,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1501776459,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"SUBM","value":"1","grantedOn":1501886601,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1501886390,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1501009207,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile.postgres","type":"ADDED","insertions":91,"deletions":0},{"file":"lib/postgresMgr.js","type":"MODIFIED","insertions":484,"deletions":-176},{"file":"lib/zfsClient.js","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":583,"sizeDeletions":-179}],"allReviewers":[{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}]}