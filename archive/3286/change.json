{"project":"joyent/sdc-cloudapi","branch":"master","id":"I545bc186dbec9db0ab4ce922c53e6e1ef5d74409","number":"3286","subject":"PUBAPI-1475 Want additional tests for PUBAPI-1081 Reviewed by: Dave Eddy \u003cdave.eddy@joyent.com\u003e Approved by: Dave Eddy \u003cdave.eddy@joyent.com\u003e","owner":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"url":"https://cr.joyent.us/3286","commitMessage":"PUBAPI-1475 Want additional tests for PUBAPI-1081\nReviewed by: Dave Eddy \u003cdave.eddy@joyent.com\u003e\nApproved by: Dave Eddy \u003cdave.eddy@joyent.com\u003e\n","createdOn":1517443952,"lastUpdated":1519166743,"open":false,"status":"MERGED","comments":[{"timestamp":1517443952,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Uploaded patch set 1."},{"timestamp":1517443987,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1517521996,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 1:\n\n(22 comments)"},{"timestamp":1517848539,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 1:\n\n(4 comments)"},{"timestamp":1517937159,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 1:\n\n(25 comments)"},{"timestamp":1517937186,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Uploaded patch set 2."},{"timestamp":1517937220,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1517937564,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 2:\n\n(2 comments)"},{"timestamp":1517937685,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Uploaded patch set 3."},{"timestamp":1517937697,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 2:\n\n(2 comments)"},{"timestamp":1517937738,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1517946970,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1517946990,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1517958403,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Uploaded patch set 4."},{"timestamp":1517958410,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1517958442,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1518026389,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 4: Code-Review+1\n\n(1 comment)\n\nThe code looks good to me.  I have one nit about asserts but personally i don\u0027t know if i\u0027m being overly defensive here, or if it is warranted."},{"timestamp":1518453873,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1518453907,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Uploaded patch set 5."},{"timestamp":1518453939,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1518500890,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 5: Code-Review+1\n\nLGTM. Check with Dave too for IA."},{"timestamp":1519156939,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 5:\n\nJust chatted with Dave about this.  I am going to rebase with master because at least one test output will have changed from TRITON-144.\n\nI will rerun tests to make sure I didn\u0027t miss anything.  Then we should be good for IA"},{"timestamp":1519165311,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Uploaded patch set 6."},{"timestamp":1519165351,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1519165893,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 6: Code-Review+1 Integration-Approval+1"},{"timestamp":1519166045,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Uploaded patch set 7: Patch Set 6 was rebased."},{"timestamp":1519166094,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7:\n\n\"make check\" passed ok"},{"timestamp":1519166731,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Uploaded patch set 8: Commit message was updated."},{"timestamp":1519166743,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Michael Zeller"}],"currentPatchSet":{"number":"8","revision":"545bc186dbec9db0ab4ce922c53e6e1ef5d74409","parents":["03830f8ea379758c13afc9267c8545b4efb59ae3"],"ref":"refs/changes/86/3286/8","uploader":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"createdOn":1519166731,"author":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1519165351,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1519165893,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1519165893,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"SUBM","value":"1","grantedOn":1519166743,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"test/common.js","type":"MODIFIED","insertions":74,"deletions":-1},{"file":"test/machines.test.js","type":"MODIFIED","insertions":178,"deletions":-15},{"file":"test/nics.test.js","type":"MODIFIED","insertions":230,"deletions":-52}],"sizeInsertions":482,"sizeDeletions":-68},"patchSets":[{"number":"1","revision":"95bc0142f6088f28ee5cdbda4cd2e04941b2fdc7","parents":["5702a346343ac9ce943d5a853b5328c1abddde84"],"ref":"refs/changes/86/3286/1","uploader":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"createdOn":1517443952,"author":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1517443987,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/common.js","line":8,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"2018"},{"file":"test/common.js","line":8,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/common.js","line":1052,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Add an assertion for this."},{"file":"test/common.js","line":1052,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/common.js","line":1053,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"I would assert this variable also.  `sysinfo` should be present, and there shouldn\u0027t be a situation where it isn\u0027t - which is why that assumption should be asserted."},{"file":"test/common.js","line":1053,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/common.js","line":1056,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"This function is complicated enough it should be named."},{"file":"test/common.js","line":1056,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/common.js","line":1079,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"I know that `t.ifError` is used here - but should this function perhaps just callback with an error and let the caller handle any test failures based on the presence of an error?"},{"file":"test/common.js","line":1079,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/common.js","line":1084,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Assertions."},{"file":"test/common.js","line":1084,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/machines.test.js","line":8,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"2018"},{"file":"test/machines.test.js","line":8,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/machines.test.js","line":164,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name this, and the other funcs added too. I realize this file names few functions, but it\u0027s a start."},{"file":"test/machines.test.js","line":164,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/machines.test.js","line":168,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"These return statements are confusing.  Either use separate if statements with returns at the bottom, or use if/else if/else without any returns."},{"file":"test/machines.test.js","line":168,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/machines.test.js","line":196,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"This could be moved to the \u0027Get test server\u0027 test above."},{"file":"test/machines.test.js","line":196,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/machines.test.js","line":1627,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Remove the extra newline."},{"file":"test/machines.test.js","line":1627,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/nics.test.js","line":8,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"2018"},{"file":"test/nics.test.js","line":8,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/nics.test.js","line":158,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"nit: based on other style choices i\u0027ve seen you make in this file, put a return at the end of this `if` block, and then everything in the `else` block can moved to the left one level of indentation."},{"file":"test/nics.test.js","line":158,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/nics.test.js","line":164,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Nit: maybe use \u00272\u0027 for clarity?"},{"file":"test/nics.test.js","line":164,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/nics.test.js","line":165,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name this."},{"file":"test/nics.test.js","line":165,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/nics.test.js","line":207,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Given that it\u0027s used several times, assign to its own variable.\n\n(ie. var secondInstId \u003d ctx.secondInstId)\n\nIt helps the compiler catch typos in later uses."},{"file":"test/nics.test.js","line":207,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/nics.test.js","line":223,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Likewise here."},{"file":"test/nics.test.js","line":223,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/nics.test.js","line":402,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name this."},{"file":"test/nics.test.js","line":407,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Not needed."},{"file":"test/nics.test.js","line":407,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"line 410 will break if image is undefined."},{"file":"test/nics.test.js","line":407,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"There are many places in the code where this is true, but we settle solely for ifError(). For example, if we return on error here, we\u0027ll have problems some places that fixtures.secondInstId is used anyway. At some point it\u0027s just not worth it.\n\nBut it\u0027s not like this code is incorrect, so leaving it fine too. It\u0027s just not particularly useful."},{"file":"test/nics.test.js","line":407,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"I think going forward we are trying to catch places where tests would crash rather than continue on just failing future tests.  At least that was Julien\u0027s opinion last time we talked about it.  I will leave it as is."},{"file":"test/nics.test.js","line":417,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name this."},{"file":"test/nics.test.js","line":417,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/nics.test.js","line":427,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name this."},{"file":"test/nics.test.js","line":427,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/nics.test.js","line":1864,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name this."},{"file":"test/nics.test.js","line":1864,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/nics.test.js","line":1902,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name this."},{"file":"test/nics.test.js","line":1902,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/nics.test.js","line":1917,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name this."},{"file":"test/nics.test.js","line":1917,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/nics.test.js","line":1941,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name this."},{"file":"test/nics.test.js","line":1941,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/nics.test.js","line":1956,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name this."},{"file":"test/nics.test.js","line":1956,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/common.js","type":"MODIFIED","insertions":51,"deletions":0},{"file":"test/machines.test.js","type":"MODIFIED","insertions":179,"deletions":-12},{"file":"test/nics.test.js","type":"MODIFIED","insertions":212,"deletions":-49}],"sizeInsertions":442,"sizeDeletions":-61},{"number":"2","revision":"b16fb9184e914973568fababcd9ef16840bbfcf9","parents":["5702a346343ac9ce943d5a853b5328c1abddde84"],"ref":"refs/changes/86/3286/2","uploader":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"createdOn":1517937186,"author":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1517937220,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/common.js","line":1077,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"assert.func(callback, \u0027callback\u0027);"},{"file":"test/common.js","line":1077,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"test/common.js","line":1096,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"assert.func(callback, \u0027callback\u0027);"},{"file":"test/common.js","line":1096,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/common.js","type":"MODIFIED","insertions":63,"deletions":-1},{"file":"test/machines.test.js","type":"MODIFIED","insertions":178,"deletions":-15},{"file":"test/nics.test.js","type":"MODIFIED","insertions":229,"deletions":-52}],"sizeInsertions":470,"sizeDeletions":-68},{"number":"3","revision":"3eeb7fa8517d603184ced67bb57d493b29b8ae30","parents":["5702a346343ac9ce943d5a853b5328c1abddde84"],"ref":"refs/changes/86/3286/3","uploader":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"createdOn":1517937685,"author":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1517937738,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1517946990,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1517946990,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"comments":[{"file":"test/common.js","line":1072,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Since this is no longer used, do we need it?\n\nSame with removeTagsFromServer() below."},{"file":"test/common.js","line":1072,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"good catch."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/common.js","type":"MODIFIED","insertions":65,"deletions":-1},{"file":"test/machines.test.js","type":"MODIFIED","insertions":178,"deletions":-15},{"file":"test/nics.test.js","type":"MODIFIED","insertions":229,"deletions":-52}],"sizeInsertions":472,"sizeDeletions":-68},{"number":"4","revision":"307248db94c5d3b5556cc65ea4598d1d8a61e9a2","parents":["5702a346343ac9ce943d5a853b5328c1abddde84"],"ref":"refs/changes/86/3286/4","uploader":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"createdOn":1517958403,"author":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1517958442,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1518026389,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}}],"comments":[{"file":"test/common.js","line":1057,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"I worry about the different places this could crash if any of the properties are undefined.  You could add more asserts but I don\u0027t know if we\u0027re being pedantic at this point... i\u0027d like others opinions on this.  For example:\n\n var mac;\n var ifaces \u003d server.sysinfo[\u0027Network Interfaces\u0027];\n assert.object(ifaces, \u0027ifaces\u0027);\n\n var nic \u003d Object.keys(ifaces).map(function (iname) {\n   return ifaces[iname];\n }).filter(function (iface) {\n   assert.object(iface, \u0027iface\u0027);\n   var nicNames \u003d iface[\u0027NIC Names\u0027];\n   assert.arrayOfString(nicNames, \u0027nicNames\u0027);\n   return nicNames.indexOf(\u0027external\u0027) !\u003d\u003d -1;\n })[0];\n\n assert.object(nic, \u0027nic\u0027);\n mac \u003d nic[\u0027MAC Address\u0027];\n assert.string(mac, \u0027mac\u0027);\n\n return mac;"},{"file":"test/common.js","line":1057,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"This was lifted out of nics.test.js so that it could be shared with machines.test.js\n\nI think asserts will be fine here since we expect everything to be there. So, I will add the asserts and kick off tests again."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/common.js","type":"MODIFIED","insertions":63,"deletions":-1},{"file":"test/machines.test.js","type":"MODIFIED","insertions":178,"deletions":-15},{"file":"test/nics.test.js","type":"MODIFIED","insertions":229,"deletions":-52}],"sizeInsertions":470,"sizeDeletions":-68},{"number":"5","revision":"1a71c742538226cff48dc80e8411fa95641fe322","parents":["5702a346343ac9ce943d5a853b5328c1abddde84"],"ref":"refs/changes/86/3286/5","uploader":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"createdOn":1518453907,"author":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1518453939,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1518500890,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/common.js","type":"MODIFIED","insertions":74,"deletions":-1},{"file":"test/machines.test.js","type":"MODIFIED","insertions":178,"deletions":-15},{"file":"test/nics.test.js","type":"MODIFIED","insertions":229,"deletions":-52}],"sizeInsertions":481,"sizeDeletions":-68},{"number":"6","revision":"7ea81a027826737c3f60e37bf37eb715ddc3befa","parents":["db71da4d670af7db1ccbb86ae505cf970d179413"],"ref":"refs/changes/86/3286/6","uploader":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"createdOn":1519165311,"author":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1519165351,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1519165893,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1519165893,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/common.js","type":"MODIFIED","insertions":74,"deletions":-1},{"file":"test/machines.test.js","type":"MODIFIED","insertions":178,"deletions":-15},{"file":"test/nics.test.js","type":"MODIFIED","insertions":230,"deletions":-52}],"sizeInsertions":482,"sizeDeletions":-68},{"number":"7","revision":"f38921f96e9026aa8a1269d431b505bb231e23aa","parents":["03830f8ea379758c13afc9267c8545b4efb59ae3"],"ref":"refs/changes/86/3286/7","uploader":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"createdOn":1519166045,"author":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1519165351,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1519165893,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1519165893,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/common.js","type":"MODIFIED","insertions":74,"deletions":-1},{"file":"test/machines.test.js","type":"MODIFIED","insertions":178,"deletions":-15},{"file":"test/nics.test.js","type":"MODIFIED","insertions":230,"deletions":-52}],"sizeInsertions":482,"sizeDeletions":-68},{"number":"8","revision":"545bc186dbec9db0ab4ce922c53e6e1ef5d74409","parents":["03830f8ea379758c13afc9267c8545b4efb59ae3"],"ref":"refs/changes/86/3286/8","uploader":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"createdOn":1519166731,"author":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1519165351,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1519165893,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1519165893,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"SUBM","value":"1","grantedOn":1519166743,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"test/common.js","type":"MODIFIED","insertions":74,"deletions":-1},{"file":"test/machines.test.js","type":"MODIFIED","insertions":178,"deletions":-15},{"file":"test/nics.test.js","type":"MODIFIED","insertions":230,"deletions":-52}],"sizeInsertions":482,"sizeDeletions":-68}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}]}