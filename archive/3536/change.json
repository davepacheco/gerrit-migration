{"project":"joyent/illumos-joyent","branch":"master","id":"I3967d7bb10e6d302c162721b7e5ed98bd69744b7","number":"3536","subject":"OS-6606 want memory arena for vmm applications OS-6835 memory DR should be disabled Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Approved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e","owner":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"url":"https://cr.joyent.us/3536","commitMessage":"OS-6606 want memory arena for vmm applications\nOS-6835 memory DR should be disabled\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nApproved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n","createdOn":1520254319,"lastUpdated":1522768533,"open":false,"status":"MERGED","comments":[{"timestamp":1520254319,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 1."},{"timestamp":1520260113,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\n(1 comment)\n\nI have a general comment about the zfs-specific changes here. I understand why you made those changes, but we generally try to minimize the zfs changes that we carry locally. The openzfs code is probably the part of the system that changes the most often upstream, and at times in the past we have struggled with big zfs merges when we are carrying local changes in zfs. If you feel strongly that we need these changes in the zfs code, then we should keep that, but an alternative is to run the zfs-specific changes through the openzfs project and let those merge in to illumos and then our tree whenever that happens upstream. This is just my observation for your consideration, based on past history, and not a requirement for you to change this CR."},{"timestamp":1520262381,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 2."},{"timestamp":1520269989,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1520438712,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 3."},{"timestamp":1520438893,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3:\n\nJerry: for reference, this is some changes Patrick asked for to separate out the arena VMM actually uses from the generic one."},{"timestamp":1521033685,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1521110166,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 4."},{"timestamp":1521116046,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 4: Code-Review+1\n\nAs far as I can see, the latest changes are just merges for other work such as KPTI, so this all looks fine to me."},{"timestamp":1521199979,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 5."},{"timestamp":1521205866,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1521627873,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 6: Patch Set 5 was rebased"},{"timestamp":1522082858,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 6:\n\n(5 comments)"},{"timestamp":1522084814,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 6:\n\n(5 comments)"},{"timestamp":1522084835,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 7."},{"timestamp":1522084993,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 8."},{"timestamp":1522086222,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 8: Code-Review+1"},{"timestamp":1522351984,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 8:\n\n(2 comments)"},{"timestamp":1522360975,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 9."},{"timestamp":1522361065,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 9: Code-Review+1"},{"timestamp":1522361185,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 9: Code-Review+1"},{"timestamp":1522752282,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 10: Patch Set 9 was rebased."},{"timestamp":1522760200,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 11: Patch Set 10 was rebased"},{"timestamp":1522768079,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 11: Integration-Approval+1"},{"timestamp":1522768160,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 12: Commit message was updated."},{"timestamp":1522768533,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by John Levon"}],"currentPatchSet":{"number":"12","revision":"3967d7bb10e6d302c162721b7e5ed98bd69744b7","parents":["976f1c5d53cffc14d4b30bdb72a2e2fa6257b746"],"ref":"refs/changes/36/3536/12","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1522768160,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522361065,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522361185,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1522768079,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1522768533,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/cmd/mdb/common/modules/genunix/memory.c","type":"MODIFIED","insertions":18,"deletions":-19},{"file":"usr/src/uts/common/sys/vnode.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/vm/page_lock.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/vm/page_retire.c","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/common/vm/seg_kmem.c","type":"MODIFIED","insertions":49,"deletions":-34},{"file":"usr/src/uts/common/vm/seg_kmem.h","type":"MODIFIED","insertions":11,"deletions":-7},{"file":"usr/src/uts/i86pc/dboot/dboot_startkern.c","type":"MODIFIED","insertions":2,"deletions":-6},{"file":"usr/src/uts/i86pc/io/vmm/vm/vm_glue.h","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_dev.c","type":"MODIFIED","insertions":2,"deletions":-8},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_vm.c","type":"MODIFIED","insertions":24,"deletions":-16},{"file":"usr/src/uts/i86pc/os/ddi_impl.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":89,"deletions":-124},{"file":"usr/src/uts/i86pc/sys/machparam.h","type":"MODIFIED","insertions":74,"deletions":-158},{"file":"usr/src/uts/i86pc/vm/seg_vmm.c","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/sun4/os/startup.c","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":293,"sizeDeletions":-391},"patchSets":[{"number":"1","revision":"7efbbe3d6b90e0316cae706e92751acd54bdb750","parents":["b609e2f26f288426b6a10c3d5b99dba4f2c51db3"],"ref":"refs/changes/36/3536/1","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1520254319,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/i86pc/sys/machparam.h","line":186,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"since you removed other 32-bit kernel stuff, probably remove this too"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/common/modules/genunix/memory.c","type":"MODIFIED","insertions":18,"deletions":-19},{"file":"usr/src/lib/libzpool/common/kernel.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/libzpool/common/sys/zfs_context.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/fs/zfs/abd.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/common/fs/zfs/arc.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/fs/zfs/zio.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/common/sys/vnode.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/vm/page_lock.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/vm/page_retire.c","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/common/vm/seg_kmem.c","type":"MODIFIED","insertions":85,"deletions":-35},{"file":"usr/src/uts/common/vm/seg_kmem.h","type":"MODIFIED","insertions":10,"deletions":-7},{"file":"usr/src/uts/i86pc/dboot/dboot_startkern.c","type":"MODIFIED","insertions":2,"deletions":-6},{"file":"usr/src/uts/i86pc/io/vmm/vm/vm_glue.h","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_dev.c","type":"MODIFIED","insertions":0,"deletions":-9},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_vm.c","type":"MODIFIED","insertions":3,"deletions":-27},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":90,"deletions":-123},{"file":"usr/src/uts/i86pc/sys/machparam.h","type":"MODIFIED","insertions":74,"deletions":-158},{"file":"usr/src/uts/i86pc/vm/seg_vmm.c","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/sun4/os/startup.c","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":316,"sizeDeletions":-414},{"number":"2","revision":"4d40088965f543ff5524b6686d9da49187fa5c81","parents":["ba46cc6ab9679a2f42c351f5677e46160c3f5976"],"ref":"refs/changes/36/3536/2","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1520262381,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520269989,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/common/modules/genunix/memory.c","type":"MODIFIED","insertions":18,"deletions":-19},{"file":"usr/src/uts/common/sys/vnode.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/vm/page_lock.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/vm/page_retire.c","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/common/vm/seg_kmem.c","type":"MODIFIED","insertions":81,"deletions":-31},{"file":"usr/src/uts/common/vm/seg_kmem.h","type":"MODIFIED","insertions":9,"deletions":-6},{"file":"usr/src/uts/i86pc/dboot/dboot_startkern.c","type":"MODIFIED","insertions":2,"deletions":-6},{"file":"usr/src/uts/i86pc/io/vmm/vm/vm_glue.h","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_dev.c","type":"MODIFIED","insertions":0,"deletions":-9},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_vm.c","type":"MODIFIED","insertions":3,"deletions":-27},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":90,"deletions":-123},{"file":"usr/src/uts/i86pc/sys/machparam.h","type":"MODIFIED","insertions":74,"deletions":-158},{"file":"usr/src/uts/i86pc/vm/seg_vmm.c","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/sun4/os/startup.c","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":296,"sizeDeletions":-396},{"number":"3","revision":"8b9852558ace9837b38bef7d8042d093329615d6","parents":["d895d9b0600a1c4955ffc6aa3a34a22c69154b43"],"ref":"refs/changes/36/3536/3","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1520438712,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521033685,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/common/modules/genunix/memory.c","type":"MODIFIED","insertions":18,"deletions":-19},{"file":"usr/src/uts/common/sys/vnode.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/vm/page_lock.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/vm/page_retire.c","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/common/vm/seg_kmem.c","type":"MODIFIED","insertions":50,"deletions":-34},{"file":"usr/src/uts/common/vm/seg_kmem.h","type":"MODIFIED","insertions":11,"deletions":-7},{"file":"usr/src/uts/i86pc/dboot/dboot_startkern.c","type":"MODIFIED","insertions":2,"deletions":-6},{"file":"usr/src/uts/i86pc/io/vmm/vm/vm_glue.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_dev.c","type":"MODIFIED","insertions":3,"deletions":-8},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_vm.c","type":"MODIFIED","insertions":28,"deletions":-20},{"file":"usr/src/uts/i86pc/os/ddi_impl.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":90,"deletions":-123},{"file":"usr/src/uts/i86pc/sys/machparam.h","type":"MODIFIED","insertions":74,"deletions":-158},{"file":"usr/src/uts/i86pc/vm/seg_vmm.c","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/sun4/os/startup.c","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":298,"sizeDeletions":-393},{"number":"4","revision":"cd99e3b7c4b8eec4ee7355668a1b01d07e4b3ec3","parents":["665777735584dbe75ed3662eee58c78451ec3c00"],"ref":"refs/changes/36/3536/4","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1521110166,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521116046,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/common/modules/genunix/memory.c","type":"MODIFIED","insertions":18,"deletions":-19},{"file":"usr/src/uts/common/sys/vnode.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/vm/page_lock.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/vm/page_retire.c","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/common/vm/seg_kmem.c","type":"MODIFIED","insertions":49,"deletions":-34},{"file":"usr/src/uts/common/vm/seg_kmem.h","type":"MODIFIED","insertions":11,"deletions":-7},{"file":"usr/src/uts/i86pc/dboot/dboot_startkern.c","type":"MODIFIED","insertions":2,"deletions":-6},{"file":"usr/src/uts/i86pc/io/vmm/vm/vm_glue.h","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_dev.c","type":"MODIFIED","insertions":3,"deletions":-8},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_vm.c","type":"MODIFIED","insertions":28,"deletions":-20},{"file":"usr/src/uts/i86pc/os/ddi_impl.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":89,"deletions":-122},{"file":"usr/src/uts/i86pc/sys/machparam.h","type":"MODIFIED","insertions":74,"deletions":-158},{"file":"usr/src/uts/i86pc/vm/seg_vmm.c","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/sun4/os/startup.c","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":297,"sizeDeletions":-393},{"number":"5","revision":"5816387884ebfef67c1febc8ed61ea304941dcf9","parents":["d40d50dab4b6a89f1e840364a47eeaf2ff7c6195"],"ref":"refs/changes/36/3536/5","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1521199979,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521205866,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/common/modules/genunix/memory.c","type":"MODIFIED","insertions":18,"deletions":-19},{"file":"usr/src/uts/common/sys/vnode.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/vm/page_lock.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/vm/page_retire.c","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/common/vm/seg_kmem.c","type":"MODIFIED","insertions":49,"deletions":-34},{"file":"usr/src/uts/common/vm/seg_kmem.h","type":"MODIFIED","insertions":11,"deletions":-7},{"file":"usr/src/uts/i86pc/dboot/dboot_startkern.c","type":"MODIFIED","insertions":2,"deletions":-6},{"file":"usr/src/uts/i86pc/io/vmm/vm/vm_glue.h","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_dev.c","type":"MODIFIED","insertions":3,"deletions":-8},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_vm.c","type":"MODIFIED","insertions":28,"deletions":-20},{"file":"usr/src/uts/i86pc/os/ddi_impl.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":89,"deletions":-122},{"file":"usr/src/uts/i86pc/sys/machparam.h","type":"MODIFIED","insertions":74,"deletions":-158},{"file":"usr/src/uts/i86pc/vm/seg_vmm.c","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/sun4/os/startup.c","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":297,"sizeDeletions":-393},{"number":"6","revision":"be1a36cf2cf0b1d0372868b3c9f007813a3e607f","parents":["80caa2e90432a6929d577979f0d62a577d583b69"],"ref":"refs/changes/36/3536/6","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1521627873,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521205866,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"comments":[{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_vm.c","line":174,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"style nit: Why the \u0027kvmm\u0027 naming here, rather than \u0027vmm\u0027?"},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_vm.c","line":174,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"We have segvmm, and segkvmm, so this is to make clear this is the kernel seg not the user-space one."},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_vm.c","line":174,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I think it\u0027s pretty clean from \u0027arena\u0027 in the name this it distinct from those other too.  Also, departing from the \u0027vmm\u0027 prefix used by the rest of bhyve seems a little unfortunate, but if you\u0027re strongly in favor of keeping this name, I don\u0027t consider it a blocker."},{"file":"usr/src/uts/i86pc/os/startup.c","line":1092,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Maybe include another ticket in this commit noting the removal of the DR stuff?"},{"file":"usr/src/uts/i86pc/os/startup.c","line":1092,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Filed"},{"file":"usr/src/uts/i86pc/os/startup.c","line":1894,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"nit: const?"},{"file":"usr/src/uts/i86pc/os/startup.c","line":1894,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Const integers don\u0027t seem to be much used in the kernel at least, but sure."},{"file":"usr/src/uts/i86pc/os/startup.c","line":1937,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"style nit: use MAX()?"},{"file":"usr/src/uts/i86pc/os/startup.c","line":1937,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Will also fix :1953 then."},{"file":"usr/src/uts/i86pc/sys/machparam.h","line":197,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Commentary: At some point, we should consider changing the name of this define to distinguish it from the _kernelbase-backed one."},{"file":"usr/src/uts/i86pc/sys/machparam.h","line":197,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I hate the param.c shenanigans and would love to kill it all..."},{"file":"usr/src/uts/i86pc/sys/machparam.h","line":197,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Totally fair."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/common/modules/genunix/memory.c","type":"MODIFIED","insertions":18,"deletions":-19},{"file":"usr/src/uts/common/sys/vnode.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/vm/page_lock.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/vm/page_retire.c","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/common/vm/seg_kmem.c","type":"MODIFIED","insertions":49,"deletions":-34},{"file":"usr/src/uts/common/vm/seg_kmem.h","type":"MODIFIED","insertions":11,"deletions":-7},{"file":"usr/src/uts/i86pc/dboot/dboot_startkern.c","type":"MODIFIED","insertions":2,"deletions":-6},{"file":"usr/src/uts/i86pc/io/vmm/vm/vm_glue.h","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_dev.c","type":"MODIFIED","insertions":3,"deletions":-8},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_vm.c","type":"MODIFIED","insertions":28,"deletions":-20},{"file":"usr/src/uts/i86pc/os/ddi_impl.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":89,"deletions":-122},{"file":"usr/src/uts/i86pc/sys/machparam.h","type":"MODIFIED","insertions":74,"deletions":-158},{"file":"usr/src/uts/i86pc/vm/seg_vmm.c","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/sun4/os/startup.c","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":297,"sizeDeletions":-393},{"number":"7","revision":"aebee08450d12f4d049057c8661ab3981fd76797","parents":["85bd3618f496fbfcb9bec6b953b1dd7b26e318ed"],"ref":"refs/changes/36/3536/7","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1522084835,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/cmd/mdb/common/modules/genunix/memory.c","type":"MODIFIED","insertions":18,"deletions":-19},{"file":"usr/src/uts/common/sys/vnode.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/vm/page_lock.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/vm/page_retire.c","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/common/vm/seg_kmem.c","type":"MODIFIED","insertions":49,"deletions":-34},{"file":"usr/src/uts/common/vm/seg_kmem.h","type":"MODIFIED","insertions":11,"deletions":-7},{"file":"usr/src/uts/i86pc/dboot/dboot_startkern.c","type":"MODIFIED","insertions":2,"deletions":-6},{"file":"usr/src/uts/i86pc/io/vmm/vm/vm_glue.h","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_dev.c","type":"MODIFIED","insertions":3,"deletions":-10},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_vm.c","type":"MODIFIED","insertions":28,"deletions":-20},{"file":"usr/src/uts/i86pc/os/ddi_impl.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":89,"deletions":-124},{"file":"usr/src/uts/i86pc/sys/machparam.h","type":"MODIFIED","insertions":74,"deletions":-158},{"file":"usr/src/uts/i86pc/vm/seg_vmm.c","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/sun4/os/startup.c","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":299,"sizeDeletions":-398},{"number":"8","revision":"bedda6151e4b6c79495608f65636a2082a7d4fb7","parents":["85bd3618f496fbfcb9bec6b953b1dd7b26e318ed"],"ref":"refs/changes/36/3536/8","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1522084993,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522086222,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/cmd/mdb/common/modules/genunix/memory.c","type":"MODIFIED","insertions":18,"deletions":-19},{"file":"usr/src/uts/common/sys/vnode.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/vm/page_lock.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/vm/page_retire.c","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/common/vm/seg_kmem.c","type":"MODIFIED","insertions":49,"deletions":-34},{"file":"usr/src/uts/common/vm/seg_kmem.h","type":"MODIFIED","insertions":11,"deletions":-7},{"file":"usr/src/uts/i86pc/dboot/dboot_startkern.c","type":"MODIFIED","insertions":2,"deletions":-6},{"file":"usr/src/uts/i86pc/io/vmm/vm/vm_glue.h","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_dev.c","type":"MODIFIED","insertions":3,"deletions":-9},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_vm.c","type":"MODIFIED","insertions":28,"deletions":-20},{"file":"usr/src/uts/i86pc/os/ddi_impl.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":89,"deletions":-124},{"file":"usr/src/uts/i86pc/sys/machparam.h","type":"MODIFIED","insertions":74,"deletions":-158},{"file":"usr/src/uts/i86pc/vm/seg_vmm.c","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/sun4/os/startup.c","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":299,"sizeDeletions":-397},{"number":"9","revision":"62a7afcb02af1e1ef75863208e5cb29bca65415e","parents":["d0b07e82639d8b5395b7297d94674ff3c006630c"],"ref":"refs/changes/36/3536/9","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1522360975,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522361185,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522361065,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/cmd/mdb/common/modules/genunix/memory.c","type":"MODIFIED","insertions":18,"deletions":-19},{"file":"usr/src/uts/common/sys/vnode.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/vm/page_lock.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/vm/page_retire.c","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/common/vm/seg_kmem.c","type":"MODIFIED","insertions":49,"deletions":-34},{"file":"usr/src/uts/common/vm/seg_kmem.h","type":"MODIFIED","insertions":11,"deletions":-7},{"file":"usr/src/uts/i86pc/dboot/dboot_startkern.c","type":"MODIFIED","insertions":2,"deletions":-6},{"file":"usr/src/uts/i86pc/io/vmm/vm/vm_glue.h","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_dev.c","type":"MODIFIED","insertions":2,"deletions":-8},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_vm.c","type":"MODIFIED","insertions":24,"deletions":-16},{"file":"usr/src/uts/i86pc/os/ddi_impl.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":89,"deletions":-124},{"file":"usr/src/uts/i86pc/sys/machparam.h","type":"MODIFIED","insertions":74,"deletions":-158},{"file":"usr/src/uts/i86pc/vm/seg_vmm.c","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/sun4/os/startup.c","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":293,"sizeDeletions":-391},{"number":"10","revision":"c9e21f33080ecfd48d6e8ec3fbb3c83b65c61da4","parents":["89f28c29187081c8db00a633d949df9b5f2a403d"],"ref":"refs/changes/36/3536/10","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1522752282,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522361185,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522361065,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/cmd/mdb/common/modules/genunix/memory.c","type":"MODIFIED","insertions":18,"deletions":-19},{"file":"usr/src/uts/common/sys/vnode.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/vm/page_lock.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/vm/page_retire.c","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/common/vm/seg_kmem.c","type":"MODIFIED","insertions":49,"deletions":-34},{"file":"usr/src/uts/common/vm/seg_kmem.h","type":"MODIFIED","insertions":11,"deletions":-7},{"file":"usr/src/uts/i86pc/dboot/dboot_startkern.c","type":"MODIFIED","insertions":2,"deletions":-6},{"file":"usr/src/uts/i86pc/io/vmm/vm/vm_glue.h","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_dev.c","type":"MODIFIED","insertions":2,"deletions":-8},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_vm.c","type":"MODIFIED","insertions":24,"deletions":-16},{"file":"usr/src/uts/i86pc/os/ddi_impl.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":89,"deletions":-124},{"file":"usr/src/uts/i86pc/sys/machparam.h","type":"MODIFIED","insertions":74,"deletions":-158},{"file":"usr/src/uts/i86pc/vm/seg_vmm.c","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/sun4/os/startup.c","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":293,"sizeDeletions":-391},{"number":"11","revision":"91375898205b02c2c8ba00f939f6551796eb4ac1","parents":["976f1c5d53cffc14d4b30bdb72a2e2fa6257b746"],"ref":"refs/changes/36/3536/11","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1522760200,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522361185,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522361065,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1522768079,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/cmd/mdb/common/modules/genunix/memory.c","type":"MODIFIED","insertions":18,"deletions":-19},{"file":"usr/src/uts/common/sys/vnode.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/vm/page_lock.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/vm/page_retire.c","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/common/vm/seg_kmem.c","type":"MODIFIED","insertions":49,"deletions":-34},{"file":"usr/src/uts/common/vm/seg_kmem.h","type":"MODIFIED","insertions":11,"deletions":-7},{"file":"usr/src/uts/i86pc/dboot/dboot_startkern.c","type":"MODIFIED","insertions":2,"deletions":-6},{"file":"usr/src/uts/i86pc/io/vmm/vm/vm_glue.h","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_dev.c","type":"MODIFIED","insertions":2,"deletions":-8},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_vm.c","type":"MODIFIED","insertions":24,"deletions":-16},{"file":"usr/src/uts/i86pc/os/ddi_impl.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":89,"deletions":-124},{"file":"usr/src/uts/i86pc/sys/machparam.h","type":"MODIFIED","insertions":74,"deletions":-158},{"file":"usr/src/uts/i86pc/vm/seg_vmm.c","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/sun4/os/startup.c","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":293,"sizeDeletions":-391},{"number":"12","revision":"3967d7bb10e6d302c162721b7e5ed98bd69744b7","parents":["976f1c5d53cffc14d4b30bdb72a2e2fa6257b746"],"ref":"refs/changes/36/3536/12","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1522768160,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522361185,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1522361065,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1522768079,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1522768533,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/cmd/mdb/common/modules/genunix/memory.c","type":"MODIFIED","insertions":18,"deletions":-19},{"file":"usr/src/uts/common/sys/vnode.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/vm/page_lock.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/vm/page_retire.c","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/common/vm/seg_kmem.c","type":"MODIFIED","insertions":49,"deletions":-34},{"file":"usr/src/uts/common/vm/seg_kmem.h","type":"MODIFIED","insertions":11,"deletions":-7},{"file":"usr/src/uts/i86pc/dboot/dboot_startkern.c","type":"MODIFIED","insertions":2,"deletions":-6},{"file":"usr/src/uts/i86pc/io/vmm/vm/vm_glue.h","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_dev.c","type":"MODIFIED","insertions":2,"deletions":-8},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_vm.c","type":"MODIFIED","insertions":24,"deletions":-16},{"file":"usr/src/uts/i86pc/os/ddi_impl.c","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":89,"deletions":-124},{"file":"usr/src/uts/i86pc/sys/machparam.h","type":"MODIFIED","insertions":74,"deletions":-158},{"file":"usr/src/uts/i86pc/vm/seg_vmm.c","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/sun4/os/startup.c","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":293,"sizeDeletions":-391}],"allReviewers":[{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}]}