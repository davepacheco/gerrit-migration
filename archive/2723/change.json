{"project":"joyent/sdc-cloudapi","branch":"master","topic":"tritonnfs","id":"I5b1b2cff847d5471d4f9647a69768ce0671edd1f","number":"2723","subject":"PUBAPI-1448 refactor reusable parts of config and networks endpoints into separate modules Reviewed by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e Approved by: Tr","owner":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"url":"https://cr.joyent.us/2723","commitMessage":"PUBAPI-1448 refactor reusable parts of config and networks endpoints into separate modules\nReviewed by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1507163878,"lastUpdated":1507306918,"open":false,"status":"MERGED","comments":[{"timestamp":1507163878,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 1."},{"timestamp":1507163914,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1507164284,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 1:\n\nAre the tests in a different commit?"},{"timestamp":1507165227,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 1:\n\nThis CR doesn\u0027t come with any test because it doesn\u0027t add any new functionality, or fixes any bug. It is just refactoring code in preparation for upcoming changes that will add volumes features (RFD 26)."},{"timestamp":1507165310,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 1:\n\nI admit I\u0027m a somewhat ambivalent about this commit.\n\nCloudapi needs a cleanup badly, and this is a good starting point, but it also means we have an additional inconsistency in cloudapi in the interim, and git blame is toast."},{"timestamp":1507166146,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Topic set to tritonnfs"},{"timestamp":1507198963,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 1: Code-Review+1\n\n(41 comments)\n\nLGTM.\n\nI commented on things that\u0027d be nice to have (mainly naming anonymous functions). The only thing that is a must-fix is the lack of a license header in lib/middlewares/networks.js"},{"timestamp":1507243253,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\n(2 comments)\n\nAs mentioned in meatspace, using \"middleware\" (singular) would be my pref, but that\u0027s just me.\n\nOnly real thing is the lic/copyright block."},{"timestamp":1507245162,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 1:\n\n(13 comments)\n\nTrent: I renamed all occurence of \"middlewares\" to \"middleware\" (singular form)."},{"timestamp":1507245177,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 2."},{"timestamp":1507245218,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1507245807,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1\n\n(3 comments)"},{"timestamp":1507245997,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 3."},{"timestamp":1507246001,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 2:\n\n(3 comments)"},{"timestamp":1507246043,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1507246074,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1507248776,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1507306450,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 4: Commit message was updated."},{"timestamp":1507306918,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Julien Gilli"}],"currentPatchSet":{"number":"4","revision":"f22cf71e89d96ba40f57eb08d7fef718b0c969fc","parents":["5aeaa78c0204df410b3bd33ce3811da9a7cc8c0f"],"ref":"refs/changes/23/2723/4","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1507306450,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507246043,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507246074,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507246074,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507248776,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507248776,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1507306918,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"lib/config.js","type":"MODIFIED","insertions":80,"deletions":-140},{"file":"lib/endpoints/config.js","type":"ADDED","insertions":165,"deletions":0},{"file":"lib/endpoints/networks.js","type":"ADDED","insertions":603,"deletions":0},{"file":"lib/middleware/networks.js","type":"ADDED","insertions":139,"deletions":0},{"file":"lib/networks.js","type":"MODIFIED","insertions":80,"deletions":-662},{"file":"main.js","type":"MODIFIED","insertions":6,"deletions":-57}],"sizeInsertions":1079,"sizeDeletions":-863},"patchSets":[{"number":"1","revision":"90f746db40eabea88e4a50454a4a981faf19ea66","parents":["5aeaa78c0204df410b3bd33ce3811da9a7cc8c0f"],"ref":"refs/changes/23/2723/1","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1507163878,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507163914,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507198963,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"comments":[{"file":"lib/config.js","line":61,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Add a string as the second arg?"},{"file":"lib/config.js","line":61,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/config.js","line":96,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Ultra trivial, but it\u0027d be nice if this was \"cb\" instead. Callbacks are incredibly common, so the shorthand would be nice."},{"file":"lib/config.js","line":96,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/endpoints/config.js","line":21,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"The app.js changes use camelcase, but here not?"},{"file":"lib/endpoints/config.js","line":21,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/endpoints/networks.js","line":18,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Same thing with app.js using camelcase."},{"file":"lib/endpoints/networks.js","line":18,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/endpoints/networks.js","line":52,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Assert."},{"file":"lib/endpoints/networks.js","line":52,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"This is unchanged code from the previous lib/networks.js file. I\u0027d rather not change that in this CR, and make those changes in a separate CR if we still want them.\n\nThe diff between the previous lib/networks.js file and the new lib/endpoints/network.js file is at https://gist.github.com/misterdjules/b393562a144c9b3d72c3646184c3b650.\n\nThe same applies to most of the comments in this file."},{"file":"lib/endpoints/networks.js","line":61,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Assert."},{"file":"lib/endpoints/networks.js","line":65,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Maybe this belongs on the previous line."},{"file":"lib/endpoints/networks.js","line":89,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Assert this."},{"file":"lib/endpoints/networks.js","line":93,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Maybe name this func."},{"file":"lib/endpoints/networks.js","line":111,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Add assert for this."},{"file":"lib/endpoints/networks.js","line":120,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Could do a \"net.public !\u003d\u003d undefined\" here."},{"file":"lib/endpoints/networks.js","line":135,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name func"},{"file":"lib/endpoints/networks.js","line":164,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name func"},{"file":"lib/endpoints/networks.js","line":171,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name func"},{"file":"lib/endpoints/networks.js","line":178,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name func"},{"file":"lib/endpoints/networks.js","line":195,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Since it\u0027s an array, maybe \"nets\"? Otherwise do the [0] up here and check against null (rather than length) later?"},{"file":"lib/endpoints/networks.js","line":208,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Maybe move the \"var\" down here too?"},{"file":"lib/endpoints/networks.js","line":230,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name func"},{"file":"lib/endpoints/networks.js","line":261,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name func"},{"file":"lib/endpoints/networks.js","line":290,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name func"},{"file":"lib/endpoints/networks.js","line":316,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name func"},{"file":"lib/endpoints/networks.js","line":339,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name func"},{"file":"lib/endpoints/networks.js","line":362,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name func"},{"file":"lib/endpoints/networks.js","line":402,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name func"},{"file":"lib/endpoints/networks.js","line":428,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name func"},{"file":"lib/endpoints/networks.js","line":458,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"In cloudapi the return is usually on the same line as the callback. Same with the rest of this function.\n\nYour call."},{"file":"lib/endpoints/networks.js","line":458,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/endpoints/networks.js","line":470,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"What a confident message! :p\n\nMaybe put this after the following conditional."},{"file":"lib/endpoints/networks.js","line":479,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name func"},{"file":"lib/endpoints/networks.js","line":512,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Missing \"pre\"?"},{"file":"lib/middlewares/networks.js","line":1,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Missing license comment on top."},{"file":"lib/middlewares/networks.js","line":1,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Seconded on the license and copyright block."},{"file":"lib/middlewares/networks.js","line":1,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/middlewares/networks.js","line":4,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"I know cloudapi isn\u0027t consistent here, but it might be nice to have a couple newlines between each function, and also other stuff. Helps see separation when scanning down a file."},{"file":"lib/middlewares/networks.js","line":4,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/middlewares/networks.js","line":47,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name func"},{"file":"lib/middlewares/networks.js","line":58,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name func"},{"file":"lib/middlewares/networks.js","line":62,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name func"},{"file":"lib/middlewares/networks.js","line":66,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name func"},{"file":"lib/middlewares/networks.js","line":83,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name func"},{"file":"lib/middlewares/networks.js","line":97,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name func"},{"file":"lib/networks.js","line":15,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"s/callback/cb/ ?"},{"file":"lib/networks.js","line":15,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/networks.js","line":32,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Return on same line as callbacks?"},{"file":"lib/networks.js","line":32,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/networks.js","line":82,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"cb?"},{"file":"lib/networks.js","line":82,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/networks.js","line":114,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Something about this function makes it feel out of place; not sure what.\n\nMore importantly, perhaps instead of taking the config as an argument, it should call a memoized function in the config module? It would help us reduce out dependency on global state, since very few functions actually need req.config (only eight files use it).\n\nI don\u0027t feel strongly about this. Just an idea."},{"file":"lib/networks.js","line":114,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"What about just defining the different nic tags here and exporting them from these modules? That\u0027s what I\u0027ve done in the latest patch set, let me know what you think."},{"file":"sapi_manifests/cloudapi/template","line":192,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"/me sheds a tear for adminNicTag style. ;)"},{"file":"sapi_manifests/cloudapi/template","line":192,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":":) I moved this out of the configuration, these are now constants in lib/networks.js. Let me know what you think."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"lib/config.js","type":"MODIFIED","insertions":80,"deletions":-140},{"file":"lib/endpoints/config.js","type":"ADDED","insertions":165,"deletions":0},{"file":"lib/endpoints/networks.js","type":"ADDED","insertions":612,"deletions":0},{"file":"lib/middlewares/networks.js","type":"ADDED","insertions":127,"deletions":0},{"file":"lib/networks.js","type":"MODIFIED","insertions":78,"deletions":-655},{"file":"sapi_manifests/cloudapi/template","type":"MODIFIED","insertions":5,"deletions":-2}],"sizeInsertions":1073,"sizeDeletions":-801},{"number":"2","revision":"473246ec2542c8e84750f591edc2925e74da6387","parents":["5aeaa78c0204df410b3bd33ce3811da9a7cc8c0f"],"ref":"refs/changes/23/2723/2","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1507245177,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507245218,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507245807,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507245807,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"comments":[{"file":"lib/networks.js","line":13,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Camelcase."},{"file":"lib/networks.js","line":13,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/networks.js","line":114,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Use the *_NIC_TAG constants here?"},{"file":"lib/networks.js","line":114,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Somehow I forgot to remove that function entirely. It is not needed because these constants are now directly exported from this module.\n\nSorry for the confusion."},{"file":"main.js","line":31,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Camel case."},{"file":"main.js","line":31,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"lib/config.js","type":"MODIFIED","insertions":80,"deletions":-140},{"file":"lib/endpoints/config.js","type":"ADDED","insertions":165,"deletions":0},{"file":"lib/endpoints/networks.js","type":"ADDED","insertions":603,"deletions":0},{"file":"lib/middleware/networks.js","type":"ADDED","insertions":139,"deletions":0},{"file":"lib/networks.js","type":"MODIFIED","insertions":78,"deletions":-653},{"file":"main.js","type":"MODIFIED","insertions":6,"deletions":-57}],"sizeInsertions":1077,"sizeDeletions":-854},{"number":"3","revision":"5b1b2cff847d5471d4f9647a69768ce0671edd1f","parents":["5aeaa78c0204df410b3bd33ce3811da9a7cc8c0f"],"ref":"refs/changes/23/2723/3","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1507245997,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507246043,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507248776,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507248776,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507246074,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507246074,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"lib/config.js","type":"MODIFIED","insertions":80,"deletions":-140},{"file":"lib/endpoints/config.js","type":"ADDED","insertions":165,"deletions":0},{"file":"lib/endpoints/networks.js","type":"ADDED","insertions":603,"deletions":0},{"file":"lib/middleware/networks.js","type":"ADDED","insertions":139,"deletions":0},{"file":"lib/networks.js","type":"MODIFIED","insertions":80,"deletions":-662},{"file":"main.js","type":"MODIFIED","insertions":6,"deletions":-57}],"sizeInsertions":1079,"sizeDeletions":-863},{"number":"4","revision":"f22cf71e89d96ba40f57eb08d7fef718b0c969fc","parents":["5aeaa78c0204df410b3bd33ce3811da9a7cc8c0f"],"ref":"refs/changes/23/2723/4","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1507306450,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507246043,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507248776,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507248776,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1507306918,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507246074,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507246074,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"lib/config.js","type":"MODIFIED","insertions":80,"deletions":-140},{"file":"lib/endpoints/config.js","type":"ADDED","insertions":165,"deletions":0},{"file":"lib/endpoints/networks.js","type":"ADDED","insertions":603,"deletions":0},{"file":"lib/middleware/networks.js","type":"ADDED","insertions":139,"deletions":0},{"file":"lib/networks.js","type":"MODIFIED","insertions":80,"deletions":-662},{"file":"main.js","type":"MODIFIED","insertions":6,"deletions":-57}],"sizeInsertions":1079,"sizeDeletions":-863}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}]}