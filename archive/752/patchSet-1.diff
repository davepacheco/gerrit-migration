From d3908fdcb6820fa034dd616aff51f78d1a324384 Mon Sep 17 00:00:00 2001
From: Trent Mick <trentm@gmail.com>
Date: Thu, 20 Oct 2016 11:49:31 -0700
Subject: [PATCH] DOCKER-953 'docker pull' error message for a download error
 says "Internal error"

---
 lib/backends/sdc/images.js | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/lib/backends/sdc/images.js b/lib/backends/sdc/images.js
index 54ae62d..b973aef 100644
--- a/lib/backends/sdc/images.js
+++ b/lib/backends/sdc/images.js
@@ -1429,6 +1429,11 @@ function pullImage(opts, callback) {
                     + 'to pull %s (%s)', opts.rat.index.name,
                     opts.rat.remoteName, opts.req_id)
             };
+        } else if (err.code === 'DownloadError') {
+            // E.g. OAuth auth to a Docker Registry before DOCKER-771.
+            payload = {
+                status: format('Error downloading %s: %s', imgName, err.message)
+            };
         } else if (err.code === 'NotImplemented') {
             // E.g. OAuth auth to a Docker Registry before DOCKER-771.
             payload = {
-- 
2.21.0

