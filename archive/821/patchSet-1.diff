From c1178e764782ec3c0a7be71a08032209d7010e8b Mon Sep 17 00:00:00 2001
From: Trent Mick <trentm@gmail.com>
Date: Mon, 31 Oct 2016 12:12:36 -0700
Subject: [PATCH] DOCKER-960 include the docker-registry-client error in a
 NotFoundError docker pull error

---
 lib/backends/sdc/images.js | 4 ++--
 package.json               | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/lib/backends/sdc/images.js b/lib/backends/sdc/images.js
index b73b65f..835cdb2 100644
--- a/lib/backends/sdc/images.js
+++ b/lib/backends/sdc/images.js
@@ -1426,8 +1426,8 @@ function pullImage(opts, callback) {
             // E.g. `docker pull quay.io/no-such-user`.
             payload = {
                 status: format('Not Found (404) error from registry %s trying '
-                    + 'to pull %s (%s)', opts.rat.index.name,
-                    opts.rat.remoteName, opts.req_id)
+                    + 'to pull %s: %s (%s)', opts.rat.index.name,
+                    opts.rat.remoteName, err.message, opts.req_id)
             };
         } else if (err.code === 'DownloadError') {
             // E.g. A `DownloadError` from docker-registry-client.
diff --git a/package.json b/package.json
index 681eb91..ee3f6a3 100644
--- a/package.json
+++ b/package.json
@@ -1,13 +1,13 @@
 {
   "name": "sdc-docker",
-  "version": "0.3.1",
+  "version": "0.3.2",
   "author": "Joyent (joyent.com)",
   "private": true,
   "dependencies": {
     "assert-plus": "1.0.0",
     "async": "0.9.0",
     "bunyan": "1.3.2",
-    "docker-registry-client": "3.2.3",
+    "docker-registry-client": "3.2.4",
     "effluent-logger": "git+https://github.com/joshwilsdon/effluent-logger.git#d662f161a07f94045ad2afb45442931511c40e51",
     "fwrule": "git+https://github.com/joyent/sdc-fwrule.git#d1174be",
     "imgmanifest": "git+https://github.com/joyent/node-imgmanifest.git#91e5d80",
-- 
2.21.0

