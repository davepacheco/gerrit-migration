From 1cb72d6edcf96d9a9838d9a21a3f232b13253800 Mon Sep 17 00:00:00 2001
From: Jan Wyszynski <jan.wyszynski@joyent.com>
Date: Mon, 20 Nov 2017 18:04:35 +0000
Subject: [PATCH] MANTA-3491 muskie startup emits error message to stderr

---
 lib/uploads/create.js | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/lib/uploads/create.js b/lib/uploads/create.js
index 805116d..f034135 100644
--- a/lib/uploads/create.js
+++ b/lib/uploads/create.js
@@ -18,7 +18,13 @@ var util = require('util');
 var verror = require('verror');
 var Ajv = require('ajv');
 var ajv = new Ajv({allErrors: true});
-require('ajv-keywords')(ajv);
+
+/*
+ * All keywords provided by ajv-keywords must be explicitly imported here. Any
+ * ajv-keywords used without being imported will be silently ignored during
+ * validation.
+ */
+require('ajv-keywords')(ajv, ['prohibited']);
 
 var auth = require('../auth');
 var common = require('../common');
-- 
2.21.0

