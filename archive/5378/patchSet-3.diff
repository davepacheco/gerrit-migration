From 19052802128d14e682a34225d4dafa2a876b70f5 Mon Sep 17 00:00:00 2001
From: John Levon <john.levon@joyent.com>
Date: Tue, 2 Apr 2019 19:25:57 +0000
Subject: [PATCH] OS-7422 iPXE should be provided directly from joyent/ipxe

---
 Makefile              | 20 --------------------
 targets.json.in       | 10 ----------
 tools/purge-mg-builds |  3 +--
 3 files changed, 1 insertion(+), 32 deletions(-)

diff --git a/Makefile b/Makefile
index 6ccfb43..57a07d6 100644
--- a/Makefile
+++ b/Makefile
@@ -2538,26 +2538,6 @@ clean_manta-deployment:
 
 
 
-#---- sdcboot (boot utilities for sdc-headnode)
-
-_sdcboot_stamp=$(SDCBOOT_BRANCH)-$(TIMESTAMP)-g$(SDCBOOT_SHA)
-SDCBOOT_BITS=$(BITS_DIR)/sdcboot/sdcboot-$(_sdcboot_stamp).tgz
-
-.PHONY: sdcboot
-sdcboot: $(SDCBOOT_BITS)
-
-$(SDCBOOT_BITS): build/sdcboot
-	mkdir -p $(BITS_DIR)
-	(cd build/sdcboot && TIMESTAMP=$(TIMESTAMP) BITS_DIR=$(BITS_DIR) \
-	    gmake pkg release publish)
-	@echo "# Created sdcboot bits (time `date -u +%Y%m%dT%H%M%SZ`):"
-	@ls -l $(SDCBOOT_BITS)
-	@echo ""
-
-clean_sdcboot:
-	$(RM) -rf $(BITS_DIR)/sdcboot
-	(cd build/sdcboot && gmake clean)
-
 #---- firmware-tools (Legacy-mode FDUM facilities and firmware for Joyent HW)
 
 ifeq ($(JOYENT_BUILD),true)
diff --git a/targets.json.in b/targets.json.in
index 388e73b..ea20f4c 100644
--- a/targets.json.in
+++ b/targets.json.in
@@ -55,7 +55,6 @@ function build_headnode_target()
       "sapi",
       "sdc",
       "sdcadm",
-      "sdcboot",
       "ufds",
       "vmapi",
       "workflow"
@@ -1451,15 +1450,6 @@ cat <<EOF
     ]
   },
 
-  "sdcboot": {
-    "build_platform": "20151126T062538Z",
-    "repos": [
-        {"url": "$MG_GIT_PREFIX/sdcboot.git"}
-    ],
-    "public": true,
-    "deps": []
-  },
-
   ${FIRMWARE_TOOLS_ENTRY}
   ${HEADNODE_TARGETS}
 
diff --git a/tools/purge-mg-builds b/tools/purge-mg-builds
index 8fcf5d5..2491efa 100755
--- a/tools/purge-mg-builds
+++ b/tools/purge-mg-builds
@@ -6,7 +6,7 @@
 #
 
 #
-# Copyright 2016 Joyent, Inc.
+# Copyright 2019, Joyent, Inc.
 #
 
 #
@@ -145,7 +145,6 @@ TTL_DAYS_FROM_NAME='{
     "sdc-system-tests": 365,
     "sdc-zookeeper": 365,
     "sdcadm": 365,
-    "sdcboot": 365,
     "smartlogin": 365,
     "smartos": 365,
     "ufds": 365,
-- 
2.21.0

