{"project":"joyent/mountain-gorilla","branch":"master","topic":"newboot","id":"I4238369da76d34b6f9b5d81c7c4ef568c230b9d0","number":"5378","subject":"OS-7422 iPXE should be provided directly from joyent/ipxe Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"url":"https://cr.joyent.us/5378","commitMessage":"OS-7422 iPXE should be provided directly from joyent/ipxe\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1547736243,"lastUpdated":1554714286,"open":false,"status":"MERGED","comments":[{"timestamp":1547736243,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 1."},{"timestamp":1547736264,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\nPreliminary webrev for newboot changes"},{"timestamp":1547840626,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1548363717,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1548842496,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1:\n\nDo we have to add another component Mountain Gorilla?\n\nThe build changes to use eng.git should be pretty minimal. Here\u0027s what I\u0027ve got in the lullaby development repo for sdcboot:\nhttps://github.com/joyent/sdcboot/compare/master...timfoster:master\n\nWith that similar changes, you ought to able to simply:\n\n$ make all release publish bits-upload\n\nand have that just work, rather than going through MG."},{"timestamp":1548844370,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\nWe\u0027re not going to add to MG now your stuff has landed.\nI\u0027ve not got around to attempting a conversion yet as\nit means I need a new dev zone."},{"timestamp":1551785006,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Topic set to newboot"},{"timestamp":1553953967,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 2: Patch Set 1 was rebased"},{"timestamp":1554233697,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 3."},{"timestamp":1554233759,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3:\n\nSorry, realised I still had the version up with the ipxe introduction, which we shouldn\u0027t need as I since lullabied that repo. This should be current..."},{"timestamp":1554239005,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1554244452,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3: Code-Review-1\n\n(2 comments)"},{"timestamp":1554246105,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 4."},{"timestamp":1554246913,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1\n\nLGTM, assuming the sdc-headnode.git changes to use ipxe rather than sdcboot go in at the same time."},{"timestamp":1554312725,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1554714286,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by John Levon"}],"currentPatchSet":{"number":"5","revision":"4238369da76d34b6f9b5d81c7c4ef568c230b9d0","parents":["6e513c06a7766942aa746c50dd9626ac733f8694"],"ref":"refs/changes/78/5378/5","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1554312725,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554246913,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554246913,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1554714286,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":0,"deletions":-20},{"file":"targets.json.in","type":"MODIFIED","insertions":10,"deletions":-10},{"file":"tools/purge-mg-builds","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":12,"sizeDeletions":-32},"patchSets":[{"number":"1","revision":"5d2cca4c8c4d5b36376d6ef901284f9cc19aa813","parents":["23fe17f1d6299103b2686d9f8f85cb5686addd0f"],"ref":"refs/changes/78/5378/1","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1547736243,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547840626,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1548363717,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":12,"deletions":-12},{"file":"targets.json.in","type":"MODIFIED","insertions":10,"deletions":-10},{"file":"tools/purge-mg-builds","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":23,"sizeDeletions":-23},{"number":"2","revision":"504e09bb99cdbbe99739ebc5241b40e07a8ae333","parents":["6e513c06a7766942aa746c50dd9626ac733f8694"],"ref":"refs/changes/78/5378/2","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1553953967,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547840626,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1548363717,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":12,"deletions":-12},{"file":"targets.json.in","type":"MODIFIED","insertions":10,"deletions":-10},{"file":"tools/purge-mg-builds","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":23,"sizeDeletions":-23},{"number":"3","revision":"19052802128d14e682a34225d4dafa2a876b70f5","parents":["6e513c06a7766942aa746c50dd9626ac733f8694"],"ref":"refs/changes/78/5378/3","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1554233697,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554239005,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1554244452,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"targets.json.in","line":1452,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I think still *do* want a dummy \"ipxe\" entry here in targets.json.in because currently the sdcrelease process uses the keys in targets.json.in to determine which repos to branch and which jenkins jobs to build (per https://mo.joyent.com/docs/engdoc/master/sdcrelease/index.html#step-5-run-jenkins-builds and https://mo.joyent.com/docs/engdoc/master/sdcrelease/index.html#step-3-branch-all-the-repos).\n\nEventually the release process will switch to using the repos.json metadata (which you\u0027ve covered in your triton.git change), but there might be a bi-weekly release where that process still uses targets.json.in.\n\nThe dummy entry should at least have the \"ipxe\" name and the \"repos\" and \"public\":true fields filled out."},{"file":"tools/purge-mg-builds","line":114,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"should we add \"ipxe\" here?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":0,"deletions":-20},{"file":"targets.json.in","type":"MODIFIED","insertions":0,"deletions":-10},{"file":"tools/purge-mg-builds","type":"MODIFIED","insertions":1,"deletions":-2}],"sizeInsertions":1,"sizeDeletions":-32},{"number":"4","revision":"95b81bf80ed8f4ff7d1af4fc8a0322ba3de78c05","parents":["6e513c06a7766942aa746c50dd9626ac733f8694"],"ref":"refs/changes/78/5378/4","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1554246105,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554246913,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554246913,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":0,"deletions":-20},{"file":"targets.json.in","type":"MODIFIED","insertions":10,"deletions":-10},{"file":"tools/purge-mg-builds","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":12,"sizeDeletions":-32},{"number":"5","revision":"4238369da76d34b6f9b5d81c7c4ef568c230b9d0","parents":["6e513c06a7766942aa746c50dd9626ac733f8694"],"ref":"refs/changes/78/5378/5","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1554312725,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554246913,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554246913,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1554714286,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":0,"deletions":-20},{"file":"targets.json.in","type":"MODIFIED","insertions":10,"deletions":-10},{"file":"tools/purge-mg-builds","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":12,"sizeDeletions":-32}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}]}