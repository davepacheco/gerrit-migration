{"project":"joyent/node-manta","branch":"master","id":"I251f503ba02a2ca364c8ff46f805def4663c9010","number":"1997","subject":"joyent/node-manta#308 `mmpu commit` does not parse options joyent/node-manta#309 MPU tests are out of sync with Muskie master branch implementation Reviewed by: Richard Kiene \u003crichard.kiene@joyent.com\u003e Approved by: Richard Kiene \u003crichard.kiene@joyent.com\u003e","owner":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"url":"https://cr.joyent.us/1997","commitMessage":"joyent/node-manta#308 `mmpu commit` does not parse options\njoyent/node-manta#309 MPU tests are out of sync with Muskie master branch implementation\nReviewed by: Richard Kiene \u003crichard.kiene@joyent.com\u003e\nApproved by: Richard Kiene \u003crichard.kiene@joyent.com\u003e\n","createdOn":1495663557,"lastUpdated":1495669217,"open":false,"status":"MERGED","comments":[{"timestamp":1495663557,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Uploaded patch set 1."},{"timestamp":1495663589,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1495663801,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Uploaded patch set 2."},{"timestamp":1495663832,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1495666602,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 2:\n\nThis change includes fixes for joyent/node-manta#308 and joyent/node-manta#309. Additionally, I removed an extraneous string in the error message printed when an error is returned to the client, and added the options block for `mmpu commit` back into the help message.\n\nTesting:\nI ran the node-manta test suite against the most recent muskie master branch. I also did additional testing for each change.\n\nTesting for joyent/node-manta#308:\nI manually tried commits without flags, with flags before the arguments, flags after the arguments, and a mixture of flags before and after the arguments. Testing notes are here: https://github.com/joyent/node-manta/issues/308#issuecomment-303875035.\n\n\nTesting for joyent/node-manta#309:\nThe test suite will not successfully pass against the most recent version of muskie prior to these fixes; it now passes (and still verifies that uploads are committed or aborted using the `result` field from an `mpu-get` API call)."},{"timestamp":1495667196,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1495668496,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Uploaded patch set 3."},{"timestamp":1495668522,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1495669140,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1495669213,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 3:\n\nBrian Bennett tested patchset 2 with the script ops is using to sanity check MPU in new deployments as well."},{"timestamp":1495669217,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jordan Hendricks"}],"currentPatchSet":{"number":"3","revision":"251f503ba02a2ca364c8ff46f805def4663c9010","parents":["454eb6e46bace3b3142c1c62c08537ca88787afa"],"ref":"refs/changes/97/1997/3","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1495668496,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1495668522,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1495669140,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1495669140,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"SUBM","value":"1","grantedOn":1495669217,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"bin/mmpu","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"lib/client.js","type":"MODIFIED","insertions":0,"deletions":-4},{"file":"test/client.test.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"test/mmpu.test.js","type":"MODIFIED","insertions":4,"deletions":-4}],"sizeInsertions":16,"sizeDeletions":-13},"patchSets":[{"number":"1","revision":"b5b736e5e5e79fa21868512d0504be6c94dfc30a","parents":["454eb6e46bace3b3142c1c62c08537ca88787afa"],"ref":"refs/changes/97/1997/1","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1495663557,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1495663589,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"bin/mmpu","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/client.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"test/client.test.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"test/mmpu.test.js","type":"MODIFIED","insertions":4,"deletions":-4}],"sizeInsertions":14,"sizeDeletions":-11},{"number":"2","revision":"e74f1b7f7572a0bf91065d8138cf6830d40f950b","parents":["454eb6e46bace3b3142c1c62c08537ca88787afa"],"ref":"refs/changes/97/1997/2","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1495663801,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1495663832,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1495667196,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1495667196,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"bin/mmpu","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/client.js","type":"MODIFIED","insertions":0,"deletions":-4},{"file":"test/client.test.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"test/mmpu.test.js","type":"MODIFIED","insertions":4,"deletions":-4}],"sizeInsertions":11,"sizeDeletions":-12},{"number":"3","revision":"251f503ba02a2ca364c8ff46f805def4663c9010","parents":["454eb6e46bace3b3142c1c62c08537ca88787afa"],"ref":"refs/changes/97/1997/3","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1495668496,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1495668522,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1495669140,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1495669140,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"SUBM","value":"1","grantedOn":1495669217,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"bin/mmpu","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"lib/client.js","type":"MODIFIED","insertions":0,"deletions":-4},{"file":"test/client.test.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"test/mmpu.test.js","type":"MODIFIED","insertions":4,"deletions":-4}],"sizeInsertions":16,"sizeDeletions":-13}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}]}