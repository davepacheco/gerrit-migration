From 88e2ad882922f53f1c185aff2912d7d7008ea03c Mon Sep 17 00:00:00 2001
From: Bryan Cantrill <bryan@joyent.com>
Date: Sat, 16 Sep 2017 16:28:24 +0000
Subject: [PATCH] OS-6350 4K zfs_abd_chunk_size is inducing excessive ABD waste

---
 usr/src/uts/common/fs/zfs/abd.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/usr/src/uts/common/fs/zfs/abd.c b/usr/src/uts/common/fs/zfs/abd.c
index 4d7b2cb56a..92e7814df5 100644
--- a/usr/src/uts/common/fs/zfs/abd.c
+++ b/usr/src/uts/common/fs/zfs/abd.c
@@ -148,7 +148,7 @@ boolean_t zfs_abd_scatter_enabled = B_TRUE;
  * will cause the machine to panic if you change it and try to access the data
  * within a scattered ABD.
  */
-size_t zfs_abd_chunk_size = 4096;
+size_t zfs_abd_chunk_size = 1024;
 
 #ifdef _KERNEL
 extern vmem_t *zio_alloc_arena;
-- 
2.21.0

