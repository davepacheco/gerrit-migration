commit 9e24fb4685d755bcdc2fe1db560d5e050aa879b1 (refs/changes/68/1968/3)
Author: Chris Burroughs <chris.burroughs@gmail.com>
Date:   2017-05-19T15:55:31-04:00 (2 years, 5 months ago)
    
    TOOLS-1777 support configuring MG:jenkins-build output directory

diff --git a/tools/jenkins-build b/tools/jenkins-build
index 8d46b8b..b650eb7 100755
--- a/tools/jenkins-build
+++ b/tools/jenkins-build
@@ -6,7 +6,7 @@
 #
 
 #
-# Copyright (c) 2014, Joyent, Inc.
+# Copyright (c) 2017, Joyent, Inc.
 #
 
 #
@@ -140,11 +140,13 @@ fi
 if [[ ! -f targets.json ]]; then
     bash < targets.json.in | json > targets.json
 fi
-IS_PUBLIC=$(json < targets.json ${JOB_NAME}.public)
-if [[ ${IS_PUBLIC} == "true" ]]; then
-    JENKINS_OUTPUT_BASE="/public/builds"
-else
-    JENKINS_OUTPUT_BASE="/stor/builds"
+if [[ -z ${JENKINS_OUTPUT_BASE} ]]; then
+    IS_PUBLIC=$(json < targets.json ${JOB_NAME}.public)
+    if [[ ${IS_PUBLIC} == "true" ]]; then
+        JENKINS_OUTPUT_BASE="/public/builds"
+    else
+        JENKINS_OUTPUT_BASE="/stor/builds"
+    fi
 fi
 
 if [[ -z ${JOYENT_BUILD} || ${JOYENT_BUILD} == "true" ]]; then
