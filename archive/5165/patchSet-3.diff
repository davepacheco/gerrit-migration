From a89eefbbd548f9f96e823aaebb744fdf2fc1c794 Mon Sep 17 00:00:00 2001
From: Robert Mustacchi <rm@joyent.com>
Date: Fri, 30 Nov 2018 03:55:10 +0000
Subject: [PATCH] OS-7412 Need idnkit for g11n

---
 Makefile                  |  11 +++++++++--
 idnkit/Makefile           |  24 ++++++++++++++++++++++++
 idnkit/idnkit-2.3.tar.bz2 | Bin 0 -> 1473267 bytes
 3 files changed, 33 insertions(+), 2 deletions(-)
 create mode 100644 idnkit/Makefile
 create mode 100644 idnkit/idnkit-2.3.tar.bz2

diff --git a/Makefile b/Makefile
index 8ac93cd..3f7db58 100644
--- a/Makefile
+++ b/Makefile
@@ -22,6 +22,12 @@ include $(CURDIR)/../../build.env
 BASE =		$(CURDIR)
 DESTDIR =	$(BASE)/proto
 
+#
+# This contains items that we only build during the strap build itself.
+#
+STRAP_ONLY = \
+	idnkit
+
 ifeq ($(STRAP),strap)
 
 STRAPPROTO =	$(DESTDIR)
@@ -41,7 +47,8 @@ SUBDIRS = \
 	nss-nspr \
 	openssl1x \
 	perl \
-	$(EXTRA_COMPILERS)
+	$(EXTRA_COMPILERS) \
+	$(STRAP_ONLY)
 
 STRAPFIX +=	$(PRIMARY_COMPILER) $(EXTRA_COMPILERS)
 STRAPFIX_SUBDIRS=$(STRAPFIX:%=%.strapfix)
@@ -224,7 +231,7 @@ install: $(PRIMARY_COMPILER) $(SUBDIRS)
 endif
 
 clean:
-	-for dir in $(PRIMARY_COMPILER) $(SUBDIRS) binutils; \
+	-for dir in $(PRIMARY_COMPILER) $(SUBDIRS) $(STRAP_ONLY) binutils; \
 	    do (cd $$dir; $(MAKE) DESTDIR=$(DESTDIR) clean); done
 	-rm -rf proto
 
diff --git a/idnkit/Makefile b/idnkit/Makefile
new file mode 100644
index 0000000..74043d8
--- /dev/null
+++ b/idnkit/Makefile
@@ -0,0 +1,24 @@
+#
+# This file and its contents are supplied under the terms of the
+# Common Development and Distribution License ("CDDL"), version 1.0.
+# You may only use this file in accordance with the terms of version
+# 1.0 of the CDDL.
+#
+# A full copy of the text of the CDDL should have accompanied this
+# source.  A copy of the CDDL is also available via the Internet at
+# http://www.illumos.org/license/CDDL.
+#
+
+#
+# Copyright 2018 Joyent, Inc.
+#
+
+VER = idnkit-2.3
+
+include ../Makefile.defs
+
+TARBALL =		$(VER).tar.bz2
+TARBALL_COMPRESS =	-j
+
+include ../Makefile.targ
+include ../Makefile.targ.autoconf
diff --git a/idnkit/idnkit-2.3.tar.bz2 b/idnkit/idnkit-2.3.tar.bz2
new file mode 100644
index 0000000..73b176e
Binary files /dev/null and b/idnkit/idnkit-2.3.tar.bz2 differ
-- 
2.21.0

