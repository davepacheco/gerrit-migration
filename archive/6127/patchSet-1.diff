From 7885bc0ab06457ee2757342e73ba79903b7bb067 Mon Sep 17 00:00:00 2001
From: Brian Bennett <brian.bennett@joyent.com>
Date: Wed, 17 Apr 2019 12:39:19 -0700
Subject: [PATCH] TRITON-1415 sdc-image-sync should only put packages in one
 time.

---
 tools/bin/sdc-image-sync | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/tools/bin/sdc-image-sync b/tools/bin/sdc-image-sync
index a44d5de2..a4c74f44 100755
--- a/tools/bin/sdc-image-sync
+++ b/tools/bin/sdc-image-sync
@@ -81,7 +81,7 @@ function update_sdc_zone_pkgs()
 	    -e 'this.smartdc_role=(this.tags.smartdc_role || "-")' \
 	    -e 'this.package_name=(this.package_name || "-")' \
 	    -c 'this.tags.smartdc_role && this.tags.smartdc_role!=="nat"' \
-	    -a smartdc_role package_name | \
+	    -a smartdc_role package_name | sort -u | \
 	    while read role pkg
 	    do
 		# If this pkg is not in the config file, add it.
-- 
2.21.0

