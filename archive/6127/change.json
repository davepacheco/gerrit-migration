{"project":"joyent/sdc-headnode","branch":"master","id":"I9aa16b9af114c9739fd6981bb964bd0bacff12b3","number":"6127","subject":"TRITON-1415 sdc-image-sync doesn\u0027t add packages correctly and should stop trying","owner":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"url":"https://cr.joyent.us/6127","commitMessage":"TRITON-1415 sdc-image-sync doesn\u0027t add packages correctly and should stop trying\n","createdOn":1555529961,"lastUpdated":1556824014,"open":false,"status":"MERGED","comments":[{"timestamp":1555529961,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Uploaded patch set 1."},{"timestamp":1555529963,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit ddce486345ff41acf84ac0d64b2b13bea3c5848b\n    \n    1"},{"timestamp":1555530047,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1555532630,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Uploaded patch set 2."},{"timestamp":1555532631,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit d42b9e797c933a32f644a83807252eac0e5b5e65\n    \n    2\n    \n    commit f1c739a5919311c059ab763b5a383f84567f7eaf\n    \n    1"},{"timestamp":1555532712,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1555550837,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Uploaded patch set 3."},{"timestamp":1555550838,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit f635487ce98cc6ad1ff0136ff03ed0d9a7ae2bd9\n    \n    2\n    \n    commit f1c739a5919311c059ab763b5a383f84567f7eaf\n    \n    1"},{"timestamp":1555550921,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1555550996,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Uploaded patch set 4."},{"timestamp":1555550996,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit ae30f509a48ce08f2161da9cdc77edc56633522e\n    \n    2\n    \n    commit f1c739a5919311c059ab763b5a383f84567f7eaf\n    \n    1"},{"timestamp":1555551091,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1556819360,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1556822029,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Uploaded patch set 5."},{"timestamp":1556822029,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit fb709283c28b2c06a831449498f3c6db033b5cf3\n    \n    3"},{"timestamp":1556822068,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing-1\n\n(2 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1556822306,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Uploaded patch set 6."},{"timestamp":1556822307,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit be85bc3d13477db8af2e80651e0cdc0f040d3843\n    \n    5"},{"timestamp":1556822328,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Uploaded patch set 7: Commit message was updated."},{"timestamp":1556822349,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing-1\n\n(3 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1556822497,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Uploaded patch set 8."},{"timestamp":1556822497,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Patch Set 8:\n\nNew commits:\n    \n    commit eb094436b8996378398dd63341ad67070ec59f9a\n    \n    6"},{"timestamp":1556822538,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing-1\n\n(3 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1556822582,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Uploaded patch set 9."},{"timestamp":1556822583,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Patch Set 9:\n\nNew commits:\n    \n    commit be85bc3d13477db8af2e80651e0cdc0f040d3843\n    \n    5\n    \n    commit fb709283c28b2c06a831449498f3c6db033b5cf3\n    \n    3\n    \n    commit ae30f509a48ce08f2161da9cdc77edc56633522e\n    \n    2\n    \n    commit f1c739a5919311c059ab763b5a383f84567f7eaf\n    \n    1"},{"timestamp":1556822627,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9:\n\n(3 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1556822932,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Uploaded patch set 10."},{"timestamp":1556822932,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Patch Set 10:\n\nNew commits:\n    \n    commit 948d8179466bdb321dfca7ddd05cf9d62563e1b6\n    \n    bash style"},{"timestamp":1556823019,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1556823099,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Uploaded patch set 11: Commit message was updated."},{"timestamp":1556823216,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Uploaded patch set 12: Commit message was updated."},{"timestamp":1556823595,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Uploaded patch set 13."},{"timestamp":1556823595,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Patch Set 13:\n\nNew commits:\n    \n    commit f37132d6fa62b17ce082ec54cbcea455d4dbfaa5\n    \n    header comment"},{"timestamp":1556823679,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 13: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1556823924,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Uploaded patch set 14."},{"timestamp":1556823925,"reviewer":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"message":"Patch Set 14:\n\nNew commits:\n    \n    commit 4b2664d309a59b08c0da19c055d19a02a03a23bf\n    \n    use -c"},{"timestamp":1556823962,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 14: Code-Review+1 Integration-Approval+1"},{"timestamp":1556824011,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Brian Bennett"},{"timestamp":1556824014,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 14:\n\n\"make check\" passed ok"}],"currentPatchSet":{"number":"14","revision":"9aa16b9af114c9739fd6981bb964bd0bacff12b3","parents":["59e7a0018c597b91c15eadaaf61ebe99140adff1"],"ref":"refs/changes/27/6127/14","uploader":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"createdOn":1556823924,"author":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556823962,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556823962,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1556824011,"by":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/bin/sdc-image-sync","type":"MODIFIED","insertions":23,"deletions":-84}],"sizeInsertions":23,"sizeDeletions":-84},"patchSets":[{"number":"1","revision":"7885bc0ab06457ee2757342e73ba79903b7bb067","parents":["b70846fd46c8b919e33cd00ea30949e2194c42aa"],"ref":"refs/changes/27/6127/1","uploader":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"createdOn":1555529961,"author":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1555530047,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/bin/sdc-image-sync","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1,"sizeDeletions":-1},{"number":"2","revision":"302b93703ae9b9f2f78f4fd9e5d6fc7c1ec124fa","parents":["59e7a0018c597b91c15eadaaf61ebe99140adff1"],"ref":"refs/changes/27/6127/2","uploader":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"createdOn":1555532630,"author":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1555532712,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/bin/sdc-image-sync","type":"MODIFIED","insertions":9,"deletions":-7}],"sizeInsertions":9,"sizeDeletions":-7},{"number":"3","revision":"4459b3bc1cf431b57138311bcdec0715aa6b2e0d","parents":["59e7a0018c597b91c15eadaaf61ebe99140adff1"],"ref":"refs/changes/27/6127/3","uploader":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"createdOn":1555550837,"author":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1555550921,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/bin/sdc-image-sync","type":"MODIFIED","insertions":9,"deletions":-8}],"sizeInsertions":9,"sizeDeletions":-8},{"number":"4","revision":"4334f3b11c800a35ce3e522244b41853f2b735d4","parents":["59e7a0018c597b91c15eadaaf61ebe99140adff1"],"ref":"refs/changes/27/6127/4","uploader":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"createdOn":1555550996,"author":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1555551091,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"tools/bin/sdc-image-sync","line":84,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"When I ran this as written in my COAL I got:\n\n```\n[root@headnode (coal) ~]# sdc-image-sync\nadd \u0027\u0027 package for \u0027adminui\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027amon\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027amonredis\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027assets\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027binder\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027cloudapi\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027cmon\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027cnapi\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027cns\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027dhcpd\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027fwapi\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027imgapi\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027mahi\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027manatee\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027moray\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027napi\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027papi\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027portolan\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027rabbitmq\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027sapi\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027sdc\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027ufds\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027vmapi\u0027 to the generic config file\nadd \u0027\u0027 package for \u0027workflow\u0027 to the generic config file\n```\n\nI believe the issue is that `billing_id` is at the top-level of the VM object, and not on `tags.billing_id`.\n\nHere is a proposed fix:\n\n```\ndiff --git a/tools/bin/sdc-image-sync b/tools/bin/sdc-image-sync\nindex 7caf31d9..cc4abcd8 100755\n--- a/tools/bin/sdc-image-sync\n+++ b/tools/bin/sdc-image-sync\n@@ -20,6 +20,14 @@\n # There are two kinds of changes to copy, actual files which need to go into\n # the image, and updates that need to be made to the config files.\n \n+if [[ -n \"$TRACE\" ]]; then\n+    export PS4\u003d\u0027[\\D{%FT%TZ}] ${BASH_SOURCE}:${LINENO}: ${FUNCNAME[0]:+${FUNCNAME[0]}(): }\u0027\n+    set -o xtrace\n+fi\n+set -o errexit\n+set -o pipefail\n+\n+\n export PATH\u003d\"/usr/bin:/usr/sbin:/opt/smartdc/bin\"\n \n declare -A SDC_PKGS\u003d()\n@@ -80,10 +88,9 @@ function update_sdc_zone_pkgs()\n \tcurl -sS \\\n \t--url \"${vmurl}/vms?owner_uuid\u003d${CONFIG_ufds_admin_uuid}\u0026state\u003dactive\" \\\n \t    | json -H  \\\n-\t    -e \u0027this.smartdc_role\u003d(this.tags.smartdc_role || \"-\")\u0027 \\\n-\t    -e \u0027this.billing_id\u003d(this.tags.billing_id || \"-\")\u0027 \\\n \t    -c \u0027this.tags.smartdc_role \u0026\u0026 this.tags.smartdc_role!\u003d\u003d\"nat\"\u0027 \\\n-\t    -a smartdc_role billing_id | sort -u | \\\n+\t    -c \u0027this.billing_id\u0027 \\\n+\t    -a tags.smartdc_role billing_id | sort -u | \\\n \t    while read role pkg\n \t    do\n \t\t# If this pkg is not in the config file, add it.\n\n```\n\nChanges:\n- use \"billing_id\" at the top-level\n- exclude zones that don\u0027t have a billing_id set, otherwise we\u0027d be attempting `sdc-papi /packages/-` in `add_pkg` which doesn\u0027t seem useful\n- don\u0027t bother defaulting \"smartdc_role\" to \"-\" because we are already filtering out zones that don\u0027t have that tag set."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/bin/sdc-image-sync","type":"MODIFIED","insertions":10,"deletions":-8}],"sizeInsertions":10,"sizeDeletions":-8},{"number":"5","revision":"d537cd23551ed44445c98f4848c98e31cb346c67","parents":["59e7a0018c597b91c15eadaaf61ebe99140adff1"],"ref":"refs/changes/27/6127/5","uploader":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"createdOn":1556822029,"author":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1556822068,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"tools/bin/sdc-image-sync","line":45,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line exceeds 80 columns"},{"file":"tools/bin/sdc-image-sync","line":46,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line exceeds 80 columns"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/bin/sdc-image-sync","type":"MODIFIED","insertions":4,"deletions":-70}],"sizeInsertions":4,"sizeDeletions":-70},{"number":"6","revision":"a6ac03a6a740a37964537deee8efddb558113d73","parents":["59e7a0018c597b91c15eadaaf61ebe99140adff1"],"ref":"refs/changes/27/6127/6","uploader":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"createdOn":1556822306,"author":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1556822349,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"tools/bin/sdc-image-sync","line":24,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line exceeds 80 columns"},{"file":"tools/bin/sdc-image-sync","line":48,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line exceeds 80 columns"},{"file":"tools/bin/sdc-image-sync","line":49,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line exceeds 80 columns"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/bin/sdc-image-sync","type":"MODIFIED","insertions":13,"deletions":-76}],"sizeInsertions":13,"sizeDeletions":-76},{"number":"7","revision":"9712c99b3258f0474d971ba3190ea732c3d1aa40","parents":["59e7a0018c597b91c15eadaaf61ebe99140adff1"],"ref":"refs/changes/27/6127/7","uploader":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"createdOn":1556822328,"author":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"isDraft":false,"kind":"NO_CODE_CHANGE","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/bin/sdc-image-sync","type":"MODIFIED","insertions":13,"deletions":-76}],"sizeInsertions":13,"sizeDeletions":-76},{"number":"8","revision":"6f47e3ee1f93917cb29965c863861c7ebc3306a0","parents":["59e7a0018c597b91c15eadaaf61ebe99140adff1"],"ref":"refs/changes/27/6127/8","uploader":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"createdOn":1556822497,"author":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1556822538,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"tools/bin/sdc-image-sync","line":24,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line exceeds 80 columns"},{"file":"tools/bin/sdc-image-sync","line":48,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line exceeds 80 columns"},{"file":"tools/bin/sdc-image-sync","line":49,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line exceeds 80 columns"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/bin/sdc-image-sync","type":"MODIFIED","insertions":15,"deletions":-78}],"sizeInsertions":15,"sizeDeletions":-78},{"number":"9","revision":"aa6b310482aaed04cda09486087a2a13c4c3f7a6","parents":["59e7a0018c597b91c15eadaaf61ebe99140adff1"],"ref":"refs/changes/27/6127/9","uploader":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"createdOn":1556822582,"author":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1556822349,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"tools/bin/sdc-image-sync","line":24,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line exceeds 80 columns"},{"file":"tools/bin/sdc-image-sync","line":48,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line exceeds 80 columns"},{"file":"tools/bin/sdc-image-sync","line":49,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line exceeds 80 columns"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/bin/sdc-image-sync","type":"MODIFIED","insertions":13,"deletions":-76}],"sizeInsertions":13,"sizeDeletions":-76},{"number":"10","revision":"b425f094de8e5e8b52e00969b312e0b4b28aefa9","parents":["59e7a0018c597b91c15eadaaf61ebe99140adff1"],"ref":"refs/changes/27/6127/10","uploader":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"createdOn":1556822932,"author":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1556823019,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/bin/sdc-image-sync","type":"MODIFIED","insertions":16,"deletions":-76}],"sizeInsertions":16,"sizeDeletions":-76},{"number":"11","revision":"5cc1f636925b14e3585270e2900a6a3c0729227a","parents":["59e7a0018c597b91c15eadaaf61ebe99140adff1"],"ref":"refs/changes/27/6127/11","uploader":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"createdOn":1556823099,"author":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1556823019,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/bin/sdc-image-sync","type":"MODIFIED","insertions":16,"deletions":-76}],"sizeInsertions":16,"sizeDeletions":-76},{"number":"12","revision":"4c695d208ff55c40c3455ac8db254e244c4f390d","parents":["59e7a0018c597b91c15eadaaf61ebe99140adff1"],"ref":"refs/changes/27/6127/12","uploader":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"createdOn":1556823216,"author":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1556823019,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/bin/sdc-image-sync","type":"MODIFIED","insertions":16,"deletions":-76}],"sizeInsertions":16,"sizeDeletions":-76},{"number":"13","revision":"5d56bfefeffacc11470d8a036bec1b7be02eeb9f","parents":["59e7a0018c597b91c15eadaaf61ebe99140adff1"],"ref":"refs/changes/27/6127/13","uploader":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"createdOn":1556823595,"author":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1556823679,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/bin/sdc-image-sync","type":"MODIFIED","insertions":23,"deletions":-84}],"sizeInsertions":23,"sizeDeletions":-84},{"number":"14","revision":"9aa16b9af114c9739fd6981bb964bd0bacff12b3","parents":["59e7a0018c597b91c15eadaaf61ebe99140adff1"],"ref":"refs/changes/27/6127/14","uploader":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"createdOn":1556823924,"author":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556823962,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556823962,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1556824011,"by":{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/bin/sdc-image-sync","type":"MODIFIED","insertions":23,"deletions":-84}],"sizeInsertions":23,"sizeDeletions":-84}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Brian Bennett","email":"brian.bennett@joyent.com","username":"bahamat"}]}