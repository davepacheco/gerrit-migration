{"project":"joyent/manta-debugging-guide","branch":"master","id":"I1aabbebc65169013db6371fafa42f3bb9f3048cc","number":"6102","subject":"MANTA-4218 document SharksExhaustedError in debugging guide Reviewed by: Jon Anderson \u003cjon.anderson@joyent.com\u003e Approved by: Jon Anderson \u003cjon.anderson@joyent.com\u003e","owner":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"url":"https://cr.joyent.us/6102","commitMessage":"MANTA-4218 document SharksExhaustedError in debugging guide\nReviewed by: Jon Anderson \u003cjon.anderson@joyent.com\u003e\nApproved by: Jon Anderson \u003cjon.anderson@joyent.com\u003e\n","createdOn":1555018094,"lastUpdated":1555621455,"open":false,"status":"MERGED","comments":[{"timestamp":1555018094,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 1."},{"timestamp":1555020595,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 1:\n\n(6 comments)\n\nOverall looks great, just a few suggestions."},{"timestamp":1555457623,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\n(6 comments)\n\nThanks for taking a close look!  I\u0027ve updated some of the text to help clear up the flow and I\u0027ve added some links from other sections to make sure people can find this one.  Let me know what you think."},{"timestamp":1555457652,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 2."},{"timestamp":1555597409,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1\n\n(3 comments)\n\nChanges look great, very readable and helpful info."},{"timestamp":1555621444,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1555621455,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by David Pacheco"}],"currentPatchSet":{"number":"3","revision":"1aabbebc65169013db6371fafa42f3bb9f3048cc","parents":["c91bc46f25ab91ebc88f7bbb8511c50041cc6b35"],"ref":"refs/changes/02/6102/3","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1555621444,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555597409,"by":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1555597409,"by":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"}},{"type":"SUBM","value":"1","grantedOn":1555621455,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"0002-investigation-tasks.adoc","type":"MODIFIED","insertions":101,"deletions":0},{"file":"0003-quick-reference.adoc","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"docs/index.html","type":"MODIFIED","insertions":147,"deletions":-2}],"sizeInsertions":249,"sizeDeletions":-3},"patchSets":[{"number":"1","revision":"2647a057087bacc82ec461d6d6894484164c2074","parents":["c91bc46f25ab91ebc88f7bbb8511c50041cc6b35"],"ref":"refs/changes/02/6102/1","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1555018094,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","comments":[{"file":"0002-investigation-tasks.adoc","line":847,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"This section is very informative. I wonder if beginning with \"under some conditions\" might be a bit vague. You might consider bring the specific descriptions below up to the top?\n\nIf the specific error message is not presented, I am wondering how they might get here in the first place."},{"file":"0002-investigation-tasks.adoc","line":847,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"\u003e This section is very informative. I wonder if beginning with \"under some conditions\" might be a bit vague. You might consider bring the specific descriptions below up to the top?\n\nMy hope is that the four symptoms in the list at the top are fairly straightforward to identify.  The conditions that they represent are much more complex -- that\u0027s what the rest of this section explains.  So I was trying to structure this intro as basically \"If you see one of these four symptoms, read on.  [Otherwise, this section isn\u0027t for you.]\"\n\nI\u0027ve updated the text around this to make that a bit clearer.  Let me know if that helps.\n\n\u003e If the specific error message is not presented, I am wondering how they might get here in the first place.\n\nIn the latest patchset, the message is in the title of this section as well as the first item in the bullet point.\n\nMy expectation is that the most common path here would be to load the guide and search the page for the error message.\n\nThere are two other paths that I think would get people here.  In both of these, there was a missing link to this general section.  I\u0027ve added these links in the latest patchset.  The paths I was thinking of are:\n\n- Load page -\u003e Incident Response Decision Tree -\u003e Debugging a specific request that failed -\u003e Understanding a Muskie log entry.  I added a link from this page directly to the section on specific error messages.\n- Load page -\u003e Incident Response Decision Tree -\u003e Debugging a specific request that failed -\u003e Understanding a Muskie log entry -\u003e Muskie log entry properties.  I added a link from the \"err\" property to the section on specific error messages."},{"file":"0002-investigation-tasks.adoc","line":853,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Since the section starts with this error message, considering put this at the top as well, and then explaining that it is still possible to be in this situation and only see the other ones."},{"file":"0002-investigation-tasks.adoc","line":853,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Yeah, I can move this one up.  To be clear, all of these symptoms should be present.  The only question is what the reader actually saw, and that depends entirely on the use-case that got them here.  If this came in via a support request, they might only have the client symptoms (503 + \"InteranlError\").  If this came from someone looking at the server logs, they might only see the 503 + SharksExhaustedError."},{"file":"0002-investigation-tasks.adoc","line":861,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Nit: which error? All of the above?"},{"file":"0002-investigation-tasks.adoc","line":861,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Yes -- this whole section is about one particular failure mode.  The four things at the top are just four symptoms of the same underlying condition.  I\u0027ve tried to clarify this in the latest patchset."},{"file":"0002-investigation-tasks.adoc","line":861,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Looks good."},{"file":"0002-investigation-tasks.adoc","line":882,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"This section reads like a debugging guide; consider renaming it that."},{"file":"0002-investigation-tasks.adoc","line":882,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Are you thinking of a header like \"Debugging Guide for this error\"?\n\nWe could probably use some editing of the whole guide along these lines.  But right now, rather than section headings like that, the whole document uses (bolded) prose questions and directions.  I initially thought that would be easier for people to follow."},{"file":"0002-investigation-tasks.adoc","line":882,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"With your changes the heading is clear."},{"file":"0002-investigation-tasks.adoc","line":908,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"I am not sure why this is beyond the scope of this guide -- should there be a next step or actions to take as a result of having identified this problem?\n\nSorry if I am missing something."},{"file":"0002-investigation-tasks.adoc","line":908,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"On one level, this is just a factual statement -- there is no section on the guide today on debugging that kind of problem.\n\nIdeally, we would have such a guide.  It\u0027s a pretty complicated tree itself.  It could include digging into DNS, IP, ARP, error counters in the operating system, switches, etc.  I tried to outline very broad strokes below so people have some places to start, but I don\u0027t want to pretend it\u0027s remotely near a complete guide to that particular problem."},{"file":"0002-investigation-tasks.adoc","line":908,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Makes sense."},{"file":"0002-investigation-tasks.adoc","line":912,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"I see, there are next steps here. You might indicate above."},{"file":"0002-investigation-tasks.adoc","line":912,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"0002-investigation-tasks.adoc","type":"MODIFIED","insertions":89,"deletions":0},{"file":"docs/index.html","type":"MODIFIED","insertions":132,"deletions":-1}],"sizeInsertions":221,"sizeDeletions":-1},{"number":"2","revision":"634ab320761fbf35b23c71268dba46bfc1ee84f3","parents":["c91bc46f25ab91ebc88f7bbb8511c50041cc6b35"],"ref":"refs/changes/02/6102/2","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1555457652,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555597409,"by":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1555597409,"by":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"0002-investigation-tasks.adoc","type":"MODIFIED","insertions":101,"deletions":0},{"file":"0003-quick-reference.adoc","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"docs/index.html","type":"MODIFIED","insertions":147,"deletions":-2}],"sizeInsertions":249,"sizeDeletions":-3},{"number":"3","revision":"1aabbebc65169013db6371fafa42f3bb9f3048cc","parents":["c91bc46f25ab91ebc88f7bbb8511c50041cc6b35"],"ref":"refs/changes/02/6102/3","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1555621444,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1555621455,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555597409,"by":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1555597409,"by":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"0002-investigation-tasks.adoc","type":"MODIFIED","insertions":101,"deletions":0},{"file":"0003-quick-reference.adoc","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"docs/index.html","type":"MODIFIED","insertions":147,"deletions":-2}],"sizeInsertions":249,"sizeDeletions":-3}],"allReviewers":[{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}]}