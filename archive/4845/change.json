{"project":"joyent/illumos-joyent","branch":"master","id":"I1d5ed160d3a29de8b55fbca0c9433841e76100ab","number":"4845","subject":"XXX OS-4278 delegated datasets could have better in-zone names Co-authors: myself \u0026 alex","owner":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"url":"https://cr.joyent.us/4845","commitMessage":"XXX OS-4278 delegated datasets could have better in-zone names Co-authors: myself \u0026 alex\n","createdOn":1537131376,"lastUpdated":1541453392,"open":false,"status":"ABANDONED","comments":[{"timestamp":1537131376,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 1."},{"timestamp":1537134969,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Abandoned"},{"timestamp":1541453392,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 1:\n\n(5 comments)\n\nSince I\u0027ve implemented this feature once before, I figured it would be good for me to look this over.  I started many weeks ago but didn\u0027t finish.  Things on my to-do list are to take a close at sdev and to verify that there isn\u0027t any send/recv impact."}],"currentPatchSet":{"number":"1","revision":"1d5ed160d3a29de8b55fbca0c9433841e76100ab","parents":["85face0b82dd8468c97810dc191e2d4c9b14c81a"],"ref":"refs/changes/45/4845/1","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1537131376,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/cmd/zoneadmd/vplat.c","line":3540,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Let\u0027s not add a new parser to the kernel or use more characters that zfs may decide to use for something else.  Build an nvlist and pass it via the ioctl."},{"file":"usr/src/uts/common/fs/zfs/zfs_ioctl.c","line":1638,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"also need to check for # for bookmarks"},{"file":"usr/src/uts/common/os/zone.c","line":7674,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Also need # for bookmarks.   I added this same comment elsewhere.  Seems that a single implementation of this algorithm is needed."},{"file":"usr/src/uts/common/os/zone.c","line":7685,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Do not compare to B_FALSE or B_TRUE.  if (!found)"},{"file":"usr/src/uts/common/os/zone.c","line":7746,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"if (!found)"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/zoneadmd/Makefile.com","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/zoneadmd/vplat.c","type":"MODIFIED","insertions":50,"deletions":-42},{"file":"usr/src/cmd/zonecfg/zonecfg.c","type":"MODIFIED","insertions":30,"deletions":-2},{"file":"usr/src/cmd/zonecfg/zonecfg.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/cmd/zonecfg/zonecfg_grammar.y","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/cmd/zonecfg/zonecfg_lex.l","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/head/libzonecfg.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/libzonecfg/common/libzonecfg.c","type":"MODIFIED","insertions":37,"deletions":-1},{"file":"usr/src/lib/libzonecfg/dtd/zonecfg.dtd.1","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/libzpool/common/sys/zfs_context.h","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/fs/dev/sdev_zvolops.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/spa_config.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/fs/zfs/zfs_ioctl.c","type":"MODIFIED","insertions":245,"deletions":-9},{"file":"usr/src/uts/common/fs/zfs/zfs_vfsops.c","type":"MODIFIED","insertions":23,"deletions":-3},{"file":"usr/src/uts/common/os/zone.c","type":"MODIFIED","insertions":319,"deletions":-25},{"file":"usr/src/uts/common/sys/zone.h","type":"MODIFIED","insertions":9,"deletions":-2}],"sizeInsertions":732,"sizeDeletions":-92},"patchSets":[{"number":"1","revision":"1d5ed160d3a29de8b55fbca0c9433841e76100ab","parents":["85face0b82dd8468c97810dc191e2d4c9b14c81a"],"ref":"refs/changes/45/4845/1","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1537131376,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/cmd/zoneadmd/vplat.c","line":3540,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Let\u0027s not add a new parser to the kernel or use more characters that zfs may decide to use for something else.  Build an nvlist and pass it via the ioctl."},{"file":"usr/src/uts/common/fs/zfs/zfs_ioctl.c","line":1638,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"also need to check for # for bookmarks"},{"file":"usr/src/uts/common/os/zone.c","line":7674,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Also need # for bookmarks.   I added this same comment elsewhere.  Seems that a single implementation of this algorithm is needed."},{"file":"usr/src/uts/common/os/zone.c","line":7685,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Do not compare to B_FALSE or B_TRUE.  if (!found)"},{"file":"usr/src/uts/common/os/zone.c","line":7746,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"if (!found)"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/zoneadmd/Makefile.com","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/zoneadmd/vplat.c","type":"MODIFIED","insertions":50,"deletions":-42},{"file":"usr/src/cmd/zonecfg/zonecfg.c","type":"MODIFIED","insertions":30,"deletions":-2},{"file":"usr/src/cmd/zonecfg/zonecfg.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/cmd/zonecfg/zonecfg_grammar.y","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/cmd/zonecfg/zonecfg_lex.l","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/head/libzonecfg.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/libzonecfg/common/libzonecfg.c","type":"MODIFIED","insertions":37,"deletions":-1},{"file":"usr/src/lib/libzonecfg/dtd/zonecfg.dtd.1","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/libzpool/common/sys/zfs_context.h","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/fs/dev/sdev_zvolops.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/spa_config.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/fs/zfs/zfs_ioctl.c","type":"MODIFIED","insertions":245,"deletions":-9},{"file":"usr/src/uts/common/fs/zfs/zfs_vfsops.c","type":"MODIFIED","insertions":23,"deletions":-3},{"file":"usr/src/uts/common/os/zone.c","type":"MODIFIED","insertions":319,"deletions":-25},{"file":"usr/src/uts/common/sys/zone.h","type":"MODIFIED","insertions":9,"deletions":-2}],"sizeInsertions":732,"sizeDeletions":-92}],"allReviewers":[{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}]}