{"project":"joyent/smartos-live","branch":"master","id":"I0fa77b4dbc1e58328c9e4f7ad236e7f3337ed748","number":"3358","subject":"TRITON-90 Update fwadm(1M) to use fwrule@1.4.1 Reviewed by: Jason King \u003cjason.king@joyent.com\u003e Approved by: Jordan Hendricks \u003cjordan.hendricks@joyent.com\u003e","owner":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"url":"https://cr.joyent.us/3358","commitMessage":"TRITON-90 Update fwadm(1M) to use fwrule@1.4.1\nReviewed by: Jason King \u003cjason.king@joyent.com\u003e\nApproved by: Jordan Hendricks \u003cjordan.hendricks@joyent.com\u003e\n","createdOn":1518557812,"lastUpdated":1519256810,"open":false,"status":"MERGED","comments":[{"timestamp":1518557812,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 1."},{"timestamp":1518557881,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1518560066,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1:\n\nNot that all of the changes under src/fw/node_modules and src/fw/tools/fwrule are due to modifying src/fw/package.json and src/fw/tools/bin/rebuild-node-modules, and running them to pull in recent changes."},{"timestamp":1518622127,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1518638402,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1518745417,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1519252764,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 2: Patch Set 1 was rebased"},{"timestamp":1519252814,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2:\n\n\"make check\" passed ok"},{"timestamp":1519253083,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 3."},{"timestamp":1519253134,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1519256127,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1519256673,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1519256796,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 4: Commit message was updated."},{"timestamp":1519256810,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Cody Peter Mello"}],"currentPatchSet":{"number":"4","revision":"a004d2a41fbfb4c58b22a4eb232cc4fab065243d","parents":["7dfc1fc9450525cfcc3567f658db7e494b56aaf9"],"ref":"refs/changes/58/3358/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1519256796,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1519253134,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1519256127,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1519256673,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"SUBM","value":"1","grantedOn":1519256810,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"src/fw/node_modules/fwrule/index.js","type":"MODIFIED","insertions":6,"deletions":-14},{"file":"src/fw/node_modules/fwrule/parser.js","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"src/fw/node_modules/fwrule/validators.js","type":"MODIFIED","insertions":31,"deletions":-19},{"file":"src/fw/node_modules/ip6addr.js","type":"ADDED","insertions":716,"deletions":0},{"file":"src/fw/package.json","type":"MODIFIED","insertions":2,"deletions":0},{"file":"src/fw/tools/bin/rebuild-node-modules","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"src/fw/tools/fwrule/Makefile","type":"DELETED","insertions":0,"deletions":-142},{"file":"src/fw/tools/fwrule/README.md","type":"DELETED","insertions":0,"deletions":-56},{"file":"src/fw/tools/fwrule/lib/index.js","type":"DELETED","insertions":0,"deletions":-250},{"file":"src/fw/tools/fwrule/lib/parser.js","type":"DELETED","insertions":0,"deletions":-561},{"file":"src/fw/tools/fwrule/lib/rule.js","type":"DELETED","insertions":0,"deletions":-748},{"file":"src/fw/tools/fwrule/lib/validators.js","type":"DELETED","insertions":0,"deletions":-224},{"file":"src/fw/tools/fwrule/package.json","type":"DELETED","insertions":0,"deletions":-33},{"file":"src/fw/tools/fwrule/src/fwrule.jison","type":"DELETED","insertions":0,"deletions":-315},{"file":"src/fw/tools/fwrule/src/header.js","type":"DELETED","insertions":0,"deletions":-29},{"file":"src/fw/tools/fwrule/test/invalid.test.js","type":"DELETED","insertions":0,"deletions":-427},{"file":"src/fw/tools/fwrule/test/parser.test.js","type":"DELETED","insertions":0,"deletions":-602},{"file":"src/fw/tools/fwrule/test/rule.test.js","type":"DELETED","insertions":0,"deletions":-1700},{"file":"src/fw/tools/fwrule/test/run.js","type":"DELETED","insertions":0,"deletions":-24},{"file":"src/fw/tools/fwrule/test/validators.test.js","type":"DELETED","insertions":0,"deletions":-207},{"file":"src/fw/tools/fwrule/tools/eslint.node.conf","type":"DELETED","insertions":0,"deletions":-20},{"file":"src/fw/tools/fwrule/tools/jsl.node.conf","type":"DELETED","insertions":0,"deletions":-138},{"file":"src/manifest","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":765,"sizeDeletions":-5515},"patchSets":[{"number":"1","revision":"1200b421e890e8404899d1775cd8acc9ecfbbf9f","parents":["30477c3c8d4d7e3fd15928680066cc951594ec73"],"ref":"refs/changes/58/3358/1","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1518557812,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1518557881,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1518745417,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"comments":[{"file":"src/fw/node_modules/ip6addr.js","line":357,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"If the assert is true, shouldn\u0027t the \u0027 | 0\u0027 assignment be unnecessary?  Or is my JS too rusty here?"},{"file":"src/fw/node_modules/ip6addr.js","line":357,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Doing this coerces the number into a signed 32-bit integer. Any higher bits or values past the decimal point will be lost. Given the bounds check below, I\u0027m not sure if this is really accomplishing anything more than a Math.floor() would."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/fw/node_modules/fwrule/index.js","type":"MODIFIED","insertions":6,"deletions":-14},{"file":"src/fw/node_modules/fwrule/parser.js","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"src/fw/node_modules/fwrule/validators.js","type":"MODIFIED","insertions":31,"deletions":-19},{"file":"src/fw/node_modules/ip6addr.js","type":"ADDED","insertions":716,"deletions":0},{"file":"src/fw/package.json","type":"MODIFIED","insertions":2,"deletions":0},{"file":"src/fw/tools/bin/rebuild-node-modules","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"src/fw/tools/fwrule/Makefile","type":"DELETED","insertions":0,"deletions":-142},{"file":"src/fw/tools/fwrule/README.md","type":"DELETED","insertions":0,"deletions":-56},{"file":"src/fw/tools/fwrule/lib/index.js","type":"DELETED","insertions":0,"deletions":-250},{"file":"src/fw/tools/fwrule/lib/parser.js","type":"DELETED","insertions":0,"deletions":-561},{"file":"src/fw/tools/fwrule/lib/rule.js","type":"DELETED","insertions":0,"deletions":-748},{"file":"src/fw/tools/fwrule/lib/validators.js","type":"DELETED","insertions":0,"deletions":-224},{"file":"src/fw/tools/fwrule/package.json","type":"DELETED","insertions":0,"deletions":-33},{"file":"src/fw/tools/fwrule/src/fwrule.jison","type":"DELETED","insertions":0,"deletions":-315},{"file":"src/fw/tools/fwrule/src/header.js","type":"DELETED","insertions":0,"deletions":-29},{"file":"src/fw/tools/fwrule/test/invalid.test.js","type":"DELETED","insertions":0,"deletions":-427},{"file":"src/fw/tools/fwrule/test/parser.test.js","type":"DELETED","insertions":0,"deletions":-602},{"file":"src/fw/tools/fwrule/test/rule.test.js","type":"DELETED","insertions":0,"deletions":-1700},{"file":"src/fw/tools/fwrule/test/run.js","type":"DELETED","insertions":0,"deletions":-24},{"file":"src/fw/tools/fwrule/test/validators.test.js","type":"DELETED","insertions":0,"deletions":-207},{"file":"src/fw/tools/fwrule/tools/eslint.node.conf","type":"DELETED","insertions":0,"deletions":-20},{"file":"src/fw/tools/fwrule/tools/jsl.node.conf","type":"DELETED","insertions":0,"deletions":-138}],"sizeInsertions":764,"sizeDeletions":-5515},{"number":"2","revision":"0531c388d8d0eeea89b8eeb135c2e47993e88fb6","parents":["7dfc1fc9450525cfcc3567f658db7e494b56aaf9"],"ref":"refs/changes/58/3358/2","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1519252764,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1518557881,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1518745417,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/fw/node_modules/fwrule/index.js","type":"MODIFIED","insertions":6,"deletions":-14},{"file":"src/fw/node_modules/fwrule/parser.js","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"src/fw/node_modules/fwrule/validators.js","type":"MODIFIED","insertions":31,"deletions":-19},{"file":"src/fw/node_modules/ip6addr.js","type":"ADDED","insertions":716,"deletions":0},{"file":"src/fw/package.json","type":"MODIFIED","insertions":2,"deletions":0},{"file":"src/fw/tools/bin/rebuild-node-modules","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"src/fw/tools/fwrule/Makefile","type":"DELETED","insertions":0,"deletions":-142},{"file":"src/fw/tools/fwrule/README.md","type":"DELETED","insertions":0,"deletions":-56},{"file":"src/fw/tools/fwrule/lib/index.js","type":"DELETED","insertions":0,"deletions":-250},{"file":"src/fw/tools/fwrule/lib/parser.js","type":"DELETED","insertions":0,"deletions":-561},{"file":"src/fw/tools/fwrule/lib/rule.js","type":"DELETED","insertions":0,"deletions":-748},{"file":"src/fw/tools/fwrule/lib/validators.js","type":"DELETED","insertions":0,"deletions":-224},{"file":"src/fw/tools/fwrule/package.json","type":"DELETED","insertions":0,"deletions":-33},{"file":"src/fw/tools/fwrule/src/fwrule.jison","type":"DELETED","insertions":0,"deletions":-315},{"file":"src/fw/tools/fwrule/src/header.js","type":"DELETED","insertions":0,"deletions":-29},{"file":"src/fw/tools/fwrule/test/invalid.test.js","type":"DELETED","insertions":0,"deletions":-427},{"file":"src/fw/tools/fwrule/test/parser.test.js","type":"DELETED","insertions":0,"deletions":-602},{"file":"src/fw/tools/fwrule/test/rule.test.js","type":"DELETED","insertions":0,"deletions":-1700},{"file":"src/fw/tools/fwrule/test/run.js","type":"DELETED","insertions":0,"deletions":-24},{"file":"src/fw/tools/fwrule/test/validators.test.js","type":"DELETED","insertions":0,"deletions":-207},{"file":"src/fw/tools/fwrule/tools/eslint.node.conf","type":"DELETED","insertions":0,"deletions":-20},{"file":"src/fw/tools/fwrule/tools/jsl.node.conf","type":"DELETED","insertions":0,"deletions":-138}],"sizeInsertions":764,"sizeDeletions":-5515},{"number":"3","revision":"0fa77b4dbc1e58328c9e4f7ad236e7f3337ed748","parents":["7dfc1fc9450525cfcc3567f658db7e494b56aaf9"],"ref":"refs/changes/58/3358/3","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1519253083,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1519253134,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1519256673,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1519256127,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/fw/node_modules/fwrule/index.js","type":"MODIFIED","insertions":6,"deletions":-14},{"file":"src/fw/node_modules/fwrule/parser.js","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"src/fw/node_modules/fwrule/validators.js","type":"MODIFIED","insertions":31,"deletions":-19},{"file":"src/fw/node_modules/ip6addr.js","type":"ADDED","insertions":716,"deletions":0},{"file":"src/fw/package.json","type":"MODIFIED","insertions":2,"deletions":0},{"file":"src/fw/tools/bin/rebuild-node-modules","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"src/fw/tools/fwrule/Makefile","type":"DELETED","insertions":0,"deletions":-142},{"file":"src/fw/tools/fwrule/README.md","type":"DELETED","insertions":0,"deletions":-56},{"file":"src/fw/tools/fwrule/lib/index.js","type":"DELETED","insertions":0,"deletions":-250},{"file":"src/fw/tools/fwrule/lib/parser.js","type":"DELETED","insertions":0,"deletions":-561},{"file":"src/fw/tools/fwrule/lib/rule.js","type":"DELETED","insertions":0,"deletions":-748},{"file":"src/fw/tools/fwrule/lib/validators.js","type":"DELETED","insertions":0,"deletions":-224},{"file":"src/fw/tools/fwrule/package.json","type":"DELETED","insertions":0,"deletions":-33},{"file":"src/fw/tools/fwrule/src/fwrule.jison","type":"DELETED","insertions":0,"deletions":-315},{"file":"src/fw/tools/fwrule/src/header.js","type":"DELETED","insertions":0,"deletions":-29},{"file":"src/fw/tools/fwrule/test/invalid.test.js","type":"DELETED","insertions":0,"deletions":-427},{"file":"src/fw/tools/fwrule/test/parser.test.js","type":"DELETED","insertions":0,"deletions":-602},{"file":"src/fw/tools/fwrule/test/rule.test.js","type":"DELETED","insertions":0,"deletions":-1700},{"file":"src/fw/tools/fwrule/test/run.js","type":"DELETED","insertions":0,"deletions":-24},{"file":"src/fw/tools/fwrule/test/validators.test.js","type":"DELETED","insertions":0,"deletions":-207},{"file":"src/fw/tools/fwrule/tools/eslint.node.conf","type":"DELETED","insertions":0,"deletions":-20},{"file":"src/fw/tools/fwrule/tools/jsl.node.conf","type":"DELETED","insertions":0,"deletions":-138},{"file":"src/manifest","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":765,"sizeDeletions":-5515},{"number":"4","revision":"a004d2a41fbfb4c58b22a4eb232cc4fab065243d","parents":["7dfc1fc9450525cfcc3567f658db7e494b56aaf9"],"ref":"refs/changes/58/3358/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1519256796,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1519256810,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1519253134,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1519256673,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1519256127,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"src/fw/node_modules/fwrule/index.js","type":"MODIFIED","insertions":6,"deletions":-14},{"file":"src/fw/node_modules/fwrule/parser.js","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"src/fw/node_modules/fwrule/validators.js","type":"MODIFIED","insertions":31,"deletions":-19},{"file":"src/fw/node_modules/ip6addr.js","type":"ADDED","insertions":716,"deletions":0},{"file":"src/fw/package.json","type":"MODIFIED","insertions":2,"deletions":0},{"file":"src/fw/tools/bin/rebuild-node-modules","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"src/fw/tools/fwrule/Makefile","type":"DELETED","insertions":0,"deletions":-142},{"file":"src/fw/tools/fwrule/README.md","type":"DELETED","insertions":0,"deletions":-56},{"file":"src/fw/tools/fwrule/lib/index.js","type":"DELETED","insertions":0,"deletions":-250},{"file":"src/fw/tools/fwrule/lib/parser.js","type":"DELETED","insertions":0,"deletions":-561},{"file":"src/fw/tools/fwrule/lib/rule.js","type":"DELETED","insertions":0,"deletions":-748},{"file":"src/fw/tools/fwrule/lib/validators.js","type":"DELETED","insertions":0,"deletions":-224},{"file":"src/fw/tools/fwrule/package.json","type":"DELETED","insertions":0,"deletions":-33},{"file":"src/fw/tools/fwrule/src/fwrule.jison","type":"DELETED","insertions":0,"deletions":-315},{"file":"src/fw/tools/fwrule/src/header.js","type":"DELETED","insertions":0,"deletions":-29},{"file":"src/fw/tools/fwrule/test/invalid.test.js","type":"DELETED","insertions":0,"deletions":-427},{"file":"src/fw/tools/fwrule/test/parser.test.js","type":"DELETED","insertions":0,"deletions":-602},{"file":"src/fw/tools/fwrule/test/rule.test.js","type":"DELETED","insertions":0,"deletions":-1700},{"file":"src/fw/tools/fwrule/test/run.js","type":"DELETED","insertions":0,"deletions":-24},{"file":"src/fw/tools/fwrule/test/validators.test.js","type":"DELETED","insertions":0,"deletions":-207},{"file":"src/fw/tools/fwrule/tools/eslint.node.conf","type":"DELETED","insertions":0,"deletions":-20},{"file":"src/fw/tools/fwrule/tools/jsl.node.conf","type":"DELETED","insertions":0,"deletions":-138},{"file":"src/manifest","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":765,"sizeDeletions":-5515}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}]}