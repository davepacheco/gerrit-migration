commit 4eb4048ea062cce20e3417f1c9bb528f2164923f (refs/changes/02/5402/1)
Author: dyep <dyep49@gmail.com>
Date:   2019-01-22T10:35:20-08:00 (9 months ago)
    
    TRITON-1099 VMAPI should expose free_space for bhyve VMs

diff --git a/lib/common/vm-common.js b/lib/common/vm-common.js
index 32e1c98..1f0d225 100644
--- a/lib/common/vm-common.js
+++ b/lib/common/vm-common.js
@@ -5,7 +5,7 @@
  */
 
 /*
- * Copyright 2018 Joyent, Inc.
+ * Copyright 2019 Joyent, Inc.
  */
 
 var assert = require('assert-plus');
@@ -172,7 +172,8 @@ function translateVm(obj, fullObject) {
         'pid',
         'tmpfs',
         'zfs_data_compression',
-        'flexible_disk_size'
+        'flexible_disk_size',
+        'free_space'
     ];
 
     optionalFields.forEach(function (field) {
@@ -188,6 +189,9 @@ function translateVm(obj, fullObject) {
         if (obj.hostname) {
             vm.hostname = obj.hostname;
         }
+        if (obj.brand === 'bhyve') {
+            vm.free_space = obj.free_space;
+        }
     } else {
         vm.image_uuid = obj.image_uuid;
     }
diff --git a/package.json b/package.json
index a4df7f3..f803b9e 100644
--- a/package.json
+++ b/package.json
@@ -1,7 +1,7 @@
 {
   "name": "vmapi",
   "description": "VMs API",
-  "version": "9.6.6",
+  "version": "9.7.0",
   "author": "Joyent (joyent.com)",
   "private": true,
   "dependencies": {
