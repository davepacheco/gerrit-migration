{"project":"joyent/illumos-joyent","branch":"master","id":"I860cb6191e0b5f8a2d9112995fec694ce3da4cc6","number":"5688","subject":"OS-7630 elfexec() should keep to unsigned types when processing PT_DYNAMIC Reviewed by: Richard Lowe \u003crichlowe@richlowe.net\u003e Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Approved by: Dan McDonald \u003cdanmcd@joyent.com\u003e","owner":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"url":"https://cr.joyent.us/5688","commitMessage":"OS-7630 elfexec() should keep to unsigned types when processing PT_DYNAMIC\nReviewed by: Richard Lowe \u003crichlowe@richlowe.net\u003e\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nApproved by: Dan McDonald \u003cdanmcd@joyent.com\u003e\n","createdOn":1551476094,"lastUpdated":1551735302,"open":false,"status":"MERGED","comments":[{"timestamp":1551476094,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 1."},{"timestamp":1551476733,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(3 comments)\n\nA few style nits, but otherwise it looks pretty good"},{"timestamp":1551476805,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1551477721,"reviewer":{"name":"Rich Lowe","email":"richlowe@richlowe.net","username":"richlowe"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1551477849,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1551478118,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1: -Code-Review\n\n(1 comment)"},{"timestamp":1551479369,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 2."},{"timestamp":1551479490,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 2:\n\n(3 comments)"},{"timestamp":1551479557,"reviewer":{"name":"Rich Lowe","email":"richlowe@richlowe.net","username":"richlowe"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1551483011,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 3."},{"timestamp":1551483195,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1551483285,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 3: Code-Review+1\n\n(1 comment)"},{"timestamp":1551559216,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 3: Integration-Approval+1\n\nPLEASE make sure you upstream this quickly after this push. If you\u0027re going to 2-fer it with 6158, please note that somewhere."},{"timestamp":1551722650,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1551734943,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 5: Patch Set 4 was rebased"},{"timestamp":1551735254,"reviewer":{"name":"Rich Lowe","email":"richlowe@richlowe.net","username":"richlowe"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1551735302,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Cody Peter Mello"}],"currentPatchSet":{"number":"5","revision":"31fd5d7bc7a22f5f61d4a1b782a407e05cf49ad1","parents":["d959f82bb4585e1dbd808a8420514ca76a20b9e1"],"ref":"refs/changes/88/5688/5","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1551734943,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551483285,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1551559216,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551735254,"by":{"name":"Rich Lowe","email":"richlowe@richlowe.net","username":"richlowe"}},{"type":"SUBM","value":"1","grantedOn":1551735302,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":21,"deletions":-15}],"sizeInsertions":21,"sizeDeletions":-15},"patchSets":[{"number":"1","revision":"12748b5d048caeecba84ed7751bf52ffa55ddc3b","parents":["3abe99b08f51c708615fde3464d90ceab6f54837"],"ref":"refs/changes/88/5688/1","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1551476094,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/exec/elf/elf.c","line":389,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Thank you for tightening the scope"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":667,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Make these both const?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":667,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":681,"reviewer":{"name":"Rich Lowe","email":"richlowe@richlowe.net","username":"richlowe"},"message":"I might be being paranoid, since this is all my fault (sorry), but \u0027i\u0027 being signed here bothers me, even with the checks above."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":681,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"It was changed to size_t"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":681,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I missed the aliasing with the \u0027i\u0027 at L382, which is definitely something that should be addressed."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":681,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve changed the name to \"b\"."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":681,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"After talking with Patrick, I\u0027ve changed this code to use the \"i\" from the outer scope, and I\u0027ve changed that to be a size_t. It has \"nphdrs\" assigned to it, which now converts from signed to unsigned, but that should be okay. Patrick\u0027s preparing a follow-up change to convert it \"nphdrs\" and others to unsigned values."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":686,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"could make these both const, but the formatting might get a little weird with the line continuations\n\nup to you"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":686,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":17,"deletions":-9}],"sizeInsertions":17,"sizeDeletions":-9},{"number":"2","revision":"04f308f3ce9829d9124c0624fbbab0e5a431e3c4","parents":["3abe99b08f51c708615fde3464d90ceab6f54837"],"ref":"refs/changes/88/5688/2","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1551479369,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551479557,"by":{"name":"Rich Lowe","email":"richlowe@richlowe.net","username":"richlowe"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":20,"deletions":-14}],"sizeInsertions":20,"sizeDeletions":-14},{"number":"3","revision":"96c821ad1b8655045a6c52b8799fb7ed380fa0d0","parents":["3abe99b08f51c708615fde3464d90ceab6f54837"],"ref":"refs/changes/88/5688/3","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1551483011,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551483285,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1551559216,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"comments":[{"file":"usr/src/uts/common/exec/elf/elf.c","line":383,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Left as an int at my request, as OS-6158 is coming up behind this to address it."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":21,"deletions":-15}],"sizeInsertions":21,"sizeDeletions":-15},{"number":"4","revision":"860cb6191e0b5f8a2d9112995fec694ce3da4cc6","parents":["3abe99b08f51c708615fde3464d90ceab6f54837"],"ref":"refs/changes/88/5688/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1551722650,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551483285,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1551559216,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":21,"deletions":-15}],"sizeInsertions":21,"sizeDeletions":-15},{"number":"5","revision":"31fd5d7bc7a22f5f61d4a1b782a407e05cf49ad1","parents":["d959f82bb4585e1dbd808a8420514ca76a20b9e1"],"ref":"refs/changes/88/5688/5","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1551734943,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"SUBM","value":"1","grantedOn":1551735302,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551483285,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551735254,"by":{"name":"Rich Lowe","email":"richlowe@richlowe.net","username":"richlowe"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1551559216,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":21,"deletions":-15}],"sizeInsertions":21,"sizeDeletions":-15}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},{"name":"Rich Lowe","email":"richlowe@richlowe.net","username":"richlowe"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}]}