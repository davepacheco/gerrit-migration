{"project":"joyent/illumos-joyent","branch":"master","id":"I52767bdcffaf8c9d0a1cbfac8fa46b8506ee88cd","number":"5914","subject":"OS-7241 topo_sensor_state_name() needs work Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Approved by: Jordan Hendricks \u003cjordan.hendricks@joyent.com\u003e","owner":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"url":"https://cr.joyent.us/5914","commitMessage":"OS-7241 topo_sensor_state_name() needs work\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nApproved by: Jordan Hendricks \u003cjordan.hendricks@joyent.com\u003e\n","createdOn":1552959343,"lastUpdated":1553132516,"open":false,"status":"MERGED","comments":[{"timestamp":1552959343,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 1."},{"timestamp":1553015480,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1: Code-Review+1\n\n(1 comment)\n\nIs it worth turning some of the custom programs you used to test this into unit tests under usr/src/test?"},{"timestamp":1553022406,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 2."},{"timestamp":1553022600,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 2:\n\n(1 comment)\n\nI updated that topo_mod_dprintf to dump the topo error.\n\nI don\u0027t know if there\u0027s value in an automated test case for this particular case.  But there is a need for a generic automated test for facility nodes, which I\u0027ve captured in OS-7673"},{"timestamp":1553028049,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2: Code-Review+1\n\n\u003e I don\u0027t know if there\u0027s value in an automated test case for this\n \u003e particular case.  But there is a need for a generic automated test\n \u003e for facility nodes, which I\u0027ve captured in OS-7673\n\nOK, sounds good. Thanks!"},{"timestamp":1553120580,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 2: Integration-Approval+1\n\nThe existing testing looks good to me. It might be good to save the test program you used (perhaps attach it to the ticket?) for future reference.\n\nIs it worth testing with hwgrok as well? I haven\u0027t used that tool, but since you mentioned it as another consumer I thought I would ask about it."},{"timestamp":1553132299,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1553132471,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1553132516,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Rob Johnston"}],"currentPatchSet":{"number":"4","revision":"52767bdcffaf8c9d0a1cbfac8fa46b8506ee88cd","parents":["5323c3614beda051ab8e32a07eeed664a5eca288"],"ref":"refs/changes/14/5914/4","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1553132471,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553028049,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553120580,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"SUBM","value":"1","grantedOn":1553132516,"by":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_subr.c","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"usr/src/lib/fm/topo/modules/common/fac_prov_ipmi/fac_prov_ipmi.c","type":"MODIFIED","insertions":24,"deletions":-5}],"sizeInsertions":35,"sizeDeletions":-9},"patchSets":[{"number":"1","revision":"fc5541ee86abc7060950947012cd827b7540ca64","parents":["c33a1acb9de8b5fce4525488909de95b5ab558bf"],"ref":"refs/changes/14/5914/1","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1552959343,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553015480,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"comments":[{"file":"usr/src/lib/fm/topo/modules/common/fac_prov_ipmi/fac_prov_ipmi.c","line":435,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Should we include a \u0027: %s\u0027, topo_strerror(err) on the debug message?"},{"file":"usr/src/lib/fm/topo/modules/common/fac_prov_ipmi/fac_prov_ipmi.c","line":435,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_subr.c","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"usr/src/lib/fm/topo/modules/common/fac_prov_ipmi/fac_prov_ipmi.c","type":"MODIFIED","insertions":24,"deletions":-5}],"sizeInsertions":35,"sizeDeletions":-9},{"number":"2","revision":"0b2e096e62810d72f13a1a216252b2437faafbed","parents":["c33a1acb9de8b5fce4525488909de95b5ab558bf"],"ref":"refs/changes/14/5914/2","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1553022406,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553028049,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553120580,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_subr.c","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"usr/src/lib/fm/topo/modules/common/fac_prov_ipmi/fac_prov_ipmi.c","type":"MODIFIED","insertions":24,"deletions":-5}],"sizeInsertions":35,"sizeDeletions":-9},{"number":"3","revision":"b589aad0f086e401dacc196314aee3aac131e12d","parents":["c33a1acb9de8b5fce4525488909de95b5ab558bf"],"ref":"refs/changes/14/5914/3","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1553132299,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553028049,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553120580,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_subr.c","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"usr/src/lib/fm/topo/modules/common/fac_prov_ipmi/fac_prov_ipmi.c","type":"MODIFIED","insertions":24,"deletions":-5}],"sizeInsertions":35,"sizeDeletions":-9},{"number":"4","revision":"52767bdcffaf8c9d0a1cbfac8fa46b8506ee88cd","parents":["5323c3614beda051ab8e32a07eeed664a5eca288"],"ref":"refs/changes/14/5914/4","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1553132471,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553028049,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553120580,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"SUBM","value":"1","grantedOn":1553132516,"by":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_subr.c","type":"MODIFIED","insertions":11,"deletions":-4},{"file":"usr/src/lib/fm/topo/modules/common/fac_prov_ipmi/fac_prov_ipmi.c","type":"MODIFIED","insertions":24,"deletions":-5}],"sizeInsertions":35,"sizeDeletions":-9}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}]}