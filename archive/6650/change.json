{"project":"joyent/eng","branch":"master","id":"I4cfb7c89f27b9b28a3324751a9c85a9351544a72","number":"6650","subject":"TOOLS-2298 check-copyright fails for non-master Jenkins builds Reviewed by: Tim Foster \u003ctim.foster@joyent.com\u003e Approved by: Tim Foster \u003ctim.foster@joyent.com\u003e","owner":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"url":"https://cr.joyent.us/6650","commitMessage":"TOOLS-2298 check-copyright fails for non-master Jenkins builds\nReviewed by: Tim Foster \u003ctim.foster@joyent.com\u003e\nApproved by: Tim Foster \u003ctim.foster@joyent.com\u003e\n","createdOn":1564074139,"lastUpdated":1564075379,"open":false,"status":"MERGED","comments":[{"timestamp":1564074139,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 1."},{"timestamp":1564074140,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit a8d62dfa929f720523afad96f667c3af7b2279b4\n    \n    limit to origin/master"},{"timestamp":1564074169,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n fatal: No tags can describe \u002740b433e7caa1ab48e0760841dd1c7c6a9d0fab39\u0027.\n Try --always, or create some tags.\n curl: (22) The requested URL returned error: 404 Not Found\n xmllint --noout --path deps/eng/tools/ --dtdvalid deps/eng/tools/service_bundle.dtd.1 smf/manifests/bapi.xml\n deps/javascriptlint/build/install/jsl --nologo --nosummary --conf\u003dtools/jsl.node.conf lib/index.js test/api.test.js tools/bashstyle\n /tmp/repo/lib/index.js\n /tmp/repo/test/api.test.js\n /tmp/repo/tools/bashstyle\n json --validate -f package.json\n deps/jsstyle/jsstyle -f tools/jsstyle.conf lib/index.js test/api.test.js tools/bashstyle\n bash -n tools/check-copyright\n /tmp/repo/build/node/bin/node deps/eng/tools/bashstyle tools/check-copyright\n gmake: /tmp/repo/build/node/bin/node: Command not found\n gmake: *** [deps/eng/tools/mk/Makefile.targ:245: tools/check-copyright.bashstyle] Error 127"},{"timestamp":1564074777,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1: Code-Review+1 Integration-Approval+1"},{"timestamp":1564074811,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 2."},{"timestamp":1564074812,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit cf7f9aded6f98b37d0bf53c4f4fcfccf62ae3e3e\n    \n    better"},{"timestamp":1564074841,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n fatal: No tags can describe \u002745cee7aa5645a7e1ea4eab6586a0cc348d39af83\u0027.\n Try --always, or create some tags.\n curl: (22) The requested URL returned error: 404 Not Found\n xmllint --noout --path deps/eng/tools/ --dtdvalid deps/eng/tools/service_bundle.dtd.1 smf/manifests/bapi.xml\n deps/javascriptlint/build/install/jsl --nologo --nosummary --conf\u003dtools/jsl.node.conf lib/index.js test/api.test.js tools/bashstyle\n /tmp/repo/lib/index.js\n /tmp/repo/test/api.test.js\n /tmp/repo/tools/bashstyle\n json --validate -f package.json\n deps/jsstyle/jsstyle -f tools/jsstyle.conf lib/index.js test/api.test.js tools/bashstyle\n bash -n tools/check-copyright\n /tmp/repo/build/node/bin/node deps/eng/tools/bashstyle tools/check-copyright\n gmake: /tmp/repo/build/node/bin/node: Command not found\n gmake: *** [deps/eng/tools/mk/Makefile.targ:245: tools/check-copyright.bashstyle] Error 127"},{"timestamp":1564074846,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1564074882,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 2: Code-Review-1 Integration-Approval-1"},{"timestamp":1564074920,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 3."},{"timestamp":1564074921,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 8606d7ec61fcaa7128391eb576ba828aea5eb583\n    \n    remove debug code"},{"timestamp":1564074947,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n fatal: No tags can describe \u002732fd18e3f8bc958cbcbb3124868a927aec8171c0\u0027.\n Try --always, or create some tags.\n curl: (22) The requested URL returned error: 404 Not Found\n xmllint --noout --path deps/eng/tools/ --dtdvalid deps/eng/tools/service_bundle.dtd.1 smf/manifests/bapi.xml\n deps/javascriptlint/build/install/jsl --nologo --nosummary --conf\u003dtools/jsl.node.conf lib/index.js test/api.test.js tools/bashstyle\n /tmp/repo/lib/index.js\n /tmp/repo/test/api.test.js\n /tmp/repo/tools/bashstyle\n json --validate -f package.json\n deps/jsstyle/jsstyle -f tools/jsstyle.conf lib/index.js test/api.test.js tools/bashstyle\n bash -n tools/check-copyright\n /tmp/repo/build/node/bin/node deps/eng/tools/bashstyle tools/check-copyright\n gmake: /tmp/repo/build/node/bin/node: Command not found\n gmake: *** [deps/eng/tools/mk/Makefile.targ:245: tools/check-copyright.bashstyle] Error 127"},{"timestamp":1564075005,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1564075321,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1564075350,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 5: Patch Set 4 was rebased"},{"timestamp":1564075354,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Trent Mick"},{"timestamp":1564075379,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5:\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n curl: (22) The requested URL returned error: 404 Not Found\n xmllint --noout --path deps/eng/tools/ --dtdvalid deps/eng/tools/service_bundle.dtd.1 smf/manifests/bapi.xml\n deps/javascriptlint/build/install/jsl --nologo --nosummary --conf\u003dtools/jsl.node.conf lib/index.js test/api.test.js tools/bashstyle\n /tmp/repo/lib/index.js\n /tmp/repo/test/api.test.js\n /tmp/repo/tools/bashstyle\n json --validate -f package.json\n deps/jsstyle/jsstyle -f tools/jsstyle.conf lib/index.js test/api.test.js tools/bashstyle\n bash -n tools/check-copyright\n /tmp/repo/build/node/bin/node deps/eng/tools/bashstyle tools/check-copyright\n gmake: /tmp/repo/build/node/bin/node: Command not found\n gmake: *** [deps/eng/tools/mk/Makefile.targ:245: tools/check-copyright.bashstyle] Error 127"}],"currentPatchSet":{"number":"5","revision":"098851ffb6c5855e74fd5f80300fc9c2758e2677","parents":["a0ad64e41516b178a5ad320d99bf7a76ead73abc"],"ref":"refs/changes/50/6650/5","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1564075350,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1564074947,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1564075005,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1564075005,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}},{"type":"SUBM","value":"1","grantedOn":1564075354,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"tools/check-copyright","type":"MODIFIED","insertions":7,"deletions":-1}],"sizeInsertions":7,"sizeDeletions":-1},"patchSets":[{"number":"1","revision":"40b433e7caa1ab48e0760841dd1c7c6a9d0fab39","parents":["63e056ba42fd426b9314e99d1cd92773f4dcdda9"],"ref":"refs/changes/50/6650/1","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1564074139,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1564074169,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1564074777,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1564074777,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/check-copyright","type":"MODIFIED","insertions":7,"deletions":-1}],"sizeInsertions":7,"sizeDeletions":-1},{"number":"2","revision":"45cee7aa5645a7e1ea4eab6586a0cc348d39af83","parents":["63e056ba42fd426b9314e99d1cd92773f4dcdda9"],"ref":"refs/changes/50/6650/2","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1564074811,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1564074841,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1564074882,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"-1","grantedOn":1564074882,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"tools/check-copyright","type":"MODIFIED","insertions":7,"deletions":-1}],"sizeInsertions":7,"sizeDeletions":-1},{"number":"3","revision":"32fd18e3f8bc958cbcbb3124868a927aec8171c0","parents":["63e056ba42fd426b9314e99d1cd92773f4dcdda9"],"ref":"refs/changes/50/6650/3","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1564074920,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1564074947,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1564075005,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1564075005,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"tools/check-copyright","type":"MODIFIED","insertions":7,"deletions":-1}],"sizeInsertions":7,"sizeDeletions":-1},{"number":"4","revision":"4cfb7c89f27b9b28a3324751a9c85a9351544a72","parents":["63e056ba42fd426b9314e99d1cd92773f4dcdda9"],"ref":"refs/changes/50/6650/4","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1564075321,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1564074947,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1564075005,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1564075005,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"tools/check-copyright","type":"MODIFIED","insertions":7,"deletions":-1}],"sizeInsertions":7,"sizeDeletions":-1},{"number":"5","revision":"098851ffb6c5855e74fd5f80300fc9c2758e2677","parents":["a0ad64e41516b178a5ad320d99bf7a76ead73abc"],"ref":"refs/changes/50/6650/5","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1564075350,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1564074947,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1564075354,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1564075005,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1564075005,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"tools/check-copyright","type":"MODIFIED","insertions":7,"deletions":-1}],"sizeInsertions":7,"sizeDeletions":-1}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}]}