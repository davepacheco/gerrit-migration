{"project":"joyent/sdcadm","branch":"master","topic":"tritonnfs","id":"I9802eff3e5b7e143eecf8f3f78d2c908ac342bc4","number":"2529","subject":"TOOLS-1421 `sdcadm experimental volapi` to setup Volumes API service VOLAPI-11 Move upgrade to tritonnfs images of core services from sdcadm  to VOLAPI TOOLS-1482 sdcadm experimental volapi fails to download VOLAPI\u0027s image if SAPI\u0027s sdc application\u0027s meta","owner":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"url":"https://cr.joyent.us/2529","commitMessage":"TOOLS-1421 `sdcadm experimental volapi` to setup Volumes API service\nVOLAPI-11 Move upgrade to tritonnfs images of core services from sdcadm  to VOLAPI\nTOOLS-1482 sdcadm experimental volapi fails to download VOLAPI\u0027s image if SAPI\u0027s sdc application\u0027s metadata has update_channel set to a value !\u003d \u0027experimental\u0027\nTOOLS-1611 sdcadm experimental volapi does not create new volapi instance if associated VM was deleted\nTOOLS-1504 set experimental_nfs_shared_volumes in sdc application\u0027s metadata instead of sdc-docker\u0027s service\u0027s metadata\nTOOLS-1697 sdcadm fails to create volapi service if it doesn\u0027t exist\nTOOLS-1821 Remove useless code from sdcadm experimental volapi that polls sdc-docker\nTOOLS-1824 sdcadm update-other should not do anything for VOLAPI\nTOOLS-1823 split sdcadm experimental volapi into sdcadm postsetup and sdcadm experimental commands\nTOOLS-1822 sdcadm experimental volapi should check that images of required core services support NFS volumes\nTOOLS-1830 replace sdcadm experimental nfs-volumes with cloudapi-nfs-volumes/docker-nfs-volumes subcommands\nTOOLS-1829 add sdcadm experimental docker-nfs-volumes-automount\nVOLAPI-74 set zfs_io_priority to 100 for all storage VM packages\nPUBAPI-1420 Add ability to mount NFS volumes with CreateMachine endpoint\nTOOLS-1919 sdcadm experimental nfs-volumes doesn\u0027t handle branch names that include hyphens\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1504883541,"lastUpdated":1510359122,"open":false,"status":"MERGED","comments":[{"timestamp":1504883541,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 1."},{"timestamp":1504883570,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Topic set to tritonnfs"},{"timestamp":1504883589,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1504883596,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 2: Commit message was updated."},{"timestamp":1504883807,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 3."},{"timestamp":1504883846,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1504897493,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3:\n\n(30 comments)"},{"timestamp":1505319492,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 3:\n\n(30 comments)"},{"timestamp":1505335600,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 4."},{"timestamp":1505335633,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1506012535,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 4: Code-Review+1\n\n(5 comments)\n\nOther than minor comments regarding console output, it LGTM. I\u0027d like to know better what\u0027s the master integration plan, since there are many hardcoded \"experimental/tritonnfs\" hacks but, other than that and the gigantic commit message, looks like Trent already did all the CR work here!"},{"timestamp":1506119652,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 4:\n\n(8 comments)"},{"timestamp":1506124945,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 5."},{"timestamp":1506124995,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1506357445,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 5:\n\n(1 comment)\n\nJulien: I forgot to mention that command line help should be added to the man page too. I know, it\u0027s lame and ideally it should be automatically built, but that\u0027s another issue!"},{"timestamp":1506382713,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 6."},{"timestamp":1506382751,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1506383449,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 7."},{"timestamp":1506383487,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1506383582,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1506448762,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 7:\n\n\u003e (1 comment)\n\nI definitely like this more, yeah"},{"timestamp":1506448804,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 7: Code-Review+1"},{"timestamp":1506539271,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 8."},{"timestamp":1506539311,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1506618678,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 8: Code-Review+1"},{"timestamp":1506984333,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 9: Patch Set 8 was rebased."},{"timestamp":1506984372,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9:\n\n\"make check\" passed ok"},{"timestamp":1506988082,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 9:\n\n(4 comments)"},{"timestamp":1506989144,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 9:\n\n(4 comments)"},{"timestamp":1507003098,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 10."},{"timestamp":1507003118,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 9:\n\n(2 comments)"},{"timestamp":1507003141,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1507061805,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 10: Code-Review+1"},{"timestamp":1507164217,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 11: Patch Set 10 was rebased."},{"timestamp":1507164288,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11:\n\n\"make check\" passed ok"},{"timestamp":1507678876,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 11:\n\n(1 comment)"},{"timestamp":1507833904,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 12."},{"timestamp":1507833961,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 12: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1507834268,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 13."},{"timestamp":1507834271,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 11:\n\n(1 comment)"},{"timestamp":1507834324,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 13: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1507842306,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 13: Code-Review+1"},{"timestamp":1508084909,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 13: Code-Review+1"},{"timestamp":1508901488,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 14."},{"timestamp":1508901516,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 14:\n\nThe latest patch set is only a rebase + conflicts resolved."},{"timestamp":1508901519,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 14: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1508903566,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 14: Code-Review+1"},{"timestamp":1509387361,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 15."},{"timestamp":1509387392,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 15: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1509399989,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 15: Code-Review+1\n\nLooks like just a rebase."},{"timestamp":1509646510,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 16."},{"timestamp":1509646541,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 16: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1509647337,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 16: Code-Review+1\n\nre-+1\u0027ing for a rebase"},{"timestamp":1510272657,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 17."},{"timestamp":1510272689,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 17: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1510273253,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 18: Commit message was updated."},{"timestamp":1510357668,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 19."},{"timestamp":1510357700,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 19: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1510358941,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 19: Code-Review+1 Integration-Approval+1"},{"timestamp":1510359070,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 20: Commit message was updated."},{"timestamp":1510359122,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Julien Gilli"}],"currentPatchSet":{"number":"20","revision":"1ff0c70ac430f6f408fe710941470503e0146e50","parents":["1a713cce5c39c82fc1ae2e4e9f9e4c6b35e9bc43"],"ref":"refs/changes/29/2529/20","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1510359070,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1510357700,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1510358941,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1510358941,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1510359122,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":23,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":607,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":487,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":33,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":1145,"sizeDeletions":-7},"patchSets":[{"number":"1","revision":"2875be8e99ebc9d66bf5dd1a7a03bea2e90dde51","parents":["77943537e37e05a1d0e889605ddcaf459b94e9e1"],"ref":"refs/changes/29/2529/1","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1504883541,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1504883589,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":19,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":8,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":471,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":519,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/uuid.js","type":"ADDED","insertions":19,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":5,"deletions":-3}],"sizeInsertions":1031,"sizeDeletions":-9},{"number":"2","revision":"b940fe396b088fb22c030cc4323b2a3371b5f343","parents":["77943537e37e05a1d0e889605ddcaf459b94e9e1"],"ref":"refs/changes/29/2529/2","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1504883596,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1504883589,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":19,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":8,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":471,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":519,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/uuid.js","type":"ADDED","insertions":19,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":5,"deletions":-3}],"sizeInsertions":1031,"sizeDeletions":-9},{"number":"3","revision":"182eb5219509a3e53a380ae5dbb57fc7a39b1433","parents":["77943537e37e05a1d0e889605ddcaf459b94e9e1"],"ref":"refs/changes/29/2529/3","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1504883807,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1504883846,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/cli/do_nfs_volumes.js","line":12,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"An operator might like a way to check the current state of these features: enabled or disabled?  Is there a way to do that with the curr impl? A separate ticket for that would be fine."},{"file":"lib/cli/do_nfs_volumes.js","line":12,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"The only way to do that for now would be to send a request to SAPI and examine the \"sdc\" application\u0027s metadata.\n\nIs such a functionality something that is already provided by other sdcadm experimental tools?\n\nSee https://devhub.joyent.com/jira/browse/TOOLS-1862 to track this."},{"file":"lib/cli/do_nfs_volumes.js","line":29,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"\u0027uuid\u0027 isn\u0027t used I don\u0027t think."},{"file":"lib/cli/do_nfs_volumes.js","line":29,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/cli/do_nfs_volumes.js","line":46,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Style nit: using `next` for this internal callback name is more typical in sdcadm.git."},{"file":"lib/cli/do_nfs_volumes.js","line":46,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/cli/do_nfs_volumes.js","line":165,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Babies!"},{"file":"lib/cli/do_nfs_volumes.js","line":165,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"LOL :)"},{"file":"lib/cli/do_nfs_volumes.js","line":305,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Does this state what the minimum version is for the outdated core services?"},{"file":"lib/cli/do_nfs_volumes.js","line":305,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"It doesn\u0027t, I\u0027ll fix that."},{"file":"lib/cli/do_nfs_volumes.js","line":340,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Feels like noise on the output. I\u0027d drop this one."},{"file":"lib/cli/do_nfs_volumes.js","line":340,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Sounds good, I\u0027ve been using some of these messages as debug messages during development. Are you OK with turning this into a self.log.debug statement?"},{"file":"lib/cli/do_nfs_volumes.js","line":341,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Sorry if I\u0027ve missed other conversation on this. Say a DC wants to turn on these features, but a subset of reserved CNs are not at sufficient platform version... do they just have to  \"--force\" it?"},{"file":"lib/cli/do_nfs_volumes.js","line":341,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"For now, yes. I\u0027m happy to provide support for performing minimum platform checks while excluding some CNs (by server UUID or another way)."},{"file":"lib/cli/do_nfs_volumes.js","line":355,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"This will show an error to the user that certain CNs are too old... but will it state what the min platform version is without the operator having to dive into sdcadm code or docs?"},{"file":"lib/cli/do_nfs_volumes.js","line":355,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"It doesn\u0027t, i\u0027ll fix that."},{"file":"lib/cli/do_nfs_volumes.js","line":355,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/cli/do_nfs_volumes.js","line":371,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"missing an \"s\" there? :)"},{"file":"lib/cli/do_nfs_volumes.js","line":371,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"\"updateDockerNfSharedVolumesFlag\" should actually be renamed to \"updateSapiFlag\" because this function is responsible for updating the SAPI flag that corresponds to the feature that the operator is enabling/disabling, which is not necessarily a Docker feature flag. I\u0027ll fix that."},{"file":"lib/cli/do_nfs_volumes.js","line":459,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"CHANGES.md should mention this command."},{"file":"lib/cli/do_nfs_volumes.js","line":459,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/cli/do_nfs_volumes.js","line":462,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Where does an operator learn about what those three options mean? Should this help output give some basic details here?"},{"file":"lib/cli/do_nfs_volumes.js","line":462,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/logging.js","line":216,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Let\u0027s call the import restifyClients and update the ref here."},{"file":"lib/logging.js","line":216,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/post-setup/index.js","line":77,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I can has blank link before \"//----\" section comment, please?"},{"file":"lib/post-setup/index.js","line":77,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/post-setup/volapi.js","line":28,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"what does \"NB\" stand for?"},{"file":"lib/post-setup/volapi.js","line":28,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Number. I can drop that."},{"file":"lib/post-setup/volapi.js","line":28,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/post-setup/volapi.js","line":59,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I think assert-plus has `arrayOfUuid`"},{"file":"lib/post-setup/volapi.js","line":59,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/post-setup/volapi.js","line":104,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Use \u0027pkg\u0027 for var name to match \u0027pkg\u0027 used in log.info a few lines up."},{"file":"lib/post-setup/volapi.js","line":104,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/post-setup/volapi.js","line":134,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Drop this line. From discussion, volapi doesn\u0027t need a delegate dataset."},{"file":"lib/post-setup/volapi.js","line":134,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/post-setup/volapi.js","line":164,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"assert.string(self.sdcadm.sdc.metadata.datacenter_name,\n-                    \u0027SDC application\\\u0027s metadata must have a \"datacenter_name\" \u0027\n-                        + \u0027property\u0027);\n+        \u0027SDC application\\\u0027s metadata must have a \"datacenter_name\" property\u0027);\n     assert.string(self.sdcadm.sdc.metadata.dns_domain,\n-                    \u0027SDC application\\\u0027s metadata must have a \"dns_domain\" \u0027\n-                        + \u0027property\u0027);\n+        \u0027SDC application\\\u0027s metadata must have a \"dns_domain\" property\u0027);\n\n\nPerhaps? Nit, obviously. :)"},{"file":"lib/post-setup/volapi.js","line":164,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Yes, I\u0027m not sure how this ended up indented like this."},{"file":"lib/post-setup/volapi.js","line":168,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"One var would do here I think. (Perhaps this was cut \u0027n pasted from elsewhere tho.)"},{"file":"lib/post-setup/volapi.js","line":168,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/post-setup/volapi.js","line":179,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"add \"active\" here"},{"file":"lib/post-setup/volapi.js","line":179,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/post-setup/volapi.js","line":200,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Use steps.sapiAssertFullMode for this. Patch: https://gist.github.com/trentm/e3c2ab1c9097162032a4a5ef10efa299"},{"file":"lib/post-setup/volapi.js","line":200,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/post-setup/volapi.js","line":205,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Either add a comment note that this \u0027channel\u0027 should be dropped before merging to master, or change this to use the configured default channel and add a \u0027-C channel\u0027 option to override.\n\nThe latter might be nice. *Or* also add a --image option to specify a particular image to use. It would be nice if other post-setup commands allowed that. In any case, the nice to haves could be separate tickets."},{"file":"lib/post-setup/volapi.js","line":205,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Actually, we\u0027ve been building images and publishing them to the dev channel for a while, so I can drop this now."},{"file":"lib/post-setup/volapi.js","line":285,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"THis is noise."},{"file":"lib/post-setup/volapi.js","line":285,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Are you ok with replacing that with a self.log.debug statement?"},{"file":"lib/post-setup/volapi.js","line":285,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"I think he is! It\u0027s perfectly fine to just replace with self.log.debug."},{"file":"lib/post-setup/volapi.js","line":285,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/post-setup/volapi.js","line":290,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"This is noise as well."},{"file":"lib/post-setup/volapi.js","line":290,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Are you ok with replacing that with a self.log.debug statement?"},{"file":"lib/post-setup/volapi.js","line":290,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Same, yeah!"},{"file":"lib/post-setup/volapi.js","line":290,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/post-setup/volapi.js","line":341,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"This will be problematic in a RFD 67 world with multiple headnodes! Hrm, it looks like other \u0027post-setup\u0027 endpoints will have this same issue. I\u0027ll add a note to my RFD 67 TODOs to look into this."},{"file":"lib/post-setup/volapi.js","line":341,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Sounds good, please let me know when you write something about this in that RFD."},{"file":"lib/post-setup/volapi.js","line":434,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Do you know if anything uses this?"},{"file":"lib/post-setup/volapi.js","line":434,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Only sdc-volapi (via the lib/sdc.sh library in the sdc zone) uses it, and as you mentioned at https://cr.joyent.us/#/c/2522/1/sapi_manifests/sdc/template@32, we could drop it. So I\u0027ll drop both. Good catch!"},{"file":"lib/post-setup/volapi.js","line":434,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Actually, lib/sdc.sh doesn\u0027t use that to generate its \"volapi_domain\" configuration key, so nothing should use it, and thus it\u0027s safe to drop this without making any other change."},{"file":"lib/post-setup/volapi.js","line":442,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Typo"},{"file":"lib/post-setup/volapi.js","line":442,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/post-setup/volapi.js","line":463,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"err"},{"file":"lib/post-setup/volapi.js","line":463,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/sdcadm.js","line":4786,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"If volapi has a /ping endp[oint, you might want to add it here, so \u0027sdcadm check-health\u0027 can call it. However, a separate change for this would be fine."},{"file":"lib/sdcadm.js","line":4786,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"lib/uuid.js","line":18,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"AFAICT, this isn\u0027t used anywhere. This module is *imported* in  lib/cli/do_nfs_volumes.js but not used. We can just drop this file?"},{"file":"lib/uuid.js","line":18,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":19,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":3,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":471,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":519,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/uuid.js","type":"ADDED","insertions":19,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-4}],"sizeInsertions":1027,"sizeDeletions":-10},{"number":"4","revision":"d94b3c208bb8a1503e2fcb0f810055d7615a2fff","parents":["77943537e37e05a1d0e889605ddcaf459b94e9e1"],"ref":"refs/changes/29/2529/4","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1505335600,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505335633,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506012535,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"comments":[{"file":"lib/cli/do_nfs_volumes.js","line":543,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Could we indent the lines not starting with a comment? I think it\u0027ll improve readability"},{"file":"lib/cli/do_nfs_volumes.js","line":543,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Indent as in adding one level of indentation? The current output for sdcadm experimental nfs-volumes --help is:\n\n[root@headnode (coal) ~]# sdcadm experimental nfs-volumes --help\nEnables/disables support for various NFS volumes features.\n\nUsage:\n     # Enable NFS volume support for sdc-docker\n     sdcadm experimental nfs-volumes docker\n     # Disable NFS volume support for sdc-docker\n     sdcadm experimental nfs-volumes docker -d\n     # Enable NFS volume support for CloudAPI\n     sdcadm experimental nfs-volumes cloudapi\n     # Disable NFS volume support for CloudAPI\n     sdcadm experimental nfs-volumes cloudapi -d\n     # Enable docker containers automatically mounting NFS volumes\n     sdcadm experimental nfs-volumes docker-automount\n     # Disable docker containers automatically mounting NFS volumes\n     sdcadm experimental nfs-volumes docker-automount -d\n\nOptions:\n    -h, --help          Show this help.\n    -f, --force         Force enable/disable a given NFS volumes feature,\n                        regardless of prerequisites.\n    -d, --disable       Disable a given docker NFS volume feature instead of\n                        enabling it.\n[root@headnode (coal) ~]#\n\nWhat would you like to see instead?"},{"file":"lib/cli/do_nfs_volumes.js","line":543,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"I\u0027d say either add a line break right after each command description (this is what I\u0027d say will read better) or indent another level the commands described. Anyway, not a big deal."},{"file":"lib/cli/do_nfs_volumes.js","line":543,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Do you like following (note the two \u0027\\n\u0027 after each command except the latest):\n\n\u0027Enables/disables support for various NFS volumes features.\\n\u0027 +\n    \u0027\\n\u0027 +\n    \u0027Usage:\\n\u0027 +\n    \u0027     # Enable NFS volume support for sdc-docker\\n\u0027 +\n    \u0027     {{name}} nfs-volumes docker\\n\\n\u0027 +\n    \u0027     # Disable NFS volume support for sdc-docker\\n\u0027 +\n    \u0027     {{name}} nfs-volumes docker -d\\n\\n\u0027 +\n    \u0027     # Enable NFS volume support for CloudAPI\\n\u0027 +\n    \u0027     {{name}} nfs-volumes cloudapi\\n\\n\u0027 +\n    \u0027     # Disable NFS volume support for CloudAPI\\n\u0027 +\n    \u0027     {{name}} nfs-volumes cloudapi -d\\n\\n\u0027 +\n    \u0027     # Enable docker containers automatically mounting NFS volumes\\n\u0027 +\n    \u0027     {{name}} nfs-volumes docker-automount\\n\\n\u0027 +\n    \u0027     # Disable docker containers automatically mounting NFS volumes\\n\u0027 +\n    \u0027     {{name}} nfs-volumes docker-automount -d\\n\u0027 +\n    \u0027\\n\u0027 +\n    \u0027{{options}}\u0027\n\n?"},{"file":"lib/post-setup/volapi.js","line":206,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"I\u0027d say this is noise too. It would be more than enough with the default IMGAPI output below IMO:\n\n        [root@headnode (coal) ~]# sdcadm post-setup volapi\n        Latest \"volapi\" image is: 29253866-9a21-11e7-aafe-e7dae39311c1\n        Latest \"volapi\" image not found, scheduling import\n        Downloading image 29253866-9a21-11e7-aafe-e7dae39311c1\n            (volapi@master-20170915T141301Z-ga99bde9)"},{"file":"lib/post-setup/volapi.js","line":206,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Without this \"self.progress\" statement the \"Latest \"volapi\" image is: 29253866-9a21-11e7-aafe-e7dae39311c1\" line from the output you pasted above wouldn\u0027t be here though.\n\nSame for your comment below for the \" Latest \"volapi\" image not found, scheduling import\" line."},{"file":"lib/post-setup/volapi.js","line":218,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Ditto. If the image is gonna be downloaded, DownloadImages will provide all the required info."},{"file":"lib/post-setup/volapi.js","line":218,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"This is the full \"sdcadm post-setup volapi\" if I remove this line and the self.progress statement above, and after deleting all volapi images from my COAL\u0027s imgadm using \"for IMG in `sdc-imgadm list -H  name\u003dvolapi | cut -d \u0027 \u0027 -f 1`; do sdc-imgadm delete $IMG; done\":\n\n[root@headnode (coal) ~]# sdcadm post-setup volapi\nDownloading image 29253866-9a21-11e7-aafe-e7dae39311c1\n    (volapi@master-20170915T141301Z-ga99bde9)\nImported image 29253866-9a21-11e7-aafe-e7dae39311c1\n    (volapi@master-20170915T141301Z-ga99bde9)\nGetting volapi service...\nCreating \"volapi\" service\nCreating \"volapi\" instance\nCreated VM 5e8d02fd-4dd5-4c7f-955b-c119d9a27668 (volapi0)\nSetup \"volapi\" (105s)\nYou have new mail in /var/mail/root\n[root@headnode (coal) ~]#"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":19,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":549,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":487,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-4}],"sizeInsertions":1058,"sizeDeletions":-10},{"number":"5","revision":"d5305576b90c456f1626382b7cdd1e0c5a70ceac","parents":["8ec9ab10a047556dd9c198d8b3c4c77270bf1180"],"ref":"refs/changes/29/2529/5","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1506124945,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506124995,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":19,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":549,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":487,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-4}],"sizeInsertions":1059,"sizeDeletions":-10},{"number":"6","revision":"82fe89a236fe076b7ea04ed3e83403310ca3473d","parents":["8ec9ab10a047556dd9c198d8b3c4c77270bf1180"],"ref":"refs/changes/29/2529/6","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1506382713,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506382751,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":20,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":564,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":487,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-4}],"sizeInsertions":1074,"sizeDeletions":-10},{"number":"7","revision":"d0ed200188a0e2d76d66c9148274fb6bf6632901","parents":["8ec9ab10a047556dd9c198d8b3c4c77270bf1180"],"ref":"refs/changes/29/2529/7","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1506383449,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506383487,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506448804,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":20,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":564,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":487,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":34,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-4}],"sizeInsertions":1108,"sizeDeletions":-10},{"number":"8","revision":"01b41246000e68e7383c57cd584b1fb9f25fd1ae","parents":["8ec9ab10a047556dd9c198d8b3c4c77270bf1180"],"ref":"refs/changes/29/2529/8","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1506539271,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506539311,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506618678,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":20,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":565,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":487,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":33,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-4}],"sizeInsertions":1108,"sizeDeletions":-10},{"number":"9","revision":"89f21326072ea03a9b2f7d24b6baa07f52279336","parents":["23834ede8ba891c56f609e204bd414b971cc6ca9"],"ref":"refs/changes/29/2529/9","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1506984333,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506539311,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506618678,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"comments":[{"file":"lib/cli/do_nfs_volumes.js","line":31,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Should these be \"experimental_\" when this hits master?"},{"file":"lib/cli/do_nfs_volumes.js","line":31,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Do you mean they should _not_ be experimental? I\u0027m not sure we (not just you and me) have a shared understanding of what \"experimental\" means.\n\nMy intention was to keep the \"experimental\" name/prefix in each feature until we are confident we can make them generally available."},{"file":"lib/cli/do_nfs_volumes.js","line":440,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I think it would be really helpful to list specific data here:\n- how many servers, out of how many?\n- is that just setup servers that are being checked?\n- does that exclude reserved servers?\n- what was the min platform again?\n- what is the list of platform hostnames?\n- \"capacity might fill up quickly\" is making assumptions that I don\u0027t think the code should make. It could be that one out of 1000 CNs is outdated, for example."},{"file":"lib/cli/do_nfs_volumes.js","line":440,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"This message is just the last message that outputs a conclusion on what went wrong. More details are outputted by the message just above at line 428.\n\nThat message outputs how many servers are outdated, although not out of how many. I can fix that.\n\nOnly setup servers are checked, it seemed natural to only check those, and that it would be intuitive for the operator too, but being more explicit cannot hurt.\n\nIt does exclude reserved servers too. I would make the same observation as for setup servers: it seemed natural and intuitive to not take those into account, but I being more explicit cannot hurt.\n\nThe min platform is outputted by that message, see:\n\n\u0027. Minimum required platform is: \u0027 + platformVersionDep\n\nWhat do you mean by the list of platform hostnames? Do you mean the list of server hostnames?\n\n\u003e \"capacity might fill up quickly\" is making assumptions that I don\u0027t think the code should make. It could be that one out of 1000 CNs is outdated, for example.\n\nHence the \"might\". The goal was to provide a bit more context to the warning message, like what it means for end users when operators see this message. I can drop that though."},{"file":"lib/cli/do_nfs_volumes.js","line":444,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I think say nothing if all is well."},{"file":"lib/cli/do_nfs_volumes.js","line":444,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Will do."},{"file":"lib/cli/do_nfs_volumes.js","line":444,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"},{"file":"man/man1/sdcadm.1.ronn","line":1068,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Is the double \"nfs-volumes nfs-volumes\" a typo?"},{"file":"man/man1/sdcadm.1.ronn","line":1068,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"It is, will fix."},{"file":"man/man1/sdcadm.1.ronn","line":1068,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":20,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":565,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":487,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":33,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-4}],"sizeInsertions":1108,"sizeDeletions":-10},{"number":"10","revision":"150daf2c713f01488a73bdd7404663cfa54f5d25","parents":["23834ede8ba891c56f609e204bd414b971cc6ca9"],"ref":"refs/changes/29/2529/10","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1507003098,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507003141,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507061805,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":20,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":563,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":487,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":33,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-4}],"sizeInsertions":1106,"sizeDeletions":-10},{"number":"11","revision":"85d4c2cb5da2f76d4a45bf61a16a3b5e56a156fd","parents":["ad52065ef80b17d2dde6fcf23fc05fa2771d592a"],"ref":"refs/changes/29/2529/11","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1507164217,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507003141,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507061805,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"package.json","line":25,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Might be worth now getting sdc-clients@10.3.0 to get:\n\n```\n## 10.3.0\n\n- TOOLS-1854: Update `CNAPI.listServers` to use limit/offset to return all\n  servers.\n```\n\nThis code *is* calling cnapi.listServers, though I don\u0027t know that we have real cases where that\u0027ll hit \u003e1000 servers."},{"file":"package.json","line":25,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":20,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":563,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":487,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":33,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-4}],"sizeInsertions":1106,"sizeDeletions":-10},{"number":"12","revision":"7d590e9d39580672a0608677a5fa88b333142312","parents":["a5cebbf42eaafd8433860694e039c1f91d1db347"],"ref":"refs/changes/29/2529/12","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1507833904,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507833961,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":20,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":563,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":487,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":33,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-4}],"sizeInsertions":1106,"sizeDeletions":-10},{"number":"13","revision":"bb2534b6ec5fdccd5ab7e0552b5ac4902c2b9518","parents":["a5cebbf42eaafd8433860694e039c1f91d1db347"],"ref":"refs/changes/29/2529/13","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1507834268,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507834324,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507842306,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1508084909,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":20,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":563,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":487,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":33,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-4}],"sizeInsertions":1106,"sizeDeletions":-10},{"number":"14","revision":"3d856f5c0659a7f30ac4dde0a157f2ef30dddd12","parents":["499900990c8e9432222df04b462bf8a686a17f49"],"ref":"refs/changes/29/2529/14","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1508901488,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1508901519,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1508903566,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":20,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":563,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":487,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":33,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-4}],"sizeInsertions":1106,"sizeDeletions":-10},{"number":"15","revision":"93b2eb598735d35feaf406945665c1b21c51c12a","parents":["9f95b17b77cf68afb6a02b1eb269957fc6b7b57b"],"ref":"refs/changes/29/2529/15","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1509387361,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509387392,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1509399989,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":20,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":563,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":487,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":33,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":6,"deletions":-4}],"sizeInsertions":1104,"sizeDeletions":-9},{"number":"16","revision":"981294b500073c667102bd3ab544fb0a3cc48f6d","parents":["1a713cce5c39c82fc1ae2e4e9f9e4c6b35e9bc43"],"ref":"refs/changes/29/2529/16","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1509646510,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1509646541,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1509647337,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":20,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":563,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":487,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":33,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":1101,"sizeDeletions":-7},{"number":"17","revision":"44a561e403b29f839cf3c660d4796805217f3eae","parents":["1a713cce5c39c82fc1ae2e4e9f9e4c6b35e9bc43"],"ref":"refs/changes/29/2529/17","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1510272657,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1510272689,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":20,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":576,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":487,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":33,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":1114,"sizeDeletions":-7},{"number":"18","revision":"1976c48246b360fc194c3f9cdc82bf386804daae","parents":["1a713cce5c39c82fc1ae2e4e9f9e4c6b35e9bc43"],"ref":"refs/changes/29/2529/18","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1510273253,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1510272689,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":21,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":576,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":487,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":33,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":1114,"sizeDeletions":-7},{"number":"19","revision":"9802eff3e5b7e143eecf8f3f78d2c908ac342bc4","parents":["1a713cce5c39c82fc1ae2e4e9f9e4c6b35e9bc43"],"ref":"refs/changes/29/2529/19","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1510357668,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1510357700,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1510358941,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1510358941,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":21,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":607,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":487,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":33,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":1145,"sizeDeletions":-7},{"number":"20","revision":"1ff0c70ac430f6f408fe710941470503e0146e50","parents":["1a713cce5c39c82fc1ae2e4e9f9e4c6b35e9bc43"],"ref":"refs/changes/29/2529/20","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1510359070,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1510357700,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1510358941,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1510358941,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1510359122,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":23,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":607,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":487,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":33,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":1145,"sizeDeletions":-7}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}]}