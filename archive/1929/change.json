{"project":"joyent/illumos-joyent","branch":"master","id":"Id7b3c0f0f9f6c7bd9fbafc475db0d96a54372712","number":"1929","subject":"OS-6080 xsave area should size dynamically, based on CPU features Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Approved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e","owner":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"url":"https://cr.joyent.us/1929","commitMessage":"OS-6080 xsave area should size dynamically, based on CPU features\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nApproved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n","createdOn":1494451888,"lastUpdated":1494880829,"open":false,"status":"MERGED","comments":[{"timestamp":1494451888,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 1."},{"timestamp":1494451948,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\nThis runs on the skylake and within my VM. It still needs a lot more testing but I would like to start getting any feedback to incorporate those changes into the more thorough testing."},{"timestamp":1494453900,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 2."},{"timestamp":1494453922,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\nFixed up some comments which should help make this easier to understand."},{"timestamp":1494515866,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2:\n\n(3 comments)"},{"timestamp":1494518850,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2:\n\n(4 comments)\n\nHi Jerry, this looks generally good. I agree with the comments that Patrick left and have a few other questions."},{"timestamp":1494531978,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\n(7 comments)"},{"timestamp":1494533227,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 3."},{"timestamp":1494533322,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1494533996,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1494534421,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1494535026,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 4."},{"timestamp":1494543887,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4:\n\n(2 comments)"},{"timestamp":1494590990,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 5."},{"timestamp":1494613745,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1494620057,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 5:\n\n(2 comments)\n\nLooks good, just a couple nits"},{"timestamp":1494626691,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 6."},{"timestamp":1494628695,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1494630641,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1494630663,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 6: Integration-Approval+1"},{"timestamp":1494880419,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 7: Patch Set 6 was rebased."},{"timestamp":1494880800,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 8: Commit message was updated."},{"timestamp":1494880829,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jerry Jelinek"}],"currentPatchSet":{"number":"8","revision":"d7b3c0f0f9f6c7bd9fbafc475db0d96a54372712","parents":["f6eee9d5d93f3520a710256fe44de129a12f155f"],"ref":"refs/changes/29/1929/8","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1494880800,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1494628695,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1494630641,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1494630663,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1494880829,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/os/lwp.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/sys/proc.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":13,"deletions":-5},{"file":"usr/src/uts/i86pc/os/fpu_subr.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/os/machdep.c","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"usr/src/uts/intel/ia32/ml/exception.s","type":"MODIFIED","insertions":11,"deletions":-2},{"file":"usr/src/uts/intel/ia32/ml/float.s","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"usr/src/uts/intel/ia32/os/archdep.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/intel/ia32/os/fpu.c","type":"MODIFIED","insertions":82,"deletions":-21},{"file":"usr/src/uts/intel/ia32/os/sundep.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/intel/sys/archsystm.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/intel/sys/fp.h","type":"MODIFIED","insertions":12,"deletions":-5},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/sun4/os/machdep.c","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":174,"sizeDeletions":-45},"patchSets":[{"number":"1","revision":"c4417f0f2425f1a0ac8b83cb3b6c1bfdca641064","parents":["7f03e7512c8cd583b648bf5431882a6faaa25423"],"ref":"refs/changes/29/1929/1","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1494451888,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/os/lwp.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/uts/i86pc/os/machdep.c","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/uts/intel/ia32/ml/exception.s","type":"MODIFIED","insertions":11,"deletions":-2},{"file":"usr/src/uts/intel/ia32/ml/float.s","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"usr/src/uts/intel/ia32/os/archdep.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/intel/ia32/os/fpu.c","type":"MODIFIED","insertions":73,"deletions":-21},{"file":"usr/src/uts/intel/sys/fp.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":131,"sizeDeletions":-33},{"number":"2","revision":"f458818b938d1b5a5fc14f256fc85a50be4aff37","parents":["7f03e7512c8cd583b648bf5431882a6faaa25423"],"ref":"refs/changes/29/1929/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1494453900,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/os/lwp.c","line":1910,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I\u0027m definitely not a fan of us reaching deeply into an arch-specific struct here in common code.  Since lwp_fpu appears to be unused on x86, perhaps it could be used to store a pointer to arch-specific dynamically-sized FPU state?  Like sparc, it could be populated (along with kfpu_xs) during lwp_stk_init() and cleaned up in lwp_stk_fini() as you already have.\n\nIt would be nice, if possible, to avoid adding more ifdefs to this common section."},{"file":"usr/src/uts/common/os/lwp.c","line":1910,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"This is a great suggestion, done."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":3540,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Use the MAX() macro here?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":3540,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"done"},{"file":"usr/src/uts/intel/ia32/ml/float.s","line":335,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I think it\u0027d help to comment what we\u0027re derferencing here. The others make it clear because of the macros."},{"file":"usr/src/uts/intel/ia32/ml/float.s","line":335,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"done"},{"file":"usr/src/uts/intel/ia32/ml/float.s","line":396,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I think it\u0027d help to comment what we\u0027re derferencing here. The others make it clear because of the macros."},{"file":"usr/src/uts/intel/ia32/ml/float.s","line":396,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"done"},{"file":"usr/src/uts/intel/ia32/os/fpu.c","line":424,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"What maintains this constraint in the new code? Is this alignment what we need or do we need more alignment for 512-bit AVX registers?"},{"file":"usr/src/uts/intel/ia32/os/fpu.c","line":424,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"The kmem alloc code was aligning the object correctly, but that was not an explicit choice. Actually, this assertion was incorrect. See section 13.4 in Vol. 1 of the Intel developers Guide. The xsave area must be 64 byte aligned. I have addressed this by switching to a kmem cache."},{"file":"usr/src/uts/intel/ia32/os/fpu.c","line":415,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Should we have a dedicated kmem cache for the FPU reg structure?"},{"file":"usr/src/uts/intel/ia32/os/fpu.c","line":415,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Great suggestion. This allows me to ensure the alignment constraint and will also save memory vs the generic allocation chunks."},{"file":"usr/src/uts/intel/sys/fp.h","line":313,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Why a \u0027void *\u0027 for the klwp_t arguments here?"},{"file":"usr/src/uts/intel/sys/fp.h","line":313,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"This header is included by some files which do not have the definition for a klwp_t type."},{"file":"usr/src/uts/intel/sys/fp.h","line":313,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Maybe use a forward definition like \u0027struct regs\u0027 above?"},{"file":"usr/src/uts/intel/sys/fp.h","line":313,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"genassym won\u0027t accept that:\n\u0027struct _klwp\u0027 declared inside parameter list"},{"file":"usr/src/uts/intel/sys/fp.h","line":313,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Actually, I was missing the initial declaration, that works."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/os/lwp.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":14,"deletions":-5},{"file":"usr/src/uts/i86pc/os/machdep.c","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/uts/intel/ia32/ml/exception.s","type":"MODIFIED","insertions":11,"deletions":-2},{"file":"usr/src/uts/intel/ia32/ml/float.s","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"usr/src/uts/intel/ia32/os/archdep.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/intel/ia32/os/fpu.c","type":"MODIFIED","insertions":73,"deletions":-21},{"file":"usr/src/uts/intel/sys/fp.h","type":"MODIFIED","insertions":11,"deletions":-5},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":144,"sizeDeletions":-42},{"number":"3","revision":"06aef1d03ea904f85391993782e8bbf0cedcb7b9","parents":["7f03e7512c8cd583b648bf5431882a6faaa25423"],"ref":"refs/changes/29/1929/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1494533227,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/os/lwp.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/sys/proc.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":13,"deletions":-5},{"file":"usr/src/uts/i86pc/os/fpu_subr.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/i86pc/os/machdep.c","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"usr/src/uts/intel/ia32/ml/exception.s","type":"MODIFIED","insertions":11,"deletions":-2},{"file":"usr/src/uts/intel/ia32/ml/float.s","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"usr/src/uts/intel/ia32/os/archdep.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/intel/ia32/os/fpu.c","type":"MODIFIED","insertions":85,"deletions":-21},{"file":"usr/src/uts/intel/ia32/os/sundep.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/intel/sys/archsystm.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/intel/sys/fp.h","type":"MODIFIED","insertions":11,"deletions":-5},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/sun4/os/machdep.c","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":170,"sizeDeletions":-45},{"number":"4","revision":"e09af0e0a241d385b77f32d07edf9275ce9c5aa8","parents":["7f03e7512c8cd583b648bf5431882a6faaa25423"],"ref":"refs/changes/29/1929/4","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1494535026,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/i86pc/os/fpu_subr.c","line":168,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I\u0027d recommend that we have a comment that explains which manual this comes from or even better, making this a #define in the cpuid / archext headers with a similar comment."},{"file":"usr/src/uts/i86pc/os/fpu_subr.c","line":198,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Same as the amd64 version."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/os/lwp.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/sys/proc.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":13,"deletions":-5},{"file":"usr/src/uts/i86pc/os/fpu_subr.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/i86pc/os/machdep.c","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"usr/src/uts/intel/ia32/ml/exception.s","type":"MODIFIED","insertions":11,"deletions":-2},{"file":"usr/src/uts/intel/ia32/ml/float.s","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"usr/src/uts/intel/ia32/os/archdep.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/intel/ia32/os/fpu.c","type":"MODIFIED","insertions":82,"deletions":-21},{"file":"usr/src/uts/intel/ia32/os/sundep.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/intel/sys/archsystm.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/intel/sys/fp.h","type":"MODIFIED","insertions":12,"deletions":-5},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/sun4/os/machdep.c","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":168,"sizeDeletions":-45},{"number":"5","revision":"c9ab5111245653b5c2d11270d9c23f9c519a1b67","parents":["7f03e7512c8cd583b648bf5431882a6faaa25423"],"ref":"refs/changes/29/1929/5","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1494590990,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1494613745,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"comments":[{"file":"usr/src/uts/intel/ia32/os/fpu.c","line":413,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"extra space"},{"file":"usr/src/uts/intel/sys/fp.h","line":239,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"xsave_state"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/os/lwp.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/sys/proc.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":13,"deletions":-5},{"file":"usr/src/uts/i86pc/os/fpu_subr.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/os/machdep.c","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"usr/src/uts/intel/ia32/ml/exception.s","type":"MODIFIED","insertions":11,"deletions":-2},{"file":"usr/src/uts/intel/ia32/ml/float.s","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"usr/src/uts/intel/ia32/os/archdep.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/intel/ia32/os/fpu.c","type":"MODIFIED","insertions":82,"deletions":-21},{"file":"usr/src/uts/intel/ia32/os/sundep.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/intel/sys/archsystm.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/intel/sys/fp.h","type":"MODIFIED","insertions":12,"deletions":-5},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/sun4/os/machdep.c","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":174,"sizeDeletions":-45},{"number":"6","revision":"d89259342d92cdfbd3f148eb6a815e9388c8f2ec","parents":["4489e7eb89498cc30ab177b8842176c6d809a374"],"ref":"refs/changes/29/1929/6","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1494626691,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1494630641,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1494628695,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1494630663,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/os/lwp.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/sys/proc.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":13,"deletions":-5},{"file":"usr/src/uts/i86pc/os/fpu_subr.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/os/machdep.c","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"usr/src/uts/intel/ia32/ml/exception.s","type":"MODIFIED","insertions":11,"deletions":-2},{"file":"usr/src/uts/intel/ia32/ml/float.s","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"usr/src/uts/intel/ia32/os/archdep.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/intel/ia32/os/fpu.c","type":"MODIFIED","insertions":82,"deletions":-21},{"file":"usr/src/uts/intel/ia32/os/sundep.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/intel/sys/archsystm.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/intel/sys/fp.h","type":"MODIFIED","insertions":12,"deletions":-5},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/sun4/os/machdep.c","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":174,"sizeDeletions":-45},{"number":"7","revision":"6eafeebd23839f487e27c579aec8513666f1a2a4","parents":["f6eee9d5d93f3520a710256fe44de129a12f155f"],"ref":"refs/changes/29/1929/7","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1494880419,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1494630641,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1494628695,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1494630663,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/os/lwp.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/sys/proc.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":13,"deletions":-5},{"file":"usr/src/uts/i86pc/os/fpu_subr.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/os/machdep.c","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"usr/src/uts/intel/ia32/ml/exception.s","type":"MODIFIED","insertions":11,"deletions":-2},{"file":"usr/src/uts/intel/ia32/ml/float.s","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"usr/src/uts/intel/ia32/os/archdep.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/intel/ia32/os/fpu.c","type":"MODIFIED","insertions":82,"deletions":-21},{"file":"usr/src/uts/intel/ia32/os/sundep.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/intel/sys/archsystm.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/intel/sys/fp.h","type":"MODIFIED","insertions":12,"deletions":-5},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/sun4/os/machdep.c","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":174,"sizeDeletions":-45},{"number":"8","revision":"d7b3c0f0f9f6c7bd9fbafc475db0d96a54372712","parents":["f6eee9d5d93f3520a710256fe44de129a12f155f"],"ref":"refs/changes/29/1929/8","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1494880800,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1494630641,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1494880829,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1494628695,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1494630663,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/os/lwp.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/sys/proc.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":13,"deletions":-5},{"file":"usr/src/uts/i86pc/os/fpu_subr.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/os/machdep.c","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"usr/src/uts/intel/ia32/ml/exception.s","type":"MODIFIED","insertions":11,"deletions":-2},{"file":"usr/src/uts/intel/ia32/ml/float.s","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"usr/src/uts/intel/ia32/os/archdep.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/intel/ia32/os/fpu.c","type":"MODIFIED","insertions":82,"deletions":-21},{"file":"usr/src/uts/intel/ia32/os/sundep.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/intel/sys/archsystm.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/intel/sys/fp.h","type":"MODIFIED","insertions":12,"deletions":-5},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/sun4/os/machdep.c","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":174,"sizeDeletions":-45}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}]}