{"project":"joyent/node-fash","branch":"master","id":"I2076fc4830e5be66f3e4fd834c81ed6ff92bf844","number":"2566","subject":"MANTA-3382 node-fash data structure exposure Reviewed by: Richard Bradley \u003crichard.bradley@joyent.com\u003e Approved by: Richard Bradley \u003crichard.bradley@joyent.com\u003e","owner":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"url":"https://cr.joyent.us/2566","commitMessage":"MANTA-3382 node-fash data structure exposure\nReviewed by: Richard Bradley \u003crichard.bradley@joyent.com\u003e\nApproved by: Richard Bradley \u003crichard.bradley@joyent.com\u003e\n","createdOn":1505351660,"lastUpdated":1506097968,"open":false,"status":"MERGED","comments":[{"timestamp":1505351660,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 1."},{"timestamp":1505354103,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 2."},{"timestamp":1505354284,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 3."},{"timestamp":1505410123,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1505465206,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 3:\n\n(9 comments)\n\nI admit to not being very well versed in the node-fash codebase, so I expect a lot of my comments can be addressed as being in line with the existing code.\n\nIt would also be good to see some testing notes if you\u0027ve written them down somewhere."},{"timestamp":1505508803,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Patch Set 3:\n\n(2 comments)\n\nThank you so much for your detailed feedback.  As you suspect, I am indeed following node-fash conventions, which are pretty old.  I think it is a good idea to update, though.  I will incorporate this feedback in the next round of changes -- thanks again!"},{"timestamp":1505520150,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 4."},{"timestamp":1505724850,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 4:\n\n(12 comments)\n\nThanks for the updates and for the testing notes!\n\nI\u0027ve still not proofread the README yet, but I do plan on getting to it!"},{"timestamp":1505777488,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 5."},{"timestamp":1505817568,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 5:\n\n(8 comments)"},{"timestamp":1505840889,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 6."},{"timestamp":1505843852,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 7."},{"timestamp":1505913789,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 7: Code-Review+1\n\n(3 comments)\n\nThanks for the thorough testing notes. Code looks good to me!\n\nI\u0027d be happy to IA too, but I think the README could do without some of the HTML. I\u0027ve dropped some comments over there to clarify."},{"timestamp":1505953087,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 8."},{"timestamp":1506004933,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 8: Code-Review+1\n\n(1 comment)"},{"timestamp":1506016177,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 9."},{"timestamp":1506019951,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 9: Code-Review+1 Integration-Approval+1\n\nThank you for being so understanding of my markdown pedantry!"},{"timestamp":1506021014,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 10."},{"timestamp":1506085417,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 10: Code-Review+1 Integration-Approval+1"},{"timestamp":1506097927,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Uploaded patch set 11: Commit message was updated."},{"timestamp":1506097968,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Brittany Wald"}],"currentPatchSet":{"number":"11","revision":"2076fc4830e5be66f3e4fd834c81ed6ff92bf844","parents":["bb9d561ce6e19683aac147470e3a51067858bd47"],"ref":"refs/changes/66/2566/11","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1506097927,"author":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506085417,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506085417,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"SUBM","value":"1","grantedOn":1506097968,"by":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":576,"deletions":-54},{"file":"bin/fash.js","type":"MODIFIED","insertions":126,"deletions":-45},{"file":"lib/backend/leveldb.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"test/leveldb.test.js","type":"MODIFIED","insertions":60,"deletions":-11}],"sizeInsertions":768,"sizeDeletions":-113},"patchSets":[{"number":"1","revision":"1bc6b91bd80fc82f14af43e0860628d2d1a2db24","parents":["07ba3ae5e7338e53c08891af874e386b3282765f"],"ref":"refs/changes/66/2566/1","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1505351660,"author":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":420,"deletions":-52},{"file":"bin/fash.js","type":"MODIFIED","insertions":74,"deletions":-2},{"file":"lib/backend/leveldb.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":5,"deletions":-1}],"sizeInsertions":501,"sizeDeletions":-58},{"number":"2","revision":"3e5d74f4a0c1d14f62c6ce277b15bdf5b6f77de2","parents":["07ba3ae5e7338e53c08891af874e386b3282765f"],"ref":"refs/changes/66/2566/2","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1505354103,"author":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":603,"deletions":-53},{"file":"bin/fash.js","type":"MODIFIED","insertions":74,"deletions":-2},{"file":"lib/backend/leveldb.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":5,"deletions":-1}],"sizeInsertions":684,"sizeDeletions":-59},{"number":"3","revision":"d3336f67741a7a400ea376ea1aefde5343db5d3a","parents":["07ba3ae5e7338e53c08891af874e386b3282765f"],"ref":"refs/changes/66/2566/3","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1505354284,"author":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505410123,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}}],"comments":[{"file":"README.md","line":0,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Is there a specific reason for the inline HTML? I think most things here can be done in pure markdown, and I\u0027d be happy to help put that in place if you\u0027d like.\n\nI haven\u0027t read the new text yet, but I plan on going over it soon!"},{"file":"README.md","line":0,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"I used them because (maybe I just haven\u0027t found the way, but) it seemed to me that anchor tags would have to be inline html regardless in markdown.  Because I have so many anchor tags that are also links, it made sense to me to use them together for an appearance of consistently."},{"file":"README.md","line":0,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"I think what I was referring to is actually specific to GitHub, or at least certain implementations of Markdown. Some searching tells me you\u0027re right in that it\u0027s not possible in standard Markdown!\n\nHowever, some of our docs make use of the implicit ID that GitHub will generate for a heading to create anchors onto. I think the best example of this (because it lives in GitHub _and_ NPM) is node-vasync: https://github.com/joyent/node-vasync/blob/548e7982ab07a0855e5694e6fe691f21397be527/README.md#parallel-invoke-n-functions-in-parallel\n\nIn this guide, it should be possible to do something like so:\n\n    [Design Summary](#design-summary)\n\n... where somehow GitHub will generate a slug of the heading, and you then don\u0027t need to manually add anchors to each heading. I tested this out here: https://gist.github.com/chudley/9c65a314e3619fcc7a15d9ea246741a1#section-two\n\nI don\u0027t have a strong preference on this, but I feel like relying on GitHub\u0027s stuff will be OK and more readable. This probably varies quite a lot across repos, and given that this will end up on NPM then there might be other things to consider that I\u0027m not aware of!"},{"file":"bin/fash.js","line":904,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Does this function pass `make check`? I would expect linting to say something along the lines of \"callback\" not always being called (unless I\u0027m misunderstanding something), but I guess we may have different or old dependencies here.\n\nI think I follow the vasync.pipeline, and I\u0027m not sure how much convention is in place for this, but following along I would expect \"vnodeArray\" to be assigned to a variable inside \"getDataVnodes\" and then printed inside the pipeline\u0027s closing callback. I think this would make it easier to follow.\n\nAs it is, I can\u0027t see how \"do_get_data_vnodes\" would hit its passed callback if everything goes to plan."},{"file":"bin/fash.js","line":909,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"I understand this convention to be deprecated, where we prefer the following:\n\n    callback();\n    return;\n\nI\u0027m happy with your change so long as it fits into the existing style of the codebase, though."},{"file":"bin/fash.js","line":920,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Is there a reason for doing this inside the pipeline, and not just after the \"opts.help\" check above?"},{"file":"bin/fash.js","line":930,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Is this required? I think with the current \"if\" bracing, we\u0027d only ever hit \"callback\" or \"cb\"."},{"file":"bin/fash.js","line":949,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Do we want to print the error here, or should we pass it in our callback instead? I\u0027m not sure how \"cmdln\" would know to print the appropriate exit code if we print the error and don\u0027t pass it in our callback."},{"file":"bin/fash.js","line":953,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Is this required?"},{"file":"bin/fash.js","line":964,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"In code I\u0027ve seen in the past (and in the string continuations above) we tend to put the \u0027+\u0027 on the tail of the previous line. Is there a reason it\u0027s not done this way here?"},{"file":"lib/backend/leveldb.js","line":1267,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"What is the change here? Gerrit is showing me a solid green bar after this text, but I can\u0027t tell what the change is."},{"file":"lib/backend/leveldb.js","line":1267,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"It\u0027s a line of whitespace below that line (I can remove this)."},{"file":"lib/backend/leveldb.js","line":1267,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Ah, thanks. I understand now. This is fine!"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":603,"deletions":-53},{"file":"bin/fash.js","type":"MODIFIED","insertions":73,"deletions":-1},{"file":"lib/backend/leveldb.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":5,"deletions":-1}],"sizeInsertions":683,"sizeDeletions":-58},{"number":"4","revision":"d5841bfad72d19f53b3d04e59d83c4926d89c8e5","parents":["07ba3ae5e7338e53c08891af874e386b3282765f"],"ref":"refs/changes/66/2566/4","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1505520150,"author":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"isDraft":false,"kind":"REWORK","comments":[{"file":"bin/fash.js","line":907,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Very nitty, but reading this code I find myself referring to the \"options\" array below in order to find out what these shorthand opts refer to.\n\nIt would be easier to read if we used the full name of the option in these places (e.g. \"opts.location\")."},{"file":"bin/fash.js","line":938,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"This might be easier to read if we started with:\n\n    if (!opts.v) {\n        cb();\n        return;\n    }\n    _.dataHash \u003d {};\n    ....\n\nI see this pattern in the manatee codebase quite a lot (e.g. https://github.com/joyent/manatee/blob/34238c257d3cb6fe7eba247c7e40a1dd49c4f3e8/lib/postgresMgr.js#L1322), where it means you\u0027re not working in an indentation deeper than necessary."},{"file":"bin/fash.js","line":941,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"What does \"input\" contain? This variable name is probably fine, but is there a more descriptive name we could use here? \"vnodeId\", or just \"vnode\"?"},{"file":"bin/fash.js","line":945,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Do we want to instantiate the error with \"new\" here? This is in a few other places, too."},{"file":"bin/fash.js","line":947,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"I don\u0027t know if string concatenation works this way in node-verror (it at least doesn\u0027t seem to work in the version I tried).\n\nShould we be using \"+\" for concatenation here?"},{"file":"bin/fash.js","line":950,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Very nitty and depends on preference, but it might be less repetition if we assigned the whole object like so:\n\n    _.dataHash[input] \u003d {\n        \u0027pnode\u0027: pnode\n    ...\n\nIf the name of \"dataHash\" or \"input\" have to change in the future, it means only one line to update."},{"file":"bin/fash.js","line":953,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"I think we at least don\u0027t need to pass \"err\" here as it\u0027s explicitly handled above if it exists. Do we also need to pass back \"null\" as the second arg? I wonder if we could just do \"_cb()\" here."},{"file":"bin/fash.js","line":961,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"I think we want to hit our callback with this error, so that we\u0027ll error out of the whole pipeline and the CLI will report a non-zero exit code in the event of a failure. I also don\u0027t think we need a new VError, as we\u0027ve already created one in the \"getResults\" callback above that would contain this information."},{"file":"bin/fash.js","line":963,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Trailing whitespace in our string."},{"file":"bin/fash.js","line":981,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Will \"cmdln\" print our error for us if passed in a callback? If that\u0027s the case, can we just close this pipeline out like so?\n\n    ], arg: {}}, callback);"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":605,"deletions":-53},{"file":"bin/fash.js","type":"MODIFIED","insertions":108,"deletions":-1},{"file":"lib/backend/leveldb.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"test/leveldb.test.js","type":"MODIFIED","insertions":52,"deletions":0}],"sizeInsertions":771,"sizeDeletions":-57},{"number":"5","revision":"cb890872ff3e3bb895c173828254e9b413b71afc","parents":["07ba3ae5e7338e53c08891af874e386b3282765f"],"ref":"refs/changes/66/2566/5","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1505777488,"author":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"isDraft":false,"kind":"REWORK","comments":[{"file":"README.md","line":0,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Does this README render OK using GitHub\u0027s markdown? Are we able to tell what this will look like on NPM\u0027s site prior to publishing?"},{"file":"README.md","line":31,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Could we convert this to a markdown list instead? That way I don\u0027t think we\u0027d need all of those \"\u003cbr\u003e\"\u0027s."},{"file":"README.md","line":273,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"I don\u0027t know that hardware \u003d\u003d\u003d pnodes. That\u0027s quite specific to how we make use of this ring in Manta, where each pnode _should_ have its own hardware.\n\nI don\u0027t have full context of the document, so this might be fine. I think we could probably get away with just saying \"additional pnodes are necessary\"."},{"file":"README.md","line":351,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Could this be a version number instead?"},{"file":"README.md","line":408,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"\"What this means\" instead? I don\u0027t think much of our public-facing documentation uses this kind of personal terminology."},{"file":"README.md","line":457,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"\"pnode\" instead?"},{"file":"bin/fash.js","line":947,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Will \"err\" contain the relevant vnode information to determine the vnode if we do hit this error? If not, I still think we should include the vnode information in the error (you could also use string interpolation with \"%s\" in VError, which may actually have been the original intention of this codebase)."},{"file":"bin/fash.js","line":962,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"This one is entirely up to your personal preference:\n\nAs long as we\u0027re not doing anything specific with \"err\" anymore (which looks to be the case), we should just be able to replace this line with:\n\n    }, cb);\n\n... in which case \"err\" will terminate the pipeline and be equivalent to what we have here, just in less lines."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":605,"deletions":-53},{"file":"bin/fash.js","type":"MODIFIED","insertions":104,"deletions":-3},{"file":"lib/backend/leveldb.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"test/leveldb.test.js","type":"MODIFIED","insertions":52,"deletions":0}],"sizeInsertions":767,"sizeDeletions":-59},{"number":"6","revision":"b7f558fbaca073cc6e3de9e535c659fbed1f45ae","parents":["07ba3ae5e7338e53c08891af874e386b3282765f"],"ref":"refs/changes/66/2566/6","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1505840889,"author":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":605,"deletions":-53},{"file":"bin/fash.js","type":"MODIFIED","insertions":99,"deletions":-3},{"file":"lib/backend/leveldb.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"test/leveldb.test.js","type":"MODIFIED","insertions":52,"deletions":0}],"sizeInsertions":762,"sizeDeletions":-59},{"number":"7","revision":"52e427f1b2221c1e229cd0f9978f08b8060c5ab8","parents":["07ba3ae5e7338e53c08891af874e386b3282765f"],"ref":"refs/changes/66/2566/7","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1505843852,"author":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505913789,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}}],"comments":[{"file":"README.md","line":0,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"I think we should do all of this in pure Markdown, minus some anchors (mostly for the samples). I\u0027ve dropped a few examples here, but I\u0027d be happy to get a patch together if it helps!\n\nUsing an example from the index:\n\n    [Bootstrapping a New Hash Ring](#bootstrapping-a-new-hash-ring)\n\nThere\u0027s also a few places where I think we could just use Markdown to format text, such as `\u003cb\u003e` and `\u003ccode\u003e`, as well as some HTML line breaks.\n\nAs for the mix of anchors and link (e.g. \"sample-datav\", L526), could we separate these so that we can use plain Markdown for the links? For example (this might not look good in gerrit, but here goes...):\n\n    ...\n    contains first.  A list of vnodes on any pnode is available\n    with the [`get-vnodes`](#get-vnodes) command.\n\n    \u003ca name\u003d\"sample-vnodes\"\u003e\u003c/a\u003e\n\n        $ ./bin/fash.js get-vnodes \u0027tcp://3.moray.emy-11.joyent.us:2020\u0027 -l /var/tmp/rings/readme_sample -b leveldb\n        [ 4 ]\n\nIn that particular example, while taking a closer look it actually appears that this HTML would be invalid because there\u0027s too many closing `\u003c/a\u003e` tags."},{"file":"README.md","line":19,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Looks like a typo: Bootstrapping"},{"file":"README.md","line":50,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Same typo here."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":605,"deletions":-53},{"file":"bin/fash.js","type":"MODIFIED","insertions":126,"deletions":-45},{"file":"lib/backend/leveldb.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"test/leveldb.test.js","type":"MODIFIED","insertions":60,"deletions":-11}],"sizeInsertions":797,"sizeDeletions":-112},{"number":"8","revision":"75ff07e0d3ac21e23db14af989c3c2f411e5c422","parents":["07ba3ae5e7338e53c08891af874e386b3282765f"],"ref":"refs/changes/66/2566/8","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1505953087,"author":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506004933,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}}],"comments":[{"file":"README.md","line":33,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Can we remove these anchors (where they anchor to a heading) and update our links to use the generated ID instead? In this case the ID would be `#design-summary`.\n\nThis means the HTML is reduced to only the `#sample-*` anchors throughout the document."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":601,"deletions":-54},{"file":"bin/fash.js","type":"MODIFIED","insertions":126,"deletions":-45},{"file":"lib/backend/leveldb.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"test/leveldb.test.js","type":"MODIFIED","insertions":60,"deletions":-11}],"sizeInsertions":793,"sizeDeletions":-113},{"number":"9","revision":"f16542c76f4c9b74b9efc7fbfd264b98a77064c4","parents":["07ba3ae5e7338e53c08891af874e386b3282765f"],"ref":"refs/changes/66/2566/9","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1506016177,"author":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506019951,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506019951,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":576,"deletions":-54},{"file":"bin/fash.js","type":"MODIFIED","insertions":126,"deletions":-45},{"file":"lib/backend/leveldb.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"test/leveldb.test.js","type":"MODIFIED","insertions":60,"deletions":-11}],"sizeInsertions":768,"sizeDeletions":-113},{"number":"10","revision":"d4bc5152bd2807efd3f06afebc8f15490a3d650a","parents":["bb9d561ce6e19683aac147470e3a51067858bd47"],"ref":"refs/changes/66/2566/10","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1506021014,"author":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506085417,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506085417,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":576,"deletions":-54},{"file":"bin/fash.js","type":"MODIFIED","insertions":126,"deletions":-45},{"file":"lib/backend/leveldb.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"test/leveldb.test.js","type":"MODIFIED","insertions":60,"deletions":-11}],"sizeInsertions":768,"sizeDeletions":-113},{"number":"11","revision":"2076fc4830e5be66f3e4fd834c81ed6ff92bf844","parents":["bb9d561ce6e19683aac147470e3a51067858bd47"],"ref":"refs/changes/66/2566/11","uploader":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"createdOn":1506097927,"author":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506085417,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506085417,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"SUBM","value":"1","grantedOn":1506097968,"by":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":576,"deletions":-54},{"file":"bin/fash.js","type":"MODIFIED","insertions":126,"deletions":-45},{"file":"lib/backend/leveldb.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"test/leveldb.test.js","type":"MODIFIED","insertions":60,"deletions":-11}],"sizeInsertions":768,"sizeDeletions":-113}],"allReviewers":[{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"}]}