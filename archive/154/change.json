{"project":"joyent/sdcadm","branch":"master","id":"I181e7bd3567cd161fd39a32c38bc0109fa12084b","number":"154","subject":"TOOLS-1499 add -C channel command line option to sdcadm experimental update-gz-tools","owner":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"url":"https://cr.joyent.us/154","commitMessage":"TOOLS-1499 add -C channel command line option to sdcadm experimental update-gz-tools\n\nReviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\nReviewed by: Josh Wilsdon \u003cjwilsdon@joyent.com\u003e\n","createdOn":1469657824,"lastUpdated":1469814091,"open":false,"status":"MERGED","comments":[{"timestamp":1469657824,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 1."},{"timestamp":1469658580,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 1:\n\nManual tests results posted in JIRA: https://devhub.joyent.com/jira/browse/TOOLS-1499?focusedCommentId\u003d125452\u0026page\u003dcom.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-125452."},{"timestamp":1469658628,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1469658640,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 1: Integration-Approval+1"},{"timestamp":1469658703,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 1: -Integration-Approval"},{"timestamp":1469658974,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1469660388,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 2."},{"timestamp":1469660423,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1469726865,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1469727107,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 2: Code-Review+1\n\n(1 comment)\n\nOther than the string concatenation style, it looks good to me!"},{"timestamp":1469727550,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 1:\n\n(4 comments)"},{"timestamp":1469730994,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 2:\n\n(4 comments)"},{"timestamp":1469735304,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 3."},{"timestamp":1469735335,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1469735474,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1469742210,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1469812417,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 3: Integration-Approval+1\n\nlgtm"},{"timestamp":1469814070,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 4: Commit message was updated."},{"timestamp":1469814091,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Julien Gilli"}],"currentPatchSet":{"number":"4","revision":"7b1e650bfb9eef950535ac9ea25e1deb5cfaddd1","parents":["b6a75087b6602152fc900399e87153eba79995b0"],"ref":"refs/changes/54/154/4","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1469814070,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1469735335,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1469742210,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1469812417,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"SUBM","value":"1","grantedOn":1469814091,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":55,"deletions":-11},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":16,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":3,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":75,"sizeDeletions":-12},"patchSets":[{"number":"1","revision":"dbcf322e61bb239aaa580a766706402ea0a226b0","parents":["b6a75087b6602152fc900399e87153eba79995b0"],"ref":"refs/changes/54/154/1","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1469657824,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1469658974,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1469658628,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":16,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":19,"sizeDeletions":0},{"number":"2","revision":"c6cb9f1896fccbb7a937daa04d154b6d1b53af3c","parents":["b6a75087b6602152fc900399e87153eba79995b0"],"ref":"refs/changes/54/154/2","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1469660388,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1469660423,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1469727107,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}}],"comments":[{"file":"/COMMIT_MSG","line":7,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Please remove the colon, as per the commit message guide[1]\n\n[1]: https://github.com/joyent/eng/blob/master/docs/index.md#commit-comments"},{"file":"/COMMIT_MSG","line":7,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Sounds good, will fix."},{"file":"CHANGES.md","line":0,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I think there are possibly some more changes that are new in \"1.12.0\"?  e.g., at least these ones:\n\n    TOOLS-1429 sdcadm update-gz-tools /path/to/file does not work\n    TOOLS-1336 sdcadm should also update USB keys\n    TOOLS-1430 Added minimal validation of the presence of required files for update-gz-tools tarball\n    TOOLS-1384 Check for Ur availability when updating manatee instances not on the HN\n    TOOLS-1405 Prevent history raising \"TypeError: Converting circular structure to JSON\"\n\nAnd possibly others?"},{"file":"CHANGES.md","line":0,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Sounds good, I\u0027ll check for changes that I missed. Why weren\u0027t these changes added to CHANGES.md as \"unreleased changes\" before?"},{"file":"lib/cli/do_update_gz_tools.js","line":98,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Super-minor nit: isn\u0027t it more normal to put the + on the previous line for this kind of continuation?"},{"file":"lib/cli/do_update_gz_tools.js","line":98,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"I agree with Alex on that. It at least keeps the style consistent in this file if nothing else."},{"file":"lib/cli/do_update_gz_tools.js","line":98,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"The operator (+) should go on the end of line 97; i.e., before the line break."},{"file":"lib/cli/do_update_gz_tools.js","line":98,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"It is, it\u0027s just that I got used to put it on the next line because our style checker doesn\u0027t accept this continuation style in a lot (most) of our other repos. Will fix!"},{"file":"man/man1/sdcadm.1.ronn","line":985,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"This should probably be\n\n  `-C NAME, --channel\u003dNAME`"},{"file":"man/man1/sdcadm.1.ronn","line":985,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Absolutely, will fix."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":16,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":3,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":24,"sizeDeletions":-1},{"number":"3","revision":"181e7bd3567cd161fd39a32c38bc0109fa12084b","parents":["b6a75087b6602152fc900399e87153eba79995b0"],"ref":"refs/changes/54/154/3","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1469735304,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1469742210,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1469735335,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1469812417,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"comments":[{"file":"CHANGES.md","line":20,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"These entries were found using a shell script that I quickly put together: https://gist.github.com/misterdjules/583d645819aeed75585866aca0b81524.\n\nI added all missing entries that seemed to be noteworthy for users, and I also fixed lines that were longer than 80 columns. Let me know if that works for you!"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":55,"deletions":-11},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":16,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":3,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":75,"sizeDeletions":-12},{"number":"4","revision":"7b1e650bfb9eef950535ac9ea25e1deb5cfaddd1","parents":["b6a75087b6602152fc900399e87153eba79995b0"],"ref":"refs/changes/54/154/4","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1469814070,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1469742210,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1469735335,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1469812417,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"SUBM","value":"1","grantedOn":1469814091,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":55,"deletions":-11},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":16,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":3,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":75,"sizeDeletions":-12}],"allReviewers":[{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}]}