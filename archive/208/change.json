{"project":"joyent/illumos-joyent","branch":"master","id":"Id19e6c74b16242161bcda7ff1ac38e47b5d0578f","number":"208","subject":"OS-5577 tmpfs reports incorrect sizing via statvfs OS-5578 lint errors in tmpfs OS-5581 tmpfs panic on DEBUG platform Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Approved by: Jerry Jelinek \u003cjerry.jel","owner":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"url":"https://cr.joyent.us/208","commitMessage":"OS-5577 tmpfs reports incorrect sizing via statvfs\nOS-5578 lint errors in tmpfs\nOS-5581 tmpfs panic on DEBUG platform\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1470417867,"lastUpdated":1470867041,"open":false,"status":"MERGED","comments":[{"timestamp":1470417867,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 1."},{"timestamp":1470423551,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1470665115,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1: Integration-Approval-1\n\nNeeds to take illumos-7178 into account, as well as some other bugs which were discovered."},{"timestamp":1470701528,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 2."},{"timestamp":1470701610,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2: -Integration-Approval"},{"timestamp":1470703603,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1470754092,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 3."},{"timestamp":1470754561,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 4."},{"timestamp":1470775235,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1470861536,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1470861541,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 4: Integration-Approval+1"},{"timestamp":1470866932,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 5: Patch Set 4 was rebased."},{"timestamp":1470867014,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1470867041,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Patrick Mooney"}],"currentPatchSet":{"number":"6","revision":"d19e6c74b16242161bcda7ff1ac38e47b5d0578f","parents":["ec297a45251c1d2867d82a796b37dadf84dde5c1"],"ref":"refs/changes/08/208/6","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1470867014,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470775235,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470861536,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470861541,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1470867041,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":"usr/src/uts/common/fs/tmpfs/tmp_subr.c","type":"MODIFIED","insertions":39,"deletions":-7},{"file":"usr/src/uts/common/fs/tmpfs/tmp_tnode.c","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"usr/src/uts/common/fs/tmpfs/tmp_vfsops.c","type":"MODIFIED","insertions":15,"deletions":-4},{"file":"usr/src/uts/common/sys/fs/tmp.h","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":56,"sizeDeletions":-13},"patchSets":[{"number":"1","revision":"b0af23fb5a1e9ca795483ddb089ebdf209bc3c4d","parents":["100cd24f6e23e51397d6b5bfde6f10869333e1f1"],"ref":"refs/changes/08/208/1","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1470417867,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470423551,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"-1","grantedOn":1470665115,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/uts/common/fs/tmpfs/tmp_subr.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/fs/tmpfs/tmp_tnode.c","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"usr/src/uts/common/fs/tmpfs/tmp_vfsops.c","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":4,"sizeDeletions":-5},{"number":"2","revision":"d239159f6764c806bdff5ae3557c5bc07a723d25","parents":["581ddf8f49d4905c95aa81476d180d70fde72398"],"ref":"refs/changes/08/208/2","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1470701528,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/fs/tmpfs/tmp_subr.c","line":97,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Shouldn\u0027t this only be run if pages \u003e 0?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/fs/tmpfs/tmp_subr.c","type":"MODIFIED","insertions":32,"deletions":-6},{"file":"usr/src/uts/common/fs/tmpfs/tmp_tnode.c","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"usr/src/uts/common/fs/tmpfs/tmp_vfsops.c","type":"MODIFIED","insertions":15,"deletions":-4},{"file":"usr/src/uts/common/sys/fs/tmp.h","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":49,"sizeDeletions":-12},{"number":"3","revision":"8bb79752193a02aef13742810032c137caef9804","parents":["d5689b12891781bf7523fc6d47caca7a8239015b"],"ref":"refs/changes/08/208/3","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1470754092,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/fs/tmpfs/tmp_subr.c","type":"MODIFIED","insertions":34,"deletions":-7},{"file":"usr/src/uts/common/fs/tmpfs/tmp_tnode.c","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"usr/src/uts/common/fs/tmpfs/tmp_vfsops.c","type":"MODIFIED","insertions":15,"deletions":-4},{"file":"usr/src/uts/common/sys/fs/tmp.h","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":51,"sizeDeletions":-13},{"number":"4","revision":"f582df6d9ea0b43058c3e286e576169982b38e76","parents":["d5689b12891781bf7523fc6d47caca7a8239015b"],"ref":"refs/changes/08/208/4","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1470754561,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470775235,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470861536,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470861541,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/fs/tmpfs/tmp_subr.c","type":"MODIFIED","insertions":39,"deletions":-7},{"file":"usr/src/uts/common/fs/tmpfs/tmp_tnode.c","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"usr/src/uts/common/fs/tmpfs/tmp_vfsops.c","type":"MODIFIED","insertions":15,"deletions":-4},{"file":"usr/src/uts/common/sys/fs/tmp.h","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":56,"sizeDeletions":-13},{"number":"5","revision":"164edb9fe89ba809389364d43fef2aae5a6a10d8","parents":["ec297a45251c1d2867d82a796b37dadf84dde5c1"],"ref":"refs/changes/08/208/5","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1470866932,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470775235,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470861536,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470861541,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/fs/tmpfs/tmp_subr.c","type":"MODIFIED","insertions":39,"deletions":-7},{"file":"usr/src/uts/common/fs/tmpfs/tmp_tnode.c","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"usr/src/uts/common/fs/tmpfs/tmp_vfsops.c","type":"MODIFIED","insertions":15,"deletions":-4},{"file":"usr/src/uts/common/sys/fs/tmp.h","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":56,"sizeDeletions":-13},{"number":"6","revision":"d19e6c74b16242161bcda7ff1ac38e47b5d0578f","parents":["ec297a45251c1d2867d82a796b37dadf84dde5c1"],"ref":"refs/changes/08/208/6","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1470867014,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470775235,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470861536,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470861541,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1470867041,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":"usr/src/uts/common/fs/tmpfs/tmp_subr.c","type":"MODIFIED","insertions":39,"deletions":-7},{"file":"usr/src/uts/common/fs/tmpfs/tmp_tnode.c","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"usr/src/uts/common/fs/tmpfs/tmp_vfsops.c","type":"MODIFIED","insertions":15,"deletions":-4},{"file":"usr/src/uts/common/sys/fs/tmp.h","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":56,"sizeDeletions":-13}],"allReviewers":[{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}]}