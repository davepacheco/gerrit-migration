From a6673b11756193f6f6f2653d2d6c47ed1299c8fe Mon Sep 17 00:00:00 2001
From: Robert Mustacchi <rm@joyent.com>
Date: Mon, 14 Jan 2019 22:34:46 +0000
Subject: [PATCH] OS-6500 Want modern Intel IMC driver Reviewed by: Jerry
 Jelinek <jerry.jelinek@joyent.com> Approved by: Jerry Jelinek
 <jerry.jelinek@joyent.com>

---
 overlay/generic/etc/driver_aliases | 158 +++++++++++++++++++++++++++++
 overlay/generic/etc/name_to_major  |   2 +
 2 files changed, 160 insertions(+)

diff --git a/overlay/generic/etc/driver_aliases b/overlay/generic/etc/driver_aliases
index 64b11760..050bc520 100644
--- a/overlay/generic/etc/driver_aliases
+++ b/overlay/generic/etc/driver_aliases
@@ -582,6 +582,164 @@ igb "pciex8086,1f40"
 igb "pciex8086,1f41"
 igb "pciex8086,1f45"
 igb "pciex8086,438"
+imcstub "pci8086,e1e"
+imcstub "pci8086,e1f"
+imcstub "pci8086,e60"
+imcstub "pci8086,e68"
+imcstub "pci8086,e6a"
+imcstub "pci8086,e6b"
+imcstub "pci8086,e6c"
+imcstub "pci8086,e6d"
+imcstub "pci8086,e71"
+imcstub "pci8086,e79"
+imcstub "pci8086,ea0"
+imcstub "pci8086,ea8"
+imcstub "pci8086,eaa"
+imcstub "pci8086,eab"
+imcstub "pci8086,eac"
+imcstub "pci8086,ead"
+imcstub "pci8086,ec8"
+imcstub "pci8086,ec9"
+imcstub "pci8086,eca"
+imcstub "pci8086,2014"
+imcstub "pci8086,2016"
+imcstub "pci8086,2024"
+imcstub "pci8086,2040"
+imcstub "pci8086,2044"
+imcstub "pci8086,2048"
+imcstub "pci8086,2054"
+imcstub "pci8086,2055"
+imcstub "pci8086,2066"
+imcstub "pci8086,208e"
+imcstub "pci8086,2f1e"
+imcstub "pci8086,2f1f"
+imcstub "pci8086,2f28"
+imcstub "pci8086,2f60"
+imcstub "pci8086,2f68"
+imcstub "pci8086,2f6a"
+imcstub "pci8086,2f6b"
+imcstub "pci8086,2f6c"
+imcstub "pci8086,2f6d"
+imcstub "pci8086,2f71"
+imcstub "pci8086,2f79"
+imcstub "pci8086,2fa0"
+imcstub "pci8086,2fa8"
+imcstub "pci8086,2faa"
+imcstub "pci8086,2fab"
+imcstub "pci8086,2fac"
+imcstub "pci8086,2fad"
+imcstub "pci8086,2ffc"
+imcstub "pci8086,2ffd"
+imcstub "pci8086,3c71"
+imcstub "pci8086,3ca0"
+imcstub "pci8086,3ca8"
+imcstub "pci8086,3caa"
+imcstub "pci8086,3cab"
+imcstub "pci8086,3cac"
+imcstub "pci8086,3cad"
+imcstub "pci8086,3ce0"
+imcstub "pci8086,3ce3"
+imcstub "pci8086,3cf4"
+imcstub "pci8086,3cf5"
+imcstub "pci8086,3cf6"
+imcstub "pci8086,6f1e"
+imcstub "pci8086,6f1f"
+imcstub "pci8086,6f28"
+imcstub "pci8086,6f60"
+imcstub "pci8086,6f68"
+imcstub "pci8086,6f6a"
+imcstub "pci8086,6f6b"
+imcstub "pci8086,6f6c"
+imcstub "pci8086,6f6d"
+imcstub "pci8086,6f71"
+imcstub "pci8086,6f79"
+imcstub "pci8086,6fa0"
+imcstub "pci8086,6fa8"
+imcstub "pci8086,6faa"
+imcstub "pci8086,6fab"
+imcstub "pci8086,6fac"
+imcstub "pci8086,6fad"
+imcstub "pci8086,6ffc"
+imcstub "pci8086,6ffd"
+imcstub "pciex8086,e1e"
+imcstub "pciex8086,e1f"
+imcstub "pciex8086,e60"
+imcstub "pciex8086,e68"
+imcstub "pciex8086,e6a"
+imcstub "pciex8086,e6b"
+imcstub "pciex8086,e6c"
+imcstub "pciex8086,e6d"
+imcstub "pciex8086,e71"
+imcstub "pciex8086,e79"
+imcstub "pciex8086,ea0"
+imcstub "pciex8086,ea8"
+imcstub "pciex8086,eaa"
+imcstub "pciex8086,eab"
+imcstub "pciex8086,eac"
+imcstub "pciex8086,ead"
+imcstub "pciex8086,ec8"
+imcstub "pciex8086,ec9"
+imcstub "pciex8086,eca"
+imcstub "pciex8086,2014"
+imcstub "pciex8086,2016"
+imcstub "pciex8086,2024"
+imcstub "pciex8086,2040"
+imcstub "pciex8086,2044"
+imcstub "pciex8086,2048"
+imcstub "pciex8086,2054"
+imcstub "pciex8086,2055"
+imcstub "pciex8086,2066"
+imcstub "pciex8086,208e"
+imcstub "pciex8086,2f1e"
+imcstub "pciex8086,2f1f"
+imcstub "pciex8086,2f28"
+imcstub "pciex8086,2f60"
+imcstub "pciex8086,2f68"
+imcstub "pciex8086,2f6a"
+imcstub "pciex8086,2f6b"
+imcstub "pciex8086,2f6c"
+imcstub "pciex8086,2f6d"
+imcstub "pciex8086,2f71"
+imcstub "pciex8086,2f79"
+imcstub "pciex8086,2fa0"
+imcstub "pciex8086,2fa8"
+imcstub "pciex8086,2faa"
+imcstub "pciex8086,2fab"
+imcstub "pciex8086,2fac"
+imcstub "pciex8086,2fad"
+imcstub "pciex8086,2ffc"
+imcstub "pciex8086,2ffd"
+imcstub "pciex8086,3c71"
+imcstub "pciex8086,3ca0"
+imcstub "pciex8086,3ca8"
+imcstub "pciex8086,3caa"
+imcstub "pciex8086,3cab"
+imcstub "pciex8086,3cac"
+imcstub "pciex8086,3cad"
+imcstub "pciex8086,3ce0"
+imcstub "pciex8086,3ce3"
+imcstub "pciex8086,3cf4"
+imcstub "pciex8086,3cf5"
+imcstub "pciex8086,3cf6"
+imcstub "pciex8086,6f1e"
+imcstub "pciex8086,6f1f"
+imcstub "pciex8086,6f28"
+imcstub "pciex8086,6f60"
+imcstub "pciex8086,6f68"
+imcstub "pciex8086,6f6a"
+imcstub "pciex8086,6f6b"
+imcstub "pciex8086,6f6c"
+imcstub "pciex8086,6f6d"
+imcstub "pciex8086,6f71"
+imcstub "pciex8086,6f79"
+imcstub "pciex8086,6fa0"
+imcstub "pciex8086,6fa8"
+imcstub "pciex8086,6faa"
+imcstub "pciex8086,6fab"
+imcstub "pciex8086,6fac"
+imcstub "pciex8086,6fad"
+imcstub "pciex8086,6ffc"
+imcstub "pciex8086,6ffd"
 intel_nb5000 "pci8086,25c0"
 intel_nb5000 "pci8086,25d0"
 intel_nb5000 "pci8086,25d4"
diff --git a/overlay/generic/etc/name_to_major b/overlay/generic/etc/name_to_major
index 557ae7de..e7fe60a8 100644
--- a/overlay/generic/etc/name_to_major
+++ b/overlay/generic/etc/name_to_major
@@ -307,3 +307,5 @@ amdf17nbdf 309
 pchtemp 310
 ufm 311
 ufmtest 312
+imcstub 313
+imc 314
-- 
2.21.0

