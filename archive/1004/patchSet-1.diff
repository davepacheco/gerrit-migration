From 32e562443a08730fab73a8fe17b70b9253f11a46 Mon Sep 17 00:00:00 2001
From: Chris Burroughs <chris.burroughs@joyent.com>
Date: Wed, 23 Nov 2016 18:56:04 -0500
Subject: [PATCH] ./bin/triton instance get
 516a51c5-f9cc-4145-93a9-71d0a518ae8d

---
 lib/do_instance/do_get.js | 22 ++++++++++++++--------
 1 file changed, 14 insertions(+), 8 deletions(-)

diff --git a/lib/do_instance/do_get.js b/lib/do_instance/do_get.js
index 18afe2d..3663a22 100644
--- a/lib/do_instance/do_get.js
+++ b/lib/do_instance/do_get.js
@@ -19,15 +19,21 @@ function do_get(subcmd, opts, args, cb) {
         return cb(new Error('invalid args: ' + args));
     }
 
-    this.top.tritonapi.getInstance(args[0], function (err, inst) {
-        if (inst) {
-            if (opts.json) {
-                console.log(JSON.stringify(inst));
-            } else {
-                console.log(JSON.stringify(inst, null, 4));
-            }
+    var tritonapi = this.top.tritonapi;
+    common.cliSetupTritonApi({cli: this.top}, function onSetup(setupErr) {
+        if (setupErr) {
+            cb(setupErr);
         }
-        cb(err);
+        tritonapi.getInstance(args[0], function (err, inst) {
+            if (inst) {
+                if (opts.json) {
+                    console.log(JSON.stringify(inst));
+                } else {
+                    console.log(JSON.stringify(inst, null, 4));
+                }
+            }
+            cb(err);
+        });
     });
 }
 
-- 
2.21.0

