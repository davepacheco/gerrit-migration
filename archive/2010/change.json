{"project":"joyent/node-workflow-moray-backend","branch":"master","id":"Ic35048766456cd6340de9a3bf195e29195274a6d","number":"2010","subject":"WORKFLOW-218 Update workflow to node-moray v3 Reviewed by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e Approved by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/2010","commitMessage":"WORKFLOW-218 Update workflow to node-moray v3\nReviewed by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e\nApproved by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e\n","createdOn":1496049484,"lastUpdated":1496139299,"open":false,"status":"MERGED","comments":[{"timestamp":1496049484,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1496049490,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 1f806e44d8088e86e4cb60ddcf17b63b48473e4f\n    \n    WORKFLOW-218 Update workflow to node-moray v3"},{"timestamp":1496049512,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1496049617,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nI still need to update sdc-workflow repository with these changes before we can call it done but, before, we need these changes into master"},{"timestamp":1496057332,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 1: Code-Review+1 Integration-Approval+1\n\n(2 comments)"},{"timestamp":1496067405,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2."},{"timestamp":1496067410,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit bb15227c81a5bd3f6f51eadcde279549cfadd4c4\n    \n    WORKFLOW-218 Update workflow to node-moray v3"},{"timestamp":1496067433,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1496067598,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\n(2 comments)\n\nMind to check again Marsell? Applied some of the suggested changes and added a little explanation of the reason for the usage of URL instead of the SRV arguments for moray client on the tests."},{"timestamp":1496095664,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1496139299,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"2","revision":"c35048766456cd6340de9a3bf195e29195274a6d","parents":["92fa4fd69606559212b18f906863de4bbaf89872"],"ref":"refs/changes/10/2010/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1496067405,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1496067433,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1496095664,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1496095664,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"SUBM","value":"1","grantedOn":1496139299,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"lib/wf-buckets-definition.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/workflow-moray-backend.js","type":"MODIFIED","insertions":23,"deletions":-111},{"file":"package.json","type":"MODIFIED","insertions":10,"deletions":-7},{"file":"test/config.json.sample","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"test/moray-backend.test.js","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":51,"sizeDeletions":-127},"patchSets":[{"number":"1","revision":"19fa6fbfbb67591be935d9989d39b7d633976d67","parents":["92fa4fd69606559212b18f906863de4bbaf89872"],"ref":"refs/changes/10/2010/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1496049484,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1496049512,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1496057332,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1496057332,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"comments":[{"file":"package.json","line":28,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"It\u0027s up to version 0.8.2 now."},{"file":"package.json","line":28,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"test/config.json.sample","line":6,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Is this okay? The node-manta man(3) page states \"url\" is deprecated, so maybe updating the example to the new options is appropriate? E.g.\n\n{\n    \"srvDomain\": \"moray.coal.joyent.us\",\n    \"cueballOptions\": {\n        \"resolvers\": [ \"binder.mydatacenter.joyent.us\" ]\n    }\n}\n\nThis applies to the two README.md examples too."},{"file":"test/config.json.sample","line":6,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"While you\u0027re right regarding the README.md examples, which are better using the new options, that doesn\u0027t apply to the test cases, b/c we\u0027re not relying into the moray SRV service here to run our tests, but into a \"moray-test\" custom service running strictly in port 2222, bypassing HAProxy completely. I\u0027ve updated the README examples, though"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"lib/wf-buckets-definition.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/workflow-moray-backend.js","type":"MODIFIED","insertions":23,"deletions":-111},{"file":"package.json","type":"MODIFIED","insertions":10,"deletions":-7},{"file":"test/config.json.sample","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"test/moray-backend.test.js","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":45,"sizeDeletions":-127},{"number":"2","revision":"c35048766456cd6340de9a3bf195e29195274a6d","parents":["92fa4fd69606559212b18f906863de4bbaf89872"],"ref":"refs/changes/10/2010/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1496067405,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1496067433,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1496139299,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1496095664,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1496095664,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"lib/wf-buckets-definition.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/workflow-moray-backend.js","type":"MODIFIED","insertions":23,"deletions":-111},{"file":"package.json","type":"MODIFIED","insertions":10,"deletions":-7},{"file":"test/config.json.sample","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"test/moray-backend.test.js","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":51,"sizeDeletions":-127}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}