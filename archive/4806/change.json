{"project":"joyent/illumos-joyent","branch":"master","id":"I6816448c8b777064c5a9cf6729bcfa0efeb29e4f","number":"4806","subject":"OS-7227 dkio.h C99 change requires additional lint cleanup Reviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e Reviewed by: Jason King \u003cjason.king@joyent.com\u003e Approved by: Dan McDonald \u003cdanmcd@joyent.com\u003e","owner":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"url":"https://cr.joyent.us/4806","commitMessage":"OS-7227 dkio.h C99 change requires additional lint cleanup\nReviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e\nReviewed by: Jason King \u003cjason.king@joyent.com\u003e\nApproved by: Dan McDonald \u003cdanmcd@joyent.com\u003e\n","createdOn":1536338636,"lastUpdated":1536678466,"open":false,"status":"MERGED","comments":[{"timestamp":1536338636,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 1."},{"timestamp":1536341568,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 1:\n\nYou should document somewhere there were three types of changes:\n\n1.) CSTD upgrade to C99 or GNU99 (e.g. libefi).  Is this because the apps/libs are C99-happy, but never got marked as such?\n\n2.) C99LMODE global change for the command (e.g. cdrw).  Is this because the apps/libs aren\u0027t C99-happy enough, but for linting-purposes they are?\n\n3.) Per-file lint-C99 tagging (e.g. allocate).  This happens only one place, but I take it using one of the above caused more mess than it solved?"},{"timestamp":1536351918,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\nI added a comment in the bug report."},{"timestamp":1536353494,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1536354639,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1536355252,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\nI added a test note to the bug report."},{"timestamp":1536677848,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 1: Integration-Approval+1"},{"timestamp":1536678358,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1536678452,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1536678466,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jerry Jelinek"}],"currentPatchSet":{"number":"3","revision":"6816448c8b777064c5a9cf6729bcfa0efeb29e4f","parents":["320339a509cdabf5e7ef29b9822e874e35e0c1bf"],"ref":"refs/changes/06/4806/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1536678452,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536353494,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536354639,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1536677848,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"SUBM","value":"1","grantedOn":1536678466,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/cmd/allocate/Makefile","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/cmd/cdrw/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/devfsadm/Makefile.com","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/devinfo/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/diskscan/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/eject/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/fdformat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/fdisk/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/fmthard/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/format/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/lofiadm/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/prtvtoc/Makefile","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/ramdiskadm/Makefile","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/rmformat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/smserverd/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stat/fsstat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stat/iostat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stat/kstat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stat/mpstat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stat/vfsstat/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/stat/vmstat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stmsboot/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/libadm/Makefile.com","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/libefi/Makefile.com","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/libsmedia/plugins/Makefile.com","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":59,"sizeDeletions":-4},"patchSets":[{"number":"1","revision":"715b88677cf2dd1456b57e30f530dff51005ce1f","parents":["93e19c9346ce9d27b339cc14132d82b2e8a668e4"],"ref":"refs/changes/06/4806/1","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1536338636,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536354639,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536353494,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1536677848,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/allocate/Makefile","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/cmd/cdrw/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/devfsadm/Makefile.com","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/devinfo/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/diskscan/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/eject/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/fdformat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/fdisk/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/fmthard/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/format/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/lofiadm/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/prtvtoc/Makefile","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/ramdiskadm/Makefile","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/rmformat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/smserverd/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stat/fsstat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stat/iostat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stat/kstat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stat/mpstat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stat/vfsstat/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/stat/vmstat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stmsboot/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/libadm/Makefile.com","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/libefi/Makefile.com","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/libsmedia/plugins/Makefile.com","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":59,"sizeDeletions":-4},{"number":"2","revision":"1bab2a15ec5800bc08a67ef6c5e860ff0861d5de","parents":["320339a509cdabf5e7ef29b9822e874e35e0c1bf"],"ref":"refs/changes/06/4806/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1536678358,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536354639,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536353494,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1536677848,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/allocate/Makefile","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/cmd/cdrw/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/devfsadm/Makefile.com","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/devinfo/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/diskscan/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/eject/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/fdformat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/fdisk/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/fmthard/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/format/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/lofiadm/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/prtvtoc/Makefile","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/ramdiskadm/Makefile","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/rmformat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/smserverd/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stat/fsstat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stat/iostat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stat/kstat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stat/mpstat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stat/vfsstat/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/stat/vmstat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stmsboot/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/libadm/Makefile.com","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/libefi/Makefile.com","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/libsmedia/plugins/Makefile.com","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":59,"sizeDeletions":-4},{"number":"3","revision":"6816448c8b777064c5a9cf6729bcfa0efeb29e4f","parents":["320339a509cdabf5e7ef29b9822e874e35e0c1bf"],"ref":"refs/changes/06/4806/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1536678452,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1536678466,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536354639,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536353494,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1536677848,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/cmd/allocate/Makefile","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/cmd/cdrw/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/devfsadm/Makefile.com","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/devinfo/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/diskscan/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/eject/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/fdformat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/fdisk/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/fmthard/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/format/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/lofiadm/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/prtvtoc/Makefile","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/ramdiskadm/Makefile","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/cmd/rmformat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/smserverd/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stat/fsstat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stat/iostat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stat/kstat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stat/mpstat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stat/vfsstat/Makefile","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/stat/vmstat/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/stmsboot/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/libadm/Makefile.com","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/libefi/Makefile.com","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/libsmedia/plugins/Makefile.com","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":59,"sizeDeletions":-4}],"allReviewers":[{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}]}