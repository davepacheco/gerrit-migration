From 715b88677cf2dd1456b57e30f530dff51005ce1f Mon Sep 17 00:00:00 2001
From: Jerry Jelinek <jerry.jelinek@joyent.com>
Date: Fri, 7 Sep 2018 16:43:29 +0000
Subject: [PATCH] OS-7227 dkio.h C99 change requires additional lint cleanup

---
 usr/src/cmd/allocate/Makefile              | 7 ++++++-
 usr/src/cmd/cdrw/Makefile                  | 2 ++
 usr/src/cmd/devfsadm/Makefile.com          | 3 +++
 usr/src/cmd/devinfo/Makefile               | 2 ++
 usr/src/cmd/diskscan/Makefile              | 4 +++-
 usr/src/cmd/eject/Makefile                 | 2 ++
 usr/src/cmd/fdformat/Makefile              | 2 ++
 usr/src/cmd/fdisk/Makefile                 | 2 ++
 usr/src/cmd/fmthard/Makefile               | 2 ++
 usr/src/cmd/format/Makefile                | 2 ++
 usr/src/cmd/lofiadm/Makefile               | 2 ++
 usr/src/cmd/prtvtoc/Makefile               | 3 +++
 usr/src/cmd/ramdiskadm/Makefile            | 3 +++
 usr/src/cmd/rmformat/Makefile              | 2 ++
 usr/src/cmd/smserverd/Makefile             | 2 ++
 usr/src/cmd/stat/fsstat/Makefile           | 2 ++
 usr/src/cmd/stat/iostat/Makefile           | 2 ++
 usr/src/cmd/stat/kstat/Makefile            | 2 ++
 usr/src/cmd/stat/mpstat/Makefile           | 2 ++
 usr/src/cmd/stat/vfsstat/Makefile          | 4 +++-
 usr/src/cmd/stat/vmstat/Makefile           | 2 ++
 usr/src/cmd/stmsboot/Makefile              | 2 ++
 usr/src/lib/libadm/Makefile.com            | 2 ++
 usr/src/lib/libefi/Makefile.com            | 2 ++
 usr/src/lib/libsmedia/plugins/Makefile.com | 3 ++-
 25 files changed, 59 insertions(+), 4 deletions(-)

diff --git a/usr/src/cmd/allocate/Makefile b/usr/src/cmd/allocate/Makefile
index 41339cdde6..7ec0367c70 100644
--- a/usr/src/cmd/allocate/Makefile
+++ b/usr/src/cmd/allocate/Makefile
@@ -21,6 +21,7 @@
 
 #
 # Copyright (c) 1992, 2010, Oracle and/or its affiliates. All rights reserved.
+# Copyright 2018 Joyent, Inc.
 #
 
 ETCTSOLFILES =	devalloc_defaults
@@ -182,7 +183,11 @@ clean :
 		$(RM) $(PROG) $(RTLCKS) $(OBJS) \
 		$(SCRIPTS) $(ALLSCRIPTS) $(POFILE) $(POFILES)
 
-lint :		lint_SRCS
+lint :
+		$(LINT.c) allocate.c allocate3.c $(LDLIBS)
+		$(LINT.c) -Xc99=%all mkdevalloc.c $(LDLIBS)
+		$(LINT.c) dminfo.c $(LDLIBS)
+		$(LINT.c) add_allocatable.c $(LDLIBS)
 
 strip :
 		$(STRIP) $(PROG)
diff --git a/usr/src/cmd/cdrw/Makefile b/usr/src/cmd/cdrw/Makefile
index 2b626aeb59..5f8527ad3c 100644
--- a/usr/src/cmd/cdrw/Makefile
+++ b/usr/src/cmd/cdrw/Makefile
@@ -21,6 +21,7 @@
 #
 # Copyright 2008 Sun Microsystems, Inc.  All rights reserved.
 # Use is subject to license terms.
+# Copyright 2018 Joyent, Inc.
 #
 
 PROG= cdrw
@@ -41,6 +42,7 @@ CERRWARN +=	-_gcc=-Wno-uninitialized
 CERRWARN +=	-_gcc=-Wno-parentheses
 CPPFLAGS +=	-D_REENTRANT -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 $(HAL_DBUS_CPPFLAGS)
 LINTFLAGS += 	-um
+C99LMODE=	-Xc99=%all
 
 $(ROOTBIN)/cdrw := FILEMODE = 04755
 
diff --git a/usr/src/cmd/devfsadm/Makefile.com b/usr/src/cmd/devfsadm/Makefile.com
index 1585db2894..95591b2a95 100644
--- a/usr/src/cmd/devfsadm/Makefile.com
+++ b/usr/src/cmd/devfsadm/Makefile.com
@@ -20,6 +20,7 @@
 #
 # Copyright 2009 Sun Microsystems, Inc.  All rights reserved.
 # Use is subject to license terms.
+# Copyright 2018 Joyent, Inc.
 #
 
 # This target builds both a command (daemon) and various shared objects.  This
@@ -95,6 +96,8 @@ LINTFLAGS += -erroff=E_NAME_USED_NOT_DEF2
 LINTFLAGS += -erroff=E_NAME_DEF_NOT_USED2
 LINTFLAGS += -erroff=E_NAME_MULTIPLY_DEF2
 
+C99LMODE=	-Xc99=%all
+
 CERRWARN += -_gcc=-Wno-uninitialized
 CERRWARN += -_gcc=-Wno-char-subscripts
 CERRWARN += -_gcc=-Wno-parentheses
diff --git a/usr/src/cmd/devinfo/Makefile b/usr/src/cmd/devinfo/Makefile
index 58b5c56131..360f4b01c0 100644
--- a/usr/src/cmd/devinfo/Makefile
+++ b/usr/src/cmd/devinfo/Makefile
@@ -22,6 +22,7 @@
 #
 # Copyright 2004 Sun Microsystems, Inc.  All rights reserved.
 # Use is subject to license terms.
+# Copyright 2018 Joyent, Inc.
 #
 # cmd/devinfo/Makefile
 #
@@ -33,6 +34,7 @@ include ../Makefile.cmd
 LDLIBS += -ladm -lefi
 CFLAGS += $(CCVERBOSE)
 CERRWARN += -_gcc=-Wno-uninitialized
+C99LMODE=	-Xc99=%all
 
 .KEEP_STATE:
 
diff --git a/usr/src/cmd/diskscan/Makefile b/usr/src/cmd/diskscan/Makefile
index fc82a22936..dacf787745 100644
--- a/usr/src/cmd/diskscan/Makefile
+++ b/usr/src/cmd/diskscan/Makefile
@@ -20,15 +20,17 @@
 # CDDL HEADER END
 #
 #
-#ident	"%Z%%M%	%I%	%E% SMI"
 #
 # Copyright (c) 1989, 2001 by Sun Microsystems, Inc.
 # All rights reserved.
+# Copyright 2018 Joyent, Inc.
 
 PROG= diskscan
 
 include ../Makefile.cmd
 
+C99LMODE=	-Xc99=%all
+
 .KEEP_STATE:
 
 all: $(PROG)
diff --git a/usr/src/cmd/eject/Makefile b/usr/src/cmd/eject/Makefile
index 33ae2987a6..d47ddbf29c 100644
--- a/usr/src/cmd/eject/Makefile
+++ b/usr/src/cmd/eject/Makefile
@@ -20,6 +20,7 @@
 #
 #
 # Copyright (c) 2006, 2010, Oracle and/or its affiliates. All rights reserved.
+# Copyright 2018 Joyent, Inc.
 #
 
 PROG=		eject
@@ -31,6 +32,7 @@ LDLIBS += -lvolmgt -ladm
 CFLAGS += $(CCVERBOSE)
 
 LINTFLAGS += -um
+C99LMODE= -Xc99=%all
 
 .KEEP_STATE:
 
diff --git a/usr/src/cmd/fdformat/Makefile b/usr/src/cmd/fdformat/Makefile
index 8a04df934e..28c1ebff2d 100644
--- a/usr/src/cmd/fdformat/Makefile
+++ b/usr/src/cmd/fdformat/Makefile
@@ -21,6 +21,7 @@
 #
 # Copyright 2009 Sun Microsystems, Inc.  All rights reserved.
 # Use is subject to license terms.
+# Copyright 2018 Joyent, Inc.
 #
 # cmd/fdformat/Makefile
 #
@@ -31,6 +32,7 @@ include ../Makefile.cmd
 
 LDLIBS +=	-lvolmgt
 LINTFLAGS +=    -um
+C99LMODE=	-Xc99=%all
 
 .KEEP_STATE:
 
diff --git a/usr/src/cmd/fdisk/Makefile b/usr/src/cmd/fdisk/Makefile
index ff449b4de5..6a75b4f4dd 100644
--- a/usr/src/cmd/fdisk/Makefile
+++ b/usr/src/cmd/fdisk/Makefile
@@ -20,6 +20,7 @@
 #
 #
 # Copyright (c) 1992, 2010, Oracle and/or its affiliates. All rights reserved.
+# Copyright 2018 Joyent, Inc.
 #
 #
 
@@ -42,6 +43,7 @@ i386_CFLAGS += -D_LARGEFILE64_SOURCE
 i386_CFLAGS += -D_FILE_OFFSET_BITS=64
 
 LINTFLAGS += -erroff=E_BAD_PTR_CAST_ALIGN -erroff=E_NAME_DEF_NOT_USED2
+C99LMODE= -Xc99=%all
 
 all:	$(ROOTFS_PROG)
 
diff --git a/usr/src/cmd/fmthard/Makefile b/usr/src/cmd/fmthard/Makefile
index 4f1205de7a..40047f2e82 100644
--- a/usr/src/cmd/fmthard/Makefile
+++ b/usr/src/cmd/fmthard/Makefile
@@ -20,6 +20,7 @@
 #
 # Copyright 2009 Sun Microsystems, Inc.  All rights reserved.
 # Use is subject to license terms.
+# Copyright 2018 Joyent, Inc.
 #
 # cmd/fmthard/Makefile
 #
@@ -32,6 +33,7 @@ RELUSRSBIN=     ../usr/sbin
 ROOTSYMLINK=    $(ROOTETC)/$(PROG)
 LDLIBS +=	-ladm -lefi
 lint := LINTFLAGS = -u -erroff=E_BAD_FORMAT_ARG_TYPE2
+C99LMODE=	-Xc99=%all
 
 .KEEP_STATE:
 
diff --git a/usr/src/cmd/format/Makefile b/usr/src/cmd/format/Makefile
index 34f25b7cc2..4835294a0b 100644
--- a/usr/src/cmd/format/Makefile
+++ b/usr/src/cmd/format/Makefile
@@ -23,6 +23,7 @@
 # Use is subject to license terms.
 #
 # Copyright 2015 Nexenta Systems, Inc. All rights reserved.
+# Copyright 2018 Joyent, Inc.
 #
 
 PROG= format
@@ -63,6 +64,7 @@ LDLIBS_sparc=
 LDLIBS +=	-ladm -lefi -ldiskmgt -lnvpair -ldevid -ldevinfo $(LDLIBS_$(MACH))
 
 LINTFLAGS += -xerroff=E_NAME_DEF_NOT_USED2
+C99LMODE=	-Xc99=%all
 CPPFLAGS    += -D_EXTVTOC
 
 .KEEP_STATE:
diff --git a/usr/src/cmd/lofiadm/Makefile b/usr/src/cmd/lofiadm/Makefile
index 07d01206a2..32323488e0 100644
--- a/usr/src/cmd/lofiadm/Makefile
+++ b/usr/src/cmd/lofiadm/Makefile
@@ -22,6 +22,7 @@
 #
 # Copyright 2009 Sun Microsystems, Inc.  All rights reserved.
 # Use is subject to license terms.
+# Copyright 2018 Joyent, Inc.
 #
 
 PROG= lofiadm
@@ -41,6 +42,7 @@ CERRWARN += -_gcc=-Wno-parentheses
 CERRWARN += -_gcc=-Wno-uninitialized
 
 LINTFLAGS += -erroff=E_NAME_USED_NOT_DEF2
+C99LMODE=	-Xc99=%all
 
 .KEEP_STATE:
 
diff --git a/usr/src/cmd/prtvtoc/Makefile b/usr/src/cmd/prtvtoc/Makefile
index 59db9914bd..6520df4125 100644
--- a/usr/src/cmd/prtvtoc/Makefile
+++ b/usr/src/cmd/prtvtoc/Makefile
@@ -20,6 +20,7 @@
 #
 # Copyright 2009 Sun Microsystems, Inc.  All rights reserved.
 # Use is subject to license terms.
+# Copyright 2018 Joyent, Inc.
 #
 # cmd/prtvtoc/Makefile
 #
@@ -35,6 +36,8 @@ LDLIBS +=	-ladm -lefi
 CERRWARN +=	-_gcc=-Wno-parentheses
 CERRWARN +=	-_gcc=-Wno-uninitialized
 
+C99LMODE=	-Xc99=%all
+
 .KEEP_STATE:
 
 all: $(PROG) 
diff --git a/usr/src/cmd/ramdiskadm/Makefile b/usr/src/cmd/ramdiskadm/Makefile
index 7dae74826e..d166e088df 100644
--- a/usr/src/cmd/ramdiskadm/Makefile
+++ b/usr/src/cmd/ramdiskadm/Makefile
@@ -22,6 +22,7 @@
 #
 # Copyright 2002-2003 Sun Microsystems, Inc.  All rights reserved.
 # Use is subject to license terms.
+# Copyright 2018 Joyent, Inc.
 #
 
 PROG= ramdiskadm
@@ -34,6 +35,8 @@ include ../Makefile.cmd
 LDLIBS	+= -ldevinfo
 CERRWARN += -_gcc=-Wno-uninitialized
 
+C99LMODE=	-Xc99=%all
+
 .KEEP_STATE:
 
 all: $(PROG)
diff --git a/usr/src/cmd/rmformat/Makefile b/usr/src/cmd/rmformat/Makefile
index 91634d31fa..6650d79024 100644
--- a/usr/src/cmd/rmformat/Makefile
+++ b/usr/src/cmd/rmformat/Makefile
@@ -22,6 +22,7 @@
 #
 # Copyright 2005 Sun Microsystems, Inc.  All rights reserved.
 # Use is subject to license terms.
+# Copyright 2018 Joyent, Inc.
 #
 
 PROG= rmformat
@@ -37,6 +38,7 @@ LDLIBS +=	-lsmedia -lvolmgt -ladm -lefi
 CERRWARN += -_gcc=-Wno-uninitialized
 
 LINTFLAGS += -u
+C99LMODE=	-Xc99=%all
 CPPFLAGS += -D_FILE_OFFSET_BITS=64
 
 $(ROOTBIN)/rmformat := FILEMODE = 04555
diff --git a/usr/src/cmd/smserverd/Makefile b/usr/src/cmd/smserverd/Makefile
index f138639025..467aa81d37 100644
--- a/usr/src/cmd/smserverd/Makefile
+++ b/usr/src/cmd/smserverd/Makefile
@@ -21,6 +21,7 @@
 #
 # Copyright 2006 Sun Microsystems, Inc.  All rights reserved.
 # Use is subject to license terms.
+# Copyright 2018 Joyent, Inc.
 #
 
 PROG =	rpc.smserverd
@@ -48,6 +49,7 @@ CFLAGS += $(CCVERBOSE)
 CERRWARN += -_gcc=-Wno-uninitialized
 CERRWARN += -_gcc=-Wno-unused-variable
 LINTFLAGS += -u
+C99LMODE=	-Xc99=%all
 
 .KEEP_STATE:
 
diff --git a/usr/src/cmd/stat/fsstat/Makefile b/usr/src/cmd/stat/fsstat/Makefile
index b86e2cc8f7..5b17d933de 100644
--- a/usr/src/cmd/stat/fsstat/Makefile
+++ b/usr/src/cmd/stat/fsstat/Makefile
@@ -21,6 +21,7 @@
 #
 # Copyright 2009 Sun Microsystems, Inc.  All rights reserved.
 # Use is subject to license terms.
+# Copyright 2018 Joyent, Inc.
 #
 
 PROG = fsstat
@@ -36,6 +37,7 @@ COMMON_SRCS = $(COMMON_OBJS:%.o=$(STATCOMMONDIR)/%.c)
 LDLIBS += -lkstat -lcmdutils
 CFLAGS += $(CCVERBOSE) -I${STATCOMMONDIR}
 CERRWARN += -_gcc=-Wno-parentheses
+C99LMODE=	-Xc99=%all
 FILEMODE= 0555
 
 lint := LINTFLAGS = -muxs -I$(STATCOMMONDIR)
diff --git a/usr/src/cmd/stat/iostat/Makefile b/usr/src/cmd/stat/iostat/Makefile
index 36142d5a8a..80f6e31a67 100644
--- a/usr/src/cmd/stat/iostat/Makefile
+++ b/usr/src/cmd/stat/iostat/Makefile
@@ -21,6 +21,7 @@
 #
 # Copyright 2009 Sun Microsystems, Inc.  All rights reserved.
 # Use is subject to license terms.
+# Copyright 2018 Joyent, Inc.
 #
 
 PROG = iostat
@@ -32,6 +33,7 @@ include $(SRC)/cmd/stat/Makefile.stat
 
 LDLIBS += -lkstat -ldevinfo -lavl
 CFLAGS += $(CCVERBOSE) -I${STATCOMMONDIR}
+C99LMODE=	-Xc99=%all
 CERRWARN += -_gcc=-Wno-uninitialized
 CERRWARN += -_gcc=-Wno-switch
 CERRWARN += -_gcc=-Wno-parentheses
diff --git a/usr/src/cmd/stat/kstat/Makefile b/usr/src/cmd/stat/kstat/Makefile
index 97b1863e08..fd5ac35021 100644
--- a/usr/src/cmd/stat/kstat/Makefile
+++ b/usr/src/cmd/stat/kstat/Makefile
@@ -21,6 +21,7 @@
 #
 # Copyright 2009 Sun Microsystems, Inc.  All rights reserved.
 # Use is subject to license terms.
+# Copyright 2018 Joyent, Inc.
 #
 
 PROG = kstat
@@ -32,6 +33,7 @@ include $(SRC)/cmd/stat/Makefile.stat
 
 LDLIBS += -lavl -lcmdutils -ldevinfo -lgen -lkstat
 CFLAGS += $(CCVERBOSE) -I${STATCOMMONDIR}
+C99LMODE=	-Xc99=%all
 CERRWARN += -_gcc=-Wno-uninitialized
 CERRWARN += -_gcc=-Wno-switch
 CERRWARN += -_gcc=-Wno-parentheses
diff --git a/usr/src/cmd/stat/mpstat/Makefile b/usr/src/cmd/stat/mpstat/Makefile
index fd3d57dafb..27eed29282 100644
--- a/usr/src/cmd/stat/mpstat/Makefile
+++ b/usr/src/cmd/stat/mpstat/Makefile
@@ -21,6 +21,7 @@
 #
 # Copyright 2009 Sun Microsystems, Inc.  All rights reserved.
 # Use is subject to license terms.
+# Copyright 2018 Joyent, Inc.
 #
 
 PROG = mpstat
@@ -32,6 +33,7 @@ include $(SRC)/cmd/stat/Makefile.stat
 
 LDLIBS += -ldevinfo -lkstat -lavl
 CFLAGS += $(CCVERBOSE) -I${STATCOMMONDIR}
+C99LMODE=	-Xc99=%all
 CERRWARN += -_gcc=-Wno-uninitialized
 CERRWARN += -_gcc=-Wno-switch
 CERRWARN += -_gcc=-Wno-parentheses
diff --git a/usr/src/cmd/stat/vfsstat/Makefile b/usr/src/cmd/stat/vfsstat/Makefile
index 04b5085243..a08eed8a52 100644
--- a/usr/src/cmd/stat/vfsstat/Makefile
+++ b/usr/src/cmd/stat/vfsstat/Makefile
@@ -18,7 +18,7 @@
 #
 # CDDL HEADER END
 #
-# Copyright (c) 2011, Joyent, Inc. All rights reserved.
+# Copyright (c) 2018, Joyent, Inc. All rights reserved.
 #
 
 include $(SRC)/cmd/Makefile.cmd
@@ -27,6 +27,8 @@ PROG=	vfsstat
 
 .KEEP_STATE:
 
+C99LMODE=	-Xc99=%all
+
 all: $(PROG)
 
 install: all .WAIT $(ROOTPROG)
diff --git a/usr/src/cmd/stat/vmstat/Makefile b/usr/src/cmd/stat/vmstat/Makefile
index d6f65b98d0..092537ccdd 100644
--- a/usr/src/cmd/stat/vmstat/Makefile
+++ b/usr/src/cmd/stat/vmstat/Makefile
@@ -21,6 +21,7 @@
 #
 # Copyright 2009 Sun Microsystems, Inc.  All rights reserved.
 # Use is subject to license terms.
+# Copyright 2018 Joyent, Inc.
 #
 
 PROG = vmstat
@@ -32,6 +33,7 @@ include $(SRC)/cmd/stat/Makefile.stat
 
 LDLIBS += -ldevinfo -lkstat -lavl
 CFLAGS += $(CCVERBOSE) -I${STATCOMMONDIR}
+C99LMODE=	-Xc99=%all
 CERRWARN += -_gcc=-Wno-switch
 CERRWARN += -_gcc=-Wno-uninitialized
 CERRWARN += -_gcc=-Wno-parentheses
diff --git a/usr/src/cmd/stmsboot/Makefile b/usr/src/cmd/stmsboot/Makefile
index 8e97f0f467..cda3ad09d1 100644
--- a/usr/src/cmd/stmsboot/Makefile
+++ b/usr/src/cmd/stmsboot/Makefile
@@ -21,6 +21,7 @@
 #
 # Copyright 2009 Sun Microsystems, Inc.  All rights reserved.
 # Use is subject to license terms.
+# Copyright 2018 Joyent, Inc.
 #
 
 MANIFEST = mpxio-upgrade.xml
@@ -41,6 +42,7 @@ ROOTFSLIB_MPXIO = $(ROOT)/lib/mpxio
 ROOTMANIFESTDIR = $(ROOTSVCSYSTEMDEVICE)
 LDLIBS += -ldevinfo -ldevid -lnvpair -lumem
 CERRWARN += -_gcc=-Wno-uninitialized
+C99LMODE=	-Xc99=%all
 
 .KEEP_STATE:
 
diff --git a/usr/src/lib/libadm/Makefile.com b/usr/src/lib/libadm/Makefile.com
index 4631c50bf4..a496655a3f 100644
--- a/usr/src/lib/libadm/Makefile.com
+++ b/usr/src/lib/libadm/Makefile.com
@@ -20,6 +20,7 @@
 #
 #
 # Copyright (c) 1997, 2010, Oracle and/or its affiliates. All rights reserved.
+# Copyright 2018 Joyent, Inc.
 #
 
 LIBRARY=	libadm.a
@@ -42,6 +43,7 @@ LIBS=		$(DYNLIB) $(LINTLIB)
 SRCDIR=		../common
 
 CPPFLAGS +=	-I ../inc
+CSTD =		$(CSTD_GNU99)
 
 CERRWARN +=	-_gcc=-Wno-parentheses
 CERRWARN +=	-_gcc=-Wno-uninitialized
diff --git a/usr/src/lib/libefi/Makefile.com b/usr/src/lib/libefi/Makefile.com
index 3fc915acdd..97a4d579f4 100644
--- a/usr/src/lib/libefi/Makefile.com
+++ b/usr/src/lib/libefi/Makefile.com
@@ -22,6 +22,7 @@
 # Copyright 2006 Sun Microsystems, Inc.  All rights reserved.
 # Copyright 2018 OmniOS Community Edition (OmniOSce) Association.
 # Use is subject to license terms.
+# Copyright 2018 Joyent, Inc.
 #
 
 LIBRARY =	libefi.a
@@ -40,6 +41,7 @@ LDLIBS +=	-luuid -lsmbios -lc
 $(LINTLIB) :=	SRCS = $(SRCDIR)/$(LINTSRC)
 CFLAGS +=	$(CCVERBOSE)
 
+CSTD =		$(CSTD_GNU99)
 LINTFLAGS64 +=	-errchk=longptr64
 
 .KEEP_STATE:
diff --git a/usr/src/lib/libsmedia/plugins/Makefile.com b/usr/src/lib/libsmedia/plugins/Makefile.com
index f1fa1c19e2..d31896364e 100644
--- a/usr/src/lib/libsmedia/plugins/Makefile.com
+++ b/usr/src/lib/libsmedia/plugins/Makefile.com
@@ -21,8 +21,8 @@
 #
 # Copyright 2006 Sun Microsystems, Inc.  All rights reserved.
 # Use is subject to license terms.
+# Copyright 2018 Joyent, Inc.
 #
-# ident	"%Z%%M%	%I%	%E% SMI"
 #
 
 LIBS =		$(DYNLIB)
@@ -43,6 +43,7 @@ CLEANFILES=	$(LINTOUT) $(LINTPLUGIN)
 
 SRCDIR =	../common
 
+CSTD =		$(CSTD_GNU99)
 LINTFLAGS += -xu
 LINTFLAGS64 += -xu
 $(LINTPLUGIN) :=	SRCS=$(OBJECTS:%.o=../common/%.c)
-- 
2.21.0

