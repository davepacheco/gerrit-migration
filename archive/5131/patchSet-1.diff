From 48f399c1c7e7a2d8c40a2a6da7b664d451dc3c45 Mon Sep 17 00:00:00 2001
From: Trent Mick <trentm@gmail.com>
Date: Fri, 23 Nov 2018 14:56:45 -0800
Subject: [PATCH] MANTA-4030 many images using node 0.10 or 0.12 broken by
 transitive lru-cache@4.1.4 dep

---
 CHANGES.md   | 5 +++++
 package.json | 6 ++++--
 2 files changed, 9 insertions(+), 2 deletions(-)

diff --git a/CHANGES.md b/CHANGES.md
index 12409e9..e1dcbe1 100644
--- a/CHANGES.md
+++ b/CHANGES.md
@@ -1,5 +1,10 @@
 # sdc (SDC ops core zone) Changelog
 
+## 1.5.1
+
+- MANTA-4030 many images using node 0.10 or 0.12 broken by transitive
+  lru-cache@4.1.4 dep
+
 ## 1.5.0
 
 - TOOLS-1857 Add sdc-volapi command to headnode's GZ
diff --git a/package.json b/package.json
index ee9ecd9..c7e3bd3 100644
--- a/package.json
+++ b/package.json
@@ -1,19 +1,21 @@
 {
     "name": "sdc",
     "description": "SmartDataCenter 'sdc' zone to hold ops/admin tools",
-    "version": "1.5.0",
+    "version": "1.5.1",
     "author": "Joyent (joyent.com)",
     "private": true,
+    "// lru-cache": "attempting to pin version while satisfying transitive deps, because lru-cache@4.1.4 includes yallist@3 which breaks node --abort-on-uncaught-exception with node <v4",
     "dependencies": {
         "sdc-clients": "8.1.2",
         "amonadm": "git+https://github.com/joyent/sdc-amonadm.git#fcf2fd8",
         "smartdc": "git+https://github.com/joyent/node-smartdc.git#4308fd9",
         "manta": "git+https://github.com/joyent/node-manta.git#b277acf",
         "moray": "git+https://github.com/joyent/node-moray.git#b84ef0e",
-        "imgapi-cli": "git+https://github.com/joyent/sdc-imgapi-cli.git#v2.3.0",
+        "imgapi-cli": "git+https://github.com/joyent/sdc-imgapi-cli.git#v2.4.1",
         "bunyan": "1.3.3",
         "assert-plus": "0.1.5",
         "ldapjs": "git+https://github.com/mcavage/node-ldapjs.git#f213b3e",
+        "lru-cache": "4.1.3",
         "mkdirp": "0.3.5",
         "node-uuid": "1.4.0",
         "posix-getopt": "1.1.0",
-- 
2.21.0

