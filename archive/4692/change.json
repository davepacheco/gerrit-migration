{"project":"joyent/sdc-net-agent","branch":"master","id":"I84c4db6a1271df92c6cf54df4a8022210359c4f1","number":"4692","subject":"TRITON-697 net-agent should support dummy backend compatible with mockcloud Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"url":"https://cr.joyent.us/4692","commitMessage":"TRITON-697 net-agent should support dummy backend compatible with mockcloud\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1534359466,"lastUpdated":1539387576,"open":false,"status":"MERGED","comments":[{"timestamp":1534359466,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 1."},{"timestamp":1534359467,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit a3ef852cd37d2ccd11a9dedb10706ada4affaf3f\n    \n    initial work on net-agent having a dummy backend"},{"timestamp":1534359488,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n /tmp/repo/build/node/bin/node node_modules/.bin/eslint   bin/net-agent.js lib/net-agent.js lib/inst-fsm.js lib/nic-fsm.js lib/watcher-fsm.js lib/net-fsm.js lib/common.js lib/server-fsm.js lib/aggr-fsm.js lib/event-source.js lib/vmadm-watcher-fsm.js lib/index.js\n \n /tmp/repo/lib/net-agent.js\n   116:1  error  Line 116 exceeds the maximum line length of 80  max-len\n   294:1  error  Line 294 exceeds the maximum line length of 80  max-len\n \n /tmp/repo/lib/server-fsm.js\n   75:5  error  Expected a linebreak after \u0027/*\u0027  multiline-comment-style\n \n ✖ 3 problems (3 errors, 0 warnings)\n   1 error, 0 warnings potentially fixable with the `--fix` option.\n \n tools/mk/Makefile.targ:201: recipe for target \u0027check-eslint\u0027 failed\n gmake: *** [check-eslint] Error 1"},{"timestamp":1534374770,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 2."},{"timestamp":1534374771,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 76fdb4d52b596b80deef17d02dfee55ab38a5cf6\n    \n    handle function or object vmadm"},{"timestamp":1534374789,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n /tmp/repo/build/node/bin/node node_modules/.bin/eslint   bin/net-agent.js lib/watcher-fsm.js lib/aggr-fsm.js lib/event-source.js lib/inst-fsm.js lib/common.js lib/vmadm-watcher-fsm.js lib/server-fsm.js lib/index.js lib/net-agent.js lib/nic-fsm.js lib/net-fsm.js\n \n /tmp/repo/lib/server-fsm.js\n   75:5  error  Expected a linebreak after \u0027/*\u0027  multiline-comment-style\n \n /tmp/repo/lib/net-agent.js\n   116:1  error  Line 116 exceeds the maximum line length of 80  max-len\n   294:1  error  Line 294 exceeds the maximum line length of 80  max-len\n \n ✖ 3 problems (3 errors, 0 warnings)\n   1 error, 0 warnings potentially fixable with the `--fix` option.\n \n tools/mk/Makefile.targ:201: recipe for target \u0027check-eslint\u0027 failed\n gmake: *** [check-eslint] Error 1"},{"timestamp":1534374926,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 3."},{"timestamp":1534374927,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 4f5314bafce122847dd93181c77390910448ea86\n    \n    attempt to satisfy the make check bot"},{"timestamp":1534374972,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing-1\n\n(5 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1534375140,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 4."},{"timestamp":1534375141,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit ee2e68ab96f77a9c193716ecff52c23c23de0ee8\n    \n    attempt to satisfy the make check bot"},{"timestamp":1534375161,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n /tmp/repo/build/node/bin/node node_modules/.bin/eslint   bin/net-agent.js lib/aggr-fsm.js lib/index.js lib/vmadm-watcher-fsm.js lib/event-source.js lib/inst-fsm.js lib/watcher-fsm.js lib/net-agent.js lib/common.js lib/nic-fsm.js lib/server-fsm.js lib/net-fsm.js\n \n /tmp/repo/lib/vmadm-watcher-fsm.js\n   36:18  error  Unary word operator \u0027typeof\u0027 must be followed by whitespace  space-unary-ops\n \n /tmp/repo/lib/event-source.js\n   22:18  error  Unary word operator \u0027typeof\u0027 must be followed by whitespace  space-unary-ops\n \n /tmp/repo/lib/inst-fsm.js\n   52:18  error  Unary word operator \u0027typeof\u0027 must be followed by whitespace  space-unary-ops\n \n /tmp/repo/lib/watcher-fsm.js\n   77:18  error  Unary word operator \u0027typeof\u0027 must be followed by whitespace  space-unary-ops\n \n /tmp/repo/lib/net-agent.js\n   117:18  error  Unary word operator \u0027typeof\u0027 must be followed by whitespace  space-unary-ops\n \n ✖ 5 problems (5 errors, 0 warnings)\n   5 errors, 0 warnings potentially fixable with the `--fix` option.\n \n tools/mk/Makefile.targ:201: recipe for target \u0027check-eslint\u0027 failed\n gmake: *** [check-eslint] Error 1"},{"timestamp":1534375220,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 5."},{"timestamp":1534375221,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit 38207cff610fbede837c339f53a6cf2a00df0b6a\n    \n    attempt to satisfy the make check bot"},{"timestamp":1534375261,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1534802593,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 6."},{"timestamp":1534802594,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit 9f2bc3189e8b94ef506c5c21cf0a0b6fae8feb46\n    \n    fix net-agent when VMs show up"},{"timestamp":1534802635,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1537224923,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 7."},{"timestamp":1537224924,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 7:\n\nNew commits:\n    \n    commit 9e63a5aa3da59d562d7befce6102f15f2600302f\n    \n    vmadm changes went to master\n    \n    commit a16c38f4da15ca8b26f7ceb35125d6d054365955\n    \n    first stab at using common dummy\n    \n    commit 7f671b3c8d448868401f8611f9b409c0dd20f10a\n    \n    fix so net-agent actually works with vmadm.events"},{"timestamp":1537224969,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1538170973,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 8."},{"timestamp":1538170974,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 8:\n\nNew commits:\n    \n    commit f60d7af9a2998527b6dc0a8a44d644b09f6ac194\n    \n    update to support dummy vminfod\n    \n    commit 4e29559005cbfc3c840ba056742d5ceaa7a4ac8b\n    \n    merge in TRITON-801 fix"},{"timestamp":1538171633,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539231825,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 9."},{"timestamp":1539231826,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 9:\n\nNew commits:\n    \n    commit b15350ecd6f82c96be828477165e8b6fe77f9cd2\n    \n    fixes to make work on a real CN"},{"timestamp":1539231902,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539232379,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 9:\n\nI just found something in self-review. Will put back out for review once that\u0027s fixed."},{"timestamp":1539234624,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 10."},{"timestamp":1539234626,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 10:\n\nNew commits:\n    \n    commit e3ebd8db74edc92282971ee5f8b3a8b1011de428\n    \n    fix issue loading dummy server sysinfo (though this seems to never be used?)"},{"timestamp":1539234714,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539291622,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 10:\n\nThe changes here have run through the vmapi tests with both mockcloud CNs and non-mockcloud CNs successfully.\n\nI think review is mostly needed on things other than dummy/net-agent.js. That file is only used by mockcloud so if there are problems there, they\u0027ll not be production-blocking. Not that review is unwelcome, just that the other parts are the critical bit (to ensure not breaking production net-agents). \n\nThe main change here is to allow passing in a vmadm object so that it’s possible to use a dummy vmadm instead."},{"timestamp":1539295276,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 10: Code-Review+1\n\n(2 comments)"},{"timestamp":1539386692,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 10:\n\n(1 comment)"},{"timestamp":1539386752,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 11."},{"timestamp":1539386753,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 11:\n\nNew commits:\n    \n    commit 33894beb2dab60c25fb1d03bcc65781b1e5fce0e\n    \n    bump to vmadm release 1.3.0 now that that\u0027s published\n    \n    commit b15350ecd6f82c96be828477165e8b6fe77f9cd2\n    \n    fixes to make work on a real CN\n    \n    commit f60d7af9a2998527b6dc0a8a44d644b09f6ac194\n    \n    update to support dummy vminfod\n    \n    commit 4e29559005cbfc3c840ba056742d5ceaa7a4ac8b\n    \n    merge in TRITON-801 fix\n    \n    commit 9e63a5aa3da59d562d7befce6102f15f2600302f\n    \n    vmadm changes went to master\n    \n    commit a16c38f4da15ca8b26f7ceb35125d6d054365955\n    \n    first stab at using common dummy\n    \n    commit 7f671b3c8d448868401f8611f9b409c0dd20f10a\n    \n    fix so net-agent actually works with vmadm.events\n    \n    commit 9f2bc3189e8b94ef506c5c21cf0a0b6fae8feb46\n    \n    fix net-agent when VMs show up\n    \n    commit 38207cff610fbede837c339f53a6cf2a00df0b6a\n    \n    attempt to satisfy the make check bot\n    \n    commit ee2e68ab96f77a9c193716ecff52c23c23de0ee8\n    \n    attempt to satisfy the make check bot\n    \n    commit 4f5314bafce122847dd93181c77390910448ea86\n    \n    attempt to satisfy the make check bot\n    \n    commit 76fdb4d52b596b80deef17d02dfee55ab38a5cf6\n    \n    handle function or object vmadm\n    \n    commit a3ef852cd37d2ccd11a9dedb10706ada4affaf3f\n    \n    initial work on net-agent having a dummy backend"},{"timestamp":1539386845,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539387043,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 11: Code-Review+1 Integration-Approval+1"},{"timestamp":1539387542,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 12: Commit message was updated."},{"timestamp":1539387576,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Josh Wilsdon"}],"currentPatchSet":{"number":"12","revision":"84c4db6a1271df92c6cf54df4a8022210359c4f1","parents":["0b390942a750ad06a8e454ddc677be1a84aa3e1a"],"ref":"refs/changes/92/4692/12","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1539387542,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539386845,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539387043,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1539387043,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1539387576,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"dummy/net-agent.js","type":"ADDED","insertions":274,"deletions":0},{"file":"lib/event-source.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/inst-fsm.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/net-agent.js","type":"MODIFIED","insertions":30,"deletions":-10},{"file":"lib/server-fsm.js","type":"MODIFIED","insertions":33,"deletions":-14},{"file":"lib/vmadm-watcher-fsm.js","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"lib/watcher-fsm.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":363,"sizeDeletions":-38},"patchSets":[{"number":"1","revision":"2c866d18e893cb28bb31683d4543965e048595e1","parents":["0b390942a750ad06a8e454ddc677be1a84aa3e1a"],"ref":"refs/changes/92/4692/1","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1534359466,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1534359488,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"dummy/net-agent.js","type":"ADDED","insertions":266,"deletions":0},{"file":"dummy/vmadm.js","type":"ADDED","insertions":973,"deletions":0},{"file":"lib/event-source.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/inst-fsm.js","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"lib/net-agent.js","type":"MODIFIED","insertions":14,"deletions":-5},{"file":"lib/server-fsm.js","type":"MODIFIED","insertions":32,"deletions":-14},{"file":"lib/vmadm-watcher-fsm.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/watcher-fsm.js","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":1302,"sizeDeletions":-32},{"number":"2","revision":"457ade9b2c6f5955f9bcd3ad299215d2cc121c09","parents":["0b390942a750ad06a8e454ddc677be1a84aa3e1a"],"ref":"refs/changes/92/4692/2","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1534374770,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1534374789,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"dummy/net-agent.js","type":"ADDED","insertions":266,"deletions":0},{"file":"dummy/vmadm.js","type":"ADDED","insertions":973,"deletions":0},{"file":"lib/event-source.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"lib/inst-fsm.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/net-agent.js","type":"MODIFIED","insertions":14,"deletions":-5},{"file":"lib/server-fsm.js","type":"MODIFIED","insertions":32,"deletions":-14},{"file":"lib/vmadm-watcher-fsm.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"lib/watcher-fsm.js","type":"MODIFIED","insertions":4,"deletions":-2}],"sizeInsertions":1308,"sizeDeletions":-32},{"number":"3","revision":"432991074bed2d7c0a6f6d3a9f192cd355cae2f2","parents":["0b390942a750ad06a8e454ddc677be1a84aa3e1a"],"ref":"refs/changes/92/4692/3","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1534374926,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1534374972,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/event-source.js","line":22,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"unparenthesized typeof expression"},{"file":"lib/inst-fsm.js","line":52,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"unparenthesized typeof expression"},{"file":"lib/net-agent.js","line":117,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"unparenthesized typeof expression"},{"file":"lib/vmadm-watcher-fsm.js","line":36,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"unparenthesized typeof expression"},{"file":"lib/watcher-fsm.js","line":77,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"unparenthesized typeof expression"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"dummy/net-agent.js","type":"ADDED","insertions":266,"deletions":0},{"file":"dummy/vmadm.js","type":"ADDED","insertions":973,"deletions":0},{"file":"lib/event-source.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"lib/inst-fsm.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/net-agent.js","type":"MODIFIED","insertions":19,"deletions":-6},{"file":"lib/server-fsm.js","type":"MODIFIED","insertions":33,"deletions":-14},{"file":"lib/vmadm-watcher-fsm.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"lib/watcher-fsm.js","type":"MODIFIED","insertions":4,"deletions":-2}],"sizeInsertions":1314,"sizeDeletions":-33},{"number":"4","revision":"3b9d3477953d04bff01e2e4739aac058b6f1928b","parents":["0b390942a750ad06a8e454ddc677be1a84aa3e1a"],"ref":"refs/changes/92/4692/4","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1534375140,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1534375161,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"dummy/net-agent.js","type":"ADDED","insertions":266,"deletions":0},{"file":"dummy/vmadm.js","type":"ADDED","insertions":973,"deletions":0},{"file":"lib/event-source.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"lib/inst-fsm.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/net-agent.js","type":"MODIFIED","insertions":19,"deletions":-6},{"file":"lib/server-fsm.js","type":"MODIFIED","insertions":33,"deletions":-14},{"file":"lib/vmadm-watcher-fsm.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"lib/watcher-fsm.js","type":"MODIFIED","insertions":4,"deletions":-2}],"sizeInsertions":1314,"sizeDeletions":-33},{"number":"5","revision":"33206c6eb35b25ed930e8b0d8d1ff0f95ce18188","parents":["0b390942a750ad06a8e454ddc677be1a84aa3e1a"],"ref":"refs/changes/92/4692/5","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1534375220,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1534375261,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"dummy/net-agent.js","type":"ADDED","insertions":266,"deletions":0},{"file":"dummy/vmadm.js","type":"ADDED","insertions":973,"deletions":0},{"file":"lib/event-source.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"lib/inst-fsm.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/net-agent.js","type":"MODIFIED","insertions":19,"deletions":-6},{"file":"lib/server-fsm.js","type":"MODIFIED","insertions":33,"deletions":-14},{"file":"lib/vmadm-watcher-fsm.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"lib/watcher-fsm.js","type":"MODIFIED","insertions":4,"deletions":-2}],"sizeInsertions":1314,"sizeDeletions":-33},{"number":"6","revision":"2d4ef27253d8f557fe6d2effe41a7adc610c783b","parents":["0b390942a750ad06a8e454ddc677be1a84aa3e1a"],"ref":"refs/changes/92/4692/6","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1534802593,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1534802635,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"dummy/net-agent.js","type":"ADDED","insertions":266,"deletions":0},{"file":"dummy/vmadm.js","type":"ADDED","insertions":976,"deletions":0},{"file":"lib/event-source.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"lib/inst-fsm.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/net-agent.js","type":"MODIFIED","insertions":20,"deletions":-6},{"file":"lib/server-fsm.js","type":"MODIFIED","insertions":33,"deletions":-14},{"file":"lib/vmadm-watcher-fsm.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"lib/watcher-fsm.js","type":"MODIFIED","insertions":4,"deletions":-2}],"sizeInsertions":1318,"sizeDeletions":-33},{"number":"7","revision":"30f3c5256a76b6f161caff2cfa831ead98231292","parents":["0b390942a750ad06a8e454ddc677be1a84aa3e1a"],"ref":"refs/changes/92/4692/7","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1537224923,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1537224969,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"dummy/net-agent.js","type":"ADDED","insertions":267,"deletions":0},{"file":"lib/event-source.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"lib/inst-fsm.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/net-agent.js","type":"MODIFIED","insertions":20,"deletions":-6},{"file":"lib/server-fsm.js","type":"MODIFIED","insertions":33,"deletions":-14},{"file":"lib/vmadm-watcher-fsm.js","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"lib/watcher-fsm.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":346,"sizeDeletions":-34},{"number":"8","revision":"f7b2e941642b3dcf4dad61d20f3cb4c3a455a73a","parents":["0b390942a750ad06a8e454ddc677be1a84aa3e1a"],"ref":"refs/changes/92/4692/8","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1538170973,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1538171633,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"dummy/net-agent.js","type":"ADDED","insertions":267,"deletions":0},{"file":"lib/event-source.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"lib/inst-fsm.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/net-agent.js","type":"MODIFIED","insertions":20,"deletions":-6},{"file":"lib/server-fsm.js","type":"MODIFIED","insertions":33,"deletions":-14},{"file":"lib/vmadm-watcher-fsm.js","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"lib/watcher-fsm.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":349,"sizeDeletions":-35},{"number":"9","revision":"fe37f885969a40ec0cabe2b37302abd6dc6dbb9b","parents":["0b390942a750ad06a8e454ddc677be1a84aa3e1a"],"ref":"refs/changes/92/4692/9","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1539231825,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539231902,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"dummy/net-agent.js","type":"ADDED","insertions":267,"deletions":0},{"file":"lib/event-source.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/inst-fsm.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/net-agent.js","type":"MODIFIED","insertions":19,"deletions":-6},{"file":"lib/server-fsm.js","type":"MODIFIED","insertions":33,"deletions":-14},{"file":"lib/vmadm-watcher-fsm.js","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"lib/watcher-fsm.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":345,"sizeDeletions":-34},{"number":"10","revision":"6759ae4480e39df7d19e4d32133d44f919552c6f","parents":["0b390942a750ad06a8e454ddc677be1a84aa3e1a"],"ref":"refs/changes/92/4692/10","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1539234624,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539234714,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539295276,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"lib/watcher-fsm.js","line":76,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Ignorant Q: when is it a function?  This should either be the vanilla `require(\u0027vmadm\u0027)` or `require(\u0027vmadm/lib/index.dummy_vminfod\u0027)` right? Both of those are functions (and object, as well)."},{"file":"lib/watcher-fsm.js","line":76,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Like this:\n\n    \u003e [root@mockcloud0 /opt/triton/mockcloud]# node\n    \u003e var smartOSVmadm \u003d require(\u0027vmadm\u0027);\n    undefined\n    \u003e var DummyVmadm \u003d require(\u0027vmadm/lib/index.dummy\u0027);\n    undefined\n    \u003e var dummyVmadm \u003d new DummyVmadm({log: {}, serverRoot: \u0027/tmp\u0027, serverUuid: \u0027bcb7c326-ce75-11e8-b9ac-ffb3fba01a9d\u0027});\n    undefined\n    \u003e typeof (dummyVmadm)\n    \u0027object\u0027\n    \u003e typeof (smartOSVmadm)\n    \u0027function\u0027\n    \u003e"},{"file":"package.json","line":22,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"waiting for this to merge"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"dummy/net-agent.js","type":"ADDED","insertions":274,"deletions":0},{"file":"lib/event-source.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/inst-fsm.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/net-agent.js","type":"MODIFIED","insertions":30,"deletions":-10},{"file":"lib/server-fsm.js","type":"MODIFIED","insertions":33,"deletions":-14},{"file":"lib/vmadm-watcher-fsm.js","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"lib/watcher-fsm.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":363,"sizeDeletions":-38},{"number":"11","revision":"c90daac7438d8c2023190c3f50e004d7b956d7fa","parents":["0b390942a750ad06a8e454ddc677be1a84aa3e1a"],"ref":"refs/changes/92/4692/11","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1539386752,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539386845,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539387043,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1539387043,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"dummy/net-agent.js","type":"ADDED","insertions":274,"deletions":0},{"file":"lib/event-source.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/inst-fsm.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/net-agent.js","type":"MODIFIED","insertions":30,"deletions":-10},{"file":"lib/server-fsm.js","type":"MODIFIED","insertions":33,"deletions":-14},{"file":"lib/vmadm-watcher-fsm.js","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"lib/watcher-fsm.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":363,"sizeDeletions":-38},{"number":"12","revision":"84c4db6a1271df92c6cf54df4a8022210359c4f1","parents":["0b390942a750ad06a8e454ddc677be1a84aa3e1a"],"ref":"refs/changes/92/4692/12","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1539387542,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539386845,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539387043,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1539387043,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1539387576,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"dummy/net-agent.js","type":"ADDED","insertions":274,"deletions":0},{"file":"lib/event-source.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/inst-fsm.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/net-agent.js","type":"MODIFIED","insertions":30,"deletions":-10},{"file":"lib/server-fsm.js","type":"MODIFIED","insertions":33,"deletions":-14},{"file":"lib/vmadm-watcher-fsm.js","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"lib/watcher-fsm.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":363,"sizeDeletions":-38}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}]}