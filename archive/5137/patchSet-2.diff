From 6b21bf3d829efb460ad3ac00d6e597801daf6174 Mon Sep 17 00:00:00 2001
From: Trent Mick <trentm@gmail.com>
Date: Mon, 26 Nov 2018 14:11:30 -0800
Subject: [PATCH] MANTA-4030 many images using node 0.10 or 0.12 broken by
 transitive lru-cache@4.1.4 dep Reviewed by: Alex Wilson
 <alex.wilson@joyent.com> Approved by: Alex Wilson <alex.wilson@joyent.com>

---
 package.json | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/package.json b/package.json
index 36027e4..1157769 100644
--- a/package.json
+++ b/package.json
@@ -8,11 +8,15 @@
         "type": "git",
         "url": "git+ssh://git@github.com:joyent/manta-wrasse.git"
     },
+    "// lru-cache": "attempting to pin version while satisfying transitive deps, because lru-cache@4.1.4 includes yallist@3 which breaks node --abort-on-uncaught-exception with node <v4",
+    "// kang": "elevate the libmanta->moray->fast->kang dep, so the top-level lru-cache@4.1.3 can be used by kang's restify dep, without being blocked by libmanta's lru-cache@2 dep",
     "dependencies": {
         "assert-plus": "0.1.5",
         "bunyan": "0.22.1",
         "dashdash": "1.4.0",
+        "kang": "1.2.0",
         "libmanta": "git+ssh://git@github.com:joyent/node-libmanta.git#master",
+        "lru-cache": "4.1.3",
         "manta": "git://github.com/joyent/node-manta.git#master",
         "mahi": "git+ssh://git@github.com:joyent/node-mahi.git#master",
         "marlin": "git+ssh://git@github.com:joyent/manta-marlin.git#master",
-- 
2.21.0

