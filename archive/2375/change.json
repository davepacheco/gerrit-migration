{"project":"joyent/illumos-joyent","branch":"master","id":"I4a03f2c4ee9a2041e7afc6abc3e59a319755facd","number":"2375","subject":"OS-6278 ll_trans flag is lost on dlmgmtd restart Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Approved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e","owner":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"url":"https://cr.joyent.us/2375","commitMessage":"OS-6278 ll_trans flag is lost on dlmgmtd restart\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1502403928,"lastUpdated":1502485568,"open":false,"status":"MERGED","comments":[{"timestamp":1502403928,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Uploaded patch set 1."},{"timestamp":1502407457,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1: Code-Review+1\n\nI think this makes sense. Thanks. I guess having the VNIC as active-only is a reasonable way to see that it makes sense. Do you know cases when we\u0027d have persistent vnics end up in the case that\u0027s mentioned here?"},{"timestamp":1502458156,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1502480223,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 1:\n\n\u003eDo you know cases when we\u0027d have persistent vnics end up in the case that\u0027s mentioned here?\n\nIn general we shouldn\u0027t see persistent links reaching this new if-block because dlmgmtd will read the configuration files and correctly assign the ll_zoneid member. Now, if someone were to muck with the configuration files and try to confuse dlmgmtd then I think a persistent link could reach this if-block so the extra check will keep it from getting marked as transient.\n\nI think there\u0027s an argument to make all this dlmgmtd code easier to understand, and I would probably rename \"transient\" to \"zone ephemeral\" or some such. But that\u0027s something for me to tackle another day."},{"timestamp":1502480446,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 1:\n\nTesting notes added to jira ticket."},{"timestamp":1502484234,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1: Integration-Approval+1"},{"timestamp":1502485503,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1502485558,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1502485568,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Ryan Zezeski"}],"currentPatchSet":{"number":"3","revision":"4a03f2c4ee9a2041e7afc6abc3e59a319755facd","parents":["7c9cf15db394630449591dfb9e3186a6908030bd"],"ref":"refs/changes/75/2375/3","uploader":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"createdOn":1502485558,"author":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502407457,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502458156,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1502484234,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1502485568,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/cmd/dlmgmtd/dlmgmt_util.c","type":"MODIFIED","insertions":11,"deletions":0}],"sizeInsertions":11,"sizeDeletions":0},"patchSets":[{"number":"1","revision":"7729b79a6313f97aac67b16bcf5fbdbf7a698891","parents":["c08af995b7a4018333aa45db89575979b416b60a"],"ref":"refs/changes/75/2375/1","uploader":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"createdOn":1502403928,"author":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502407457,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502458156,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1502484234,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/dlmgmtd/dlmgmt_util.c","type":"MODIFIED","insertions":11,"deletions":0}],"sizeInsertions":11,"sizeDeletions":0},{"number":"2","revision":"08574818286067d5aacb3e68b43eb77e79378757","parents":["7c9cf15db394630449591dfb9e3186a6908030bd"],"ref":"refs/changes/75/2375/2","uploader":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"createdOn":1502485503,"author":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502407457,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502458156,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1502484234,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/dlmgmtd/dlmgmt_util.c","type":"MODIFIED","insertions":11,"deletions":0}],"sizeInsertions":11,"sizeDeletions":0},{"number":"3","revision":"4a03f2c4ee9a2041e7afc6abc3e59a319755facd","parents":["7c9cf15db394630449591dfb9e3186a6908030bd"],"ref":"refs/changes/75/2375/3","uploader":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"createdOn":1502485558,"author":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502407457,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502458156,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1502484234,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1502485568,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/cmd/dlmgmtd/dlmgmt_util.c","type":"MODIFIED","insertions":11,"deletions":0}],"sizeInsertions":11,"sizeDeletions":0}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}]}