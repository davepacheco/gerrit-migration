{"project":"joyent/sdc-headnode","branch":"master","id":"I82c2c799b3027ec25b4c53cd836ff4be3fb74a1b","number":"2963","subject":"TOOLS-1858 Want sdcadm updates channel to set based on installer Reviewed by: Angela Fong \u003cangela.fong@joyent.com\u003e Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Angela Fong \u003cangela.fong@joyent.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/2963","commitMessage":"TOOLS-1858 Want sdcadm updates channel to set based on installer\nReviewed by: Angela Fong \u003cangela.fong@joyent.com\u003e\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Angela Fong \u003cangela.fong@joyent.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1510918450,"lastUpdated":1516131361,"open":false,"status":"MERGED","comments":[{"timestamp":1510918450,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1510918455,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit b28111e70b36c8861028face2cc9e0e7ab9fdb3d\n    \n    TOOLS-1858 Want sdcadm updates channel to set based on installer"},{"timestamp":1510918531,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1510918638,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nI\u0027ve tested both, without an answers file, where the default value must be \"release\" and you can set the value to either \"dev\" or \"support\" (note \"experimental\" and \"staging\" are intentionally excluded from the choices list) and the prompt-config.sh script will bug you regarding invalid values. And have also tested with an answers file, setting \"update_channel\" value to \"dev\".\n\nSdcadm is working as expected in all the cases."},{"timestamp":1513791098,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1513791103,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 2c7a5cf7dadfc35735460d145fe9c663af3ad5de\n    \n    TOOLS-1858 Want sdcadm updates channel to set based on installer"},{"timestamp":1513791180,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2:\n\n\"make check\" passed ok"},{"timestamp":1513904154,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"Patch Set 2:\n\n(2 comments)"},{"timestamp":1513980817,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2: Code-Review+1\n\n(2 comments)"},{"timestamp":1513985350,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"Patch Set 2:\n\n(2 comments)"},{"timestamp":1515695078,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 3."},{"timestamp":1515695084,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 64c5654c627e77344b7e3ee25a20147401ee654a\n    \n    TOOLS-1858 Want sdcadm updates channel to set based on installer"},{"timestamp":1515695108,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\nDone updating wording as suggested and rebased it to latest."},{"timestamp":1515695158,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1515697357,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1515697651,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1516130931,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1516131361,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"4","revision":"82c2c799b3027ec25b4c53cd836ff4be3fb74a1b","parents":["d0633277c6122253c70864397e2a81cb03433c29"],"ref":"refs/changes/63/2963/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1516130931,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515695158,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515697357,"by":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1515697357,"by":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515697651,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1515697651,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1516131361,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"answers.json.tmpl","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"answers.json.tmpl.external","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"scripts/prompt-config.sh","type":"MODIFIED","insertions":32,"deletions":0}],"sizeInsertions":36,"sizeDeletions":-2},"patchSets":[{"number":"1","revision":"98e702da92ed0f0f5acf048091d247dec2d19d29","parents":["625bc91b89a548a4c9b4c1bcaa7791939462cef6"],"ref":"refs/changes/63/2963/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1510918450,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1510918531,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"answers.json.tmpl","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"answers.json.tmpl.external","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"scripts/prompt-config.sh","type":"MODIFIED","insertions":30,"deletions":0}],"sizeInsertions":34,"sizeDeletions":-2},{"number":"2","revision":"2fbb8b3c36ff08fb867ae9d8cbc939f9bd980215","parents":["b7dfe1a68904305702a1ff5bcf7f4bff6ad1b41b"],"ref":"refs/changes/63/2963/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1513791098,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1510918531,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1513980817,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"scripts/prompt-config.sh","line":1206,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"Suggest to use the following wording:\n\nChannel to be used for software update.\nOptions:\n- support: Joyent-supported versions \n- release: biweekly release versions\n- dev: development builds"},{"file":"scripts/prompt-config.sh","line":1206,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"For the language for \"support\", is there some way we can say this is indented for those with support *contracts* with Joyent?"},{"file":"scripts/prompt-config.sh","line":1206,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"how about\n- support: supported versions, intended for customers with Joyent support contracts"},{"file":"scripts/prompt-config.sh","line":1218,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"Is it intentional that we don\u0027t support \"staging\" and \"experimental\" as valid options?"},{"file":"scripts/prompt-config.sh","line":1218,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"+1 to not allowing those as default channels. Using experimental is dangerous (most will be out of date, some will be built from some random branch).   \"Staging\" is only really a temporary channel used while doing release builds and before we\u0027ve approved it."},{"file":"scripts/prompt-config.sh","line":1218,"reviewer":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},"message":"Ok"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"answers.json.tmpl","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"answers.json.tmpl.external","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"scripts/prompt-config.sh","type":"MODIFIED","insertions":30,"deletions":0}],"sizeInsertions":34,"sizeDeletions":-2},{"number":"3","revision":"9b16a1809cfb2dce158b9b6195b4db2b23e21160","parents":["d0633277c6122253c70864397e2a81cb03433c29"],"ref":"refs/changes/63/2963/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1515695078,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515695158,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515697651,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1515697651,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515697357,"by":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1515697357,"by":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"answers.json.tmpl","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"answers.json.tmpl.external","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"scripts/prompt-config.sh","type":"MODIFIED","insertions":32,"deletions":0}],"sizeInsertions":36,"sizeDeletions":-2},{"number":"4","revision":"82c2c799b3027ec25b4c53cd836ff4be3fb74a1b","parents":["d0633277c6122253c70864397e2a81cb03433c29"],"ref":"refs/changes/63/2963/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1516130931,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515695158,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515697651,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1515697651,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1516131361,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515697357,"by":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1515697357,"by":{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"answers.json.tmpl","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"answers.json.tmpl.external","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"scripts/prompt-config.sh","type":"MODIFIED","insertions":32,"deletions":0}],"sizeInsertions":36,"sizeDeletions":-2}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Angela Fong","email":"angela.fong@joyent.com","username":"askfongjojo"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}