{"project":"joyent/sdcadm","branch":"master","id":"I1c45d265c5a8651e1e23e8ae1c867a4d30d8f02b","number":"2945","subject":"TOOLS-1896 sdcadm can erroneously behave as if moray is in HA mode","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/2945","commitMessage":"TOOLS-1896 sdcadm can erroneously behave as if moray is in HA mode\n","createdOn":1510763992,"lastUpdated":1510764387,"open":false,"status":"ABANDONED","comments":[{"timestamp":1510763992,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1510763997,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 7a7c4f6a65a4faefa863381afcb4de638f90a4fe\n    \n    TOOLS-1806 sdcadm can erroneously behave as if moray is in HA mode"},{"timestamp":1510764046,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2."},{"timestamp":1510764051,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 3e0941baba183fbca79108a89d009e10cffdfbde\n    \n    TOOLS-1806 sdcadm can erroneously behave as if moray is in HA mode\n    \n    commit 1ff0c70ac430f6f408fe710941470503e0146e50\n    \n    TOOLS-1421 `sdcadm experimental volapi` to setup Volumes API service\n    VOLAPI-11 Move upgrade to tritonnfs images of core services from sdcadm  to VOLAPI\n    TOOLS-1482 sdcadm experimental volapi fails to download VOLAPI\u0027s image if SAPI\u0027s sdc application\u0027s metadata has update_channel set to a value !\u003d \u0027experimental\u0027\n    TOOLS-1611 sdcadm experimental volapi does not create new volapi instance if associated VM was deleted\n    TOOLS-1504 set experimental_nfs_shared_volumes in sdc application\u0027s metadata instead of sdc-docker\u0027s service\u0027s metadata\n    TOOLS-1697 sdcadm fails to create volapi service if it doesn\u0027t exist\n    TOOLS-1821 Remove useless code from sdcadm experimental volapi that polls sdc-docker\n    TOOLS-1824 sdcadm update-other should not do anything for VOLAPI\n    TOOLS-1823 split sdcadm experimental volapi into sdcadm postsetup and sdcadm experimental commands\n    TOOLS-1822 sdcadm experimental volapi should check that images of required core services support NFS volumes\n    TOOLS-1830 replace sdcadm experimental nfs-volumes with cloudapi-nfs-volumes/docker-nfs-volumes subcommands\n    TOOLS-1829 add sdcadm experimental docker-nfs-volumes-automount\n    VOLAPI-74 set zfs_io_priority to 100 for all storage VM packages\n    PUBAPI-1420 Add ability to mount NFS volumes with CreateMachine endpoint\n    TOOLS-1919 sdcadm experimental nfs-volumes doesn\u0027t handle branch names that include hyphens\n    Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\n    Approved by: Trent Mick \u003ctrentm@gmail.com\u003e"},{"timestamp":1510764387,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Abandoned\n\nSee https://cr.joyent.us/#/c/2946/"}],"currentPatchSet":{"number":"2","revision":"1c45d265c5a8651e1e23e8ae1c867a4d30d8f02b","parents":["1a713cce5c39c82fc1ae2e4e9f9e4c6b35e9bc43"],"ref":"refs/changes/45/2945/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1510764046,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":607,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":487,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":36,"deletions":-18},{"file":"lib/procedures/update-moray-v2.js","type":"MODIFIED","insertions":280,"deletions":-103},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":33,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":1463,"sizeDeletions":-132},"patchSets":[{"number":"1","revision":"64aea962e9209d867eb3cca9ac91d24acf256bd4","parents":["1a713cce5c39c82fc1ae2e4e9f9e4c6b35e9bc43"],"ref":"refs/changes/45/2945/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1510763992,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":2,"deletions":-4},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":36,"deletions":-18},{"file":"lib/procedures/update-moray-v2.js","type":"MODIFIED","insertions":280,"deletions":-103}],"sizeInsertions":318,"sizeDeletions":-125},{"number":"2","revision":"1c45d265c5a8651e1e23e8ae1c867a4d30d8f02b","parents":["1a713cce5c39c82fc1ae2e4e9f9e4c6b35e9bc43"],"ref":"refs/changes/45/2945/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1510764046,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"etc/defaults.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/cli/do_nfs_volumes.js","type":"ADDED","insertions":607,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/post-setup/volapi.js","type":"ADDED","insertions":487,"deletions":0},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":36,"deletions":-18},{"file":"lib/procedures/update-moray-v2.js","type":"MODIFIED","insertions":280,"deletions":-103},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":33,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":1463,"sizeDeletions":-132}],"allReviewers":[{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}