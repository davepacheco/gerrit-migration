{"project":"joyent/sdcadm","branch":"master","id":"I93d6819b09989f7423fed7b7c69c130ebc1f319c","number":"4788","subject":"TRITON-752 sdcadm tests broken after TRITON-723 fix Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/4788","commitMessage":"TRITON-752 sdcadm tests broken after TRITON-723 fix\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1536166856,"lastUpdated":1536167197,"open":false,"status":"MERGED","comments":[{"timestamp":1536166856,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1536166861,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 293022c872cada595f9e73e668f55c8f90b0ee19\n    \n    TRITON-752 sdcadm tests broken after TRITON-723 fix"},{"timestamp":1536166893,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1536166919,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nTests passing so far now:\n\n# sdcadm check-health -q\nok 419 null\nok 420 should be equal\nok 421 should be equal\n# disable papi for health check\nok 422 null\nok 423 should be equal\n# sdcadm check-health with disabled papi\nok 424 errcode is 1\nok 425 -1\nok 426 unhealthy PAPI found\n# sdcadm check-health -q with disabled papi\nok 427 errcode is 1\nok 428 empty stderr\nok 429 not empty stdout\n# enable papi after health check\nok 430 null\nok 431 should be equal\n# check-health when binder is down\nok 432 null\nok 433 should be equal\nok 434 should be equal\nok 435 errcode is 1\nok 436 process not killed\nok 437 empty stdout\nok 438 binder off stderr\nok 439 empty stderr\nok 440 errcode is 1\nok 441 process not killed\nok 442 should be equal\nok 443 err msg\nok 444 binder off err\nok 445 null\nok 446 should be equal\nok 447 should be equal\nok 448 undefined\n\n1..448\n# tests 448\n# pass  448\n\n# ok"},{"timestamp":1536167073,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1: Code-Review+1 Integration-Approval+1\n\nThanks! Sorry for breaking that."},{"timestamp":1536167189,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2: Commit message was updated."},{"timestamp":1536167197,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"2","revision":"93d6819b09989f7423fed7b7c69c130ebc1f319c","parents":["1b46c802c4193b5f7b39f55d305c00d546bd7e8b"],"ref":"refs/changes/88/4788/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1536167189,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1536166893,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536167073,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1536167073,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1536167197,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"test/check-health.test.js","type":"MODIFIED","insertions":4,"deletions":-4}],"sizeInsertions":4,"sizeDeletions":-4},"patchSets":[{"number":"1","revision":"481c249d866e94e4d3a5364fe15504b1105cd7f5","parents":["1b46c802c4193b5f7b39f55d305c00d546bd7e8b"],"ref":"refs/changes/88/4788/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1536166856,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1536166893,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536167073,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1536167073,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/check-health.test.js","type":"MODIFIED","insertions":4,"deletions":-4}],"sizeInsertions":4,"sizeDeletions":-4},{"number":"2","revision":"93d6819b09989f7423fed7b7c69c130ebc1f319c","parents":["1b46c802c4193b5f7b39f55d305c00d546bd7e8b"],"ref":"refs/changes/88/4788/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1536167189,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1536166893,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1536167073,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1536167073,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1536167197,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"test/check-health.test.js","type":"MODIFIED","insertions":4,"deletions":-4}],"sizeInsertions":4,"sizeDeletions":-4}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}