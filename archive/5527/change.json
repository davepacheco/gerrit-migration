{"project":"joyent/sdc-firewaller-agent","branch":"master","topic":"lullaby-phase2","id":"I4c611178c9485812f0a8015cc5ca2eb26eddfbfe","number":"5527","subject":"TRITON-1145 convert sdc-firewaller-agent to engbld framework Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"url":"https://cr.joyent.us/5527","commitMessage":"TRITON-1145 convert sdc-firewaller-agent to engbld framework\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1549625126,"lastUpdated":1551175919,"open":false,"status":"MERGED","comments":[{"timestamp":1549625126,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 1."},{"timestamp":1549625132,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 7685760dd64e0f3f9e7aa411bd9ff8805762823a\n    \n    TRITON-1145 convert sdc-firewaller-agent to engbld framework"},{"timestamp":1549626847,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Topic set to lullaby-phase2"},{"timestamp":1550076462,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 2."},{"timestamp":1550076469,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 89b291ffd577bc2a6b53f8431cb2c3418f58601c\n    \n    TRITON-1145 convert sdc-firewaller-agent to engbld framework"},{"timestamp":1550762327,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 3."},{"timestamp":1550762334,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 6cee5523e3e5898d0917124b6f4757f0454ae9d5\n    \n    TRITON-1145 convert sdc-firewaller-agent to engbld framework"},{"timestamp":1550969870,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3: Code-Review-1\n\n(1 comment)\n\n-1\u0027ing for now to ensure we decide on the point below."},{"timestamp":1551103684,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 4."},{"timestamp":1551103690,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit ae3d761a7a1e1bcab9269384652cf5126722bc33\n    \n    TRITON-1145 convert sdc-firewaller-agent to engbld framework"},{"timestamp":1551103871,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 4:\n\nI\u0027m not totally wild about this fix, but the idea was to drop the \u0027node_modules\u0027 Makefile dependency due to the fact that \u0027make check\u0027 builds it.\n\nInstead, we add a static path to package.json to cause \u0027fw\u0027 to be installed at normal \u0027npm install\u0027 time, then drop our modified locker script on top.\n\nGiven that we\u0027re now installing \u0027fw\u0027, we need to include the SDC_AGENT_SKIP_LIFECYCLE workaround to the postinstall scripts."},{"timestamp":1551104093,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 4:\n\n\u003e I\u0027m not totally wild about this fix\n\nI should say, I believe this was a bug before engbld came along, since before any of these changes, \u0027make check ; make all ; ./build/node/bin/node ./build/node/bin/npm ls\u0027 reports the breakage too."},{"timestamp":1551122891,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 5."},{"timestamp":1551122897,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit e2ab32255ab18fabca9230654b70d4fc8759be2e\n    \n    TRITON-1145 convert sdc-firewaller-agent to engbld framework"},{"timestamp":1551125303,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1\n\nChanges look mostly sane. Built, installed on nightly-1, firewaller is running.   I created a VM on nightly-1 that turns on the firewall and firewaller\u0027s log was active doing work for that VM.\n\n```\n$ triton -p nightly-1 create minimal-64-lts sample-1G -N My-Fabric-Network -N 6c53a73e-5ad3-46ba-a8ef-8de9fc0db60d -n tmppub --firewall\nCreating instance tmppub (b6629514-b5e6-61ab-fec6-b714df3df34d, minimal-64-lts@18.4.0)\n```\n\nand\n\n```\n...\n[2019-02-25T20:07:20.317Z] DEBUG: firewaller/61822 on headnode: Updated rules for owner_uuid\u003d\"6592cbb2-d5af-41b3-99c5-f99f23e9169e\" (req_id\u003d505f8e50-cd75-4a54-ab74-f8267c91e80f, vms\u003d[], rules\u003d[])\n[2019-02-25T20:07:20.317Z]  INFO: firewaller/61822 on headnode: resolved data for VM \"b6629514-b5e6-61ab-fec6-b714df3df34d\" (req_id\u003d505f8e50-cd75-4a54-ab74-f8267c91e80f)\n[2019-02-25T20:07:20.317Z]  INFO: firewaller/61822 on headnode: Task \"vm.add\" complete (req_id\u003d505f8e50-cd75-4a54-ab74-f8267c91e80f)\n...\n```"},{"timestamp":1551175765,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1551175919,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Tim Foster"}],"currentPatchSet":{"number":"6","revision":"4c611178c9485812f0a8015cc5ca2eb26eddfbfe","parents":["5f744958bd2a28fa8e7e31102fdee6826b692f67"],"ref":"refs/changes/27/5527/6","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1551175765,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551125303,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1551125303,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1551175919,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".eslintrc","fileOld":"tools/eslint.node.conf","type":"RENAMED","insertions":0,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":28,"deletions":-45},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"npm/postinstall.sh","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"npm/postuninstall.sh","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-51},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-52},{"file":"tools/mk/Makefile.node.defs","type":"DELETED","insertions":0,"deletions":-104},{"file":"tools/mk/Makefile.node.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.node_deps.defs","type":"DELETED","insertions":0,"deletions":-43},{"file":"tools/mk/Makefile.node_deps.targ","type":"DELETED","insertions":0,"deletions":-24},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-153},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-317}],"sizeInsertions":47,"sizeDeletions":-945},"patchSets":[{"number":"1","revision":"1fbae9be6eda719083dc2b0435be54aba3455c37","parents":["5f744958bd2a28fa8e7e31102fdee6826b692f67"],"ref":"refs/changes/27/5527/1","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1549625126,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":20,"deletions":-26},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-51},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-52},{"file":"tools/mk/Makefile.node.defs","type":"DELETED","insertions":0,"deletions":-104},{"file":"tools/mk/Makefile.node.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.node_deps.defs","type":"DELETED","insertions":0,"deletions":-43},{"file":"tools/mk/Makefile.node_deps.targ","type":"DELETED","insertions":0,"deletions":-24},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-153},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-317}],"sizeInsertions":25,"sizeDeletions":-923},{"number":"2","revision":"2f9e26ff6adc60166dea61f1ef78ba3c5c9d7a39","parents":["5f744958bd2a28fa8e7e31102fdee6826b692f67"],"ref":"refs/changes/27/5527/2","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1550076462,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".eslintrc","fileOld":"tools/eslint.node.conf","type":"RENAMED","insertions":0,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":19,"deletions":-27},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-51},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-52},{"file":"tools/mk/Makefile.node.defs","type":"DELETED","insertions":0,"deletions":-104},{"file":"tools/mk/Makefile.node.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.node_deps.defs","type":"DELETED","insertions":0,"deletions":-43},{"file":"tools/mk/Makefile.node_deps.targ","type":"DELETED","insertions":0,"deletions":-24},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-153},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-317}],"sizeInsertions":24,"sizeDeletions":-924},{"number":"3","revision":"ec72f1894f4b0c44143b5a6dec851c867dee777c","parents":["5f744958bd2a28fa8e7e31102fdee6826b692f67"],"ref":"refs/changes/27/5527/3","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1550762327,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1550969870,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"Makefile","line":74,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"To discuss. Currently if you build via:\n\n1. get a clean clone\n2. \u0027make check\u0027\n3. *then* do make build\n\nThe result is:\n\n```\n...\ncheck ok\nmake: Nothing to be done for `all\u0027.\n...\n```\n\nand node_modules only ever gets the *eslint* bits from make check:\n\n```\n[root@headnode (nightly-1) ~]# ls /opt/smartdc/agents/lib/node_modules/firewaller/node_modules/\neslint                eslint-plugin-joyent\n```\n\nand firewaller goes into maint:\n\n```\n[ Feb 24 00:32:24 Executing start method (\"/usr/bin/ctrun -l child -o noorphan /opt/smartdc/agents/lib/node_modules/firewaller/node/bin/node --abort_on_uncaught_exception /opt/smartdc/agents/lib/node_modules/firewaller/main.js \u0026\"). ]\n[ Feb 24 00:32:24 Method \"start\" exited with status 0. ]\nUncaught Error: Cannot find module \u0027bunyan\u0027\n\nFROM\nFunction.Module._resolveFilename (module.js:340:11)\nFunction.Module._load (module.js:280:25)\nModule.require (module.js:364:17)\n```\n\n\nObviously that isn\u0027t good. I haven\u0027t played with this Makefile a lot yet. I think it is possible this issue existed before your changes here. If so, I\u0027m happy for us to defer to a separate ticket.\n\nThe dependency on \"node_modules\" in the Makefile can\u0027t work reliably the way it is written... given that other earlier tasks can create the \"node_modules\" dir. Perhaps some stamp mechanism? Perhaps the eng.git Makefile that has the npm stamp? I\u0027m not sure if that gels well with the hacking of some deps being done:\n\n```\n...\n# Remove binary modules - we use the ones in the platform that are built\n# against the platform node\nnode_modules: | $(NPM_EXEC)\n  MAKE_OVERRIDES\u003d\"CTFCONVERT\u003d/bin/true CTFMERGE\u003d/bin/true\" $(NPM) install --production\n  cp -r deps/fw node_modules/\n  cp -r deps/fw-overlay/* node_modules/fw\n...\n```"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".eslintrc","fileOld":"tools/eslint.node.conf","type":"RENAMED","insertions":0,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":17,"deletions":-29},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-51},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-52},{"file":"tools/mk/Makefile.node.defs","type":"DELETED","insertions":0,"deletions":-104},{"file":"tools/mk/Makefile.node.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.node_deps.defs","type":"DELETED","insertions":0,"deletions":-43},{"file":"tools/mk/Makefile.node_deps.targ","type":"DELETED","insertions":0,"deletions":-24},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-153},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-317}],"sizeInsertions":22,"sizeDeletions":-926},{"number":"4","revision":"9d0b6d3b6688b2e843aadf2f0726007eff4bb4f3","parents":["5f744958bd2a28fa8e7e31102fdee6826b692f67"],"ref":"refs/changes/27/5527/4","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1551103684,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1550969870,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".eslintrc","fileOld":"tools/eslint.node.conf","type":"RENAMED","insertions":0,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":28,"deletions":-45},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"npm/postinstall.sh","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"npm/postuninstall.sh","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-51},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-52},{"file":"tools/mk/Makefile.node.defs","type":"DELETED","insertions":0,"deletions":-104},{"file":"tools/mk/Makefile.node.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.node_deps.defs","type":"DELETED","insertions":0,"deletions":-43},{"file":"tools/mk/Makefile.node_deps.targ","type":"DELETED","insertions":0,"deletions":-24},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-153},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-317}],"sizeInsertions":46,"sizeDeletions":-944},{"number":"5","revision":"1cb0a531862b96e94f7bc7ba47e4383990f147a8","parents":["5f744958bd2a28fa8e7e31102fdee6826b692f67"],"ref":"refs/changes/27/5527/5","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1551122891,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551125303,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1551125303,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".eslintrc","fileOld":"tools/eslint.node.conf","type":"RENAMED","insertions":0,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":28,"deletions":-45},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"npm/postinstall.sh","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"npm/postuninstall.sh","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-51},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-52},{"file":"tools/mk/Makefile.node.defs","type":"DELETED","insertions":0,"deletions":-104},{"file":"tools/mk/Makefile.node.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.node_deps.defs","type":"DELETED","insertions":0,"deletions":-43},{"file":"tools/mk/Makefile.node_deps.targ","type":"DELETED","insertions":0,"deletions":-24},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-153},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-317}],"sizeInsertions":47,"sizeDeletions":-945},{"number":"6","revision":"4c611178c9485812f0a8015cc5ca2eb26eddfbfe","parents":["5f744958bd2a28fa8e7e31102fdee6826b692f67"],"ref":"refs/changes/27/5527/6","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1551175765,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551125303,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1551125303,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1551175919,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".eslintrc","fileOld":"tools/eslint.node.conf","type":"RENAMED","insertions":0,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":28,"deletions":-45},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"npm/postinstall.sh","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"npm/postuninstall.sh","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-51},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-52},{"file":"tools/mk/Makefile.node.defs","type":"DELETED","insertions":0,"deletions":-104},{"file":"tools/mk/Makefile.node.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.node_deps.defs","type":"DELETED","insertions":0,"deletions":-43},{"file":"tools/mk/Makefile.node_deps.targ","type":"DELETED","insertions":0,"deletions":-24},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-153},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-317}],"sizeInsertions":47,"sizeDeletions":-945}],"allReviewers":[{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}]}