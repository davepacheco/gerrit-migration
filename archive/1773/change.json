{"project":"joyent/illumos-joyent","branch":"master","id":"I828055a7dbf3653fa97bde566be0e5a556080067","number":"1773","subject":"OS-6034 cgroups and sysfs have wrong statfs f_type magic number Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Approved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e","owner":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"url":"https://cr.joyent.us/1773","commitMessage":"OS-6034 cgroups and sysfs have wrong statfs f_type magic number\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nApproved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n","createdOn":1491830756,"lastUpdated":1491838077,"open":false,"status":"MERGED","comments":[{"timestamp":1491830756,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 1."},{"timestamp":1491835551,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1491837276,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\nI tested this by running a simple test program on Ubuntu 16.04 (there is no cgroup fs mounted under 14.04) which does a statfs on a sysfs mountpoint and cgroupfs mountpoint, then confirms the correct magic number (from /usr/include/linux/magic.h) in f_type. The sysfs check is also part of the lx-tests sysfs test suite."},{"timestamp":1491837382,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1: Integration-Approval+1"},{"timestamp":1491838013,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1491838068,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1491838077,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jerry Jelinek"}],"currentPatchSet":{"number":"3","revision":"828055a7dbf3653fa97bde566be0e5a556080067","parents":["02fc1e3e3317deffadcfa4f20cf16d2184036608"],"ref":"refs/changes/73/1773/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1491838068,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491835551,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1491837382,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1491838077,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_brand/common/statfs.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/brand/lx/lx_brand/sys/lx_statfs.h","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":6,"sizeDeletions":-2},"patchSets":[{"number":"1","revision":"3f6b7afb7ab984885d1048454d91116e7143c8bc","parents":["3bec90a705e84f930818a783c3c4b0382f7420ab"],"ref":"refs/changes/73/1773/1","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1491830756,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491835551,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1491837382,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_brand/common/statfs.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/brand/lx/lx_brand/sys/lx_statfs.h","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":6,"sizeDeletions":-2},{"number":"2","revision":"17201deb16e4dff0994f8a6067a2d507f21baa09","parents":["02fc1e3e3317deffadcfa4f20cf16d2184036608"],"ref":"refs/changes/73/1773/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1491838013,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491835551,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1491837382,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_brand/common/statfs.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/brand/lx/lx_brand/sys/lx_statfs.h","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":6,"sizeDeletions":-2},{"number":"3","revision":"828055a7dbf3653fa97bde566be0e5a556080067","parents":["02fc1e3e3317deffadcfa4f20cf16d2184036608"],"ref":"refs/changes/73/1773/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1491838068,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1491838077,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491835551,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1491837382,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_brand/common/statfs.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/brand/lx/lx_brand/sys/lx_statfs.h","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":6,"sizeDeletions":-2}],"allReviewers":[{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}]}