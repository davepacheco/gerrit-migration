commit 856a9e2a624ba39780d37f6a3a6f493de1d895b8 (refs/changes/35/4735/1)
Author: Dave Eddy <dave@daveeddy.com>
Date:   2018-08-23T12:06:18-04:00 (1 year, 2 months ago)
    
    joyent/node-manta#352 manta has deprecated dependencies

diff --git a/bin/mlogin b/bin/mlogin
index 3f67196..e42c0d4 100755
--- a/bin/mlogin
+++ b/bin/mlogin
@@ -419,9 +419,9 @@ function check_path(opts, next) {
 
     opts.mclient.info(opts.path, function (err, info) {
         if (err) {
-            if (err.code === 'NotFoundError') {
+            if (err.name === 'NotFoundError') {
                 err = new Error('object not found in Manta');
-            } else if (err.code === 'ForbiddenError') {
+            } else if (err.name === 'ForbiddenError') {
                 err = new Error('you do not have permission to operate ' +
                     'on that object.');
             }
diff --git a/package.json b/package.json
index 9dd62ec..9ae8447 100644
--- a/package.json
+++ b/package.json
@@ -22,12 +22,12 @@
         "lomstream": "^1.1.0",
         "lstream": "~0.0.4",
         "mime": "~1.2.11",
-        "moment": "~2.13.0",
-        "once": "~1.3.3",
+        "moment": "^2.22.2",
+        "once": "~1.4.0",
         "path-platform": "~0.0.1",
         "progbar": "^1.1.0",
         "readable-stream": "~1.1.9",
-        "restify-clients": "~1.4.1",
+        "restify-clients": "~2.5.1",
         "showdown": "~1.4.2",
         "smartdc-auth": "^2.4.1",
         "strsplit": "1.0.0",
@@ -39,7 +39,7 @@
     },
     "devDependencies": {
         "forkexec": "^1.0.0",
-        "nodeunit": "~0.9.1"
+        "nodeunit": "^0.11.3"
     },
     "directories": {
         "bin": "./bin",
diff --git a/test/client.test.js b/test/client.test.js
index 28955a6..3976508 100644
--- a/test/client.test.js
+++ b/test/client.test.js
@@ -1065,7 +1065,7 @@ test('MANTA-2812 null signer', function (t) {
     });
     c.ls(ROOT, function (err) {
         t.ok(err);
-        t.strictEqual(err.code, 'ForbiddenError');
+        t.strictEqual(err.name, 'ForbiddenError');
 
         c.ls(PUBLIC, function (err2) {
             t.ifError(err2);
@@ -1084,7 +1084,7 @@ test('MANTA-2812 undefined signer', function (t) {
     });
     c.ls(ROOT, function (err) {
         t.ok(err);
-        t.strictEqual(err.code, 'ForbiddenError');
+        t.strictEqual(err.name, 'ForbiddenError');
 
         c.ls(PUBLIC, function (err2) {
             t.ifError(err2);
