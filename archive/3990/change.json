{"project":"joyent/illumos-joyent","branch":"master","id":"I369b0d0abdb6900b6b2fa81063305d23c61b4304","number":"3990","subject":"backout 9421: causes TRITON-372 backout 9422: causes TRITON-372 Reviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e Approved by: Dan McDonald \u003cdanmcd@joyent.com\u003e","owner":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"url":"https://cr.joyent.us/3990","commitMessage":"backout 9421: causes TRITON-372\nbackout 9422: causes TRITON-372\nReviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e\nApproved by: Dan McDonald \u003cdanmcd@joyent.com\u003e\n","createdOn":1527031663,"lastUpdated":1527105322,"open":false,"status":"MERGED","comments":[{"timestamp":1527031663,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 1."},{"timestamp":1527031721,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 2: Commit message was updated."},{"timestamp":1527031744,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 1: Code-Review+1\n\nI get it now.  They use ESTALE as a signal to libzfs and zdb for the problem they were trying to solve, but obviously forgot about \"zfs diff\"."},{"timestamp":1527031797,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1527041286,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1527105205,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 3: Patch Set 2 was rebased"},{"timestamp":1527105252,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 3:\n\nNOTE: I\u0027ve built a platform with the backout, and confirmed that we don\u0027t see the \"zfs diff\" breakage described in TRITON-372."},{"timestamp":1527105312,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 4: Commit message was updated."},{"timestamp":1527105322,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Joshua M. Clulow"}],"currentPatchSet":{"number":"4","revision":"2a235a434573f6659d6ebfc10ef33136384caad1","parents":["b64971bdda5ebae57056a4d21f436426ccab8f25"],"ref":"refs/changes/90/3990/4","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1527105312,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1527031797,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1527041286,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"SUBM","value":"1","grantedOn":1527105322,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/cmd/zdb/zdb.c","type":"MODIFIED","insertions":3,"deletions":-12},{"file":"usr/src/lib/libzfs/common/libzfs_diff.c","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"usr/src/uts/common/fs/zfs/zfs_znode.c","type":"MODIFIED","insertions":0,"deletions":-11}],"sizeInsertions":5,"sizeDeletions":-28},"patchSets":[{"number":"1","revision":"823eb18cdf47ad323445817a1f87706864d3e744","parents":["799bd0686522010a51353501cca8e00c1246d723"],"ref":"refs/changes/90/3990/1","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1527031663,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1527031744,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/cmd/zdb/zdb.c","type":"MODIFIED","insertions":3,"deletions":-12},{"file":"usr/src/lib/libzfs/common/libzfs_diff.c","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"usr/src/uts/common/fs/zfs/zfs_znode.c","type":"MODIFIED","insertions":0,"deletions":-11}],"sizeInsertions":5,"sizeDeletions":-28},{"number":"2","revision":"369b0d0abdb6900b6b2fa81063305d23c61b4304","parents":["799bd0686522010a51353501cca8e00c1246d723"],"ref":"refs/changes/90/3990/2","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1527031721,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1527031797,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1527041286,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/cmd/zdb/zdb.c","type":"MODIFIED","insertions":3,"deletions":-12},{"file":"usr/src/lib/libzfs/common/libzfs_diff.c","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"usr/src/uts/common/fs/zfs/zfs_znode.c","type":"MODIFIED","insertions":0,"deletions":-11}],"sizeInsertions":5,"sizeDeletions":-28},{"number":"3","revision":"3821272af16f927cab8178b7a33a7dbf8b537dc8","parents":["b64971bdda5ebae57056a4d21f436426ccab8f25"],"ref":"refs/changes/90/3990/3","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1527105205,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1527031797,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1527041286,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/cmd/zdb/zdb.c","type":"MODIFIED","insertions":3,"deletions":-12},{"file":"usr/src/lib/libzfs/common/libzfs_diff.c","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"usr/src/uts/common/fs/zfs/zfs_znode.c","type":"MODIFIED","insertions":0,"deletions":-11}],"sizeInsertions":5,"sizeDeletions":-28},{"number":"4","revision":"2a235a434573f6659d6ebfc10ef33136384caad1","parents":["b64971bdda5ebae57056a4d21f436426ccab8f25"],"ref":"refs/changes/90/3990/4","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1527105312,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1527105322,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1527031797,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1527041286,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/cmd/zdb/zdb.c","type":"MODIFIED","insertions":3,"deletions":-12},{"file":"usr/src/lib/libzfs/common/libzfs_diff.c","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"usr/src/uts/common/fs/zfs/zfs_znode.c","type":"MODIFIED","insertions":0,"deletions":-11}],"sizeInsertions":5,"sizeDeletions":-28}],"allReviewers":[{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}]}