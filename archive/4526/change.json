{"project":"joyent/sdc-vmapi","branch":"master","id":"Ic64b2ee91b33257cee1b22e23c7de2917a7db856","number":"4526","subject":"TRITON-592 when provisioning vmapi should check for network pools before networks Reviewed by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e Approved by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e","owner":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"url":"https://cr.joyent.us/4526","commitMessage":"TRITON-592 when provisioning vmapi should check for network pools before networks\nReviewed by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e\nApproved by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e\n","createdOn":1531834262,"lastUpdated":1532050346,"open":false,"status":"MERGED","comments":[{"timestamp":1531834262,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 1."},{"timestamp":1531834296,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1532023740,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1:\n\n(4 comments)\n\nLooks good to me, I just have several minor comments."},{"timestamp":1532027218,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Patch Set 1:\n\n(4 comments)"},{"timestamp":1532027318,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 2."},{"timestamp":1532027350,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1532050208,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1532050327,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1532050346,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Rui"}],"currentPatchSet":{"number":"3","revision":"c64b2ee91b33257cee1b22e23c7de2917a7db856","parents":["606726eea007a3c53a5ce75177bf2a7d08bca1bd"],"ref":"refs/changes/26/4526/3","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1532050327,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1532027350,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1532050208,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1532050208,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1532050346,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":58,"deletions":-54},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/vms.full.test.js","type":"MODIFIED","insertions":8,"deletions":-4}],"sizeInsertions":79,"sizeDeletions":-59},"patchSets":[{"number":"1","revision":"6d505f11e350b9aafb9fd00e95d0db0083c1e302","parents":["606726eea007a3c53a5ce75177bf2a7d08bca1bd"],"ref":"refs/changes/26/4526/1","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1531834262,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1531834296,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"README.md","line":56,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Maybe add before this:\n\n    * Set up fabrics in the Triton deployment"},{"file":"README.md","line":56,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Done"},{"file":"lib/endpoints/vms.js","line":969,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Since we\u0027re moving the scoping order for err and err2, let\u0027s rename them so that the count doesn\u0027t matter. Maybe fpErr and fnErr?"},{"file":"lib/endpoints/vms.js","line":969,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Done"},{"file":"lib/endpoints/vms.js","line":1002,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I don\u0027t think that we need to do Object.keys() here. Was there a reason you added it? If \"pools\" is truthy, that should be enough, I believe. Or is \"pools\" set to some weird value in the 404 case?"},{"file":"lib/endpoints/vms.js","line":1002,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"I was concerned it might return {}.  Although I have not seen that in practice."},{"file":"lib/endpoints/vms.js","line":1025,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Let\u0027s make this \"Network or Pool\"."},{"file":"lib/endpoints/vms.js","line":1025,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":57,"deletions":-54},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/vms.full.test.js","type":"MODIFIED","insertions":8,"deletions":-4}],"sizeInsertions":78,"sizeDeletions":-59},{"number":"2","revision":"6358f40f3cafc1f60f66cb1f8a48b6e5acb97b5f","parents":["606726eea007a3c53a5ce75177bf2a7d08bca1bd"],"ref":"refs/changes/26/4526/2","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1532027318,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1532050208,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1532050208,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1532027350,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":58,"deletions":-54},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/vms.full.test.js","type":"MODIFIED","insertions":8,"deletions":-4}],"sizeInsertions":79,"sizeDeletions":-59},{"number":"3","revision":"c64b2ee91b33257cee1b22e23c7de2917a7db856","parents":["606726eea007a3c53a5ce75177bf2a7d08bca1bd"],"ref":"refs/changes/26/4526/3","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1532050327,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1532050208,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1532050208,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1532027350,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1532050346,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"lib/endpoints/vms.js","type":"MODIFIED","insertions":58,"deletions":-54},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/vms.full.test.js","type":"MODIFIED","insertions":8,"deletions":-4}],"sizeInsertions":79,"sizeDeletions":-59}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}]}