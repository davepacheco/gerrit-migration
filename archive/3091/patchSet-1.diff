From 97843b1bcd77a7e5b39849f154e11e3a0e6a4c79 Mon Sep 17 00:00:00 2001
From: Cody Peter Mello <cody.mello@joyent.com>
Date: Thu, 25 May 2017 02:31:57 +0000
Subject: [PATCH] OS-6009 Update rsync shipped in platform

---
 rsync/Makefile           |   2 +-
 rsync/rsync-3.0.6.tar.gz | Bin 778927 -> 0 bytes
 rsync/rsync-3.1.2.tar.gz | Bin 0 -> 892724 bytes
 rsync/rsync.1.diff       |  11 ++++-------
 4 files changed, 5 insertions(+), 8 deletions(-)
 delete mode 100644 rsync/rsync-3.0.6.tar.gz
 create mode 100644 rsync/rsync-3.1.2.tar.gz

diff --git a/rsync/Makefile b/rsync/Makefile
index e04c4e1..6080ad0 100644
--- a/rsync/Makefile
+++ b/rsync/Makefile
@@ -21,7 +21,7 @@
 # Copyright (c) 2012, Joyent, Inc.  All rights reserved.
 #
 
-VER =	rsync-3.0.6
+VER =	rsync-3.1.2
 
 include ../Makefile.defs
 
diff --git a/rsync/rsync-3.0.6.tar.gz b/rsync/rsync-3.0.6.tar.gz
deleted file mode 100644
index 7ba27f7..0000000
Binary files a/rsync/rsync-3.0.6.tar.gz and /dev/null differ
diff --git a/rsync/rsync-3.1.2.tar.gz b/rsync/rsync-3.1.2.tar.gz
new file mode 100644
index 0000000..d90b4db
Binary files /dev/null and b/rsync/rsync-3.1.2.tar.gz differ
diff --git a/rsync/rsync.1.diff b/rsync/rsync.1.diff
index 00ca1fa..f6203c8 100644
--- a/rsync/rsync.1.diff
+++ b/rsync/rsync.1.diff
@@ -1,12 +1,9 @@
---- rsync-3.0.6/rsync.1	Thu Sep 17 01:30:37 2009
-+++ rsync-3.0.6/rsync.1.new	Thu Sep 17 01:32:44 2009
-@@ -1213,9 +1213,8 @@
+--- rsync-3.1.2/rsync.1	Thu Sep 17 01:30:37 2009
++++ rsync-3.1.2/rsync.1.new	Thu Sep 17 01:32:44 2009
+@@ -1426,5 +1426,8 @@
  up less space on the destination.  Conflicts with \fB\-\-inplace\fP because it's
  not possible to overwrite data in a sparse fashion.
- .IP 
--NOTE: Don't use this option when the destination is a Solaris \(lqtmpfs\(rq
--filesystem. It doesn't seem to handle seeks over null regions
--correctly and ends up corrupting the files.
++.IP
 +NOTE: This option has no effect if the destination is a Solaris "tmpfs"
 +filesystem.  The files won't be sparse\&.
  .IP 
-- 
2.21.0

