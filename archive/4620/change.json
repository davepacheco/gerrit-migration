{"project":"joyent/sdcadm","branch":"master","id":"Ife5394ff82c437f26640eff3d940d50c8bb16126","number":"4620","subject":"TOOLS-1966 \u0027sdcadm create -s dhcpd\u0027 should set \u0027dhcpd_server\u0027 flag to admin Nic Reviewed by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e Approved by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/4620","commitMessage":"TOOLS-1966 \u0027sdcadm create -s dhcpd\u0027 should set \u0027dhcpd_server\u0027 flag to admin Nic\nReviewed by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e\nApproved by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e\n","createdOn":1533206720,"lastUpdated":1533746276,"open":false,"status":"MERGED","comments":[{"timestamp":1533206720,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1533206725,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 2fb1a8a87f3c8d105ff18e11e09db67f9eb66b4e\n    \n    TOOLS-1966 \u0027sdcadm create -s dhcpd\u0027 should set \u0027dhcpd_server\u0027 flag to admin Nic"},{"timestamp":1533206764,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1533206793,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1533206797,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 78932a0a1b04159af35ce19944ff73f4b1c44b62\n    \n    TOOLS-1966 \u0027sdcadm create -s dhcpd\u0027 should set \u0027dhcpd_server\u0027 flag to admin Nic"},{"timestamp":1533206833,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2:\n\n\"make check\" passed ok"},{"timestamp":1533565767,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 3: Patch Set 2 was rebased."},{"timestamp":1533565771,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 756f21d01b6562dd2bff748497ab896dea2232ae\n    \n    TOOLS-1966 \u0027sdcadm create -s dhcpd\u0027 should set \u0027dhcpd_server\u0027 flag to admin Nic"},{"timestamp":1533565801,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3:\n\n\"make check\" passed ok"},{"timestamp":1533568007,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1533568012,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 62fa67fdeb1d158f5f69236b2d51949b0adaccb2\n    \n    TOOLS-1966 \u0027sdcadm create -s dhcpd\u0027 should set \u0027dhcpd_server\u0027 flag to admin Nic"},{"timestamp":1533568042,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4:\n\n\"make check\" passed ok"},{"timestamp":1533570058,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 4: Code-Review+1\n\n(4 comments)\n\nFor IA: how was this tested?"},{"timestamp":1533745377,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 5."},{"timestamp":1533745382,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit 9ba2a528e407210d5390ae810391e0dd8c5f609e\n    \n    TOOLS-1966 \u0027sdcadm create -s dhcpd\u0027 should set \u0027dhcpd_server\u0027 flag to admin Nic"},{"timestamp":1533745417,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1533745492,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 5:\n\n(4 comments)\n\n\u003e (4 comments)\n \u003e \n \u003e For IA: how was this tested?\n\nFirst thing: create a new instance and verify that the `\"dhcp_server\": true,` property is present for the admin Nic. Then, shutdown dhcpd0 VM and boot a new CN, verifying that it\u0027s actually using the new dhcpd1 VM to properly boot.\n\nAnd it worked nice! :-)"},{"timestamp":1533745898,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1"},{"timestamp":1533746256,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1533746276,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"6","revision":"fe5394ff82c437f26640eff3d940d50c8bb16126","parents":["5af603a441d2cda5e9cd847997954fd378058070"],"ref":"refs/changes/20/4620/6","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1533746256,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1533745417,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1533745898,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1533745898,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"SUBM","value":"1","grantedOn":1533746276,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":75,"deletions":0},{"file":"lib/procedures/create-service-instance-v1.js","type":"MODIFIED","insertions":57,"deletions":0}],"sizeInsertions":136,"sizeDeletions":0},"patchSets":[{"number":"1","revision":"a8dba85905e621b535eb2f9426fe5784aa9c64d9","parents":["8bf24cd9831268d461c93e95f46887c74a99776c"],"ref":"refs/changes/20/4620/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1533206720,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1533206764,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":74,"deletions":0},{"file":"lib/procedures/create-service-instance-v1.js","type":"MODIFIED","insertions":58,"deletions":0}],"sizeInsertions":136,"sizeDeletions":0},{"number":"2","revision":"36b17e45da5391d2b496f80c08de9dfac03802c4","parents":["907506a17ede0bd75831585f170d55234b71972a"],"ref":"refs/changes/20/4620/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1533206793,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1533206764,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":74,"deletions":0},{"file":"lib/procedures/create-service-instance-v1.js","type":"MODIFIED","insertions":58,"deletions":0}],"sizeInsertions":136,"sizeDeletions":0},{"number":"3","revision":"01c03f88b8489ce84911b01509646864e609db50","parents":["c213a3e2923750112e4104f71541c6900f618e71"],"ref":"refs/changes/20/4620/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1533565767,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1533206764,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":74,"deletions":0},{"file":"lib/procedures/create-service-instance-v1.js","type":"MODIFIED","insertions":58,"deletions":0}],"sizeInsertions":136,"sizeDeletions":0},{"number":"4","revision":"5fe3694a200e22bc08ff0aafb8b4d3a913b6b72b","parents":["cb24da3e8652cc169f1d5ef4e8b03d35da6e9fbb"],"ref":"refs/changes/20/4620/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1533568007,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1533206764,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1533570058,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"comments":[{"file":"lib/common.js","line":626,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"name"},{"file":"lib/common.js","line":626,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/common.js","line":634,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Eh. Not a fan of a long chain being used twice. I think it\u0027d be better getting assigned to a var.\n\nYour call."},{"file":"lib/common.js","line":634,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/procedures/create-service-instance-v1.js","line":198,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"The first clause will always be true, and methinks that ctx.currVm.nics could be assigned to the nics var since it\u0027s used twice.\n\nAlso your call."},{"file":"lib/procedures/create-service-instance-v1.js","line":198,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/procedures/create-service-instance-v1.js","line":229,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Intentional, or left-over debugging?"},{"file":"lib/procedures/create-service-instance-v1.js","line":229,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Actually, unintentionally left. Good call"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":74,"deletions":0},{"file":"lib/procedures/create-service-instance-v1.js","type":"MODIFIED","insertions":58,"deletions":0}],"sizeInsertions":136,"sizeDeletions":0},{"number":"5","revision":"91e0ccd9bcbc0a13033959cef2732d186f3fcfb0","parents":["5af603a441d2cda5e9cd847997954fd378058070"],"ref":"refs/changes/20/4620/5","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1533745377,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1533745417,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1533745898,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1533745898,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":75,"deletions":0},{"file":"lib/procedures/create-service-instance-v1.js","type":"MODIFIED","insertions":57,"deletions":0}],"sizeInsertions":136,"sizeDeletions":0},{"number":"6","revision":"fe5394ff82c437f26640eff3d940d50c8bb16126","parents":["5af603a441d2cda5e9cd847997954fd378058070"],"ref":"refs/changes/20/4620/6","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1533746256,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1533745417,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1533746276,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1533745898,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1533745898,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":75,"deletions":0},{"file":"lib/procedures/create-service-instance-v1.js","type":"MODIFIED","insertions":57,"deletions":0}],"sizeInsertions":136,"sizeDeletions":0}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}