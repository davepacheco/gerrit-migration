commit f02fd8387658de3708fa8da44c4a6eae13277638 (refs/changes/79/5679/1)
Author: Tim Foster <tim.foster@joyent.com>
Date:   2019-03-01T15:46:48+00:00 (7 months ago)
    
    MANTA-4140 manta repositories should not use git+ssh:// URIs in package.json files

diff --git a/bin/generate_hosts_config.js b/bin/generate_hosts_config.js
index ad52254..a327e45 100755
--- a/bin/generate_hosts_config.js
+++ b/bin/generate_hosts_config.js
@@ -7,7 +7,7 @@
  */
 
 /*
- * Copyright (c) 2017, Joyent, Inc.
+ * Copyright (c) 2019, Joyent, Inc.
  */
 
 var assert = require('assert-plus');
@@ -16,6 +16,7 @@ var fs = require('fs');
 var getopt = require('posix-getopt');
 var path = require('path');
 var sdc = require('sdc-clients');
+var ufds_mod = require('ufds');
 var vasync = require('vasync');
 
 var LOG = bunyan.createLogger({
@@ -159,7 +160,7 @@ function setupSingleDcClients(_, cb) {
                                         'ufdsConfig': self.UFDS_CONFIG
                                 }, 'connecting to ufds');
 
-                                self['UFDS'] = new sdc.UFDS(self.UFDS_CONFIG);
+                                self['UFDS'] = new ufds_mod(self.UFDS_CONFIG);
 
                                 self['UFDS'].on('ready', function (err) {
                                         self.log.debug({
@@ -179,7 +180,8 @@ function setupSingleDcClients(_, cb) {
                                 self['SAPI'] = new sdc.SAPI({
                                         log: self.log,
                                         url: url,
-                                        agent: false
+                                        agent: false,
+                                        version: '*'
                                 });
                                 subcb();
                         }
diff --git a/package.json b/package.json
index 93a91bf..3291039 100644
--- a/package.json
+++ b/package.json
@@ -1,7 +1,7 @@
 {
         "name": "madtom",
         "description": "Manta Status Dashboard.",
-        "version": "1.0.0",
+        "version": "1.0.1",
         "author": "Joyent (joyent.com)",
         "license": "MPL-2.0",
         "private": true,
@@ -13,7 +13,8 @@
                 "posix-getopt": "1.0.0",
                 "pg": "0.11.3",
                 "redis": "0.8.3",
-                "sdc-clients": "~9.1",
+                "sdc-clients": "12.0.0",
+                "ufds": "1.5.0",
                 "vasync": "1.5.0"
         },
         "//": "One of our modules has a '*' dependency on 'debug' that uses syntax incompatible with our prebuilt node version. Force it to an older version.",
