{"project":"joyent/sdc-portolan","branch":"master","id":"If9334f1e6210246d4b63e90664a798638070f050","number":"3571","subject":"NET-383 Use ESLint for lint and style checks in Portolan Reviewed by: Jason King \u003cjason.king@joyent.com\u003e Reviewed by: Rui Loura \u003crui@joyent.com\u003e Approved by: Rui Loura \u003crui@joyent.com\u003e","owner":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"url":"https://cr.joyent.us/3571","commitMessage":"NET-383 Use ESLint for lint and style checks in Portolan\nReviewed by: Jason King \u003cjason.king@joyent.com\u003e\nReviewed by: Rui Loura \u003crui@joyent.com\u003e\nApproved by: Rui Loura \u003crui@joyent.com\u003e\n","createdOn":1520559403,"lastUpdated":1520968631,"open":false,"status":"MERGED","comments":[{"timestamp":1520559403,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 1."},{"timestamp":1520559443,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1520639960,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 1: Code-Review+1\n\n(1 comment)"},{"timestamp":1520640290,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1520954774,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Patch Set 1:\n\n(6 comments)"},{"timestamp":1520960265,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1520968019,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 2: Commit message was updated."},{"timestamp":1520968028,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 3: Patch Set 2 was rebased"},{"timestamp":1520968068,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3:\n\n\"make check\" passed ok"},{"timestamp":1520968616,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1520968631,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Cody Peter Mello"}],"currentPatchSet":{"number":"3","revision":"dc39000ab8f4e0011455a90f9a6addf70b0639c6","parents":["11399ffd979cb40d65ee8c0f4449c18416720f07"],"ref":"refs/changes/71/3571/3","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1520968028,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1520559443,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520639960,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1520968616,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}},{"type":"SUBM","value":"1","grantedOn":1520968631,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":20,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"bin/portolan","type":"MODIFIED","insertions":51,"deletions":-29},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/backend/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/backend/json.js","type":"MODIFIED","insertions":57,"deletions":-42},{"file":"lib/backend/moray.js","type":"MODIFIED","insertions":26,"deletions":-27},{"file":"lib/client.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"lib/crc32.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/framer.js","type":"MODIFIED","insertions":4,"deletions":-6},{"file":"lib/moray.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/parser.js","type":"MODIFIED","insertions":140,"deletions":-132},{"file":"lib/portolan.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"lib/serialize.js","type":"MODIFIED","insertions":128,"deletions":-131},{"file":"lib/types.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"test/integration/backend.test.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/lib/client.js","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"test/lib/config.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/lib/log.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/lib/mapping.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/lib/request.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/lib/server.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/unit/ops.test.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/unit/types.test.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tools/jsstyle.conf","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"tools/mk/Makefile.defs","type":"MODIFIED","insertions":56,"deletions":-2},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":34,"deletions":-1},{"file":"tools/mk/Makefile.node.defs","type":"MODIFIED","insertions":11,"deletions":-5},{"file":"tools/mk/Makefile.node.targ","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"MODIFIED","insertions":11,"deletions":-5},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":31,"deletions":-4}],"sizeInsertions":626,"sizeDeletions":-405},"patchSets":[{"number":"1","revision":"f9334f1e6210246d4b63e90664a798638070f050","parents":["cb0aad5ec95bf76dbc60b0beb7550d6dcdf2c348"],"ref":"refs/changes/71/3571/1","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1520559403,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1520559443,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520639960,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"comments":[{"file":"package.json","line":21,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Out of curiosity, why did this get moved from devDependencies?"},{"file":"package.json","line":21,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I moved it because I added:\n\n    npm install --production\n\nTo the Makefile, which causes us to only install things from \"dependencies\". Because we ship the integration tests in the portolan zone we need to ship \"tape\" so that it\u0027ll run. We don\u0027t want to end up shipping the eslint* deps in the zone, though."},{"file":"tools/jsl.node.conf","line":63,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"out of curiosity, why disable this?"},{"file":"tools/jsl.node.conf","line":63,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I disabled it because otherwise it warns on the \"use strict\" lines. The equivalent check in ESLint is \"no-unused-expressions\". We haven\u0027t turned that on in eslint-plugin-joyent yet, but I\u0027m planning to do so on the next update (TRITON-155)."},{"file":"tools/mk/Makefile.deps","line":9,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"2018?"},{"file":"tools/mk/Makefile.deps","line":9,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"These are the stock Makefiles from eng.git. I just copied the most recent ones across."},{"file":"tools/mk/Makefile.node.defs","line":8,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"2018?"},{"file":"tools/mk/Makefile.node.targ","line":9,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"2018?"},{"file":"tools/mk/Makefile.node_prebuilt.defs","line":8,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"2018?"},{"file":"tools/mk/Makefile.targ","line":8,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"why not 2018?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":20,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"bin/portolan","type":"MODIFIED","insertions":51,"deletions":-29},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/backend/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/backend/json.js","type":"MODIFIED","insertions":57,"deletions":-42},{"file":"lib/backend/moray.js","type":"MODIFIED","insertions":26,"deletions":-27},{"file":"lib/client.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"lib/crc32.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/framer.js","type":"MODIFIED","insertions":4,"deletions":-6},{"file":"lib/moray.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/parser.js","type":"MODIFIED","insertions":140,"deletions":-132},{"file":"lib/portolan.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"lib/serialize.js","type":"MODIFIED","insertions":128,"deletions":-131},{"file":"lib/types.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"test/integration/backend.test.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/lib/client.js","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"test/lib/config.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/lib/log.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/lib/mapping.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/lib/request.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/lib/server.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/unit/ops.test.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/unit/types.test.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tools/jsstyle.conf","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"tools/mk/Makefile.defs","type":"MODIFIED","insertions":56,"deletions":-2},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":34,"deletions":-1},{"file":"tools/mk/Makefile.node.defs","type":"MODIFIED","insertions":11,"deletions":-5},{"file":"tools/mk/Makefile.node.targ","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"MODIFIED","insertions":11,"deletions":-5},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":31,"deletions":-4}],"sizeInsertions":626,"sizeDeletions":-405},{"number":"2","revision":"b7ea6fadcf0622948df25daa97a83ddaa0e72d36","parents":["cb0aad5ec95bf76dbc60b0beb7550d6dcdf2c348"],"ref":"refs/changes/71/3571/2","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1520968019,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1520559443,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520639960,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":20,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"bin/portolan","type":"MODIFIED","insertions":51,"deletions":-29},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/backend/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/backend/json.js","type":"MODIFIED","insertions":57,"deletions":-42},{"file":"lib/backend/moray.js","type":"MODIFIED","insertions":26,"deletions":-27},{"file":"lib/client.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"lib/crc32.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/framer.js","type":"MODIFIED","insertions":4,"deletions":-6},{"file":"lib/moray.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/parser.js","type":"MODIFIED","insertions":140,"deletions":-132},{"file":"lib/portolan.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"lib/serialize.js","type":"MODIFIED","insertions":128,"deletions":-131},{"file":"lib/types.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"test/integration/backend.test.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/lib/client.js","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"test/lib/config.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/lib/log.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/lib/mapping.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/lib/request.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/lib/server.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/unit/ops.test.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/unit/types.test.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tools/jsstyle.conf","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"tools/mk/Makefile.defs","type":"MODIFIED","insertions":56,"deletions":-2},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":34,"deletions":-1},{"file":"tools/mk/Makefile.node.defs","type":"MODIFIED","insertions":11,"deletions":-5},{"file":"tools/mk/Makefile.node.targ","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"MODIFIED","insertions":11,"deletions":-5},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":31,"deletions":-4}],"sizeInsertions":626,"sizeDeletions":-405},{"number":"3","revision":"dc39000ab8f4e0011455a90f9a6addf70b0639c6","parents":["11399ffd979cb40d65ee8c0f4449c18416720f07"],"ref":"refs/changes/71/3571/3","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1520968028,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"SUBM","value":"1","grantedOn":1520968631,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1520559443,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520639960,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1520968616,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":20,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"bin/portolan","type":"MODIFIED","insertions":51,"deletions":-29},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/backend/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/backend/json.js","type":"MODIFIED","insertions":57,"deletions":-42},{"file":"lib/backend/moray.js","type":"MODIFIED","insertions":26,"deletions":-27},{"file":"lib/client.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"lib/crc32.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/framer.js","type":"MODIFIED","insertions":4,"deletions":-6},{"file":"lib/moray.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/parser.js","type":"MODIFIED","insertions":140,"deletions":-132},{"file":"lib/portolan.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"lib/serialize.js","type":"MODIFIED","insertions":128,"deletions":-131},{"file":"lib/types.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"test/integration/backend.test.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/lib/client.js","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"test/lib/config.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/lib/log.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/lib/mapping.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/lib/request.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/lib/server.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/unit/ops.test.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/unit/types.test.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tools/jsstyle.conf","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"tools/mk/Makefile.defs","type":"MODIFIED","insertions":56,"deletions":-2},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":34,"deletions":-1},{"file":"tools/mk/Makefile.node.defs","type":"MODIFIED","insertions":11,"deletions":-5},{"file":"tools/mk/Makefile.node.targ","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"MODIFIED","insertions":11,"deletions":-5},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":31,"deletions":-4}],"sizeInsertions":626,"sizeDeletions":-405}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}]}