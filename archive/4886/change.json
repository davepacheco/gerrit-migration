{"project":"joyent/illumos-joyent","branch":"master","id":"I3e33520a8acc4b8e3673aa3e12cf41d0105543ae","number":"4886","subject":"OS-7265 bhyve should build with newer gcc Reviewed by: Hans Rosenfeld \u003chans.rosenfeld@joyent.com\u003e Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Approved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e","owner":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"url":"https://cr.joyent.us/4886","commitMessage":"OS-7265 bhyve should build with newer gcc\nReviewed by: Hans Rosenfeld \u003chans.rosenfeld@joyent.com\u003e\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nApproved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n","createdOn":1537995815,"lastUpdated":1538126363,"open":false,"status":"MERGED","comments":[{"timestamp":1537995815,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 1."},{"timestamp":1537995818,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit ff48ac4f95dea15788243a643ce585aa55811b3e\n    \n    ../../i86pc/io/vmm/io/vrtc.c: In function \u0027rtc_to_secs\u0027:\n    ../../i86pc/io/vmm/io/vrtc.c:286:13: error: variable \u0027vm\u0027 set but not used [-Werror\u003dunused-but-set-variable]\n      struct vm *vm;\n                 ^~\n    ../../i86pc/io/vmm/io/vrtc.c: In function \u0027vrtc_time_update\u0027:\n    ../../i86pc/io/vmm/io/vrtc.c:402:13: error: variable \u0027oldbase\u0027 set but not used [-Werror\u003dunused-but-set-variable]\n    \n    commit 3265eecfe1edb8411d53c7628c7ed72c86d6db38\n    \n    ../../i86pc/io/vmm/vmm_sol_dev.c: In function \u0027vmmdev_do_ioctl\u0027:\n    ../../i86pc/io/vmm/vmm_sol_dev.c:982:9: error: variable \u0027srcp\u0027 set but not used [-Werror\u003dunused-but-set-variable]\n     - not sure about this code ... but we don\u0027t hit this path\n    \n    commit 206925b7f7d9d56522f977f6932114a79fca03d0\n    \n    ../../i86pc/io/vmm/vmm.c: In function \u0027vm_iommu_modify\u0027:\n    ../../i86pc/io/vmm/vmm.c:1018:22: error: variable \u0027host_domain\u0027 set but not used [-Werror\u003dunused-but-set-variable]\n      void *vp, *cookie, *host_domain;\n                          ^~~~~~~~~~~\n    ../../i86pc/io/vmm/vmm.c: In function \u0027vm_handle_hlt\u0027:\n    ../../i86pc/io/vmm/vmm.c:1534:14: error: variable \u0027wmesg\u0027 set but not used [-Werror\u003dunused-but-set-variable]\n      const char *wmesg;\n                  ^~~~~\n    ../../i86pc/io/vmm/vmm.c: In function \u0027vm_handle_suspend\u0027:\n    ../../i86pc/io/vmm/vmm.c:1746:9: error: variable \u0027done\u0027 set but not used [-Werror\u003dunused-but-set-variable]\n      int i, done;\n    \n    commit ef7ef7fd43b884c67a27fc3dcca9cefd8f9e4f9f\n    \n    ../../i86pc/io/vmm/vmm_sol_vm.c: In function \u0027eptable_mapout\u0027:\n    ../../i86pc/io/vmm/vmm_sol_vm.c:697:9: error: variable \u0027oldpfn\u0027 set but not used [-Werror\u003dunused-but-set-variable]\n    \n    commit 11a56033813d7baab02a53f9b5df26d7c4344f92\n    \n    ../../i86pc/io/vmm/intel/vmx.c: In function \u0027vmx_handle_cpuid\u0027:\n    ../../i86pc/io/vmm/intel/vmx.c:1178:15: error: variable \u0027func\u0027 set but not used [-Werror\u003dunused-but-set-variable]\n    GCC is right.\n    \n    commit 989ad15cccaa1f6beddcfe7799025f1d819d1538\n    \n    fix missing break\n    \n    commit 412022b10ccbeeb6ac3bb8ae6c8842c2b560044d\n    \n    Don\u0027t use our own version of offsetof() in the freebsd compat headers,\n    as it confuses GCC into thinking we have a file-scope VLA in CTASSERT().\n    In file included from /root/src/gcc/projects/illumos/usr/src/compat/freebsd/sys/mutex.h:21:0,\n                     from ../../common/sys/time.h:277,\n                     from /root/src/gcc/projects/illumos/usr/src/compat/freebsd/sys/time.h:19,\n                     from /root/src/gcc/projects/illumos/usr/src/compat/freebsd/sys/param.h:29,\n                     from ../../i86pc/io/vmm/amd/svm_msr.c:30:\n    ../../i86pc/io/vmm/amd/vmcb.h:325:26: error: variably modified \u0027__compile_time_assertion__325\u0027 at file scope [-Werror]\n     CTASSERT(offsetof(struct vmcb, state) \u003d\u003d 0x400);\n    \n    commit 12572a19e7828b0f7e84cd7a593ef734ec507c56\n    \n    Various cmd/bhyve nits. Not all them could be easily guarded by __FreeBSD__\n    due to gcc\u0027s pickiness.\n    \n    commit 6834864256e49e1ae16308246077129ec7066539\n    \n    pci_emul.c: In function \u0027pci_emul_alloc_pbar\u0027:\n    pci_emul.c:591:17: error: \u0027mask\u0027 may be used uninitialized in this function [-Werror\u003dmaybe-uninitialized]\n    This is because gcc doesn\u0027t understand that assert(0) never returns;\n    replace it with abort()."},{"timestamp":1537995880,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1: Code-Review-1\n\nnot yet"},{"timestamp":1538051416,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 2."},{"timestamp":1538051430,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 0bae430b50699e6494d808bea7f509964e86d5a6\n    \n    copyright\n    \n    commit 0f7fccf9ebd495262779724550f283fda9879958\n    \n    ../../i86pc/io/vmm/io/vrtc.c: In function \u0027rtc_to_secs\u0027:\n    ../../i86pc/io/vmm/io/vrtc.c:286:13: error: variable \u0027vm\u0027 set but not used [-Werror\u003dunused-but-set-variable]\n      struct vm *vm;\n                 ^~\n    ../../i86pc/io/vmm/io/vrtc.c: In function \u0027vrtc_time_update\u0027:\n    ../../i86pc/io/vmm/io/vrtc.c:402:13: error: variable \u0027oldbase\u0027 set but not used [-Werror\u003dunused-but-set-variable]\n    \n    commit f888562166387b1caa9be6ea2566b2d7bd3f9c9d\n    \n    ../../i86pc/io/vmm/vmm_sol_dev.c: In function \u0027vmmdev_do_ioctl\u0027:\n    ../../i86pc/io/vmm/vmm_sol_dev.c:982:9: error: variable \u0027srcp\u0027 set but not used [-Werror\u003dunused-but-set-variable]\n     - not sure about this code ... but we don\u0027t hit this path\n    \n    commit 9d5c315f59fb5713b11ac6366bdc13e7dea2da3e\n    \n    ../../i86pc/io/vmm/vmm.c: In function \u0027vm_iommu_modify\u0027:\n    ../../i86pc/io/vmm/vmm.c:1018:22: error: variable \u0027host_domain\u0027 set but not used [-Werror\u003dunused-but-set-variable]\n      void *vp, *cookie, *host_domain;\n                          ^~~~~~~~~~~\n    ../../i86pc/io/vmm/vmm.c: In function \u0027vm_handle_hlt\u0027:\n    ../../i86pc/io/vmm/vmm.c:1534:14: error: variable \u0027wmesg\u0027 set but not used [-Werror\u003dunused-but-set-variable]\n      const char *wmesg;\n                  ^~~~~\n    ../../i86pc/io/vmm/vmm.c: In function \u0027vm_handle_suspend\u0027:\n    ../../i86pc/io/vmm/vmm.c:1746:9: error: variable \u0027done\u0027 set but not used [-Werror\u003dunused-but-set-variable]\n      int i, done;\n    \n    commit b51d6f212652857551a60525c664a2d67187d793\n    \n    ../../i86pc/io/vmm/vmm_sol_vm.c: In function \u0027eptable_mapout\u0027:\n    ../../i86pc/io/vmm/vmm_sol_vm.c:697:9: error: variable \u0027oldpfn\u0027 set but not used [-Werror\u003dunused-but-set-variable]\n    \n    commit 9936c0481650fc9f1376d4e05fc200c945a00cee\n    \n    ../../i86pc/io/vmm/intel/vmx.c: In function \u0027vmx_handle_cpuid\u0027:\n    ../../i86pc/io/vmm/intel/vmx.c:1178:15: error: variable \u0027func\u0027 set but not used [-Werror\u003dunused-but-set-variable]\n    GCC is right.\n    \n    commit b0d8448c4fc1f38ceb50f5c1868926045f9a9100\n    \n    fix missing break\n    \n    commit 58c0fba9fdae05d7bf3484a4d5f258cecf2c43d2\n    \n    Don\u0027t use our own version of offsetof() in the freebsd compat headers,\n    as it confuses GCC into thinking we have a file-scope VLA in CTASSERT().\n    In file included from /root/src/gcc/projects/illumos/usr/src/compat/freebsd/sys/mutex.h:21:0,\n                     from ../../common/sys/time.h:277,\n                     from /root/src/gcc/projects/illumos/usr/src/compat/freebsd/sys/time.h:19,\n                     from /root/src/gcc/projects/illumos/usr/src/compat/freebsd/sys/param.h:29,\n                     from ../../i86pc/io/vmm/amd/svm_msr.c:30:\n    ../../i86pc/io/vmm/amd/vmcb.h:325:26: error: variably modified \u0027__compile_time_assertion__325\u0027 at file scope [-Werror]\n     CTASSERT(offsetof(struct vmcb, state) \u003d\u003d 0x400);\n    \n    commit 35a0e3462b6bdf5851fbdb334a959fed5480376d\n    \n    Various cmd/bhyve nits. Not all them could be easily guarded by __FreeBSD__\n    due to gcc\u0027s pickiness.\n    \n    commit 2cbb41f3d22ee71cadf1d5d668a16daf97513c80\n    \n    pci_emul.c: In function \u0027pci_emul_alloc_pbar\u0027:\n    pci_emul.c:591:17: error: \u0027mask\u0027 may be used uninitialized in this function [-Werror\u003dmaybe-uninitialized]\n    This is because gcc doesn\u0027t understand that assert(0) never returns;\n    replace it with abort()."},{"timestamp":1538051463,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 2: -Code-Review\n\n(3 comments)"},{"timestamp":1538055845,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1538061310,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1538061646,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 2:\n\nI updated the ticket with some testing notes"},{"timestamp":1538088566,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1538125615,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1538125655,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 4: Patch Set 3 was rebased"},{"timestamp":1538126363,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by John Levon"}],"currentPatchSet":{"number":"4","revision":"0a51b8dc40c8d4c15f71e64bc2126489a45d11ce","parents":["085e3f242503ed0cb2509c4dcea6d7183ea28d1b"],"ref":"refs/changes/86/4886/4","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1538125655,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1538055845,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1538061310,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1538088566,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1538126363,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/cmd/bhyve/block_if.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_emul.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_console.c","type":"MODIFIED","insertions":12,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_virtio_net.c","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/cmd/bhyve/vga.c","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"usr/src/compat/freebsd/sys/types.h","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/io/vrtc.c","type":"MODIFIED","insertions":28,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/vmm.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/vmm_instruction_emul.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_dev.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_vm.c","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":88,"sizeDeletions":-15},"patchSets":[{"number":"1","revision":"070d1b9dd597e6e3e8b5631055c04cc3a623dee9","parents":["af654c21a11a97e45c73f3edf621f6192de961df"],"ref":"refs/changes/86/4886/1","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1537995815,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1537995880,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"comments":[{"file":"usr/src/cmd/bhyve/block_if.c","line":280,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"gcc is picky enough that we can\u0027t place this annotation inside of the ifdef"},{"file":"usr/src/uts/i86pc/io/vmm/io/vrtc.c","line":286,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Not pretty, but I couldn\u0027t come up with a variant of VM_CTR* that correctly silenced gcc"},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_dev.c","line":999,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patrick: not sure what this is really all about, but I don\u0027t think we ever hit this case anyway. Should it stay here?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/bhyve/block_if.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_emul.c","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_virtio_console.c","type":"MODIFIED","insertions":12,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_virtio_net.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/bhyve/vga.c","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/compat/freebsd/sys/types.h","type":"MODIFIED","insertions":0,"deletions":-4},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/io/vrtc.c","type":"MODIFIED","insertions":28,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/vmm.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/vmm_instruction_emul.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_dev.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_vm.c","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":78,"sizeDeletions":-11},{"number":"2","revision":"f2539a48b9784c3e4db1986a15c34ea0cd060323","parents":["b61fd5c4275d4217d988bff5e892675d3431c138"],"ref":"refs/changes/86/4886/2","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1538051416,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1538061310,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1538088566,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1538055845,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/bhyve/block_if.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_emul.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_console.c","type":"MODIFIED","insertions":12,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_virtio_net.c","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/cmd/bhyve/vga.c","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"usr/src/compat/freebsd/sys/types.h","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/io/vrtc.c","type":"MODIFIED","insertions":28,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/vmm.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/vmm_instruction_emul.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_dev.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_vm.c","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":88,"sizeDeletions":-15},{"number":"3","revision":"3e33520a8acc4b8e3673aa3e12cf41d0105543ae","parents":["b61fd5c4275d4217d988bff5e892675d3431c138"],"ref":"refs/changes/86/4886/3","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1538125615,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1538061310,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1538088566,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1538055845,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/cmd/bhyve/block_if.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_emul.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_console.c","type":"MODIFIED","insertions":12,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_virtio_net.c","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/cmd/bhyve/vga.c","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"usr/src/compat/freebsd/sys/types.h","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/io/vrtc.c","type":"MODIFIED","insertions":28,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/vmm.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/vmm_instruction_emul.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_dev.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_vm.c","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":88,"sizeDeletions":-15},{"number":"4","revision":"0a51b8dc40c8d4c15f71e64bc2126489a45d11ce","parents":["085e3f242503ed0cb2509c4dcea6d7183ea28d1b"],"ref":"refs/changes/86/4886/4","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1538125655,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1538061310,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1538088566,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1538055845,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}},{"type":"SUBM","value":"1","grantedOn":1538126363,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/cmd/bhyve/block_if.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_emul.c","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/cmd/bhyve/pci_virtio_console.c","type":"MODIFIED","insertions":12,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_virtio_net.c","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"usr/src/cmd/bhyve/vga.c","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"usr/src/compat/freebsd/sys/types.h","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"usr/src/uts/i86pc/io/vmm/intel/vmx.c","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/io/vrtc.c","type":"MODIFIED","insertions":28,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/vmm.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/vmm_instruction_emul.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_dev.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/vmm_sol_vm.c","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":88,"sizeDeletions":-15}],"allReviewers":[{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}]}