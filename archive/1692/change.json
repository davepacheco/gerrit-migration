{"project":"joyent/illumos-joyent","branch":"master","id":"I217415b79c30c5414f702fe59ef380cdc64b66e0","number":"1692","subject":"OS-5261 lxbrand eventfd AIO overflow behavior is incorrect OS-6016 lxbrand poll(2) wants implicit events Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Reviewed by: Ryan Zezeski \u003cryan.zeseski@joyent.com\u003e Approved by: Jerry Jelinek \u003cjerry.jelinek@jo","owner":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"url":"https://cr.joyent.us/1692","commitMessage":"OS-5261 lxbrand eventfd AIO overflow behavior is incorrect\nOS-6016 lxbrand poll(2) wants implicit events\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nReviewed by: Ryan Zezeski \u003cryan.zeseski@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1490106350,"lastUpdated":1491846024,"open":false,"status":"MERGED","comments":[{"timestamp":1490106350,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 1."},{"timestamp":1490111169,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1491334697,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1491335041,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2:\n\nWith the merging of linux-test-project/ltp#142, the AIO-based eventfd tests now operate properly in LX.  LTP passes with libaio-dev installed, unlike before."},{"timestamp":1491431847,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1491510108,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1491598513,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 3: Patch Set 2 was rebased."},{"timestamp":1491599135,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1491844498,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 5: Patch Set 4 was rebased."},{"timestamp":1491846024,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Patrick Mooney"}],"currentPatchSet":{"number":"5","revision":"217415b79c30c5414f702fe59ef380cdc64b66e0","parents":["828055a7dbf3653fa97bde566be0e5a556080067"],"ref":"refs/changes/92/1692/5","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1491844498,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1490111169,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1491431847,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491510108,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}},{"type":"SUBM","value":"1","grantedOn":1491846024,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_aio.c","type":"MODIFIED","insertions":10,"deletions":-14},{"file":"usr/src/uts/common/brand/lx/syscall/lx_poll.c","type":"MODIFIED","insertions":17,"deletions":-1},{"file":"usr/src/uts/common/io/eventfd.c","type":"MODIFIED","insertions":66,"deletions":-24},{"file":"usr/src/uts/common/sys/eventfd.h","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"usr/src/uts/common/sys/poll_impl.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/syscall/poll.c","type":"MODIFIED","insertions":7,"deletions":-5}],"sizeInsertions":110,"sizeDeletions":-45},"patchSets":[{"number":"1","revision":"4b9d33c1939a2aacbeecddfd3c60bf0bdad40c5e","parents":["cee5484f8e20b53ad08e5cbb01bca7207a74f24f"],"ref":"refs/changes/92/1692/1","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1490106350,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1490111169,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_aio.c","type":"MODIFIED","insertions":10,"deletions":-14},{"file":"usr/src/uts/common/brand/lx/syscall/lx_poll.c","type":"MODIFIED","insertions":17,"deletions":-1},{"file":"usr/src/uts/common/io/eventfd.c","type":"MODIFIED","insertions":66,"deletions":-24},{"file":"usr/src/uts/common/sys/eventfd.h","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"usr/src/uts/common/sys/poll_impl.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/syscall/poll.c","type":"MODIFIED","insertions":7,"deletions":-5}],"sizeInsertions":110,"sizeDeletions":-45},{"number":"2","revision":"2e9e6670f6d97553e197f61364459ef7a2194af8","parents":["4cd8e58f70dec0852b8c53600fdde8ffa1347e2f"],"ref":"refs/changes/92/1692/2","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1491334697,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1490111169,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1491431847,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491510108,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_aio.c","type":"MODIFIED","insertions":10,"deletions":-14},{"file":"usr/src/uts/common/brand/lx/syscall/lx_poll.c","type":"MODIFIED","insertions":17,"deletions":-1},{"file":"usr/src/uts/common/io/eventfd.c","type":"MODIFIED","insertions":66,"deletions":-24},{"file":"usr/src/uts/common/sys/eventfd.h","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"usr/src/uts/common/sys/poll_impl.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/syscall/poll.c","type":"MODIFIED","insertions":7,"deletions":-5}],"sizeInsertions":110,"sizeDeletions":-45},{"number":"3","revision":"819e77c57598ceae7dde246c2e83fe4305ced601","parents":["a4558c5bba1300222deac334fc85028cb1d4a911"],"ref":"refs/changes/92/1692/3","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1491598513,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1490111169,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1491431847,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491510108,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_aio.c","type":"MODIFIED","insertions":10,"deletions":-14},{"file":"usr/src/uts/common/brand/lx/syscall/lx_poll.c","type":"MODIFIED","insertions":17,"deletions":-1},{"file":"usr/src/uts/common/io/eventfd.c","type":"MODIFIED","insertions":66,"deletions":-24},{"file":"usr/src/uts/common/sys/eventfd.h","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"usr/src/uts/common/sys/poll_impl.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/syscall/poll.c","type":"MODIFIED","insertions":7,"deletions":-5}],"sizeInsertions":110,"sizeDeletions":-45},{"number":"4","revision":"eb4e2ae31c7dfb9656c0b7305d4c7d85b42ddaa9","parents":["a4558c5bba1300222deac334fc85028cb1d4a911"],"ref":"refs/changes/92/1692/4","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1491599135,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1490111169,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1491431847,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491510108,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_aio.c","type":"MODIFIED","insertions":10,"deletions":-14},{"file":"usr/src/uts/common/brand/lx/syscall/lx_poll.c","type":"MODIFIED","insertions":17,"deletions":-1},{"file":"usr/src/uts/common/io/eventfd.c","type":"MODIFIED","insertions":66,"deletions":-24},{"file":"usr/src/uts/common/sys/eventfd.h","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"usr/src/uts/common/sys/poll_impl.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/syscall/poll.c","type":"MODIFIED","insertions":7,"deletions":-5}],"sizeInsertions":110,"sizeDeletions":-45},{"number":"5","revision":"217415b79c30c5414f702fe59ef380cdc64b66e0","parents":["828055a7dbf3653fa97bde566be0e5a556080067"],"ref":"refs/changes/92/1692/5","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1491844498,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1490111169,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1491431847,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1491846024,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491510108,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_aio.c","type":"MODIFIED","insertions":10,"deletions":-14},{"file":"usr/src/uts/common/brand/lx/syscall/lx_poll.c","type":"MODIFIED","insertions":17,"deletions":-1},{"file":"usr/src/uts/common/io/eventfd.c","type":"MODIFIED","insertions":66,"deletions":-24},{"file":"usr/src/uts/common/sys/eventfd.h","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"usr/src/uts/common/sys/poll_impl.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/syscall/poll.c","type":"MODIFIED","insertions":7,"deletions":-5}],"sizeInsertions":110,"sizeDeletions":-45}],"allReviewers":[{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}]}