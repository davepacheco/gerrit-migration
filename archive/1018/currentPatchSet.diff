From a2b6fb8480b78b215e9cda7c9bff37527bba8b83 Mon Sep 17 00:00:00 2001
From: Chris Burroughs <chris.burroughs@joyent.com>
Date: Mon, 28 Nov 2016 17:12:44 -0500
Subject: [PATCH] ./bin/triton network get 2d035b65

---
 lib/do_network/do_get.js | 25 ++++++++++++++++---------
 1 file changed, 16 insertions(+), 9 deletions(-)

diff --git a/lib/do_network/do_get.js b/lib/do_network/do_get.js
index 8d62ed3..02531d2 100644
--- a/lib/do_network/do_get.js
+++ b/lib/do_network/do_get.js
@@ -25,17 +25,24 @@ function do_get(subcmd, opts, args, cb) {
             'incorrect number of args (%d)', args.length)));
     }
 
-    this.top.tritonapi.getNetwork(args[0], function (err, net) {
-        if (err) {
-            return cb(err);
-        }
+    var tritonapi = this.top.tritonapi;
 
-        if (opts.json) {
-            console.log(JSON.stringify(net));
-        } else {
-            console.log(JSON.stringify(net, null, 4));
+    common.cliSetupTritonApi({cli: this.top}, function onSetup(setupErr) {
+        if (setupErr) {
+            cb(setupErr);
         }
-        cb();
+        tritonapi.getNetwork(args[0], function (err, net) {
+            if (err) {
+                return cb(err);
+            }
+
+            if (opts.json) {
+                console.log(JSON.stringify(net));
+            } else {
+                console.log(JSON.stringify(net, null, 4));
+            }
+            cb();
+        });
     });
 }
 
-- 
2.21.0

