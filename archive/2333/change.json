{"project":"joyent/node-checker","branch":"master","id":"I5a0d675b1ff228ec5c2bcef2b003aff8772381a7","number":"2333","subject":"joyent/node-checker#38 http checker never reads responses, resulting in leaks and failed checks Reviewed by: David Pacheco \u003cdap@joyent.com\u003e Approved by: David Pacheco \u003cdap@joyent.com\u003e","owner":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"url":"https://cr.joyent.us/2333","commitMessage":"joyent/node-checker#38 http checker never reads responses, resulting in leaks and failed checks\nReviewed by: David Pacheco \u003cdap@joyent.com\u003e\nApproved by: David Pacheco \u003cdap@joyent.com\u003e\n","createdOn":1501882519,"lastUpdated":1504810278,"open":false,"status":"MERGED","comments":[{"timestamp":1501882519,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Uploaded patch set 1."},{"timestamp":1502312958,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\n(2 comments)\n\nThanks for doing this!"},{"timestamp":1502316523,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Uploaded patch set 2."},{"timestamp":1502316587,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1502317564,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1502323150,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 3:\n\nIf you\u0027re also looking for IA: it looks like node-checker does have some checks and tests.  Have you run those?"},{"timestamp":1502325917,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 3:\n\n\u003e If you\u0027re also looking for IA: it looks like node-checker does have\n \u003e some checks and tests.  Have you run those?\n\n \u003e If you\u0027re also looking for IA: it looks like node-checker does have\n \u003e some checks and tests.  Have you run those?\n\nthanks! the check step shows that I\u0027d dropped a space \"function()\" instead of \"function ()\""},{"timestamp":1502325939,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1502325997,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Uploaded patch set 5."},{"timestamp":1502379074,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1503595583,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Uploaded patch set 6."},{"timestamp":1503600089,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 6:\n\n(3 comments)\n\nThanks for adding the test!"},{"timestamp":1503607105,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Uploaded patch set 7."},{"timestamp":1503607137,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 7:\n\n(3 comments)"},{"timestamp":1503612460,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 7:\n\n(1 comment)\n\nThanks!"},{"timestamp":1503612969,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 7:\n\n(1 comment)"},{"timestamp":1503614452,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Uploaded patch set 8."},{"timestamp":1503615083,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1503620546,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1503620563,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Uploaded patch set 9."},{"timestamp":1504196309,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 9: Code-Review+1"},{"timestamp":1504216492,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 9:\n\nFor IA: Does the latest patchset pass the checks and tests?  Did you retest the original failure case too?  (I\u0027m not sure it\u0027s necessary -- I\u0027d defer to you on that.)"},{"timestamp":1504224662,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Uploaded patch set 10."},{"timestamp":1504636503,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 10:\n\n(2 comments)"},{"timestamp":1504638441,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 10:\n\n(2 comments)"},{"timestamp":1504638565,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 10:\n\n(1 comment)"},{"timestamp":1504643478,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Uploaded patch set 11."},{"timestamp":1504643603,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Uploaded patch set 12."},{"timestamp":1504643759,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 12:\n\n(1 comment)"},{"timestamp":1504644058,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 12: Code-Review+1"},{"timestamp":1504809573,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 12: Integration-Approval+1"},{"timestamp":1504809668,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Uploaded patch set 13: Commit message was updated."},{"timestamp":1504810278,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Tim Kordas"}],"currentPatchSet":{"number":"13","revision":"5a0d675b1ff228ec5c2bcef2b003aff8772381a7","parents":["e680a224d8cf76030f6092deec86ec69fb18c850"],"ref":"refs/changes/33/2333/13","uploader":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"createdOn":1504809668,"author":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1504644058,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1504809573,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"SUBM","value":"1","grantedOn":1504810278,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/checkers/http_checker.js","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"lib/health_checker.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/health_checker.test.js","type":"MODIFIED","insertions":35,"deletions":-44},{"file":"test/http_checker.test.js","type":"ADDED","insertions":139,"deletions":0}],"sizeInsertions":190,"sizeDeletions":-47},"patchSets":[{"number":"1","revision":"7d6159ada4ed26db468663ada4e201b41e557b6f","parents":["e680a224d8cf76030f6092deec86ec69fb18c850"],"ref":"refs/changes/33/2333/1","uploader":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"createdOn":1501882519,"author":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"isDraft":false,"kind":"REWORK","comments":[{"file":"/COMMIT_MSG","line":7,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This doesn\u0027t quite match the commit message format:\nhttps://github.com/joyent/eng/blob/master/docs/index.md#commit-comments\n\nI think this is a better explanation, but hasn\u0027t formally been approved yet:\nhttps://github.com/joyent/rfd/tree/master/rfd/0104#commit-messages"},{"file":"lib/checkers/http_checker.js","line":63,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Would you mind adding a comment explaining that it\u0027s important to read the contents of the request in order to make sure it finishes processing and doesn\u0027t get leaked?\n\nI think you probably want to use `res.resume()` instead, similar to what we did here:\nhttps://github.com/joyent/manta-muskie/commit/088593bea07bbe9ac53129da0d452ca25765f24e\n\nI thought using the \u0027data\u0027 event was not preferred, although it doesn\u0027t appear to be explicitly deprecated."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/checkers/http_checker.js","type":"MODIFIED","insertions":5,"deletions":-2}],"sizeInsertions":5,"sizeDeletions":-2},{"number":"2","revision":"75f9d62e69429824b13a20fed17a58ef7a1fba39","parents":["e680a224d8cf76030f6092deec86ec69fb18c850"],"ref":"refs/changes/33/2333/2","uploader":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"createdOn":1502316523,"author":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502316587,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/checkers/http_checker.js","type":"MODIFIED","insertions":13,"deletions":-2}],"sizeInsertions":13,"sizeDeletions":-2},{"number":"3","revision":"881675cfc677d34bf77d15c61fd03f6720869c4c","parents":["e680a224d8cf76030f6092deec86ec69fb18c850"],"ref":"refs/changes/33/2333/3","uploader":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"createdOn":1502317564,"author":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502316587,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/checkers/http_checker.js","type":"MODIFIED","insertions":13,"deletions":-2}],"sizeInsertions":13,"sizeDeletions":-2},{"number":"4","revision":"3d81d0a2541d22052cb3743aa140ee22a05f0d6b","parents":["e680a224d8cf76030f6092deec86ec69fb18c850"],"ref":"refs/changes/33/2333/4","uploader":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"createdOn":1502325939,"author":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502316587,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/checkers/http_checker.js","type":"MODIFIED","insertions":13,"deletions":-2}],"sizeInsertions":13,"sizeDeletions":-2},{"number":"5","revision":"8d395674a91993fa34f111d096c0363f8d712a6a","parents":["e680a224d8cf76030f6092deec86ec69fb18c850"],"ref":"refs/changes/33/2333/5","uploader":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"createdOn":1502325997,"author":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1502379074,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/checkers/http_checker.js","type":"MODIFIED","insertions":13,"deletions":-2}],"sizeInsertions":13,"sizeDeletions":-2},{"number":"6","revision":"d84f0a67648114ea9a42b00be7d874bb4474fc90","parents":["e680a224d8cf76030f6092deec86ec69fb18c850"],"ref":"refs/changes/33/2333/6","uploader":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"createdOn":1503595583,"author":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"isDraft":false,"kind":"REWORK","comments":[{"file":"test/http_checker.test.js","line":1,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I think it would be helpful to have a comment at the top of this file explaining what it\u0027s testing and broadly how it works (even if it\u0027s just a sentence or two about creating an HTTP server with some canned URLs that exercise various edge cases that we want to test)."},{"file":"test/http_checker.test.js","line":1,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Done"},{"file":"test/http_checker.test.js","line":31,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Do we not need to block until the server is actually listening (i.e., don\u0027t call \"cb\" until the \"listen\" callback is invoked?"},{"file":"test/http_checker.test.js","line":31,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Done"},{"file":"test/http_checker.test.js","line":94,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"We generally use full sentences with caps and punctuation, even in one-line comments (unless they\u0027re annotating a field in an object or something).\n\nIs the \"short amount of time\" well defined?  Is that based on some other timeout?"},{"file":"test/http_checker.test.js","line":94,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Done"},{"file":"test/http_checker.test.js","line":94,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Okay, but is that time period actually well-defined?"},{"file":"test/http_checker.test.js","line":94,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"it is not well-determined, in this case waiting zero doesn\u0027t work, waiting some short amount of time works. so 1s was empirically determined as a round-number long enough to make things work, but short enough to not be annoying. I can update the comment to reflect the empiricism at work."},{"file":"test/http_checker.test.js","line":94,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"It\u0027s not the comment I\u0027m worried about :)  I just don\u0027t want this test to start failing spuriously when some implementation detail changes.\n\nIf we really have no idea how long this will be, how about the pattern where we check every second for a maximum period (e.g., 30 seconds) and consider the test done if it happens within that period, and fail the test if it takes longer than that.\n\nBut maybe there\u0027s an event we can listen for or something that fires when this gets decremented?"},{"file":"test/http_checker.test.js","line":94,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"OK. I have a new patchset which actually measures the bytes and verifies that they all get transferred."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/checkers/http_checker.js","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"test/http_checker.test.js","type":"ADDED","insertions":100,"deletions":0}],"sizeInsertions":113,"sizeDeletions":-2},{"number":"7","revision":"152975a215614bed85a5293d1c8359c8fac1e931","parents":["e680a224d8cf76030f6092deec86ec69fb18c850"],"ref":"refs/changes/33/2333/7","uploader":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"createdOn":1503607105,"author":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/checkers/http_checker.js","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"test/http_checker.test.js","type":"ADDED","insertions":113,"deletions":0}],"sizeInsertions":126,"sizeDeletions":-2},{"number":"8","revision":"6c54cdf01542437d0660669475dda536d0dca5e1","parents":["e680a224d8cf76030f6092deec86ec69fb18c850"],"ref":"refs/changes/33/2333/8","uploader":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"createdOn":1503614452,"author":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/checkers/http_checker.js","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"test/http_checker.test.js","type":"ADDED","insertions":135,"deletions":0}],"sizeInsertions":148,"sizeDeletions":-2},{"number":"9","revision":"431f61812ebbf427639f9eacdfcad401e29b2fa3","parents":["e680a224d8cf76030f6092deec86ec69fb18c850"],"ref":"refs/changes/33/2333/9","uploader":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"createdOn":1503620563,"author":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1504196309,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/checkers/http_checker.js","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"test/http_checker.test.js","type":"ADDED","insertions":139,"deletions":0}],"sizeInsertions":154,"sizeDeletions":-2},{"number":"10","revision":"94e11b5db5f62c235003ccbca636573cc7f840dc","parents":["e680a224d8cf76030f6092deec86ec69fb18c850"],"ref":"refs/changes/33/2333/10","uploader":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"createdOn":1504224662,"author":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"isDraft":false,"kind":"REWORK","comments":[{"file":"lib/health_checker.js","line":165,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Moving the call to `check.check()` down here makes sense.\n\nI think the local variable (`checkTimeoutId`) was a little better than hanging this off the checker itself.  The semantics should be the same, but it seems like the checker is supposed to be abstract (i.e., this code shouldn\u0027t make assumptions about its internal state), and there\u0027s nothing to prevent Line 155 from clobbering an unrelated value that the checker itself might have stored into \"this.timeoutId\"."},{"file":"lib/health_checker.js","line":165,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"sure! I\u0027ll revert most of this in a fresh changeset. Note, I was trying to unify this timeout with the one created at line 147."},{"file":"lib/health_checker.js","line":165,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Oh!  I see.  It looks like that line of abstraction was already crossed :)\n\nIn that case, fair enough if you want to re-use it, but I think it would be helpful to assert that we\u0027re not clobbering the existing timeout (e.g., set it to `null` when the timeout fires or is removed, and assert that it\u0027s `null` when we start a new one)."},{"file":"lib/health_checker.js","line":165,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"On further thought, I think I agree with you original suggestion -- and will leave this as-is, except for moving the check.check() call below this timeout (see latest patchset)."},{"file":"test/health_checker.test.js","line":78,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"It\u0027s nice that this uses the framework now, but I\u0027m not sure why it\u0027s correct to remove the pipeline here.  Before, we used to avoid invoking registerFromConfig() until registerChecker() had completed, and we avoided invoking `hc.start()` until both of those had completed.  Now, we\u0027re invoking all three asynchronous operations concurrently, and proceeding when `hc.start()` finishes (even if the other two haven\u0027t yet).  Is that intentional?"},{"file":"test/health_checker.test.js","line":78,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"good catch, I hadn\u0027t committed my latest properly. Still learning Gerrit."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/checkers/http_checker.js","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"lib/health_checker.js","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"test/health_checker.test.js","type":"MODIFIED","insertions":32,"deletions":-44},{"file":"test/http_checker.test.js","type":"ADDED","insertions":139,"deletions":0}],"sizeInsertions":189,"sizeDeletions":-50},{"number":"11","revision":"661843956f47596d63bd8173b2c32f3dbd341867","parents":["e680a224d8cf76030f6092deec86ec69fb18c850"],"ref":"refs/changes/33/2333/11","uploader":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"createdOn":1504643478,"author":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/checkers/http_checker.js","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"lib/health_checker.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/health_checker.test.js","type":"MODIFIED","insertions":35,"deletions":-44},{"file":"test/http_checker.test.js","type":"ADDED","insertions":139,"deletions":0}],"sizeInsertions":191,"sizeDeletions":-48},{"number":"12","revision":"c548bfb6ea2d3152b91936e4831312644c7e28fe","parents":["e680a224d8cf76030f6092deec86ec69fb18c850"],"ref":"refs/changes/33/2333/12","uploader":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"createdOn":1504643603,"author":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1504644058,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1504809573,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/checkers/http_checker.js","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"lib/health_checker.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/health_checker.test.js","type":"MODIFIED","insertions":35,"deletions":-44},{"file":"test/http_checker.test.js","type":"ADDED","insertions":139,"deletions":0}],"sizeInsertions":190,"sizeDeletions":-47},{"number":"13","revision":"5a0d675b1ff228ec5c2bcef2b003aff8772381a7","parents":["e680a224d8cf76030f6092deec86ec69fb18c850"],"ref":"refs/changes/33/2333/13","uploader":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"createdOn":1504809668,"author":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1504644058,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1504809573,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"SUBM","value":"1","grantedOn":1504810278,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/checkers/http_checker.js","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"lib/health_checker.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/health_checker.test.js","type":"MODIFIED","insertions":35,"deletions":-44},{"file":"test/http_checker.test.js","type":"ADDED","insertions":139,"deletions":0}],"sizeInsertions":190,"sizeDeletions":-47}],"allReviewers":[{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}]}