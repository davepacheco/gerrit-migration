{"project":"joyent/node-zkstream","branch":"master","id":"Ia075e69fe0419936a3c70685c970e0c93f7f73a2","number":"2186","subject":"joyent/node-zkstream#19 drop eventemitter request API joyent/node-zkstream#20 add \u0027session\u0027 event as well as \u0027connect\u0027 to keep track of new sessions Reviewed by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e","owner":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"url":"https://cr.joyent.us/2186","commitMessage":"joyent/node-zkstream#19 drop eventemitter request API\njoyent/node-zkstream#20 add \u0027session\u0027 event as well as \u0027connect\u0027 to keep track of new sessions\nReviewed by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e\n","createdOn":1499298610,"lastUpdated":1499387926,"open":false,"status":"MERGED","comments":[{"timestamp":1499298610,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 1."},{"timestamp":1499298670,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1499379416,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1499379423,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1499382156,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1499382959,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1: Integration-Approval+1"},{"timestamp":1499387922,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 2: Commit message was updated."},{"timestamp":1499387926,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Alex Wilson"}],"currentPatchSet":{"number":"2","revision":"68f742b6ea99999b89ca787754be6eb6177083ab","parents":["67817f9fe1dc5935d56e91bfc6dce35d52077e7f"],"ref":"refs/changes/86/2186/2","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1499387922,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1499298670,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1499379423,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1499382959,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1499387926,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":12,"deletions":-16},{"file":"lib/client.js","type":"MODIFIED","insertions":100,"deletions":-95},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/errors.js","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/basic.test.js","type":"MODIFIED","insertions":17,"deletions":-24}],"sizeInsertions":143,"sizeDeletions":-138},"patchSets":[{"number":"1","revision":"a075e69fe0419936a3c70685c970e0c93f7f73a2","parents":["67817f9fe1dc5935d56e91bfc6dce35d52077e7f"],"ref":"refs/changes/86/2186/1","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1499298610,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1499379423,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1499382959,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1499298670,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/connection-fsm.js","line":56,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Is it useful to allow calling .close() multiple times somewhere?"},{"file":"lib/connection-fsm.js","line":56,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Yeah, in the close() path here, both the ZKSession and the Client will end up calling .close() on a connection in some circumstances. It\u0027s fine that they both do, and it\u0027s easier just to handle it here than in each of them individually."},{"file":"test/basic.test.js","line":504,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Do you want to also assert that when zkc2 closes it\u0027s gone through the appropriate steps?"},{"file":"test/basic.test.js","line":504,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"zzkc2 doesn\u0027t really do anything \"interesting\" in this test -- it just connects and then closes. I think we\u0027ve pretty well covered that in the earlier tests."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":12,"deletions":-16},{"file":"lib/client.js","type":"MODIFIED","insertions":100,"deletions":-95},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/errors.js","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/basic.test.js","type":"MODIFIED","insertions":17,"deletions":-24}],"sizeInsertions":143,"sizeDeletions":-138},{"number":"2","revision":"68f742b6ea99999b89ca787754be6eb6177083ab","parents":["67817f9fe1dc5935d56e91bfc6dce35d52077e7f"],"ref":"refs/changes/86/2186/2","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1499387922,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1499379423,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1499382959,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1499387926,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1499298670,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":12,"deletions":-16},{"file":"lib/client.js","type":"MODIFIED","insertions":100,"deletions":-95},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/errors.js","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/basic.test.js","type":"MODIFIED","insertions":17,"deletions":-24}],"sizeInsertions":143,"sizeDeletions":-138}],"allReviewers":[{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}]}