{"project":"joyent/illumos-joyent","branch":"master","id":"Ic7aa3802c43f81fcbd89a7d0a2d795572741710c","number":"329","subject":"OS-5607 lxbrand move unixbench syscalls to IKE Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e","owner":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"url":"https://cr.joyent.us/329","commitMessage":"OS-5607 lxbrand move unixbench syscalls to IKE\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n","createdOn":1471886992,"lastUpdated":1471897546,"open":false,"status":"MERGED","comments":[{"timestamp":1471886992,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 1."},{"timestamp":1471889691,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(6 comments)"},{"timestamp":1471890348,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\n(5 comments)"},{"timestamp":1471890964,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 2."},{"timestamp":1471891689,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 3."},{"timestamp":1471891890,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1471894489,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3:\n\nI tested this using LTP on both 32 \u0026 54 bit. I booted ubuntu 14 (32 \u0026 64), ubuntu 16 and centos7 and things all seem to be running as expected."},{"timestamp":1471896410,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1471897536,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1471897546,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jerry Jelinek"}],"currentPatchSet":{"number":"4","revision":"c7aa3802c43f81fcbd89a7d0a2d795572741710c","parents":["d0de416eba4efacef1c1fc99a50645dfe855b4e0"],"ref":"refs/changes/29/329/4","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1471897536,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1471891890,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1471896410,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1471897546,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_brand/common/fcntl.c","type":"MODIFIED","insertions":0,"deletions":-30},{"file":"usr/src/lib/brand/lx/lx_brand/common/id.c","type":"MODIFIED","insertions":3,"deletions":-206},{"file":"usr/src/lib/brand/lx/lx_brand/common/lx_brand.c","type":"MODIFIED","insertions":38,"deletions":-38},{"file":"usr/src/lib/brand/lx/lx_brand/common/misc.c","type":"MODIFIED","insertions":0,"deletions":-72},{"file":"usr/src/lib/brand/lx/lx_brand/sys/lx_syscall.h","type":"MODIFIED","insertions":0,"deletions":-24},{"file":"usr/src/uts/common/brand/lx/os/lx_syscall.c","type":"MODIFIED","insertions":38,"deletions":-38},{"file":"usr/src/uts/common/brand/lx/sys/lx_syscalls.h","type":"MODIFIED","insertions":24,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_dup.c","type":"ADDED","insertions":53,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_id.c","type":"MODIFIED","insertions":196,"deletions":-21},{"file":"usr/src/uts/common/brand/lx/syscall/lx_umask.c","type":"ADDED","insertions":25,"deletions":0},{"file":"usr/src/uts/intel/Makefile.files","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":379,"sizeDeletions":-429},"patchSets":[{"number":"1","revision":"eac79bee08a1ce6b5a292712b426d50727817cc3","parents":["d0de416eba4efacef1c1fc99a50645dfe855b4e0"],"ref":"refs/changes/29/329/1","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1471886992,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/brand/lx/syscall/lx_dup.c","line":46,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I would include a little comment about this being required because only DUP2FD_CLOEXEC checks oldfd\u003d\u003dnewfd (to toss EINVAL)"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_dup.c","line":46,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"will do"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_id.c","line":35,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Nice clean-up"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_id.c","line":40,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"In most other places, we\u0027ve included a little comment noting where the externs are from."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_id.c","line":40,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"done"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_id.c","line":101,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"For all of the setXXX16 functions, would it be reasonable to use the native type (lx_gid16_t, or whatever) as the argument type instead of uintptr_t?"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_id.c","line":101,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"fixed"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_id.c","line":408,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Can we bypass the set_errno here?  I would be inclined to make all of the copyouts consistent (as if-statements) with a return (0) at the end."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_id.c","line":408,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"changed"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_umask.c","line":18,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Include comment for source of extern"},{"file":"usr/src/uts/common/brand/lx/syscall/lx_umask.c","line":18,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_brand/common/fcntl.c","type":"MODIFIED","insertions":0,"deletions":-30},{"file":"usr/src/lib/brand/lx/lx_brand/common/id.c","type":"MODIFIED","insertions":3,"deletions":-206},{"file":"usr/src/lib/brand/lx/lx_brand/common/lx_brand.c","type":"MODIFIED","insertions":38,"deletions":-38},{"file":"usr/src/lib/brand/lx/lx_brand/common/misc.c","type":"MODIFIED","insertions":0,"deletions":-72},{"file":"usr/src/lib/brand/lx/lx_brand/sys/lx_syscall.h","type":"MODIFIED","insertions":0,"deletions":-24},{"file":"usr/src/uts/common/brand/lx/os/lx_syscall.c","type":"MODIFIED","insertions":38,"deletions":-38},{"file":"usr/src/uts/common/brand/lx/sys/lx_syscalls.h","type":"MODIFIED","insertions":24,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_dup.c","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_id.c","type":"MODIFIED","insertions":191,"deletions":-21},{"file":"usr/src/uts/common/brand/lx/syscall/lx_umask.c","type":"ADDED","insertions":24,"deletions":0},{"file":"usr/src/uts/intel/Makefile.files","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":371,"sizeDeletions":-429},{"number":"2","revision":"76477b52e818e0cb7c1b9036276707d17fd2feec","parents":["d0de416eba4efacef1c1fc99a50645dfe855b4e0"],"ref":"refs/changes/29/329/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1471890964,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_brand/common/fcntl.c","type":"MODIFIED","insertions":0,"deletions":-30},{"file":"usr/src/lib/brand/lx/lx_brand/common/id.c","type":"MODIFIED","insertions":3,"deletions":-206},{"file":"usr/src/lib/brand/lx/lx_brand/common/lx_brand.c","type":"MODIFIED","insertions":38,"deletions":-38},{"file":"usr/src/lib/brand/lx/lx_brand/common/misc.c","type":"MODIFIED","insertions":0,"deletions":-72},{"file":"usr/src/lib/brand/lx/lx_brand/sys/lx_syscall.h","type":"MODIFIED","insertions":0,"deletions":-24},{"file":"usr/src/uts/common/brand/lx/os/lx_syscall.c","type":"MODIFIED","insertions":38,"deletions":-38},{"file":"usr/src/uts/common/brand/lx/sys/lx_syscalls.h","type":"MODIFIED","insertions":24,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_dup.c","type":"ADDED","insertions":53,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_id.c","type":"MODIFIED","insertions":192,"deletions":-21},{"file":"usr/src/uts/common/brand/lx/syscall/lx_umask.c","type":"ADDED","insertions":25,"deletions":0},{"file":"usr/src/uts/intel/Makefile.files","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":375,"sizeDeletions":-429},{"number":"3","revision":"854a99d32efcbe595280486cacde0678ae289595","parents":["d0de416eba4efacef1c1fc99a50645dfe855b4e0"],"ref":"refs/changes/29/329/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1471891689,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1471891890,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1471896410,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_brand/common/fcntl.c","type":"MODIFIED","insertions":0,"deletions":-30},{"file":"usr/src/lib/brand/lx/lx_brand/common/id.c","type":"MODIFIED","insertions":3,"deletions":-206},{"file":"usr/src/lib/brand/lx/lx_brand/common/lx_brand.c","type":"MODIFIED","insertions":38,"deletions":-38},{"file":"usr/src/lib/brand/lx/lx_brand/common/misc.c","type":"MODIFIED","insertions":0,"deletions":-72},{"file":"usr/src/lib/brand/lx/lx_brand/sys/lx_syscall.h","type":"MODIFIED","insertions":0,"deletions":-24},{"file":"usr/src/uts/common/brand/lx/os/lx_syscall.c","type":"MODIFIED","insertions":38,"deletions":-38},{"file":"usr/src/uts/common/brand/lx/sys/lx_syscalls.h","type":"MODIFIED","insertions":24,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_dup.c","type":"ADDED","insertions":53,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_id.c","type":"MODIFIED","insertions":196,"deletions":-21},{"file":"usr/src/uts/common/brand/lx/syscall/lx_umask.c","type":"ADDED","insertions":25,"deletions":0},{"file":"usr/src/uts/intel/Makefile.files","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":379,"sizeDeletions":-429},{"number":"4","revision":"c7aa3802c43f81fcbd89a7d0a2d795572741710c","parents":["d0de416eba4efacef1c1fc99a50645dfe855b4e0"],"ref":"refs/changes/29/329/4","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1471897536,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1471897546,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1471891890,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1471896410,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/lib/brand/lx/lx_brand/common/fcntl.c","type":"MODIFIED","insertions":0,"deletions":-30},{"file":"usr/src/lib/brand/lx/lx_brand/common/id.c","type":"MODIFIED","insertions":3,"deletions":-206},{"file":"usr/src/lib/brand/lx/lx_brand/common/lx_brand.c","type":"MODIFIED","insertions":38,"deletions":-38},{"file":"usr/src/lib/brand/lx/lx_brand/common/misc.c","type":"MODIFIED","insertions":0,"deletions":-72},{"file":"usr/src/lib/brand/lx/lx_brand/sys/lx_syscall.h","type":"MODIFIED","insertions":0,"deletions":-24},{"file":"usr/src/uts/common/brand/lx/os/lx_syscall.c","type":"MODIFIED","insertions":38,"deletions":-38},{"file":"usr/src/uts/common/brand/lx/sys/lx_syscalls.h","type":"MODIFIED","insertions":24,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_dup.c","type":"ADDED","insertions":53,"deletions":0},{"file":"usr/src/uts/common/brand/lx/syscall/lx_id.c","type":"MODIFIED","insertions":196,"deletions":-21},{"file":"usr/src/uts/common/brand/lx/syscall/lx_umask.c","type":"ADDED","insertions":25,"deletions":0},{"file":"usr/src/uts/intel/Makefile.files","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":379,"sizeDeletions":-429}],"allReviewers":[{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}]}