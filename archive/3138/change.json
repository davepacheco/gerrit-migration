{"project":"joyent/illumos-joyent","branch":"master","id":"I4a99ae161887bed6eed6dcb1699f188f023921a2","number":"3138","subject":"OS-6527 Add plaform-specific topo map for Joyent-Storage-Platform-7001 OS-6511 extend ipmi enumerator module to enumerate a node for the service processor OS-6490 Implement topo module to enumerate dimms from smbios Reviewed by: Robert Mustacchi \u003crm@joyen","owner":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"url":"https://cr.joyent.us/3138","commitMessage":"OS-6527 Add plaform-specific topo map for Joyent-Storage-Platform-7001\nOS-6511 extend ipmi enumerator module to enumerate a node for the service processor\nOS-6490 Implement topo module to enumerate dimms from smbios\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nApproved by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\n","createdOn":1514008536,"lastUpdated":1517542762,"open":false,"status":"MERGED","comments":[{"timestamp":1514008536,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 1."},{"timestamp":1514391416,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(15 comments)\n\nIn general this looks good. I have some minor comments and clean up suggestions."},{"timestamp":1514427190,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 2."},{"timestamp":1514427209,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 2:\n\n(10 comments)"},{"timestamp":1514431207,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 3."},{"timestamp":1514452309,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 4."},{"timestamp":1514452492,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 4:\n\nHad to move the topo_slot_type_t typedef from topo_hc.h to libtopo.h.  The reason is that apparently the eversholt compiler (esc) include topo_hc.h when it compilers the pciex eversholt rules and it doesn\u0027t know how to parse typedefs.  I didn\u0027t notice till I did a clobber build tonight."},{"timestamp":1514489924,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 5."},{"timestamp":1514490077,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 4:\n\nForgot to add topo_mod_clean_str() to mapfile-vers"},{"timestamp":1514492377,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 6."},{"timestamp":1514492472,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 6:\n\ns/free/topo_mod_strfree/"},{"timestamp":1514500296,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(5 comments)"},{"timestamp":1514940479,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 7."},{"timestamp":1514940554,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 7:\n\n(4 comments)"},{"timestamp":1514999869,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 7: Code-Review+1\n\n(2 comments)\n\nIn general, this seems fine. I leave it up to you if you want to change how we do the route error handling. Thanks for the other cleanup."},{"timestamp":1515026952,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 8."},{"timestamp":1515026998,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 8:\n\n(2 comments)"},{"timestamp":1515031120,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 9: Patch Set 8 was rebased."},{"timestamp":1515033784,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 10."},{"timestamp":1515033864,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 10:\n\ns/dimm-slot/slot/ in SSG-2028R-ACR24L-hc-topology.xml"},{"timestamp":1515451745,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 11."},{"timestamp":1515452520,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 9:\n\nThis last update add propmaps to statically map the DIMM temperature sensors to the correct dimm topo node.  It also fixes a minor bug with the topo DTD, which was missing one of the attributes for the \u003cnode\u003e element."},{"timestamp":1515456537,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 12."},{"timestamp":1515456634,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 9:\n\nfixed minor typo in the slot propmaps"},{"timestamp":1516124732,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 13: Patch Set 12 was rebased."},{"timestamp":1516125340,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 14."},{"timestamp":1516125546,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 14:\n\nfixed a few occurrences of spurious trailing whitespace"},{"timestamp":1516233808,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 15."},{"timestamp":1516240803,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 15:\n\nOk - this most recent change adds code to the smbios enumerator module to check if a functional memory controller driver exists and bail out, if so.  With that change I updated i86pc-legacy-hc-topology.xml to invoke the smbios enumerator by default."},{"timestamp":1516745586,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 16: Patch Set 15 was rebased."},{"timestamp":1517250063,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 17: Patch Set 16 was rebased."},{"timestamp":1517341675,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 18: Patch Set 17 was rebased."},{"timestamp":1517343539,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 18:\n\n(3 comments)"},{"timestamp":1517364612,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 19."},{"timestamp":1517364706,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 19:\n\n(3 comments)"},{"timestamp":1517409187,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 19: Code-Review+1"},{"timestamp":1517429414,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 20."},{"timestamp":1517429582,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 20:\n\nUpdated to the new CDDL header in a couple makefiles and fixed a whitespace issue, per feedback from jclulow."},{"timestamp":1517429881,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 20: Integration-Approval+1\n\nThanks for the fixes.  The testing notes in the ticket look good to me!"},{"timestamp":1517506996,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 20: Code-Review+1"},{"timestamp":1517535786,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Uploaded patch set 21."},{"timestamp":1517536074,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Patch Set 21:\n\nMerge with Jerry\u0027s change to /manifest"},{"timestamp":1517542222,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 21: Integration-Approval+1"},{"timestamp":1517542295,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 21: Code-Review+1\n\nI\u0027m adding a CR+1 as well on account of Robert being busy right now, but don\u0027t add me to \"Reviewed by:\"."},{"timestamp":1517542762,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Rob Johnston"}],"currentPatchSet":{"number":"21","revision":"4a99ae161887bed6eed6dcb1699f188f023921a2","parents":["6afca163c6f9158c8d995916782cd765188cbdf1"],"ref":"refs/changes/38/3138/21","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1517535786,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1517542222,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1517542295,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"SUBM","value":"1","grantedOn":1517542762,"by":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/libtopo.h","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/mapfile-vers","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":43,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.c","type":"MODIFIED","insertions":10,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.map","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":88,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":33,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/common/topology.dtd.1","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/i86pc/i86pc-legacy-hc-topology.xml","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":275,"deletions":-4},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":22,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":483,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":234,"deletions":-13},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":16,"deletions":-3}],"sizeInsertions":1861,"sizeDeletions":-34},"patchSets":[{"number":"1","revision":"100c7d9bd1c579d02e893b6cac84be8c95435530","parents":["43b3bab58788e30af95d6dd211800182624ede96"],"ref":"refs/changes/38/3138/1","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1514008536,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","line":4,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Use new CCDL header in usr/src/prototypes please?"},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","line":91,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Whitespace?"},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","line":92,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Can you confirm that the min/max is inclusive?"},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","line":20,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Can we use the new CCDL header in usr/src/prototypes/ please?"},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","line":41,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Clean up whitespace?"},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","line":72,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Do we need to add this to the legacy topo maps so that all systems can enumerate these potentially?"},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","line":72,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"I went ahead and added the range entry for the \"sp\".  But I don\u0027t think we should add the \"dimm-slot\" entry because the legacy platform may have already enumerated the memory topology via the chip enumerator."},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","line":72,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is there a way to know whether or not we should enumerate this for platforms? I\u0027m just thinking of the systems like the NUC or other systems which have smbios records, but don\u0027t have other enumeration through the chip enumerator?"},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","line":72,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Maybe we could load the smbios plugin after the chip plugin and/or chip propmap and then have the smbios module walk the tree and bail out if it finds any dimm nodes at all."},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","line":478,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This should probably return a const value"},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","line":478,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Done"},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","line":529,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Why do we need to cast away the const value?"},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","line":529,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Because otherwise gcc whines when we try and free it later."},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","line":529,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"However, looking at the code in ipmi_firmware_version, the memory for this is stored on the ipmi handle and therefore the string doesn\u0027t need to be freed. It would be an error to free it. So I think the cast is unneeded and we shouldn\u0027t free it at all."},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","line":529,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Yep, you\u0027re right!  Dumb luck that I was getting away with this.  Fixed."},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":88,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I feel like we should check to make sure that every character we have is an ascii character before we include it. Maybe check isascii \u0026\u0026 isprint for each character?"},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":88,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Turns out there was existing code in libtopo for dealing with non-ascii/non-printable chars in the form of topo_cleanup_auth_str().\n\ntopo_mod_hcfmri() calls it to cleanup the part/serial/rev strings.  I added a topo mod API, topo_mod_clean_str() which wraps this routine and then used that to clean up the other smbios strings."},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":132,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"We should look at making topo_node_label_set take a const char * so we don\u0027t have to cast this away in the future."},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":132,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Agree."},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":189,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I think these can all be const, right? This would avoid the need to have the casts at +200-214."},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":189,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Yes for part, rev and serial.  No for the others as no they are now set to the string allocated by topo_mod_clean_str()."},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":264,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Do we need to check against SMB_MDFF_UNKNOWN (0x2)?"},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":264,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"No.  If it\u0027s not one of the form-factors recognized in distill_dimm_form() then we\u0027ll never get to this point in the code as we would have skipped over this memdevice in smbios_enum_memory()."},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":265,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"SMB_MDFF_OTHER?"},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":265,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"See above"},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":265,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I was referring to using the numeric constant rather than hardcoding 0x01."},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":265,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Doh! :) And actually I don\u0027t remember why I was explicitly checking against those two types, but I think it was before I added the smbios2topotype() stuff.  The explicit checks against 0x00/0x01 seem unecessary so I removed them."},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":399,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Should we be honoring min/max in this iteration?"},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":399,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Yes, we probably should - fixed!"},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","line":286,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"If we\u0027re using a dynamic IPv6 address do we need to check the value of entry 74 here instead?"},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","line":286,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Yeah, the more I look at the IPMI spec, the murkier it gets as it looks like you can optionally enable dynamic router discovery even if you set a static address for the SP and vice-versa.  I\u0027m starting to think I need to always look for both static and dynamic routes and maybe build an array router addresses?"},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","line":286,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Yeah, we may need to provide an array of addresses for those."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":46,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":96,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":42,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":246,"deletions":-3},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":435,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":148,"deletions":-11},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":1117,"sizeDeletions":-16},{"number":"2","revision":"7811345c8ea85145bb4f50489a31ae133eb6d3f3","parents":["43b3bab58788e30af95d6dd211800182624ede96"],"ref":"refs/changes/38/3138/2","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1514427190,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":46,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.map","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":87,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":42,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/i86pc/i86pc-legacy-hc-topology.xml","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":246,"deletions":-3},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":449,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":148,"deletions":-11},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":1142,"sizeDeletions":-17},{"number":"3","revision":"be33bdc48ba9b97d913371508fc3b6e84faeed84","parents":["43b3bab58788e30af95d6dd211800182624ede96"],"ref":"refs/changes/38/3138/3","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1514431207,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":46,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.map","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":87,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":42,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/i86pc/i86pc-legacy-hc-topology.xml","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":246,"deletions":-3},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":449,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":148,"deletions":-11},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":1142,"sizeDeletions":-17},{"number":"4","revision":"6cf6f7a6f1338ed5267fba7c0f626e1f82f0e2ae","parents":["43b3bab58788e30af95d6dd211800182624ede96"],"ref":"refs/changes/38/3138/4","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1514452309,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/libtopo.h","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":42,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.map","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":87,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":42,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/i86pc/i86pc-legacy-hc-topology.xml","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":246,"deletions":-3},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":449,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":148,"deletions":-11},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":1143,"sizeDeletions":-18},{"number":"5","revision":"df09c6fcba53e794ee509018d3bcc4badb7bbba3","parents":["43b3bab58788e30af95d6dd211800182624ede96"],"ref":"refs/changes/38/3138/5","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1514489924,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/libtopo.h","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/mapfile-vers","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":42,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.map","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":87,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":42,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/i86pc/i86pc-legacy-hc-topology.xml","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":246,"deletions":-3},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":449,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":148,"deletions":-11},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":1145,"sizeDeletions":-18},{"number":"6","revision":"8ec0908ba21d3cfa7d9af4311118e6dfe0f81906","parents":["43b3bab58788e30af95d6dd211800182624ede96"],"ref":"refs/changes/38/3138/6","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1514492377,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":402,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I don\u0027t think setting sme_slot_inst to min is going to be sufficient here. Don\u0027t we need to skip creating the first min nodes here before we start here? Otherwise, based on this if I did the following pairs of min max [0, 1], [5, 6], I\u0027d get the same thing enumerated each time."},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":402,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"I don\u0027t think that\u0027s intention of min/max - i.e. I don\u0027t think it\u0027s to allow you to selectively enumerate specific resources.  My understanding was that it was more to allow two different enumerators to enumerate different subsets of the same node type at the same level of the tree and not have node instance collisions.\n\nFor example, on the 7120 ZFS appliance, the first 2 drive bays (used for the mirrored root) were connected to SATA headers on the board.  But the other 12 bays were connected to a SAS expander - so you had hc:///chassis/bay\u003d[0-13] by we statically enumerated bays 0/1 for the SATA disks and then set min\u003d2/max\u003d13 for the ses enumerator."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/libtopo.h","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/mapfile-vers","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":42,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.c","type":"MODIFIED","insertions":13,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.map","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":87,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":42,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/i86pc/i86pc-legacy-hc-topology.xml","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":246,"deletions":-3},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":449,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":148,"deletions":-11},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":8,"deletions":0},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":1145,"sizeDeletions":-18},{"number":"7","revision":"0136e8f436af251504b775c10b915e9a74f66eaa","parents":["43b3bab58788e30af95d6dd211800182624ede96"],"ref":"refs/changes/38/3138/7","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1514940479,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1514999869,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"comments":[{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","line":338,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Do you think it\u0027s possible that we\u0027ll only have one of the two IPv6 routes work and or that some of them will be basically set to zeros or some other value to indicate that they\u0027re not programmed?"},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","line":338,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"I need to test it, but yes, I believe parameter value will be set to all zeroes if the route isn\u0027t programmed.  I tweaked the code to check for this case an handle it appropriately."},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","line":362,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is it possible that this works for one channel, but fails for the other and that causes us to throw it out?"},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","line":362,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"It shouldn\u0027t in this case.  Like the earlier comment, we could get back a response of all zeroes if it\u0027s unset, but the IPMI call to get the parameter should succeed.\n\nWell, that said, if the number of dynamic routes changed in between when we fetched the number of routes and when we tried to look up the routes then there could be a race here.  I could loose this check up a bit."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/libtopo.h","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/mapfile-vers","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":43,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.c","type":"MODIFIED","insertions":11,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.map","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":87,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":42,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/i86pc/i86pc-legacy-hc-topology.xml","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":275,"deletions":-4},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":448,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":226,"deletions":-13},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":8,"deletions":-1}],"sizeInsertions":1262,"sizeDeletions":-30},{"number":"8","revision":"3f63a1480cf8961b468175173de98af3dc0577b8","parents":["43b3bab58788e30af95d6dd211800182624ede96"],"ref":"refs/changes/38/3138/8","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1515026952,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/libtopo.h","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/mapfile-vers","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":43,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.c","type":"MODIFIED","insertions":11,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.map","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":87,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":42,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/i86pc/i86pc-legacy-hc-topology.xml","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":275,"deletions":-4},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":448,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":248,"deletions":-13},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":8,"deletions":-1}],"sizeInsertions":1284,"sizeDeletions":-30},{"number":"9","revision":"2edcdbcf277679723ca607d7d7a7ef9d331842fa","parents":["7640648ce5e6a81bd3d083f48122a6136def481b"],"ref":"refs/changes/38/3138/9","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1515031120,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"TRIVIAL_REBASE","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/libtopo.h","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/mapfile-vers","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":43,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.c","type":"MODIFIED","insertions":11,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.map","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":87,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":42,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/i86pc/i86pc-legacy-hc-topology.xml","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":275,"deletions":-4},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":448,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":248,"deletions":-13},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":8,"deletions":-1}],"sizeInsertions":1284,"sizeDeletions":-30},{"number":"10","revision":"81a63d41f7e2a5d9b5843fccc62be78bfb5930f5","parents":["7640648ce5e6a81bd3d083f48122a6136def481b"],"ref":"refs/changes/38/3138/10","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1515033784,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/libtopo.h","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/mapfile-vers","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":43,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.c","type":"MODIFIED","insertions":11,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.map","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":87,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":42,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/i86pc/i86pc-legacy-hc-topology.xml","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":275,"deletions":-4},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":448,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":248,"deletions":-13},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":8,"deletions":-1}],"sizeInsertions":1284,"sizeDeletions":-30},{"number":"11","revision":"dc726db80c191fd94e47e18922b8d65d3735e11b","parents":["7640648ce5e6a81bd3d083f48122a6136def481b"],"ref":"refs/changes/38/3138/11","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1515451745,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/libtopo.h","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/mapfile-vers","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":43,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.c","type":"MODIFIED","insertions":11,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.map","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":88,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/common/topology.dtd.1","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/i86pc/i86pc-legacy-hc-topology.xml","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":275,"deletions":-4},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":448,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":248,"deletions":-13},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":14,"deletions":-1}],"sizeInsertions":1856,"sizeDeletions":-33},{"number":"12","revision":"b70926cc51fc480ddfc8735f5c87a103913168fd","parents":["7640648ce5e6a81bd3d083f48122a6136def481b"],"ref":"refs/changes/38/3138/12","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1515456537,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/libtopo.h","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/mapfile-vers","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":43,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.c","type":"MODIFIED","insertions":11,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.map","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":88,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/common/topology.dtd.1","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/i86pc/i86pc-legacy-hc-topology.xml","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":275,"deletions":-4},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":448,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":248,"deletions":-13},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":14,"deletions":-1}],"sizeInsertions":1856,"sizeDeletions":-33},{"number":"13","revision":"75aa911fd8cca5003e505334806935b5c72a6757","parents":["85c7b8606e4a61f48f51d72efd00cb54a4afc46a"],"ref":"refs/changes/38/3138/13","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1516124732,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"TRIVIAL_REBASE","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/libtopo.h","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/mapfile-vers","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":43,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.c","type":"MODIFIED","insertions":11,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.map","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":88,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/common/topology.dtd.1","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/i86pc/i86pc-legacy-hc-topology.xml","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":275,"deletions":-4},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":448,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":248,"deletions":-13},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":14,"deletions":-1}],"sizeInsertions":1855,"sizeDeletions":-32},{"number":"14","revision":"ad85c054814aeca95c806c68895ba92d7aadf7cf","parents":["85c7b8606e4a61f48f51d72efd00cb54a4afc46a"],"ref":"refs/changes/38/3138/14","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1516125340,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/libtopo.h","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/mapfile-vers","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":43,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.c","type":"MODIFIED","insertions":11,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.map","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":88,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/common/topology.dtd.1","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/i86pc/i86pc-legacy-hc-topology.xml","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":275,"deletions":-4},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":448,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":248,"deletions":-13},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":16,"deletions":-3}],"sizeInsertions":1857,"sizeDeletions":-34},{"number":"15","revision":"6f32610a83858572c63a684dddb4629ca0e7148d","parents":["85c7b8606e4a61f48f51d72efd00cb54a4afc46a"],"ref":"refs/changes/38/3138/15","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1516233808,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/libtopo.h","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/mapfile-vers","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":43,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.c","type":"MODIFIED","insertions":11,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.map","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":88,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/common/topology.dtd.1","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/i86pc/i86pc-legacy-hc-topology.xml","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":275,"deletions":-4},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":483,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":248,"deletions":-13},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":16,"deletions":-3}],"sizeInsertions":1895,"sizeDeletions":-34},{"number":"16","revision":"c5d62559ba9e4af95868fcebacb3b8d725bbc914","parents":["abe3b0816f5a2c16be4d4cec2645edff263bb490"],"ref":"refs/changes/38/3138/16","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1516745586,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"TRIVIAL_REBASE","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/libtopo.h","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/mapfile-vers","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":43,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.c","type":"MODIFIED","insertions":11,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.map","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":88,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/common/topology.dtd.1","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/i86pc/i86pc-legacy-hc-topology.xml","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":275,"deletions":-4},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":483,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":248,"deletions":-13},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":16,"deletions":-3}],"sizeInsertions":1895,"sizeDeletions":-34},{"number":"17","revision":"030ef4e9168393f217f97b2b6b1a782a3a4977f2","parents":["42a73519e898cf2cf4a4216fa8528b2dedfe3551"],"ref":"refs/changes/38/3138/17","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1517250063,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"TRIVIAL_REBASE","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/libtopo.h","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/mapfile-vers","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":43,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.c","type":"MODIFIED","insertions":11,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.map","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":88,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/common/topology.dtd.1","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/i86pc/i86pc-legacy-hc-topology.xml","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":275,"deletions":-4},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":483,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":248,"deletions":-13},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":16,"deletions":-3}],"sizeInsertions":1895,"sizeDeletions":-34},{"number":"18","revision":"fc5be7ba05df16864bc840e18892e9152cd6872c","parents":["9f6b3ea11dce076cf9dd9f88c85a752702938873"],"ref":"refs/changes/38/3138/18","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1517341675,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"TRIVIAL_REBASE","comments":[{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":125,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"After we\u0027ve bound this node, I notice there are a lot of cases where we return NULL. Is there any clean up that needs to happen for this node or will that get cleaned up automatically as it\u0027s part of the snapshot?"},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":125,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Once the node is bound, it should get cleaned up along with the rest of the tree when it comes time to destroy the snapshot."},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":136,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Let\u0027s make sure to file a follow up to make topo_node_label_set() take a const argument and come back and clean this up."},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","line":136,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Agreed - I filed OS-6581 to track this."},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","line":185,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Should we instead use IN6_IS_ADDR_UNSPECIFIED()?"},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","line":185,"reviewer":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/libtopo.h","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/mapfile-vers","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":43,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.c","type":"MODIFIED","insertions":11,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.map","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":88,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/common/topology.dtd.1","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/i86pc/i86pc-legacy-hc-topology.xml","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":275,"deletions":-4},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":483,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":248,"deletions":-13},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":16,"deletions":-3}],"sizeInsertions":1895,"sizeDeletions":-34},{"number":"19","revision":"6878491ac7cb9528d4b1535f83b7b05393903de8","parents":["9f6b3ea11dce076cf9dd9f88c85a752702938873"],"ref":"refs/changes/38/3138/19","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1517364612,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1517409187,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/libtopo.h","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/mapfile-vers","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":43,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.c","type":"MODIFIED","insertions":10,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.map","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":88,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/common/topology.dtd.1","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/i86pc/i86pc-legacy-hc-topology.xml","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":275,"deletions":-4},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":483,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":234,"deletions":-13},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":16,"deletions":-3}],"sizeInsertions":1880,"sizeDeletions":-34},{"number":"20","revision":"f4b0371361f363acbc2f6147701bf383e70803e5","parents":["9f6b3ea11dce076cf9dd9f88c85a752702938873"],"ref":"refs/changes/38/3138/20","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1517429414,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1517506996,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1517429881,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/libtopo.h","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/mapfile-vers","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":43,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.c","type":"MODIFIED","insertions":10,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.map","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":88,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":33,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/common/topology.dtd.1","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/i86pc/i86pc-legacy-hc-topology.xml","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":275,"deletions":-4},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":22,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":483,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":234,"deletions":-13},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":16,"deletions":-3}],"sizeInsertions":1861,"sizeDeletions":-34},{"number":"21","revision":"4a99ae161887bed6eed6dcb1699f188f023921a2","parents":["6afca163c6f9158c8d995916782cd765188cbdf1"],"ref":"refs/changes/38/3138/21","uploader":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"createdOn":1517535786,"author":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1517542295,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1517542222,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"SUBM","value":"1","grantedOn":1517542762,"by":{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/hc.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/libtopo.h","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/mapfile-vers","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_hc.h","type":"MODIFIED","insertions":43,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.c","type":"MODIFIED","insertions":10,"deletions":0},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/libtopo/common/topo_mod.map","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-chassis-hc-topology.xml","type":"ADDED","insertions":43,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-hc-topology.xml","type":"ADDED","insertions":88,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Joyent-Storage-Platform-7001-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Joyent,Joyent-Storage-Platform-7001/Makefile","type":"ADDED","insertions":33,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-hc-topology.xml","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/SMCI,SSG-2028R-ACR24L/SSG-2028R-ACR24L-slot-hc-topology.xml","type":"ADDED","insertions":277,"deletions":0},{"file":"usr/src/lib/fm/topo/maps/common/topology.dtd.1","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/lib/fm/topo/maps/i86pc/i86pc-legacy-hc-topology.xml","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"usr/src/lib/fm/topo/modules/common/ipmi/ipmi_enum.c","type":"MODIFIED","insertions":275,"deletions":-4},{"file":"usr/src/lib/fm/topo/modules/common/smbios/Makefile","type":"ADDED","insertions":22,"deletions":0},{"file":"usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c","type":"ADDED","insertions":483,"deletions":0},{"file":"usr/src/lib/libipmi/common/ipmi_lancfg.c","type":"MODIFIED","insertions":234,"deletions":-13},{"file":"usr/src/lib/libipmi/common/libipmi.h","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"usr/src/pkg/manifests/service-fault-management.mf","type":"MODIFIED","insertions":16,"deletions":-3}],"sizeInsertions":1861,"sizeDeletions":-34}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"}]}