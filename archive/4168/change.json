{"project":"joyent/sdc-amon","branch":"master","id":"I5008279f7251c34a1c621e4ea616010bfb41d752","number":"4168","subject":"TRITON-478 agent builds fail as non-root when postinstall.sh writes to /","owner":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"url":"https://cr.joyent.us/4168","commitMessage":"TRITON-478 agent builds fail as non-root when postinstall.sh writes to /\n","createdOn":1528458184,"lastUpdated":1528993234,"open":false,"status":"MERGED","comments":[{"timestamp":1528458184,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 1."},{"timestamp":1528482369,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1528491156,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1: Code-Review+1\n\n(2 comments)"},{"timestamp":1528739679,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 2."},{"timestamp":1528739707,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1528755998,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1528785826,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1528914120,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1\n\nThanks!"},{"timestamp":1528993234,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Tim Foster"}],"currentPatchSet":{"number":"3","revision":"5008279f7251c34a1c621e4ea616010bfb41d752","parents":["7e0cd85c209ba84224893849ca69085e853e02fa"],"ref":"refs/changes/68/4168/3","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1528785826,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528739707,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528914120,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1528914120,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1528993234,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"agent/pkg/postinstall.sh","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"relay/pkg/postinstall.sh","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":11,"sizeDeletions":-2},"patchSets":[{"number":"1","revision":"e1e85afcca70c4c20882499108941e53e6c34429","parents":["6763172507d51523f01ade6a5ab5b46a38b05b02"],"ref":"refs/changes/68/4168/1","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1528458184,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528482369,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528491156,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"agent/pkg/postinstall.sh","line":26,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Perhaps specify \u0027amon-agent\u0027 here?"},{"file":"relay/pkg/postinstall.sh","line":20,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Perhaps specify \u0027amon-relay\u0027 here?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"agent/pkg/postinstall.sh","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"relay/pkg/postinstall.sh","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":13,"sizeDeletions":-2},{"number":"2","revision":"8b9d88f647ece27985f8327d217a576e089bfc25","parents":["7e0cd85c209ba84224893849ca69085e853e02fa"],"ref":"refs/changes/68/4168/2","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1528739679,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528739707,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"/COMMIT_MSG","line":8,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Same note from your other CR about not having this line in the commit message (per https://github.com/joyent/eng/blob/master/docs/index.md#commit-comments)."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"agent/pkg/postinstall.sh","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"relay/pkg/postinstall.sh","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":11,"sizeDeletions":-2},{"number":"3","revision":"5008279f7251c34a1c621e4ea616010bfb41d752","parents":["7e0cd85c209ba84224893849ca69085e853e02fa"],"ref":"refs/changes/68/4168/3","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1528785826,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528739707,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528914120,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1528914120,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1528993234,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"agent/pkg/postinstall.sh","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"relay/pkg/postinstall.sh","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":11,"sizeDeletions":-2}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}]}