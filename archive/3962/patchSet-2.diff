From d646c2d1a541d787f3f614c5c015b22a0543ee91 Mon Sep 17 00:00:00 2001
From: sjorge <sjorge@blackdot.be>
Date: Wed, 16 May 2018 21:58:48 +0200
Subject: [PATCH] OS-6963 add_fbuf should also use is_env_string

---
 usr/src/lib/brand/bhyve/zone/boot.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/usr/src/lib/brand/bhyve/zone/boot.c b/usr/src/lib/brand/bhyve/zone/boot.c
index 701ad16c83..c6431e61f6 100644
--- a/usr/src/lib/brand/bhyve/zone/boot.c
+++ b/usr/src/lib/brand/bhyve/zone/boot.c
@@ -486,8 +486,7 @@ add_fbuf(int *argc, char **argv)
 	/*
 	 * Do not add a frame buffer or tablet if VNC is disabled.
 	 */
-	if ((val = get_zcfg_var("attr", "vnc_port", NULL)) != NULL &&
-	    strcmp(val, "-1") == 0) {
+	if (is_env_string("attr", "vnc_port", NULL, "-1")) {
 		return (0);
 	}
 
-- 
2.21.0

