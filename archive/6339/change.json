{"project":"joyent/illumos-joyent","branch":"master","id":"Ibc37b38f8fdf93069034adc55ecc3fae8f6fd639","number":"6339","subject":"OS-7805 add smartos-specific zfs-test fixes Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Approved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e","owner":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"url":"https://cr.joyent.us/6339","commitMessage":"OS-7805 add smartos-specific zfs-test fixes\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1558467493,"lastUpdated":1560975043,"open":false,"status":"MERGED","comments":[{"timestamp":1558467493,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 1."},{"timestamp":1558467523,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 1:\n\nThis isn\u0027t ready for review yet. I just uploaded a rev to get this out of my sandbox for now."},{"timestamp":1560967399,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 2."},{"timestamp":1560970460,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\n(3 comments)\n\nlooks good modulo a few copyright questions"},{"timestamp":1560970806,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 3."},{"timestamp":1560970863,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 2:\n\nThanks Jerry. I must have forgotten to remove copyright lines from changed files that actually didn\u0027t need fixing."},{"timestamp":1560972128,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1560974840,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1560975016,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1560975043,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Kody A Kantor"}],"currentPatchSet":{"number":"5","revision":"bc37b38f8fdf93069034adc55ecc3fae8f6fd639","parents":["6040a68c1ef27209fe7cd5dfd799ddfa5f11a701"],"ref":"refs/changes/39/6339/5","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1560975016,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1560972128,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1560972128,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1560975043,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/test/zfs-tests/cmd/scripts/zfstest.ksh","type":"MODIFIED","insertions":12,"deletions":-12},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":260,"deletions":-17},{"file":"usr/src/test/zfs-tests/tests/functional/alloc_class/alloc_class.cfg","type":"MODIFIED","insertions":7,"deletions":-7},{"file":"usr/src/test/zfs-tests/tests/functional/alloc_class/alloc_class_009_pos.ksh","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/mmp/mmp.cfg","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/test/zfs-tests/tests/functional/nopwrite/nopwrite_sync.ksh","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":286,"sizeDeletions":-42},"patchSets":[{"number":"1","revision":"665824c000f26961fed089bab4b0c34d29ba27f2","parents":["84af6eface8c46fc41fa613c296cde40e03d557b"],"ref":"refs/changes/39/6339/1","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1558467493,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/test/zfs-tests/cmd/scripts/zfstest.ksh","type":"MODIFIED","insertions":11,"deletions":-11},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":260,"deletions":-15},{"file":"usr/src/test/zfs-tests/tests/functional/alloc_class/alloc_class.cfg","type":"MODIFIED","insertions":7,"deletions":-7},{"file":"usr/src/test/zfs-tests/tests/functional/alloc_class/alloc_class_009_pos.ksh","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/bootfs/bootfs_005_neg.ksh","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool/zpool_002_pos.ksh","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/test/zfs-tests/tests/functional/mmp/mmp.cfg","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/test/zfs-tests/tests/functional/nopwrite/nopwrite_sync.ksh","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":287,"sizeDeletions":-39},{"number":"2","revision":"2908c9efc8a0b3ff7add1c5c37033d6c9a1317d2","parents":["f8f6faa3a1f8b695cb68dbbb37c24f72b6973d4e"],"ref":"refs/changes/39/6339/2","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1560967399,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/test/zfs-tests/cmd/scripts/zfstest.ksh","line":18,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"update year"},{"file":"usr/src/test/zfs-tests/tests/functional/bootfs/bootfs_005_neg.ksh","line":30,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"was this file actually modified? Do we need the copyright update?"},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool/zpool_002_pos.ksh","line":30,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"needed?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/test/zfs-tests/cmd/scripts/zfstest.ksh","type":"MODIFIED","insertions":11,"deletions":-11},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":260,"deletions":-17},{"file":"usr/src/test/zfs-tests/tests/functional/alloc_class/alloc_class.cfg","type":"MODIFIED","insertions":7,"deletions":-7},{"file":"usr/src/test/zfs-tests/tests/functional/alloc_class/alloc_class_009_pos.ksh","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/bootfs/bootfs_005_neg.ksh","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool/zpool_002_pos.ksh","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/test/zfs-tests/tests/functional/mmp/mmp.cfg","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/test/zfs-tests/tests/functional/nopwrite/nopwrite_sync.ksh","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":287,"sizeDeletions":-41},{"number":"3","revision":"e51394eb75140036dc027b48560b10d2a23a6899","parents":["f8f6faa3a1f8b695cb68dbbb37c24f72b6973d4e"],"ref":"refs/changes/39/6339/3","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1560970806,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1560972128,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1560972128,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/test/zfs-tests/cmd/scripts/zfstest.ksh","type":"MODIFIED","insertions":12,"deletions":-12},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":260,"deletions":-17},{"file":"usr/src/test/zfs-tests/tests/functional/alloc_class/alloc_class.cfg","type":"MODIFIED","insertions":7,"deletions":-7},{"file":"usr/src/test/zfs-tests/tests/functional/alloc_class/alloc_class_009_pos.ksh","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/mmp/mmp.cfg","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/test/zfs-tests/tests/functional/nopwrite/nopwrite_sync.ksh","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":286,"sizeDeletions":-42},{"number":"4","revision":"1c9e8936d9f5717a98ca6e4750a3ab00dd191b26","parents":["6040a68c1ef27209fe7cd5dfd799ddfa5f11a701"],"ref":"refs/changes/39/6339/4","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1560974840,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1560972128,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1560972128,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/test/zfs-tests/cmd/scripts/zfstest.ksh","type":"MODIFIED","insertions":12,"deletions":-12},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":260,"deletions":-17},{"file":"usr/src/test/zfs-tests/tests/functional/alloc_class/alloc_class.cfg","type":"MODIFIED","insertions":7,"deletions":-7},{"file":"usr/src/test/zfs-tests/tests/functional/alloc_class/alloc_class_009_pos.ksh","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/mmp/mmp.cfg","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/test/zfs-tests/tests/functional/nopwrite/nopwrite_sync.ksh","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":286,"sizeDeletions":-42},{"number":"5","revision":"bc37b38f8fdf93069034adc55ecc3fae8f6fd639","parents":["6040a68c1ef27209fe7cd5dfd799ddfa5f11a701"],"ref":"refs/changes/39/6339/5","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1560975016,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1560972128,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1560972128,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1560975043,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/test/zfs-tests/cmd/scripts/zfstest.ksh","type":"MODIFIED","insertions":12,"deletions":-12},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":260,"deletions":-17},{"file":"usr/src/test/zfs-tests/tests/functional/alloc_class/alloc_class.cfg","type":"MODIFIED","insertions":7,"deletions":-7},{"file":"usr/src/test/zfs-tests/tests/functional/alloc_class/alloc_class_009_pos.ksh","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/mmp/mmp.cfg","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/test/zfs-tests/tests/functional/nopwrite/nopwrite_sync.ksh","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":286,"sizeDeletions":-42}],"allReviewers":[{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}]}