From 051df89df9bf815914a681b2026e572a2e22d076 Mon Sep 17 00:00:00 2001
From: John Levon <john.levon@joyent.com>
Date: Thu, 27 Sep 2018 15:22:34 +0000
Subject: [PATCH] OS-7225 KVM tries to include wrong kvm_para.h

---
 qemu-kvm-x86.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/qemu-kvm-x86.c b/qemu-kvm-x86.c
index ed1aaab..26cbb53 100644
--- a/qemu-kvm-x86.c
+++ b/qemu-kvm-x86.c
@@ -22,8 +22,12 @@
 #include <pthread.h>
 #include <sys/utsname.h>
 #ifdef CONFIG_KVM_PARA
+#ifdef __sun__
+#include <sys/kvm_para.h>
+#else
 #include <linux/kvm_para.h>
 #endif
+#endif
 #include <sys/ioctl.h>
 
 #include "kvm.h"
-- 
2.21.0

