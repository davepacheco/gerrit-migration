From b0d84d1f1f30343785f5bba5324ffe23d803ef81 Mon Sep 17 00:00:00 2001
From: Brittany Wald <brittany.wald@joyent.com>
Date: Tue, 15 Aug 2017 21:38:59 +0000
Subject: [PATCH] MANTA-3279 node-fash loads the whole leveldb hash ring into
 memory

---
 boot/setup.sh | 4 ++--
 package.json  | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/boot/setup.sh b/boot/setup.sh
index 4d6a589..b48f280 100755
--- a/boot/setup.sh
+++ b/boot/setup.sh
@@ -102,8 +102,8 @@ function manta_setup_leveldb_hash_ring {
     do
         cp -R $leveldb_ring $dir
         [[ $? -eq 0 ]] || fatal "unable to setup leveldb"
-        # test with get_node on the newly created ring
-        $FASH get_node -l $dir -b leveldb yunong
+        # test with get-node on the newly created ring
+        $FASH get-node -l $dir -b leveldb yunong
         [[ $? -eq 0 ]] || fatal "unable to setup leveldb"
     done
     ZFS_SNAPSHOT=$ZFS_DATASET@$(date +%s)000
diff --git a/package.json b/package.json
index c7bb04d..34c5320 100644
--- a/package.json
+++ b/package.json
@@ -14,7 +14,7 @@
         "bunyan-syslog": "0.2.2",
         "clone": "0.1.9",
         "dtrace-provider": "0.2.8",
-        "fash": "2.3.0",
+        "fash": "2.4.0",
         "fast": "0.3.8",
         "ldapjs": "0.6.3",
         "imgapi-cli": "git+https://github.com/joyent/sdc-imgapi-cli.git#db3efc1",
-- 
2.21.0

