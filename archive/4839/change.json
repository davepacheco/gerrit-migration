{"project":"joyent/node-vmadm","branch":"master","id":"I5f87a87b2f6f96478e10d00a0197193fb75c48ab","number":"4839","subject":"TRITON-717 node-vmadm should have dummy backend Reviewed by: Chris Burroughs \u003cchris.burroughs@joyent.com\u003e Approved by: Chris Burroughs \u003cchris.burroughs@joyent.com\u003e","owner":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"url":"https://cr.joyent.us/4839","commitMessage":"TRITON-717 node-vmadm should have dummy backend\nReviewed by: Chris Burroughs \u003cchris.burroughs@joyent.com\u003e\nApproved by: Chris Burroughs \u003cchris.burroughs@joyent.com\u003e\n","createdOn":1536885845,"lastUpdated":1537216191,"open":false,"status":"MERGED","comments":[{"timestamp":1536885845,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 1."},{"timestamp":1536885846,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit c2d11272740482c85ccd71feec924915cf13f35e\n    \n    fix tests\n    \n    commit 23fc92ee2d1b48500201609efbc192d206f5cdde\n    \n    updates for allowing sysinfo not to be passed in\n    \n    commit 9b974955525cc9712aeefc7044ea8b4211b5a4ad\n    \n    typo\n    \n    commit 1ef52f231d4509b7f5fc111ca40aa398e483bc49\n    \n    fix vmadm.events\n    \n    commit 9cabb97dda28f0de53db1d63af29114116240a52\n    \n    implement vmadm.update for properties net-agent cares about\n    \n    commit 6b79a673f5f51f6a762cee62b2824082204e15d2\n    \n    attempt to reduce delta from objects-1 branch\n    \n    commit d50ddf917161bdff3d3395267aa4205b798283d2\n    \n    bump version to see if that works around npm silliness\n    \n    commit f6f7ae91abfe759069f0311018dbf996403305d4\n    \n    add make test\n    \n    commit 9fe4abc3290edcbb423f070a61a4c47e8b30bdf9\n    \n    first attempt to merge in some of the work Chris did in the objects-1 branch\n    \n    commit 88333cd27880e4a399239dd1b7c2113e46b3b49b\n    \n    with this, create, start, stop, delete all work.\n    \n    commit 32e780d4e16c61027a1d7b5e81c96d348a0f9879\n    \n    npm really sucks\n    \n    commit 84f857323f9ffcff51fac2ca1bea039f0fd415b4\n    \n    add current dummy from net-agent"},{"timestamp":1536885864,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n node node_modules/.bin/eslint  lib/index.dummy.js lib/index.js lib/diff.js lib/index.sunos.js test/unit/dummy.test.js test/unit/testutil.js\n \n /tmp/repo/node_modules/eslint/bin/eslint.js:16\n const useStdIn \u003d (process.argv.indexOf(\"--stdin\") \u003e -1),\n ^^^^^\n SyntaxError: Use of const in strict mode.\n     at Module._compile (module.js:439:25)\n     at Object.Module._extensions..js (module.js:474:10)\n     at Module.load (module.js:356:32)\n     at Function.Module._load (module.js:312:12)\n     at Function.Module.runMain (module.js:497:10)\n     at startup (node.js:119:16)\n     at node.js:945:3\n tools/mk/Makefile.targ:201: recipe for target \u0027check-eslint\u0027 failed\n gmake: *** [check-eslint] Error 8"},{"timestamp":1536885960,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 1:\n\nNote that this includes both my work and a merged version of the work Chris Burroughs did in the objects-1 branch."},{"timestamp":1536886012,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 1:\n\nAlso note, despite the bot being silly (I assume it\u0027s just got an ancient node version) this does pass `make check`."},{"timestamp":1536886077,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 2."},{"timestamp":1536886078,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit b32129cab53c0e375737dcceb15695a514098bd5\n    \n    we don\u0027t need a new major version any more"},{"timestamp":1536886095,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n node node_modules/.bin/eslint  lib/index.js lib/index.sunos.js lib/index.dummy.js lib/diff.js test/unit/testutil.js test/unit/dummy.test.js\n \n /tmp/repo/node_modules/eslint/bin/eslint.js:16\n const useStdIn \u003d (process.argv.indexOf(\"--stdin\") \u003e -1),\n ^^^^^\n SyntaxError: Use of const in strict mode.\n     at Module._compile (module.js:439:25)\n     at Object.Module._extensions..js (module.js:474:10)\n     at Module.load (module.js:356:32)\n     at Function.Module._load (module.js:312:12)\n     at Function.Module.runMain (module.js:497:10)\n     at startup (node.js:119:16)\n     at node.js:945:3\n tools/mk/Makefile.targ:201: recipe for target \u0027check-eslint\u0027 failed\n gmake: *** [check-eslint] Error 8"},{"timestamp":1536886892,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 3."},{"timestamp":1536886893,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit f988d6a10a8cfcb7bcc4c7d54dc3dba05fdd4180\n    \n    add note about where diff.js came from"},{"timestamp":1536886907,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n node node_modules/.bin/eslint  lib/index.js lib/index.sunos.js lib/index.dummy.js lib/diff.js test/unit/dummy.test.js test/unit/testutil.js\n \n /tmp/repo/node_modules/eslint/bin/eslint.js:16\n const useStdIn \u003d (process.argv.indexOf(\"--stdin\") \u003e -1),\n ^^^^^\n SyntaxError: Use of const in strict mode.\n     at Module._compile (module.js:439:25)\n     at Object.Module._extensions..js (module.js:474:10)\n     at Module.load (module.js:356:32)\n     at Function.Module._load (module.js:312:12)\n     at Function.Module.runMain (module.js:497:10)\n     at startup (node.js:119:16)\n     at node.js:945:3\n tools/mk/Makefile.targ:201: recipe for target \u0027check-eslint\u0027 failed\n gmake: *** [check-eslint] Error 8"},{"timestamp":1536947861,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3:\n\n(3 comments)"},{"timestamp":1536949614,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 4."},{"timestamp":1536949615,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit ccee9e38f9cbbc06fcae9de40458e289cfea5db7\n    \n    I had previously run make check before changing this comment, now fixed. Also addressed CR feedback."},{"timestamp":1536949628,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n node node_modules/.bin/eslint  lib/index.sunos.js lib/index.js lib/index.dummy.js lib/diff.js test/unit/testutil.js test/unit/dummy.test.js\n \n /tmp/repo/node_modules/eslint/bin/eslint.js:16\n const useStdIn \u003d (process.argv.indexOf(\"--stdin\") \u003e -1),\n ^^^^^\n SyntaxError: Use of const in strict mode.\n     at Module._compile (module.js:439:25)\n     at Object.Module._extensions..js (module.js:474:10)\n     at Module.load (module.js:356:32)\n     at Function.Module._load (module.js:312:12)\n     at Function.Module.runMain (module.js:497:10)\n     at startup (node.js:119:16)\n     at node.js:945:3\n tools/mk/Makefile.targ:201: recipe for target \u0027check-eslint\u0027 failed\n gmake: *** [check-eslint] Error 8"},{"timestamp":1536949788,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 3:\n\n(3 comments)"},{"timestamp":1536957006,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Patch Set 4:\n\n(4 comments)\n\nDealing with all the payload/ip cases is, as you put it, a mess.  The code looks straightforward but I don\u0027t have nearly enough context to know how it\u0027s \u0027supposed\u0027 to work.  Is there any part of handleIpsMess/rebuildNics you would like a look at in particular?"},{"timestamp":1536959984,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 5."},{"timestamp":1536959985,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit b88b49ae18a067f9fceea400d78b8407b658a079\n    \n    address review feedback\n    \n    commit 0d506185cb4d0f67eacc2c7e88b94989432002c7\n    \n    catch parse error to handle case where VM is deleted while loading"},{"timestamp":1536959994,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 4:\n\n(4 comments)"},{"timestamp":1536959997,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n node node_modules/.bin/eslint  lib/diff.js lib/index.dummy.js lib/index.js lib/index.sunos.js test/unit/dummy.test.js test/unit/testutil.js\n \n /tmp/repo/node_modules/eslint/bin/eslint.js:16\n const useStdIn \u003d (process.argv.indexOf(\"--stdin\") \u003e -1),\n ^^^^^\n SyntaxError: Use of const in strict mode.\n     at Module._compile (module.js:439:25)\n     at Object.Module._extensions..js (module.js:474:10)\n     at Module.load (module.js:356:32)\n     at Function.Module._load (module.js:312:12)\n     at Function.Module.runMain (module.js:497:10)\n     at startup (node.js:119:16)\n     at node.js:945:3\n tools/mk/Makefile.targ:201: recipe for target \u0027check-eslint\u0027 failed\n gmake: *** [check-eslint] Error 8"},{"timestamp":1536960241,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 4:\n\nRe: \"Dealing with all the payload/ip cases is, as you put it, a mess.  The code looks straightforward but I don\u0027t have nearly enough context to know how it\u0027s \u0027supposed\u0027 to work.  Is there any part of handleIpsMess/rebuildNics you would like a look at in particular?\"\n\nI don\u0027t really know how to make it better right now. I think I\u0027m not a huge fan of the fact that we have both ips and ip, and gateway and gateways now.  If it were up to me, we\u0027d just only support one IP per interface. But that doesn\u0027t seem like something we can roll back, so... It\u0027s probably just going to remain messy. It could get slightly less messy if someday, decades from now, we\u0027re able to finally remove the ip and gateway fields so we just have ips and gateways."},{"timestamp":1537216028,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1\n\nUnderstood  re messyness:-(\n\nIt\u0027s not obvious to me what\u0027s up with the make-check bot, but otherwise I think this looks good. Since we talked about the signature and I wrote the tests I have myself to blame if there is a surprises for my vm-agent work."},{"timestamp":1537216149,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1537216191,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Josh Wilsdon"}],"currentPatchSet":{"number":"6","revision":"5f87a87b2f6f96478e10d00a0197193fb75c48ab","parents":["c17114ab3b1d36a6c889f8ada9d50949094e2b60"],"ref":"refs/changes/39/4839/6","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1537216149,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1536959997,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1537216028,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1537216028,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}},{"type":"SUBM","value":"1","grantedOn":1537216191,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":34,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":7,"deletions":-5},{"file":".gitmodules","type":"DELETED","insertions":0,"deletions":-9},{"file":".nycrc","type":"ADDED","insertions":18,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":46,"deletions":-9},{"file":"deps/javascriptlint","type":"DELETED","insertions":0,"deletions":-1},{"file":"deps/jsstyle","type":"DELETED","insertions":0,"deletions":-1},{"file":"lib/diff.js","type":"ADDED","insertions":521,"deletions":0},{"file":"lib/index.dummy.js","type":"ADDED","insertions":1404,"deletions":0},{"file":"lib/index.sunos.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":19,"deletions":-4},{"file":"test/unit/dummy.test.js","type":"ADDED","insertions":430,"deletions":0},{"file":"test/unit/testutil.js","type":"ADDED","insertions":33,"deletions":0},{"file":"tools/jsl.node.conf","type":"DELETED","insertions":0,"deletions":-139},{"file":"tools/jsl.web.conf","type":"DELETED","insertions":0,"deletions":-137},{"file":"tools/jsstyle.conf","type":"DELETED","insertions":0,"deletions":-14},{"file":"tools/mk/Makefile.defs","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":34,"deletions":-1},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"tools/mkrepo","type":"DELETED","insertions":0,"deletions":-121},{"file":"tools/service_bundle.dtd.1","type":"DELETED","insertions":0,"deletions":-1091}],"sizeInsertions":2670,"sizeDeletions":-1537},"patchSets":[{"number":"1","revision":"e3c5f1dd414e36fb696de57086b2272058387edd","parents":["c17114ab3b1d36a6c889f8ada9d50949094e2b60"],"ref":"refs/changes/39/4839/1","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1536885845,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1536885864,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":34,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":7,"deletions":-5},{"file":".gitmodules","type":"MODIFIED","insertions":0,"deletions":-6},{"file":".nycrc","type":"ADDED","insertions":18,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":46,"deletions":-9},{"file":"deps/javascriptlint","type":"DELETED","insertions":0,"deletions":-1},{"file":"deps/jsstyle","type":"DELETED","insertions":0,"deletions":-1},{"file":"lib/diff.js","type":"ADDED","insertions":506,"deletions":0},{"file":"lib/index.dummy.js","type":"ADDED","insertions":1390,"deletions":0},{"file":"lib/index.sunos.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":19,"deletions":-4},{"file":"test/unit/dummy.test.js","type":"ADDED","insertions":436,"deletions":0},{"file":"test/unit/testutil.js","type":"ADDED","insertions":33,"deletions":0},{"file":"tools/jsl.node.conf","type":"DELETED","insertions":0,"deletions":-139},{"file":"tools/jsl.web.conf","type":"DELETED","insertions":0,"deletions":-137},{"file":"tools/jsstyle.conf","type":"DELETED","insertions":0,"deletions":-14},{"file":"tools/mk/Makefile.defs","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":34,"deletions":-1},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"tools/mkrepo","type":"DELETED","insertions":0,"deletions":-121},{"file":"tools/service_bundle.dtd.1","type":"DELETED","insertions":0,"deletions":-1091}],"sizeInsertions":2647,"sizeDeletions":-1534},{"number":"2","revision":"b4be2af3c4230c14566da57cce6e0f877b41c8f5","parents":["c17114ab3b1d36a6c889f8ada9d50949094e2b60"],"ref":"refs/changes/39/4839/2","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1536886077,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1536886095,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":34,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":7,"deletions":-5},{"file":".gitmodules","type":"MODIFIED","insertions":0,"deletions":-6},{"file":".nycrc","type":"ADDED","insertions":18,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":46,"deletions":-9},{"file":"deps/javascriptlint","type":"DELETED","insertions":0,"deletions":-1},{"file":"deps/jsstyle","type":"DELETED","insertions":0,"deletions":-1},{"file":"lib/diff.js","type":"ADDED","insertions":506,"deletions":0},{"file":"lib/index.dummy.js","type":"ADDED","insertions":1390,"deletions":0},{"file":"lib/index.sunos.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":19,"deletions":-4},{"file":"test/unit/dummy.test.js","type":"ADDED","insertions":436,"deletions":0},{"file":"test/unit/testutil.js","type":"ADDED","insertions":33,"deletions":0},{"file":"tools/jsl.node.conf","type":"DELETED","insertions":0,"deletions":-139},{"file":"tools/jsl.web.conf","type":"DELETED","insertions":0,"deletions":-137},{"file":"tools/jsstyle.conf","type":"DELETED","insertions":0,"deletions":-14},{"file":"tools/mk/Makefile.defs","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":34,"deletions":-1},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"tools/mkrepo","type":"DELETED","insertions":0,"deletions":-121},{"file":"tools/service_bundle.dtd.1","type":"DELETED","insertions":0,"deletions":-1091}],"sizeInsertions":2647,"sizeDeletions":-1534},{"number":"3","revision":"170c1c81388630ab7f5a165039697d85e393fa45","parents":["c17114ab3b1d36a6c889f8ada9d50949094e2b60"],"ref":"refs/changes/39/4839/3","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1536886892,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1536886907,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":".gitmodules","line":2,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"could probably ditch this as well. I don\u0027t think restdown is being used."},{"file":".gitmodules","line":2,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Yep, looks like it. Yay!"},{"file":"Makefile","line":57,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"nit: could ditch this part if you like"},{"file":"Makefile","line":57,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"less is more! Except when it\u0027s not."},{"file":"package.json","line":17,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"range?"},{"file":"package.json","line":17,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Nice catch. That came from the merge and I\u0027ll fix it."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":34,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":7,"deletions":-5},{"file":".gitmodules","type":"MODIFIED","insertions":0,"deletions":-6},{"file":".nycrc","type":"ADDED","insertions":18,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":46,"deletions":-9},{"file":"deps/javascriptlint","type":"DELETED","insertions":0,"deletions":-1},{"file":"deps/jsstyle","type":"DELETED","insertions":0,"deletions":-1},{"file":"lib/diff.js","type":"ADDED","insertions":518,"deletions":0},{"file":"lib/index.dummy.js","type":"ADDED","insertions":1390,"deletions":0},{"file":"lib/index.sunos.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":19,"deletions":-4},{"file":"test/unit/dummy.test.js","type":"ADDED","insertions":436,"deletions":0},{"file":"test/unit/testutil.js","type":"ADDED","insertions":33,"deletions":0},{"file":"tools/jsl.node.conf","type":"DELETED","insertions":0,"deletions":-139},{"file":"tools/jsl.web.conf","type":"DELETED","insertions":0,"deletions":-137},{"file":"tools/jsstyle.conf","type":"DELETED","insertions":0,"deletions":-14},{"file":"tools/mk/Makefile.defs","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":34,"deletions":-1},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"tools/mkrepo","type":"DELETED","insertions":0,"deletions":-121},{"file":"tools/service_bundle.dtd.1","type":"DELETED","insertions":0,"deletions":-1091}],"sizeInsertions":2659,"sizeDeletions":-1534},{"number":"4","revision":"abb1fceb5fe863752166ca09a7951206ec7dbada","parents":["c17114ab3b1d36a6c889f8ada9d50949094e2b60"],"ref":"refs/changes/39/4839/4","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1536949614,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1536949628,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/unit/dummy.test.js","line":246,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"I know I wrote this, is the answer obvious?"},{"file":"test/unit/dummy.test.js","line":246,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"in VM.js, vmadm.create just returns an info object that has:\n\n    {\n        uuid: \u003cuuid\u003e,\n        zonename: \u003czonename\u003e\n    }\n\nThe sunos/smartos driver for node-vmadm returns only:\n\n    {\n        uuid: \u003cuuid\u003e\n    }\n\nand so does the dummy driver. So really the initial state isn\u0027t ever here (which I assume is why we\u0027re checking notEqual(undefined, \u0027stopped\u0027) here.... Though I think I\u0027ll just remove this check since it\u0027s misleading.\n\nAs for the initial state itself, in general the expected state after vmadm.create will depend on the \"autoboot\" flag in the payload. If not set, or set to true (the default), the VM should be booted when created. If set to false, the VM should not be booted when created. In the vmadm.create() function for the dummy backend, we\u0027re currently hardcoding to true. I will modify the code here so that we pass in autoboot: true, which should mean we\u0027re always going to have a running VM when the vmadm.create returns successfully. Even when autoboot\u003dfalse is implemented."},{"file":"test/unit/dummy.test.js","line":294,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"I think this todo line can die."},{"file":"test/unit/dummy.test.js","line":294,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Done"},{"file":"test/unit/dummy.test.js","line":310,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Probably don\u0027t need to keep this block either."},{"file":"test/unit/dummy.test.js","line":310,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Done"},{"file":"test/unit/dummy.test.js","line":367,"reviewer":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},"message":"Thanks for writing this out!"},{"file":"test/unit/dummy.test.js","line":367,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"no problem!"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":34,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":7,"deletions":-5},{"file":".gitmodules","type":"DELETED","insertions":0,"deletions":-9},{"file":".nycrc","type":"ADDED","insertions":18,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":46,"deletions":-9},{"file":"deps/javascriptlint","type":"DELETED","insertions":0,"deletions":-1},{"file":"deps/jsstyle","type":"DELETED","insertions":0,"deletions":-1},{"file":"lib/diff.js","type":"ADDED","insertions":521,"deletions":0},{"file":"lib/index.dummy.js","type":"ADDED","insertions":1390,"deletions":0},{"file":"lib/index.sunos.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":19,"deletions":-4},{"file":"test/unit/dummy.test.js","type":"ADDED","insertions":436,"deletions":0},{"file":"test/unit/testutil.js","type":"ADDED","insertions":33,"deletions":0},{"file":"tools/jsl.node.conf","type":"DELETED","insertions":0,"deletions":-139},{"file":"tools/jsl.web.conf","type":"DELETED","insertions":0,"deletions":-137},{"file":"tools/jsstyle.conf","type":"DELETED","insertions":0,"deletions":-14},{"file":"tools/mk/Makefile.defs","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":34,"deletions":-1},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"tools/mkrepo","type":"DELETED","insertions":0,"deletions":-121},{"file":"tools/service_bundle.dtd.1","type":"DELETED","insertions":0,"deletions":-1091}],"sizeInsertions":2662,"sizeDeletions":-1537},{"number":"5","revision":"496ac09f9e1056edda44104245d9210ef2e480dc","parents":["c17114ab3b1d36a6c889f8ada9d50949094e2b60"],"ref":"refs/changes/39/4839/5","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1536959984,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1536959997,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1537216028,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1537216028,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":34,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":7,"deletions":-5},{"file":".gitmodules","type":"DELETED","insertions":0,"deletions":-9},{"file":".nycrc","type":"ADDED","insertions":18,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":46,"deletions":-9},{"file":"deps/javascriptlint","type":"DELETED","insertions":0,"deletions":-1},{"file":"deps/jsstyle","type":"DELETED","insertions":0,"deletions":-1},{"file":"lib/diff.js","type":"ADDED","insertions":521,"deletions":0},{"file":"lib/index.dummy.js","type":"ADDED","insertions":1404,"deletions":0},{"file":"lib/index.sunos.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":19,"deletions":-4},{"file":"test/unit/dummy.test.js","type":"ADDED","insertions":430,"deletions":0},{"file":"test/unit/testutil.js","type":"ADDED","insertions":33,"deletions":0},{"file":"tools/jsl.node.conf","type":"DELETED","insertions":0,"deletions":-139},{"file":"tools/jsl.web.conf","type":"DELETED","insertions":0,"deletions":-137},{"file":"tools/jsstyle.conf","type":"DELETED","insertions":0,"deletions":-14},{"file":"tools/mk/Makefile.defs","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":34,"deletions":-1},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"tools/mkrepo","type":"DELETED","insertions":0,"deletions":-121},{"file":"tools/service_bundle.dtd.1","type":"DELETED","insertions":0,"deletions":-1091}],"sizeInsertions":2670,"sizeDeletions":-1537},{"number":"6","revision":"5f87a87b2f6f96478e10d00a0197193fb75c48ab","parents":["c17114ab3b1d36a6c889f8ada9d50949094e2b60"],"ref":"refs/changes/39/4839/6","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1537216149,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1536959997,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1537216191,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1537216028,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1537216028,"by":{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":34,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":7,"deletions":-5},{"file":".gitmodules","type":"DELETED","insertions":0,"deletions":-9},{"file":".nycrc","type":"ADDED","insertions":18,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":46,"deletions":-9},{"file":"deps/javascriptlint","type":"DELETED","insertions":0,"deletions":-1},{"file":"deps/jsstyle","type":"DELETED","insertions":0,"deletions":-1},{"file":"lib/diff.js","type":"ADDED","insertions":521,"deletions":0},{"file":"lib/index.dummy.js","type":"ADDED","insertions":1404,"deletions":0},{"file":"lib/index.sunos.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":19,"deletions":-4},{"file":"test/unit/dummy.test.js","type":"ADDED","insertions":430,"deletions":0},{"file":"test/unit/testutil.js","type":"ADDED","insertions":33,"deletions":0},{"file":"tools/jsl.node.conf","type":"DELETED","insertions":0,"deletions":-139},{"file":"tools/jsl.web.conf","type":"DELETED","insertions":0,"deletions":-137},{"file":"tools/jsstyle.conf","type":"DELETED","insertions":0,"deletions":-14},{"file":"tools/mk/Makefile.defs","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":34,"deletions":-1},{"file":"tools/mk/Makefile.node_modules.defs","type":"ADDED","insertions":68,"deletions":0},{"file":"tools/mk/Makefile.node_modules.targ","type":"ADDED","insertions":31,"deletions":0},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"tools/mkrepo","type":"DELETED","insertions":0,"deletions":-121},{"file":"tools/service_bundle.dtd.1","type":"DELETED","insertions":0,"deletions":-1091}],"sizeInsertions":2670,"sizeDeletions":-1537}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}]}