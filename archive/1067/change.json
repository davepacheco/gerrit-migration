{"project":"joyent/illumos-joyent","branch":"master","id":"I060157c37b10d81a8a264aeb85849663571caa8b","number":"1067","subject":"OS-5834 procfs t_hold updates can race against target thread Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Approved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e","owner":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"url":"https://cr.joyent.us/1067","commitMessage":"OS-5834 procfs t_hold updates can race against target thread\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1480983626,"lastUpdated":1481223063,"open":false,"status":"MERGED","comments":[{"timestamp":1480983626,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 1."},{"timestamp":1481031257,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\nThe code itself looks fine but it is not clear to me exactly how this fixes the bug. Can you provide an evaluation in the bug report that clarifies how this fixes things and maybe add some comments in the code to highlight the problem the new code fixes."},{"timestamp":1481043360,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 2."},{"timestamp":1481044946,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1481068797,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1481222807,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 3: Patch Set 2 was rebased."},{"timestamp":1481222909,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1481223063,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Patrick Mooney"}],"currentPatchSet":{"number":"4","revision":"060157c37b10d81a8a264aeb85849663571caa8b","parents":["86f957b799cae7673d761ef1dbe931b78801e73b"],"ref":"refs/changes/67/1067/4","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1481222909,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481044946,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1481044946,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481068797,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1481223063,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/fs/proc/prdata.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":11,"deletions":-32},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":26,"deletions":-6},{"file":"usr/src/uts/common/os/schedctl.c","type":"MODIFIED","insertions":12,"deletions":-6}],"sizeInsertions":51,"sizeDeletions":-45},"patchSets":[{"number":"1","revision":"7a7d6d41940536e0dfd4185247a46f94d9ef9644","parents":["2856f8e8068d0168f37880ebb2e2cec56102522f"],"ref":"refs/changes/67/1067/1","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1480983626,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/fs/proc/prdata.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":11,"deletions":-32},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":18,"deletions":-6},{"file":"usr/src/uts/common/os/schedctl.c","type":"MODIFIED","insertions":12,"deletions":-6}],"sizeInsertions":43,"sizeDeletions":-45},{"number":"2","revision":"24170f2ee205fbc078ae441448f0c1be28be1638","parents":["4d40f408a02b644aa917c5b99fd44bd7ac476254"],"ref":"refs/changes/67/1067/2","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1481043360,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481068797,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481044946,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1481044946,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/fs/proc/prdata.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":11,"deletions":-32},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":26,"deletions":-6},{"file":"usr/src/uts/common/os/schedctl.c","type":"MODIFIED","insertions":12,"deletions":-6}],"sizeInsertions":51,"sizeDeletions":-45},{"number":"3","revision":"a49e13c0e596ca70d6f1773005266d4e68c844a6","parents":["86f957b799cae7673d761ef1dbe931b78801e73b"],"ref":"refs/changes/67/1067/3","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1481222807,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481068797,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481044946,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1481044946,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/fs/proc/prdata.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":11,"deletions":-32},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":26,"deletions":-6},{"file":"usr/src/uts/common/os/schedctl.c","type":"MODIFIED","insertions":12,"deletions":-6}],"sizeInsertions":51,"sizeDeletions":-45},{"number":"4","revision":"060157c37b10d81a8a264aeb85849663571caa8b","parents":["86f957b799cae7673d761ef1dbe931b78801e73b"],"ref":"refs/changes/67/1067/4","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1481222909,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481068797,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481044946,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1481044946,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1481223063,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/fs/proc/prdata.h","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":11,"deletions":-32},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":26,"deletions":-6},{"file":"usr/src/uts/common/os/schedctl.c","type":"MODIFIED","insertions":12,"deletions":-6}],"sizeInsertions":51,"sizeDeletions":-45}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}]}