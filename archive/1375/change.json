{"project":"joyent/illumos-joyent","branch":"master","id":"Id21b3b2e1bbefbd2f6158ed5d329cd58f86677ab","number":"1375","subject":"OS-5926 epoll mishandles excessive timeout negativity Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Reviewed by: Ryan Zezeski \u003cryan.zeseski@joyent.com\u003e Approved by: Ryan Zezeski \u003cryan.zeseski@joyent.com\u003e","owner":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"url":"https://cr.joyent.us/1375","commitMessage":"OS-5926 epoll mishandles excessive timeout negativity\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nReviewed by: Ryan Zezeski \u003cryan.zeseski@joyent.com\u003e\nApproved by: Ryan Zezeski \u003cryan.zeseski@joyent.com\u003e\n","createdOn":1485827094,"lastUpdated":1485895610,"open":false,"status":"MERGED","comments":[{"timestamp":1485827094,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 1."},{"timestamp":1485872635,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1485874728,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1485875797,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1: Code-Review+1\n\n(1 comment)"},{"timestamp":1485877294,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1485877517,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 1: Integration-Approval+1"},{"timestamp":1485892557,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1485894971,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1485895471,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 3:\n\nLTP suites passed in addition to the WIP epoll-test-suite."},{"timestamp":1485895610,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Patrick Mooney"}],"currentPatchSet":{"number":"3","revision":"d21b3b2e1bbefbd2f6158ed5d329cd58f86677ab","parents":["0e21e957f7ee4ef75f79e71f2fd6f09da211893d"],"ref":"refs/changes/75/1375/3","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1485894971,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1485875797,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1485877294,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1485877517,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}},{"type":"SUBM","value":"1","grantedOn":1485895610,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/lib/libc/port/sys/epoll.c","type":"MODIFIED","insertions":12,"deletions":-3},{"file":"usr/src/uts/common/brand/lx/syscall/lx_epoll.c","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":16,"sizeDeletions":-6},"patchSets":[{"number":"1","revision":"7678946fcca62652b72bc530ac56686d355c0816","parents":["33df115038809a05a8856b165fabdb823350567e"],"ref":"refs/changes/75/1375/1","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1485827094,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1485875797,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1485877294,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1485877517,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"comments":[{"file":"usr/src/uts/common/brand/lx/syscall/lx_epoll.c","line":117,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"It might be nice to add a one-line comment referencing the longer comment in libc."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_epoll.c","line":117,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I grouped it with the other #define statements under the comment referring to libc.  If you think that\u0027s inadequate, I can further enhance it."},{"file":"usr/src/uts/common/brand/lx/syscall/lx_epoll.c","line":117,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"ok, that seems fine, thanks"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/libc/port/sys/epoll.c","type":"MODIFIED","insertions":12,"deletions":-3},{"file":"usr/src/uts/common/brand/lx/syscall/lx_epoll.c","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":16,"sizeDeletions":-6},{"number":"2","revision":"7f1c76cdeaaa8c4e0c11622dccd7dc5c1de67104","parents":["0e21e957f7ee4ef75f79e71f2fd6f09da211893d"],"ref":"refs/changes/75/1375/2","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1485892557,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1485875797,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1485877294,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1485877517,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/libc/port/sys/epoll.c","type":"MODIFIED","insertions":12,"deletions":-3},{"file":"usr/src/uts/common/brand/lx/syscall/lx_epoll.c","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":16,"sizeDeletions":-6},{"number":"3","revision":"d21b3b2e1bbefbd2f6158ed5d329cd58f86677ab","parents":["0e21e957f7ee4ef75f79e71f2fd6f09da211893d"],"ref":"refs/changes/75/1375/3","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1485894971,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1485875797,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1485895610,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1485877294,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1485877517,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/lib/libc/port/sys/epoll.c","type":"MODIFIED","insertions":12,"deletions":-3},{"file":"usr/src/uts/common/brand/lx/syscall/lx_epoll.c","type":"MODIFIED","insertions":4,"deletions":-3}],"sizeInsertions":16,"sizeDeletions":-6}],"allReviewers":[{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}]}