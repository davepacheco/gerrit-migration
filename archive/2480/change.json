{"project":"joyent/manta-muskie","branch":"master","id":"I4bb40f43be4941b5778266e7f38aedc5ed3dd630","number":"2480","subject":"MANTA-3367 MPU commit invokes mako-finalize if \"parts\" array is missing Reviewed by: Jordan Hendricks \u003cjordan.hendricks@joyent.com\u003e Approved by: Jordan Hendricks \u003cjordan.hendricks@joyent.com\u003e","owner":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"url":"https://cr.joyent.us/2480","commitMessage":"MANTA-3367 MPU commit invokes mako-finalize if \"parts\" array is missing\nReviewed by: Jordan Hendricks \u003cjordan.hendricks@joyent.com\u003e\nApproved by: Jordan Hendricks \u003cjordan.hendricks@joyent.com\u003e\n","createdOn":1504137638,"lastUpdated":1506971413,"open":false,"status":"MERGED","comments":[{"timestamp":1504137638,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 1."},{"timestamp":1504137673,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1504304257,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 1:\n\n(3 comments)\n\nI left some feedback on the change. Still, as it is now, we don\u0027t use schema validation for the JSON parameters of the MPU API. This means we could run into similar bugs in the future. What do you think about introducing JSON schema validation for this change?"},{"timestamp":1504305196,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1504312056,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 2."},{"timestamp":1504312084,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1504312108,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 2:\n\nWill look into JSON schema validation next week. Do we have libraries to handle it for us that we could just plug into muskie?"},{"timestamp":1504633456,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 2:\n\nI haven\u0027t used either of them, but there are a couple of libraries I know others have used: ajv (https://github.com/epoberezkin/ajv), and jsonschema, which is what node-jsprim uses. Feel free to take a look at both."},{"timestamp":1504658304,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 3."},{"timestamp":1504658333,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1504719079,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 4."},{"timestamp":1504719117,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1504804811,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 4:\n\n(13 comments)\n\nThanks for taking this on! I\u0027m excited to see us using JSON schema validation here.\n\nBroadly, this looks good. I have some questions/comments about the schemas and tests and a few small nitty comments."},{"timestamp":1504894247,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 5."},{"timestamp":1504894269,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 5:\n\n(2 comments)"},{"timestamp":1504894275,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1504909022,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 5:\n\n(2 comments)"},{"timestamp":1504915584,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 5:\n\n(2 comments)"},{"timestamp":1505418218,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1505418450,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 6."},{"timestamp":1505418479,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1505418654,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 7."},{"timestamp":1505418688,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1505922719,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 7: Code-Review+1\n\n(4 comments)\n\nGreat work! I have just a few minor nits, but otherwise this looks good to go."},{"timestamp":1506127454,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 8."},{"timestamp":1506127482,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1506440968,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 8:\n\n(4 comments)"},{"timestamp":1506452315,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 9."},{"timestamp":1506452352,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1506626049,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 9: Code-Review+1"},{"timestamp":1506626265,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 9:\n\nFor IA, I still think we need to have some tests for the schema validation of create-mpu."},{"timestamp":1506720200,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 9:\n\nThe existing test suite exercises all of the validation that the new mpu-create schema provides. The added tests exercises the validation provided by the new mpu-commit schema."},{"timestamp":1506724435,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 9: Integration-Approval+1\n\nLooks good! Thanks for being so thorough."},{"timestamp":1506732146,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 10."},{"timestamp":1506732180,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1506732191,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 10:\n\nHad to rebase this change locally - would appeciate re CR and IA when you can! Thanks."},{"timestamp":1506732268,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 11: Commit message was updated."},{"timestamp":1506965750,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 11: Code-Review+1 Integration-Approval+1"},{"timestamp":1506971364,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 12: Patch Set 11 was rebased"},{"timestamp":1506971368,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jan Wyszynski"},{"timestamp":1506971413,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 12:\n\n\"make check\" passed ok"}],"currentPatchSet":{"number":"12","revision":"4d0ed4ef4d76e3059a3cc3914686e8167708c1dd","parents":["2572f0dd60521c6e9970e6ed19e21bf08f72a466"],"ref":"refs/changes/80/2480/12","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1506971364,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506732180,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506965750,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506965750,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"SUBM","value":"1","grantedOn":1506971368,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":30,"deletions":-3},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":105,"deletions":-92},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/mpu/commit.test.js","type":"MODIFIED","insertions":15,"deletions":0}],"sizeInsertions":165,"sizeDeletions":-96},"patchSets":[{"number":"1","revision":"b2f22007f657804914f4042a10c57d7619927363","parents":["1b6dd87b0d30fa14e046214ab972f87dc57d4cc0"],"ref":"refs/changes/80/2480/1","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1504137638,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1504137673,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/uploads/commit.js","line":226,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"This should be a MultipartUploadCreateError -- otherwise, the `id` field in the format string will be undefined."},{"file":"lib/uploads/commit.js","line":226,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"(Correction: it\u0027s actually the \"msg\" argument that will be undefined, and the \"id\" argument is the message here. I think my point stands. :P )"},{"file":"test/mpu/commit.test.js","line":98,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"The tests here are organized in the file by whether they use valid inputs to the API and those that give bad input. This test should be moved down into the \"bad input\" category."},{"file":"test/mpu/commit.test.js","line":102,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"For other test that test error cases, we first check for the existence of an error. We should probably do that here -- it makes test failures easier to debug if it is easy to nail down exactly what\u0027s wrong -- in this case, we can separate out the failure where the error is undefined versus the error lacking the correct cause in its cause chain."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"test/mpu/commit.test.js","type":"MODIFIED","insertions":35,"deletions":0}],"sizeInsertions":38,"sizeDeletions":-3},{"number":"2","revision":"ed8827f63b09b47b425463ddbe38e1a840d43d39","parents":["1b6dd87b0d30fa14e046214ab972f87dc57d4cc0"],"ref":"refs/changes/80/2480/2","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1504312056,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1504312084,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"test/mpu/commit.test.js","type":"MODIFIED","insertions":40,"deletions":0}],"sizeInsertions":43,"sizeDeletions":-3},{"number":"3","revision":"f2af5db0f3ab7a4a891d409c58acc1af36f2640b","parents":["cecdfce62528af5535e29640b414287860afaf25"],"ref":"refs/changes/80/2480/3","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1504658304,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1504658333,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/audit.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":29,"deletions":0},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":20,"deletions":-1},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":29,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":81,"sizeDeletions":-3},{"number":"4","revision":"5f1d6a86c108e8a1456dd4ec49f4c7690df446fd","parents":["1b6dd87b0d30fa14e046214ab972f87dc57d4cc0"],"ref":"refs/changes/80/2480/4","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1504719079,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1504719117,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/uploads/commit.js","line":37,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Could we also enforce that all parts are strings? Playing around with ajv a bit, it seems the \"items\" keyword works for that."},{"file":"lib/uploads/commit.js","line":41,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"I\u0027m not sure we should enforce this constraint. It seems unlikely that the etags for two parts would ever be the same, but I don\u0027t think there\u0027s anything in the etag spec that would preclude that."},{"file":"lib/uploads/commit.js","line":550,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"The indenting looks off here."},{"file":"lib/uploads/commit.js","line":559,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"What sort of error messages does this expose to the end user?"},{"file":"lib/uploads/commit.js","line":559,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"It will expose any errors that ajv returns if the request body doesn\u0027t pass schema validation. Things like missing properties, or property values out of bounds."},{"file":"lib/uploads/common.js","line":14,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Neat. I\u0027m surprised this isn\u0027t the default behavior for ajv!"},{"file":"lib/uploads/common.js","line":14,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Just for confirmation: https://github.com/epoberezkin/ajv#options"},{"file":"lib/uploads/common.js","line":650,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Should we assert this instead? Not passing in this arg seems like a programmer error."},{"file":"lib/uploads/create.js","line":39,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"As I mentioned for the commit schema, I think we should check the type of the properties on the \"headers\" object and ensure they are all strings. It seems the \"patternProperties\" keyword is suitable to do this with objects. Here\u0027s a similar example, in which all values in the \"index\" object match the \"index\" type: https://github.com/joyent/moray/blob/25c8aea1f723d0b1572315315c270c4713702c97/lib/schema.js#L276-L280."},{"file":"lib/uploads/create.js","line":129,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Indenting off here?"},{"file":"lib/uploads/create.js","line":137,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"At this point, the upload ID isn\u0027t a meaningful ID to the end user, as the upload hasn\u0027t been successfully created. I think it makes sense to use the MultipartUploadCreateError constructor here, which has the same error code as MultipartUploadInvalidArgumentError, but excludes the upload ID from the error message."},{"file":"lib/uploads/create.js","line":160,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"With the introduction of JSON schema validation, some of the code in this function is now obsolete and can be deleted, I think."},{"file":"package.json","line":41,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"nit: move this to alphabetical order?"},{"file":"test/mpu/commit.test.js","line":73,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"I\u0027m confused about this test. It seems to test something unrelated to this change. Was it meant to be added here? Sorry if I\u0027m missing something."},{"file":"test/mpu/commit.test.js","line":785,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"This is great! We should also add tests for the other possible error cases (such as those violating the schema for create-mpu)."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":32,"deletions":-3},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":16,"deletions":-1},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":29,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/mpu/commit.test.js","type":"MODIFIED","insertions":39,"deletions":0}],"sizeInsertions":118,"sizeDeletions":-6},{"number":"5","revision":"f076704e0e9e3bdee9a77dbc3020097b4c0c831c","parents":["1b6dd87b0d30fa14e046214ab972f87dc57d4cc0"],"ref":"refs/changes/80/2480/5","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1504894247,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1504894275,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/uploads/create.js","line":42,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"This isn\u0027t a required parameter, right?"},{"file":"lib/uploads/create.js","line":42,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"This schema doesn\u0027t require it - it just imposes that it is a number and greater than 0 if it is present."},{"file":"lib/uploads/create.js","line":42,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"The test suite checks that the content-length header is \u003e 0 and expects a MultipartInvalidArgumentError so this should be fine."},{"file":"lib/uploads/create.js","line":42,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Great, thanks for explaining."},{"file":"lib/uploads/create.js","line":205,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"This would be a good place to explain in a comment why the validation for this header is done here, and not in the schema (as with content-length)."},{"file":"lib/uploads/create.js","line":205,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Will do"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":30,"deletions":-3},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":101,"deletions":-91},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"test/mpu/commit.test.js","type":"MODIFIED","insertions":15,"deletions":0}],"sizeInsertions":162,"sizeDeletions":-96},{"number":"6","revision":"929dfd76ef34907acd130ae0837a079664df209e","parents":["1b6dd87b0d30fa14e046214ab972f87dc57d4cc0"],"ref":"refs/changes/80/2480/6","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1505418450,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1505418479,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/uploads/create.js","line":207,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line \u003e 80 characters"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":30,"deletions":-3},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":105,"deletions":-91},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"test/mpu/commit.test.js","type":"MODIFIED","insertions":15,"deletions":0}],"sizeInsertions":166,"sizeDeletions":-96},{"number":"7","revision":"165d5091f78b0a542f41adb575963225b6d8f846","parents":["1b6dd87b0d30fa14e046214ab972f87dc57d4cc0"],"ref":"refs/changes/80/2480/7","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1505418654,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505418688,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505922719,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"comments":[{"file":"lib/uploads/commit.js","line":557,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Remove extra indent here?"},{"file":"lib/uploads/create.js","line":208,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"This last bit seems to say the opposite of what\u0027s happening. I think maybe the word \"avoid\" should be removed?"},{"file":"package.json","line":41,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Move these to alphabetical order in the dependency list?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":30,"deletions":-3},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":105,"deletions":-91},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"test/mpu/commit.test.js","type":"MODIFIED","insertions":15,"deletions":0}],"sizeInsertions":166,"sizeDeletions":-96},{"number":"8","revision":"d40fb45839e94703ab6a893297ef198d9fc6677a","parents":["1b6dd87b0d30fa14e046214ab972f87dc57d4cc0"],"ref":"refs/changes/80/2480/8","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1506127454,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506127482,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/uploads/create.js","line":206,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"s/it\u0027s/its"},{"file":"lib/uploads/create.js","line":208,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"I think we can remove the \"(below)\" bit here (it\u0027s implied with the comment above it)."},{"file":"package.json","line":42,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"trailing comma"},{"file":"test/mpu/commit.test.js","line":770,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"extra indent?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":30,"deletions":-3},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":105,"deletions":-91},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"test/mpu/commit.test.js","type":"MODIFIED","insertions":15,"deletions":0}],"sizeInsertions":166,"sizeDeletions":-96},{"number":"9","revision":"e7d0985cc91ae55091312254a1882ccfcf840be2","parents":["1b6dd87b0d30fa14e046214ab972f87dc57d4cc0"],"ref":"refs/changes/80/2480/9","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1506452315,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506452352,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506626049,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506724435,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":30,"deletions":-3},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":105,"deletions":-91},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/mpu/commit.test.js","type":"MODIFIED","insertions":15,"deletions":0}],"sizeInsertions":165,"sizeDeletions":-95},{"number":"10","revision":"4bb40f43be4941b5778266e7f38aedc5ed3dd630","parents":["f0611d48d5a1ed27ef68b927f5c6bfa56b494593"],"ref":"refs/changes/80/2480/10","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1506732146,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506732180,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":30,"deletions":-3},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":105,"deletions":-92},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/mpu/commit.test.js","type":"MODIFIED","insertions":15,"deletions":0}],"sizeInsertions":165,"sizeDeletions":-96},{"number":"11","revision":"c4766247ad41192f53539b8752d21ca569424827","parents":["f0611d48d5a1ed27ef68b927f5c6bfa56b494593"],"ref":"refs/changes/80/2480/11","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1506732268,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506732180,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506965750,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506965750,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":30,"deletions":-3},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":105,"deletions":-92},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/mpu/commit.test.js","type":"MODIFIED","insertions":15,"deletions":0}],"sizeInsertions":165,"sizeDeletions":-96},{"number":"12","revision":"4d0ed4ef4d76e3059a3cc3914686e8167708c1dd","parents":["2572f0dd60521c6e9970e6ed19e21bf08f72a466"],"ref":"refs/changes/80/2480/12","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1506971364,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506732180,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506965750,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506965750,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"SUBM","value":"1","grantedOn":1506971368,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":30,"deletions":-3},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":105,"deletions":-92},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":0},{"file":"test/mpu/commit.test.js","type":"MODIFIED","insertions":15,"deletions":0}],"sizeInsertions":165,"sizeDeletions":-96}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}]}