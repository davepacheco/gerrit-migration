From 1834171f90c9f02379569ab93cff9ed301075d34 Mon Sep 17 00:00:00 2001
From: John Levon <john.levon@joyent.com>
Date: Thu, 11 Jan 2018 23:54:30 +0000
Subject: [PATCH] OS-5796 ::dtrace_options causes mdb to dump core

---
 usr/src/cmd/mdb/common/modules/dtrace/dtrace.c | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/usr/src/cmd/mdb/common/modules/dtrace/dtrace.c b/usr/src/cmd/mdb/common/modules/dtrace/dtrace.c
index 10d23128aa..fdddcfea9b 100644
--- a/usr/src/cmd/mdb/common/modules/dtrace/dtrace.c
+++ b/usr/src/cmd/mdb/common/modules/dtrace/dtrace.c
@@ -2518,9 +2518,16 @@ static struct dtrace_options {
 	{ "aggsortkey", dtrace_options_numtostr },
 	{ "aggsortrev", dtrace_options_numtostr },
 	{ "aggsortpos", dtrace_options_numtostr },
-	{ "aggsortkeypos", dtrace_options_numtostr }
+	{ "aggsortkeypos", dtrace_options_numtostr },
+	{ "temporal", dtrace_options_numtostr },
+	{ "agghist", dtrace_options_numtostr },
+	{ "aggpack", dtrace_options_numtostr },
+	{ "aggzoom", dtrace_options_numtostr },
+	{ "zone", dtrace_options_numtostr }
 };
 
+CTASSERT(ARRAY_SIZE(_dtrace_options) == DTRACEOPT_MAX);
+
 static void
 dtrace_options_help(void)
 {
-- 
2.21.0

