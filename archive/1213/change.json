{"project":"joyent/node-moray","branch":"master","topic":"MORAY-280","id":"I62acd537991c1e63842e8fa2b62f0c316240c31b","number":"1213","subject":"MORAY-280 Support SRV records in node-moray MORAY-381 want default values with cueballOptions MORAY-380 translateLegacyOptions not setting \"service\" MORAY-383 moray client log entries could include specific backend details MORAY-384 moray\u0027s default connec","owner":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"url":"https://cr.joyent.us/1213","commitMessage":"MORAY-280 Support SRV records in node-moray\nMORAY-381 want default values with cueballOptions\nMORAY-380 translateLegacyOptions not setting \"service\"\nMORAY-383 moray client log entries could include specific backend details\nMORAY-384 moray\u0027s default connection backoff need to be much less aggressive\nMORAY-385 moray tools need some cleanup\nMORAY-349 remove \"backfill\" command\nReviewed by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e\nApproved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n","createdOn":1483742888,"lastUpdated":1485472016,"open":false,"status":"MERGED","comments":[{"timestamp":1483742888,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 1."},{"timestamp":1483742901,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Topic set to MORAY-280"},{"timestamp":1483742911,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1484086078,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1: Code-Review+1\n\n(4 comments)"},{"timestamp":1484088402,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\n(4 comments)\n\nThanks for taking a look."},{"timestamp":1484170481,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 2."},{"timestamp":1484170532,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1484170889,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1485468765,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1485472001,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1485472016,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by David Pacheco"}],"currentPatchSet":{"number":"3","revision":"62acd537991c1e63842e8fa2b62f0c316240c31b","parents":["7197c457e7e48a1659e546abe26ae80c32f40447"],"ref":"refs/changes/13/1213/3","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1485472001,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1484170532,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1484170889,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1485468765,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1485472016,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":15,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":23,"deletions":0},{"file":"bin/backfill","type":"DELETED","insertions":0,"deletions":-314},{"file":"bin/delbucket","type":"MODIFIED","insertions":24,"deletions":-93},{"file":"bin/delmany","type":"MODIFIED","insertions":42,"deletions":-105},{"file":"bin/delobject","type":"MODIFIED","insertions":27,"deletions":-103},{"file":"bin/findobjects","type":"MODIFIED","insertions":59,"deletions":-114},{"file":"bin/getbucket","type":"MODIFIED","insertions":24,"deletions":-93},{"file":"bin/getobject","type":"MODIFIED","insertions":41,"deletions":-105},{"file":"bin/gettokens","type":"MODIFIED","insertions":18,"deletions":-88},{"file":"bin/listbuckets","type":"MODIFIED","insertions":18,"deletions":-88},{"file":"bin/morayping","type":"MODIFIED","insertions":26,"deletions":-87},{"file":"bin/morayversion","type":"MODIFIED","insertions":20,"deletions":-93},{"file":"bin/putbucket","type":"MODIFIED","insertions":109,"deletions":-157},{"file":"bin/putobject","type":"MODIFIED","insertions":44,"deletions":-102},{"file":"bin/reindexobjects","type":"MODIFIED","insertions":63,"deletions":-135},{"file":"bin/sql","type":"MODIFIED","insertions":23,"deletions":-98},{"file":"bin/updatemany","type":"MODIFIED","insertions":44,"deletions":-98},{"file":"lib/client.js","type":"MODIFIED","insertions":62,"deletions":-340},{"file":"lib/client_params.js","type":"ADDED","insertions":502,"deletions":0},{"file":"lib/cmd.js","type":"ADDED","insertions":368,"deletions":0},{"file":"lib/pool.js","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":1545,"sizeDeletions":-2219},"patchSets":[{"number":"1","revision":"b9860545bdc2d7479721c2d8b2e7176cbaf59237","parents":["7197c457e7e48a1659e546abe26ae80c32f40447"],"ref":"refs/changes/13/1213/1","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1483742888,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1484086078,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1483742911,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/client_params.js","line":122,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Could these be made bullet points indented to the same column as the paragraphs before and after? The current layout feels odd to read."},{"file":"lib/client_params.js","line":122,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Sure."},{"file":"lib/client_params.js","line":240,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"This is incorrect, since you have to specify both together."},{"file":"lib/client_params.js","line":240,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Good catch.  I will change this to \"neither or both\", if that\u0027s not too confusing."},{"file":"lib/client_params.js","line":299,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Are we able to set this to undefined or null? According to the cueball docs the \"service\" field is optional. What happens if there\u0027s no \"service\" string?"},{"file":"lib/client_params.js","line":299,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Leaving it out causes cueball to use \"_http._tcp\", which will have the same effect because we don\u0027t define that SRV service for Moray, but I wanted to make this more explicit (and also have it continue doing what we want if the default is changed)."},{"file":"lib/client_params.js","line":336,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"This paren needs to be moved to before the comma."},{"file":"lib/client_params.js","line":336,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Thanks.  Will fix."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":13,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":23,"deletions":0},{"file":"bin/backfill","type":"DELETED","insertions":0,"deletions":-314},{"file":"bin/delbucket","type":"MODIFIED","insertions":24,"deletions":-93},{"file":"bin/delmany","type":"MODIFIED","insertions":42,"deletions":-105},{"file":"bin/delobject","type":"MODIFIED","insertions":27,"deletions":-103},{"file":"bin/findobjects","type":"MODIFIED","insertions":59,"deletions":-114},{"file":"bin/getbucket","type":"MODIFIED","insertions":24,"deletions":-93},{"file":"bin/getobject","type":"MODIFIED","insertions":41,"deletions":-105},{"file":"bin/gettokens","type":"MODIFIED","insertions":18,"deletions":-88},{"file":"bin/listbuckets","type":"MODIFIED","insertions":18,"deletions":-88},{"file":"bin/morayping","type":"MODIFIED","insertions":26,"deletions":-87},{"file":"bin/morayversion","type":"MODIFIED","insertions":20,"deletions":-93},{"file":"bin/putbucket","type":"MODIFIED","insertions":109,"deletions":-157},{"file":"bin/putobject","type":"MODIFIED","insertions":44,"deletions":-102},{"file":"bin/reindexobjects","type":"MODIFIED","insertions":63,"deletions":-135},{"file":"bin/sql","type":"MODIFIED","insertions":23,"deletions":-98},{"file":"bin/updatemany","type":"MODIFIED","insertions":44,"deletions":-98},{"file":"lib/client.js","type":"MODIFIED","insertions":62,"deletions":-340},{"file":"lib/client_params.js","type":"ADDED","insertions":504,"deletions":0},{"file":"lib/cmd.js","type":"ADDED","insertions":368,"deletions":0},{"file":"lib/pool.js","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":1547,"sizeDeletions":-2219},{"number":"2","revision":"3fc31d96ce2206e6d7a57976649e0087d9ad78dd","parents":["7197c457e7e48a1659e546abe26ae80c32f40447"],"ref":"refs/changes/13/1213/2","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1484170481,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1484170889,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1484170532,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1485468765,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":13,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":23,"deletions":0},{"file":"bin/backfill","type":"DELETED","insertions":0,"deletions":-314},{"file":"bin/delbucket","type":"MODIFIED","insertions":24,"deletions":-93},{"file":"bin/delmany","type":"MODIFIED","insertions":42,"deletions":-105},{"file":"bin/delobject","type":"MODIFIED","insertions":27,"deletions":-103},{"file":"bin/findobjects","type":"MODIFIED","insertions":59,"deletions":-114},{"file":"bin/getbucket","type":"MODIFIED","insertions":24,"deletions":-93},{"file":"bin/getobject","type":"MODIFIED","insertions":41,"deletions":-105},{"file":"bin/gettokens","type":"MODIFIED","insertions":18,"deletions":-88},{"file":"bin/listbuckets","type":"MODIFIED","insertions":18,"deletions":-88},{"file":"bin/morayping","type":"MODIFIED","insertions":26,"deletions":-87},{"file":"bin/morayversion","type":"MODIFIED","insertions":20,"deletions":-93},{"file":"bin/putbucket","type":"MODIFIED","insertions":109,"deletions":-157},{"file":"bin/putobject","type":"MODIFIED","insertions":44,"deletions":-102},{"file":"bin/reindexobjects","type":"MODIFIED","insertions":63,"deletions":-135},{"file":"bin/sql","type":"MODIFIED","insertions":23,"deletions":-98},{"file":"bin/updatemany","type":"MODIFIED","insertions":44,"deletions":-98},{"file":"lib/client.js","type":"MODIFIED","insertions":62,"deletions":-340},{"file":"lib/client_params.js","type":"ADDED","insertions":502,"deletions":0},{"file":"lib/cmd.js","type":"ADDED","insertions":368,"deletions":0},{"file":"lib/pool.js","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":1545,"sizeDeletions":-2219},{"number":"3","revision":"62acd537991c1e63842e8fa2b62f0c316240c31b","parents":["7197c457e7e48a1659e546abe26ae80c32f40447"],"ref":"refs/changes/13/1213/3","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1485472001,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1485472016,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1484170889,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1484170532,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1485468765,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":15,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":23,"deletions":0},{"file":"bin/backfill","type":"DELETED","insertions":0,"deletions":-314},{"file":"bin/delbucket","type":"MODIFIED","insertions":24,"deletions":-93},{"file":"bin/delmany","type":"MODIFIED","insertions":42,"deletions":-105},{"file":"bin/delobject","type":"MODIFIED","insertions":27,"deletions":-103},{"file":"bin/findobjects","type":"MODIFIED","insertions":59,"deletions":-114},{"file":"bin/getbucket","type":"MODIFIED","insertions":24,"deletions":-93},{"file":"bin/getobject","type":"MODIFIED","insertions":41,"deletions":-105},{"file":"bin/gettokens","type":"MODIFIED","insertions":18,"deletions":-88},{"file":"bin/listbuckets","type":"MODIFIED","insertions":18,"deletions":-88},{"file":"bin/morayping","type":"MODIFIED","insertions":26,"deletions":-87},{"file":"bin/morayversion","type":"MODIFIED","insertions":20,"deletions":-93},{"file":"bin/putbucket","type":"MODIFIED","insertions":109,"deletions":-157},{"file":"bin/putobject","type":"MODIFIED","insertions":44,"deletions":-102},{"file":"bin/reindexobjects","type":"MODIFIED","insertions":63,"deletions":-135},{"file":"bin/sql","type":"MODIFIED","insertions":23,"deletions":-98},{"file":"bin/updatemany","type":"MODIFIED","insertions":44,"deletions":-98},{"file":"lib/client.js","type":"MODIFIED","insertions":62,"deletions":-340},{"file":"lib/client_params.js","type":"ADDED","insertions":502,"deletions":0},{"file":"lib/cmd.js","type":"ADDED","insertions":368,"deletions":0},{"file":"lib/pool.js","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":1545,"sizeDeletions":-2219}],"allReviewers":[{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}]}