{"project":"joyent/sdc-cn-agent","branch":"master","id":"Iac0fb53fb729e6107cd5920c1623c738965aab70","number":"3256","subject":"TRITON-61 cn-agent should have the ability to run different tasks on non-SmartOS platforms Reviewed by: Orlando Vazquez \u003corlando@joyent.com\u003e Approved by: Orlando Vazquez \u003corlando@joyent.com\u003e","owner":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"url":"https://cr.joyent.us/3256","commitMessage":"TRITON-61 cn-agent should have the ability to run different tasks on non-SmartOS platforms\nReviewed by: Orlando Vazquez \u003corlando@joyent.com\u003e\nApproved by: Orlando Vazquez \u003corlando@joyent.com\u003e\n","createdOn":1516858570,"lastUpdated":1517255490,"open":false,"status":"MERGED","comments":[{"timestamp":1516858570,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 1."},{"timestamp":1516858571,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 7ca162ff189071d192b839c7aca83ff95aa74175\n    \n    first pass at adding backend support to cn-agent"},{"timestamp":1516858597,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n(5 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1516858836,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 2."},{"timestamp":1516858837,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 517abdb20ee03a0aa4fa74381a12b46fdc7b596d\n    \n    eng.git: demerit"},{"timestamp":1516858863,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing-1\n\n(3 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1516858932,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 3."},{"timestamp":1516858933,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 101844e79feba1da91235cec45c95525ce3e874e\n    \n    eng.git: demerit again!"},{"timestamp":1516858958,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1516964511,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1516987610,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 4."},{"timestamp":1516987613,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit a54a1c7e44108d1d33731d380f7bd66b79bfc67d\n    \n    update based on feedback"},{"timestamp":1516987639,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1516987651,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1517009073,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 5."},{"timestamp":1517009074,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit c0a614e5fbd49cb9f268aefd14800c61860d5108\n    \n    move a few more smartos-specific bits into the smartos backend"},{"timestamp":1517009101,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1517220380,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1"},{"timestamp":1517255483,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1517255490,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Josh Wilsdon"}],"currentPatchSet":{"number":"6","revision":"ac0fb53fb729e6107cd5920c1623c738965aab70","parents":["c421bcf8ce41d55070538d5c2707878dd3493765"],"ref":"refs/changes/56/3256/6","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1517255483,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1517009101,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1517220380,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1517220380,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"SUBM","value":"1","grantedOn":1517255490,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"bin/cn-agent.js","type":"MODIFIED","insertions":121,"deletions":-64},{"file":"lib/app.js","type":"MODIFIED","insertions":105,"deletions":-210},{"file":"lib/backends/smartos/bin/chroot-gtar","fileOld":"bin/chroot-gtar","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/bin/docker-build.js","fileOld":"bin/docker-build.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/bin/docker-copy.js","fileOld":"bin/docker-copy.js","type":"RENAMED","insertions":1,"deletions":-1},{"file":"lib/backends/smartos/bin/docker-exec.js","fileOld":"bin/docker-exec.js","type":"RENAMED","insertions":1,"deletions":-1},{"file":"lib/backends/smartos/bin/docker-stats.js","fileOld":"bin/docker-stats.js","type":"RENAMED","insertions":1,"deletions":-1},{"file":"lib/backends/smartos/common.js","type":"ADDED","insertions":166,"deletions":0},{"file":"lib/backends/smartos/imgadm.js","fileOld":"lib/imgadm.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/index.js","type":"ADDED","insertions":772,"deletions":0},{"file":"lib/backends/smartos/lib/docker-stdio.js","fileOld":"lib/docker-stdio.js","type":"RENAMED","insertions":3,"deletions":-1},{"file":"lib/backends/smartos/lib/update-wait-flag.js","fileOld":"lib/update-wait-flag.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/smartdc-config.js","fileOld":"lib/smartdc-config.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/tasks/agent_install.js","fileOld":"lib/tasks/agent_install.js","type":"RENAMED","insertions":21,"deletions":-7},{"file":"lib/backends/smartos/tasks/docker_build.js","fileOld":"lib/tasks/docker_build.js","type":"RENAMED","insertions":3,"deletions":-3},{"file":"lib/backends/smartos/tasks/docker_copy.js","fileOld":"lib/tasks/docker_copy.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/docker_exec.js","fileOld":"lib/tasks/docker_exec.js","type":"RENAMED","insertions":3,"deletions":-4},{"file":"lib/backends/smartos/tasks/docker_stats.js","fileOld":"lib/tasks/docker_stats.js","type":"RENAMED","insertions":3,"deletions":-3},{"file":"lib/backends/smartos/tasks/image_ensure_present.js","fileOld":"lib/tasks/image_ensure_present.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/image_get.js","fileOld":"lib/tasks/image_get.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/kvmdebug.js","fileOld":"lib/tasks/kvmdebug.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/tasks/machine_boot.js","fileOld":"lib/tasks/machine_boot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_create.js","fileOld":"lib/tasks/machine_create.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_create_image.js","fileOld":"lib/tasks/machine_create_image.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/machine_create_snapshot.js","fileOld":"lib/tasks/machine_create_snapshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_delete_snapshot.js","fileOld":"lib/tasks/machine_delete_snapshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_destroy.js","fileOld":"lib/tasks/machine_destroy.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_info.js","fileOld":"lib/tasks/machine_info.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_kill.js","fileOld":"lib/tasks/machine_kill.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_load.js","fileOld":"lib/tasks/machine_load.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_proc.js","fileOld":"lib/tasks/machine_proc.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_reboot.js","fileOld":"lib/tasks/machine_reboot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_reprovision.js","fileOld":"lib/tasks/machine_reprovision.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_rollback_snapshot.js","fileOld":"lib/tasks/machine_rollback_snapshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_screenshot.js","fileOld":"lib/tasks/machine_screenshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_shutdown.js","fileOld":"lib/tasks/machine_shutdown.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_update.js","fileOld":"lib/tasks/machine_update.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_update_nics.js","fileOld":"lib/tasks/machine_update_nics.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/nop.js","fileOld":"lib/tasks/nop.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/refresh_agents.js","fileOld":"lib/tasks/refresh_agents.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/server_overprovision_ratio.js","fileOld":"lib/tasks/server_overprovision_ratio.js","type":"RENAMED","insertions":3,"deletions":-4},{"file":"lib/backends/smartos/tasks/server_update_nics.js","fileOld":"lib/tasks/server_update_nics.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/shared.js","fileOld":"lib/tasks/shared.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/tasks/shutdown_cn_agent_update.js","fileOld":"lib/tasks/shutdown_cn_agent_update.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/sleep.js","fileOld":"lib/tasks/sleep.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/test_subtask.js","fileOld":"lib/tasks/test_subtask.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/zfs_clone_dataset.js","fileOld":"lib/tasks/zfs_clone_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_create_dataset.js","fileOld":"lib/tasks/zfs_create_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_destroy_dataset.js","fileOld":"lib/tasks/zfs_destroy_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_get_properties.js","fileOld":"lib/tasks/zfs_get_properties.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_list_datasets.js","fileOld":"lib/tasks/zfs_list_datasets.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_list_pools.js","fileOld":"lib/tasks/zfs_list_pools.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_list_snapshots.js","fileOld":"lib/tasks/zfs_list_snapshots.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_rename_dataset.js","fileOld":"lib/tasks/zfs_rename_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_rollback_dataset.js","fileOld":"lib/tasks/zfs_rollback_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_set_properties.js","fileOld":"lib/tasks/zfs_set_properties.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_snapshot_dataset.js","fileOld":"lib/tasks/zfs_snapshot_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/common.js","type":"DELETED","insertions":0,"deletions":-326},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":135,"deletions":-565},{"file":"lib/task_agent/common.js","type":"MODIFIED","insertions":1,"deletions":-72},{"file":"lib/task_agent/task.js","type":"MODIFIED","insertions":6,"deletions":-9},{"file":"lib/task_agent/task_agent.js","type":"MODIFIED","insertions":8,"deletions":-9},{"file":"lib/task_agent/task_runner.js","type":"MODIFIED","insertions":11,"deletions":-8},{"file":"lib/vmadm_client.js","type":"DELETED","insertions":0,"deletions":-122},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"test/http-task.test.js","type":"MODIFIED","insertions":4,"deletions":-2}],"sizeInsertions":1446,"sizeDeletions":-1497},"patchSets":[{"number":"1","revision":"2433731a659c7e9ed0d14c57d6ef1ee8838abe26","parents":["c421bcf8ce41d55070538d5c2707878dd3493765"],"ref":"refs/changes/56/3256/1","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1516858570,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1516858597,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"bin/cn-agent.js","line":95,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line \u003e 80 characters"},{"file":"bin/cn-agent.js","line":96,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line \u003e 80 characters"},{"file":"bin/cn-agent.js","line":97,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line \u003e 80 characters"},{"file":"lib/heartbeater.js","line":175,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line \u003e 80 characters"},{"file":"lib/heartbeater.js","line":187,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line \u003e 80 characters"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"bin/cn-agent.js","type":"MODIFIED","insertions":118,"deletions":-64},{"file":"bin/docker-build.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"bin/docker-copy.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"bin/docker-exec.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"bin/docker-stats.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/app.js","type":"MODIFIED","insertions":104,"deletions":-210},{"file":"lib/backends/smartos/common.js","type":"ADDED","insertions":166,"deletions":0},{"file":"lib/backends/smartos/imgadm.js","fileOld":"lib/imgadm.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/index.js","type":"ADDED","insertions":772,"deletions":0},{"file":"lib/backends/smartos/smartdc-config.js","fileOld":"lib/smartdc-config.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/tasks/agent_install.js","fileOld":"lib/tasks/agent_install.js","type":"RENAMED","insertions":3,"deletions":-3},{"file":"lib/backends/smartos/tasks/docker_build.js","fileOld":"lib/tasks/docker_build.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/docker_copy.js","fileOld":"lib/tasks/docker_copy.js","type":"RENAMED","insertions":1,"deletions":-1},{"file":"lib/backends/smartos/tasks/docker_exec.js","fileOld":"lib/tasks/docker_exec.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/docker_stats.js","fileOld":"lib/tasks/docker_stats.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/image_ensure_present.js","fileOld":"lib/tasks/image_ensure_present.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/image_get.js","fileOld":"lib/tasks/image_get.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/kvmdebug.js","fileOld":"lib/tasks/kvmdebug.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/tasks/machine_boot.js","fileOld":"lib/tasks/machine_boot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_create.js","fileOld":"lib/tasks/machine_create.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_create_image.js","fileOld":"lib/tasks/machine_create_image.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/machine_create_snapshot.js","fileOld":"lib/tasks/machine_create_snapshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_delete_snapshot.js","fileOld":"lib/tasks/machine_delete_snapshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_destroy.js","fileOld":"lib/tasks/machine_destroy.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_info.js","fileOld":"lib/tasks/machine_info.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_kill.js","fileOld":"lib/tasks/machine_kill.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_load.js","fileOld":"lib/tasks/machine_load.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_proc.js","fileOld":"lib/tasks/machine_proc.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_reboot.js","fileOld":"lib/tasks/machine_reboot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_reprovision.js","fileOld":"lib/tasks/machine_reprovision.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_rollback_snapshot.js","fileOld":"lib/tasks/machine_rollback_snapshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_screenshot.js","fileOld":"lib/tasks/machine_screenshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_shutdown.js","fileOld":"lib/tasks/machine_shutdown.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_update.js","fileOld":"lib/tasks/machine_update.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_update_nics.js","fileOld":"lib/tasks/machine_update_nics.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/nop.js","fileOld":"lib/tasks/nop.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/refresh_agents.js","fileOld":"lib/tasks/refresh_agents.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/server_overprovision_ratio.js","fileOld":"lib/tasks/server_overprovision_ratio.js","type":"RENAMED","insertions":3,"deletions":-4},{"file":"lib/backends/smartos/tasks/server_update_nics.js","fileOld":"lib/tasks/server_update_nics.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/shared.js","fileOld":"lib/tasks/shared.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/tasks/shutdown_cn_agent_update.js","fileOld":"lib/tasks/shutdown_cn_agent_update.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/sleep.js","fileOld":"lib/tasks/sleep.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/test_subtask.js","fileOld":"lib/tasks/test_subtask.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/zfs_clone_dataset.js","fileOld":"lib/tasks/zfs_clone_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_create_dataset.js","fileOld":"lib/tasks/zfs_create_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_destroy_dataset.js","fileOld":"lib/tasks/zfs_destroy_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_get_properties.js","fileOld":"lib/tasks/zfs_get_properties.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_list_datasets.js","fileOld":"lib/tasks/zfs_list_datasets.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_list_pools.js","fileOld":"lib/tasks/zfs_list_pools.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_list_snapshots.js","fileOld":"lib/tasks/zfs_list_snapshots.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_rename_dataset.js","fileOld":"lib/tasks/zfs_rename_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_rollback_dataset.js","fileOld":"lib/tasks/zfs_rollback_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_set_properties.js","fileOld":"lib/tasks/zfs_set_properties.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_snapshot_dataset.js","fileOld":"lib/tasks/zfs_snapshot_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/common.js","type":"DELETED","insertions":0,"deletions":-326},{"file":"lib/docker-stdio.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":133,"deletions":-566},{"file":"lib/task_agent/common.js","type":"MODIFIED","insertions":1,"deletions":-72},{"file":"lib/task_agent/task_agent.js","type":"MODIFIED","insertions":8,"deletions":-9},{"file":"lib/task_agent/task_runner.js","type":"MODIFIED","insertions":11,"deletions":-8},{"file":"lib/vmadm_client.js","type":"DELETED","insertions":0,"deletions":-122},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"test/http-task.test.js","type":"MODIFIED","insertions":4,"deletions":-2}],"sizeInsertions":1419,"sizeDeletions":-1480},{"number":"2","revision":"3110b0425a8431d25d9ae2ec803cd78c939d2b00","parents":["c421bcf8ce41d55070538d5c2707878dd3493765"],"ref":"refs/changes/56/3256/2","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1516858836,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1516858863,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/heartbeater.js","line":178,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line \u003e 80 characters"},{"file":"lib/heartbeater.js","line":184,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"whitespace before right paren"},{"file":"lib/heartbeater.js","line":189,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line \u003e 80 characters"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"bin/cn-agent.js","type":"MODIFIED","insertions":121,"deletions":-64},{"file":"bin/docker-build.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"bin/docker-copy.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"bin/docker-exec.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"bin/docker-stats.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/app.js","type":"MODIFIED","insertions":104,"deletions":-210},{"file":"lib/backends/smartos/common.js","type":"ADDED","insertions":166,"deletions":0},{"file":"lib/backends/smartos/imgadm.js","fileOld":"lib/imgadm.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/index.js","type":"ADDED","insertions":772,"deletions":0},{"file":"lib/backends/smartos/smartdc-config.js","fileOld":"lib/smartdc-config.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/tasks/agent_install.js","fileOld":"lib/tasks/agent_install.js","type":"RENAMED","insertions":3,"deletions":-3},{"file":"lib/backends/smartos/tasks/docker_build.js","fileOld":"lib/tasks/docker_build.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/docker_copy.js","fileOld":"lib/tasks/docker_copy.js","type":"RENAMED","insertions":1,"deletions":-1},{"file":"lib/backends/smartos/tasks/docker_exec.js","fileOld":"lib/tasks/docker_exec.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/docker_stats.js","fileOld":"lib/tasks/docker_stats.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/image_ensure_present.js","fileOld":"lib/tasks/image_ensure_present.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/image_get.js","fileOld":"lib/tasks/image_get.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/kvmdebug.js","fileOld":"lib/tasks/kvmdebug.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/tasks/machine_boot.js","fileOld":"lib/tasks/machine_boot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_create.js","fileOld":"lib/tasks/machine_create.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_create_image.js","fileOld":"lib/tasks/machine_create_image.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/machine_create_snapshot.js","fileOld":"lib/tasks/machine_create_snapshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_delete_snapshot.js","fileOld":"lib/tasks/machine_delete_snapshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_destroy.js","fileOld":"lib/tasks/machine_destroy.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_info.js","fileOld":"lib/tasks/machine_info.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_kill.js","fileOld":"lib/tasks/machine_kill.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_load.js","fileOld":"lib/tasks/machine_load.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_proc.js","fileOld":"lib/tasks/machine_proc.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_reboot.js","fileOld":"lib/tasks/machine_reboot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_reprovision.js","fileOld":"lib/tasks/machine_reprovision.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_rollback_snapshot.js","fileOld":"lib/tasks/machine_rollback_snapshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_screenshot.js","fileOld":"lib/tasks/machine_screenshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_shutdown.js","fileOld":"lib/tasks/machine_shutdown.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_update.js","fileOld":"lib/tasks/machine_update.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_update_nics.js","fileOld":"lib/tasks/machine_update_nics.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/nop.js","fileOld":"lib/tasks/nop.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/refresh_agents.js","fileOld":"lib/tasks/refresh_agents.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/server_overprovision_ratio.js","fileOld":"lib/tasks/server_overprovision_ratio.js","type":"RENAMED","insertions":3,"deletions":-4},{"file":"lib/backends/smartos/tasks/server_update_nics.js","fileOld":"lib/tasks/server_update_nics.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/shared.js","fileOld":"lib/tasks/shared.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/tasks/shutdown_cn_agent_update.js","fileOld":"lib/tasks/shutdown_cn_agent_update.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/sleep.js","fileOld":"lib/tasks/sleep.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/test_subtask.js","fileOld":"lib/tasks/test_subtask.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/zfs_clone_dataset.js","fileOld":"lib/tasks/zfs_clone_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_create_dataset.js","fileOld":"lib/tasks/zfs_create_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_destroy_dataset.js","fileOld":"lib/tasks/zfs_destroy_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_get_properties.js","fileOld":"lib/tasks/zfs_get_properties.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_list_datasets.js","fileOld":"lib/tasks/zfs_list_datasets.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_list_pools.js","fileOld":"lib/tasks/zfs_list_pools.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_list_snapshots.js","fileOld":"lib/tasks/zfs_list_snapshots.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_rename_dataset.js","fileOld":"lib/tasks/zfs_rename_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_rollback_dataset.js","fileOld":"lib/tasks/zfs_rollback_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_set_properties.js","fileOld":"lib/tasks/zfs_set_properties.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_snapshot_dataset.js","fileOld":"lib/tasks/zfs_snapshot_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/common.js","type":"DELETED","insertions":0,"deletions":-326},{"file":"lib/docker-stdio.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":134,"deletions":-565},{"file":"lib/task_agent/common.js","type":"MODIFIED","insertions":1,"deletions":-72},{"file":"lib/task_agent/task_agent.js","type":"MODIFIED","insertions":8,"deletions":-9},{"file":"lib/task_agent/task_runner.js","type":"MODIFIED","insertions":11,"deletions":-8},{"file":"lib/vmadm_client.js","type":"DELETED","insertions":0,"deletions":-122},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"test/http-task.test.js","type":"MODIFIED","insertions":4,"deletions":-2}],"sizeInsertions":1423,"sizeDeletions":-1479},{"number":"3","revision":"f5834f768b7f0d00bbd88b45903f82033688ba98","parents":["c421bcf8ce41d55070538d5c2707878dd3493765"],"ref":"refs/changes/56/3256/3","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1516858932,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1516858958,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/task_agent/task_agent.js","line":56,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Should this be `opts`?"},{"file":"lib/task_agent/task_agent.js","line":56,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"yes, nice catch!\n\nLuckily TaskRunner doesn\u0027t actually use backend for anything yet, so this didn\u0027t cause a problem. I\u0027ve fixed anyway."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"bin/cn-agent.js","type":"MODIFIED","insertions":121,"deletions":-64},{"file":"bin/docker-build.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"bin/docker-copy.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"bin/docker-exec.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"bin/docker-stats.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/app.js","type":"MODIFIED","insertions":104,"deletions":-210},{"file":"lib/backends/smartos/common.js","type":"ADDED","insertions":166,"deletions":0},{"file":"lib/backends/smartos/imgadm.js","fileOld":"lib/imgadm.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/index.js","type":"ADDED","insertions":772,"deletions":0},{"file":"lib/backends/smartos/smartdc-config.js","fileOld":"lib/smartdc-config.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/tasks/agent_install.js","fileOld":"lib/tasks/agent_install.js","type":"RENAMED","insertions":3,"deletions":-3},{"file":"lib/backends/smartos/tasks/docker_build.js","fileOld":"lib/tasks/docker_build.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/docker_copy.js","fileOld":"lib/tasks/docker_copy.js","type":"RENAMED","insertions":1,"deletions":-1},{"file":"lib/backends/smartos/tasks/docker_exec.js","fileOld":"lib/tasks/docker_exec.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/docker_stats.js","fileOld":"lib/tasks/docker_stats.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/image_ensure_present.js","fileOld":"lib/tasks/image_ensure_present.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/image_get.js","fileOld":"lib/tasks/image_get.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/kvmdebug.js","fileOld":"lib/tasks/kvmdebug.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/tasks/machine_boot.js","fileOld":"lib/tasks/machine_boot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_create.js","fileOld":"lib/tasks/machine_create.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_create_image.js","fileOld":"lib/tasks/machine_create_image.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/machine_create_snapshot.js","fileOld":"lib/tasks/machine_create_snapshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_delete_snapshot.js","fileOld":"lib/tasks/machine_delete_snapshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_destroy.js","fileOld":"lib/tasks/machine_destroy.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_info.js","fileOld":"lib/tasks/machine_info.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_kill.js","fileOld":"lib/tasks/machine_kill.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_load.js","fileOld":"lib/tasks/machine_load.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_proc.js","fileOld":"lib/tasks/machine_proc.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_reboot.js","fileOld":"lib/tasks/machine_reboot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_reprovision.js","fileOld":"lib/tasks/machine_reprovision.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_rollback_snapshot.js","fileOld":"lib/tasks/machine_rollback_snapshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_screenshot.js","fileOld":"lib/tasks/machine_screenshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_shutdown.js","fileOld":"lib/tasks/machine_shutdown.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_update.js","fileOld":"lib/tasks/machine_update.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_update_nics.js","fileOld":"lib/tasks/machine_update_nics.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/nop.js","fileOld":"lib/tasks/nop.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/refresh_agents.js","fileOld":"lib/tasks/refresh_agents.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/server_overprovision_ratio.js","fileOld":"lib/tasks/server_overprovision_ratio.js","type":"RENAMED","insertions":3,"deletions":-4},{"file":"lib/backends/smartos/tasks/server_update_nics.js","fileOld":"lib/tasks/server_update_nics.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/shared.js","fileOld":"lib/tasks/shared.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/tasks/shutdown_cn_agent_update.js","fileOld":"lib/tasks/shutdown_cn_agent_update.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/sleep.js","fileOld":"lib/tasks/sleep.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/test_subtask.js","fileOld":"lib/tasks/test_subtask.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/zfs_clone_dataset.js","fileOld":"lib/tasks/zfs_clone_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_create_dataset.js","fileOld":"lib/tasks/zfs_create_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_destroy_dataset.js","fileOld":"lib/tasks/zfs_destroy_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_get_properties.js","fileOld":"lib/tasks/zfs_get_properties.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_list_datasets.js","fileOld":"lib/tasks/zfs_list_datasets.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_list_pools.js","fileOld":"lib/tasks/zfs_list_pools.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_list_snapshots.js","fileOld":"lib/tasks/zfs_list_snapshots.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_rename_dataset.js","fileOld":"lib/tasks/zfs_rename_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_rollback_dataset.js","fileOld":"lib/tasks/zfs_rollback_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_set_properties.js","fileOld":"lib/tasks/zfs_set_properties.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_snapshot_dataset.js","fileOld":"lib/tasks/zfs_snapshot_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/common.js","type":"DELETED","insertions":0,"deletions":-326},{"file":"lib/docker-stdio.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":135,"deletions":-565},{"file":"lib/task_agent/common.js","type":"MODIFIED","insertions":1,"deletions":-72},{"file":"lib/task_agent/task_agent.js","type":"MODIFIED","insertions":8,"deletions":-9},{"file":"lib/task_agent/task_runner.js","type":"MODIFIED","insertions":11,"deletions":-8},{"file":"lib/vmadm_client.js","type":"DELETED","insertions":0,"deletions":-122},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"test/http-task.test.js","type":"MODIFIED","insertions":4,"deletions":-2}],"sizeInsertions":1424,"sizeDeletions":-1479},{"number":"4","revision":"a81dcd409c708a39b8fe01231e5cf04815e785b5","parents":["c421bcf8ce41d55070538d5c2707878dd3493765"],"ref":"refs/changes/56/3256/4","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1516987610,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1516987639,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"bin/cn-agent.js","type":"MODIFIED","insertions":121,"deletions":-64},{"file":"bin/docker-build.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"bin/docker-copy.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"bin/docker-exec.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"bin/docker-stats.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/app.js","type":"MODIFIED","insertions":105,"deletions":-210},{"file":"lib/backends/smartos/common.js","type":"ADDED","insertions":166,"deletions":0},{"file":"lib/backends/smartos/imgadm.js","fileOld":"lib/imgadm.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/index.js","type":"ADDED","insertions":772,"deletions":0},{"file":"lib/backends/smartos/smartdc-config.js","fileOld":"lib/smartdc-config.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/tasks/agent_install.js","fileOld":"lib/tasks/agent_install.js","type":"RENAMED","insertions":3,"deletions":-3},{"file":"lib/backends/smartos/tasks/docker_build.js","fileOld":"lib/tasks/docker_build.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/docker_copy.js","fileOld":"lib/tasks/docker_copy.js","type":"RENAMED","insertions":1,"deletions":-1},{"file":"lib/backends/smartos/tasks/docker_exec.js","fileOld":"lib/tasks/docker_exec.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/docker_stats.js","fileOld":"lib/tasks/docker_stats.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/image_ensure_present.js","fileOld":"lib/tasks/image_ensure_present.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/image_get.js","fileOld":"lib/tasks/image_get.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/kvmdebug.js","fileOld":"lib/tasks/kvmdebug.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/tasks/machine_boot.js","fileOld":"lib/tasks/machine_boot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_create.js","fileOld":"lib/tasks/machine_create.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_create_image.js","fileOld":"lib/tasks/machine_create_image.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/machine_create_snapshot.js","fileOld":"lib/tasks/machine_create_snapshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_delete_snapshot.js","fileOld":"lib/tasks/machine_delete_snapshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_destroy.js","fileOld":"lib/tasks/machine_destroy.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_info.js","fileOld":"lib/tasks/machine_info.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_kill.js","fileOld":"lib/tasks/machine_kill.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_load.js","fileOld":"lib/tasks/machine_load.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_proc.js","fileOld":"lib/tasks/machine_proc.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_reboot.js","fileOld":"lib/tasks/machine_reboot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_reprovision.js","fileOld":"lib/tasks/machine_reprovision.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_rollback_snapshot.js","fileOld":"lib/tasks/machine_rollback_snapshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_screenshot.js","fileOld":"lib/tasks/machine_screenshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_shutdown.js","fileOld":"lib/tasks/machine_shutdown.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_update.js","fileOld":"lib/tasks/machine_update.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_update_nics.js","fileOld":"lib/tasks/machine_update_nics.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/nop.js","fileOld":"lib/tasks/nop.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/refresh_agents.js","fileOld":"lib/tasks/refresh_agents.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/server_overprovision_ratio.js","fileOld":"lib/tasks/server_overprovision_ratio.js","type":"RENAMED","insertions":3,"deletions":-4},{"file":"lib/backends/smartos/tasks/server_update_nics.js","fileOld":"lib/tasks/server_update_nics.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/shared.js","fileOld":"lib/tasks/shared.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/tasks/shutdown_cn_agent_update.js","fileOld":"lib/tasks/shutdown_cn_agent_update.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/sleep.js","fileOld":"lib/tasks/sleep.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/test_subtask.js","fileOld":"lib/tasks/test_subtask.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/zfs_clone_dataset.js","fileOld":"lib/tasks/zfs_clone_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_create_dataset.js","fileOld":"lib/tasks/zfs_create_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_destroy_dataset.js","fileOld":"lib/tasks/zfs_destroy_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_get_properties.js","fileOld":"lib/tasks/zfs_get_properties.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_list_datasets.js","fileOld":"lib/tasks/zfs_list_datasets.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_list_pools.js","fileOld":"lib/tasks/zfs_list_pools.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_list_snapshots.js","fileOld":"lib/tasks/zfs_list_snapshots.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_rename_dataset.js","fileOld":"lib/tasks/zfs_rename_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_rollback_dataset.js","fileOld":"lib/tasks/zfs_rollback_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_set_properties.js","fileOld":"lib/tasks/zfs_set_properties.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_snapshot_dataset.js","fileOld":"lib/tasks/zfs_snapshot_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/common.js","type":"DELETED","insertions":0,"deletions":-326},{"file":"lib/docker-stdio.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":135,"deletions":-565},{"file":"lib/task_agent/common.js","type":"MODIFIED","insertions":1,"deletions":-72},{"file":"lib/task_agent/task_agent.js","type":"MODIFIED","insertions":8,"deletions":-9},{"file":"lib/task_agent/task_runner.js","type":"MODIFIED","insertions":11,"deletions":-8},{"file":"lib/vmadm_client.js","type":"DELETED","insertions":0,"deletions":-122},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"test/http-task.test.js","type":"MODIFIED","insertions":4,"deletions":-2}],"sizeInsertions":1425,"sizeDeletions":-1479},{"number":"5","revision":"8b9119ceb07da6063b48261f441a10dd77aaca75","parents":["c421bcf8ce41d55070538d5c2707878dd3493765"],"ref":"refs/changes/56/3256/5","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1517009073,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1517009101,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1517220380,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1517220380,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"bin/cn-agent.js","type":"MODIFIED","insertions":121,"deletions":-64},{"file":"lib/app.js","type":"MODIFIED","insertions":105,"deletions":-210},{"file":"lib/backends/smartos/bin/chroot-gtar","fileOld":"bin/chroot-gtar","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/bin/docker-build.js","fileOld":"bin/docker-build.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/bin/docker-copy.js","fileOld":"bin/docker-copy.js","type":"RENAMED","insertions":1,"deletions":-1},{"file":"lib/backends/smartos/bin/docker-exec.js","fileOld":"bin/docker-exec.js","type":"RENAMED","insertions":1,"deletions":-1},{"file":"lib/backends/smartos/bin/docker-stats.js","fileOld":"bin/docker-stats.js","type":"RENAMED","insertions":1,"deletions":-1},{"file":"lib/backends/smartos/common.js","type":"ADDED","insertions":166,"deletions":0},{"file":"lib/backends/smartos/imgadm.js","fileOld":"lib/imgadm.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/index.js","type":"ADDED","insertions":772,"deletions":0},{"file":"lib/backends/smartos/lib/docker-stdio.js","fileOld":"lib/docker-stdio.js","type":"RENAMED","insertions":3,"deletions":-1},{"file":"lib/backends/smartos/lib/update-wait-flag.js","fileOld":"lib/update-wait-flag.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/smartdc-config.js","fileOld":"lib/smartdc-config.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/tasks/agent_install.js","fileOld":"lib/tasks/agent_install.js","type":"RENAMED","insertions":21,"deletions":-7},{"file":"lib/backends/smartos/tasks/docker_build.js","fileOld":"lib/tasks/docker_build.js","type":"RENAMED","insertions":3,"deletions":-3},{"file":"lib/backends/smartos/tasks/docker_copy.js","fileOld":"lib/tasks/docker_copy.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/docker_exec.js","fileOld":"lib/tasks/docker_exec.js","type":"RENAMED","insertions":3,"deletions":-4},{"file":"lib/backends/smartos/tasks/docker_stats.js","fileOld":"lib/tasks/docker_stats.js","type":"RENAMED","insertions":3,"deletions":-3},{"file":"lib/backends/smartos/tasks/image_ensure_present.js","fileOld":"lib/tasks/image_ensure_present.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/image_get.js","fileOld":"lib/tasks/image_get.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/kvmdebug.js","fileOld":"lib/tasks/kvmdebug.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/tasks/machine_boot.js","fileOld":"lib/tasks/machine_boot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_create.js","fileOld":"lib/tasks/machine_create.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_create_image.js","fileOld":"lib/tasks/machine_create_image.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/machine_create_snapshot.js","fileOld":"lib/tasks/machine_create_snapshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_delete_snapshot.js","fileOld":"lib/tasks/machine_delete_snapshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_destroy.js","fileOld":"lib/tasks/machine_destroy.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_info.js","fileOld":"lib/tasks/machine_info.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_kill.js","fileOld":"lib/tasks/machine_kill.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_load.js","fileOld":"lib/tasks/machine_load.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_proc.js","fileOld":"lib/tasks/machine_proc.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_reboot.js","fileOld":"lib/tasks/machine_reboot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_reprovision.js","fileOld":"lib/tasks/machine_reprovision.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_rollback_snapshot.js","fileOld":"lib/tasks/machine_rollback_snapshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_screenshot.js","fileOld":"lib/tasks/machine_screenshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_shutdown.js","fileOld":"lib/tasks/machine_shutdown.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_update.js","fileOld":"lib/tasks/machine_update.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_update_nics.js","fileOld":"lib/tasks/machine_update_nics.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/nop.js","fileOld":"lib/tasks/nop.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/refresh_agents.js","fileOld":"lib/tasks/refresh_agents.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/server_overprovision_ratio.js","fileOld":"lib/tasks/server_overprovision_ratio.js","type":"RENAMED","insertions":3,"deletions":-4},{"file":"lib/backends/smartos/tasks/server_update_nics.js","fileOld":"lib/tasks/server_update_nics.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/shared.js","fileOld":"lib/tasks/shared.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/tasks/shutdown_cn_agent_update.js","fileOld":"lib/tasks/shutdown_cn_agent_update.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/sleep.js","fileOld":"lib/tasks/sleep.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/test_subtask.js","fileOld":"lib/tasks/test_subtask.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/zfs_clone_dataset.js","fileOld":"lib/tasks/zfs_clone_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_create_dataset.js","fileOld":"lib/tasks/zfs_create_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_destroy_dataset.js","fileOld":"lib/tasks/zfs_destroy_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_get_properties.js","fileOld":"lib/tasks/zfs_get_properties.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_list_datasets.js","fileOld":"lib/tasks/zfs_list_datasets.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_list_pools.js","fileOld":"lib/tasks/zfs_list_pools.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_list_snapshots.js","fileOld":"lib/tasks/zfs_list_snapshots.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_rename_dataset.js","fileOld":"lib/tasks/zfs_rename_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_rollback_dataset.js","fileOld":"lib/tasks/zfs_rollback_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_set_properties.js","fileOld":"lib/tasks/zfs_set_properties.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_snapshot_dataset.js","fileOld":"lib/tasks/zfs_snapshot_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/common.js","type":"DELETED","insertions":0,"deletions":-326},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":135,"deletions":-565},{"file":"lib/task_agent/common.js","type":"MODIFIED","insertions":1,"deletions":-72},{"file":"lib/task_agent/task.js","type":"MODIFIED","insertions":6,"deletions":-9},{"file":"lib/task_agent/task_agent.js","type":"MODIFIED","insertions":8,"deletions":-9},{"file":"lib/task_agent/task_runner.js","type":"MODIFIED","insertions":11,"deletions":-8},{"file":"lib/vmadm_client.js","type":"DELETED","insertions":0,"deletions":-122},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"test/http-task.test.js","type":"MODIFIED","insertions":4,"deletions":-2}],"sizeInsertions":1446,"sizeDeletions":-1497},{"number":"6","revision":"ac0fb53fb729e6107cd5920c1623c738965aab70","parents":["c421bcf8ce41d55070538d5c2707878dd3493765"],"ref":"refs/changes/56/3256/6","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1517255483,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1517009101,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1517255490,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1517220380,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1517220380,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"bin/cn-agent.js","type":"MODIFIED","insertions":121,"deletions":-64},{"file":"lib/app.js","type":"MODIFIED","insertions":105,"deletions":-210},{"file":"lib/backends/smartos/bin/chroot-gtar","fileOld":"bin/chroot-gtar","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/bin/docker-build.js","fileOld":"bin/docker-build.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/bin/docker-copy.js","fileOld":"bin/docker-copy.js","type":"RENAMED","insertions":1,"deletions":-1},{"file":"lib/backends/smartos/bin/docker-exec.js","fileOld":"bin/docker-exec.js","type":"RENAMED","insertions":1,"deletions":-1},{"file":"lib/backends/smartos/bin/docker-stats.js","fileOld":"bin/docker-stats.js","type":"RENAMED","insertions":1,"deletions":-1},{"file":"lib/backends/smartos/common.js","type":"ADDED","insertions":166,"deletions":0},{"file":"lib/backends/smartos/imgadm.js","fileOld":"lib/imgadm.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/index.js","type":"ADDED","insertions":772,"deletions":0},{"file":"lib/backends/smartos/lib/docker-stdio.js","fileOld":"lib/docker-stdio.js","type":"RENAMED","insertions":3,"deletions":-1},{"file":"lib/backends/smartos/lib/update-wait-flag.js","fileOld":"lib/update-wait-flag.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/smartdc-config.js","fileOld":"lib/smartdc-config.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/tasks/agent_install.js","fileOld":"lib/tasks/agent_install.js","type":"RENAMED","insertions":21,"deletions":-7},{"file":"lib/backends/smartos/tasks/docker_build.js","fileOld":"lib/tasks/docker_build.js","type":"RENAMED","insertions":3,"deletions":-3},{"file":"lib/backends/smartos/tasks/docker_copy.js","fileOld":"lib/tasks/docker_copy.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/docker_exec.js","fileOld":"lib/tasks/docker_exec.js","type":"RENAMED","insertions":3,"deletions":-4},{"file":"lib/backends/smartos/tasks/docker_stats.js","fileOld":"lib/tasks/docker_stats.js","type":"RENAMED","insertions":3,"deletions":-3},{"file":"lib/backends/smartos/tasks/image_ensure_present.js","fileOld":"lib/tasks/image_ensure_present.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/image_get.js","fileOld":"lib/tasks/image_get.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/kvmdebug.js","fileOld":"lib/tasks/kvmdebug.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/tasks/machine_boot.js","fileOld":"lib/tasks/machine_boot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_create.js","fileOld":"lib/tasks/machine_create.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_create_image.js","fileOld":"lib/tasks/machine_create_image.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/machine_create_snapshot.js","fileOld":"lib/tasks/machine_create_snapshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_delete_snapshot.js","fileOld":"lib/tasks/machine_delete_snapshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_destroy.js","fileOld":"lib/tasks/machine_destroy.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_info.js","fileOld":"lib/tasks/machine_info.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_kill.js","fileOld":"lib/tasks/machine_kill.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_load.js","fileOld":"lib/tasks/machine_load.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_proc.js","fileOld":"lib/tasks/machine_proc.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_reboot.js","fileOld":"lib/tasks/machine_reboot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_reprovision.js","fileOld":"lib/tasks/machine_reprovision.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_rollback_snapshot.js","fileOld":"lib/tasks/machine_rollback_snapshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_screenshot.js","fileOld":"lib/tasks/machine_screenshot.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_shutdown.js","fileOld":"lib/tasks/machine_shutdown.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_update.js","fileOld":"lib/tasks/machine_update.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/machine_update_nics.js","fileOld":"lib/tasks/machine_update_nics.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/nop.js","fileOld":"lib/tasks/nop.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/refresh_agents.js","fileOld":"lib/tasks/refresh_agents.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/server_overprovision_ratio.js","fileOld":"lib/tasks/server_overprovision_ratio.js","type":"RENAMED","insertions":3,"deletions":-4},{"file":"lib/backends/smartos/tasks/server_update_nics.js","fileOld":"lib/tasks/server_update_nics.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/shared.js","fileOld":"lib/tasks/shared.js","type":"RENAMED","insertions":0,"deletions":0},{"file":"lib/backends/smartos/tasks/shutdown_cn_agent_update.js","fileOld":"lib/tasks/shutdown_cn_agent_update.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/sleep.js","fileOld":"lib/tasks/sleep.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/test_subtask.js","fileOld":"lib/tasks/test_subtask.js","type":"RENAMED","insertions":2,"deletions":-3},{"file":"lib/backends/smartos/tasks/zfs_clone_dataset.js","fileOld":"lib/tasks/zfs_clone_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_create_dataset.js","fileOld":"lib/tasks/zfs_create_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_destroy_dataset.js","fileOld":"lib/tasks/zfs_destroy_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_get_properties.js","fileOld":"lib/tasks/zfs_get_properties.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_list_datasets.js","fileOld":"lib/tasks/zfs_list_datasets.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_list_pools.js","fileOld":"lib/tasks/zfs_list_pools.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_list_snapshots.js","fileOld":"lib/tasks/zfs_list_snapshots.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_rename_dataset.js","fileOld":"lib/tasks/zfs_rename_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_rollback_dataset.js","fileOld":"lib/tasks/zfs_rollback_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_set_properties.js","fileOld":"lib/tasks/zfs_set_properties.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/backends/smartos/tasks/zfs_snapshot_dataset.js","fileOld":"lib/tasks/zfs_snapshot_dataset.js","type":"RENAMED","insertions":2,"deletions":-2},{"file":"lib/common.js","type":"DELETED","insertions":0,"deletions":-326},{"file":"lib/heartbeater.js","type":"MODIFIED","insertions":135,"deletions":-565},{"file":"lib/task_agent/common.js","type":"MODIFIED","insertions":1,"deletions":-72},{"file":"lib/task_agent/task.js","type":"MODIFIED","insertions":6,"deletions":-9},{"file":"lib/task_agent/task_agent.js","type":"MODIFIED","insertions":8,"deletions":-9},{"file":"lib/task_agent/task_runner.js","type":"MODIFIED","insertions":11,"deletions":-8},{"file":"lib/vmadm_client.js","type":"DELETED","insertions":0,"deletions":-122},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"test/http-task.test.js","type":"MODIFIED","insertions":4,"deletions":-2}],"sizeInsertions":1446,"sizeDeletions":-1497}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}]}