{"project":"joyent/manta-muskie","branch":"master","id":"I9064133d1bf437810d97274fcf48e01b766059f2","number":"2582","subject":"MANTA-3427 Support changing multipart upload PREFIX_LENGTH in SAPI MANTA-3433 operations on existing multipart uploads sometimes load incorrect upload directory path MANTA-3432 authorization for mpu-get works by accident Reviewed by: David Pacheco \u003cdap@jo","owner":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"url":"https://cr.joyent.us/2582","commitMessage":"MANTA-3427 Support changing multipart upload PREFIX_LENGTH in SAPI\nMANTA-3433 operations on existing multipart uploads sometimes load incorrect upload directory path\nMANTA-3432 authorization for mpu-get works by accident\nReviewed by: David Pacheco \u003cdap@joyent.com\u003e\nApproved by: David Pacheco \u003cdap@joyent.com\u003e\n","createdOn":1505498555,"lastUpdated":1505604946,"open":false,"status":"MERGED","comments":[{"timestamp":1505498555,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Uploaded patch set 1."},{"timestamp":1505498595,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1505499670,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Uploaded patch set 2."},{"timestamp":1505499699,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1505513619,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Uploaded patch set 3."},{"timestamp":1505513648,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1505514872,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Uploaded patch set 4."},{"timestamp":1505514905,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1505515392,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 4:\n\nPatchset 4 is ready for review. I need to do additional testing, and will have to make changes to the test suite to get it to run properly once joyent/node-manta#326 is integrated."},{"timestamp":1505519389,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 4: Code-Review+1\n\n(22 comments)\n\nNearly all of these are just nits.  It would be good to verify the account login regular expression."},{"timestamp":1505529264,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Uploaded patch set 5."},{"timestamp":1505529307,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1505529450,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Uploaded patch set 6."},{"timestamp":1505529483,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1505529777,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Uploaded patch set 7."},{"timestamp":1505529805,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1505529831,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 7:\n\nPatchset 7 includes changes that fix the muskie test suite, including a node-manta change (dependent on integrating joyent/node-manta#326). It does not yet address Dave\u0027s feedback from patchset 4."},{"timestamp":1505534662,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Uploaded patch set 8."},{"timestamp":1505534688,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 8:\n\n(17 comments)\n\nPatchset 8 addresses Dave\u0027s feedback. It is `make prepush` clean."},{"timestamp":1505534711,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1505537640,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 8: Code-Review+1\n\n(9 comments)\n\nThis is looking good.  I have a few more notes and clarifications, and it\u0027ll be good to get testing notes into the tickets and all, but I\u0027m comfortable with this integrating as-is if that becomes necessary on Saturday and nobody is around to IA it.\n\nIt occurs to me that if you haven\u0027t already, and if it\u0027s possible, I think it would be good to test a java-manta MPU after this change."},{"timestamp":1505598967,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Uploaded patch set 9."},{"timestamp":1505599006,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1505599006,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 9:\n\n(9 comments)\n\nThanks for the additional feedback. I\u0027m still writing up my testing notes. I am concurrently working on LAB-229 (and will be running the test suite against staging before finishing my testing notes)."},{"timestamp":1505599307,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Uploaded patch set 10."},{"timestamp":1505599348,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 9:\n\nPatchset 10 is a non-trivial rebase. The only merge conflict was with package.json."},{"timestamp":1505599350,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1505599467,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 10: Code-Review+1"},{"timestamp":1505604325,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 10: Integration-Approval+1"},{"timestamp":1505604933,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Uploaded patch set 11: Commit message was updated."},{"timestamp":1505604946,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jordan Hendricks"}],"currentPatchSet":{"number":"11","revision":"9064133d1bf437810d97274fcf48e01b766059f2","parents":["4ba953577be8765a90228cc33d7fcc1dd232a23b"],"ref":"refs/changes/82/2582/11","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1505604933,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505599350,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505599467,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1505604325,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"SUBM","value":"1","grantedOn":1505604946,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/uploads/abort.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":223,"deletions":-29},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":19,"deletions":-3},{"file":"lib/uploads/get.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/uploads/redirect.js","type":"MODIFIED","insertions":168,"deletions":-21},{"file":"lib/uploads/upload.js","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"main.js","type":"MODIFIED","insertions":24,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/muskie/template","type":"MODIFIED","insertions":9,"deletions":0},{"file":"test/mpu/abort.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/mpu/commit.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/mpu/get.test.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/mpu/helper.js","type":"MODIFIED","insertions":29,"deletions":-7},{"file":"test/mpu/upload.test.js","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":526,"sizeDeletions":-99},"patchSets":[{"number":"1","revision":"6d8aab89e3a6278eb29b47e7345a1ceb6405e72b","parents":["89de83de9693fde0987ff6e6a2c2b0e853579384"],"ref":"refs/changes/82/2582/1","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1505498555,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505498595,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/uploads/abort.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":121,"deletions":-25},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":19,"deletions":-3},{"file":"lib/uploads/get.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/redirect.js","type":"MODIFIED","insertions":72,"deletions":-8},{"file":"lib/uploads/upload.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"main.js","type":"MODIFIED","insertions":32,"deletions":-3},{"file":"sapi_manifests/muskie/template","type":"MODIFIED","insertions":4,"deletions":0}],"sizeInsertions":260,"sizeDeletions":-44},{"number":"2","revision":"0b730cead090a0ff078cb51cb23852675cf5f41e","parents":["89de83de9693fde0987ff6e6a2c2b0e853579384"],"ref":"refs/changes/82/2582/2","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1505499670,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505499699,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/uploads/abort.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":121,"deletions":-25},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":19,"deletions":-3},{"file":"lib/uploads/get.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/uploads/redirect.js","type":"MODIFIED","insertions":72,"deletions":-8},{"file":"lib/uploads/upload.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"main.js","type":"MODIFIED","insertions":32,"deletions":-3},{"file":"sapi_manifests/muskie/template","type":"MODIFIED","insertions":4,"deletions":0}],"sizeInsertions":263,"sizeDeletions":-44},{"number":"3","revision":"1c151c8d1d032c1731786c1aa12c00f37a6d59d2","parents":["89de83de9693fde0987ff6e6a2c2b0e853579384"],"ref":"refs/changes/82/2582/3","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1505513619,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505513648,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/uploads/abort.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":216,"deletions":-30},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":19,"deletions":-3},{"file":"lib/uploads/get.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/uploads/redirect.js","type":"MODIFIED","insertions":124,"deletions":-24},{"file":"lib/uploads/upload.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"main.js","type":"MODIFIED","insertions":32,"deletions":-3},{"file":"sapi_manifests/muskie/template","type":"MODIFIED","insertions":9,"deletions":0}],"sizeInsertions":415,"sizeDeletions":-65},{"number":"4","revision":"5a1506b9280df4714b0427062f66a6cddb4ea823","parents":["89de83de9693fde0987ff6e6a2c2b0e853579384"],"ref":"refs/changes/82/2582/4","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1505514872,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505519389,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505514905,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"/COMMIT_MSG","line":9,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This shouldn\u0027t wrap."},{"file":"lib/uploads/abort.js","line":93,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"The style here seems to be \"Url\"."},{"file":"lib/uploads/abort.js","line":93,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Done"},{"file":"lib/uploads/commit.js","line":545,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Ditto."},{"file":"lib/uploads/commit.js","line":545,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Done"},{"file":"lib/uploads/common.js","line":139,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I think it might be worth saying up front here that although the uuid is itself unique, to preserve that this is a real directory structure, all of the APIs in Muskie require the full path except for the one resource that\u0027s used to map uuids to their full path."},{"file":"lib/uploads/common.js","line":139,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Done"},{"file":"lib/uploads/common.js","line":154,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"\"upload\""},{"file":"lib/uploads/common.js","line":154,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Done"},{"file":"lib/uploads/common.js","line":155,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Isn\u0027t it two, for the legacy case?"},{"file":"lib/uploads/common.js","line":155,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"I meant under the modern scheme. Updated to clarify."},{"file":"lib/uploads/common.js","line":159,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"\"character\""},{"file":"lib/uploads/common.js","line":159,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Done"},{"file":"lib/uploads/common.js","line":160,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I found this comma-separated phrase a little confusing.  Maybe \"the prefix length is encoded in the last character of the uuid, as opposed to some other character\" or something?"},{"file":"lib/uploads/common.js","line":160,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Done"},{"file":"lib/uploads/common.js","line":215,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"You can leave off the JSSTYLED if you use new RegExp() (though I\u0027m not sure it\u0027ll be cleaner)."},{"file":"lib/uploads/common.js","line":215,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"It still was complained about in `make check`."},{"file":"lib/uploads/common.js","line":215,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Sorry -- I meant that using the RegExp constructor, since the argument is a string, it\u0027s at least possible to break it over multiple lines."},{"file":"lib/uploads/common.js","line":215,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"All right. I think I\u0027m just going to leave it as if it\u0027s that\u0027s fine with you."},{"file":"lib/uploads/common.js","line":216,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"It seems like there\u0027s an extra uuid-looking field here that I wouldn\u0027t have expected.  What does this mean?"},{"file":"lib/uploads/common.js","line":216,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Is this definitely the right expression for an account login?  I thought we allowed dots and either dashes or underscores. (I\u0027m not sure what to check it against.)"},{"file":"lib/uploads/common.js","line":216,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"First question: This regex is used for URLs that end in stuff like \"commit\", \"abort\", and so on. Basically anything with the upload path that could be sent to the API.\n\nSecond question: We seem to be inconsistent about it. I updated it to use the scheme used for `stor` paths (at least for the account portion of it): https://github.com/joyent/manta-muskie/blob/4ba953577be8765a90228cc33d7fcc1dd232a23b/lib/common.js#L52."},{"file":"lib/uploads/common.js","line":230,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"It might be worth explaining the tradeoff.  I assume the main tradeoff is that a smaller prefix makes enumerating the MPUs faster (because it requires fewer requests), while a larger prefix better supports larger numbers of concurrent MPUs."},{"file":"lib/uploads/common.js","line":230,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Is the enumeration bit true? I would think many concurrent requests to shards for smaller result sets would be faster than fewer requests to fewer shards.\n\nAnother possible tradeoff is the time it takes to create an MPU -- the longer the prefix, the more likely you\u0027ll incur an additional directory creation request to make the prefix directory. That might not be that big of a deal, though."},{"file":"lib/uploads/common.js","line":230,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"For a given number of MPUs, I think a shorter prefix results in fewer requests.  For example, if you have 16,000 MPUs with evenly distributed uuids, and a prefix of 1 character, you\u0027d have to make 17 requests: one to list the top-level directory, and one to list the contents of each of the 16 prefix directories directories.  On the other hand, if you had a three-character prefix, you\u0027d need four requests just to page through the top-level directories.  On average, there would be about 4 MPUs in each directory, so you\u0027d have to make another 4096 requests.  If I did the math right, there would be significantly more requests to make.\n\nSince we bound the size of any result set on the server, I don\u0027t think the result set size has a big impact on request latency, particularly client-side latency (where the round trip time to the server may represent a big fraction of the overall time).  I don\u0027t have data about that, though."},{"file":"lib/uploads/common.js","line":230,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Sounds good. I added a couple sentences here."},{"file":"lib/uploads/common.js","line":607,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"How about asserting that prefixLen is between 1 and 4?"},{"file":"lib/uploads/common.js","line":607,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Done"},{"file":"lib/uploads/common.js","line":624,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Is there a test for attempting to request (or translate) an MPU id with non-hex digits, to make sure we fail that gracefully instead of blowing this assertion?"},{"file":"lib/uploads/common.js","line":624,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Every endpoint has a test for a non-existent uuid as well as one that uses the word \"bogus\" as its uuid. (For example: https://github.com/joyent/manta-muskie/blob/4ba953577be8765a90228cc33d7fcc1dd232a23b/test/mpu/commit.test.js#L769-L818).\n\nThat said, I\u0027m not super confident we would never blow this assertion. I would welcome more testing suggestions in this regard."},{"file":"lib/uploads/common.js","line":624,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"That sounds good, at least for now."},{"file":"lib/uploads/common.js","line":663,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This ship may have sailed in this file, but I usually call this \"args\" when they\u0027re not optional."},{"file":"lib/uploads/common.js","line":663,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"I think it has for now, but I do think that\u0027s good a point. Maybe I\u0027ll wrap it into a future change."},{"file":"lib/uploads/common.js","line":669,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Does it make sense for this to be an \"else\" for the following \"if\"?"},{"file":"lib/uploads/common.js","line":669,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Done"},{"file":"lib/uploads/common.js","line":732,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Should we validate that `jsprim.startsWith(matches[3], matches[2])`"},{"file":"lib/uploads/common.js","line":732,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Thoughts on that?"},{"file":"lib/uploads/common.js","line":732,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Done"},{"file":"lib/uploads/common.js","line":732,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Sorry, missed this."},{"file":"lib/uploads/common.js","line":1334,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Same comment as elsewhere."},{"file":"lib/uploads/common.js","line":1334,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Done"},{"file":"lib/uploads/get.js","line":47,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Same as elsewhere."},{"file":"lib/uploads/get.js","line":47,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Done"},{"file":"lib/uploads/redirect.js","line":167,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Are we sure this is what we want?  Will this stop us from running the \u0027audit\u0027 handler and other \u0027after\u0027 handlers?"},{"file":"lib/uploads/redirect.js","line":167,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"I tested a redirect on an older upload and it seems okay:\n\nupload path: /jordantestuser/uploads/0/02ede91d-f8cf-4614-a52f-9bbf4cb1189d\n\naudit log entry from the node-manta client\u0027s redirect:\n[2017-09-16T03:37:12.013Z]  INFO: muskie/HttpServer/10512 on 9857d980-a49b-c317-b313-d1649b6ed333: handled: 301 (audit\u003dtrue, _audit\u003dtrue, operation\u003dheadaccountuploadsaf098af094af094af094af0912100, logicalRemoteAddress\u003d172.27.13.143, remoteAddress\u003d172.27.13.143, remotePort\u003d57439, reqHeaderLength\u003d723, resHeaderLength\u003d227, latency\u003d7, route\u003dheadaccountuploadsaf098af094af094af094af0912100, req.owner\u003dfdfe27dc-64bc-11e6-90f8-47c1ceb05dd8)\n    HEAD /jordantestuser/uploads/02ede91d-f8cf-4614-a52f-9bbf4cb1189d HTTP/1.1\n    accept: */*\n    x-request-id: 0ba9fc66-8f1a-4e56-a88b-bfa53112733d\n    date: Sat, 16 Sep 2017 03:37:11 GMT\n    authorization: Signature keyId\u003d\"/jordantestuser/keys/46:f4:46:9a:16:ef:42:ab:4c:e6:8a:52:4d:67:c1:9a\",algorithm\u003d\"rsa-sha256\",headers\u003d\"date\",signature\u003d\"jtRQlIckMkl/BuTOIqaxUp9mhvHbm2HA6XBOOhilREPgkFsv2OLR57cnWN/DAWTPFji03WJmzxvsw9eV2EAojPatHog4ZcWMxHUVmATR4IOwhgNpzJ8t9nOWIyexLqqzZEaGwTGHMTYptuYxORZLIfWgKpgIiQDln+PhYZOkTVB2lQyUU/shLe116U3LVbsrs6s3LJINgurFuBwp42S7koUZc+ALfUuxwOcwZkH2Ie3T/KYJflUZKpwEChVnpDQxtt/F4HIQEUJJm2damfZOagxYsuOojBEYGJnpUwKqpmvbDFrj+90MaZmTfmaioP5jirQIcv39EbzwTuZdZRSSqw\u003d\u003d\"\n    user-agent: restify/1.4.1 (ia32-sunos; v8/3.14.5.11; OpenSSL/1.0.1u) node/0.10.48\n    accept-version: ~1.0\n    host: 172.27.13.143:8080\n    connection: keep-alive\n    --\n    HTTP/1.1 301 Moved Permanently\n    location: /jordantestuser/uploads/0/02ede91d-f8cf-4614-a52f-9bbf4cb1189d\n    date: Sat, 16 Sep 2017 03:37:12 GMT\n    server: Manta\n    x-request-id: 0ba9fc66-8f1a-4e56-a88b-bfa53112733d\n    x-response-time: 7\n    x-server-name: 9857d980-a49b-c317-b313-d1649b6ed333\n    --\n    req.caller: {\n      \"login\": \"jordantestuser\",\n      \"uuid\": \"fdfe27dc-64bc-11e6-90f8-47c1ceb05dd8\",\n      \"groups\": [],\n      \"user\": null\n    }\n    --\n    req.timers: {\n      \"earlySetup\": 183,\n      \"parseDate\": 21,\n      \"parseQueryString\": 20,\n      \"handler-3\": 125,\n      \"checkIfPresigned\": 3,\n      \"enforceSSL\": 3,\n      \"ensureDependencies\": 5,\n      \"_authSetup\": 4,\n      \"preSignedUrl\": 3,\n      \"checkAuthzScheme\": 11,\n      \"parseAuthTokenHandler\": 40,\n      \"signatureHandler\": 24,\n      \"parseKeyId\": 12,\n      \"loadCaller\": 67,\n      \"verifySignature\": 609,\n      \"parseHttpAuthToken\": 9,\n      \"loadOwner\": 61,\n      \"getActiveRoles\": 14,\n      \"gatherContext\": 23,\n      \"setup\": 78,\n      \"parseId\": 14,\n      \"checkUploadDir\": 67,\n      \"checkUploadDirLegacy\": 6268\n    }"},{"file":"lib/uploads/upload.js","line":104,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Same comment as elsewhere."},{"file":"sapi_manifests/muskie/template","line":161,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"The indent here seems odd."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/uploads/abort.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":209,"deletions":-29},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":19,"deletions":-3},{"file":"lib/uploads/get.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/uploads/redirect.js","type":"MODIFIED","insertions":138,"deletions":-22},{"file":"lib/uploads/upload.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"main.js","type":"MODIFIED","insertions":24,"deletions":-3},{"file":"sapi_manifests/muskie/template","type":"MODIFIED","insertions":9,"deletions":0}],"sizeInsertions":414,"sizeDeletions":-62},{"number":"5","revision":"39f7f3dedf1a32309e248aa88bcc628cb3cbcf36","parents":["89de83de9693fde0987ff6e6a2c2b0e853579384"],"ref":"refs/changes/82/2582/5","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1505529264,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1505529307,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/mpu/helper.js","line":139,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"missing space between keyword and paren"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/uploads/abort.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":210,"deletions":-29},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":19,"deletions":-3},{"file":"lib/uploads/get.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/uploads/redirect.js","type":"MODIFIED","insertions":146,"deletions":-21},{"file":"lib/uploads/upload.js","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"main.js","type":"MODIFIED","insertions":24,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/muskie/template","type":"MODIFIED","insertions":9,"deletions":0},{"file":"test/mpu/.commit.test.js.swp","type":"ADDED","insertions":0,"deletions":0},{"file":"test/mpu/abort.test.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/mpu/commit.test.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/mpu/get.test.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/mpu/helper.js","type":"MODIFIED","insertions":29,"deletions":-7},{"file":"test/mpu/upload.test.js","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":488,"sizeDeletions":-95},{"number":"6","revision":"28f0796e382ffcf5044c470f7e3ba974bb0449d7","parents":["89de83de9693fde0987ff6e6a2c2b0e853579384"],"ref":"refs/changes/82/2582/6","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1505529450,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505529483,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/uploads/abort.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":210,"deletions":-29},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":19,"deletions":-3},{"file":"lib/uploads/get.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/uploads/redirect.js","type":"MODIFIED","insertions":146,"deletions":-21},{"file":"lib/uploads/upload.js","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"main.js","type":"MODIFIED","insertions":24,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/muskie/template","type":"MODIFIED","insertions":9,"deletions":0},{"file":"test/mpu/.commit.test.js.swp","type":"ADDED","insertions":0,"deletions":0},{"file":"test/mpu/abort.test.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/mpu/commit.test.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/mpu/get.test.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/mpu/helper.js","type":"MODIFIED","insertions":29,"deletions":-7},{"file":"test/mpu/upload.test.js","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":488,"sizeDeletions":-95},{"number":"7","revision":"65177930db6d678d9cebdf41bf092fbb2526c879","parents":["89de83de9693fde0987ff6e6a2c2b0e853579384"],"ref":"refs/changes/82/2582/7","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1505529777,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505529805,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/uploads/abort.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":210,"deletions":-29},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":19,"deletions":-3},{"file":"lib/uploads/get.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/uploads/redirect.js","type":"MODIFIED","insertions":146,"deletions":-21},{"file":"lib/uploads/upload.js","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"main.js","type":"MODIFIED","insertions":24,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/muskie/template","type":"MODIFIED","insertions":9,"deletions":0},{"file":"test/mpu/abort.test.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/mpu/commit.test.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/mpu/get.test.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/mpu/helper.js","type":"MODIFIED","insertions":29,"deletions":-7},{"file":"test/mpu/upload.test.js","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":488,"sizeDeletions":-95},{"number":"8","revision":"2b77d7a8be9ea698f16fc70ddabcc4d9e37c7f38","parents":["89de83de9693fde0987ff6e6a2c2b0e853579384"],"ref":"refs/changes/82/2582/8","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1505534662,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505537640,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505534711,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"/COMMIT_MSG","line":9,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This shouldn\u0027t be wrapped."},{"file":"/COMMIT_MSG","line":9,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Done"},{"file":"lib/uploads/redirect.js","line":36,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This is a great comment."},{"file":"lib/uploads/redirect.js","line":36,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Thanks! That is high praise coming from you."},{"file":"lib/uploads/redirect.js","line":60,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"\"is\"?  Or just leave this out?"},{"file":"lib/uploads/redirect.js","line":60,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Done"},{"file":"test/mpu/helper.js","line":140,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I would have thought this would be 1?"},{"file":"test/mpu/helper.js","line":140,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Done"},{"file":"test/mpu/helper.js","line":145,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Is this a typo?"},{"file":"test/mpu/helper.js","line":145,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/uploads/abort.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":216,"deletions":-29},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":19,"deletions":-3},{"file":"lib/uploads/get.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/uploads/redirect.js","type":"MODIFIED","insertions":168,"deletions":-21},{"file":"lib/uploads/upload.js","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"main.js","type":"MODIFIED","insertions":24,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/muskie/template","type":"MODIFIED","insertions":9,"deletions":0},{"file":"test/mpu/abort.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/mpu/commit.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/mpu/get.test.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/mpu/helper.js","type":"MODIFIED","insertions":29,"deletions":-7},{"file":"test/mpu/upload.test.js","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":519,"sizeDeletions":-99},{"number":"9","revision":"b7dbcda1f9732c110231e3f954f9dc9e2b77717b","parents":["89de83de9693fde0987ff6e6a2c2b0e853579384"],"ref":"refs/changes/82/2582/9","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1505598967,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505599006,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/uploads/abort.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":223,"deletions":-29},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":19,"deletions":-3},{"file":"lib/uploads/get.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/uploads/redirect.js","type":"MODIFIED","insertions":168,"deletions":-21},{"file":"lib/uploads/upload.js","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"main.js","type":"MODIFIED","insertions":24,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/muskie/template","type":"MODIFIED","insertions":9,"deletions":0},{"file":"test/mpu/abort.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/mpu/commit.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/mpu/get.test.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/mpu/helper.js","type":"MODIFIED","insertions":29,"deletions":-7},{"file":"test/mpu/upload.test.js","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":526,"sizeDeletions":-99},{"number":"10","revision":"1a7c9439ce41729534d5984af78b5567b82ee935","parents":["4ba953577be8765a90228cc33d7fcc1dd232a23b"],"ref":"refs/changes/82/2582/10","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1505599307,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505599467,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1505604325,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505599350,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/uploads/abort.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":223,"deletions":-29},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":19,"deletions":-3},{"file":"lib/uploads/get.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/uploads/redirect.js","type":"MODIFIED","insertions":168,"deletions":-21},{"file":"lib/uploads/upload.js","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"main.js","type":"MODIFIED","insertions":24,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/muskie/template","type":"MODIFIED","insertions":9,"deletions":0},{"file":"test/mpu/abort.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/mpu/commit.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/mpu/get.test.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/mpu/helper.js","type":"MODIFIED","insertions":29,"deletions":-7},{"file":"test/mpu/upload.test.js","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":526,"sizeDeletions":-99},{"number":"11","revision":"9064133d1bf437810d97274fcf48e01b766059f2","parents":["4ba953577be8765a90228cc33d7fcc1dd232a23b"],"ref":"refs/changes/82/2582/11","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1505604933,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505599467,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1505604325,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505599350,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1505604946,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/uploads/abort.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/commit.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/uploads/common.js","type":"MODIFIED","insertions":223,"deletions":-29},{"file":"lib/uploads/create.js","type":"MODIFIED","insertions":19,"deletions":-3},{"file":"lib/uploads/get.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/uploads/redirect.js","type":"MODIFIED","insertions":168,"deletions":-21},{"file":"lib/uploads/upload.js","type":"MODIFIED","insertions":32,"deletions":-27},{"file":"main.js","type":"MODIFIED","insertions":24,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/muskie/template","type":"MODIFIED","insertions":9,"deletions":0},{"file":"test/mpu/abort.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/mpu/commit.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/mpu/get.test.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/mpu/helper.js","type":"MODIFIED","insertions":29,"deletions":-7},{"file":"test/mpu/upload.test.js","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":526,"sizeDeletions":-99}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}]}