{"project":"joyent/sdcadm","branch":"master","id":"I15bc1c85511709f20ac8a73f55b7a07436f8e16c","number":"1392","subject":"TOOLS-1644 `sdcadm create portolan` should be used for portolan HA setup Reviewed by: Trent Mick \u003ctrent.mick@joyent.com\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/1392","commitMessage":"TOOLS-1644 `sdcadm create portolan` should be used for portolan HA setup\nReviewed by: Trent Mick \u003ctrent.mick@joyent.com\u003e\n","createdOn":1485973358,"lastUpdated":1486408765,"open":false,"status":"MERGED","comments":[{"timestamp":1485973358,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1485973390,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1486124400,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1486124437,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2:\n\n\"make check\" passed ok"},{"timestamp":1486124481,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\n@trent: My intention is to use some code of this issue for TOOLS-1645 so feel free to proceed with this review and I\u0027ll update TOOLS-1645 accordingly"},{"timestamp":1486172796,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(2 comments)"},{"timestamp":1486383036,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 3."},{"timestamp":1486383069,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1486383111,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\n(2 comments)\n\nApplied the suggested changes. Thanks for the review Trent!"},{"timestamp":1486405881,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1486408765,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"3","revision":"15bc1c85511709f20ac8a73f55b7a07436f8e16c","parents":["67a2f42b011d95e856210cbe662252234bd9d5a4"],"ref":"refs/changes/92/1392/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1486383036,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1486383069,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1486405881,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1486405881,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1486408765,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":22,"deletions":-2},{"file":"lib/cli/do_create.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/procedures/create-service-instance-v1.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":16,"deletions":-10}],"sizeInsertions":41,"sizeDeletions":-15},"patchSets":[{"number":"1","revision":"afdd8b630347c111fa3e063dddfa6dfbacaf4605","parents":["a57e0eaa198414a91d2c1594cc99f06f7832bca1"],"ref":"refs/changes/92/1392/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1485973358,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1485973390,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":22,"deletions":-2},{"file":"lib/cli/do_create.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/procedures/create-service-instance-v1.js","type":"MODIFIED","insertions":14,"deletions":-8},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":16,"deletions":-10}],"sizeInsertions":54,"sizeDeletions":-22},{"number":"2","revision":"2e51fe6992e10116aa021cfd6950c3eb0ccd4ceb","parents":["67a2f42b011d95e856210cbe662252234bd9d5a4"],"ref":"refs/changes/92/1392/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1486124400,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1485973390,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/procedures/create-service-instance-v1.js","line":76,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Do we need this guard for cmon, cns, and portolan? If post-setup hasn\u0027t been run for those, then there won\u0027t be a SAPI service for them, right? So they should get:\n\n[root@headnode (nightly-1) ~]# sdcadm create asdf\nsdcadm create: error: unknown service: asdf\n[root@headnode (nightly-1) ~]# sdcadm create portolan\nsdcadm create: error: unknown service: portolan"},{"file":"lib/procedures/create-service-instance-v1.js","line":76,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Well, is there any possibility of including them in the future as default Triton services? Anyway, I\u0027ll take back the CloudAPI guard for now and we can decide later."},{"file":"lib/procedures/index.js","line":612,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"\"ha-binder\""},{"file":"lib/procedures/index.js","line":612,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":22,"deletions":-2},{"file":"lib/cli/do_create.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/procedures/create-service-instance-v1.js","type":"MODIFIED","insertions":14,"deletions":-8},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":16,"deletions":-10}],"sizeInsertions":54,"sizeDeletions":-22},{"number":"3","revision":"15bc1c85511709f20ac8a73f55b7a07436f8e16c","parents":["67a2f42b011d95e856210cbe662252234bd9d5a4"],"ref":"refs/changes/92/1392/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1486383036,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1486383069,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1486405881,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1486405881,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1486408765,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":22,"deletions":-2},{"file":"lib/cli/do_create.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/procedures/create-service-instance-v1.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":16,"deletions":-10}],"sizeInsertions":41,"sizeDeletions":-15}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}