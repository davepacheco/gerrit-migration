{"project":"joyent/illumos-joyent","branch":"master","id":"I220e79679a44a617484cab6361f24b22b9708ebc","number":"264","subject":"OS-5571 incorrect task count in cgroup 0 Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e","owner":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"url":"https://cr.joyent.us/264","commitMessage":"OS-5571 incorrect task count in cgroup 0\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n","createdOn":1470854772,"lastUpdated":1470859427,"open":false,"status":"MERGED","comments":[{"timestamp":1470854772,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 1."},{"timestamp":1470858821,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1470859013,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\nAfter this fix, running \"systemctl daemon-reexec\" does not cause the panic on a DEBUG kernel. In addition, after a boot up, I can see that systemd remains in the correct cgroup by inspecting the /sys/fs/cgroup/systemd/init.scope/cgroup.procs file."},{"timestamp":1470859088,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1: Integration-Approval+1"},{"timestamp":1470859417,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2: Patch Set 1 was rebased"},{"timestamp":1470859427,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jerry Jelinek"}],"currentPatchSet":{"number":"2","revision":"d11efe0e35e7310c2ca8e3792d16611410d90219","parents":["1b1dfef1529814ddf87f4dc0ca95e8463ebae47c"],"ref":"refs/changes/64/264/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1470859417,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470858821,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470859088,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1470859427,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/uts/common/brand/lx/cgroups/cgrps.h","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/cgroups/cgrps_vfsops.c","type":"MODIFIED","insertions":24,"deletions":-4},{"file":"usr/src/uts/common/brand/lx/cgroups/cgrps_vnops.c","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":27,"sizeDeletions":-7},"patchSets":[{"number":"1","revision":"220e79679a44a617484cab6361f24b22b9708ebc","parents":["6b7ee0b56c306e2caa5b0f31d2186f12f9416e79"],"ref":"refs/changes/64/264/1","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1470854772,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470858821,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470859088,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/uts/common/brand/lx/cgroups/cgrps.h","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/cgroups/cgrps_vfsops.c","type":"MODIFIED","insertions":24,"deletions":-4},{"file":"usr/src/uts/common/brand/lx/cgroups/cgrps_vnops.c","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":27,"sizeDeletions":-7},{"number":"2","revision":"d11efe0e35e7310c2ca8e3792d16611410d90219","parents":["1b1dfef1529814ddf87f4dc0ca95e8463ebae47c"],"ref":"refs/changes/64/264/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1470859417,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"SUBM","value":"1","grantedOn":1470859427,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470858821,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470859088,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/uts/common/brand/lx/cgroups/cgrps.h","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/cgroups/cgrps_vfsops.c","type":"MODIFIED","insertions":24,"deletions":-4},{"file":"usr/src/uts/common/brand/lx/cgroups/cgrps_vnops.c","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":27,"sizeDeletions":-7}],"allReviewers":[{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}]}