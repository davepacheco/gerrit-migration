{"project":"joyent/illumos-joyent","branch":"master","id":"Ifbc5848b477b441a7e8f5e25096c81994887cd09","number":"1830","subject":"OS-6068 cpuset functions should be more strict about input Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Approved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e","owner":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"url":"https://cr.joyent.us/1830","commitMessage":"OS-6068 cpuset functions should be more strict about input\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1493060182,"lastUpdated":1493076882,"open":false,"status":"MERGED","comments":[{"timestamp":1493060182,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 1."},{"timestamp":1493060819,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1493068206,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\nI tested this against the recently-committed cpumap functionality added to lx_sysfs.  Because it walks the entire NCPU space backwards, checking entries in a cpuset_t, it was a convenient codepath to induce improper inputs.  With _ncpu adjusted to 0xff via mdb-kw, the cpu_in_set guard successfully activates to protect the logic from a bogus offset lookup."},{"timestamp":1493071299,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1: Integration-Approval+1"},{"timestamp":1493075403,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1493075449,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1493076882,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Patrick Mooney"}],"currentPatchSet":{"number":"3","revision":"fbc5848b477b441a7e8f5e25096c81994887cd09","parents":["9bca11289f890427fa4f77af8704560636e4c246"],"ref":"refs/changes/30/1830/3","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1493075449,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1493060819,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1493071299,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1493076882,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/os/cpu.c","type":"MODIFIED","insertions":16,"deletions":-9},{"file":"usr/src/uts/common/sys/cpuvar.h","type":"MODIFIED","insertions":9,"deletions":-9}],"sizeInsertions":25,"sizeDeletions":-18},"patchSets":[{"number":"1","revision":"bc573fcf8b5d7616da6e6f07e0ff57cd4d2d533d","parents":["73aad7bcbbe52de3391e9d36717401faa3fbed13"],"ref":"refs/changes/30/1830/1","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1493060182,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1493060819,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1493071299,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/os/cpu.c","type":"MODIFIED","insertions":16,"deletions":-9},{"file":"usr/src/uts/common/sys/cpuvar.h","type":"MODIFIED","insertions":9,"deletions":-9}],"sizeInsertions":25,"sizeDeletions":-18},{"number":"2","revision":"831ca17eb84e1ec42ca3eae1070a7235a2f365b6","parents":["9bca11289f890427fa4f77af8704560636e4c246"],"ref":"refs/changes/30/1830/2","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1493075403,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1493060819,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1493071299,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/os/cpu.c","type":"MODIFIED","insertions":16,"deletions":-9},{"file":"usr/src/uts/common/sys/cpuvar.h","type":"MODIFIED","insertions":9,"deletions":-9}],"sizeInsertions":25,"sizeDeletions":-18},{"number":"3","revision":"fbc5848b477b441a7e8f5e25096c81994887cd09","parents":["9bca11289f890427fa4f77af8704560636e4c246"],"ref":"refs/changes/30/1830/3","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1493075449,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1493060819,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1493071299,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1493076882,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/os/cpu.c","type":"MODIFIED","insertions":16,"deletions":-9},{"file":"usr/src/uts/common/sys/cpuvar.h","type":"MODIFIED","insertions":9,"deletions":-9}],"sizeInsertions":25,"sizeDeletions":-18}],"allReviewers":[{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}]}