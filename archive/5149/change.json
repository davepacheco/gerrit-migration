{"project":"joyent/illumos-joyent","branch":"master","id":"I4650832b29268c92656cbcbc0b543402b8c3f6fa","number":"5149","subject":"OS-7402 libvmmapi: vm_open destroys VM on error, vm_close is missing Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Reviewed by: John Levon \u003cjohn.levon@joyent.com\u003e Approved by: John Levon \u003cjohn.levon@joyent.com\u003e","owner":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"url":"https://cr.joyent.us/5149","commitMessage":"OS-7402 libvmmapi: vm_open destroys VM on error, vm_close is missing\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nReviewed by: John Levon \u003cjohn.levon@joyent.com\u003e\nApproved by: John Levon \u003cjohn.levon@joyent.com\u003e\n","createdOn":1543418918,"lastUpdated":1545309617,"open":false,"status":"MERGED","comments":[{"timestamp":1543418918,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Uploaded patch set 1."},{"timestamp":1543426172,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1543510405,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Uploaded patch set 2."},{"timestamp":1543510518,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 2:\n\n(2 comments)"},{"timestamp":1543522315,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1543574767,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 3: Patch Set 2 was rebased"},{"timestamp":1543574796,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 4: Patch Set 3 was rebased"},{"timestamp":1543577985,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1544095641,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 5: Patch Set 4 was rebased"},{"timestamp":1545236055,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 5: Integration-Approval+1"},{"timestamp":1545299941,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 6: Patch Set 5 was rebased"},{"timestamp":1545301263,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Uploaded patch set 7: Commit message was updated."},{"timestamp":1545309617,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Hans Rosenfeld"}],"currentPatchSet":{"number":"7","revision":"4650832b29268c92656cbcbc0b543402b8c3f6fa","parents":["c80a96f941e57993b407b02fe55a9f725a070282"],"ref":"refs/changes/49/5149/7","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1545301263,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1543522315,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1543577985,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1545236055,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"SUBM","value":"1","grantedOn":1545309617,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/vmmapi.c","type":"MODIFIED","insertions":22,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/vmmapi.h","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":26,"sizeDeletions":0},"patchSets":[{"number":"1","revision":"9ac5cb95bafad85545891e99ca51e7f6a1f0b265","parents":["da282d3f6dfa6a2b54bb538785c9a414ef6d90bd"],"ref":"refs/changes/49/5149/1","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1543418918,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/lib/libvmmapi/common/vmmapi.c","line":185,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"perhaps include a little comment here?"},{"file":"usr/src/lib/libvmmapi/common/vmmapi.c","line":185,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Done"},{"file":"usr/src/lib/libvmmapi/common/vmmapi.c","line":197,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"(void) to ignore the return value"},{"file":"usr/src/lib/libvmmapi/common/vmmapi.c","line":197,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/vmmapi.c","type":"MODIFIED","insertions":17,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/vmmapi.h","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":21,"sizeDeletions":0},{"number":"2","revision":"74f9febeebd1c32fbfcc2498dd20c2899f4e1e18","parents":["c59156f063f64a55461316fe50ac8a90d35f1fb3"],"ref":"refs/changes/49/5149/2","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1543510405,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1543522315,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/vmmapi.c","type":"MODIFIED","insertions":22,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/vmmapi.h","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":26,"sizeDeletions":0},{"number":"3","revision":"4d02dc4db4e024afe6e15b8258eb6bb36371aaab","parents":["cc78e0e8a9ef1c3c42ba267e1850ca73fa4e0395"],"ref":"refs/changes/49/5149/3","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1543574767,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1543522315,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/vmmapi.c","type":"MODIFIED","insertions":22,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/vmmapi.h","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":26,"sizeDeletions":0},{"number":"4","revision":"bcd3dcb788177fed373b2506ede4b14b15e802a7","parents":["7bf2f4eb58404550e47c1a8d56a7950bd5173d6b"],"ref":"refs/changes/49/5149/4","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1543574796,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1543522315,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1543577985,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/vmmapi.c","type":"MODIFIED","insertions":22,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/vmmapi.h","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":26,"sizeDeletions":0},{"number":"5","revision":"4aed0ac69da9a7860f8cab20cec3f819128e2169","parents":["b3bd764962b86d7c9b6cb4939d04a3bde0ca6519"],"ref":"refs/changes/49/5149/5","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1544095641,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1543522315,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1543577985,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1545236055,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/vmmapi.c","type":"MODIFIED","insertions":22,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/vmmapi.h","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":26,"sizeDeletions":0},{"number":"6","revision":"92ef40032185e5d338f2c2770ba4add0a40b8a24","parents":["c80a96f941e57993b407b02fe55a9f725a070282"],"ref":"refs/changes/49/5149/6","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1545299941,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1543522315,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1543577985,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1545236055,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/vmmapi.c","type":"MODIFIED","insertions":22,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/vmmapi.h","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":26,"sizeDeletions":0},{"number":"7","revision":"4650832b29268c92656cbcbc0b543402b8c3f6fa","parents":["c80a96f941e57993b407b02fe55a9f725a070282"],"ref":"refs/changes/49/5149/7","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1545301263,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1543522315,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1545309617,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1543577985,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1545236055,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/vmmapi.c","type":"MODIFIED","insertions":22,"deletions":0},{"file":"usr/src/lib/libvmmapi/common/vmmapi.h","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":26,"sizeDeletions":0}],"allReviewers":[{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}]}