From 2f694a564b61c38d79007ee7b88c8c349446947e Mon Sep 17 00:00:00 2001
From: Orlando Vazquez <ovazquez@gmail.com>
Date: Wed, 27 Mar 2019 11:04:45 -0700
Subject: [PATCH] TRITON-1289 sdc-vmapi runtests needs a mechanism to run
 without fabrics

---
 test/vms.full.test.js | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

diff --git a/test/vms.full.test.js b/test/vms.full.test.js
index f1712dd..1b3fcb8 100644
--- a/test/vms.full.test.js
+++ b/test/vms.full.test.js
@@ -2882,14 +2882,13 @@ exports.destroy_test_vms_final = function (t) {
 exports.find_fabric_network = function (t) {
     assert.arrayOfObject(NETWORKS, 'NETWORKS');
 
-    // Find a fabric network that is owned by CUSTOMER.
+    // Find a fabric network that is owned by CUSTOMER. If none is found, skip
+    // the tests that depend on the availability of one.
     fabricNetwork = NETWORKS.find(function _findFabricNetwork(n) {
         return n.fabric === true && Array.isArray(n.owner_uuids) &&
             n.owner_uuids.indexOf(CUSTOMER) >= 0;
     });
 
-    t.ok(fabricNetwork, 'found a fabric network');
-
     if (fabricNetwork) {
         assert.object(fabricNetwork, 'fabricNetwork');
         assert.string(fabricNetwork.name, 'fabricNetwork.name');
-- 
2.21.0

