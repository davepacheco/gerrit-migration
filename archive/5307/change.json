{"project":"joyent/illumos-joyent","branch":"master","id":"I6cf64ca03e24fc61dedf0e3705acd6716ce4145a","number":"5307","subject":"OS-7478 Add rust demangling support Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Approved by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e","owner":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"url":"https://cr.joyent.us/5307","commitMessage":"OS-7478 Add rust demangling support\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nApproved by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e\n","createdOn":1546540967,"lastUpdated":1553708195,"open":false,"status":"MERGED","comments":[{"timestamp":1546540967,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 1."},{"timestamp":1546541264,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 1:\n\nJust one comment (since it\u0027ll probably come up) -- the intention is (in a separate change yet to be done) migrate the C++ demangling code to use strview_t and custr_t\u0027s directly since those two are a bit cleaner than the str.[ch] code."},{"timestamp":1546553821,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(43 comments)"},{"timestamp":1546633232,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 1:\n\n(31 comments)"},{"timestamp":1546633245,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 2."},{"timestamp":1546706313,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(6 comments)"},{"timestamp":1546707112,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2:\n\n(7 comments)\n\nThanks for most of the clean up. This is looking pretty good."},{"timestamp":1546889970,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 3."},{"timestamp":1546890097,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 3:\n\nI\u0027ve relaxed the NUL-terminated string requirement for the demanglers, but still require it for demangle() (since that fits with all the current uses) + tried to document that.  A second entry point could be created later if we need such support."},{"timestamp":1546908888,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3:\n\n(2 comments)"},{"timestamp":1546910819,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 3:\n\n(2 comments)"},{"timestamp":1546910916,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 4."},{"timestamp":1546977516,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1550014411,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 5: Patch Set 4 was rebased."},{"timestamp":1550033354,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 6."},{"timestamp":1550074429,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1550895719,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 7."},{"timestamp":1551205630,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 7: Code-Review+1"},{"timestamp":1551913494,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 8: Commit message was updated."},{"timestamp":1553625480,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 8: Integration-Approval+1"},{"timestamp":1553625829,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 9: Commit message was updated."},{"timestamp":1553626227,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 10."},{"timestamp":1553636627,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 10: Code-Review+1"},{"timestamp":1553707052,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 11: Patch Set 10 was rebased."},{"timestamp":1553707650,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 11: Integration-Approval+1"},{"timestamp":1553707662,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 11: -Integration-Approval"},{"timestamp":1553708005,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 11: Integration-Approval+1"},{"timestamp":1553708135,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 12: Commit message was updated."},{"timestamp":1553708195,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jason King"}],"currentPatchSet":{"number":"12","revision":"6cf64ca03e24fc61dedf0e3705acd6716ce4145a","parents":["48514b9d3e7aeee085e365e879a73a9e4873323d"],"ref":"refs/changes/07/5307/12","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1553708135,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553636627,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553708005,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1553708195,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/dis/dis_util.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/cmd/mdb/common/mdb/mdb_cmds.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/mdb/common/mdb/mdb_demangle.c","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"usr/src/cmd/sgs/elfdump/common/elfdump.msg","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.msg","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/lib/libdemangle/Makefile.com","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/cxx.c","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/demangle-sys.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/demangle.c","type":"MODIFIED","insertions":110,"deletions":-24},{"file":"usr/src/lib/libdemangle/common/demangle_int.h","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/rust.c","type":"ADDED","insertions":543,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.c","type":"ADDED","insertions":107,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.h","type":"ADDED","insertions":140,"deletions":0},{"file":"usr/src/lib/libdemangle/common/util.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/man/man1/dis.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/dump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/elfdump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/gprof.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/nm.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/pvs.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/pkg/manifests/system-test-utiltest.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/test/util-tests/tests/demangle/Makefile","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","type":"ADDED","insertions":214,"deletions":0}],"sizeInsertions":1181,"sizeDeletions":-54},"patchSets":[{"number":"1","revision":"07b1d84610315f1bf66433d0c0785e90e16767ab","parents":["49fd077d47fce4b0842adae86e7f8c3426ec2bb1"],"ref":"refs/changes/07/5307/1","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1546540967,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/cmd/mdb/common/mdb/mdb_demangle.c","line":27,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"There\u0027s already a Joyent copyright below."},{"file":"usr/src/cmd/mdb/common/mdb/mdb_demangle.c","line":27,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/lib/libdemangle/common/demangle.c","line":32,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Any reason this is stdout by default?"},{"file":"usr/src/lib/libdemangle/common/demangle.c","line":32,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Not really -- I wasn\u0027t aware of any convention -- would stderr be better?"},{"file":"usr/src/lib/libdemangle/common/demangle.c","line":32,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Well, there are tradeoffs between different options. Normally I would debug to stderr, but maybe you want to make sure that demangled output and stdout are intermingled for easier use."},{"file":"usr/src/lib/libdemangle/common/demangle.c","line":50,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I would create a static panic string for your library that you have the information in if that\u0027s what you want to do and have it set that with information ala what I do in libvarpd.\n\nHowever, why can\u0027t you return NULL and have consumers just deal with it if you\u0027re trying to use this on untrusted input or just return \"\u003cunknown\u003e\" or similar?"},{"file":"usr/src/lib/libdemangle/common/demangle.c","line":81,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Why are we using str here instead of p? Shouldn\u0027t we only care about it from the point where we are in p? In fact, why have both p and str?"},{"file":"usr/src/lib/libdemangle/common/demangle.c","line":90,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"You\u0027ve been given an explicit length for the string in n. Shouldn\u0027t we be using it to see if it\u0027s safe to dereference this?"},{"file":"usr/src/lib/libdemangle/common/demangle.c","line":90,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"str is still expected to be NULL terminated -- the length is since we otherwise keep calling strlen() on the same string several times.\n\nSince `p` should be the last character and should \u003d\u003d \u0027E\u0027, just seemed a bit more obvious to mean \u0027this should be at the end\u0027."},{"file":"usr/src/lib/libdemangle/common/demangle.c","line":90,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"OK, if str is supposed to be null terminated, then I really wouldn\u0027t give folks a length argument at all. I get you\u0027re trying to save the strlen, but that to me, when seeing that pattern implies that the string is not necessarily null terminated and instead bounded by its length there."},{"file":"usr/src/lib/libdemangle/common/demangle.c","line":139,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Why even bother having this return a value?"},{"file":"usr/src/lib/libdemangle/common/demangle.c","line":139,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Habit I suppose :)"},{"file":"usr/src/lib/libdemangle/common/demangle.c","line":147,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Presumably you want an fflush before you unlock everything?"},{"file":"usr/src/lib/libdemangle/common/demangle.c","line":147,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Yeah, probably shouldn\u0027t rely on the stream setting."},{"file":"usr/src/lib/libdemangle/common/demangle_int.h","line":37,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I\u0027m not sure why this needs to be here. It seems like the only user of it is in the implementation of demdebug."},{"file":"usr/src/lib/libdemangle/common/demangle_int.h","line":37,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/lib/libdemangle/common/rust.c","line":42,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Should be const to make sure nothing misuses this."},{"file":"usr/src/lib/libdemangle/common/rust.c","line":42,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/lib/libdemangle/common/rust.c","line":64,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"ARRAY_SIZE()."},{"file":"usr/src/lib/libdemangle/common/rust.c","line":64,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/lib/libdemangle/common/rust.c","line":80,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Now that I know about the fact that the intent is that we have a null terminated string, I think it\u0027s a mistake to pass in the length as an argument, unless it\u0027s heavily commented that we have a null terminated string. Seeing a char * and size_t immediately makes one think of the strn* family of functions where we don\u0027t have that information as a guarantee.\n\nIf we want to keep it, then I think we really need to heavily comment all of these so it\u0027s explicit that this is the case."},{"file":"usr/src/lib/libdemangle/common/rust.c","line":96,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is there a reason you\u0027re using this versus sv_init_str_len()? It could be because of the strlen() immediately in sv_init_str_len() which would definitely be unsafe based on the API as it might reach beyond slen."},{"file":"usr/src/lib/libdemangle/common/rust.c","line":96,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Not really -- there was some churn as I was trying to get a feel of what bits were needed.  Since this all assumes that we\u0027re ultimately pointing to NUL-terminated strings -- but since sv_init_str_len isn\u0027t otherwise used, I\u0027ll remove that and leave this."},{"file":"usr/src/lib/libdemangle/common/rust.c","line":116,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Shouldn\u0027t we check that everything is ASCII before we do any kind of looking at the data internally, so this should probably go above +98 or we should check it ourselves before handing things off to the strview which is definitely only safe with ascii."},{"file":"usr/src/lib/libdemangle/common/rust.c","line":116,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"It shouldn\u0027t matter -- we require a NUL terminated string as input (if it\u0027s not, there\u0027s not much we can do about it), which is all that the strview_t routines care about (in terms of any \u0027special\u0027 values).\n\nThe first two checks just verify the string starts with \u0027_Z\u0027 or \u0027__Z\u0027 and ends with \u0027E\u0027.  Everything inbetween should then be 7-bit values, so order here shouldn\u0027t matter."},{"file":"usr/src/lib/libdemangle/common/rust.c","line":116,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"The strview safe with ascii comment means that it only understand 7-bit ascii semantically and any unicode will immediately confuse it from an actual returning you characters at a time, in that mode it would only return bytes.\n\nI know that in the current version of the code as written, it\u0027s probably not going to make a difference, but in general and if this ever gets refactored, it seems like we should do validation before going to use the data in any way."},{"file":"usr/src/lib/libdemangle/common/rust.c","line":151,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Rather than SV_INIT, I think this will be clearer if you just say \u0027strview_t pfx \u003d *svp;\u0027 This applies to all uses of SV_INIT. Though the more I review this, the more and more I dislike SV_INIT entirely. It\u0027s the moral equivalent of sv_init_sv() and it\u0027s breaking the theoretical encapsulation of the strview_t in a way that the other C files shouldn\u0027t need to know about it."},{"file":"usr/src/lib/libdemangle/common/rust.c","line":151,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/lib/libdemangle/common/rust.c","line":191,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Based on the below comments, this should be \u0027rem \u003c\u003d len\u0027 -- we should never reach the end of the string parson a name segment -- we should always have 1 character left (E)."},{"file":"usr/src/lib/libdemangle/common/rust.c","line":198,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is there a reason this is a VERIFY and you don\u0027t just return an error if it\u0027s not the case. I get that this in theory shouldn\u0027t happen because you\u0027re trying to check this yourself."},{"file":"usr/src/lib/libdemangle/common/rust.c","line":198,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"If the condition at line 197 is true, there is exactly one character remaining after the current segment.  rust_demangle() should have already verified that this value is \u0027E\u0027.  I can update the comment to explain that better if that\u0027d help."},{"file":"usr/src/lib/libdemangle/common/rust.c","line":198,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Probably worth updating the comment at least to point folks towards it. Otherwise it looks like we\u0027re handling a common parsing error through an abort."},{"file":"usr/src/lib/libdemangle/common/rust.c","line":240,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"If I\u0027m reading this correctly if we have a string that\u0027s something like \".a\" then we\u0027ll hit this case, append \u0027.\u0027, break out and append \u0027.\u0027 a second time. Is that what\u0027s supposed to happen?"},{"file":"usr/src/lib/libdemangle/common/rust.c","line":240,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Yeah, that should just be a break and let the code at line 250 add the \u0027.\u0027"},{"file":"usr/src/lib/libdemangle/common/rust.c","line":247,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Missing default case, likely to cause compiler warnings."},{"file":"usr/src/lib/libdemangle/common/rust.c","line":247,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"At least up through gcc7, it only warns for enums, but easy enough to add."},{"file":"usr/src/lib/libdemangle/common/rust.c","line":297,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Minor style nit, but maybe break the assignment into the declaration above and just have the switch be on the value?"},{"file":"usr/src/lib/libdemangle/common/rust.c","line":301,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Has something made sure we won\u0027t get uppercase versions of these characters? Shouldn\u0027t we also include them in the case statement?"},{"file":"usr/src/lib/libdemangle/common/rust.c","line":316,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is there a particular reason you\u0027re using restrict here but not elsewhere?"},{"file":"usr/src/lib/libdemangle/common/rust.c","line":341,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"If we\u0027re manually assembling a value, shouldn\u0027t we be checking that we\u0027re not going to exceed UINT64_MAX before taking another loop? I guess we\u0027d rather do this than use strotull?"},{"file":"usr/src/lib/libdemangle/common/rust.c","line":383,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"If this takes an int shoudn\u0027t you verify that we\u0027re not truncating this before calling custr_appendc which takes a char? Otherwise, this argument should probably be a char itself."},{"file":"usr/src/lib/libdemangle/common/rust.c","line":383,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/lib/libdemangle/common/rust.c","line":402,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Why isn\u0027t this isascii(3C)? If there\u0027s a particular reason you can\u0027t use it due to some context, there should be a comment."},{"file":"usr/src/lib/libdemangle/common/rust.c","line":402,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Other parts of the code use the sys/ctype.h macros for ISDIGIT(), etc. since we always want the C locale definitions, however that conflicts with #including \u003cctype.h\u003e (or at least I haven\u0027t figured out an incantation that\u0027ll allow both to be included without getting conflict warnings for the lowercased versions."},{"file":"usr/src/lib/libdemangle/common/strview.c","line":24,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I think this will be simpler to just do \u0027*sv \u003d *src;\u0027"},{"file":"usr/src/lib/libdemangle/common/strview.c","line":24,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/lib/libdemangle/common/strview.c","line":39,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is it assumed that first and last are part of the same contiguous memory block?"},{"file":"usr/src/lib/libdemangle/common/strview.c","line":42,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I think it\u0027s worth expressing in the usage that in this form, first must be a null terminated string, which isn\u0027t the case with the rest of the usage."},{"file":"usr/src/lib/libdemangle/common/strview.c","line":53,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It feels like the use of strlen on a string here would definitely be incorrect and it should instead be strnlen. If we\u0027ve told you how many bytes long is valid, say because there\u0027s no null terminator, this strlen() could walk and read arbitrary data incorrectly."},{"file":"usr/src/lib/libdemangle/common/strview.c","line":53,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"With the updated information that this has to be null terminated, it\u0027s less of deal, but seems unfortunate, as there should be no reason these functions need to operate on null terminated data in any way (at least, that seemed the original intent of the design)."},{"file":"usr/src/lib/libdemangle/common/strview.c","line":59,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"There are no consumers of this function."},{"file":"usr/src/lib/libdemangle/common/strview.c","line":64,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"While sizeof (char) is 1, probably should cast these to uintptr_t values when doing the math."},{"file":"usr/src/lib/libdemangle/common/strview.c","line":64,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I had actually meant that sv_last and sv_first be cast to a uintptr_t before doing the arithmetic. Though what you have is probably fine."},{"file":"usr/src/lib/libdemangle/common/strview.c","line":70,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is it worth keeping the size around in the structure rather than recalculating it again and again?"},{"file":"usr/src/lib/libdemangle/common/strview.h","line":33,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Why does this initialization macro set the values to themselves? Why not just have this as a function, as it doesn\u0027t make sense in the context of the rest of the header / interface. It looks like this is used in cases where you want to copy the state and not modify the input. So why not just do that explicitly rather than a macro?\n\nAlso, this looks identical to sv_init_sv(). Maybe just use that?"},{"file":"usr/src/lib/libdemangle/common/strview.h","line":35,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Probably worth a comment that this is for debugging purposes."},{"file":"usr/src/lib/libdemangle/common/strview.h","line":35,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/lib/libdemangle/common/strview.h","line":36,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"All of these functions could really use comments that explain their purpose."},{"file":"usr/src/lib/libdemangle/common/strview.h","line":36,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/lib/libdemangle/common/strview.h","line":39,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It looks like every caller casts these functions to void. In that case, why bother returning anything at all? As if it can semantically fail, then the consumers shouldn\u0027t just be casting to void."},{"file":"usr/src/lib/libdemangle/common/strview.h","line":39,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/lib/libdemangle/common/util.c","line":84,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It\u0027s probably worth a comment here stating that the null terminator is coming from the zalloc."},{"file":"usr/src/lib/libdemangle/common/util.c","line":84,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","line":0,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I\u0027d strongly recommend making sure that this is linked against libumem and the program always enables umem debugging to make sure that we check for memory issues."},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","line":0,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","line":117,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"ARRAY_SIZE macro."},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","line":117,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done.\nThough I\u0027ve also seem review comments in the past that state using sysmacro.h is supposed to be for kernel use only."},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","line":120,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Should be const as this doesn\u0027t modify this."},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","line":120,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","line":122,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Seems like the framework should save errno before checking it here as someone changing this could easily clobber errno."},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","line":122,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","line":137,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"We should assume this errno is almost certainly clobbered by the time we reach here."},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","line":137,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","line":142,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Should be const as this doesn\u0027t modify it."},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","line":142,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","line":170,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"c99ism in non-c99 built program."},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","line":170,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"The makefile has \u0027CSTD \u003d $(CSTD_GNU99)\u0027 in it -- is there something else that should be there?"},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","line":170,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I missed that, sorry."},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","line":173,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Where is the memory that sysdemangle allocates freed?"},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","line":173,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","line":192,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"c99ism in program not being built as c99."},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","line":192,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"See above"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/dis/dis_util.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/cmd/mdb/common/mdb/mdb_cmds.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/mdb/common/mdb/mdb_demangle.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/sgs/elfdump/common/elfdump.msg","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.msg","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/lib/libdemangle/Makefile.com","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/cxx.c","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/demangle-sys.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/demangle.c","type":"MODIFIED","insertions":81,"deletions":-16},{"file":"usr/src/lib/libdemangle/common/demangle_int.h","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/rust.c","type":"ADDED","insertions":424,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.c","type":"ADDED","insertions":114,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.h","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/lib/libdemangle/common/util.c","type":"MODIFIED","insertions":14,"deletions":0},{"file":"usr/src/man/man1/dis.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/dump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/elfdump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/gprof.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/nm.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/pvs.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/pkg/manifests/system-test-utiltest.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/test/util-tests/tests/demangle/Makefile","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","type":"ADDED","insertions":196,"deletions":0}],"sizeInsertions":926,"sizeDeletions":-44},{"number":"2","revision":"2cbacbe2ada9d398be732d433029152e636491ec","parents":["87ab0c3d6d03d32cdf82ac9de71b56fecac26b07"],"ref":"refs/changes/07/5307/2","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1546633245,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/lib/libdemangle/common/demangle.c","line":49,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I still think cleanly handling this would probably be better, tbh."},{"file":"usr/src/lib/libdemangle/common/rust.c","line":124,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I believe the comment about the framework having this be null terminated needs to start with these functions. As it\u0027d be very easy to miss the other one when looking at the rust demangler."},{"file":"usr/src/lib/libdemangle/common/strview.h","line":31,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I think it\u0027s important to highlight that it doesn\u0027t have to be the nul character, as that\u0027s where the value of this comes in. Really, you could make the strview entirely agnostic to whether it\u0027s nul terminated or not."},{"file":"usr/src/lib/libdemangle/common/strview.h","line":41,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Honestly, that doesn\u0027t follow to me for most of the strview logic. As you\u0027re just walking between two memory locations a character at a time. Maybe you want to have a specific entry point that takes a null terminated string, but most of these don\u0027t care if it\u0027s null terminated or not as long as the space between first and last is valid. Especially as the internal code will actually handle an embedded nul just fine and keep going if that\u0027s between first and last."},{"file":"usr/src/lib/libdemangle/common/strview.h","line":76,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"In the case that last is non-NULL I don\u0027t get why there\u0027s a constraint that it be null terminated at all. Nothing relies on it as long as it\u0027s a contiguous memory buffer."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/dis/dis_util.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/cmd/mdb/common/mdb/mdb_cmds.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/mdb/common/mdb/mdb_demangle.c","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"usr/src/cmd/sgs/elfdump/common/elfdump.msg","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.msg","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/lib/libdemangle/Makefile.com","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/cxx.c","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/demangle-sys.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/demangle.c","type":"MODIFIED","insertions":88,"deletions":-16},{"file":"usr/src/lib/libdemangle/common/demangle_int.h","type":"MODIFIED","insertions":8,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/rust.c","type":"ADDED","insertions":541,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.c","type":"ADDED","insertions":107,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.h","type":"ADDED","insertions":132,"deletions":0},{"file":"usr/src/lib/libdemangle/common/util.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/man/man1/dis.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/dump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/elfdump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/gprof.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/nm.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/pvs.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/pkg/manifests/system-test-utiltest.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/test/util-tests/tests/demangle/Makefile","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","type":"ADDED","insertions":214,"deletions":0}],"sizeInsertions":1143,"sizeDeletions":-46},{"number":"3","revision":"91fcc18ae9c3f2ffa644b681228affa462c97b34","parents":["87ab0c3d6d03d32cdf82ac9de71b56fecac26b07"],"ref":"refs/changes/07/5307/3","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1546889970,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/lib/libdemangle/common/demangle.c","line":106,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"You\u0027re now checking for str \u003d\u003d NULL below. It is illegal to do the strlen before that. the compiler will likely optimize away the following check."},{"file":"usr/src/lib/libdemangle/common/demangle.c","line":106,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/lib/libdemangle/common/demangle.c","line":146,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Why did you pick EINVAL for this case? What did the user pass that was invalid?"},{"file":"usr/src/lib/libdemangle/common/demangle.c","line":146,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"It indicates detect_lang() returned an invalid/unexpected value, so it shouldn\u0027t ever happen, but I\u0027m not sure what a good value would be."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/dis/dis_util.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/cmd/mdb/common/mdb/mdb_cmds.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/mdb/common/mdb/mdb_demangle.c","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"usr/src/cmd/sgs/elfdump/common/elfdump.msg","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.msg","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/lib/libdemangle/Makefile.com","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/cxx.c","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/demangle-sys.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/demangle.c","type":"MODIFIED","insertions":108,"deletions":-24},{"file":"usr/src/lib/libdemangle/common/demangle_int.h","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/rust.c","type":"ADDED","insertions":541,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.c","type":"ADDED","insertions":107,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.h","type":"ADDED","insertions":140,"deletions":0},{"file":"usr/src/lib/libdemangle/common/util.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/man/man1/dis.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/dump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/elfdump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/gprof.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/nm.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/pvs.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/pkg/manifests/system-test-utiltest.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/test/util-tests/tests/demangle/Makefile","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","type":"ADDED","insertions":214,"deletions":0}],"sizeInsertions":1177,"sizeDeletions":-54},{"number":"4","revision":"fd2e9da2a109b2321992a00cc49bfb2d65d32ed0","parents":["87ab0c3d6d03d32cdf82ac9de71b56fecac26b07"],"ref":"refs/changes/07/5307/4","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1546910916,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1546977516,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/dis/dis_util.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/cmd/mdb/common/mdb/mdb_cmds.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/mdb/common/mdb/mdb_demangle.c","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"usr/src/cmd/sgs/elfdump/common/elfdump.msg","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.msg","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/lib/libdemangle/Makefile.com","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/cxx.c","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/demangle-sys.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/demangle.c","type":"MODIFIED","insertions":110,"deletions":-24},{"file":"usr/src/lib/libdemangle/common/demangle_int.h","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/rust.c","type":"ADDED","insertions":541,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.c","type":"ADDED","insertions":107,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.h","type":"ADDED","insertions":140,"deletions":0},{"file":"usr/src/lib/libdemangle/common/util.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/man/man1/dis.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/dump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/elfdump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/gprof.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/nm.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/pvs.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/pkg/manifests/system-test-utiltest.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/test/util-tests/tests/demangle/Makefile","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","type":"ADDED","insertions":214,"deletions":0}],"sizeInsertions":1179,"sizeDeletions":-54},{"number":"5","revision":"a5a919126ecbe538a31387ac29cf97bd7e7079f9","parents":["8216abd59f7b5afe1af5c070319b55f77c64b55e"],"ref":"refs/changes/07/5307/5","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1550014411,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1546977516,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/dis/dis_util.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/cmd/mdb/common/mdb/mdb_cmds.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/mdb/common/mdb/mdb_demangle.c","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"usr/src/cmd/sgs/elfdump/common/elfdump.msg","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.msg","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/lib/libdemangle/Makefile.com","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/cxx.c","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/demangle-sys.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/demangle.c","type":"MODIFIED","insertions":110,"deletions":-24},{"file":"usr/src/lib/libdemangle/common/demangle_int.h","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/rust.c","type":"ADDED","insertions":541,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.c","type":"ADDED","insertions":107,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.h","type":"ADDED","insertions":140,"deletions":0},{"file":"usr/src/lib/libdemangle/common/util.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/man/man1/dis.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/dump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/elfdump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/gprof.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/nm.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/pvs.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/pkg/manifests/system-test-utiltest.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/test/util-tests/tests/demangle/Makefile","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","type":"ADDED","insertions":214,"deletions":0}],"sizeInsertions":1179,"sizeDeletions":-54},{"number":"6","revision":"b9f20b74c7cc3485e5a01dc7e0d06fceda5f11cb","parents":["f04fd96f7cab5979380d23a4bdafc62c87306926"],"ref":"refs/changes/07/5307/6","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1550033354,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550074429,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/dis/dis_util.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/cmd/mdb/common/mdb/mdb_cmds.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/mdb/common/mdb/mdb_demangle.c","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"usr/src/cmd/sgs/elfdump/common/elfdump.msg","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.msg","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/lib/libdemangle/Makefile.com","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/cxx.c","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/demangle-sys.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/demangle.c","type":"MODIFIED","insertions":110,"deletions":-24},{"file":"usr/src/lib/libdemangle/common/demangle_int.h","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/rust.c","type":"ADDED","insertions":543,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.c","type":"ADDED","insertions":107,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.h","type":"ADDED","insertions":140,"deletions":0},{"file":"usr/src/lib/libdemangle/common/util.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/man/man1/dis.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/dump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/elfdump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/gprof.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/nm.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/pvs.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/pkg/manifests/system-test-utiltest.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/test/util-tests/tests/demangle/Makefile","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","type":"ADDED","insertions":214,"deletions":0}],"sizeInsertions":1181,"sizeDeletions":-54},{"number":"7","revision":"f57fcd2d63793709e538d368265403e68865bbd0","parents":["713c73d1a6c1513835f5b82dc105c21146fdf387"],"ref":"refs/changes/07/5307/7","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1550895719,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551205630,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/dis/dis_util.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/cmd/mdb/common/mdb/mdb_cmds.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/mdb/common/mdb/mdb_demangle.c","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"usr/src/cmd/sgs/elfdump/common/elfdump.msg","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.msg","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/lib/libdemangle/Makefile.com","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/cxx.c","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/demangle-sys.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/demangle.c","type":"MODIFIED","insertions":110,"deletions":-24},{"file":"usr/src/lib/libdemangle/common/demangle_int.h","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/rust.c","type":"ADDED","insertions":543,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.c","type":"ADDED","insertions":107,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.h","type":"ADDED","insertions":140,"deletions":0},{"file":"usr/src/lib/libdemangle/common/util.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/man/man1/dis.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/dump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/elfdump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/gprof.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/nm.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/pvs.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/pkg/manifests/system-test-utiltest.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/test/util-tests/tests/demangle/Makefile","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","type":"ADDED","insertions":214,"deletions":0}],"sizeInsertions":1181,"sizeDeletions":-54},{"number":"8","revision":"eed7f08498e10cbe485f108ee19cfa14c367d599","parents":["180192a1c9d1d5e3719cbfadbdc16be205532788"],"ref":"refs/changes/07/5307/8","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1551913494,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551205630,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553625480,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/cmd/dis/dis_util.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/cmd/mdb/common/mdb/mdb_cmds.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/mdb/common/mdb/mdb_demangle.c","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"usr/src/cmd/sgs/elfdump/common/elfdump.msg","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.msg","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/lib/libdemangle/Makefile.com","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/cxx.c","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/demangle-sys.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/demangle.c","type":"MODIFIED","insertions":110,"deletions":-24},{"file":"usr/src/lib/libdemangle/common/demangle_int.h","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/rust.c","type":"ADDED","insertions":543,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.c","type":"ADDED","insertions":107,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.h","type":"ADDED","insertions":140,"deletions":0},{"file":"usr/src/lib/libdemangle/common/util.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/man/man1/dis.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/dump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/elfdump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/gprof.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/nm.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/pvs.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/pkg/manifests/system-test-utiltest.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/test/util-tests/tests/demangle/Makefile","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","type":"ADDED","insertions":214,"deletions":0}],"sizeInsertions":1181,"sizeDeletions":-54},{"number":"9","revision":"2794d389c8098b8a7c17dfb48c7d626532347afb","parents":["180192a1c9d1d5e3719cbfadbdc16be205532788"],"ref":"refs/changes/07/5307/9","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1553625829,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551205630,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553625480,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/dis/dis_util.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/cmd/mdb/common/mdb/mdb_cmds.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/mdb/common/mdb/mdb_demangle.c","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"usr/src/cmd/sgs/elfdump/common/elfdump.msg","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.msg","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/lib/libdemangle/Makefile.com","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/cxx.c","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/demangle-sys.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/demangle.c","type":"MODIFIED","insertions":110,"deletions":-24},{"file":"usr/src/lib/libdemangle/common/demangle_int.h","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/rust.c","type":"ADDED","insertions":543,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.c","type":"ADDED","insertions":107,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.h","type":"ADDED","insertions":140,"deletions":0},{"file":"usr/src/lib/libdemangle/common/util.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/man/man1/dis.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/dump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/elfdump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/gprof.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/nm.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/pvs.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/pkg/manifests/system-test-utiltest.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/test/util-tests/tests/demangle/Makefile","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","type":"ADDED","insertions":214,"deletions":0}],"sizeInsertions":1181,"sizeDeletions":-54},{"number":"10","revision":"b83480dbe5e70527fa1ecb0004c20cfab58b25d3","parents":["3f1416fd46538cb765be6df507d1ff73fb90170b"],"ref":"refs/changes/07/5307/10","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1553626227,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553636627,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/dis/dis_util.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/cmd/mdb/common/mdb/mdb_cmds.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/mdb/common/mdb/mdb_demangle.c","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"usr/src/cmd/sgs/elfdump/common/elfdump.msg","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.msg","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/lib/libdemangle/Makefile.com","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/cxx.c","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/demangle-sys.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/demangle.c","type":"MODIFIED","insertions":110,"deletions":-24},{"file":"usr/src/lib/libdemangle/common/demangle_int.h","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/rust.c","type":"ADDED","insertions":543,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.c","type":"ADDED","insertions":107,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.h","type":"ADDED","insertions":140,"deletions":0},{"file":"usr/src/lib/libdemangle/common/util.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/man/man1/dis.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/dump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/elfdump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/gprof.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/nm.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/pvs.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/pkg/manifests/system-test-utiltest.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/test/util-tests/tests/demangle/Makefile","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","type":"ADDED","insertions":214,"deletions":0}],"sizeInsertions":1181,"sizeDeletions":-54},{"number":"11","revision":"26afb6ebfb8a14142adf0f4748f457c56bb0b98b","parents":["48514b9d3e7aeee085e365e879a73a9e4873323d"],"ref":"refs/changes/07/5307/11","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1553707052,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553636627,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553708005,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/dis/dis_util.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/cmd/mdb/common/mdb/mdb_cmds.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/mdb/common/mdb/mdb_demangle.c","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"usr/src/cmd/sgs/elfdump/common/elfdump.msg","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.msg","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/lib/libdemangle/Makefile.com","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/cxx.c","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/demangle-sys.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/demangle.c","type":"MODIFIED","insertions":110,"deletions":-24},{"file":"usr/src/lib/libdemangle/common/demangle_int.h","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/rust.c","type":"ADDED","insertions":543,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.c","type":"ADDED","insertions":107,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.h","type":"ADDED","insertions":140,"deletions":0},{"file":"usr/src/lib/libdemangle/common/util.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/man/man1/dis.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/dump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/elfdump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/gprof.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/nm.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/pvs.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/pkg/manifests/system-test-utiltest.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/test/util-tests/tests/demangle/Makefile","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","type":"ADDED","insertions":214,"deletions":0}],"sizeInsertions":1181,"sizeDeletions":-54},{"number":"12","revision":"6cf64ca03e24fc61dedf0e3705acd6716ce4145a","parents":["48514b9d3e7aeee085e365e879a73a9e4873323d"],"ref":"refs/changes/07/5307/12","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1553708135,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553636627,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553708005,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1553708195,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/dis/dis_util.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/cmd/mdb/common/mdb/mdb_cmds.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/cmd/mdb/common/mdb/mdb_demangle.c","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"usr/src/cmd/sgs/elfdump/common/elfdump.msg","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/cmd/sgs/pvs/common/pvs.msg","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/lib/libdemangle/Makefile.com","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/cxx.c","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"usr/src/lib/libdemangle/common/demangle-sys.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/demangle.c","type":"MODIFIED","insertions":110,"deletions":-24},{"file":"usr/src/lib/libdemangle/common/demangle_int.h","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"usr/src/lib/libdemangle/common/rust.c","type":"ADDED","insertions":543,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.c","type":"ADDED","insertions":107,"deletions":0},{"file":"usr/src/lib/libdemangle/common/strview.h","type":"ADDED","insertions":140,"deletions":0},{"file":"usr/src/lib/libdemangle/common/util.c","type":"MODIFIED","insertions":15,"deletions":0},{"file":"usr/src/man/man1/dis.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/dump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/elfdump.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/gprof.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/nm.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1/pvs.1","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/pkg/manifests/system-test-utiltest.mf","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/test/util-tests/tests/demangle/Makefile","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/test/util-tests/tests/demangle/rust.c","type":"ADDED","insertions":214,"deletions":0}],"sizeInsertions":1181,"sizeDeletions":-54}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}]}