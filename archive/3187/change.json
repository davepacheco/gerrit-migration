{"project":"joyent/sdcadm","branch":"master","id":"Ib4d47fc54edb816288d41af5510d02e34f8d16db","number":"3187","subject":"TOOLS-1972 \u0027sdcadm avail\u0027 crashes when there are not available updates Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/3187","commitMessage":"TOOLS-1972 \u0027sdcadm avail\u0027 crashes when there are not available updates\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1515615638,"lastUpdated":1515693854,"open":false,"status":"MERGED","comments":[{"timestamp":1515615638,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1515615644,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit d08d1f2e38e5fb17e3822773de58ba8fd1cac125\n    \n    TOOLS-1972 \u0027sdcadm avail\u0027 crashes when there are not available updates"},{"timestamp":1515615670,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1515622022,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1: Code-Review+1\n\n(1 comment)"},{"timestamp":1515683529,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\n\u003e (1 comment)\n\nWell, avoiding its usage is working as expected, but I definitely don\u0027t like the output:\n\n[root@headnode (coal) ~]# sdcadm avail\nSERVICE  IMAGE  VERSION\n\nI\u0027m going for both things, adding the same up2date output than we use for `sdcadm update`"},{"timestamp":1515683624,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2."},{"timestamp":1515683629,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 237f444193e81690bed1b2bf9d11c8a5655c4fa5\n    \n    TOOLS-1972 \u0027sdcadm avail\u0027 crashes when there are not available updates"},{"timestamp":1515683657,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1515693032,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 3."},{"timestamp":1515693038,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit febfe7e825ceb97f28b9a7173d6c0e32baca3c0a\n    \n    TOOLS-1972 \u0027sdcadm avail\u0027 crashes when there are not available updates"},{"timestamp":1515693066,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1515693803,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1515693840,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1515693854,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"4","revision":"b4d47fc54edb816288d41af5510d02e34f8d16db","parents":["8a083b5b363fb2479d9217dcdb0b0594a390e853"],"ref":"refs/changes/87/3187/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1515693840,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515693066,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515693803,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1515693803,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1515693854,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/cli/do_avail.js","type":"MODIFIED","insertions":12,"deletions":-14}],"sizeInsertions":12,"sizeDeletions":-14},"patchSets":[{"number":"1","revision":"7e9198b80e3bc657ff0bb463daab66305e1b78e1","parents":["47704904431d8fb7d1316cffdc6280a082de7893"],"ref":"refs/changes/87/3187/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1515615638,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515615670,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515622022,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"lib/cli/do_avail.js","line":189,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I think I\u0027d prefer to just not use validFieldsMap which is arbitrarily causing the error here. And the don\u0027t pass `validFields` to tabula below.\n\nIf you feel strongly about keeping it, we put the tabula call inside a `if (rows.length)` guard."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/cli/do_avail.js","type":"MODIFIED","insertions":11,"deletions":-4}],"sizeInsertions":11,"sizeDeletions":-4},{"number":"2","revision":"7e2d2d935d7fe7551a49704b2f7261240adcd934","parents":["47704904431d8fb7d1316cffdc6280a082de7893"],"ref":"refs/changes/87/3187/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1515683624,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515683657,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/cli/do_avail.js","type":"MODIFIED","insertions":12,"deletions":-14}],"sizeInsertions":12,"sizeDeletions":-14},{"number":"3","revision":"b368205178c97f4dae97b3b8fc208793374ef170","parents":["8a083b5b363fb2479d9217dcdb0b0594a390e853"],"ref":"refs/changes/87/3187/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1515693032,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515693066,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515693803,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1515693803,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/cli/do_avail.js","type":"MODIFIED","insertions":12,"deletions":-14}],"sizeInsertions":12,"sizeDeletions":-14},{"number":"4","revision":"b4d47fc54edb816288d41af5510d02e34f8d16db","parents":["8a083b5b363fb2479d9217dcdb0b0594a390e853"],"ref":"refs/changes/87/3187/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1515693840,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515693066,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515693803,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1515693803,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1515693854,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/cli/do_avail.js","type":"MODIFIED","insertions":12,"deletions":-14}],"sizeInsertions":12,"sizeDeletions":-14}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}