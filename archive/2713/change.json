{"project":"joyent/sdc-docker","branch":"master","id":"I466b0b62dea1dbd1fd92127f74602309660e1b3c","number":"2713","subject":"DOCKER-1111: Add support for plugins, and add a plugin to filter owner networks Reviewed by: Trent Mick \u003ctrent.mick@joyent.com\u003e","owner":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"url":"https://cr.joyent.us/2713","commitMessage":"DOCKER-1111: Add support for plugins, and add a plugin to filter owner networks\nReviewed by: Trent Mick \u003ctrent.mick@joyent.com\u003e\n","createdOn":1507116577,"lastUpdated":1508545841,"open":false,"status":"MERGED","comments":[{"timestamp":1507116577,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 1."},{"timestamp":1507116612,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1507139191,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 2."},{"timestamp":1507139237,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1507718070,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 3: Patch Set 2 was rebased"},{"timestamp":1507718110,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3:\n\n\"make check\" passed ok"},{"timestamp":1507747896,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\nLooks mostly good. Some general comments:\n\n- test/plugin/foo.test.js should just go to test/unit/plugin-foo.test.js\n  The categories of test are \"unit\" and \"integration\". A plugin test can\n  be one of those.\n- Having an explicit PluginApi that we limit would be nice, otherwise if/once\n  op-provided plugins are supported we might never be able to change the API.\n  For example, it could start with a single getNapiNetworksForAccount\n  function.\n- Move plugins related code to lib/plugins.js. At least the small \"setupPlugins\"\n  block. This allows a natural place to doc the plugin config and API.\n- The plugin funcs loaded in setupPlugins should, I think, be an explicit set\n  of func names.\n\nI haven\u0027t tested it in COAL yet."},{"timestamp":1507754421,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 3:\n\nIf I understand correctly for the plugin API, what you\u0027d like is:\n\n- explicit functions that can be imported and used by plugins\n- explicit functions that the API will load from the plugin (and can be used in the rest of the codebase)?\n\nSounds good. Just want to make sure I understand correctly."},{"timestamp":1507755576,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3:\n\n\u003e     explicit functions that can be imported and used by plugins\n\nYes, perhaps define a PluginApi class (in lib/plugins.js). It would get a handle on the \"app\" to call the internal API, but it would expose a much more limited set of functions for plugins to use.\n\n\u003e    explicit functions that the API will load from the plugin (and can be used in the rest of the codebase)?\n\nRight, so instead of:\n\n```\n        var plugin \u003d require(pPath);\n\n        Object.keys(plugin).forEach(function (name) {\n            self.plugins[name] \u003d self.plugins[name] || [];\n            self.plugins[name].push(plugin[name](self, cfg));\n        });\n```\n\nwhich loads every function exported by the plugin module, it would look just for a known set of function names."},{"timestamp":1508148064,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 4."},{"timestamp":1508148108,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1508148143,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 5."},{"timestamp":1508148181,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1508280185,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 5:\n\n(5 comments)"},{"timestamp":1508362163,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 6."},{"timestamp":1508362200,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1508362713,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1508362770,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 6:\n\n\u003e (1 comment)\n\nUh, not \"endpoints\"... \"plugin points\"?"},{"timestamp":1508365276,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 6: Code-Review+1\n\n(6 comments)\n\nThis is way better, thanks!\n\nJust comments and a couple optional nits. Thoughts?\n\nThen I\u0027d like to have a chance to test it before IA."},{"timestamp":1508373365,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1508407378,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 7."},{"timestamp":1508407420,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1508542985,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 7: Code-Review+1 Integration-Approval+1"},{"timestamp":1508543083,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 7:\n\nWorks for me in basic testing in my COAL, e.g. this works (no public network required):\n\n```\n$ ~/opt/dockers/docker-1.12.2 --tls run --name duck2 -ti alpine /bin/sh\n/ #\n```\n\nbut this fails:\n\n```\n$ ~/opt/dockers/docker-1.12.2 --tls run --name duck2 -tiP alpine /bin/sh\n/Users/trentm/opt/dockers/docker-1.12.2: Error response from daemon: Found no external network accessible to account (faeb9071-148e-4e51-932a-067ed09acffc).\nSee \u0027/Users/trentm/opt/dockers/docker-1.12.2 run --help\u0027.\n```\n\nAnd the external pool (visible before enabling the plugin) is now not:\n\n```\n$ ~/opt/dockers/docker-1.12.2 --tls network inspect f0c984342c36\n[]\nError: No such network: f0c984342c36\n$ ~/opt/dockers/docker-1.12.2 --tls network list\nNETWORK ID          NAME                DRIVER              SCOPE\n59ceacd95641        My-Fabric-Network   Triton              overlay\n```"},{"timestamp":1508545835,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 7:\n\nThanks for testing. :D"},{"timestamp":1508545841,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Marsell Kukuljevic"}],"currentPatchSet":{"number":"7","revision":"466b0b62dea1dbd1fd92127f74602309660e1b3c","parents":["118021272f5390e698aae4e5c660d3a6acef03f5"],"ref":"refs/changes/13/2713/7","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1508407378,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1508407420,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1508542985,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1508542985,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1508545841,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":27,"deletions":-4},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":19,"deletions":-3},{"file":"lib/docker.js","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/plugin-manager.js","type":"ADDED","insertions":167,"deletions":0},{"file":"plugins/filter_owner_networks.js","type":"ADDED","insertions":155,"deletions":0},{"file":"sapi_manifests/docker/template","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/unit/plugin-filter-owner-networks.test.js","type":"ADDED","insertions":290,"deletions":0}],"sizeInsertions":669,"sizeDeletions":-7},"patchSets":[{"number":"1","revision":"11c5de3cc37b334f93455d4fb8f75e4ab2deed14","parents":["b66d3e12b79943816154e0a68e1ae00c94b5905b"],"ref":"refs/changes/13/2713/1","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1507116577,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507116612,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":30,"deletions":-4},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":19,"deletions":-2},{"file":"lib/docker.js","type":"MODIFIED","insertions":30,"deletions":0},{"file":"plugins/filter_owner_networks.js","type":"ADDED","insertions":137,"deletions":0},{"file":"sapi_manifests/docker/template","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/plugins/filter_owner_networks.test.js","type":"ADDED","insertions":296,"deletions":0}],"sizeInsertions":521,"sizeDeletions":-8},{"number":"2","revision":"4d23ab22935ec110d6dd970fe7093ba7943a5538","parents":["b66d3e12b79943816154e0a68e1ae00c94b5905b"],"ref":"refs/changes/13/2713/2","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1507139191,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507139237,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":30,"deletions":-4},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":19,"deletions":-2},{"file":"lib/docker.js","type":"MODIFIED","insertions":30,"deletions":0},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"plugins/filter_owner_networks.js","type":"ADDED","insertions":137,"deletions":0},{"file":"sapi_manifests/docker/template","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/plugins/filter_owner_networks.test.js","type":"ADDED","insertions":296,"deletions":0}],"sizeInsertions":522,"sizeDeletions":-8},{"number":"3","revision":"bfc2eda0547c0adfdb676f872d2ac7834597b3b1","parents":["24514b9970f50224fd7df8a6b055030ee67ab9be"],"ref":"refs/changes/13/2713/3","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1507718070,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507139237,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":30,"deletions":-4},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":19,"deletions":-2},{"file":"lib/docker.js","type":"MODIFIED","insertions":30,"deletions":0},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"plugins/filter_owner_networks.js","type":"ADDED","insertions":137,"deletions":0},{"file":"sapi_manifests/docker/template","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/plugins/filter_owner_networks.test.js","type":"ADDED","insertions":296,"deletions":0}],"sizeInsertions":522,"sizeDeletions":-8},{"number":"4","revision":"aa64b10d7390f2e14134ddc92d1c13e4d35ac164","parents":["b66d3e12b79943816154e0a68e1ae00c94b5905b"],"ref":"refs/changes/13/2713/4","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1508148064,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1508148108,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":30,"deletions":-4},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":19,"deletions":-2},{"file":"lib/docker.js","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/plugins.js","type":"ADDED","insertions":88,"deletions":0},{"file":"plugins/filter_owner_networks.js","type":"ADDED","insertions":133,"deletions":0},{"file":"sapi_manifests/docker/template","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/unit/plugin-filter-owner-networks.test.js","type":"ADDED","insertions":290,"deletions":0}],"sizeInsertions":572,"sizeDeletions":-7},{"number":"5","revision":"04af41fba37661f83ef434571e9ea8e1917cd124","parents":["24514b9970f50224fd7df8a6b055030ee67ab9be"],"ref":"refs/changes/13/2713/5","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1508148143,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1508148181,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"Makefile","line":73,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Drop this change."},{"file":"lib/backends/sdc/containers.js","line":662,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I don\u0027t think we need to be self-derogatory about new code."},{"file":"lib/backends/sdc/containers.js","line":668,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"It would be really nice if this async logic could be pulled into lib/plugins.js\nso that the goop for applying a plugin hook is mostly in that lib file.\nWould that make the code here cleaner? If not, don\u0027t worry about it."},{"file":"plugins/filter_owner_networks.js","line":36,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"It would make more sense to move the comments for these hook functions\nto SUPPORTED_PLUGIN_FUNCTIONS in lib/plugins.js... so that future plugins\nwould use that file to learn about available hooks and the plugin API.\n\nDitto for the one below."},{"file":"plugins/filter_owner_networks.js","line":131,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"What\u0027s the intended diff between filterListNetworks and filterGetNetworksOrPools?"},{"file":"plugins/filter_owner_networks.js","line":131,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"They\u0027re used in two different locations. For this plugin the effect is the same, but if other plugins hook into those endpoints too they may have different behaviours. Ergo the distinction."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":30,"deletions":-4},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":19,"deletions":-2},{"file":"lib/docker.js","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/plugins.js","type":"ADDED","insertions":96,"deletions":0},{"file":"plugins/filter_owner_networks.js","type":"ADDED","insertions":133,"deletions":0},{"file":"sapi_manifests/docker/template","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/unit/plugin-filter-owner-networks.test.js","type":"ADDED","insertions":290,"deletions":0}],"sizeInsertions":580,"sizeDeletions":-7},{"number":"6","revision":"18b00871d1cececead9e8c3ffb3282580ab7ce5b","parents":["118021272f5390e698aae4e5c660d3a6acef03f5"],"ref":"refs/changes/13/2713/6","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1508362163,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1508362200,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1508365276,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"lib/plugins.js","line":30,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Perhaps call this PluginMgr or similar? Then we could avoid one case of the same name for different things: we\u0027d use \"pluginApi\" as used below for \"This is the API of functions that sdc-docker makes available for use to\n    // the plugins it imports.\""},{"file":"lib/plugins.js","line":30,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Yesss! Great idea.\n\nI was searching for an alternative, but came up empty. Too many concerns with the same name. -.-"},{"file":"lib/plugins.js","line":43,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Likewise perhaps call this \"hooks\" or \"pluginHooks\" or \"pluginFuncs\" or similar to avoid using the \"plugins\" name which is used for the instance of this class in docker.js and \"plugin\" is used below for each loaded plugin module."},{"file":"lib/plugins.js","line":93,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Can we get the comment here to describe specifics enough that it is clear why there is a diff between this ad filterGetNetworksOrPools?"},{"file":"lib/plugins.js","line":94,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"This part is specific to the filter_owner_networks plugin right?"},{"file":"lib/plugins.js","line":133,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"This part is specific to the filter_owner_networks plugin, right?"},{"file":"plugins/filter_owner_networks.js","line":23,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Adding the example sdc-sapi command from the ticket for how to turn this one would be helpful I think:\n\n```\nsdc-sapi /services/$(sdc-sapi /services?name\u003ddocker | json -Ha uuid) -X PUT -d \u0027{\n    \"metadata\": {\n        \"DOCKER_PLUGINS\": \"[{\\\"name\\\":\\\"filter_owner_networks\\\",\\\"enabled\\\": true,\\\"config\\\":{\\\"accounts\\\":[\\\"fb7f31ad-52d6-4e92-83d2-9f9d94ceef3f\\\"]}}]\"\n    }\n}\u0027\n```"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":27,"deletions":-4},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":19,"deletions":-3},{"file":"lib/docker.js","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/plugins.js","type":"ADDED","insertions":148,"deletions":0},{"file":"plugins/filter_owner_networks.js","type":"ADDED","insertions":133,"deletions":0},{"file":"sapi_manifests/docker/template","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/unit/plugin-filter-owner-networks.test.js","type":"ADDED","insertions":290,"deletions":0}],"sizeInsertions":628,"sizeDeletions":-7},{"number":"7","revision":"466b0b62dea1dbd1fd92127f74602309660e1b3c","parents":["118021272f5390e698aae4e5c660d3a6acef03f5"],"ref":"refs/changes/13/2713/7","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1508407378,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1508407420,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1508542985,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1508542985,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1508545841,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":27,"deletions":-4},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":19,"deletions":-3},{"file":"lib/docker.js","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/plugin-manager.js","type":"ADDED","insertions":167,"deletions":0},{"file":"plugins/filter_owner_networks.js","type":"ADDED","insertions":155,"deletions":0},{"file":"sapi_manifests/docker/template","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/unit/plugin-filter-owner-networks.test.js","type":"ADDED","insertions":290,"deletions":0}],"sizeInsertions":669,"sizeDeletions":-7}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}]}