{"project":"joyent/manta","branch":"master","topic":"3284","id":"Id45931ee7f981c45908ec8aa2be62b492c7f832c","number":"2938","subject":"MANTA-3284 want operator-configurable throttle on muskie requests Reviewed by: David Pacheco \u003cdap@joyent.com\u003e Reviewed by: Jordan Hendricks \u003cjordan.hendricks@joyent.com\u003e Approved by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e","owner":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"url":"https://cr.joyent.us/2938","commitMessage":"MANTA-3284 want operator-configurable throttle on muskie requests\nReviewed by: David Pacheco \u003cdap@joyent.com\u003e\nReviewed by: Jordan Hendricks \u003cjordan.hendricks@joyent.com\u003e\nApproved by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e\n","createdOn":1510366711,"lastUpdated":1516397227,"open":false,"status":"MERGED","comments":[{"timestamp":1510366711,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 1."},{"timestamp":1510366713,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1510366725,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Topic set to 3284"},{"timestamp":1510947780,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 1:\n\n(6 comments)\n\nIt would be good to have Dave review this as well.\n\nWhat do you think about making a new section for the throttle? I think we want it to be easily found from skimming the side bar in the rendered version of the guide. My bias would be a new subsection under \"Advanced Deployment Notes\" or \"Overview of Operating Manta\"."},{"timestamp":1511205875,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 2."},{"timestamp":1511205877,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1511205889,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 2:\n\n(6 comments)"},{"timestamp":1511206031,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 2:\n\nTo see how this renders: https://github.com/joyent/manta/blob/dev-MANTA-3284/docs/operator-guide.md#throttling"},{"timestamp":1511206127,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 2:\n\nhttps://github.com/joyent/manta/blob/dev-MANTA-3284/docs/operator-guide.md#throttling"},{"timestamp":1511834113,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 2:\n\n(9 comments)"},{"timestamp":1511891621,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 3."},{"timestamp":1511891623,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1511891641,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 3:\n\n(8 comments)"},{"timestamp":1511908007,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 3: Code-Review+1\n\n(2 comments)"},{"timestamp":1512065331,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 4."},{"timestamp":1512065333,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1512677631,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 4:\n\n(3 comments)"},{"timestamp":1512784768,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 4:\n\n(4 comments)"},{"timestamp":1512784777,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 5."},{"timestamp":1512784779,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1513016525,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1513106571,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 5:\n\n(2 comments)"},{"timestamp":1513275233,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1516299923,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 6."},{"timestamp":1516299925,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1516300355,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 6: Code-Review+1\n\n(3 comments)"},{"timestamp":1516304333,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 6: Code-Review+1\n\n(1 comment)"},{"timestamp":1516306199,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 7."},{"timestamp":1516306201,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1516306211,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 7:\n\n(4 comments)"},{"timestamp":1516306214,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 8: Patch Set 7 was rebased"},{"timestamp":1516306216,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8:\n\n\"make check\" passed ok"},{"timestamp":1516306711,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 8:\n\n(1 comment)"},{"timestamp":1516313174,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 9."},{"timestamp":1516313176,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1516313198,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 10: Patch Set 9 was rebased"},{"timestamp":1516313200,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10:\n\n\"make check\" passed ok"},{"timestamp":1516313206,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 10:\n\n(1 comment)"},{"timestamp":1516320964,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 10: Code-Review+1"},{"timestamp":1516324019,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 10: Code-Review+1\n\n(2 comments)"},{"timestamp":1516324022,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 10: -Code-Review"},{"timestamp":1516326469,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 11."},{"timestamp":1516326471,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1516326483,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 11:\n\n(2 comments)"},{"timestamp":1516326485,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 12: Patch Set 11 was rebased"},{"timestamp":1516326487,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 12:\n\n\"make check\" passed ok"},{"timestamp":1516382538,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 12: Code-Review+1"},{"timestamp":1516387832,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 12: Code-Review+1"},{"timestamp":1516396897,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 12: Integration-Approval+1"},{"timestamp":1516397196,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 13: Commit message was updated."},{"timestamp":1516397227,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jan Wyszynski"}],"currentPatchSet":{"number":"13","revision":"f6022d9512ad8615d05b9f1460d09d5fc5b8a479","parents":["3847bcae8c83e406d33e43c9da309092a45d969c"],"ref":"refs/changes/38/2938/13","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1516397196,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1516326471,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1516382538,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1516387832,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1516396897,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1516397227,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"docs/operator-guide.md","type":"MODIFIED","insertions":82,"deletions":0}],"sizeInsertions":82,"sizeDeletions":0},"patchSets":[{"number":"1","revision":"c689d4c9688f4bd3bf6ff54232cb7736e108cf9a","parents":["4cb5b90d0784f0f28d3c5356e0ba9cbf19210bd2"],"ref":"refs/changes/38/2938/1","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1510366711,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1510366713,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"docs/operator-guide.md","line":351,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"More precisely, it\u0027s each muskie process in the zone, right?"},{"file":"docs/operator-guide.md","line":351,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Done"},{"file":"docs/operator-guide.md","line":354,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"It looks like the style in this guide is to capitalize \"Manta\"."},{"file":"docs/operator-guide.md","line":354,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Done"},{"file":"docs/operator-guide.md","line":358,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"It would be nice to have an example that works out of the box to update these tunables. (e.g., something like the sapiadm command in the Muskie test docs: https://github.com/joyent/manta-muskie#testing.)\n\nThere are other examples of commands in this guide as well."},{"file":"docs/operator-guide.md","line":358,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Done"},{"file":"docs/operator-guide.md","line":361,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Does this list render nicely? I wonder if it would be more readable in a table format with columns: tunable, default value, and definition."},{"file":"docs/operator-guide.md","line":361,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Done"},{"file":"docs/operator-guide.md","line":368,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"I think I would use the active voice here. Something like: \"Muskie sends throttled request a response with HTTP status code 503.\"\n\nAlso, I think it would be better to have the information about the response code up to the summary of what the throttle does, as it\u0027s one of the first questions (I think) an operator would ask about a throttle. Having it in the middle of the text is burying the lede in that regard."},{"file":"docs/operator-guide.md","line":368,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Done"},{"file":"docs/operator-guide.md","line":370,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"It seems like the portion discussing the implication of tunables could be separated out into a smaller subsection to make this text more skimmable."},{"file":"docs/operator-guide.md","line":370,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/operator-guide.md","type":"MODIFIED","insertions":33,"deletions":0}],"sizeInsertions":33,"sizeDeletions":0},{"number":"2","revision":"1fe4c0556071ab50d506b029b828d783772d5cde","parents":["4cb5b90d0784f0f28d3c5356e0ba9cbf19210bd2"],"ref":"refs/changes/38/2938/2","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1511205875,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1511205877,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"docs/operator-guide.md","line":1849,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Would \"Request Throttling\" be a more informative title for this section?"},{"file":"docs/operator-guide.md","line":1849,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Done"},{"file":"docs/operator-guide.md","line":1852,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"This sentence is a bit of a run-on. I think I would also move the summary of when the throttle should be used up to the beginning as well, since that\u0027s something a reader would want quickly. After a bit of editing, I came up with a suggested first few paragraphs for this section. Feel free to take what you want and make changes to make the wording more precise / accurate -- I\u0027m not sure I used the preferred terminology everywhere.\n\n\nSuggested first few paragraphs:\n\n\"Manta provides a coarse request throttle intended to be used when the service is under extreme load and is suffering availability problems that cannot be isolated to a single component. When the throttle is enabled and muskie has reached its configured capacity, the throttle will cause muskie to drop new requests and notify clients their requests have been throttled by sending a response with HTTP status code 503. The throttle is disabled by default.\n\nThe throttle is \"coarse\" because its capacity is a function of all requests to the system, regardless of the originating user, IP address, or API operation. Additionally, any type of request can be throttled.\n\nThe request throttle is implemented on a per-process level, with each \"muskie\" process in a \"webapi\" zone having its own throttle. The throttle exposes three tunables...\n\n...\""},{"file":"docs/operator-guide.md","line":1853,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"nit: s/IPs/IP addresses"},{"file":"docs/operator-guide.md","line":1853,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Done"},{"file":"docs/operator-guide.md","line":1863,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"The table looks really nice in the rendered version!"},{"file":"docs/operator-guide.md","line":1863,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Done"},{"file":"docs/operator-guide.md","line":1864,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Maybe \"whether the throttle is enabled\"?"},{"file":"docs/operator-guide.md","line":1864,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Done"},{"file":"docs/operator-guide.md","line":1866,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Prepend \"number of\" to the description for these two?"},{"file":"docs/operator-guide.md","line":1866,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Done"},{"file":"docs/operator-guide.md","line":1876,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Maybe \"Muskies must be restarted to use the new configuration:\"?"},{"file":"docs/operator-guide.md","line":1876,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Done"},{"file":"docs/operator-guide.md","line":1887,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"With the skimming reader in mind, I would probably add \"process\" the to the first \"muskie\" here to reiterate that the throttle is a process-level one."},{"file":"docs/operator-guide.md","line":1887,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Done"},{"file":"docs/operator-guide.md","line":1900,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"nit: I would remove \"anyway\""},{"file":"docs/operator-guide.md","line":1900,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/operator-guide.md","type":"MODIFIED","insertions":55,"deletions":0}],"sizeInsertions":55,"sizeDeletions":0},{"number":"3","revision":"6cdc012a7cc5aec297c1af51792b2bda3299c4ec","parents":["4cb5b90d0784f0f28d3c5356e0ba9cbf19210bd2"],"ref":"refs/changes/38/2938/3","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1511891621,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1511891623,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1511908007,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"comments":[{"file":"docs/operator-guide.md","line":351,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Accidental addition?"},{"file":"docs/operator-guide.md","line":1892,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Is that last sentence true? Aren\u0027t both tunables at play for limiting load?"},{"file":"docs/operator-guide.md","line":1892,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Yeah - I\u0027m going to change this to \"cpu load.\" The point of this sentence is to get across the fact that more concurrency means that there are more callbacks scheduled on the event loop of a muskie at any given time. I\u0027m also going to add a change which says that lower queue tolerance values will reduce memory consumption."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/operator-guide.md","type":"MODIFIED","insertions":58,"deletions":0}],"sizeInsertions":58,"sizeDeletions":0},{"number":"4","revision":"94f068cd14e82dafa5c6b6206ec65a8601a876a6","parents":["4cb5b90d0784f0f28d3c5356e0ba9cbf19210bd2"],"ref":"refs/changes/38/2938/4","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1512065331,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1512065333,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"docs/operator-guide.md","line":1869,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Should this be \"LIMIT\"?"},{"file":"docs/operator-guide.md","line":1869,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"In the CR, I\u0027ve called the variable queueTolerance and have been referring to it as such all over the place. But if you think it\u0027s unclear or \"LIMIT\" would be better then I can change it."},{"file":"docs/operator-guide.md","line":1869,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I do think it\u0027s clearer, but I wouldn\u0027t make it a blocker for the change."},{"file":"docs/operator-guide.md","line":1886,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Sorry that I haven\u0027t been keeping up with the actual Muskie change.  Is there a way for operators to observe the impact of throttling -- i.e., whether requests are being throttled, how many, etc.?"},{"file":"docs/operator-guide.md","line":1886,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"There are dtrace probes that are documented in the muskie readme. Do you think it\u0027s worth putting here as well?"},{"file":"docs/operator-guide.md","line":1886,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"You might mention that they exist and where the documentation is.  But I don\u0027t think we expect operators to be comfortable writing D scripts as part of normal operation.  Might it be useful to have a tool like `throttlestat` that shows throttling activity (which could use the DTrace probes)?  This isn\u0027t a blocker, and could be done in the future, but in general it\u0027s a good idea to have command-line tools that can show operators how a component is behaving."},{"file":"docs/operator-guide.md","line":1886,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"I\u0027ll add one!"},{"file":"docs/operator-guide.md","line":1892,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"\"CPU\", probably."},{"file":"docs/operator-guide.md","line":1892,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/operator-guide.md","type":"MODIFIED","insertions":58,"deletions":0}],"sizeInsertions":58,"sizeDeletions":0},{"number":"5","revision":"380873a8716003016ad110465c2c188a1a035c3e","parents":["4cb5b90d0784f0f28d3c5356e0ba9cbf19210bd2"],"ref":"refs/changes/38/2938/5","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1512784777,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1512784779,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1513016525,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/operator-guide.md","type":"MODIFIED","insertions":58,"deletions":0}],"sizeInsertions":58,"sizeDeletions":0},{"number":"6","revision":"b1031850b1a7ce1594e10c1b00f3677528c3212e","parents":["4cb5b90d0784f0f28d3c5356e0ba9cbf19210bd2"],"ref":"refs/changes/38/2938/6","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1516299923,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1516300355,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1516299925,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1516304333,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"comments":[{"file":"docs/operator-guide.md","line":1874,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Should there be an example of this message here?"},{"file":"docs/operator-guide.md","line":1874,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Done"},{"file":"docs/operator-guide.md","line":1875,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"\"DTrace\""},{"file":"docs/operator-guide.md","line":1875,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Done"},{"file":"docs/operator-guide.md","line":1877,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"\"is\""},{"file":"docs/operator-guide.md","line":1877,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Done"},{"file":"docs/operator-guide.md","line":1878,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"\"DTrace\""},{"file":"docs/operator-guide.md","line":1878,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/operator-guide.md","type":"MODIFIED","insertions":83,"deletions":0}],"sizeInsertions":83,"sizeDeletions":0},{"number":"7","revision":"41e14bd6b99bbe468fb799b12f0917a1c8bf72e2","parents":["4cb5b90d0784f0f28d3c5356e0ba9cbf19210bd2"],"ref":"refs/changes/38/2938/7","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1516306199,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1516306201,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/operator-guide.md","type":"MODIFIED","insertions":90,"deletions":0}],"sizeInsertions":90,"sizeDeletions":0},{"number":"8","revision":"5d6cd518ff3c017b1adbcd3794f21fe98476ff61","parents":["3847bcae8c83e406d33e43c9da309092a45d969c"],"ref":"refs/changes/38/2938/8","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1516306214,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1516306201,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"docs/operator-guide.md","line":1888,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Does using backticks here render correctly? I noticed when doing other docs changes that they don\u0027t always render the way I expect them to in the html version."},{"file":"docs/operator-guide.md","line":1888,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/operator-guide.md","type":"MODIFIED","insertions":90,"deletions":0}],"sizeInsertions":90,"sizeDeletions":0},{"number":"9","revision":"f889a4088c3aa45f74c4f9ac7c9331a84b939b55","parents":["4cb5b90d0784f0f28d3c5356e0ba9cbf19210bd2"],"ref":"refs/changes/38/2938/9","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1516313174,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1516313176,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/operator-guide.md","type":"MODIFIED","insertions":82,"deletions":0}],"sizeInsertions":82,"sizeDeletions":0},{"number":"10","revision":"3b8f24b15a69cc00eaa529882ec0972b019cbc6d","parents":["3847bcae8c83e406d33e43c9da309092a45d969c"],"ref":"refs/changes/38/2938/10","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1516313198,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1516313176,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1516320964,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"comments":[{"file":"docs/operator-guide.md","line":1870,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I would have thought this wouldn\u0027t render correctly.  Don\u0027t you need four leading spaces?"},{"file":"docs/operator-guide.md","line":1870,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"It seemed to render correctly. I can change it two 4 spaces though."},{"file":"docs/operator-guide.md","line":1906,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"FWIW, I think the backticks here were correct.  I think it\u0027s the triple-backtick around sections that\u0027s a GFM special and not necessarily supported by restdown."},{"file":"docs/operator-guide.md","line":1906,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/operator-guide.md","type":"MODIFIED","insertions":82,"deletions":0}],"sizeInsertions":82,"sizeDeletions":0},{"number":"11","revision":"d45931ee7f981c45908ec8aa2be62b492c7f832c","parents":["4cb5b90d0784f0f28d3c5356e0ba9cbf19210bd2"],"ref":"refs/changes/38/2938/11","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1516326469,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1516326471,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/operator-guide.md","type":"MODIFIED","insertions":82,"deletions":0}],"sizeInsertions":82,"sizeDeletions":0},{"number":"12","revision":"a954b6e4894af5d6e950e0cfab8a6529dd15b36e","parents":["3847bcae8c83e406d33e43c9da309092a45d969c"],"ref":"refs/changes/38/2938/12","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1516326485,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1516382538,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1516396897,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1516326471,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1516387832,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/operator-guide.md","type":"MODIFIED","insertions":82,"deletions":0}],"sizeInsertions":82,"sizeDeletions":0},{"number":"13","revision":"f6022d9512ad8615d05b9f1460d09d5fc5b8a479","parents":["3847bcae8c83e406d33e43c9da309092a45d969c"],"ref":"refs/changes/38/2938/13","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1516397196,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1516382538,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1516396897,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1516326471,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1516387832,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"SUBM","value":"1","grantedOn":1516397227,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"docs/operator-guide.md","type":"MODIFIED","insertions":82,"deletions":0}],"sizeInsertions":82,"sizeDeletions":0}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}]}