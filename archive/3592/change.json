{"project":"joyent/sdc-cloudapi","branch":"master","id":"Iaccd84d9fd81f412cd642016cd3d79b3ac82400f","number":"3592","subject":"TRITON-53 x-account image clone Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"url":"https://cr.joyent.us/3592","commitMessage":"TRITON-53 x-account image clone\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1520882272,"lastUpdated":1530145662,"open":false,"status":"MERGED","comments":[{"timestamp":1520882272,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 1."},{"timestamp":1520882274,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 64e79ac1488e07b5f6efd98a86e811cba9651a6c\n    \n    TRITON-53 x-account image clone"},{"timestamp":1520882305,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1520891336,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 2."},{"timestamp":1520891338,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 9e042ee38665611a2bf395fb14cef5c91136e50d\n    \n    bump sdc-clients version"},{"timestamp":1520891383,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1520985594,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 3."},{"timestamp":1520985595,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 564452d4797cfdb62f0ddc546da61340f876dd57\n    \n    disable provisioning of shared images by default"},{"timestamp":1520985627,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1523388707,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 4."},{"timestamp":1523388709,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit ce903b42df8f3071226e3184623cb10464fb2f00\n    \n    disable provisioning of shared images by default\n    \n    commit 86bd96d3a68dfb025ca5a554bb28690474008f56\n    \n    bump sdc-clients version\n    \n    commit 6255afb15c2ab2377101020642f933a51e6054e6\n    \n    TRITON-53 x-account image clone"},{"timestamp":1523388741,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1523454859,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 4:\n\n(16 comments)"},{"timestamp":1523470213,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 4:\n\n(16 comments)"},{"timestamp":1523474868,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 5."},{"timestamp":1523474869,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit d1d6ee32cc940f1ddd57236e7a701a418bd9a2b4\n    \n    updates for code review"},{"timestamp":1523474903,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1523474927,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 5:\n\n/opt/smartdc/cloudapi/test/runtests -f images.80\n\nPASS: 146 / 146"},{"timestamp":1523479293,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1"},{"timestamp":1525128544,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1528228349,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1528228396,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 6."},{"timestamp":1528228399,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit 7146303491d07af6b570186903b0af6d459ae72b\n    \n    no sdc-cloneimage, use triton image clone\n    \n    commit dc71b6ca0ec74afb6318007fae19c43ea6ffc251\n    \n    updates for code review\n    \n    commit 11570382819eb8bf8af4f07c1eca8e28313f141a\n    \n    disable provisioning of shared images by default\n    \n    commit 46878c94b54a3a9dfbe0990fbf2721fa05fd5a15\n    \n    bump sdc-clients version\n    \n    commit 705abaff869035b35102aa7b780034ab5e0a74e9\n    \n    TRITON-53 x-account image clone"},{"timestamp":1528228432,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1528380415,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 6: Code-Review+1 Integration-Approval+1\n\n(1 comment)"},{"timestamp":1528388288,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1528388295,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 7."},{"timestamp":1528388297,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 7:\n\nNew commits:\n    \n    commit 2cf4e561294c2a2343cf715b7463456bc54b0d29\n    \n    name function callbacks"},{"timestamp":1528388331,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1528396563,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 7: Code-Review+1 Integration-Approval+1"},{"timestamp":1528411411,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 7:\n\n(5 comments)"},{"timestamp":1528751757,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 8."},{"timestamp":1528751760,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 8:\n\nNew commits:\n    \n    commit 7da019e7cd6caeb3378891ae5d4bbfbf119d6ef1\n    \n    update clone docs, cr tweaks and fixes"},{"timestamp":1528751788,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 8:\n\n(5 comments)"},{"timestamp":1528751792,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1528759936,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 8:\n\n\u003e Since both of you seem to have the same opinion, maybe not removing from the ACL is the correct way forward, and then having a separate API (probably off deleteImage) to delete oneself from the shared image ACL?\n\nYah, I like that idea (making it separate, and using DeleteImage for it).  Note that I think we could defer the DeleteImage-to-get-myself-off-the-ACL work."},{"timestamp":1528923499,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 9."},{"timestamp":1528923501,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 9:\n\nNew commits:\n    \n    commit 213f18d9b3f0cfeb8b8a7bc9e78dcbb8f2496841\n    \n    do not remove user from the image.acl after cloning"},{"timestamp":1528923534,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1528923801,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 9:\n\nDropped the image.acl removal after successful cloning."},{"timestamp":1529605078,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 10: Patch Set 9 was rebased."},{"timestamp":1529605080,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 10:\n\nNew commits:\n    \n    commit c7e0475a13989c1dceff5d11cf464b05d0673f80\n    \n    do not remove user from the image.acl after cloning\n    \n    commit 1fe61ba95507abefa27de1694bb003b45256ba23\n    \n    update clone docs, cr tweaks and fixes\n    \n    commit 0346d518ded0afceda18d5e1889220936f7c85ec\n    \n    name function callbacks\n    \n    commit 56c1e7bd0d85c842a605e9eae4b8bb8878c6bcc4\n    \n    no sdc-cloneimage, use triton image clone\n    \n    commit be6b16c802286638a7296dacd23276ddcf4fe2e0\n    \n    updates for code review\n    \n    commit 641de61e8894ec5f05d5024cad69aadd41dd660f\n    \n    disable provisioning of shared images by default\n    \n    commit 8b52ebf42c2bec7c298c08acef0869ce59aa76d9\n    \n    bump sdc-clients version\n    \n    commit 6bd05d3cb65eb13349583abb5c91b3f9b3bca4bb\n    \n    TRITON-53 x-account image clone"},{"timestamp":1529605115,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10:\n\n\"make check\" passed ok"},{"timestamp":1529605961,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 10: Code-Review+1"},{"timestamp":1530051458,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 11."},{"timestamp":1530051459,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 11:\n\nNew commits:\n    \n    commit 07838f425512ffef008420959db8b6489ba6a233\n    \n    do not remove user from the image.acl after cloning\n    \n    commit 3a0718b3821e05623d01797930ba7f0d26b415e1\n    \n    update clone docs, cr tweaks and fixes\n    \n    commit 6f86302102a4b065eff58177547d7c05e1b0f1e8\n    \n    name function callbacks\n    \n    commit df26c9ae542120abb588428892b7cd9ef257982a\n    \n    no sdc-cloneimage, use triton image clone\n    \n    commit d64a213aceacc5bc2097d772717a3f81de86333b\n    \n    updates for code review\n    \n    commit 338d4f60d7ed7b1d3736e5b7ee03f99a974ede91\n    \n    disable provisioning of shared images by default\n    \n    commit 9f214f5253a0aa55d355b102edb2c757caad2346\n    \n    bump sdc-clients version\n    \n    commit 6370f302abf445d9484f4cdd2247f19fa8a1fe26\n    \n    TRITON-53 x-account image clone"},{"timestamp":1530053508,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1530053730,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11:\n\n\"make check\" passed ok"},{"timestamp":1530056514,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 11: Code-Review+1 Integration-Approval+1\n\n(2 comments)"},{"timestamp":1530056586,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 11:\n\n(1 comment)"},{"timestamp":1530057011,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 11: -Code-Review -Integration-Approval\n\n(2 comments)"},{"timestamp":1530136496,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 11:\n\n(4 comments)"},{"timestamp":1530139102,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 11:\n\n(2 comments)"},{"timestamp":1530139735,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 12."},{"timestamp":1530139737,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 12:\n\nNew commits:\n    \n    commit 7589b8212f266497a746a02a363e5b78de1a607f\n    \n    add api version for 9.0.0, move cloneImage tests to new file\n    \n    commit 63abd98a01f7478263aff200c8f33038cad3d90c\n    \n    rename clone function to cloneImage\n    \n    commit 25457cecab242acbb3e5eefe8190221b484e8786\n    \n    only enable CreateMachine allow_shared_images option on API version 9.1.0\n    \n    commit 4b8c6b2da9a360a03980cb5706b8338d9af93473\n    \n    do not remove user from the image.acl after cloning\n    \n    commit 0e9d8faabbf0a96326af9a5d6b772ffec4fbd24d\n    \n    update clone docs, cr tweaks and fixes\n    \n    commit bbbace612a6f42320ec5c01fc6cf04839b570d0e\n    \n    name function callbacks\n    \n    commit 4ccdd73f0923487b6f47cb399bedadbdcfb31694\n    \n    no sdc-cloneimage, use triton image clone\n    \n    commit 6fec4dd0d2f0d819176ebd52923aaf13ad0b9338\n    \n    updates for code review\n    \n    commit 40211c437a489dfe26e1c53ccfd6d30403abcadc\n    \n    disable provisioning of shared images by default\n    \n    commit cf2b02fdb4fd1d4be1aedbd87addbd90ba3dcb74\n    \n    bump sdc-clients version\n    \n    commit 2eb9681ddcb7d462db5b8c7e6afd1c023f961ff7\n    \n    TRITON-53 x-account image clone"},{"timestamp":1530139773,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 12: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1530143149,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 12:\n\n(2 comments)"},{"timestamp":1530143737,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 12:\n\n(2 comments)"},{"timestamp":1530143742,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 13."},{"timestamp":1530143743,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 13:\n\nNew commits:\n    \n    commit 9d6da0b0807f70e2b8e2532e554fdab0b4fbdff4\n    \n    just specify major version"},{"timestamp":1530143778,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 13: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1530144791,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 13: Code-Review+1 Integration-Approval+1\n\n(1 comment)"},{"timestamp":1530144907,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 13:\n\n(1 comment)"},{"timestamp":1530144911,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 14."},{"timestamp":1530144912,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 14:\n\nNew commits:\n    \n    commit 54049dac6ed43bf4f08992fb2f9b44052b110fd9\n    \n    update allow_shared_images version to specify \u0027~9\u0027"},{"timestamp":1530144947,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 14: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1530145112,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 14: Code-Review+1 Integration-Approval+1"},{"timestamp":1530145662,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Todd Whiteman"}],"currentPatchSet":{"number":"14","revision":"accd84d9fd81f412cd642016cd3d79b3ac82400f","parents":["7f8612be2532d1a2910cd0b89ff1d37d58c4ea57"],"ref":"refs/changes/92/3592/14","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1530144911,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1530144947,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1530145112,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1530145112,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1530145662,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":93,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":37,"deletions":-8},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"lib/keys.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/machines.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"lib/nics.js","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/images.80.test.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"test/images.9.test.js","type":"ADDED","insertions":43,"deletions":0},{"file":"test/images/clone.js","type":"ADDED","insertions":224,"deletions":0}],"sizeInsertions":439,"sizeDeletions":-37},"patchSets":[{"number":"1","revision":"2879e69f368b2e0eea98328c9c54aba7d08edc5f","parents":["08f89b020c20fe0b2a5f37fcc2089c2bc7051762"],"ref":"refs/changes/92/3592/1","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1520882272,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1520882305,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":70,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":30,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/images.80.test.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/images/clone.js","type":"ADDED","insertions":212,"deletions":0}],"sizeInsertions":317,"sizeDeletions":-2},{"number":"2","revision":"5c992a09820d66e1662e8abee12b296d7ee9acfe","parents":["08f89b020c20fe0b2a5f37fcc2089c2bc7051762"],"ref":"refs/changes/92/3592/2","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1520891336,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1520891383,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":70,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":30,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/images.80.test.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/images/clone.js","type":"ADDED","insertions":212,"deletions":0}],"sizeInsertions":318,"sizeDeletions":-3},{"number":"3","revision":"6f3e524fcdacd0f0bd906fd1b07dd24332353029","parents":["08f89b020c20fe0b2a5f37fcc2089c2bc7051762"],"ref":"refs/changes/92/3592/3","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1520985594,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1520985627,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":71,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":30,"deletions":-1},{"file":"lib/machines.js","type":"MODIFIED","insertions":9,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/images.80.test.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/images/clone.js","type":"ADDED","insertions":212,"deletions":0}],"sizeInsertions":328,"sizeDeletions":-3},{"number":"4","revision":"efb779e7f36f887a3d77a0b3bfe45f6cb99e59cb","parents":["bcc24669228fcfb62f12685624762e825baa06d0"],"ref":"refs/changes/92/3592/4","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1523388707,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1523388741,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"docs/index.md","line":910,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Add a 8.11.0 section here."},{"file":"docs/index.md","line":910,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/datasets.js","line":603,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"I can see other functions in this file using req.params.image (e.g. loadDatasets and loadImage are exported so might need this), but as far as I can tell params.image won\u0027t ever be set for clone()."},{"file":"lib/datasets.js","line":603,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"I\u0027ll remove req.params.image - I was just following the convention of all other endpoints here."},{"file":"lib/datasets.js","line":611,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name this function."},{"file":"lib/datasets.js","line":611,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/machines.js","line":1135,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Isn\u0027t this always an object?"},{"file":"lib/machines.js","line":1135,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"If you say so :)"},{"file":"lib/machines.js","line":1136,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Nit: I think \"req.params.allow_shared_images\" is just fine here."},{"file":"lib/machines.js","line":1136,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"test/images/clone.js","line":45,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name function."},{"file":"test/images/clone.js","line":45,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"test/images/clone.js","line":45,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Really? :p\n\nSame for the other four up here."},{"file":"test/images/clone.js","line":45,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Or not :P  ... I think I\u0027ve got them this time :)"},{"file":"test/images/clone.js","line":53,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name function"},{"file":"test/images/clone.js","line":53,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"test/images/clone.js","line":72,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name function."},{"file":"test/images/clone.js","line":72,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"test/images/clone.js","line":93,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name function."},{"file":"test/images/clone.js","line":93,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"test/images/clone.js","line":121,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Definitely name this function."},{"file":"test/images/clone.js","line":121,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"test/images/clone.js","line":141,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name function."},{"file":"test/images/clone.js","line":141,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"test/images/clone.js","line":160,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name function."},{"file":"test/images/clone.js","line":160,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"test/images/clone.js","line":182,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name function."},{"file":"test/images/clone.js","line":182,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"test/images/clone.js","line":194,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name function."},{"file":"test/images/clone.js","line":194,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"test/images/clone.js","line":206,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Name function."},{"file":"test/images/clone.js","line":206,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"test/images/clone.js","line":212,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Important: there\u0027s no test in this file checking that someone who isn\u0027t on the acl cannot clone. Due to the nature of cloudapi, we need to assume someone malicious will try something like this.\n\nIt\u0027ll probably be simplest to remove other\u0027s UUID from the original\u0027s acl and try to clone again (and fail)."},{"file":"test/images/clone.js","line":212,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Very good point - I will add tests for this (note that other\u0027s UUID is already removed from the original image ACL on a successful clone - see test \u0027Image ACL no longer contains other\u0027)."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":71,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":30,"deletions":-1},{"file":"lib/machines.js","type":"MODIFIED","insertions":9,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/images.80.test.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/images/clone.js","type":"ADDED","insertions":212,"deletions":0}],"sizeInsertions":328,"sizeDeletions":-3},{"number":"5","revision":"23a14ea20c230c11bbcffae43ed605387c95ac65","parents":["bcc24669228fcfb62f12685624762e825baa06d0"],"ref":"refs/changes/92/3592/5","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1523474868,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1523474903,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1523479293,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1523479293,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"comments":[{"file":"docs/index.md","line":10318,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"No `sdc-cloneimage` (we aren\u0027t adding to node-smartdc), but yes to a `triton image clone ...` command for the second column."},{"file":"docs/index.md","line":10318,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":75,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":30,"deletions":-1},{"file":"lib/machines.js","type":"MODIFIED","insertions":8,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/images.80.test.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/images/clone.js","type":"ADDED","insertions":257,"deletions":0}],"sizeInsertions":376,"sizeDeletions":-3},{"number":"6","revision":"3890a2af2a4295cb5fdf061ea448d532d93d41fc","parents":["7fc4a79d42d88b0c63449bcf23be4124d09f27e1"],"ref":"refs/changes/92/3592/6","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1528228396,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528228432,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528380415,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1528380415,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":75,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":30,"deletions":-1},{"file":"lib/machines.js","type":"MODIFIED","insertions":8,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/images.80.test.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/images/clone.js","type":"ADDED","insertions":257,"deletions":0}],"sizeInsertions":376,"sizeDeletions":-3},{"number":"7","revision":"4e23a4bb98dd193975bb9d83ce3082d44ee1c1d8","parents":["7fc4a79d42d88b0c63449bcf23be4124d09f27e1"],"ref":"refs/changes/92/3592/7","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1528388295,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528388331,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528396563,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1528396563,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"comments":[{"file":"docs/index.md","line":3935,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I\u0027m not sure it would be obvious to readers that this is about getting (a) an independent image that (b) is owned by the caller.\n\nWhat happens to shared origin images in the chain?"},{"file":"docs/index.md","line":3935,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Updated - it was a little brief before."},{"file":"docs/index.md","line":3959,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"`triton *image* clone ...`"},{"file":"docs/index.md","line":3959,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/datasets.js","line":616,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Three \u0027%\u0027 codes, but just two args."},{"file":"lib/datasets.js","line":616,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done - good spotting there."},{"file":"test/images/clone.js","line":162,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Perhaps \"cloned image does not have an ACL\"."},{"file":"test/images/clone.js","line":162,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done."},{"file":"test/images/clone.js","line":184,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Are you saying that cloning a shared image results in a change to the ACL of the shared image? That doesn\u0027t sound right."},{"file":"test/images/clone.js","line":184,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Yep - that\u0027s in the RFD:\nhttps://github.com/joyent/rfd/tree/master/rfd/0113/#m3-x-account-image-clone\n\nThe same comment was brought up by Marsell, which was discussed in the IMGAPI commit here (about this being the wanted behaviour):\nhttps://cr.joyent.us/#/c/3590/4/lib/images.js@4107\n\nSince both of you seem to have the same opinion, maybe not removing from the ACL is the correct way forward, and then having a separate API (probably off deleteImage) to delete oneself from the shared image ACL?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":75,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":30,"deletions":-1},{"file":"lib/machines.js","type":"MODIFIED","insertions":8,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/images.80.test.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/images/clone.js","type":"ADDED","insertions":257,"deletions":0}],"sizeInsertions":376,"sizeDeletions":-3},{"number":"8","revision":"0556cca3c22abf425fdbda3f9cb8375e3a492a62","parents":["7fc4a79d42d88b0c63449bcf23be4124d09f27e1"],"ref":"refs/changes/92/3592/8","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1528751757,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528751792,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":88,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":30,"deletions":-1},{"file":"lib/machines.js","type":"MODIFIED","insertions":8,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/images.80.test.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/images/clone.js","type":"ADDED","insertions":257,"deletions":0}],"sizeInsertions":389,"sizeDeletions":-3},{"number":"9","revision":"5f7b81f32a5a93f7098f871c45deb1047bb21731","parents":["7fc4a79d42d88b0c63449bcf23be4124d09f27e1"],"ref":"refs/changes/92/3592/9","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1528923499,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528923534,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":85,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":30,"deletions":-1},{"file":"lib/machines.js","type":"MODIFIED","insertions":8,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/images.80.test.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/images/clone.js","type":"ADDED","insertions":224,"deletions":0}],"sizeInsertions":353,"sizeDeletions":-3},{"number":"10","revision":"7834ff730d0f2930fa8229b97c55fd1619b3f299","parents":["6ebcae4340dd19c556c7de890e90b3bb6cebe97d"],"ref":"refs/changes/92/3592/10","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1529605078,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528923534,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1529605961,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":85,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":30,"deletions":-1},{"file":"lib/machines.js","type":"MODIFIED","insertions":8,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/images.80.test.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/images/clone.js","type":"ADDED","insertions":224,"deletions":0}],"sizeInsertions":353,"sizeDeletions":-3},{"number":"11","revision":"6ae67036ee59764655c3585cfd3125b26a4fe14d","parents":["8a983a7d935a68527fdf33bd6a4a29adf39ec2e6"],"ref":"refs/changes/92/3592/11","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1530051458,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1530053508,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"docs/index.md","line":923,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Drop the space. Perhaps add \"endpoint\"."},{"file":"docs/index.md","line":923,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"\"This can be used to create a your own copy of an image owned by another account that has been shared with you (via `triton image share`).\""},{"file":"docs/index.md","line":923,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"docs/index.md","line":924,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"At the very least we need to call out the incompat change here that shared images cannot be provisioned without the new \"allow_shared_images\" param to CreateMachine.\n\nI wonder if we should make that behaviour guard on the Accept-Version header in lib/machines.js \"ensureDataset\". I\u0027m leaning towards yes. Then users will only hit this change via an update to node-triton that might limit to \"Accept-Version: ~9\"."},{"file":"docs/index.md","line":924,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Will do"},{"file":"lib/datasets.js","line":685,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Perhaps call this \"cloneImage\" (per the \"exportImage\" example). I\u0027ve tried to start moving away from ungreppable names like \"update\", \"list\", \"get\"  for endpoint function names."},{"file":"lib/datasets.js","line":685,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done - it looked like \"exportImage\" was the exception due to use of reserved JS keyword \"export\"."},{"file":"lib/datasets.js","line":685,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Touche"},{"file":"test/images.80.test.js","line":150,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Actually... really there should be a new images.9.test.js (or \".90.\" if we want) and CloneImage should be tested against that."},{"file":"test/images.80.test.js","line":150,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Will do, there was no \u00279.x\u0027 version when I wrote this :)"},{"file":"test/images.80.test.js","line":150,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Yah. This *would* have been 9.x. Arguably because of the incompat change, we could make this 10.x, but I don\u0027t think we want to go there."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":85,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":30,"deletions":-1},{"file":"lib/machines.js","type":"MODIFIED","insertions":8,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/images.80.test.js","type":"MODIFIED","insertions":4,"deletions":0},{"file":"test/images/clone.js","type":"ADDED","insertions":224,"deletions":0}],"sizeInsertions":353,"sizeDeletions":-3},{"number":"12","revision":"0ea1f00f741e69f86bc34c860eddbd56c917af95","parents":["7f8612be2532d1a2910cd0b89ff1d37d58c4ea57"],"ref":"refs/changes/92/3592/12","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1530139735,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1530139773,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/datasets.js","line":684,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Drop this. Just major versions for API versions."},{"file":"lib/datasets.js","line":684,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/machines.js","line":1136,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I think we just want \u00279.0.0\u0027 here, because for API versions we talk just in terms of major versions (by design, per https://github.com/joyent/sdc-cloudapi/blob/master/docs/index.md#api-versions)."},{"file":"lib/machines.js","line":1136,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":93,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":37,"deletions":-8},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"lib/keys.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/machines.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"lib/nics.js","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/images.80.test.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"test/images.9.test.js","type":"ADDED","insertions":43,"deletions":0},{"file":"test/images/clone.js","type":"ADDED","insertions":224,"deletions":0}],"sizeInsertions":439,"sizeDeletions":-37},{"number":"13","revision":"f678ec1d6c403e501710af8a648898527da0a5ef","parents":["7f8612be2532d1a2910cd0b89ff1d37d58c4ea57"],"ref":"refs/changes/92/3592/13","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1530143742,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1530143778,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1530144791,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1530144791,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"docs/index.md","line":928,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"nit: \"`~9` or higher\""},{"file":"docs/index.md","line":928,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":93,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":37,"deletions":-8},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"lib/keys.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/machines.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"lib/nics.js","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/images.80.test.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"test/images.9.test.js","type":"ADDED","insertions":43,"deletions":0},{"file":"test/images/clone.js","type":"ADDED","insertions":224,"deletions":0}],"sizeInsertions":439,"sizeDeletions":-37},{"number":"14","revision":"accd84d9fd81f412cd642016cd3d79b3ac82400f","parents":["7f8612be2532d1a2910cd0b89ff1d37d58c4ea57"],"ref":"refs/changes/92/3592/14","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1530144911,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1530144947,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1530145112,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1530145112,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1530145662,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":93,"deletions":0},{"file":"lib/datasets.js","type":"MODIFIED","insertions":37,"deletions":-8},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"lib/keys.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/machines.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"lib/nics.js","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/images.80.test.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"test/images.9.test.js","type":"ADDED","insertions":43,"deletions":0},{"file":"test/images/clone.js","type":"ADDED","insertions":224,"deletions":0}],"sizeInsertions":439,"sizeDeletions":-37}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}]}