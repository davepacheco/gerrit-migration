From 908e7502af912b27d379bff3a834f647c40c29f5 Mon Sep 17 00:00:00 2001
From: Marisa Emerson <mje@uq.edu.au>
Date: Fri, 12 Aug 2016 17:46:03 +1000
Subject: [PATCH] joyent/node-triton-tags#2 allow dns names to start with a
 number Reviewed by: Alex Wilson <alex.wilson@joyent.com>

---
 lib/cns-svc-tag.pegjs | 2 +-
 test/unit.test.js     | 5 +++++
 2 files changed, 6 insertions(+), 1 deletion(-)

diff --git a/lib/cns-svc-tag.pegjs b/lib/cns-svc-tag.pegjs
index 09df8a5..83b5b2a 100644
--- a/lib/cns-svc-tag.pegjs
+++ b/lib/cns-svc-tag.pegjs
@@ -14,7 +14,7 @@ service = name:dnslabel port:(":" int)? props:(":" key "=" value)*
 	});
 	return (svc);
 }
-dnslabel "DNS name"		= [a-zA-Z] [a-zA-Z0-9-.]* {
+dnslabel "DNS name"		= [a-zA-Z0-9] [a-zA-Z0-9-.]* {
 	return (text().toLowerCase());
 }
 key "property name"		= [a-z] [a-z0-9-]* 	   { return (text()); }
diff --git a/test/unit.test.js b/test/unit.test.js
index 8e34b42..577b4d5 100644
--- a/test/unit.test.js
+++ b/test/unit.test.js
@@ -176,6 +176,11 @@ var cases = [
         key: 'triton.cns.services',
         str: 'foobar:priority=aaaaaaa',
         err: /must be within the range 0 - 65535/
+    },
+    {
+        key: 'triton.cns.services',
+        str: '5foobar',
+        val: '5foobar'
     }
 
     // TODO: triton.cns.reverse_ptr
-- 
2.21.0

