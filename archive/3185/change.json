{"project":"joyent/registrar","branch":"master","id":"If0ea512aa6160616d3cce9e5a68c7acde2ca8fab","number":"3185","subject":"backout MANTA-3223: needs more work","owner":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"url":"https://cr.joyent.us/3185","commitMessage":"backout MANTA-3223: needs more work\n","createdOn":1515612828,"lastUpdated":1515629356,"open":false,"status":"MERGED","comments":[{"timestamp":1515612828,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Uploaded patch set 1."},{"timestamp":1515612852,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1515613055,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 1:\n\nHere\u0027s what I did. The latest two commits on master are the ones that introduced node-zkstream. These are: 9cc905f and c7f03167. First I pulled master to make sure that I was on the latest version, verifying that these are indeed the latest commits. Then I did two git reverts, reverting 9cc905f and c7f03167 respectively. This resulted in two commits that rolled back the change, so I squashed them into one: f0ea512. Finally, I did: git diff f0ea512 2c4b9a7 (the latter being the commit before MANTA-3223 was introduced) and the output was empty."},{"timestamp":1515613510,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 1:\n\nI ran the registrar through a TRY_BRANCH build and it passed. I\u0027m building and electric-moray image with it and deploying it just to make sure."},{"timestamp":1515615125,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 1:\n\nThe electric-moray zone I deployed came up fine and registered itself with zookeeper."},{"timestamp":1515615416,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 1:\n\nVerified that the ephemeral node survives zookeeper downtime shorter and longer than the session timeout again."},{"timestamp":1515628754,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1: Code-Review+1 Integration-Approval+1\n\nConfirmed that this gets registrar.git back to the state of this commit: https://github.com/joyent/registrar/commit/2c4b9a7db6b9a215e0fcd2ff6f16bde701673812\n\ni.e. it effectively backs out the last two commits. WFM."},{"timestamp":1515629356,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jan Wyszynski"}],"currentPatchSet":{"number":"1","revision":"f0ea512aa6160616d3cce9e5a68c7acde2ca8fab","parents":["9cc905f3600e69b1c5e8e9ed01fbe9294ca50851"],"ref":"refs/changes/85/3185/1","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1515612828,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515612852,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515628754,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1515628754,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1515629356,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"README.md","type":"MODIFIED","insertions":11,"deletions":-11},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/index.js","type":"MODIFIED","insertions":130,"deletions":-144},{"file":"lib/register.js","type":"MODIFIED","insertions":75,"deletions":-140},{"file":"lib/zk.js","type":"ADDED","insertions":135,"deletions":0},{"file":"main.js","type":"MODIFIED","insertions":50,"deletions":-132},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":406,"sizeDeletions":-432},"patchSets":[{"number":"1","revision":"f0ea512aa6160616d3cce9e5a68c7acde2ca8fab","parents":["9cc905f3600e69b1c5e8e9ed01fbe9294ca50851"],"ref":"refs/changes/85/3185/1","uploader":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"createdOn":1515612828,"author":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1515612852,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515628754,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1515628754,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1515629356,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"README.md","type":"MODIFIED","insertions":11,"deletions":-11},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/index.js","type":"MODIFIED","insertions":130,"deletions":-144},{"file":"lib/register.js","type":"MODIFIED","insertions":75,"deletions":-140},{"file":"lib/zk.js","type":"ADDED","insertions":135,"deletions":0},{"file":"main.js","type":"MODIFIED","insertions":50,"deletions":-132},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":406,"sizeDeletions":-432}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}]}