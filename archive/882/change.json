{"project":"joyent/illumos-joyent","branch":"master","id":"Ied2e7e1643fd773befc5898dcb2d6bd83b445030","number":"882","subject":"OS-5693 dis can\u0027t handle x86 SSE 3 instructions OS-5786 want avx2 disasm tests OS-5787 want SSE 4.1 disasm tests Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Approved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e","owner":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"url":"https://cr.joyent.us/882","commitMessage":"OS-5693 dis can\u0027t handle x86 SSE 3 instructions\nOS-5786 want avx2 disasm tests\nOS-5787 want SSE 4.1 disasm tests\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nApproved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n","createdOn":1478843267,"lastUpdated":1478995999,"open":false,"status":"MERGED","comments":[{"timestamp":1478843267,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 1."},{"timestamp":1478886622,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1: Code-Review+1\n\nI\u0027ve primarily looked at dis_tables.c and cross checked against the Intel instruction set doc and this looks good to me."},{"timestamp":1478888154,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\nTested via distest:\n\n[root@b80d08de-e649-43c9-9cc2-3229ae8b55b1 ~/sha-dis/proto/opt/util-tests/tests/dis]# LD_PRELOAD_32\u003d/root/sha-dis/projects/illumos/usr/src/lib/libdisasm/i386/libdisasm.so.1 ./distest \ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/tst.random.s (32-bit) ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/tst.random.s (64-bit) ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/tst.smap.s (32-bit) ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/tst.smap.s (64-bit) ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/tst.mwait.s (32-bit) ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/tst.mwait.s (64-bit) ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/tst.vmx.s (32-bit) ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/tst.vmx.s (64-bit) ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/32.aes.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/32.avx2.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/32.adx.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/32.sha.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/32.sse-4.1.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/32.ssse3.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/32.lzcnt.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/32.popcnt.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/32.sse-4.2.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/32.fma-ps.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/32.fma-ss.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/32.bmi1.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/32.fma-sd.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/32.fma-pd.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/32.bmi2.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/32.sse-3.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/32.xsave.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/64.ssse3.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/64.lzcnt.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/64.avx2.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/64.ept.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/64.sse-4.2.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/64.vmx.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/64.popcnt.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/64.aes.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/64.sha.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/64.random.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/64.adx.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/64.sse-4.1.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/64.fma-sd.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/64.xsave.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/64.fma-pd.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/64.sse-3.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/64.bmi1.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/64.fma-ps.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/64.fma-ss.s ... passed\ntesting /root/sha-dis/proto/opt/util-tests/tests/dis/i386/64.bmi2.s ... passed\n\n--------------\nlibdis Results\n--------------\n\nTests passed: 45\nTests failed: 0\nTests ran:    45"},{"timestamp":1478901739,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1: Integration-Approval+1"},{"timestamp":1478995926,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1478995991,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1478995999,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Robert Mustacchi"}],"currentPatchSet":{"number":"3","revision":"ed2e7e1643fd773befc5898dcb2d6bd83b445030","parents":["276431842910552d352bf035e2088cd0095728e3"],"ref":"refs/changes/82/882/3","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1478995991,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1478886622,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1478901739,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1478995999,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/common/dis/i386/dis_tables.c","type":"MODIFIED","insertions":15,"deletions":-12},{"file":"usr/src/test/util-tests/tests/dis/Makefile","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.avx2-gather.out","type":"ADDED","insertions":48,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.avx2-gather.s","type":"ADDED","insertions":57,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.avx2.out","type":"ADDED","insertions":59,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.avx2.s","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.sse-3.out","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.sse-3.s","type":"ADDED","insertions":56,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.avx2-gather.out","type":"ADDED","insertions":64,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.avx2-gather.s","type":"ADDED","insertions":57,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.avx2.out","type":"ADDED","insertions":59,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.avx2.s","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.sse-3.out","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.sse-3.s","type":"ADDED","insertions":56,"deletions":0}],"sizeInsertions":707,"sizeDeletions":-12},"patchSets":[{"number":"1","revision":"5a4b0974e6ca1295f2ca551cffd1dd427e1a89c5","parents":["9bccb2702470a86886a067b3f775d814ba85da38"],"ref":"refs/changes/82/882/1","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1478843267,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1478886622,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1478901739,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/common/dis/i386/dis_tables.c","type":"MODIFIED","insertions":15,"deletions":-12},{"file":"usr/src/test/util-tests/tests/dis/Makefile","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.avx2-gather.out","type":"ADDED","insertions":48,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.avx2-gather.s","type":"ADDED","insertions":57,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.avx2.out","type":"ADDED","insertions":59,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.avx2.s","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.sse-3.out","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.sse-3.s","type":"ADDED","insertions":56,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.avx2-gather.out","type":"ADDED","insertions":64,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.avx2-gather.s","type":"ADDED","insertions":57,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.avx2.out","type":"ADDED","insertions":59,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.avx2.s","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.sse-3.out","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.sse-3.s","type":"ADDED","insertions":56,"deletions":0}],"sizeInsertions":707,"sizeDeletions":-12},{"number":"2","revision":"dcf52a3d545301274a22002a8ca8d609a08167b5","parents":["276431842910552d352bf035e2088cd0095728e3"],"ref":"refs/changes/82/882/2","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1478995926,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1478886622,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1478901739,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/common/dis/i386/dis_tables.c","type":"MODIFIED","insertions":15,"deletions":-12},{"file":"usr/src/test/util-tests/tests/dis/Makefile","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.avx2-gather.out","type":"ADDED","insertions":48,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.avx2-gather.s","type":"ADDED","insertions":57,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.avx2.out","type":"ADDED","insertions":59,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.avx2.s","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.sse-3.out","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.sse-3.s","type":"ADDED","insertions":56,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.avx2-gather.out","type":"ADDED","insertions":64,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.avx2-gather.s","type":"ADDED","insertions":57,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.avx2.out","type":"ADDED","insertions":59,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.avx2.s","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.sse-3.out","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.sse-3.s","type":"ADDED","insertions":56,"deletions":0}],"sizeInsertions":707,"sizeDeletions":-12},{"number":"3","revision":"ed2e7e1643fd773befc5898dcb2d6bd83b445030","parents":["276431842910552d352bf035e2088cd0095728e3"],"ref":"refs/changes/82/882/3","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1478995991,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1478995999,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1478886622,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1478901739,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/common/dis/i386/dis_tables.c","type":"MODIFIED","insertions":15,"deletions":-12},{"file":"usr/src/test/util-tests/tests/dis/Makefile","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.avx2-gather.out","type":"ADDED","insertions":48,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.avx2-gather.s","type":"ADDED","insertions":57,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.avx2.out","type":"ADDED","insertions":59,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.avx2.s","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.sse-3.out","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/32.sse-3.s","type":"ADDED","insertions":56,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.avx2-gather.out","type":"ADDED","insertions":64,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.avx2-gather.s","type":"ADDED","insertions":57,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.avx2.out","type":"ADDED","insertions":59,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.avx2.s","type":"ADDED","insertions":84,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.sse-3.out","type":"ADDED","insertions":31,"deletions":0},{"file":"usr/src/test/util-tests/tests/dis/i386/64.sse-3.s","type":"ADDED","insertions":56,"deletions":0}],"sizeInsertions":707,"sizeDeletions":-12}],"allReviewers":[{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}]}