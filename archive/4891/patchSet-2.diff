commit 450a7650532f8d6eb9280530aca25a132a16c084 (refs/changes/91/4891/2)
Author: Orlando Vazquez <ovazquez@gmail.com>
Date:   2018-09-27T13:32:25-07:00 (1 year ago)
    
    TRITON-799 Server list functionality should log DAPI's reasoning

diff --git a/lib/endpoints/servers.js b/lib/endpoints/servers.js
index 2f3acaa..e45e80d 100644
--- a/lib/endpoints/servers.js
+++ b/lib/endpoints/servers.js
@@ -198,13 +198,14 @@ Server.list = function handlerSeverList(req, res, next) {
 
                 // this mutates s, adding unreserved_cpu, unreserved_ram
                 // and unreserved_disk to eligible servers
-                Designation.serverCapacity(s, function (err) {
+                Designation.serverCapacity(s,
+                function ( err, serversUnreserved, reasons) {
                     if (err) {
                         cb(err);
                         return;
                     }
 
-                    req.log.debug('Done running capacity');
+                    req.log.debug({reasons: reasons}, 'Done running capacity');
 
                     if (noAll) {
                         // if noAll is true, options.extras exists
diff --git a/package.json b/package.json
index c73d84f..16904d4 100644
--- a/package.json
+++ b/package.json
@@ -1,7 +1,7 @@
 {
   "name": "cnapi",
   "description": "SmartDataCenter Compute Node API",
-  "version": "1.12.1",
+  "version": "1.12.2",
   "author": "Joyent (joyent.com)",
   "private": true,
   "dependencies": {
