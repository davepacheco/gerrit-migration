{"project":"joyent/illumos-joyent","branch":"master","id":"Ifb1b55c17317bfc5bf3eb32276bf250c707246a3","number":"2506","subject":"OS-6327 mpt_sas should not require targets to send SEP messages Reviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e Reviewed by: Hans Rosenfeld \u003chans.rosenfeld@joyent.com\u003e Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Approved by: Dan McDonald \u003cdanmcd","owner":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"url":"https://cr.joyent.us/2506","commitMessage":"OS-6327 mpt_sas should not require targets to send SEP messages\nReviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e\nReviewed by: Hans Rosenfeld \u003chans.rosenfeld@joyent.com\u003e\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nApproved by: Dan McDonald \u003cdanmcd@joyent.com\u003e\n","createdOn":1504738331,"lastUpdated":1513381414,"open":false,"status":"MERGED","comments":[{"timestamp":1504738331,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 1."},{"timestamp":1504814428,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 1: Code-Review+1\n\n(1 comment)\n\nLike most of mpt_sas (or mr_sas for that matter), the lack of commented code is the biggest barrier to understanding the changes.\n\nThe comments in OS-6327, however, remove the barrier for this changeset.  There\u0027s one nit that \"dmake\" in usr/src/uts/intel/mpt_sas would catch for you anyway, but that\u0027s all."},{"timestamp":1504816224,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 2."},{"timestamp":1504816240,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1504834765,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1504916659,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2: Code-Review+1\n\n(1 comment)"},{"timestamp":1505223158,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1505258895,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1505258907,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 3."},{"timestamp":1505259144,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 3: Code-Review+1\n\nGood catch with the assert()."},{"timestamp":1505273626,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1505290826,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1506967939,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1513381239,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1513381408,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1513381414,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Robert Mustacchi"}],"currentPatchSet":{"number":"5","revision":"fb1b55c17317bfc5bf3eb32276bf250c707246a3","parents":["567bd93d702a0105477bd9edd4ef7e8098749b41"],"ref":"refs/changes/06/2506/5","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1513381408,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505259144,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505273626,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505290826,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506967939,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"SUBM","value":"1","grantedOn":1513381414,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/uts/common/io/scsi/adapters/mpt_sas/mptsas.c","type":"MODIFIED","insertions":100,"deletions":-91},{"file":"usr/src/uts/common/io/scsi/adapters/mpt_sas/mptsas_impl.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/common/sys/scsi/adapters/mpt_sas/mptsas_var.h","type":"MODIFIED","insertions":3,"deletions":-3}],"sizeInsertions":106,"sizeDeletions":-94},"patchSets":[{"number":"1","revision":"f7734a4cc42e371993be343871ccd614251d5f6d","parents":["468fe59992746b536d9e84763d00706eb773e2cd"],"ref":"refs/changes/06/2506/1","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1504738331,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1504814428,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"comments":[{"file":"usr/src/uts/common/io/scsi/adapters/mpt_sas/mptsas.c","line":14688,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Extra \u0027`\u0027 character?"},{"file":"usr/src/uts/common/io/scsi/adapters/mpt_sas/mptsas.c","line":14688,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Oops, a last minute change in the pbchk missed that. Thanks."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/io/scsi/adapters/mpt_sas/mptsas.c","type":"MODIFIED","insertions":98,"deletions":-91},{"file":"usr/src/uts/common/io/scsi/adapters/mpt_sas/mptsas_impl.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/sys/scsi/adapters/mpt_sas/mptsas_var.h","type":"MODIFIED","insertions":4,"deletions":-4}],"sizeInsertions":106,"sizeDeletions":-96},{"number":"2","revision":"d8032ba0d3feb5a04263c9f4ca983386f600128c","parents":["468fe59992746b536d9e84763d00706eb773e2cd"],"ref":"refs/changes/06/2506/2","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1504816224,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1504916659,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505223158,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1504834765,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"comments":[{"file":"usr/src/uts/common/io/scsi/adapters/mpt_sas/mptsas.c","line":16739,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Perhaps an ASSERT() that idx \u003c me_nslot?"},{"file":"usr/src/uts/common/io/scsi/adapters/mpt_sas/mptsas.c","line":16739,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"That\u0027s not a bad idea."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/io/scsi/adapters/mpt_sas/mptsas.c","type":"MODIFIED","insertions":98,"deletions":-91},{"file":"usr/src/uts/common/io/scsi/adapters/mpt_sas/mptsas_impl.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/sys/scsi/adapters/mpt_sas/mptsas_var.h","type":"MODIFIED","insertions":4,"deletions":-4}],"sizeInsertions":106,"sizeDeletions":-96},{"number":"3","revision":"9da444cf9c2d8a976e451b70ac103f84532904f5","parents":["468fe59992746b536d9e84763d00706eb773e2cd"],"ref":"refs/changes/06/2506/3","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1505258907,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505273626,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505290826,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505259144,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506967939,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/io/scsi/adapters/mpt_sas/mptsas.c","type":"MODIFIED","insertions":100,"deletions":-91},{"file":"usr/src/uts/common/io/scsi/adapters/mpt_sas/mptsas_impl.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/sys/scsi/adapters/mpt_sas/mptsas_var.h","type":"MODIFIED","insertions":4,"deletions":-4}],"sizeInsertions":108,"sizeDeletions":-96},{"number":"4","revision":"4c564f4af8c760674d9ccaa914dd623beed8904c","parents":["567bd93d702a0105477bd9edd4ef7e8098749b41"],"ref":"refs/changes/06/2506/4","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1513381239,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505273626,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505290826,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505259144,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506967939,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/io/scsi/adapters/mpt_sas/mptsas.c","type":"MODIFIED","insertions":100,"deletions":-91},{"file":"usr/src/uts/common/io/scsi/adapters/mpt_sas/mptsas_impl.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/common/sys/scsi/adapters/mpt_sas/mptsas_var.h","type":"MODIFIED","insertions":3,"deletions":-3}],"sizeInsertions":106,"sizeDeletions":-94},{"number":"5","revision":"fb1b55c17317bfc5bf3eb32276bf250c707246a3","parents":["567bd93d702a0105477bd9edd4ef7e8098749b41"],"ref":"refs/changes/06/2506/5","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1513381408,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1513381414,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505273626,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505290826,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505259144,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1506967939,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/uts/common/io/scsi/adapters/mpt_sas/mptsas.c","type":"MODIFIED","insertions":100,"deletions":-91},{"file":"usr/src/uts/common/io/scsi/adapters/mpt_sas/mptsas_impl.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/common/sys/scsi/adapters/mpt_sas/mptsas_var.h","type":"MODIFIED","insertions":3,"deletions":-3}],"sizeInsertions":106,"sizeDeletions":-94}],"allReviewers":[{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}]}