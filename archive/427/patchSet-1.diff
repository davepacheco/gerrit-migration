From cd0def5953c39789f67fe4912823a5c11633ca6d Mon Sep 17 00:00:00 2001
From: Orlando Vazquez <ovazquez@gmail.com>
Date: Wed, 7 Sep 2016 10:23:44 -0700
Subject: [PATCH] CNAPI-667 CNAPI dying with: TypeError: Cannot read property
 'limit' of undefined

---
 lib/models/waitlist.js | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/lib/models/waitlist.js b/lib/models/waitlist.js
index 6a92aeb..5e3f332 100644
--- a/lib/models/waitlist.js
+++ b/lib/models/waitlist.js
@@ -487,7 +487,7 @@ ModelWaitlist.query = function (filter, findOpts, callback) {
     }
 
     var findParams = jsprim.deepCopy(findOpts);
-    var sort = findParams.sort;
+    var sort = findParams.sort || {};
     findParams.sort = jsprim.deepCopy(defaultSort);
 
     if (sort.limit) {
-- 
2.21.0

