{"project":"joyent/sdc-vmapi","branch":"master","id":"Icd55f3f0932feb30b65f12d04237beab0a826c4d","number":"6150","subject":"TRITON-1407 Migration sync fails with a snapshot out of space error for bhyve zones Reviewed by: Orlando Vazquez \u003corlando@joyent.com\u003e Approved by: Orlando Vazquez \u003corlando@joyent.com\u003e","owner":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"url":"https://cr.joyent.us/6150","commitMessage":"TRITON-1407 Migration sync fails with a snapshot out of space error for bhyve zones\nReviewed by: Orlando Vazquez \u003corlando@joyent.com\u003e\nApproved by: Orlando Vazquez \u003corlando@joyent.com\u003e\n","createdOn":1556055417,"lastUpdated":1556559674,"open":false,"status":"MERGED","comments":[{"timestamp":1556055417,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 1."},{"timestamp":1556055419,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 6be0828bd22a68d6065bb80d9fb22111acccea4a\n    \n    TRITON-1407 Migration sync fails with a snapshot out of space error for bhyve zones"},{"timestamp":1556055451,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1556058047,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1556058048,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 8fb7beec78e46d7c113e3582a9e1c052634b32ed\n    \n    TRITON-1407 Migration sync fails with a snapshot out of space error for bhyve zones"},{"timestamp":1556058081,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2:\n\n\"make check\" passed ok"},{"timestamp":1556227137,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 2:\n\n(3 comments)"},{"timestamp":1556236504,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\n(3 comments)"},{"timestamp":1556236529,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 3."},{"timestamp":1556236531,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit c3dcc846572e6720eb6fe9d743bfb77cf7a48231\n    \n    fix typos\n    \n    commit a550ae099219b348fe50d38f1eaaedc47a877ad8\n    \n    TRITON-1407 Migration sync fails with a snapshot out of space error for bhyve zones"},{"timestamp":1556236563,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1556300101,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1556301308,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 4."},{"timestamp":1556301310,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 27f9eacba3d3397ea89620a2cf2c2b06c3d6203e\n    \n    fix typos\n    \n    commit cc61c81bde6642f9f670a4c420ababdc5fa5f100\n    \n    TRITON-1407 Migration sync fails with a snapshot out of space error for bhyve zones"},{"timestamp":1556301352,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1556554904,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1"},{"timestamp":1556559674,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Todd Whiteman"}],"currentPatchSet":{"number":"4","revision":"cd55f3f0932feb30b65f12d04237beab0a826c4d","parents":["9ec65c5a19dfd130003b79a8f63d60ea8e39e533"],"ref":"refs/changes/50/6150/4","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1556301308,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1556301352,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556554904,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556554904,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"SUBM","value":"1","grantedOn":1556559674,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":32,"deletions":-9},{"file":"lib/workflows/migrate-abort.js","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"lib/workflows/migrate-begin.js","type":"MODIFIED","insertions":14,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"lib/workflows/migrate-sync.js","type":"MODIFIED","insertions":12,"deletions":0},{"file":"lib/workflows/vm-migration/abort.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/workflows/vm-migration/begin.js","type":"MODIFIED","insertions":191,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"MODIFIED","insertions":230,"deletions":-22},{"file":"lib/workflows/vm-migration/pause.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"test/vms.migrate.test.js","type":"MODIFIED","insertions":13,"deletions":-14}],"sizeInsertions":520,"sizeDeletions":-50},"patchSets":[{"number":"1","revision":"9c76c5cf1836e3dd21304a43397d11f9e8a67d47","parents":["f05ddd7fb0ad2ecf6a0f943e841a86108946a826"],"ref":"refs/changes/50/6150/1","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1556055417,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1556055451,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":32,"deletions":-9},{"file":"lib/workflows/migrate-abort.js","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"lib/workflows/migrate-begin.js","type":"MODIFIED","insertions":14,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"lib/workflows/migrate-sync.js","type":"MODIFIED","insertions":12,"deletions":0},{"file":"lib/workflows/vm-migration/abort.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/workflows/vm-migration/begin.js","type":"MODIFIED","insertions":191,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"MODIFIED","insertions":230,"deletions":-22},{"file":"lib/workflows/vm-migration/pause.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"test/vms.migrate.test.js","type":"MODIFIED","insertions":13,"deletions":-14}],"sizeInsertions":520,"sizeDeletions":-50},{"number":"2","revision":"5c3bd95c5e83fd8c8cb22e88a18bc0410083e78a","parents":["f9ab35ddb9cb6b17572ff5b91ac4b1108f135803"],"ref":"refs/changes/50/6150/2","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1556058047,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1556055451,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/workflows/vm-migration/begin.js","line":52,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Should be _getSourceFsCb?"},{"file":"lib/workflows/vm-migration/begin.js","line":52,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/workflows/vm-migration/begin.js","line":95,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Should be _getTargetFsCb?"},{"file":"lib/workflows/vm-migration/begin.js","line":95,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/workflows/vm-migration/begin.js","line":150,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"retrieve"},{"file":"lib/workflows/vm-migration/begin.js","line":150,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":32,"deletions":-9},{"file":"lib/workflows/migrate-abort.js","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"lib/workflows/migrate-begin.js","type":"MODIFIED","insertions":14,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"lib/workflows/migrate-sync.js","type":"MODIFIED","insertions":12,"deletions":0},{"file":"lib/workflows/vm-migration/abort.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/workflows/vm-migration/begin.js","type":"MODIFIED","insertions":191,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"MODIFIED","insertions":230,"deletions":-22},{"file":"lib/workflows/vm-migration/pause.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"test/vms.migrate.test.js","type":"MODIFIED","insertions":13,"deletions":-14}],"sizeInsertions":520,"sizeDeletions":-50},{"number":"3","revision":"c7e58b410bd89026e0a6cbe805d8e4e4284104ac","parents":["3b971795afff53258a4f24c1419e5a87bbbe4b9e"],"ref":"refs/changes/50/6150/3","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1556236529,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1556236563,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556300101,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556300101,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":32,"deletions":-9},{"file":"lib/workflows/migrate-abort.js","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"lib/workflows/migrate-begin.js","type":"MODIFIED","insertions":14,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"lib/workflows/migrate-sync.js","type":"MODIFIED","insertions":12,"deletions":0},{"file":"lib/workflows/vm-migration/abort.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/workflows/vm-migration/begin.js","type":"MODIFIED","insertions":191,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"MODIFIED","insertions":230,"deletions":-22},{"file":"lib/workflows/vm-migration/pause.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"test/vms.migrate.test.js","type":"MODIFIED","insertions":13,"deletions":-14}],"sizeInsertions":520,"sizeDeletions":-50},{"number":"4","revision":"cd55f3f0932feb30b65f12d04237beab0a826c4d","parents":["9ec65c5a19dfd130003b79a8f63d60ea8e39e533"],"ref":"refs/changes/50/6150/4","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1556301308,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1556301352,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556554904,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556554904,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"SUBM","value":"1","grantedOn":1556559674,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":32,"deletions":-9},{"file":"lib/workflows/migrate-abort.js","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"lib/workflows/migrate-begin.js","type":"MODIFIED","insertions":14,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"lib/workflows/migrate-sync.js","type":"MODIFIED","insertions":12,"deletions":0},{"file":"lib/workflows/vm-migration/abort.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/workflows/vm-migration/begin.js","type":"MODIFIED","insertions":191,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"MODIFIED","insertions":230,"deletions":-22},{"file":"lib/workflows/vm-migration/pause.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"test/vms.migrate.test.js","type":"MODIFIED","insertions":13,"deletions":-14}],"sizeInsertions":520,"sizeDeletions":-50}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}]}