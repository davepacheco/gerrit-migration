From 557622a82c286ea09f924ffc9cf6e948a4185c8f Mon Sep 17 00:00:00 2001
From: Trent Mick <trentm@gmail.com>
Date: Mon, 29 Jul 2019 16:40:33 -0700
Subject: [PATCH] MANTA-4439 'manta-shardadm list' should include set
 BUCKETS_MORAY_SHARDS

---
 cmd/manta-shardadm.js | 10 +++++++++-
 package.json          |  2 +-
 2 files changed, 10 insertions(+), 2 deletions(-)

diff --git a/cmd/manta-shardadm.js b/cmd/manta-shardadm.js
index 52b77d4..15dabb9 100755
--- a/cmd/manta-shardadm.js
+++ b/cmd/manta-shardadm.js
@@ -100,12 +100,13 @@ Shardadm.prototype.do_list.help = (
 );
 
 function printShards(metadata, cb) {
+	var i;
 	var fmt = '%-12s %s';
 
 	console.log(sprintf(fmt, 'TYPE', 'SHARD NAME'));
 
 	if (metadata[common.INDEX_SHARDS]) {
-		for (var i = 0; i < metadata[common.INDEX_SHARDS].length; i++) {
+		for (i = 0; i < metadata[common.INDEX_SHARDS].length; i++) {
 			console.log(sprintf(fmt,
 			    'Index', metadata[common.INDEX_SHARDS][i].host));
 		}
@@ -118,6 +119,13 @@ function printShards(metadata, cb) {
 		console.log(sprintf(fmt,
 		    'Storage', metadata[common.STORAGE_SHARD]));
 
+	if (metadata[common.BUCKETS_SHARDS]) {
+		for (i = 0; i < metadata[common.BUCKETS_SHARDS].length; i++) {
+			console.log(sprintf(fmt, 'Buckets',
+			    metadata[common.BUCKETS_SHARDS][i].host));
+		}
+	}
+
 	return (cb(null));
 }
 
diff --git a/package.json b/package.json
index 9de8c88..53fee8d 100644
--- a/package.json
+++ b/package.json
@@ -1,7 +1,7 @@
 {
     "name": "manta-deployment",
     "description": "Manta deployment configuration",
-    "version": "0.0.6",
+    "version": "0.0.7",
     "author": "Joyent (joyent.com)",
     "license": "MPL-2.0",
     "private": true,
-- 
2.21.0

