{"project":"joyent/sdc-booter","branch":"master","topic":"newboot","id":"I99902558c10a418f66b3093c864fb7cbe1763640","number":"5377","subject":"TRITON-1016 Need to build and deliver the ipxe EFI binary TRITON-1072 sdc-booter needs EFI chain-loading support Reviewed by: Rui \u003crui@joyent.com\u003e Reviewed by: Cody Peter Mello \u003cmelloc@writev.io\u003e Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Approved by: ","owner":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"url":"https://cr.joyent.us/5377","commitMessage":"TRITON-1016 Need to build and deliver the ipxe EFI binary\nTRITON-1072 sdc-booter needs EFI chain-loading support\nReviewed by: Rui \u003crui@joyent.com\u003e\nReviewed by: Cody Peter Mello \u003cmelloc@writev.io\u003e\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nApproved by: Robert Mustacchi \u003crm@joyent.com\u003e\n","createdOn":1547736125,"lastUpdated":1554714244,"open":false,"status":"MERGED","comments":[{"timestamp":1547736125,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 1."},{"timestamp":1547736148,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\nPreliminary webrev for newboot"},{"timestamp":1547736153,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1547840578,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1547904350,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1548205293,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1548243905,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1548422937,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 2."},{"timestamp":1548422975,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing-1\n\n(4 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1548423668,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 3."},{"timestamp":1548423705,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1548423845,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3:\n\nThis version is tested against my new CN booting in EFI mode. We correctly provide snponly.efi based on its client arch.\n\nI could not (yet) test legacy mode boot, as this CN refuses to PXE in such a case.\n\nAlso, snponly.efi itself is currently DOA. Attempt to debug is ongoing, but right now things are not looking positive."},{"timestamp":1548702965,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1548705406,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1548769809,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 4."},{"timestamp":1548769847,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1549472021,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1550512412,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 5."},{"timestamp":1550512443,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1550601436,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1550689967,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Patch Set 5:\n\n(5 comments)"},{"timestamp":1550692301,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1550750540,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 5:\n\n(2 comments)"},{"timestamp":1550755470,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1550756547,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 6."},{"timestamp":1550756578,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1550757345,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 7."},{"timestamp":1550757377,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1550759965,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Patch Set 7: Code-Review+1"},{"timestamp":1550778371,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 7: Code-Review+1\n\n(1 comment)"},{"timestamp":1550778726,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 7:\n\n(1 comment)"},{"timestamp":1550779335,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 7:\n\n(1 comment)"},{"timestamp":1550787001,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 7: Code-Review+1"},{"timestamp":1551784998,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Topic set to newboot"},{"timestamp":1553953977,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 8: Patch Set 7 was rebased"},{"timestamp":1553954008,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8:\n\n\"make check\" passed ok"},{"timestamp":1554229827,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 8: Integration-Approval+1"},{"timestamp":1554313355,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 9: Commit message was updated."},{"timestamp":1554714244,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by John Levon"}],"currentPatchSet":{"number":"9","revision":"99902558c10a418f66b3093c864fb7cbe1763640","parents":["5f1176c0ddb1dc1ed99ca95cd12e04983a08aea0"],"ref":"refs/changes/77/5377/9","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1554313355,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550757377,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550759965,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550778371,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550787001,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554229827,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1554714244,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/dhcp.js","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"lib/dhcpd.js","type":"MODIFIED","insertions":37,"deletions":-9},{"file":"tftpboot/snponly.efi","type":"ADDED","insertions":0,"deletions":0},{"file":"tftpboot/undionly.kpxe","type":"MODIFIED","insertions":0,"deletions":0},{"file":"tools/update_ipxe","type":"MODIFIED","insertions":23,"deletions":-25}],"sizeInsertions":75,"sizeDeletions":-36},"patchSets":[{"number":"1","revision":"4abc54c30ba9b8124b82239d5d71710846b37b5f","parents":["dde180a54f64a7db523d21ac594fc9c7a04cfbbe"],"ref":"refs/changes/77/5377/1","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1547736125,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1547736153,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/dhcpd.js","line":357,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"We may no longer need the pxegrub fallback. I don\u0027t know where the last place we actually enabled it was."},{"file":"lib/dhcpd.js","line":357,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I\u0027ll ask around"},{"file":"lib/dhcpd.js","line":364,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by tabs instead of spaces"},{"file":"lib/dhcpd.js","line":364,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Sounds like we should actually fix this."},{"file":"lib/dhcpd.js","line":364,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"This code is totally untested right now. I need a setup I can  test this on to follow up on this."},{"file":"lib/dhcpd.js","line":364,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"OK, do you need help getting that set up?"},{"file":"lib/dhcpd.js","line":364,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I think I can probably figure it out, but yes I need access to an HN and a CN which I can test this out on. And the latter will need a total re-install. Thanks for the help."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/dhcpd.js","type":"MODIFIED","insertions":20,"deletions":-2},{"file":"tftpboot/snponly.efi","type":"ADDED","insertions":0,"deletions":0},{"file":"tftpboot/undionly.kpxe","type":"MODIFIED","insertions":0,"deletions":0},{"file":"tools/update_ipxe","type":"MODIFIED","insertions":23,"deletions":-25}],"sizeInsertions":43,"sizeDeletions":-27},{"number":"2","revision":"3b67a83d19dc4914dc70cd29b0f94bce4fbaeab2","parents":["70fcae5f8ffafa308043576b6746360ee4ef8ff7"],"ref":"refs/changes/77/5377/2","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1548422937,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1548422975,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/dhcpd.js","line":369,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"block comment not indented by spaces"},{"file":"lib/dhcpd.js","line":370,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by tabs instead of spaces"},{"file":"lib/dhcpd.js","line":371,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"improper block comment"},{"file":"lib/dhcpd.js","line":372,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"improper block comment close"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/dhcp.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"lib/dhcpd.js","type":"MODIFIED","insertions":32,"deletions":-2},{"file":"tftpboot/snponly.efi","type":"ADDED","insertions":0,"deletions":0},{"file":"tftpboot/undionly.kpxe","type":"MODIFIED","insertions":0,"deletions":0},{"file":"tools/update_ipxe","type":"MODIFIED","insertions":23,"deletions":-25}],"sizeInsertions":68,"sizeDeletions":-28},{"number":"3","revision":"8f0dd7d07bcd702bab38f4fca62e4136ad30594b","parents":["70fcae5f8ffafa308043576b6746360ee4ef8ff7"],"ref":"refs/changes/77/5377/3","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1548423668,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1548423705,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/dhcpd.js","line":376,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"If this is a uint16_t, why are we only looking at the low byte? What if we end up assigning values with the high bit set?"},{"file":"lib/dhcpd.js","line":376,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Fair point. It\u0027s unlikely but we should indeed confirm the first byte is zero."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/dhcp.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"lib/dhcpd.js","type":"MODIFIED","insertions":32,"deletions":-2},{"file":"tftpboot/snponly.efi","type":"ADDED","insertions":0,"deletions":0},{"file":"tftpboot/undionly.kpxe","type":"MODIFIED","insertions":0,"deletions":0},{"file":"tools/update_ipxe","type":"MODIFIED","insertions":23,"deletions":-25}],"sizeInsertions":68,"sizeDeletions":-28},{"number":"4","revision":"941bc37b1371db1d78834249f8e749bd7c24b133","parents":["70fcae5f8ffafa308043576b6746360ee4ef8ff7"],"ref":"refs/changes/77/5377/4","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1548769809,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549472021,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1548769847,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/dhcp.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"lib/dhcpd.js","type":"MODIFIED","insertions":32,"deletions":-2},{"file":"tftpboot/snponly.efi","type":"ADDED","insertions":0,"deletions":0},{"file":"tftpboot/undionly.kpxe","type":"MODIFIED","insertions":0,"deletions":0},{"file":"tools/update_ipxe","type":"MODIFIED","insertions":23,"deletions":-25}],"sizeInsertions":68,"sizeDeletions":-28},{"number":"5","revision":"2582385fcfcfb57d21213f29fa58a24bf5adcd4d","parents":["d2df956a92ba18006c1e4f8f96d4a8d23e7b756c"],"ref":"refs/changes/77/5377/5","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1550512412,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550601436,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550512443,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/dhcp.js","line":152,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Looking at the errata for RFC 4578, 9 should be \"EFI BC\", and 7 should be \"EFI x86-64\":\n\nhttps://www.rfc-editor.org/errata_search.php?rfc\u003d4578\n\nIt notes:\n\n\u003e  The values for EFI BC and EFI x86-64 should be swapped. UEFI imeplementations use value 7 to report EFI x86-64, not value 9. The IANA registry for DHCPv6 options (http://www.iana.org/assignments/dhcpv6-parameters/dhcpv6-parameters.xhtml#processor-architecture) correctly reflects reality, with values 7 and 9 swapped compared to RFC 4578."},{"file":"lib/dhcp.js","line":152,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Thanks, that explains why my system was reporting BC!"},{"file":"lib/dhcpd.js","line":308,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Removing this changes the existing behavior somewhat. \nIn the event that packet.options[77] is set but the userClass is not iPXE, packetOpts.file will be undefined.  Could there be opensource customers that depend on this behavior?"},{"file":"lib/dhcpd.js","line":308,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Yeah, could be. Regardless, re-orging the code made it much clearer and simpler anyway."},{"file":"lib/dhcpd.js","line":8,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"nit: 2019"},{"file":"lib/dhcpd.js","line":380,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"} else {\n    log.warn(\u0027Found unsupported client architecture: \"%s\"\u0027,    dhcp.DHCP_CLIENT_ARCH_TYPE[arch]);\n\nSide note: defacto JS style for most triton components is to always add {} to if() blocks, even 1 liners."},{"file":"lib/dhcpd.js","line":382,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Is it worth adding log.info() here like the one we have below recording which boot file we settled on?  Or maybe a single one after the if/else block on line 394?"},{"file":"tools/update_ipxe","line":8,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"nit: 2019"},{"file":"tools/update_ipxe","line":8,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"This hasn\u0027t been modified since last year so 2018 is correct here."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/dhcp.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"lib/dhcpd.js","type":"MODIFIED","insertions":32,"deletions":-2},{"file":"tftpboot/snponly.efi","type":"ADDED","insertions":0,"deletions":0},{"file":"tftpboot/undionly.kpxe","type":"MODIFIED","insertions":0,"deletions":0},{"file":"tools/update_ipxe","type":"MODIFIED","insertions":23,"deletions":-25}],"sizeInsertions":68,"sizeDeletions":-28},{"number":"6","revision":"e14679a31aca82273c575762a02c5ce9527a1f90","parents":["d2df956a92ba18006c1e4f8f96d4a8d23e7b756c"],"ref":"refs/changes/77/5377/6","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1550756547,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550756578,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/dhcp.js","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"lib/dhcpd.js","type":"MODIFIED","insertions":33,"deletions":-6},{"file":"tftpboot/snponly.efi","type":"ADDED","insertions":0,"deletions":0},{"file":"tftpboot/undionly.kpxe","type":"MODIFIED","insertions":0,"deletions":0},{"file":"tools/update_ipxe","type":"MODIFIED","insertions":23,"deletions":-25}],"sizeInsertions":71,"sizeDeletions":-33},{"number":"7","revision":"a9c59a0fa32d75bbccf1e16d6c21a8162f536a30","parents":["d2df956a92ba18006c1e4f8f96d4a8d23e7b756c"],"ref":"refs/changes/77/5377/7","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1550757345,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550787001,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550778371,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550757377,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550759965,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}}],"comments":[{"file":"lib/dhcpd.js","line":368,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"minor nit: since this repo\u0027s using node v4.9.0, we should use Buffer.from(packet.options[77]) since \"new Buffer(array)\" is deprecated.\n\n(You can ignore this for now, if you want, since they\u0027re functionally equivalent. It\u0027ll only matter when this repo gets updated to a newer version of node.)"},{"file":"lib/dhcpd.js","line":368,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"As it\u0027s existing code, I\u0027ll pick this up if there\u0027s other code review necessitating a re-test cycle, if that\u0027s OK."},{"file":"lib/dhcpd.js","line":368,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Yep, that\u0027s fine by me. It\u0027s definitely something that we can take care of in another change."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/dhcp.js","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"lib/dhcpd.js","type":"MODIFIED","insertions":37,"deletions":-9},{"file":"tftpboot/snponly.efi","type":"ADDED","insertions":0,"deletions":0},{"file":"tftpboot/undionly.kpxe","type":"MODIFIED","insertions":0,"deletions":0},{"file":"tools/update_ipxe","type":"MODIFIED","insertions":23,"deletions":-25}],"sizeInsertions":75,"sizeDeletions":-36},{"number":"8","revision":"7f208aea44ac8045126a655248b57d1f3d19484a","parents":["5f1176c0ddb1dc1ed99ca95cd12e04983a08aea0"],"ref":"refs/changes/77/5377/8","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1553953977,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550787001,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554229827,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550778371,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550757377,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550759965,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/dhcp.js","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"lib/dhcpd.js","type":"MODIFIED","insertions":37,"deletions":-9},{"file":"tftpboot/snponly.efi","type":"ADDED","insertions":0,"deletions":0},{"file":"tftpboot/undionly.kpxe","type":"MODIFIED","insertions":0,"deletions":0},{"file":"tools/update_ipxe","type":"MODIFIED","insertions":23,"deletions":-25}],"sizeInsertions":75,"sizeDeletions":-36},{"number":"9","revision":"99902558c10a418f66b3093c864fb7cbe1763640","parents":["5f1176c0ddb1dc1ed99ca95cd12e04983a08aea0"],"ref":"refs/changes/77/5377/9","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1554313355,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550787001,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554229827,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550778371,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550757377,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550759965,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}},{"type":"SUBM","value":"1","grantedOn":1554714244,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/dhcp.js","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"lib/dhcpd.js","type":"MODIFIED","insertions":37,"deletions":-9},{"file":"tftpboot/snponly.efi","type":"ADDED","insertions":0,"deletions":0},{"file":"tftpboot/undionly.kpxe","type":"MODIFIED","insertions":0,"deletions":0},{"file":"tools/update_ipxe","type":"MODIFIED","insertions":23,"deletions":-25}],"sizeInsertions":75,"sizeDeletions":-36}],"allReviewers":[{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},{"name":"Rob Johnston","email":"rob.johnston@joyent.com","username":"rejohnst"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}]}