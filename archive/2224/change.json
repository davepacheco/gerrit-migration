{"project":"joyent/sdc-manta","branch":"master","id":"I47155494b7d19bc3e275e6ae7151ffc933071214","number":"2224","subject":"MANTA-3196 want tool for creating and managing amon maintenance windows MANTA-3346 manta-init behaves badly if -c does not include a numeric arg MANTA-3353 long-running query alarm output could be more concise MANTA-3354 long-running query alarm fails spu","owner":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"url":"https://cr.joyent.us/2224","commitMessage":"MANTA-3196 want tool for creating and managing amon maintenance windows\nMANTA-3346 manta-init behaves badly if -c does not include a numeric arg\nMANTA-3353 long-running query alarm output could be more concise\nMANTA-3354 long-running query alarm fails spuriously\nMANTA-3352 sdc-manta could use an environment file\nReviewed by: Richard Bradley \u003crichard.bradley@joyent.com\u003e\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Richard Bradley \u003crichard.bradley@joyent.com\u003e\n","createdOn":1500337668,"lastUpdated":1501259085,"open":false,"status":"MERGED","comments":[{"timestamp":1500337668,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 1."},{"timestamp":1500337719,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1500339016,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 2."},{"timestamp":1500339063,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1500340548,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2: Integration-Approval-1\n\nMarking -1 for IA right now because the change for MANTA-3353 doesn\u0027t work at all."},{"timestamp":1500344496,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 3."},{"timestamp":1500344522,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 3: -Integration-Approval"},{"timestamp":1500344537,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1500344721,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 3:\n\nThis is mentioned in various tickets, but for clarity here: patchset 3 is `make prepush` clean.  However, I want to review the testing from other patchsets on other tickets and see what else needs to be re-tested, if anything."},{"timestamp":1501084188,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 3:\n\n(6 comments)\n\nDave, I hope you don\u0027t mind me dropping in on this one!"},{"timestamp":1501112805,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 4."},{"timestamp":1501112847,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1501112933,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 4:\n\n(6 comments)\n\n\u003e Dave, I hope you don\u0027t mind me dropping in on this one!\n\nNot at all!  I\u0027m very glad you did.  I\u0027ve uploaded a new patchset with some fixes."},{"timestamp":1501168947,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 4: Code-Review+1\n\nThanks for taking the time to clear up my questions! I\u0027m happy with the test notes in the tickets so I\u0027ll CR+1 here. As Trent is on the reviewer list I\u0027ll wait for his input, but let me know if you\u0027d like me to look at this for IA, too."},{"timestamp":1501172965,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 4:\n\nIA would be great, too.  Thanks!"},{"timestamp":1501176715,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 4: Integration-Approval+1"},{"timestamp":1501194651,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4: Code-Review+1\n\n(1 comment)\n\nDave,\n\nLooks great. I also added a question/thought about \u0027manta-adm alarm list\u0027 being able to distinguish open alarms in- and outside of maint windows on MANTA-3196."},{"timestamp":1501198071,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1501258896,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1501259085,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by David Pacheco"}],"currentPatchSet":{"number":"5","revision":"47155494b7d19bc3e275e6ae7151ffc933071214","parents":["59e049b5c4adefe488808bb11009ea585b0c7a6a"],"ref":"refs/changes/24/2224/5","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1501258896,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1501112847,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1501168947,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1501176715,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1501194651,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1501259085,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":14,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"alarm_metadata/probe_templates/postgres.yaml","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"cmd/manta-adm.js","type":"MODIFIED","insertions":389,"deletions":0},{"file":"cmd/manta-init.js","type":"MODIFIED","insertions":42,"deletions":-6},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"docs/man/man1/manta-adm.md","type":"MODIFIED","insertions":106,"deletions":0},{"file":"env.sh","type":"ADDED","insertions":20,"deletions":0},{"file":"lib/adm.js","type":"MODIFIED","insertions":266,"deletions":-43},{"file":"lib/alarms/amon_objects.js","type":"MODIFIED","insertions":163,"deletions":-4},{"file":"lib/alarms/index.js","type":"MODIFIED","insertions":11,"deletions":0},{"file":"lib/alarms/maint_windows.js","type":"ADDED","insertions":252,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":40,"deletions":0},{"file":"man/man1/manta-adm.1","type":"MODIFIED","insertions":110,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":0},{"file":"test/alarms/tst.alarms.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"test/alarms/tst.amon_objects.js","type":"MODIFIED","insertions":180,"deletions":-4},{"file":"test/alarms/tst.maint_windows.js","type":"ADDED","insertions":649,"deletions":0},{"file":"test/alarms/tst.maint_windows.js.out","type":"ADDED","insertions":37,"deletions":0},{"file":"test/tst.oneach_exec.js","type":"MODIFIED","insertions":0,"deletions":-1}],"sizeInsertions":2291,"sizeDeletions":-60},"patchSets":[{"number":"1","revision":"0eacd4e7cea05496a808e1a7241f3a1d0ef669ff","parents":["59e049b5c4adefe488808bb11009ea585b0c7a6a"],"ref":"refs/changes/24/2224/1","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1500337668,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500337719,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"alarm_metadata/probe_templates/postgres.yaml","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"cmd/manta-adm.js","type":"MODIFIED","insertions":389,"deletions":0},{"file":"cmd/manta-init.js","type":"MODIFIED","insertions":42,"deletions":-6},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"docs/man/man1/manta-adm.md","type":"MODIFIED","insertions":106,"deletions":0},{"file":"env.sh","type":"ADDED","insertions":20,"deletions":0},{"file":"lib/adm.js","type":"MODIFIED","insertions":244,"deletions":-43},{"file":"lib/alarms/amon_objects.js","type":"MODIFIED","insertions":147,"deletions":0},{"file":"lib/alarms/index.js","type":"MODIFIED","insertions":11,"deletions":0},{"file":"lib/alarms/maint_windows.js","type":"ADDED","insertions":245,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":40,"deletions":0},{"file":"man/man1/manta-adm.1","type":"MODIFIED","insertions":110,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":0},{"file":"test/alarms/tst.amon_objects.js","type":"MODIFIED","insertions":142,"deletions":-2},{"file":"test/alarms/tst.maint_windows.js","type":"ADDED","insertions":649,"deletions":0},{"file":"test/alarms/tst.maint_windows.js.out","type":"ADDED","insertions":37,"deletions":0},{"file":"test/tst.oneach_exec.js","type":"MODIFIED","insertions":0,"deletions":-1}],"sizeInsertions":2202,"sizeDeletions":-54},{"number":"2","revision":"40f6db2b2300f90495445c1f9a178aa055d51c5b","parents":["59e049b5c4adefe488808bb11009ea585b0c7a6a"],"ref":"refs/changes/24/2224/2","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1500339016,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"-1","grantedOn":1500340548,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500339063,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"alarm_metadata/probe_templates/postgres.yaml","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"cmd/manta-adm.js","type":"MODIFIED","insertions":389,"deletions":0},{"file":"cmd/manta-init.js","type":"MODIFIED","insertions":42,"deletions":-6},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"docs/man/man1/manta-adm.md","type":"MODIFIED","insertions":106,"deletions":0},{"file":"env.sh","type":"ADDED","insertions":20,"deletions":0},{"file":"lib/adm.js","type":"MODIFIED","insertions":244,"deletions":-43},{"file":"lib/alarms/amon_objects.js","type":"MODIFIED","insertions":147,"deletions":0},{"file":"lib/alarms/index.js","type":"MODIFIED","insertions":11,"deletions":0},{"file":"lib/alarms/maint_windows.js","type":"ADDED","insertions":245,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":40,"deletions":0},{"file":"man/man1/manta-adm.1","type":"MODIFIED","insertions":110,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":0},{"file":"test/alarms/tst.amon_objects.js","type":"MODIFIED","insertions":142,"deletions":-2},{"file":"test/alarms/tst.maint_windows.js","type":"ADDED","insertions":649,"deletions":0},{"file":"test/alarms/tst.maint_windows.js.out","type":"ADDED","insertions":37,"deletions":0},{"file":"test/tst.oneach_exec.js","type":"MODIFIED","insertions":0,"deletions":-1}],"sizeInsertions":2202,"sizeDeletions":-54},{"number":"3","revision":"07920598ff896b7aa62b6977d7e5276fe7fa3589","parents":["59e049b5c4adefe488808bb11009ea585b0c7a6a"],"ref":"refs/changes/24/2224/3","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1500344496,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500344537,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"cmd/manta-adm.js","line":1466,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Did you consider potentially making use of Cmdln\u0027s default value for a missing \"start\" option? That way we don\u0027t have to worry about parsing a date and error checking, and if the \"--start\" option is missing then we can fall back the default, which could be `new Date()`.\n\nI think I prefer it to be explicit as you\u0027ve done so, but I figured I\u0027d raise it as an option."},{"file":"cmd/manta-adm.js","line":1466,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"That\u0027s a fair question, but I do prefer that this must be explicit."},{"file":"cmd/manta-adm.js","line":1514,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Do we need these assertions if the Cmdln option for this is of type \"date\"?\n\nAlso, would you mind explaining the difference between the `number()` assertion and `ok(!isNaN())`? I would expect that `number()` alone would be enough."},{"file":"cmd/manta-adm.js","line":1514,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"It\u0027s because of this case:\n\n    \u003e tend \u003d new Date(\u0027bogus\u0027)\n    Invalid Date\n    \u003e tend instanceof Date\n    true\n    \u003e tend.getTime()\n    NaN\n\nI wanted to be sure we didn\u0027t end up creating a bizarre time window.\n\nAs for number() and NaN: `typeof (NaN) \u003d\u003d \u0027number\u0027`.  It looks like modern `assertplus.number()` does explicitly check for NaN and fail the assertion, but that wasn\u0027t obvious to me, and it appears to have been changed with assert-plus#4.  That was admittedly ages ago, but this repository is also using an ancient assert-plus.  I\u0027d prefer to leave this in, even though it could be redundant depending on the version of assert-plus."},{"file":"lib/adm.js","line":1001,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Are we guaranteed a useful `err` if `windows` is falsy?\n\nShould we return after `stepcb`?"},{"file":"lib/adm.js","line":1001,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"\u003e Are we guaranteed a useful `err` if `windows` is falsy?\n\nYes, and I\u0027ve clarified that in the comment for amonLoadMaintWindows().   This is similar to the pattern used elsewhere (e.g., amonLoadAlarmsForState).\n\n\u003e Should we return after `stepcb`?\n\nYes.  Thanks for catching that."},{"file":"lib/adm.js","line":1501,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"I could be missing something here, but this and the following associated code feels like we default to displaying all alarms as being inside a maintenance window unless the fault otherwise states so.\n\nIs there a particular reason that this wasn\u0027t the other way around (i.e. default to false, then list as maint if found to be the case)? I don\u0027t think this is a problem, but I think the pessimist in me considers false positives better than the alternative."},{"file":"lib/adm.js","line":1501,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"The reason it\u0027s written this way is that the presence of a maintenance fault does not indicate that the alarm is maintOnly; it\u0027s the absence of any non-maintenance faults.  In that sense, the \"default\" disposition is intrinsically maintOnly \u003d true, but I wouldn\u0027t think of it as a default because we\u0027re never falling back to it.  If we find any non-maintenance fault, then we\u0027ll change maintOnly, and if we don\u0027t, this value is explicitly correct -- except for the case where there are no faults at all, but that\u0027s currently a validation error."},{"file":"lib/adm.js","line":4033,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"My understanding of the following function is that it returns \"ts\" to second precision, not minute. Going by the comment and function name, I would expect seconds to be dropped from my input value, leaving \u00272017-07-26T12:20Z\u0027."},{"file":"lib/adm.js","line":4033,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"That\u0027s correct.  I changed it in development and neglected to update the function name and comment.  Thanks for catching that!"},{"file":"lib/alarms/maint_windows.js","line":239,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"This is fine, but is there a reason for not doing `queue.push(args.winIds)`?"},{"file":"lib/alarms/maint_windows.js","line":239,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I find it confusing that queue.push() interprets arrays specially, and I\u0027d prefer to be explicit about what\u0027s going on.  Otherwise, as a reader, I\u0027d have expected that we were pushing the array itself onto the queue (the way Array.push works)."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"alarm_metadata/probe_templates/postgres.yaml","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"cmd/manta-adm.js","type":"MODIFIED","insertions":389,"deletions":0},{"file":"cmd/manta-init.js","type":"MODIFIED","insertions":42,"deletions":-6},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"docs/man/man1/manta-adm.md","type":"MODIFIED","insertions":106,"deletions":0},{"file":"env.sh","type":"ADDED","insertions":20,"deletions":0},{"file":"lib/adm.js","type":"MODIFIED","insertions":265,"deletions":-43},{"file":"lib/alarms/amon_objects.js","type":"MODIFIED","insertions":163,"deletions":-4},{"file":"lib/alarms/index.js","type":"MODIFIED","insertions":11,"deletions":0},{"file":"lib/alarms/maint_windows.js","type":"ADDED","insertions":245,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":40,"deletions":0},{"file":"man/man1/manta-adm.1","type":"MODIFIED","insertions":110,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":0},{"file":"test/alarms/tst.alarms.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"test/alarms/tst.amon_objects.js","type":"MODIFIED","insertions":180,"deletions":-4},{"file":"test/alarms/tst.maint_windows.js","type":"ADDED","insertions":649,"deletions":0},{"file":"test/alarms/tst.maint_windows.js.out","type":"ADDED","insertions":37,"deletions":0},{"file":"test/tst.oneach_exec.js","type":"MODIFIED","insertions":0,"deletions":-1}],"sizeInsertions":2283,"sizeDeletions":-60},{"number":"4","revision":"0e03fa6a612c88dd3e9ab0f7b1146f6a2c3a667b","parents":["59e049b5c4adefe488808bb11009ea585b0c7a6a"],"ref":"refs/changes/24/2224/4","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1501112805,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1501112847,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1501194651,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1501168947,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1501176715,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}}],"comments":[{"file":"cmd/manta-adm.js","line":1584,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Intentionally don\u0027t want to support the time duration args that Amon supports? E.g. \"1h\" to mean \"1h from now\". It could always be added later if useful. \n\nThere is a dashdash example of a custom option type for something like that: https://github.com/trentm/node-dashdash/blob/master/examples/custom-option-duration.js#L24-L58\n\nIn this case you\u0027d probably want a combo of that and \"date\"."},{"file":"cmd/manta-adm.js","line":1584,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I think that\u0027s a good idea, but I figured we could do that as a follow-on via a --duration option, and then say that --start and one of --duration or --end is required.  I can add that now if it seems worthwhile."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"alarm_metadata/probe_templates/postgres.yaml","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"cmd/manta-adm.js","type":"MODIFIED","insertions":389,"deletions":0},{"file":"cmd/manta-init.js","type":"MODIFIED","insertions":42,"deletions":-6},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"docs/man/man1/manta-adm.md","type":"MODIFIED","insertions":106,"deletions":0},{"file":"env.sh","type":"ADDED","insertions":20,"deletions":0},{"file":"lib/adm.js","type":"MODIFIED","insertions":266,"deletions":-43},{"file":"lib/alarms/amon_objects.js","type":"MODIFIED","insertions":163,"deletions":-4},{"file":"lib/alarms/index.js","type":"MODIFIED","insertions":11,"deletions":0},{"file":"lib/alarms/maint_windows.js","type":"ADDED","insertions":252,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":40,"deletions":0},{"file":"man/man1/manta-adm.1","type":"MODIFIED","insertions":110,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":0},{"file":"test/alarms/tst.alarms.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"test/alarms/tst.amon_objects.js","type":"MODIFIED","insertions":180,"deletions":-4},{"file":"test/alarms/tst.maint_windows.js","type":"ADDED","insertions":649,"deletions":0},{"file":"test/alarms/tst.maint_windows.js.out","type":"ADDED","insertions":37,"deletions":0},{"file":"test/tst.oneach_exec.js","type":"MODIFIED","insertions":0,"deletions":-1}],"sizeInsertions":2291,"sizeDeletions":-60},{"number":"5","revision":"47155494b7d19bc3e275e6ae7151ffc933071214","parents":["59e049b5c4adefe488808bb11009ea585b0c7a6a"],"ref":"refs/changes/24/2224/5","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1501258896,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1501259085,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1501112847,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1501194651,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1501168947,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1501176715,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":14,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"alarm_metadata/probe_templates/postgres.yaml","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"cmd/manta-adm.js","type":"MODIFIED","insertions":389,"deletions":0},{"file":"cmd/manta-init.js","type":"MODIFIED","insertions":42,"deletions":-6},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"docs/man/man1/manta-adm.md","type":"MODIFIED","insertions":106,"deletions":0},{"file":"env.sh","type":"ADDED","insertions":20,"deletions":0},{"file":"lib/adm.js","type":"MODIFIED","insertions":266,"deletions":-43},{"file":"lib/alarms/amon_objects.js","type":"MODIFIED","insertions":163,"deletions":-4},{"file":"lib/alarms/index.js","type":"MODIFIED","insertions":11,"deletions":0},{"file":"lib/alarms/maint_windows.js","type":"ADDED","insertions":252,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":40,"deletions":0},{"file":"man/man1/manta-adm.1","type":"MODIFIED","insertions":110,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":0},{"file":"test/alarms/tst.alarms.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"test/alarms/tst.amon_objects.js","type":"MODIFIED","insertions":180,"deletions":-4},{"file":"test/alarms/tst.maint_windows.js","type":"ADDED","insertions":649,"deletions":0},{"file":"test/alarms/tst.maint_windows.js.out","type":"ADDED","insertions":37,"deletions":0},{"file":"test/tst.oneach_exec.js","type":"MODIFIED","insertions":0,"deletions":-1}],"sizeInsertions":2291,"sizeDeletions":-60}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}]}