{"project":"joyent/sdc-designation","branch":"master","id":"I35914310ca9b359ad64b95ab4ea42b763399694a","number":"5616","subject":"TRITON-1242 Create DAPI filter to allow filtering out virtual servers Reviewed by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e Approved by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e","owner":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"url":"https://cr.joyent.us/5616","commitMessage":"TRITON-1242 Create DAPI filter to allow filtering out virtual servers\nReviewed by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e\nApproved by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e\n","createdOn":1550697697,"lastUpdated":1550703829,"open":false,"status":"MERGED","comments":[{"timestamp":1550697697,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 1."},{"timestamp":1550697698,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit d2fce1624dd84b3fe1a3259ec38100342f34c238\n    \n    TRITON-1242 Create DAPI filter to allow filtering out virtual servers"},{"timestamp":1550697723,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n(28 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1550698082,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 2."},{"timestamp":1550698083,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 72422cf02b5f717ceb5e40c8ae82cb7585898379\n    \n    fix styling nits"},{"timestamp":1550698108,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1550698513,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\nNew test passes:\n# node test/algorithms/hard-filter-virtual-servers.test.js\nTAP version 13\n# filterVirtualServers() without flag\nok 1 null\nok 2 valid servers should be equal to expected valid servers\nok 3 rejection reasons should be equal to expected reasons\n# filterVirtualServers() with exclude_virtual_servers tag set\nok 4 null\nok 5 valid servers should be equal to expected valid servers\nok 6 rejection reasons should be equal to expected reasons\n# filterVirtualServers() for docker vm\nok 7 null\nok 8 valid servers should be equal to expected valid servers\nok 9 rejection reasons should be equal to expected reasons\n# name\nok 10 should be equal\n\n1..10\n# tests 10\n# pass  10\n\n# ok"},{"timestamp":1550702088,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 2:\n\n(3 comments)\n\nDoes test/allocator.test.js also pass? It enumerates all algos, and this is a new one."},{"timestamp":1550702882,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\n(2 comments)\n\n\u003e Does test/allocator.test.js also pass? It enumerates all algos, and this is a new one.\n\nNo, it did not pass (the extra filter name was missing). Will fix."},{"timestamp":1550702972,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 3."},{"timestamp":1550702973,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit d04ae43dce3c434191a0bf7b45218e5a231a2f2f\n    \n    fix indentation, add hard-filter-virtual-servers to known tests"},{"timestamp":1550702997,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1550703466,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1550703819,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1550703829,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Todd Whiteman"}],"currentPatchSet":{"number":"4","revision":"35914310ca9b359ad64b95ab4ea42b763399694a","parents":["e70e8e91f97496a7df3140dd061b1a48b73d3251"],"ref":"refs/changes/16/5616/4","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1550703819,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550702997,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550703466,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1550703466,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"SUBM","value":"1","grantedOn":1550703829,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/algorithms/hard-filter-virtual-servers.js","type":"ADDED","insertions":70,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","type":"ADDED","insertions":80,"deletions":0},{"file":"test/allocator.test.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":154,"sizeDeletions":-2},"patchSets":[{"number":"1","revision":"695d4f7c6f2de085b21166c15f07b2fe2e5220cd","parents":["e70e8e91f97496a7df3140dd061b1a48b73d3251"],"ref":"refs/changes/16/5616/1","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1550697697,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1550697723,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/algorithms/hard-filter-virtual-servers.js","line":42,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"lib/algorithms/hard-filter-virtual-servers.js","line":48,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"lib/algorithms/hard-filter-virtual-servers.js","line":49,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"lib/algorithms/hard-filter-virtual-servers.js","line":55,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"lib/algorithms/hard-filter-virtual-servers.js","line":56,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"lib/algorithms/hard-filter-virtual-servers.js","line":57,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"unparenthesized return expression"},{"file":"lib/algorithms/hard-filter-virtual-servers.js","line":57,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"lib/algorithms/hard-filter-virtual-servers.js","line":58,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"lib/algorithms/hard-filter-virtual-servers.js","line":59,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"lib/algorithms/hard-filter-virtual-servers.js","line":59,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"unparenthesized return expression"},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":18,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":19,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":20,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":21,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":22,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":25,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":26,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":44,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":50,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":51,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":52,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":53,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":54,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":55,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":67,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":68,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":69,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":70,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent by spaces instead of tabs"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/algorithms/hard-filter-virtual-servers.js","type":"ADDED","insertions":68,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","type":"ADDED","insertions":79,"deletions":0}],"sizeInsertions":149,"sizeDeletions":-1},{"number":"2","revision":"d73d4b650fa5e6668a8c872ed93ddaefaedc396e","parents":["e70e8e91f97496a7df3140dd061b1a48b73d3251"],"ref":"refs/changes/16/5616/2","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1550698082,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550698108,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/algorithms/hard-filter-virtual-servers.js","line":68,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"typo"},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":28,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Is this indentation intentional?"},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":28,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"No - fixed (I think something bad happened when I converted from spaces to tabs)."},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":56,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Another indentation level?\n\nAnd opts in the next test too."},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","line":56,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/algorithms/hard-filter-virtual-servers.js","type":"ADDED","insertions":70,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","type":"ADDED","insertions":80,"deletions":0}],"sizeInsertions":152,"sizeDeletions":-1},{"number":"3","revision":"32e9ff40b2a05faa305f7ee5c083fb20b921e14d","parents":["e70e8e91f97496a7df3140dd061b1a48b73d3251"],"ref":"refs/changes/16/5616/3","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1550702972,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550702997,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550703466,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1550703466,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/algorithms/hard-filter-virtual-servers.js","type":"ADDED","insertions":70,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","type":"ADDED","insertions":80,"deletions":0},{"file":"test/allocator.test.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":154,"sizeDeletions":-2},{"number":"4","revision":"35914310ca9b359ad64b95ab4ea42b763399694a","parents":["e70e8e91f97496a7df3140dd061b1a48b73d3251"],"ref":"refs/changes/16/5616/4","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1550703819,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550702997,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550703466,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1550703466,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}},{"type":"SUBM","value":"1","grantedOn":1550703829,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/algorithms/hard-filter-virtual-servers.js","type":"ADDED","insertions":70,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/algorithms/hard-filter-virtual-servers.test.js","type":"ADDED","insertions":80,"deletions":0},{"file":"test/allocator.test.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":154,"sizeDeletions":-2}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}]}