{"project":"joyent/electric-moray","branch":"master","id":"I76c24f490ed459e986d4dc99ee21fa1abbd82230","number":"1426","subject":"MORAY-395 Want electric-moray documentation Reviewed by: David Pacheco \u003cdap@joyent.com\u003e Reviewed by: Rui Loura \u003crui@joyent.com\u003e Approved by: Rui Loura \u003crui@joyent.com\u003e","owner":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"url":"https://cr.joyent.us/1426","commitMessage":"MORAY-395 Want electric-moray documentation\nReviewed by: David Pacheco \u003cdap@joyent.com\u003e\nReviewed by: Rui Loura \u003crui@joyent.com\u003e\nApproved by: Rui Loura \u003crui@joyent.com\u003e\n","createdOn":1486152811,"lastUpdated":1558381736,"open":false,"status":"MERGED","comments":[{"timestamp":1486152811,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 1."},{"timestamp":1486152842,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1486152989,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1:\n\nI\u0027ve uploaded a rendered version of this documentation here:\n\nhttp://us-east.manta.joyent.com/cody.mello/public/doc/MORAY-395/index.html"},{"timestamp":1486157090,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\n(13 comments)\n\nThanks for doing this."},{"timestamp":1486161033,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1:\n\n(10 comments)"},{"timestamp":1486161038,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 2."},{"timestamp":1486161069,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1486502718,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1507583331,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 3."},{"timestamp":1507583361,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1507583391,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 4."},{"timestamp":1507583420,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1507583433,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1507583670,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 4: Code-Review+1\n\nThe new \"readOnlyOverride\" option is now in node-moray, but not yet in electric-moray.  If that lands first, you\u0027ll probably want to update the \"sql\" docs to talk about this electric-moray-specific option."},{"timestamp":1507595219,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Patch Set 4:\n\n(3 comments)\n\nThe main thing I can think to include that isn\u0027t here already is some explanation of if/how the administrative shard differs from the other shards in terms of these commands."},{"timestamp":1507595418,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Patch Set 4:\n\nCome to think of it, notes on the administrative shard are likely not relevant here."},{"timestamp":1507595792,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 5."},{"timestamp":1507595796,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 4:\n\n(3 comments)"},{"timestamp":1507595824,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1507598394,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Patch Set 5:\n\nThanks for making those changes.  Sorry for not mentioning this in the earlier pass, but I think these docs should probably talk a little about how the metadata tier electric-moray administers is different from a single moray\u0027s responsibilities.  Also, a short description of what it means for a shard to be marked read-only (where the request is dropped https://github.com/joyent/electric-moray/blob/master/lib/server.js#L809), would be a good place to document the new sql option."},{"timestamp":1507676588,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 6."},{"timestamp":1507676627,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 7."},{"timestamp":1507676666,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1507680053,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Patch Set 7:\n\n(3 comments)\n\nReading through the read-only section makes me question the intentions of the flag in electric-moray for use cases other than resharding.  It might be a good move to document specifically how it changes the behavior of each call in the API documentation, if possible."},{"timestamp":1508186031,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 7: Code-Review+1\n\n(1 comment)"},{"timestamp":1558039880,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 8."},{"timestamp":1558039907,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1558039925,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 8:\n\n(1 comment)"},{"timestamp":1558040080,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 8: Code-Review+1\n\n+1\u0027ing PS8.  I\u0027m assuming the Makefile change came from a rebase, not this change."},{"timestamp":1558040376,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 9."},{"timestamp":1558040404,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1558041449,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 9: Code-Review+1\n\nPS9 appears to be a non-trivial rebase."},{"timestamp":1558041600,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 10: Commit message was updated."},{"timestamp":1558105714,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Patch Set 10:\n\n(4 comments)\n\nJust a few comments.  Thanks for doing this.  It answers a lot of questions I had."},{"timestamp":1558115782,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 11."},{"timestamp":1558115791,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 11:\n\n(4 comments)"},{"timestamp":1558115811,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1558124008,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 11: Code-Review+1"},{"timestamp":1558381630,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Patch Set 11: Code-Review+1 Integration-Approval+1"},{"timestamp":1558381722,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 12: Commit message was updated."},{"timestamp":1558381736,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Cody Peter Mello"}],"currentPatchSet":{"number":"12","revision":"baa496a4b9abbe224574296458e741cf69b094aa","parents":["551d8af9bf0fcf6a818aa034cf35970e469b6298"],"ref":"refs/changes/26/1426/12","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1558381722,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1558115811,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558124008,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558381630,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1558381630,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}},{"type":"SUBM","value":"1","grantedOn":1558381736,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/index.md","type":"ADDED","insertions":232,"deletions":0},{"file":"docs/media/img/favicon.ico","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/img/logo.png","type":"ADDED","insertions":0,"deletions":0}],"sizeInsertions":238,"sizeDeletions":-1},"patchSets":[{"number":"1","revision":"1d440693d5b06fb1ed85a5c628748fd81b8e2373","parents":["03dada242934051ff33f2bcec2fbf4be236c5959"],"ref":"refs/changes/26/1426/1","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1486152811,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1486152842,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":".gitmodules","line":0,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Could you either file new tickets for the updated submodules or mention them in the ticket that\u0027s already associated with this change?"},{"file":".gitmodules","line":0,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve added a mention of them to MORAY-395."},{"file":"docs/index.md","line":30,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"It might be worth explaining that, since it seems counter-intuitive.\n\nPresumably it\u0027s also okay if any of these operations reports no error?"},{"file":"docs/index.md","line":30,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Yep, that\u0027d be okay. I\u0027ve added something to explain this."},{"file":"docs/index.md","line":50,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I would mention the specific ticket that causes this, since it\u0027s certainly not expected that any RPC would hang."},{"file":"docs/index.md","line":50,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"docs/index.md","line":68,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Can we say that this is undefined behavior instead?"},{"file":"docs/index.md","line":68,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"docs/index.md","line":77,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Can we say somewhere that exactly one of these must be specified?"},{"file":"docs/index.md","line":77,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"docs/index.md","line":91,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"s/other/multiple/ ?"},{"file":"docs/index.md","line":91,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"docs/index.md","line":95,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"s/other/multiple/ ?"},{"file":"docs/index.md","line":95,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"docs/index.md","line":100,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Similar note as for ListBucket."},{"file":"docs/index.md","line":100,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"docs/index.md","line":109,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"s/transform to the same value/map to the same shard/ ?"},{"file":"docs/index.md","line":109,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"They need to transform to the same value. Keys could map to different values, but hash to the same shard, and that would be disallowed."},{"file":"docs/index.md","line":145,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Maybe add: \"As with regular Moray, this operation should only be used for debugging.\""},{"file":"docs/index.md","line":145,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"tools/mk/Makefile.deps","line":54,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Is this from an update from eng.git, or is this a local modification?"},{"file":"tools/mk/Makefile.deps","line":54,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"This is from an update in eng.git. I took it from joyent/moray, but it looks like there were several other eng.git updates to tools/mk/. I\u0027ve added those in the most recent patchset."},{"file":"tools/mk/Makefile.smf.targ","line":26,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Is this from an eng.git update?"},{"file":"tools/mk/Makefile.targ","line":92,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I assume this is from an eng.git update?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/index.md","type":"ADDED","insertions":209,"deletions":0},{"file":"docs/media/img/favicon.ico","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/img/logo.png","type":"ADDED","insertions":0,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":2,"deletions":0},{"file":"tools/mk/Makefile.smf.targ","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":7,"deletions":-6}],"sizeInsertions":226,"sizeDeletions":-9},{"number":"2","revision":"5c0bec63f2d7bc121f89144e6fb01887ac17f901","parents":["03dada242934051ff33f2bcec2fbf4be236c5959"],"ref":"refs/changes/26/1426/2","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1486161038,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1486502718,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1486161069,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/index.md","type":"ADDED","insertions":215,"deletions":0},{"file":"docs/media/img/favicon.ico","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/img/logo.png","type":"ADDED","insertions":0,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":2,"deletions":0},{"file":"tools/mk/Makefile.smf.targ","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":9,"deletions":-7}],"sizeInsertions":234,"sizeDeletions":-10},{"number":"3","revision":"7633c981a7a88296c48df1e143377f524ba4d154","parents":["d6b91a20c8284a2b3502986e187194805500eb8b"],"ref":"refs/changes/26/1426/3","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1507583331,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507583361,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/index.md","type":"ADDED","insertions":215,"deletions":0},{"file":"docs/media/img/favicon.ico","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/img/logo.png","type":"ADDED","insertions":0,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":224,"sizeDeletions":-2},{"number":"4","revision":"c4f3e5000cc5fa3149aeadff6c8960659212b001","parents":["d6b91a20c8284a2b3502986e187194805500eb8b"],"ref":"refs/changes/26/1426/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1507583391,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507583670,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507583433,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"Makefile","line":18,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"This is pretty nitpicky but the other assignments all lock the equal sign to the left side of the equation."},{"file":"Makefile","line":18,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Fixed."},{"file":"docs/index.md","line":76,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Might be worth just saying \"the same as the above [Objects]\" in case the reader jumped to this section instead of reading everything in order."},{"file":"docs/index.md","line":76,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"tools/mk/Makefile.deps","line":54,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"I\u0027m not sure I understand what this is for."},{"file":"tools/mk/Makefile.deps","line":54,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"This is just noise from syncing up the Makefiles in tools/ with eng.git."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/index.md","type":"ADDED","insertions":214,"deletions":0},{"file":"docs/media/img/favicon.ico","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/img/logo.png","type":"ADDED","insertions":0,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":223,"sizeDeletions":-2},{"number":"5","revision":"572b7dd40930ee7af79b9d3f3064dce1f5f37196","parents":["d6b91a20c8284a2b3502986e187194805500eb8b"],"ref":"refs/changes/26/1426/5","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1507595792,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507595824,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/index.md","type":"ADDED","insertions":214,"deletions":0},{"file":"docs/media/img/favicon.ico","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/img/logo.png","type":"ADDED","insertions":0,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":223,"sizeDeletions":-2},{"number":"6","revision":"4a964380fc0f5ffe74e6b4f4b3bbfb36cd7a86f3","parents":["d6b91a20c8284a2b3502986e187194805500eb8b"],"ref":"refs/changes/26/1426/6","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1507676588,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/index.md","type":"ADDED","insertions":258,"deletions":0},{"file":"docs/media/img/favicon.ico","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/img/logo.png","type":"ADDED","insertions":0,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":267,"sizeDeletions":-2},{"number":"7","revision":"0fd464efa912563c99f5d67577086f6345fdce36","parents":["d6b91a20c8284a2b3502986e187194805500eb8b"],"ref":"refs/changes/26/1426/7","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1507676627,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1508186031,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507676666,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"docs/index.md","line":17,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Is it worth providing this procedure here?  Operationally, you\u0027d need to do a lot more to make this work (i.e., apply the change on all electric-moray instances)."},{"file":"docs/index.md","line":17,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve removed this for now."},{"file":"docs/index.md","line":18,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"I think it\u0027s more accurate longer-term to say you can make vnodes within the ring read-only -- fash is not designed to disable the entire ring.  If electric moray does this in some cases, I believe it is a side-effect, not the intended behavior."},{"file":"docs/index.md","line":22,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Just `electric-moray-2021` is sufficient!"},{"file":"docs/index.md","line":31,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"It\u0027s really just write operations -- mls and mget, for example, should work just fine on that vnode.  Also, write operations should succeed on other vnodes within the shard.  If operations are failing on the entire shard when one vnode is in read-only mode -- which I\u0027m not surprised if you\u0027ve seen, since we have run into it before and it is what MANTA-3371 was supposed to (at least partially) correct -- I would think those are bugs.  However, I could be mistaken, and will look into this more."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/index.md","type":"ADDED","insertions":258,"deletions":0},{"file":"docs/media/img/favicon.ico","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/img/logo.png","type":"ADDED","insertions":0,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":267,"sizeDeletions":-2},{"number":"8","revision":"c7bd626f19a2c5e2c9a16efa1fcc7d31ae5f5d83","parents":["6bd8b741b791ffb49d70dcaf3c256ed72d99d660"],"ref":"refs/changes/26/1426/8","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1558039880,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558040080,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1558039907,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/index.md","type":"ADDED","insertions":232,"deletions":0},{"file":"docs/media/img/favicon.ico","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/img/logo.png","type":"ADDED","insertions":0,"deletions":0},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":241,"sizeDeletions":-2},{"number":"9","revision":"b3a88ef15914f819384bdde0572fb3f09efd9b17","parents":["551d8af9bf0fcf6a818aa034cf35970e469b6298"],"ref":"refs/changes/26/1426/9","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1558040376,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558041449,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1558040404,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/index.md","type":"ADDED","insertions":232,"deletions":0},{"file":"docs/media/img/favicon.ico","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/img/logo.png","type":"ADDED","insertions":0,"deletions":0}],"sizeInsertions":238,"sizeDeletions":-1},{"number":"10","revision":"2a8b5e9e3e9f4627b671b0550d6e5f60b1addab1","parents":["551d8af9bf0fcf6a818aa034cf35970e469b6298"],"ref":"refs/changes/26/1426/10","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1558041600,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558041449,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1558040404,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"docs/index.md","line":56,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"This issue shows as resolved in jira."},{"file":"docs/index.md","line":56,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve updated this. They will hand on older Electric Morays from before they were updated to the new Fast library."},{"file":"docs/index.md","line":73,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"I know dap asked for this to say \"undefined\" but is that really the case?  Could some arbitrary transformation occur? \n\nI am not really sure what occurs here, but presumably the operation (put, get, or delete) would complete successfully and the destination shard is simply random/non-deterministic, right?"},{"file":"docs/index.md","line":73,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"If there\u0027s no transformation defined, then it will shard directly on the key, with no transformation applied. I believe that dap wanted it to say \"undefined\" instead so that we aren\u0027t tying ourselves into the behaviour with the documentation, in case we want to change it in some way (e.g., make it error out instead)."},{"file":"docs/index.md","line":91,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Can you link to the tokens or GetTokens documentation below?"},{"file":"docs/index.md","line":91,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"docs/index.md","line":106,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"This issue shows as resolved in jira."},{"file":"docs/index.md","line":106,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Updated."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/index.md","type":"ADDED","insertions":232,"deletions":0},{"file":"docs/media/img/favicon.ico","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/img/logo.png","type":"ADDED","insertions":0,"deletions":0}],"sizeInsertions":238,"sizeDeletions":-1},{"number":"11","revision":"76c24f490ed459e986d4dc99ee21fa1abbd82230","parents":["551d8af9bf0fcf6a818aa034cf35970e469b6298"],"ref":"refs/changes/26/1426/11","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1558115782,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558124008,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1558115811,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558381630,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1558381630,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/index.md","type":"ADDED","insertions":232,"deletions":0},{"file":"docs/media/img/favicon.ico","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/img/logo.png","type":"ADDED","insertions":0,"deletions":0}],"sizeInsertions":238,"sizeDeletions":-1},{"number":"12","revision":"baa496a4b9abbe224574296458e741cf69b094aa","parents":["551d8af9bf0fcf6a818aa034cf35970e469b6298"],"ref":"refs/changes/26/1426/12","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1558381722,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558124008,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"SUBM","value":"1","grantedOn":1558381736,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1558115811,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558381630,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1558381630,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"deps/javascriptlint","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/index.md","type":"ADDED","insertions":232,"deletions":0},{"file":"docs/media/img/favicon.ico","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/img/logo.png","type":"ADDED","insertions":0,"deletions":0}],"sizeInsertions":238,"sizeDeletions":-1}],"allReviewers":[{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}]}