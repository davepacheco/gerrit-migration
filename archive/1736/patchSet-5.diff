From 4ca7ac744eeb6658f97fe4eb482c17c2fdeca30a Mon Sep 17 00:00:00 2001
From: Kody A Kantor <kody@kkantor.com>
Date: Fri, 27 Apr 2018 14:39:31 +0000
Subject: [PATCH] MANTA-2980 electric-moray should report moray shard for
 operations like 'putObject'

---
 lib/moray.js | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/lib/moray.js b/lib/moray.js
index ca89840..99d8f4f 100644
--- a/lib/moray.js
+++ b/lib/moray.js
@@ -5,7 +5,7 @@
  */
 
 /*
- * Copyright (c) 2017, Joyent, Inc.
+ * Copyright (c) 2018, Joyent, Inc.
  */
 
 //
@@ -436,7 +436,7 @@ function put(options, cb) {
         headers: opts.headers
     }, 'Moray.' + op + ': entered');
 
-    client.putObject(bucket, key, md, opts, function (err) {
+    client.putObject(bucket, key, md, opts, function (err, data) {
         if (err) {
             log.debug({
                 err: err,
@@ -457,7 +457,7 @@ function put(options, cb) {
                 key: key,
                 requestId: opts.requestId
             }, 'Moray.' + op + ': done');
-            cb(null, md);
+            cb(null, md, data);
         }
     });
 }
-- 
2.21.0

