commit 643b7d1046243a1040e956b72c1fe533c10efdab (refs/changes/36/1736/2)
Author: Kody Kantor <Kody.Kantor@gmail.com>
Date:   2017-04-13T15:34:11-05:00 (2 years, 6 months ago)
    
    MANTA-2980 electric-moray should report moray shard

diff --git a/lib/moray.js b/lib/moray.js
index 3790927..4b5c5e7 100644
--- a/lib/moray.js
+++ b/lib/moray.js
@@ -433,7 +433,7 @@ function put(options, cb) {
         headers: opts.headers
     }, 'Moray.' + op + ': entered');
 
-    client.putObject(bucket, key, md, opts, function (err) {
+    client.putObject(bucket, key, md, opts, function (err, data) {
         if (err) {
             log.debug({
                 err: err,
@@ -450,6 +450,9 @@ function put(options, cb) {
                 cb(err);
             }
         } else {
+            if (data) { // add the shard information
+                md._node = data._node;
+            }
             log.debug({
                 key: key,
                 requestId: opts.requestId
