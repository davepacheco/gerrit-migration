{"project":"joyent/manta-muskie","branch":"master","id":"I114022310d14bf8fc0b44479ad457834788c08ed","number":"5888","subject":"MANTA-4133 Invalid content-type resulted in 500 response","owner":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"url":"https://cr.joyent.us/5888","commitMessage":"MANTA-4133 Invalid content-type resulted in 500 response\n","createdOn":1552686537,"lastUpdated":1560201294,"open":false,"status":"MERGED","comments":[{"timestamp":1552686537,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Uploaded patch set 1."},{"timestamp":1552686541,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 8a65415c8f27a6fe1c2d975a3573bff5dd410f50\n    \n    MANTA-4133 Invalid content-type resulted in 500 response"},{"timestamp":1552686571,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n(2 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1552762859,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Uploaded patch set 2."},{"timestamp":1552762862,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 8a5b47f588e594ba9a021698e8e561b4ce75362f\n    \n    fix content-type on obj test.\n    \n    commit ba3e403ebae5cafcf453e4086510aad332736b3b\n    \n    fix linting error with JSSTYLED."},{"timestamp":1552762894,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1553006758,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Uploaded patch set 3."},{"timestamp":1553006760,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 6f6f1794587df6e4757d79201340e09ce88aee0d\n    \n    4133: style fixes\n    \n    commit cfb1242d24fbc5ad07d247b753d8711091640801\n    \n    Refactored changes for MANTA-4133; added tests.\n    \n    commit 850ab3f275b31cf4884705ce015e838aa678c492\n    \n    fix content-type on obj test.\n    \n    commit 2f57cd15747ad206316224ac6f86f6b2b7ec8efe\n    \n    fix linting error with JSSTYLED.\n    \n    commit d24ea1ac2e58a7a3ee62567e45e0c5a177c2de09\n    \n    MANTA-4133 Invalid content-type resulted in 500 response"},{"timestamp":1553006789,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1553013825,"reviewer":{"name":"Russell Brown","email":"russell.brown@joyent.com","username":"russelldb"},"message":"Patch Set 3: Code-Review+1\n\n(1 comment)\n\nTests pass, code looks good. Extra points for the comment referencing the RFC. Tests are neat too. Just one picky picky comment on the test, ignore at will."},{"timestamp":1553020206,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Uploaded patch set 4."},{"timestamp":1553020210,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit fc02b049d8d7b2b61d929fd872e4e840bd983687\n    \n    Test refactoring for MANTA-4133"},{"timestamp":1553020238,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1553027675,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 4:\n\n(6 comments)\n\nThanks for this!  I have a few notes below.  This is one of those bug fixes that\u0027s small in lines of code but pretty subtle!"},{"timestamp":1553033747,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 4:\n\n(5 comments)"},{"timestamp":1553101157,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Uploaded patch set 5."},{"timestamp":1553101162,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit a1d17048962ca0ea149b1814b58b1bd81d2127a0\n    \n    Reverted content-type change to \u0027jpg\u0027 to test look up functions.\n    \n    commit c2e073da92daf84d6f93b18fe3866eb352d3f475\n    \n    Re-added the mime check if the content-type is malformed."},{"timestamp":1553101191,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1553535372,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 5:\n\n(6 comments)"},{"timestamp":1553554580,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 5:\n\n(3 comments)"},{"timestamp":1553555128,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1553618936,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Uploaded patch set 6."},{"timestamp":1553618937,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit bc7e87ea6c22e6d4fda388a957744433ed3b0e6e\n    \n    Addressed further review feedback."},{"timestamp":1553618968,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1553625077,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Uploaded patch set 7: Patch Set 6 was rebased."},{"timestamp":1553625078,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 7:\n\nNew commits:\n    \n    commit d493cdfd78e4d46cdbbafbb51e09eab181bbae76\n    \n    Addressed further review feedback.\n    \n    commit 80d9d8884cfe0e77eca5f72ece95dfc314bd1908\n    \n    Reverted content-type change to \u0027jpg\u0027 to test look up functions.\n    \n    commit 23abec6ca9fd51525b431317f107b8141a96ef72\n    \n    Re-added the mime check if the content-type is malformed.\n    \n    commit ddc9cdbe73f9f248f4db35329a1dba662b3c4ec6\n    \n    Test refactoring for MANTA-4133\n    \n    commit 5b3d986f2048a9edcc9dfb6d43443be0fe7e812b\n    \n    4133: style fixes\n    \n    commit 8553e5ccac075c062227a36f602d2a0e99e253cf\n    \n    Refactored changes for MANTA-4133; added tests.\n    \n    commit 15616017f58272e95dd47b39b1a5148451c54078\n    \n    fix content-type on obj test.\n    \n    commit ef6fad84c4fbe9b36ea042f03740b083588e82d1\n    \n    fix linting error with JSSTYLED.\n    \n    commit af85d531faa6cfadf6269201795cf7a93da77f27\n    \n    MANTA-4133 Invalid content-type resulted in 500 response"},{"timestamp":1553625111,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7:\n\n\"make check\" passed ok"},{"timestamp":1554479163,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 8: Patch Set 7 was rebased"},{"timestamp":1554479198,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8:\n\n\"make check\" passed ok"},{"timestamp":1554821176,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Uploaded patch set 9."},{"timestamp":1554821180,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 9:\n\nNew commits:\n    \n    commit 91c8200b61be2890aa639fa76298dc42b341b024\n    \n    Annotate tests, and add HEAD checks to written ojects for content-type.\n    \n    commit 6880477feb034bc3e039427bf46962580ac82dc0\n    \n    Addressed further review feedback.\n    \n    commit 0f8c6580209f1ac6dc08603472ee98fc0446d84a\n    \n    Reverted content-type change to \u0027jpg\u0027 to test look up functions.\n    \n    commit 2a1282df5620ced773d838f39aebdcd9992a4abc\n    \n    Re-added the mime check if the content-type is malformed.\n    \n    commit dfe98adc4f46b1b91d182d28ddd1e7797472ef62\n    \n    Test refactoring for MANTA-4133\n    \n    commit d7e31b27f1f4cba777899eefb628c7b92f65530f\n    \n    4133: style fixes\n    \n    commit 5929c85c352e4f820bcf19772110081d66806d2d\n    \n    Refactored changes for MANTA-4133; added tests.\n    \n    commit 84f9d25748cebd59663de9d940e4a2d322b4fc39\n    \n    fix content-type on obj test.\n    \n    commit 5f011a10955d94df03c8f028ed483fcf86027add\n    \n    fix linting error with JSSTYLED.\n    \n    commit bf2e9a137c1ab1473027dbca1d1fa3a8cce74b9e\n    \n    MANTA-4133 Invalid content-type resulted in 500 response"},{"timestamp":1554821210,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554821746,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 10: Patch Set 9 was rebased"},{"timestamp":1554821786,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10:\n\n\"make check\" passed ok"},{"timestamp":1554825945,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 10:\n\n(1 comment)"},{"timestamp":1554826520,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 10:\n\n(4 comments)"},{"timestamp":1554829781,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Uploaded patch set 11."},{"timestamp":1554829785,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 11:\n\nNew commits:\n    \n    commit f0c1a6ad5ba2213364054decb958e0a83290a114\n    \n    Fix accidental commit change of jsstyle subproject."},{"timestamp":1554829798,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 12: Patch Set 11 was rebased"},{"timestamp":1554829816,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554829830,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 12: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554831884,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 12:\n\n(2 comments)"},{"timestamp":1554842337,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Uploaded patch set 13."},{"timestamp":1554842341,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 13:\n\nNew commits:\n    \n    commit c9622282cecc6cb734a3123f49339460769cf38f\n    \n    Add positive checks."},{"timestamp":1554842370,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 13: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554842464,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 13:\n\n(1 comment)"},{"timestamp":1554842467,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 14: Patch Set 13 was rebased"},{"timestamp":1554842507,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 14:\n\n\"make check\" passed ok"},{"timestamp":1555446772,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 14: Code-Review+1\n\n(6 comments)\n\nSorry again for the long delay!  I have a few suggestions here but they\u0027re largely not critical in this context so I\u0027m still adding a +1.  It\u0027s up to you which, if any, you want to incorporate."},{"timestamp":1555613630,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 14:\n\n(5 comments)"},{"timestamp":1555614128,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Uploaded patch set 15: Patch Set 14 was rebased."},{"timestamp":1555614160,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 15:\n\n\"make check\" passed ok"},{"timestamp":1555622712,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 15:\n\nPatchset 15 looks like just a rebase, but I think you said you were planning to make some changes?  Just checking in case there was one missing."},{"timestamp":1555690080,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Uploaded patch set 16."},{"timestamp":1555690111,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 16: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1556037892,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 16: Code-Review+1"},{"timestamp":1556717064,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Uploaded patch set 17."},{"timestamp":1557161874,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 17:\n\nIt looks like PS17 maybe was a combination rebase and some other changes?"},{"timestamp":1557161963,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 17: Code-Review+1"},{"timestamp":1557323325,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 18: Patch Set 17 was rebased"},{"timestamp":1558395112,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 18: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1558449857,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 19: Patch Set 18 was rebased"},{"timestamp":1558449888,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 19:\n\n\"make check\" passed ok"},{"timestamp":1560183062,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 19: Integration-Approval+1"},{"timestamp":1560193365,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 20: Patch Set 19 was rebased"},{"timestamp":1560201294,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jon Anderson"}],"currentPatchSet":{"number":"20","revision":"6566def46bfa9f7f333f88dfb428dc996c194945","parents":["3dc8d286602feedd8c6409d21abec7b8daf34561"],"ref":"refs/changes/88/5888/20","uploader":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"createdOn":1560193365,"author":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1557161963,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1558395112,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1560183062,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1560201294,"by":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/server.js","type":"MODIFIED","insertions":14,"deletions":-5},{"file":"test/obj.test.js","type":"MODIFIED","insertions":180,"deletions":-3}],"sizeInsertions":194,"sizeDeletions":-8},"patchSets":[{"number":"1","revision":"32bc8908b4d906179817af9a418d7718a2407d6c","parents":["329dd7719e25c4edfb0c1a7729a8e825cb2802fd"],"ref":"refs/changes/88/5888/1","uploader":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"createdOn":1552686537,"author":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1552686571,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/server.js","line":44,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"missing blank before close comment"},{"file":"lib/server.js","line":194,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"improper first line of block comment"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/server.js","type":"MODIFIED","insertions":14,"deletions":-5},{"file":"test/dir.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/obj.test.js","type":"MODIFIED","insertions":20,"deletions":-2}],"sizeInsertions":35,"sizeDeletions":-8},{"number":"2","revision":"4e9708a1081572d4482aa6719b7a6638c7bd157d","parents":["329dd7719e25c4edfb0c1a7729a8e825cb2802fd"],"ref":"refs/changes/88/5888/2","uploader":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"createdOn":1552762859,"author":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1552762894,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/server.js","type":"MODIFIED","insertions":16,"deletions":-6},{"file":"test/dir.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/obj.test.js","type":"MODIFIED","insertions":20,"deletions":-2}],"sizeInsertions":37,"sizeDeletions":-9},{"number":"3","revision":"2741cf3390575e8c54dd92ea07ef0706273974ea","parents":["c36e095c4d292f2bec76db38f752adf9f2452d5a"],"ref":"refs/changes/88/5888/3","uploader":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"createdOn":1553006758,"author":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553006789,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553013825,"by":{"name":"Russell Brown","email":"russell.brown@joyent.com","username":"russelldb"}}],"comments":[{"file":"test/obj.test.js","line":275,"reviewer":{"name":"Russell Brown","email":"russell.brown@joyent.com","username":"russelldb"},"message":"just wondering if it\u0027s easier to read/understand if this instance of new MemoryStream is also factored out, given change on L64?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/server.js","type":"MODIFIED","insertions":18,"deletions":-5},{"file":"test/dir.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/obj.test.js","type":"MODIFIED","insertions":55,"deletions":-2}],"sizeInsertions":75,"sizeDeletions":-9},{"number":"4","revision":"c2a355c1ed29974e94a1f1decbbe274307a0b804","parents":["c36e095c4d292f2bec76db38f752adf9f2452d5a"],"ref":"refs/changes/88/5888/4","uploader":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"createdOn":1553020206,"author":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553020238,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/server.js","line":45,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Can you explain (or maybe add a comment) what this refers to (or, if it\u0027s straight from the RFC, maybe mention that)?"},{"file":"lib/server.js","line":45,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"It\u0027s from https://tools.ietf.org/html/rfc2616#section-3.7.\n\nThis tries to match type \"/\" subtype, and let parameters pass.\n\nI will add a comment."},{"file":"lib/server.js","line":197,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Pretty nitty, but we don\u0027t usually put ticket numbers into comments just to indicate why something was changed."},{"file":"lib/server.js","line":203,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"It seems like there are two changes here: first is that we changed the regular expression so that the case described in MANTA-4133 is no longer considered valid; and second is that we changed the behavior when provided with an invalid content-type so that instead of using the `mime` module to look it up, we fail with a 400.  I wonder whether the second change will break anything important that works today (possibly by accident)?"},{"file":"lib/server.js","line":203,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Your summary is correct.\n\nIn my testing, I found that the regex matches pretty much anything (.*, which is greedy), and so that mime.lookup() never gets run since the test is inverted. That was the case in all the muskie tests.\n\nOf course, that doesn\u0027t mean that a customer might not be relying on some use-case not in our tests, you are right. \n\nIt seems to me the RFC is saying:\n\n- if the CT is malformed, we shouldn\u0027t check, but instead reject the request.\n- If the CT is well-formed, we can decide whether to attempt to look up or return default types for CT\u0027s we don\u0027t understand.\n\nIs there someone more familiar with customer use cases who might have a sense of customer use?"},{"file":"lib/server.js","line":512,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I\u0027m guessing you modeled this after the `forbiddenHandler`? That would seem reasonable, but I think it\u0027s not a great example here.  (I\u0027m not sure why that one is structured the way it was, to be honest.)\n\nI think it\u0027s a more common pattern to invoke the `next` callback with an instance of `Error`.  There are a number of examples using `InternalError`, and there\u0027s an example using `BadRequestError` in lib/obj.js.  One advantage of that approach is that we\u0027ll definitely wind up invoking the `audit` handler, and it will have access to the error.  That means the error will show up in the audit log, complete with stack trace, and it will be easier to keep stats on the various types of errors."},{"file":"lib/server.js","line":512,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Great, thanks!"},{"file":"test/dir.test.js","line":144,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Can you explain why this test changed?  (I can\u0027t tell from the test name if the intention is that this header is ignored here.)"},{"file":"test/dir.test.js","line":144,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"I didn\u0027t notice it was un-used; maybe we can just remove it?\n\nimage/jpg is invalid I think."},{"file":"test/obj.test.js","line":323,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"It seems like the change to this test reflects the behavior change I mentioned in the other file.  Namely, if a consumer _was_ providing \u0027jpg\u0027, they used to get `image/jpeg`, and now I wonder if they just get an error.  Is that what we want?"},{"file":"test/obj.test.js","line":323,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Good question. It seems wrong, but we don\u0027t want to break customers who are currently relying on it."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/server.js","type":"MODIFIED","insertions":18,"deletions":-5},{"file":"test/dir.test.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/obj.test.js","type":"MODIFIED","insertions":57,"deletions":-3}],"sizeInsertions":77,"sizeDeletions":-10},{"number":"5","revision":"7492e0ca58fb2ab2b5bb8c13b49af819abcef754","parents":["c36e095c4d292f2bec76db38f752adf9f2452d5a"],"ref":"refs/changes/88/5888/5","uploader":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"createdOn":1553101157,"author":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553101191,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/server.js","line":49,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Thanks for the comment.  Is the regex right?  It seems like \u0027+\u0027 is inside the square brackets twice, and I don\u0027t think it\u0027s meaningful as a metacharacter there so that seems maybe not what was intended?\n\nLooking at the link in the comment, it seems like a media type can also contain \u0027;\u0027 and \u0027\u003d\u0027.  Actually, it looks like a \"token\" can contain a number of other characters (based on section 2.2)."},{"file":"lib/server.js","line":49,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"The regex should be applied only to the \u0027type/subtype\u0027 portion of the content time; there is no $ specified so it should allow anything to pass through following the subtype (which as you point out can contain a number of other characters). I don\u0027t think it would be worth the effort to try to validate that.\n\nIt looks as if in practice subtypes can contain \u0027-\u0027 and \u0027+\u0027 symbols; I added them for those, and tested with this list:\n\nhttps://www.iana.org/assignments/media-types/media-types.xhtml\n\nLet me know if that doesn\u0027t make sense. Thanks for the careful review."},{"file":"lib/server.js","line":49,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Ah, thanks for pointing out that it\u0027s not anchored (no \u0027^\u0027 or \u0027$\u0027).  Agreed that it might not be worth trying to exclude all invalid inputs here.  That makes it a lot simpler.\n\nIf I\u0027m reading that right, we\u0027re just validating there\u0027s at least one word character, a \u0027/\u0027, then at least one of a \u0027-\u0027, \u0027+\u0027, \u0027.\u0027 ,or word character.  I think the second \"+\" is still redundant -- i.e., it\u0027s the same regexp without it.\n\nWhile it may not make sense to exclude all invalid inputs, it seems like this might reject some valid ones -- like `foo-/bar` (which seems weird, but I think is allowed?).  Out of curiosity, why not just `.+/.+`?"},{"file":"lib/server.js","line":204,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"nit: I think this is just one (unhyphenated) word."},{"file":"lib/server.js","line":204,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"nit: for log messages that are fragments, we seem to use lowercase leading characters (not sure if this is universal, but I\u0027m looking at L185 and L235)."},{"file":"lib/server.js","line":204,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Will fix."},{"file":"lib/server.js","line":204,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Will fix thanks."},{"file":"test/obj.test.js","line":1064,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"What actually happens in this case now?  Do we ignore the content-type and assign octet-stream or something?\n\nMore generally, it might be nice to annotate these tests with the expected behavior.\n\nShould they also do a HEAD on the newly-created object and check the content-type on it?"},{"file":"test/obj.test.js","line":1064,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"The mime api should return \u0027application/octet-steam\u0027 for the request.\n\nAdding annotations and HEAD checks.\n\nThank you!"},{"file":"test/obj.test.js","line":1084,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This test looks like it\u0027s supposed to be different from the previous one but it looks the same.  (Sorry if I missed it!)"},{"file":"test/obj.test.js","line":1084,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Fixing."},{"file":"test/obj.test.js","line":1130,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I\u0027m not sure what the difference is between this test and the previous one."},{"file":"test/obj.test.js","line":1130,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Fixing."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/server.js","type":"MODIFIED","insertions":14,"deletions":-5},{"file":"test/obj.test.js","type":"MODIFIED","insertions":86,"deletions":0}],"sizeInsertions":101,"sizeDeletions":-6},{"number":"6","revision":"e655c7c4a9786f57626def099f56247af07bb2b4","parents":["c36e095c4d292f2bec76db38f752adf9f2452d5a"],"ref":"refs/changes/88/5888/6","uploader":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"createdOn":1553618936,"author":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553618968,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/server.js","type":"MODIFIED","insertions":14,"deletions":-5},{"file":"test/obj.test.js","type":"MODIFIED","insertions":67,"deletions":0}],"sizeInsertions":82,"sizeDeletions":-6},{"number":"7","revision":"e0d8846cece5bfb9f34e69efa7ece57e0d304198","parents":["3b57299bb0edf3ce6e101530cf189df9de34d154"],"ref":"refs/changes/88/5888/7","uploader":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"createdOn":1553625077,"author":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553618968,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/server.js","type":"MODIFIED","insertions":14,"deletions":-5},{"file":"test/obj.test.js","type":"MODIFIED","insertions":67,"deletions":0}],"sizeInsertions":82,"sizeDeletions":-6},{"number":"8","revision":"822bdb50da2c00d33fb81f959084e8b72c8d5ccc","parents":["dc7f08045a391c17f52ace1a58232ff0331714de"],"ref":"refs/changes/88/5888/8","uploader":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"createdOn":1554479163,"author":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553618968,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/server.js","type":"MODIFIED","insertions":14,"deletions":-5},{"file":"test/obj.test.js","type":"MODIFIED","insertions":67,"deletions":0}],"sizeInsertions":82,"sizeDeletions":-6},{"number":"9","revision":"37bcaff10df2272f9cc92d2bc1023f4a349eb5bb","parents":["9a693a081f0a0b490713b4244f2e1bcd32caef96"],"ref":"refs/changes/88/5888/9","uploader":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"createdOn":1554821176,"author":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554821210,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/server.js","type":"MODIFIED","insertions":14,"deletions":-5},{"file":"test/obj.test.js","type":"MODIFIED","insertions":100,"deletions":0}],"sizeInsertions":115,"sizeDeletions":-6},{"number":"10","revision":"fddbc350d2245ef6d4790a84cdcda2ed837559e2","parents":["dc7f08045a391c17f52ace1a58232ff0331714de"],"ref":"refs/changes/88/5888/10","uploader":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"createdOn":1554821746,"author":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554821210,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"deps/jsstyle","line":1,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Was this intentionally changed?"},{"file":"deps/jsstyle","line":1,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Nope, I will revert it."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/server.js","type":"MODIFIED","insertions":14,"deletions":-5},{"file":"test/obj.test.js","type":"MODIFIED","insertions":100,"deletions":0}],"sizeInsertions":115,"sizeDeletions":-6},{"number":"11","revision":"2f1a25f6a51793745b756eb1763ab114df04eb6e","parents":["9a693a081f0a0b490713b4244f2e1bcd32caef96"],"ref":"refs/changes/88/5888/11","uploader":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"createdOn":1554829781,"author":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554829816,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/server.js","type":"MODIFIED","insertions":14,"deletions":-5},{"file":"test/obj.test.js","type":"MODIFIED","insertions":100,"deletions":0}],"sizeInsertions":114,"sizeDeletions":-5},{"number":"12","revision":"bdff74c7e5c341e8020ebaeae710d57a30515666","parents":["dc7f08045a391c17f52ace1a58232ff0331714de"],"ref":"refs/changes/88/5888/12","uploader":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"createdOn":1554829798,"author":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554829830,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/obj.test.js","line":1062,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"I might be missing it, but I don\u0027t see any positive tests to ensure that valid Content-Type values are accepted and returned. Maybe we should have a few of those to complement these cases?\n\nAlso reminds me that Russell introduced a test using jsverify (a quickcheck clone) that could be useful if we wanted to build use that to help us verify what we expect to be accepted and rejected by the regex. Not necessarily for this particular CR, but could be a useful test to write in the future."},{"file":"test/obj.test.js","line":1062,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Added a few positive checks. In so doing discovered that any content-type, as long as it is not malformed, is accepted. I plan to open another issue for that and will revisit jsverify testing there."},{"file":"test/obj.test.js","line":1139,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Spelling nitpick: existent not existant."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/server.js","type":"MODIFIED","insertions":14,"deletions":-5},{"file":"test/obj.test.js","type":"MODIFIED","insertions":100,"deletions":0}],"sizeInsertions":114,"sizeDeletions":-5},{"number":"13","revision":"8df843baace23dcea0dd4089d60a6232979932b4","parents":["9a693a081f0a0b490713b4244f2e1bcd32caef96"],"ref":"refs/changes/88/5888/13","uploader":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"createdOn":1554842337,"author":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554842370,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/server.js","type":"MODIFIED","insertions":14,"deletions":-5},{"file":"test/obj.test.js","type":"MODIFIED","insertions":175,"deletions":0}],"sizeInsertions":189,"sizeDeletions":-5},{"number":"14","revision":"d85716ccf10bf648545b2d894ee80140bcfdba7a","parents":["dc7f08045a391c17f52ace1a58232ff0331714de"],"ref":"refs/changes/88/5888/14","uploader":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"createdOn":1554842467,"author":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555446772,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554842370,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/obj.test.js","line":1063,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Not suggesting you rewrite this, but this set of tests might be a good candidate for a table-based set of tests in the future, since most of them differ only in the input content-type and the expected resulting content-type."},{"file":"test/obj.test.js","line":1063,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Ok, I will open a new issue for that."},{"file":"test/obj.test.js","line":1064,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Okay, this is probably confusing given what I had written earlier, but: we *do* prefer complete sentences (with capitalized first words) in comments.  (My earlier comment was about log messages, where it varies by component.)"},{"file":"test/obj.test.js","line":1064,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"I should have figured that out, sorry."},{"file":"test/obj.test.js","line":1065,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Instead of \"correct content-type\", should this say \"a valid default content-type\"?"},{"file":"test/obj.test.js","line":1078,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I think you can just use `info()` here (which does a HEAD instead of a GET).  For this test, it\u0027s unlikely to matter because the program is small and short-lived.  But in general if you have a stream in Node (like either `stream` or `res2` -- not sure which), and you _don\u0027t_ read from it, bad things can happen.  In particular, since one of these streams is probably coming from a TCP connection, one of two things is likely to happen: if the connection does not have a timeout on it, then the file descriptor will essentially be leaked (because it will hang around forever waiting for you to read the data from it).  If either side does have a timeout associated with it, it will emit an error whenever that timeout fires.  That often results in a message like \"socket hang-up\", which is often hard to debug, since the problem happened much earlier."},{"file":"test/obj.test.js","line":1078,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Fixed in next patchset."},{"file":"test/obj.test.js","line":1089,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"\"a valid\" content-type?"},{"file":"test/obj.test.js","line":1089,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Will fix."},{"file":"test/obj.test.js","line":1105,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"It seems a little surprising that the server-assigned content-type differs from the previous test, when both inputs are basically invalid.  But I\u0027m guessing that\u0027s a result of the `mime.lookup()` call and not a change in behavior with your change?"},{"file":"test/obj.test.js","line":1105,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Yes, I will make a note of that in the comments."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/server.js","type":"MODIFIED","insertions":14,"deletions":-5},{"file":"test/obj.test.js","type":"MODIFIED","insertions":175,"deletions":0}],"sizeInsertions":189,"sizeDeletions":-5},{"number":"15","revision":"d059decf1dec0c89b2956a5b9ea4a5583c4f78fe","parents":["ae48cc92e6afc8421ad73ca580cdfc8af104d46a"],"ref":"refs/changes/88/5888/15","uploader":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"createdOn":1555614128,"author":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555446772,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554842370,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/server.js","type":"MODIFIED","insertions":14,"deletions":-5},{"file":"test/obj.test.js","type":"MODIFIED","insertions":175,"deletions":0}],"sizeInsertions":189,"sizeDeletions":-5},{"number":"16","revision":"d1ae529a011d0528bdd0a50d4bafa4690d76d272","parents":["ae48cc92e6afc8421ad73ca580cdfc8af104d46a"],"ref":"refs/changes/88/5888/16","uploader":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"createdOn":1555690080,"author":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556037892,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1555690111,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/server.js","type":"MODIFIED","insertions":14,"deletions":-5},{"file":"test/obj.test.js","type":"MODIFIED","insertions":178,"deletions":0}],"sizeInsertions":192,"sizeDeletions":-5},{"number":"17","revision":"114022310d14bf8fc0b44479ad457834788c08ed","parents":["124740b581c21b6fbaf4c1c30590b03ed91af194"],"ref":"refs/changes/88/5888/17","uploader":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"createdOn":1556717064,"author":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1557161963,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/server.js","type":"MODIFIED","insertions":14,"deletions":-5},{"file":"test/obj.test.js","type":"MODIFIED","insertions":180,"deletions":-3}],"sizeInsertions":194,"sizeDeletions":-8},{"number":"18","revision":"a3725e0694a21a61586279a9d46622a98ef8d5ba","parents":["810d30f043a3c3ee5717146fe7bbb85484cfe0ef"],"ref":"refs/changes/88/5888/18","uploader":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"createdOn":1557323325,"author":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1557161963,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1558395112,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/server.js","type":"MODIFIED","insertions":14,"deletions":-5},{"file":"test/obj.test.js","type":"MODIFIED","insertions":180,"deletions":-3}],"sizeInsertions":194,"sizeDeletions":-8},{"number":"19","revision":"c4851ea02a7eea3bf6984d7ace237a756c08b441","parents":["70fa55392badda097604a8b85c39fdb8a72dc8a1"],"ref":"refs/changes/88/5888/19","uploader":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"createdOn":1558449857,"author":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1557161963,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1560183062,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1558395112,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/server.js","type":"MODIFIED","insertions":14,"deletions":-5},{"file":"test/obj.test.js","type":"MODIFIED","insertions":180,"deletions":-3}],"sizeInsertions":194,"sizeDeletions":-8},{"number":"20","revision":"6566def46bfa9f7f333f88dfb428dc996c194945","parents":["3dc8d286602feedd8c6409d21abec7b8daf34561"],"ref":"refs/changes/88/5888/20","uploader":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"createdOn":1560193365,"author":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1557161963,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1560183062,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1558395112,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1560201294,"by":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/server.js","type":"MODIFIED","insertions":14,"deletions":-5},{"file":"test/obj.test.js","type":"MODIFIED","insertions":180,"deletions":-3}],"sizeInsertions":194,"sizeDeletions":-8}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Russell Brown","email":"russell.brown@joyent.com","username":"russelldb"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}]}