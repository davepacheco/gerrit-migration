{"project":"joyent/sdc-agents-core","branch":"master","id":"I069bfeff40cbd608e403efb5cd03102d73a85623","number":"5638","subject":"TRITON-1141 convert sdc-agents-core to engbld framework (fix node version) Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"url":"https://cr.joyent.us/5638","commitMessage":"TRITON-1141 convert sdc-agents-core to engbld framework (fix node version)\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1551179670,"lastUpdated":1551201545,"open":false,"status":"MERGED","comments":[{"timestamp":1551179670,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 1."},{"timestamp":1551179677,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit de6450af49fa4d3fbd62925906b9cf4977f6cefb\n    \n    TRITON-1141 convert sdc-agents-core to engbld framework (fix node version)"},{"timestamp":1551201464,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1: Code-Review+1 Integration-Approval+1\n\n(1 comment)"},{"timestamp":1551201519,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 2: Commit message was updated."},{"timestamp":1551201545,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Tim Foster"}],"currentPatchSet":{"number":"2","revision":"069bfeff40cbd608e403efb5cd03102d73a85623","parents":["44936f1cd258c5d03916ee3ad58ab354d4c7ed57"],"ref":"refs/changes/38/5638/2","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1551201519,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551201464,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1551201464,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1551201545,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1,"sizeDeletions":-1},"patchSets":[{"number":"1","revision":"ec99de2b64475809b46b14836516f23e22590460","parents":["44936f1cd258c5d03916ee3ad58ab354d4c7ed57"],"ref":"refs/changes/38/5638/1","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1551179670,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551201464,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1551201464,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"comments":[{"file":"Makefile","line":30,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"For those following at home, this additional change is to handle a comment from an earlier CR (https://cr.joyent.us/#/c/5517/) for this same ticket. Reproduced here:\n\n* * *\n\nI get a validate-buildenv failure when attempting this build on multiarch-15.4.1:\n\n```\n[root@trent-builder-1541-multiarch-20190221T002615 ~/joy/sdc-agents-core]# make validate-buildenv\n/root/joy/sdc-agents-core/deps/eng/tools/validate-buildenv.sh\nThis build machine should not be used to build this component.\n\nexpected pkgsrc version 2011Q4\n running pkgsrc version 2015Q4\n\nThis component should build on an image based on sdc-smartos@1.6.3\nThe following jenkins-agent image will work: 956f365d-2444-4163-ad48-af2f377726e0\n```\n\nHowever, https://jenkins.joyent.us/job/agents_core/configure uses this label expression: `!platform:true \u0026\u0026 image_ver:15.4.1 \u0026\u0026 pkgsrc_arch:multiarch \u0026\u0026 pi:20151126T062538Z \u0026\u0026 jenkins_agent:2`\n\nIs the former because of:\n\n```\nNODE_PREBUILT_IMAGE\u003dfd2cc906-8938-11e3-beab-4359c665ac99\n```\n\n?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1,"sizeDeletions":-1},{"number":"2","revision":"069bfeff40cbd608e403efb5cd03102d73a85623","parents":["44936f1cd258c5d03916ee3ad58ab354d4c7ed57"],"ref":"refs/changes/38/5638/2","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1551201519,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551201464,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1551201464,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1551201545,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1,"sizeDeletions":-1}],"allReviewers":[{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}]}