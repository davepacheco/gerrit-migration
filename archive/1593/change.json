{"project":"joyent/illumos-joyent","branch":"master","topic":"OS-5565","id":"Id2e47d992aaa5d4532b1bf81e0badd900361433f","number":"1593","subject":"OS-5565 Need smrt HBA mode support Reviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Approved by: Joshua M. Clulow \u003cjmc@joyent.com\u003e","owner":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"url":"https://cr.joyent.us/1593","commitMessage":"OS-5565 Need smrt HBA mode support\nReviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nApproved by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\n","createdOn":1488326913,"lastUpdated":1491864775,"open":false,"status":"MERGED","comments":[{"timestamp":1488326913,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 1."},{"timestamp":1488328902,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 2."},{"timestamp":1488925641,"reviewer":{"name":"Juraj Lutter","username":"jurajlutter"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1489004721,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2:\n\n(34 comments)"},{"timestamp":1491193121,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 2:\n\n(85 comments)\n\nIn general, this looks great!  I have some feedback, and a couple of minor questions."},{"timestamp":1491518661,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2:\n\n(119 comments)"},{"timestamp":1491518670,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 3."},{"timestamp":1491518685,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Topic set to OS-5565"},{"timestamp":1491590281,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 3: Code-Review+1\n\n(1 comment)"},{"timestamp":1491676235,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 3: Code-Review+1\n\n(4 comments)\n\nThanks for the changes!  There\u0027s one last spelling error, and then I think we\u0027re good to go."},{"timestamp":1491845495,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 4."},{"timestamp":1491845515,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4:\n\n(2 comments)"},{"timestamp":1491845576,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1491845856,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1491845863,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4: -Code-Review"},{"timestamp":1491847116,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1\n\nTesting notes in the ticket look good to me.  I approve!"},{"timestamp":1491858251,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 5."},{"timestamp":1491858300,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1491858324,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1"},{"timestamp":1491861953,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 6."},{"timestamp":1491862316,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1491864546,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 6: Code-Review+1 Integration-Approval+1"},{"timestamp":1491864775,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Robert Mustacchi"}],"currentPatchSet":{"number":"6","revision":"d2e47d992aaa5d4532b1bf81e0badd900361433f","parents":["217415b79c30c5414f702fe59ef380cdc64b66e0"],"ref":"refs/changes/93/1593/6","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1491861953,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491862316,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491864546,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1491864546,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"SUBM","value":"1","grantedOn":1491864775,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt.c","type":"MODIFIED","insertions":122,"deletions":-9},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","type":"MODIFIED","insertions":741,"deletions":-20},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_commands.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_device.c","type":"MODIFIED","insertions":24,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","type":"MODIFIED","insertions":487,"deletions":-103},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_interrupts.c","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_logvol.c","type":"MODIFIED","insertions":158,"deletions":-102},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","type":"ADDED","insertions":613,"deletions":0},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_sata.c","type":"ADDED","insertions":160,"deletions":0},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt.h","type":"MODIFIED","insertions":175,"deletions":-30},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_ciss.h","type":"MODIFIED","insertions":11,"deletions":-5},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","type":"MODIFIED","insertions":212,"deletions":-1},{"file":"usr/src/uts/common/sys/scsi/scsi_address.h","type":"MODIFIED","insertions":12,"deletions":0},{"file":"usr/src/uts/intel/smrt/Makefile","type":"MODIFIED","insertions":6,"deletions":-6}],"sizeInsertions":2737,"sizeDeletions":-280},"patchSets":[{"number":"1","revision":"65592dd90f9ea4f828dccc0362cb088d0e555551","parents":["f7b7abfa6104a9c74789db9692c2fc269644b2eb"],"ref":"refs/changes/93/1593/1","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1488326913,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt.c","type":"MODIFIED","insertions":121,"deletions":-9},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","type":"MODIFIED","insertions":734,"deletions":-19},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_commands.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_device.c","type":"MODIFIED","insertions":23,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","type":"MODIFIED","insertions":485,"deletions":-103},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_interrupts.c","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_logvol.c","type":"MODIFIED","insertions":135,"deletions":-76},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","type":"ADDED","insertions":568,"deletions":0},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_sata.c","type":"ADDED","insertions":152,"deletions":0},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt.h","type":"MODIFIED","insertions":162,"deletions":-28},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_ciss.h","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","type":"MODIFIED","insertions":210,"deletions":-1},{"file":"usr/src/uts/common/sys/scsi/scsi_address.h","type":"MODIFIED","insertions":10,"deletions":0},{"file":"usr/src/uts/intel/smrt/Makefile","type":"MODIFIED","insertions":5,"deletions":-5}],"sizeInsertions":2625,"sizeDeletions":-250},{"number":"2","revision":"ddc0c8cc29f29198d4d240ee98d04dc5db7f1968","parents":["f7b7abfa6104a9c74789db9692c2fc269644b2eb"],"ref":"refs/changes/93/1593/2","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1488328902,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1488925641,"by":{"name":"Juraj Lutter","username":"jurajlutter"}}],"comments":[{"file":"usr/src/uts/common/Makefile.files","line":29,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Update copyright"},{"file":"usr/src/uts/common/Makefile.files","line":29,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt.c","line":13,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Format per eng.git"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt.c","line":13,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt.c","line":181,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"iport?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt.c","line":181,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"that _is_ reset?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt.c","line":181,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt.c","line":181,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt.c","line":390,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Should the \"v0\" and \"p0\" names be a #define someplace?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt.c","line":390,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":13,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Format per eng.git"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":13,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":23,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"s/a couple of/several/ (two\u0027s a couple, three\u0027s a crowd)"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":23,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":31,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"s/has to happen/must be possible/ perhaps?  Current phrasing makes it sound more like discover only happens during panic."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":31,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":34,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"This is because we don\u0027t talk to a device by WWN, but rather by some indirect address provided by the firmware?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":34,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Yes, that\u0027s correct."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":56,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"periodic?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":56,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":67,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I would ditch this comma"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":67,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":69,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Marking the request means setting SMRT_CTLR_DISCOVERY_REQUESTED again, here?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":69,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":73,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I would remove this comma too"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":73,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":76,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I\u0027d drop the leading underscore/DISCOVERY_ here, and just say \"REQUESTED\" and \"PERIODIC\"."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":76,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":80,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"add comma before \"or\""},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":80,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"ditch comma after \"reason\""},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":80,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":80,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":81,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"ditch comma?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":81,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":103,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"This sentence is a little repetitive and could perhaps use rework."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":103,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":111,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"\"and Co.\" ?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":111,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I would either replace \"sd and co\" with \"target drivers\", or even just \"the SCSI framework\"."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":111,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":111,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":114,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I would break and start a new sentence with \"If\" here."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":114,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":156,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"How did you decide on this number?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":156,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It was arbitrary."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":273,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Other code bzero()s the created request. Is there reason for the inconsistency here?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":273,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1553,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Grammar/spelling rework needed"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1553,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1572,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Interrupts are already enabled."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1572,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1652,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"VERIFY*?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1652,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1667,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Period here and new sentence."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1667,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1699,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"\"it is\", or at least \"it\u0027s\""},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1699,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"indicates?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1699,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1699,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1704,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Is fall-through intended here?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1704,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Sigh, no."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1712,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"indicates"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1712,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1721,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Fallthrough here?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1721,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Not intentional."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1739,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I think this would be visually clearer with parens about the expression."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1739,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"If this is visually confusing, then I guess I should just use an if statement."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1780,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I\u0027m having trouble finding the part where the user is warned about this condition."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1780,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I guess it got lost over time. I\u0027ve removed the comment for now. What would you prefer we do here?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1780,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"In the interest of getting back, I\u0027d probably just leave it as-is.  If we think we\u0027re having this problem, though, I guess a counter of the times we had to set INTERVENTION might be helpful.  Maybe a log message the first few times, etc."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1802,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"comma splice; split into sentences."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1802,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1815,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Perhaps \"Because we submit both the cancel event and the regular notification event as an ordered command, \""},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1815,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1825,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":":"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1825,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Sorry, not sure I follow."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1828,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I normally only put two spaces after a period!"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1828,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It was just a typo."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1830,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"two spaces"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1830,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1849,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"two spaces"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","line":1849,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_commands.c","line":13,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Format per eng.git"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_commands.c","line":13,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_device.c","line":99,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"newline after variable declaration"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_device.c","line":99,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_device.c","line":104,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Assigning to smrt_pci_vendor instead of smrt_pci_devid"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_device.c","line":104,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Thanks for catching that. Sigh."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":0,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"How did you select the csync_usec and stable_usec values you pass to the target map stuff?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":0,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I honestly, mostly guessed, based a bit on what both mfii and pmcs do."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":13,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Format per eng.git"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":13,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":22,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"It looks like this struct definition isn\u0027t used anywhere in the file."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":22,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It\u0027s vestigial. I\u0027ve removed it."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":58,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Perhaps a comment that reinforces the fact that the logical unit number must be zero for a logical volume?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":58,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":85,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Put in quotes, perhaps?  Also, is there a space in the format?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":85,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":119,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Is this cast necessary?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":119,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":185,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"As Patrick mentioned elsewhere, maybe put this in quotes?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":185,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":200,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Which property?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":200,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":249,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Is this meant to be an assignment, or an equality check?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":249,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It was meant to be an equality check."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":393,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Is it \"REPORT LUN\" or \"REPORT LUNS\"?  Also, I would say \"one LUN\" instead of \"1 LUN\" here, to make it more obviously separate from the \"LUN 0\" that follows."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":393,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":395,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"\"LUN\"?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":395,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":422,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"REPORT LUNS?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":422,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":509,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Perhaps move this comment after the smtg_physical bail-out?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":509,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I wanted to have it before this so it was clear why we had the if statement."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":565,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"What are the ramifications of this change?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":565,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Basically this describes the order of the I/O completions. In this case, this makes it so that I/Os can be retired in any order and processed in any order after being submitted. Which is what we want. There\u0027s no expectation of ordering and grouping from higher levels of the system to my knowledge."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":613,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"\u0027dumping\u0027"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":613,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":615,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"By \"important to dump\", you mean: forms a part of the dump device?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":615,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":1200,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"parallel?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":1200,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":1362,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Please add braces"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":1362,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":1422,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Please add braces"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":1422,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_interrupts.c","line":13,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Format per eng.git"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_interrupts.c","line":13,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_interrupts.c","line":41,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"s/(/,/"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_interrupts.c","line":41,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_interrupts.c","line":45,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Can you put braces around the arm of this multi-line if expression?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_interrupts.c","line":45,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_logvol.c","line":53,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I would use VERIFY() for this."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_logvol.c","line":53,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_logvol.c","line":68,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Style choice: Perhaps consider flipping the conditional for this check and performing the below allocation inside the block, rather than using goto."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_logvol.c","line":68,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_logvol.c","line":114,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"VERIFY() here, too."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_logvol.c","line":114,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_logvol.c","line":325,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Could this be ddi_strtoul(), and then the cast on 330 might not be needed?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_logvol.c","line":325,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_logvol.c","line":346,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Same ddi_strtoul() question as above."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_logvol.c","line":346,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":13,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Format per eng.git"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":13,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":22,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"VERIFY?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":22,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":23,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Newline between asserts and logic?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":23,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":29,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"comma splice; split into two sentences"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":29,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":46,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"s/ua/UA/"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":46,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":52,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Braces, please!\n\nAlso, is it always safe to dereference \"ua\" at this index?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":52,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"The comment meant that it was the callers responsibility to ensure that. I\u0027ve added a check for this to emphasize it."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":88,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"sizeof (*sipd) ?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":88,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":98,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Should this be LE_16(timeout)?  I think I might have left the LE_16() out in a few places."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":98,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I added it here and in the logical volume discovery."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":194,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"VERIFY?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":194,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":196,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Should this just be \"\u003e\"?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":196,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"They\u0027re logically equivalent, I guess it doesn\u0027t matter. Changed."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":226,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Do we need to kmem_free(info) before returning here?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":226,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Yes, we do. Thanks."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":251,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Is this always true?  What if somebody has a broken SAS device with a duplicate WWN?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":251,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I don\u0027t know, but I\u0027m not sure what else to do. This is similar to the check we\u0027re doing on the logical volume. What would you rather see?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":251,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Yeah, I\u0027m not sure either.  I would leave it for now, but if we see it in the wild we might have to make this not panic."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":305,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"VERIFY3P?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":305,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":359,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"sizeof (*smrpl)?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":359,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":382,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Maybe this should be BE_32() for consistency?  I think I might have used \"htonl()\" in the logvol discovery code without really thinking about it, so, sorry about that."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":382,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":441,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"This should probably be a named mask constant, e.g., \"SMRT_REPORT_PHYSICAL_LUN_EXT_MASK\"?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":441,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":476,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I think this sentence might be missing a word?\n\nIt\u0027s nitty, but can you put a blank line between the variables and the comment block?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":476,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It\u0027s your driver, I\u0027ll do whatever nits you want."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":489,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Physical?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":489,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":506,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Could we print out some of the address details as well?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":506,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"What information would you like to see?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":506,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"It occurs to me that if somebody sees one of these devices, because you\u0027re keeping the smrt_physical_t around anyway, we can just look in the list with mdb.  Sorry for the noise!"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":526,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"VERIFY3S"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":526,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":544,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"These could be VERIFY3S() and VERIFY3P()"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":544,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":569,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"VERIFY"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","line":569,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_sata.c","line":43,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"VERIFY3P?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_sata.c","line":43,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_sata.c","line":46,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Won\u0027t we leak the command if the alloc succeeds but the attach fails?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_sata.c","line":46,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Yeah, good catch."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_sata.c","line":88,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Can we return with smrt_mutex held?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_sata.c","line":88,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Yeah, this can. I\u0027ve fixed that."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_sata.c","line":138,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"It might help to expand on this a little?  I dimly recall it taking a while to figure this out, at least for me."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_sata.c","line":138,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_sata.c","line":146,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"It feels like this might be a job for bcopy()."},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_sata.c","line":146,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt.h","line":13,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Format per eng.git"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt.h","line":13,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt.h","line":149,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Can you make the indentation for the value line up with the values above?"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt.h","line":149,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt.h","line":187,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"What effect does the inclusion of the mask in the enum itself (rather than as a macro elsewhere) have on the ability of MDB to render these values by name?"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt.h","line":187,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This ends up causing mdb to not do what you want. I\u0027ve moved it to a #define as per your preference."},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt.h","line":221,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Perhaps move this comment block to just about \"struct smrt {\"?"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt.h","line":221,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt.h","line":401,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Perhaps mention that this appears to only be used for discovery during system panic?  Or have I missed something?"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt.h","line":401,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt.h","line":408,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"No interest in using a union here?"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt.h","line":408,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I\u0027ve changed it to use one."},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_ciss.h","line":14,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Format per eng.git"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_ciss.h","line":14,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_ciss.h","line":211,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I guess this structure was just always wrong?!"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_ciss.h","line":211,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Yes, it seems that it was always wrong; however, nothing ever used it in the old driver."},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":14,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Format per eng.git"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":14,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":86,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Consider that these names don\u0027t closely match the opcode documentation.  While it\u0027s true that they describe how they\u0027re being used, I think it obscures some of the bigger picture."},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":86,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I tend to agree that, where possible, the constant names ought to match the specification.\n\nAlso, can we keep the hex constants consistently in upper case here?"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":86,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":86,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":89,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Which specification do these definitions come from?  It\u0027s probably good to mention the command(s) that these are for.\n\nCan you line the numeric column up with those above?"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":89,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"These come from the BMIC spec per \u0027Identify Physical Drive\u0027. But are used in a few different places. I\u0027ve updated the comments, changed the hex casing, and aligned things."},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":101,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"0xFF"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":101,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":143,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"physical"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":143,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":144,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I think I was trying to typeset the names of commands from the specification(s) in capital letters; e.g., here (and in the next block comment) it would be REPORT PHYSICAL LUNS."},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":144,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":145,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"ditch the comma after \"Note\""},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":145,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":175,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"ORed?"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":175,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":180,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Should there be a *_LUN_EXT_MASK definition?"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":180,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":181,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"... REPORT?"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":181,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":244,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"whereas is one word"},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","line":244,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/scsi/scsi_address.h","line":23,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Update copyright"},{"file":"usr/src/uts/common/sys/scsi/scsi_address.h","line":23,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/sys/scsi/scsi_address.h","line":179,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Can we expand UA to \"unit-address\", as it is in the comments above?  It took me a while to figure out what it stood for."},{"file":"usr/src/uts/common/sys/scsi/scsi_address.h","line":179,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt.c","type":"MODIFIED","insertions":121,"deletions":-9},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","type":"MODIFIED","insertions":733,"deletions":-19},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_commands.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_device.c","type":"MODIFIED","insertions":23,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","type":"MODIFIED","insertions":487,"deletions":-103},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_interrupts.c","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_logvol.c","type":"MODIFIED","insertions":135,"deletions":-76},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","type":"ADDED","insertions":573,"deletions":0},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_sata.c","type":"ADDED","insertions":152,"deletions":0},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt.h","type":"MODIFIED","insertions":156,"deletions":-28},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_ciss.h","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","type":"MODIFIED","insertions":210,"deletions":-1},{"file":"usr/src/uts/common/sys/scsi/scsi_address.h","type":"MODIFIED","insertions":10,"deletions":0},{"file":"usr/src/uts/intel/smrt/Makefile","type":"MODIFIED","insertions":5,"deletions":-5}],"sizeInsertions":2625,"sizeDeletions":-250},{"number":"3","revision":"237d4690892469d8682f9a890977c08a34b519dd","parents":["4cd8e58f70dec0852b8c53600fdde8ffa1347e2f"],"ref":"refs/changes/93/1593/3","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1491518670,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491676235,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491590281,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"comments":[{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":1198,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"parallel bus?"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","line":1198,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_sata.c","line":144,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"s/conses up/constructs/ seems like it would be clearer, but that\u0027s just me"},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_sata.c","line":144,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt.c","type":"MODIFIED","insertions":122,"deletions":-9},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","type":"MODIFIED","insertions":741,"deletions":-20},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_commands.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_device.c","type":"MODIFIED","insertions":24,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","type":"MODIFIED","insertions":487,"deletions":-103},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_interrupts.c","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_logvol.c","type":"MODIFIED","insertions":158,"deletions":-102},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","type":"ADDED","insertions":613,"deletions":0},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_sata.c","type":"ADDED","insertions":160,"deletions":0},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt.h","type":"MODIFIED","insertions":175,"deletions":-30},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_ciss.h","type":"MODIFIED","insertions":11,"deletions":-5},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","type":"MODIFIED","insertions":212,"deletions":-1},{"file":"usr/src/uts/common/sys/scsi/scsi_address.h","type":"MODIFIED","insertions":12,"deletions":0},{"file":"usr/src/uts/intel/smrt/Makefile","type":"MODIFIED","insertions":6,"deletions":-6}],"sizeInsertions":2738,"sizeDeletions":-282},{"number":"4","revision":"369a971cf0cecda487c6555e6b62bb4f3e462364","parents":["4cd8e58f70dec0852b8c53600fdde8ffa1347e2f"],"ref":"refs/changes/93/1593/4","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1491845495,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491847116,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1491847116,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491845576,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt.c","type":"MODIFIED","insertions":122,"deletions":-9},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","type":"MODIFIED","insertions":741,"deletions":-20},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_commands.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_device.c","type":"MODIFIED","insertions":24,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","type":"MODIFIED","insertions":487,"deletions":-103},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_interrupts.c","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_logvol.c","type":"MODIFIED","insertions":158,"deletions":-102},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","type":"ADDED","insertions":613,"deletions":0},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_sata.c","type":"ADDED","insertions":160,"deletions":0},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt.h","type":"MODIFIED","insertions":175,"deletions":-30},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_ciss.h","type":"MODIFIED","insertions":11,"deletions":-5},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","type":"MODIFIED","insertions":212,"deletions":-1},{"file":"usr/src/uts/common/sys/scsi/scsi_address.h","type":"MODIFIED","insertions":12,"deletions":0},{"file":"usr/src/uts/intel/smrt/Makefile","type":"MODIFIED","insertions":6,"deletions":-6}],"sizeInsertions":2738,"sizeDeletions":-282},{"number":"5","revision":"ce3e5d9587e7d88cfcb767eefd9f8656856768be","parents":["217415b79c30c5414f702fe59ef380cdc64b66e0"],"ref":"refs/changes/93/1593/5","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1491858251,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491858324,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1491858324,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491858300,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt.c","type":"MODIFIED","insertions":122,"deletions":-9},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","type":"MODIFIED","insertions":741,"deletions":-20},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_commands.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_device.c","type":"MODIFIED","insertions":24,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","type":"MODIFIED","insertions":487,"deletions":-103},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_interrupts.c","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_logvol.c","type":"MODIFIED","insertions":158,"deletions":-102},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","type":"ADDED","insertions":613,"deletions":0},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_sata.c","type":"ADDED","insertions":160,"deletions":0},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt.h","type":"MODIFIED","insertions":175,"deletions":-30},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_ciss.h","type":"MODIFIED","insertions":11,"deletions":-5},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","type":"MODIFIED","insertions":212,"deletions":-1},{"file":"usr/src/uts/common/sys/scsi/scsi_address.h","type":"MODIFIED","insertions":12,"deletions":0},{"file":"usr/src/uts/intel/smrt/Makefile","type":"MODIFIED","insertions":6,"deletions":-6}],"sizeInsertions":2737,"sizeDeletions":-280},{"number":"6","revision":"d2e47d992aaa5d4532b1bf81e0badd900361433f","parents":["217415b79c30c5414f702fe59ef380cdc64b66e0"],"ref":"refs/changes/93/1593/6","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1491861953,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"SUBM","value":"1","grantedOn":1491864775,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491864546,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1491864546,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491862316,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt.c","type":"MODIFIED","insertions":122,"deletions":-9},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_ciss.c","type":"MODIFIED","insertions":741,"deletions":-20},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_commands.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_device.c","type":"MODIFIED","insertions":24,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_hba.c","type":"MODIFIED","insertions":487,"deletions":-103},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_interrupts.c","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_logvol.c","type":"MODIFIED","insertions":158,"deletions":-102},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_physical.c","type":"ADDED","insertions":613,"deletions":0},{"file":"usr/src/uts/common/io/scsi/adapters/smrt/smrt_sata.c","type":"ADDED","insertions":160,"deletions":0},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt.h","type":"MODIFIED","insertions":175,"deletions":-30},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_ciss.h","type":"MODIFIED","insertions":11,"deletions":-5},{"file":"usr/src/uts/common/sys/scsi/adapters/smrt/smrt_scsi.h","type":"MODIFIED","insertions":212,"deletions":-1},{"file":"usr/src/uts/common/sys/scsi/scsi_address.h","type":"MODIFIED","insertions":12,"deletions":0},{"file":"usr/src/uts/intel/smrt/Makefile","type":"MODIFIED","insertions":6,"deletions":-6}],"sizeInsertions":2737,"sizeDeletions":-280}],"allReviewers":[{"name":"Juraj Lutter","username":"jurajlutter"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}]}