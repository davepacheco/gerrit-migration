{"project":"joyent/illumos-joyent","branch":"master","id":"I4303598fe843fa3070e6d779050c47141c73df9d","number":"5295","subject":"OS-6795 illumos-joyent build tools depend on platform Perl Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Approved by: Robert Mustacchi \u003crm@joyent.com\u003e","owner":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"url":"https://cr.joyent.us/5295","commitMessage":"OS-6795 illumos-joyent build tools depend on platform Perl\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nApproved by: Robert Mustacchi \u003crm@joyent.com\u003e\n","createdOn":1546252118,"lastUpdated":1546949257,"open":false,"status":"MERGED","comments":[{"timestamp":1546252118,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 1."},{"timestamp":1546436173,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1546527978,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1546528631,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1546604020,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\nAlex: please take a look at the usr/src/cmd/Makefile change - rm was concerned that removing the translations in auditrecord output may possible break some BSM audit usage you have?"},{"timestamp":1546625355,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 1:\n\nThe auditrecord tool as I understand it is a user-facing discovery tool, which is why you won\u0027t find it used in automated scripts or elsewhere in the gate (it\u0027s meant for people). Despite it being marked as \"obselete\" in the man page, it\u0027s still the only tool we have that\u0027s good at listing and searching audit IDs in a readable format.\n\nI am concerned that completely removing auditrecord without any replacement like this will end up being like the removal of the user-facing RBAC tools, which rendered that subsystem undiscoverable and nigh on unuseable for new users who didn\u0027t already understand how it works (and/or were willing to translate from online Oracle documentation for Sol10 and fill in the blanks)."},{"timestamp":1546625678,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\nI\u0027m not removing auditrecord, just its translations."},{"timestamp":1546626210,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 1:\n\n(1 comment)\n\nAh, sorry, my mistake, misreading the Makefile change. Ok, losing the translations is not as big a deal as losing the whole tool. It is a user-facing learning tool though so it\u0027s exactly where we would like to have translations (assuming we still want to have them at all in the OS?). I think I\u0027d be ok with a follow-up bug to try to find a way to fix up the translations later."},{"timestamp":1546872128,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 2."},{"timestamp":1546872828,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1546908069,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2: Code-Review+1\n\nCan we get a bug open to try and some day actually fix the things we\u0027re disabling?"},{"timestamp":1546908430,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 2:\n\nalexw asked for the same: OS-7482\n\nIf you have time, could please look at IA on this last wad too?"},{"timestamp":1546908600,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1546908623,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2:\n\nPlease note that if the minimum PI is changed to something with this, then we will be able to build older platforms."},{"timestamp":1546944771,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1546944789,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 4: Patch Set 3 was rebased"},{"timestamp":1546949257,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by John Levon"}],"currentPatchSet":{"number":"4","revision":"49d300ece9402ddb9bd9c6f84cd2699597d0467d","parents":["1681fea05e271e6e0ec1aa68bf37b34cbcf5854e"],"ref":"refs/changes/95/5295/4","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1546944789,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1546872828,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1546908069,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1546908600,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1546949257,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":0,"deletions":-22},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/auditrecord/Makefile","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"usr/src/cmd/dtrace/demo/Makefile","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"usr/src/cmd/dtrace/test/tst/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/libc/Makefile","type":"MODIFIED","insertions":4,"deletions":-2}],"sizeInsertions":24,"sizeDeletions":-35},"patchSets":[{"number":"1","revision":"51182b3447f254910f3084fa163777afe479365f","parents":["c80a96f941e57993b407b02fe55a9f725a070282"],"ref":"refs/changes/95/5295/1","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1546252118,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1546436173,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"comments":[{"file":"manifest","line":5543,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is it safe to remove these fm tools? Are we sure we won\u0027t need them?"},{"file":"manifest","line":5543,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I grepped all our sources and didn\u0027t find any non-build-time references, as well as checking with Rob Johnston on this."},{"file":"usr/src/cmd/Makefile","line":524,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Did we check that we don\u0027t actually use any of the auditrecord related materials as part of our operational use? As we do use BSM auditing, will not building that impact that?"},{"file":"usr/src/cmd/Makefile","line":524,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"It\u0027s literally only the message catalogs we skip, auditrecord itself still seems to be functional. Having said that if you have some specific testing / investigation you\u0027d like done outside of spot-checking auditrecord itself, happy to do so."},{"file":"usr/src/cmd/Makefile","line":515,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Maybe just make this comment say \"leave out auditrecord\u0027s messages\""}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":0,"deletions":-22},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"usr/src/cmd/auditrecord/Makefile","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"usr/src/cmd/dtrace/demo/Makefile","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"usr/src/cmd/dtrace/test/tst/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/libc/Makefile","type":"MODIFIED","insertions":4,"deletions":-2}],"sizeInsertions":24,"sizeDeletions":-36},{"number":"2","revision":"9b55c6d15fb822f9525231ab214af23e07eb3c34","parents":["c80a96f941e57993b407b02fe55a9f725a070282"],"ref":"refs/changes/95/5295/2","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1546872128,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1546908069,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1546908600,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1546872828,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":0,"deletions":-22},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":7,"deletions":-4},{"file":"usr/src/cmd/auditrecord/Makefile","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"usr/src/cmd/dtrace/demo/Makefile","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"usr/src/cmd/dtrace/test/tst/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/libc/Makefile","type":"MODIFIED","insertions":4,"deletions":-2}],"sizeInsertions":25,"sizeDeletions":-36},{"number":"3","revision":"4303598fe843fa3070e6d779050c47141c73df9d","parents":["c80a96f941e57993b407b02fe55a9f725a070282"],"ref":"refs/changes/95/5295/3","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1546944771,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1546908069,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1546908600,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1546872828,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":0,"deletions":-22},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":7,"deletions":-4},{"file":"usr/src/cmd/auditrecord/Makefile","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"usr/src/cmd/dtrace/demo/Makefile","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"usr/src/cmd/dtrace/test/tst/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/libc/Makefile","type":"MODIFIED","insertions":4,"deletions":-2}],"sizeInsertions":25,"sizeDeletions":-36},{"number":"4","revision":"49d300ece9402ddb9bd9c6f84cd2699597d0467d","parents":["1681fea05e271e6e0ec1aa68bf37b34cbcf5854e"],"ref":"refs/changes/95/5295/4","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1546944789,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1546908069,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1546908600,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1546872828,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1546949257,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":0,"deletions":-22},{"file":"usr/src/cmd/Makefile","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/cmd/auditrecord/Makefile","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"usr/src/cmd/dtrace/demo/Makefile","type":"MODIFIED","insertions":6,"deletions":-4},{"file":"usr/src/cmd/dtrace/test/tst/Makefile.com","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/libc/Makefile","type":"MODIFIED","insertions":4,"deletions":-2}],"sizeInsertions":24,"sizeDeletions":-35}],"allReviewers":[{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}]}