{"project":"joyent/illumos-joyent","branch":"vpc","id":"I179ab6e4b67dfcc72b9026e644a74382d2200060","number":"4119","subject":"Version bump SVP to 2","owner":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"url":"https://cr.joyent.us/4119","commitMessage":"Version bump SVP to 2\n","createdOn":1528126446,"lastUpdated":1528384375,"open":false,"status":"MERGED","comments":[{"timestamp":1528126446,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 1."},{"timestamp":1528126519,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 1:\n\nNOTE:  Requested reviewers based on SVP protocol knowledge, not because they must."},{"timestamp":1528131298,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 1:\n\n(3 comments)"},{"timestamp":1528131750,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 1:\n\n(4 comments)\n\nWill look more closely at the read-failure case."},{"timestamp":1528137193,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 2."},{"timestamp":1528142584,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1528142633,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 2:\n\n(3 comments)"},{"timestamp":1528209093,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 3."},{"timestamp":1528211059,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 4."},{"timestamp":1528214809,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1528221423,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4:\n\n(7 comments)\n\nI like hte general idea that\u0027s being expressed here, but I think that it should be implemented in a way that fits better into the design of the system. In particular, it should be a concrete part of the state machine so that way it can leverage all of the other logic that exists."},{"timestamp":1528223861,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 4:\n\n(10 comments)\n\nSo expect a small change that addresses your comment-clarifying points, and then a larger change that\u0027ll introduce a new version-check state between connection-established and open-for-business/active."},{"timestamp":1528226559,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 5."},{"timestamp":1528297976,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 6."},{"timestamp":1528304386,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1528305374,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1528305722,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1528305961,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 7."},{"timestamp":1528306087,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 7: Code-Review+1"},{"timestamp":1528310472,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 7:\n\nTested by deploying on kebecloud\u0027s 2nd CN in the midst of an otherwise v1 environment.  Packets all seem to show v1 after the first ping.\n\nStill needs some v2 portolan testing as well, but that may not be a vpc-branch blocker."},{"timestamp":1528311178,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 8: Patch Set 7 was rebased."},{"timestamp":1528328339,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 9."},{"timestamp":1528381556,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 9: Code-Review+1"},{"timestamp":1528384350,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 9: Integration-Approval+1"},{"timestamp":1528384375,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Dan McDonald"}],"currentPatchSet":{"number":"9","revision":"179ab6e4b67dfcc72b9026e644a74382d2200060","parents":["5693caead67890b06340b4ee98c2e00f9534f20c"],"ref":"refs/changes/19/4119/9","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1528328339,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528381556,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1528384350,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"SUBM","value":"1","grantedOn":1528384374,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp.c","type":"MODIFIED","insertions":18,"deletions":-14},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp.h","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","type":"MODIFIED","insertions":168,"deletions":-57},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_prot.h","type":"MODIFIED","insertions":20,"deletions":-7},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_remote.c","type":"MODIFIED","insertions":42,"deletions":-8}],"sizeInsertions":254,"sizeDeletions":-88},"patchSets":[{"number":"1","revision":"481a3e5f4e5ef76644b95a2914b6bb8f9876688f","parents":["8dc4152bb52f04c50e72e72feb21ec7bb3b59d1a"],"ref":"refs/changes/19/4119/1","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1528126446,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":195,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Should we at least handle EINTR here by retrying?  I can see if we hit EAGAIN it might be reasonable to just skip the ping or sleep a bit and retry."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":195,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"The SVP_CE_SOCKET return will make the caller close the connection and retry after a backoff, which was why I initially didn\u0027t loop-around the write."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":211,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Might we want it to distinguish between EINTR and EAGAIN?  E.g. EINTR retries without bumping ntries or sleeping, while EAGAIN would prompt the sleep/bump ntries ?"},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":211,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Good idea.  I had distinct ntries handling here when I thought v1 Portolan was broken, but maybe I should anyway, though I\u0027m not sure, again, if either is worth distinguishing, given this also indicates a backoff."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":371,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"See, this is where I cope with write() (and read()) failures."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":490,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Does this mean we will fail if an older version of portolan responds, or is this erring if the version of the connection changes?"},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":490,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"This is why we store version in the *connection* state (vs. the *remote* state).  Only way the version should change is if portolan itself changes, which should mean a new connection."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","type":"MODIFIED","insertions":95,"deletions":-4},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_prot.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_remote.c","type":"MODIFIED","insertions":31,"deletions":-6}],"sizeInsertions":134,"sizeDeletions":-13},{"number":"2","revision":"0ebde971a9140b4e9dc52850a8768e0e6d65a48c","parents":["8dc4152bb52f04c50e72e72feb21ec7bb3b59d1a"],"ref":"refs/changes/19/4119/2","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1528137193,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":197,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Re: previous comments, it might be good to note that a failure here can cause a retry -- that way it doesn\u0027t look like an EINTR will foul things up."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":197,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Will clarify in the ret \u003d\u003d -1 comments."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":335,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"wording?"},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":335,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"\u0027... with svp_conn_connect() if connect() returns successfully\u0027 ?"},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":335,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Ahhh, yes.  Will cleanup."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":341,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"nit: err could be moved inside the if (pe !\u003d NULL) statement now."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":341,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Will do."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","type":"MODIFIED","insertions":117,"deletions":-26},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_prot.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_remote.c","type":"MODIFIED","insertions":31,"deletions":-6}],"sizeInsertions":156,"sizeDeletions":-35},{"number":"3","revision":"f171cae7620d4327ae72314f17a97af4f976a14d","parents":["980d19118a835a473ef7853d2bfb4a7a2d8c1607"],"ref":"refs/changes/19/4119/3","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1528209093,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","type":"MODIFIED","insertions":131,"deletions":-33},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_prot.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_remote.c","type":"MODIFIED","insertions":31,"deletions":-6}],"sizeInsertions":170,"sizeDeletions":-42},{"number":"4","revision":"680a5479e54dc2f28acce53e67be05c97fc90755","parents":["980d19118a835a473ef7853d2bfb4a7a2d8c1607"],"ref":"refs/changes/19/4119/4","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1528211059,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528214809,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"comments":[{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp.h","line":170,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This should be unsigned. Versions should never be negative."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp.h","line":170,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Will fix."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":182,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Let\u0027s not reinvent the I/O path here at all. This is causing a lot of bad assumptions like that a write will get all the data that we\u0027ve worked hard to eliminate in the rest of the daemon. Instead, this should really be approached from the idea of adding another state in the state machine where we perform and drive the version check. That will allow get us out of hardcoding additional checks for liveness and allow the rest of the normal I/O handling to operate.\n\nI realize that it\u0027s probably a little bit simpler to try and inject a non-async operation here, but it really looks out of place in the rest of the design. Especially since you\u0027re reimplementing all of the aspects that we tried to handle."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":182,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"My first thought was to avoid adding another state to the state machine, since version-awareness means you aren\u0027t fully connected until you know the peer version.\n\nIt wasn\u0027t immediately clear to me how to add new states to the machine, which was why I went down this path.  I can back it out and add a proper state transition, but I may be asking more questions as I do so (just warning you)."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":232,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Shouldn\u0027t we distinguish between these different cases? Generally we\u0027d return SVP_RA_ERROR for those cases."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":232,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Folding this all into the state machine should also leverage the protocol-parsing here too, right? If that\u0027s true, the SVP_RA_ERROR should fall out of that (and if not, I guess it needs to?)."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":386,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"sc_errno should be set to zero unless we actually got an errno set to us. If you set EPROTONOSUPPORT, that indicates that some amount of code actually got that."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":386,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Okay.  With the state-machine rewrite, this should be easier to address."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_prot.h","line":42,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"The header file should make clear what is in version one and what is in version two. If structures have changed meaning between them then both versions should be clearly defined here."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_prot.h","line":42,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Will fix (and pepper comments)."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_remote.c","line":284,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"You should clarify that this means the version that\u0027s in the request. At least, I think that\u0027s what you mean."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_remote.c","line":284,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Yes, exactly.  Thanks, will fix."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_remote.c","line":312,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This comment needs to be updated to address the issue of the semantics change between which connections can and can\u0027t handle the version that we\u0027re interested in. This makes it a subset of the current connections."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_remote.c","line":312,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Will fix."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","type":"MODIFIED","insertions":132,"deletions":-34},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_prot.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_remote.c","type":"MODIFIED","insertions":31,"deletions":-6}],"sizeInsertions":171,"sizeDeletions":-43},{"number":"5","revision":"a0b5dfc6419f43efd13b6a002c56891ba318554f","parents":["980d19118a835a473ef7853d2bfb4a7a2d8c1607"],"ref":"refs/changes/19/4119/5","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1528226559,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","type":"MODIFIED","insertions":132,"deletions":-34},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_prot.h","type":"MODIFIED","insertions":20,"deletions":-7},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_remote.c","type":"MODIFIED","insertions":36,"deletions":-8}],"sizeInsertions":191,"sizeDeletions":-50},{"number":"6","revision":"dd992ebfe795d006f4a63b98851a2475d28c3b31","parents":["980d19118a835a473ef7853d2bfb4a7a2d8c1607"],"ref":"refs/changes/19/4119/6","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1528297976,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":157,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"It seems like if we get here, sqp will be leaked -- in svp_conn_queue if POLLOUT is not included in the events, it will call svp_event_associate and panic if it fails -- not entirely sure if that\u0027s what we\u0027d want here, but it seems at least something to consider."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":157,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"It won\u0027t be leaked... it\u0027ll be used-after-freed.  So either I dequeue it (I call svp_conn_queue() above, line 152) or lose the umem_free() (below, line 160).  A degraded connection will attempt to retry with the queued connection, so I think losing the umem free might be better."},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","line":157,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Upon further review... dequeuing is probably better, given the state change to SVP_CS_ERROR."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp.c","type":"MODIFIED","insertions":18,"deletions":-14},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp.h","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","type":"MODIFIED","insertions":166,"deletions":-56},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_prot.h","type":"MODIFIED","insertions":20,"deletions":-7},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_remote.c","type":"MODIFIED","insertions":42,"deletions":-8}],"sizeInsertions":252,"sizeDeletions":-87},{"number":"7","revision":"a2ec2b7b681aa8f8f1b47d057c25af9c5745bf6c","parents":["980d19118a835a473ef7853d2bfb4a7a2d8c1607"],"ref":"refs/changes/19/4119/7","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1528305961,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528306087,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp.c","type":"MODIFIED","insertions":18,"deletions":-14},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp.h","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","type":"MODIFIED","insertions":167,"deletions":-56},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_prot.h","type":"MODIFIED","insertions":20,"deletions":-7},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_remote.c","type":"MODIFIED","insertions":42,"deletions":-8}],"sizeInsertions":253,"sizeDeletions":-87},{"number":"8","revision":"0445b6ca40c6bd9f71652a40f32f5641b3acc204","parents":["5693caead67890b06340b4ee98c2e00f9534f20c"],"ref":"refs/changes/19/4119/8","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1528311178,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528306087,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp.c","type":"MODIFIED","insertions":18,"deletions":-14},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp.h","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","type":"MODIFIED","insertions":167,"deletions":-56},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_prot.h","type":"MODIFIED","insertions":20,"deletions":-7},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_remote.c","type":"MODIFIED","insertions":42,"deletions":-8}],"sizeInsertions":253,"sizeDeletions":-87},{"number":"9","revision":"179ab6e4b67dfcc72b9026e644a74382d2200060","parents":["5693caead67890b06340b4ee98c2e00f9534f20c"],"ref":"refs/changes/19/4119/9","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1528328339,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528381556,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1528384350,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"SUBM","value":"1","grantedOn":1528384374,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp.c","type":"MODIFIED","insertions":18,"deletions":-14},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp.h","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_conn.c","type":"MODIFIED","insertions":168,"deletions":-57},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_prot.h","type":"MODIFIED","insertions":20,"deletions":-7},{"file":"usr/src/lib/varpd/svp/common/libvarpd_svp_remote.c","type":"MODIFIED","insertions":42,"deletions":-8}],"sizeInsertions":254,"sizeDeletions":-88}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}]}