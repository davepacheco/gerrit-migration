{"project":"joyent/illumos-joyent","branch":"vpc","id":"I2d5eb70600f78e2e143370890dfd6ca098dd4573","number":"4459","subject":"More lock fixing","owner":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"url":"https://cr.joyent.us/4459","commitMessage":"More lock fixing\n","createdOn":1530282304,"lastUpdated":1530545113,"open":false,"status":"MERGED","comments":[{"timestamp":1530282304,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 1."},{"timestamp":1530282701,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 2."},{"timestamp":1530284154,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 2:\n\n(6 comments)\n\nThe 2nd batch of changes fixed my technical concerns.  The rest are comment-clarification ones."},{"timestamp":1530285505,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 3."},{"timestamp":1530288508,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 3: Code-Review+1\n\nTime to test it..."},{"timestamp":1530545084,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1530545111,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jason King"},{"timestamp":1530545113,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 3:\n\nTested over weekend, no panics now.  One bhyve hang, but it\u0027s *likely* a known problem, or at least a bhyve problem."}],"currentPatchSet":{"number":"3","revision":"2d5eb70600f78e2e143370890dfd6ca098dd4573","parents":["614d64f92fe4953dae3a8b7150b94d4b36dc9e75"],"ref":"refs/changes/59/4459/3","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1530285505,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1530288508,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1530545084,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"SUBM","value":"1","grantedOn":1530545111,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/io/overlay/overlay_target.c","type":"MODIFIED","insertions":60,"deletions":-12}],"sizeInsertions":60,"sizeDeletions":-12},"patchSets":[{"number":"1","revision":"38d03dfd66e0e869c9e653f638daf376cdb39e66","parents":["614d64f92fe4953dae3a8b7150b94d4b36dc9e75"],"ref":"refs/changes/59/4459/1","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1530282304,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/io/overlay/overlay_target.c","line":581,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"More active voice:\n\n   \", it always releases ote_lock.\""},{"file":"usr/src/uts/common/io/overlay/overlay_target.c","line":617,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Does this function ALWAYS drop vl3e-\u003eote_lock now like the above queueing functions?  You need to both mention that here AND guarantee it."},{"file":"usr/src/uts/common/io/overlay/overlay_target.c","line":630,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"vl3e-\u003eote_lock gets dropped here."},{"file":"usr/src/uts/common/io/overlay/overlay_target.c","line":656,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"This drops vl3e-\u003eote_lock... mention this here."},{"file":"usr/src/uts/common/io/overlay/overlay_target.c","line":680,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Add this comment:\n\n/* vl2e-\u003eote_lock gets dropped by the following function. */\n\nAlso, what about vl3e-\u003eote_lock?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/io/overlay/overlay_target.c","type":"MODIFIED","insertions":39,"deletions":-12}],"sizeInsertions":39,"sizeDeletions":-12},{"number":"2","revision":"9d522a2e8e27313931be06bda90e56f3e5968ec1","parents":["614d64f92fe4953dae3a8b7150b94d4b36dc9e75"],"ref":"refs/changes/59/4459/2","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1530282701,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/io/overlay/overlay_target.c","line":679,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Mention vl3e-\u003eote_lock gets dropped."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/io/overlay/overlay_target.c","type":"MODIFIED","insertions":41,"deletions":-12}],"sizeInsertions":41,"sizeDeletions":-12},{"number":"3","revision":"2d5eb70600f78e2e143370890dfd6ca098dd4573","parents":["614d64f92fe4953dae3a8b7150b94d4b36dc9e75"],"ref":"refs/changes/59/4459/3","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1530285505,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"SUBM","value":"1","grantedOn":1530545111,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1530288508,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1530545084,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/io/overlay/overlay_target.c","type":"MODIFIED","insertions":60,"deletions":-12}],"sizeInsertions":60,"sizeDeletions":-12}],"allReviewers":[{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}]}