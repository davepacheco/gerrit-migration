{"project":"joyent/node-artedi","branch":"master","id":"I8cddfa976643824f02e747ea0aec0ce17d139f38","number":"2118","subject":"joyent/node-artedi#3 Support Prometheus-style counters and histograms Reviewed by: Richard Kiene \u003crichard.kiene@joyent.com\u003e Approved by: Richard Kiene \u003crichard.kiene@joyent.com\u003e","owner":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"url":"https://cr.joyent.us/2118","commitMessage":"joyent/node-artedi#3 Support Prometheus-style counters and histograms\nReviewed by: Richard Kiene \u003crichard.kiene@joyent.com\u003e\nApproved by: Richard Kiene \u003crichard.kiene@joyent.com\u003e\n","createdOn":1497648430,"lastUpdated":1500930499,"open":false,"status":"MERGED","comments":[{"timestamp":1497648430,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 1."},{"timestamp":1497648796,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 2."},{"timestamp":1498251077,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n ./node_modules/.bin/json --validate -f package.json\n gmake: ./node_modules/.bin/json: Command not found\n tools/mk/Makefile.targ:184: recipe for target \u0027package.json.jsonchk\u0027 failed\n gmake: *** [package.json.jsonchk] Error 127"},{"timestamp":1498590605,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 3."},{"timestamp":1498785380,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1499731472,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 2:\n\n(26 comments)\n\nBroadly this looks good! Just a few things to polish up I think. I\u0027m going to run this and test it out a bit myself. If all goes well, and your follow up to my comments goes well, I imagine I can CR +1 and IA +1 this."},{"timestamp":1499732618,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1500323020,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 4."},{"timestamp":1500323098,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1500323302,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 4:\n\n(1 comment)\n\nThanks for the review! I think that I\u0027ve addressed all of your questions and comments except for the Makefile and one of the loops (the nextSmallest thing in histogram.js). I have to look more into those.\n\nThis patch also improves the collect() function on the collector by making it async (which was the initial intention, but not implemented that way). The \u0027prometheus()\u0027 functions on child collectors are now private (which was the initial intention, but I mistakenly documented it wrong in two places). Now, the Collector object\u0027s collect() function takes a format string and will call the child collector\u0027s corresponding serialization functions.\n\nThis patch looks big, but most of the changes are in the testing file.\n\nRelatedly, I also updated RFD 99."},{"timestamp":1500326388,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1\n\n(1 comment)\n\nLGTM"},{"timestamp":1500395159,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 5."},{"timestamp":1500395242,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1500395381,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 6."},{"timestamp":1500395469,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1500399607,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 6: Code-Review+1 Integration-Approval+1\n\nLGTM. You may want to give James a little more time to review before integrating this, but otherwise I think we\u0027re there."},{"timestamp":1500662998,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 7."},{"timestamp":1500663174,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1500663209,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 8."},{"timestamp":1500663340,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n fatal: ref HEAD is not a symbolic ref\n deps/javascriptlint/build/install/jsl --nologo --nosummary --conf\u003dtools/jsl.node.conf lib/index.js test/basic.test.js\n /tmp/repo/lib/index.js\n /tmp/repo/test/basic.test.js\n ./node_modules/.bin/json --validate -f package.json node_modules/.bin/json\n deps/jsstyle/jsstyle -f tools/jsstyle.conf lib/index.js test/basic.test.js\n lib/index.js: 8: last line in file is blank\n tools/mk/Makefile.targ:209: recipe for target \u0027check-jsstyle\u0027 failed\n gmake: *** [check-jsstyle] Error 1"},{"timestamp":1500663394,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 9."},{"timestamp":1500663582,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1500920149,"reviewer":{"name":"James Nugent","email":"james@joyent.com","username":"jen20"},"message":"Patch Set 9: Code-Review+1 Integration-Approval+1\n\n(1 comment)\n\nI thought I had already submitted this but apparently not. Since Richard\u0027s review covered everything I had already (with one minor exception), this looks great to me. Certainly one of the nicer metric-capture libraries I\u0027ve seen."},{"timestamp":1500921029,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 10."},{"timestamp":1500921057,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 9:\n\n(1 comment)\n\nThanks for the review, James and Richard. I think we\u0027re ready to merge now."},{"timestamp":1500921101,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1500929939,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Patch Set 10: Code-Review+1 Integration-Approval+1"},{"timestamp":1500930484,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 11: Commit message was updated."},{"timestamp":1500930499,"reviewer":{"name":"James Nugent","email":"james@joyent.com","username":"jen20"},"message":"Patch Set 10: Code-Review+1 Integration-Approval+1"},{"timestamp":1500930499,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Kody A Kantor"}],"currentPatchSet":{"number":"11","revision":"86d7207bf4d172e70cc52132c91670e190dc592d","parents":["23f072afa0517eeeb6e6907f64af17e9830b44c1"],"ref":"refs/changes/18/2118/11","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1500930484,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500921101,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1500929939,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1500929939,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"SUBM","value":"1","grantedOn":1500930499,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":21,"deletions":-20},{"file":"README.adoc","type":"DELETED","insertions":0,"deletions":-31},{"file":"README.md","type":"MODIFIED","insertions":85,"deletions":-9},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/API.md","type":"ADDED","insertions":183,"deletions":0},{"file":"docs/DESIGN.md","type":"ADDED","insertions":458,"deletions":0},{"file":"docs/api.adoc","type":"DELETED","insertions":0,"deletions":-9},{"file":"docs/index.adoc","type":"DELETED","insertions":0,"deletions":-11},{"file":"docs/private_api.md","type":"ADDED","insertions":197,"deletions":0},{"file":"lib/collector.js","type":"ADDED","insertions":247,"deletions":0},{"file":"lib/common.js","type":"ADDED","insertions":16,"deletions":0},{"file":"lib/counter.js","type":"ADDED","insertions":100,"deletions":0},{"file":"lib/gauge.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/histogram.js","type":"ADDED","insertions":328,"deletions":0},{"file":"lib/index.js","type":"DELETED","insertions":0,"deletions":-8},{"file":"lib/metric.js","type":"ADDED","insertions":42,"deletions":0},{"file":"lib/metric_vector.js","type":"ADDED","insertions":162,"deletions":0},{"file":"lib/utils.js","type":"ADDED","insertions":138,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":17,"deletions":-16},{"file":"test/basic.test.js","type":"MODIFIED","insertions":523,"deletions":-2},{"file":"tools/bashstyle","type":"DELETED","insertions":0,"deletions":-164},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":17,"deletions":0},{"file":"tools/jsstyle.conf","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"tools/update-ghdocs","type":"DELETED","insertions":0,"deletions":-50}],"sizeInsertions":2638,"sizeDeletions":-325},"patchSets":[{"number":"1","revision":"24383bb7d6655b06c404f27fc77b609f02263871","parents":["23f072afa0517eeeb6e6907f64af17e9830b44c1"],"ref":"refs/changes/18/2118/1","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1497648430,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"DESIGN.md","type":"ADDED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":16,"deletions":-21},{"file":"README.adoc","type":"DELETED","insertions":0,"deletions":-31},{"file":"README.md","type":"MODIFIED","insertions":11,"deletions":-8},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/api.adoc","type":"DELETED","insertions":0,"deletions":-9},{"file":"docs/index.adoc","type":"DELETED","insertions":0,"deletions":-11},{"file":"lib/collector.js","type":"ADDED","insertions":237,"deletions":0},{"file":"lib/counter.js","type":"ADDED","insertions":101,"deletions":0},{"file":"lib/gauge.js","type":"ADDED","insertions":87,"deletions":0},{"file":"lib/histogram.js","type":"ADDED","insertions":324,"deletions":0},{"file":"lib/index.js","type":"DELETED","insertions":0,"deletions":-8},{"file":"lib/metric.js","type":"ADDED","insertions":42,"deletions":0},{"file":"lib/metric_vector.js","type":"ADDED","insertions":163,"deletions":0},{"file":"lib/utils.js","type":"ADDED","insertions":115,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":16,"deletions":-16},{"file":"test/basic.test.js","type":"MODIFIED","insertions":424,"deletions":-2},{"file":"test/main.js","type":"ADDED","insertions":87,"deletions":0},{"file":"tools/bashstyle","type":"DELETED","insertions":0,"deletions":-164},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":20,"deletions":0},{"file":"tools/jsstyle.conf","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"tools/update-ghdocs","type":"DELETED","insertions":0,"deletions":-50}],"sizeInsertions":1661,"sizeDeletions":-325},{"number":"2","revision":"77017973b64d5db29da366e79240e2e654ba61a4","parents":["23f072afa0517eeeb6e6907f64af17e9830b44c1"],"ref":"refs/changes/18/2118/2","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1497648796,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1498251077,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"DESIGN.md","line":2,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Before this gets CR and IA +1 I think we\u0027ll want to make sure the RFD is considered published and this has been updated with the overview."},{"file":"Makefile","line":72,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"You\u0027ll want a check and check-eslint section like triton-cmon has so that the make-check-bot succeeds. You can steal https://github.com/joyent/triton-cmon/blob/master/Makefile#L96-L107 as an example."},{"file":"README.md","line":2,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Same issue here as the DESIGN.md"},{"file":"lib/collector.js","line":46,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"This has me a bit confused. It looks like the labels property is the only part of the options object that is used, so I\u0027m curious why you\u0027re using mod_assert.optionalObject instead of mod_assert.object.\n\nIt seems like if the consumer is passing an options object, then it should necessarily have the labels property as an object. Otherwise the rest of this code ignores the options object entirely without the consuming code knowing."},{"file":"lib/collector.js","line":64,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"The counter, gauge, and histogram functions have a lot of shared code. I wonder if it is worth trying to minimize the duplication a bit?"},{"file":"lib/collector.js","line":73,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Aside from the string requirement, should we enforce any restrictions on the name of the counter (e.g. no spaces in the name, etc.)?"},{"file":"lib/collector.js","line":81,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"I think you want something like if (!my_counter) or if (my_counter \u003d\u003d\u003d null || my_counter \u003d\u003d\u003d undefined) instead of the single explicit null check. Since this is javascript, there are a few other things that my_counter could be, which are still garbage, but evaluate as false here. Even though this.getCollector *should* return null or a populated object, there is always a case where the object wasn\u0027t populated properly and then this all blows up in a weird way."},{"file":"lib/collector.js","line":117,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Same advice as line 81 here"},{"file":"lib/collector.js","line":153,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Same advice as line 81 here"},{"file":"lib/collector.js","line":189,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"To guard a bit, do you think it might be worth asserting that metricString is actually a string? So we don\u0027t do something weird later on?"},{"file":"lib/collector.js","line":213,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Perhaps assert that collector is an object and that it has the name property on it."},{"file":"lib/counter.js","line":14,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"When it\u0027s a local file not a npm module, I\u0027m not sure the mod_ prefix is valid. I\u0027ve used lib_ for these."},{"file":"lib/counter.js","line":55,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"This might be a confusing error message since you\u0027ve used \u0027labels\u0027 for the optional \u0027pairs\u0027 object."},{"file":"lib/counter.js","line":81,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"I\u0027m not big on putting a technology specific function this deep in the library. If at a later date we supported another technology, would we also have a function for it? What happens if Prometheus (the project) changes names? My preference would be something like a \"format\" function that takes an options object to tell it what to format. I dunno..."},{"file":"lib/gauge.js","line":13,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"lib_metric_vector or just metric_vector since this is a local lib not a NPM module?"},{"file":"lib/gauge.js","line":66,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Same concern about a vendor/project specific name for a function."},{"file":"lib/histogram.js","line":34,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"I wonder if it is worth defining \u0027histogram\u0027, \u0027counter\u0027, \u0027gauge\u0027, in a common.js file or something?"},{"file":"lib/histogram.js","line":67,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Perhaps use mod_jsprim.deepClone() here and add the \u0027le\u0027 property after the clone? That\u0027ll save a few lines and be a bit more concise. If you decide that you like the for loop better, then you\u0027ll at least want to check hasOwnProperty or loop over the value returned from Object.keys()."},{"file":"lib/histogram.js","line":72,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"5 seems pretty magical here. Maybe a variable to define it or a comment to explain it?"},{"file":"lib/histogram.js","line":92,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"This could be bucket \u003c index and be a bit shorter, yeah?"},{"file":"lib/histogram.js","line":93,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Are you missing a break here or is it okay that smaller could be overwritten?"},{"file":"lib/histogram.js","line":156,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Same pedantic nit about using a vendor/project reference/name for a function name."},{"file":"lib/histogram.js","line":157,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Should \u0027callback\u0027 be \u0027cb\u0027 to stay consistent with the rest of the asserts and also to be clear that we\u0027re talking about the cb param if/when the assert fires?"},{"file":"lib/metric_vector.js","line":134,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"another nit about naming it after prometheus."},{"file":"package.json","line":4,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Lets skip the fish thing and make this more generic. I don\u0027t want to give the impression that this is just for manta or behind the scenes Joyent things."},{"file":"package.json","line":23,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"Can we bump this to \u003e\u003d4.x.x or are there things in our stack that haven\u0027t been upgraded?"},{"file":"package.json","line":23,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Good question! There are a number of Manta things that haven\u0027t been upgraded to 4.x.x yet. Muskie (0.10.48), Moray (0.10.24), electric-moray (0.10.48) from a quick look."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"DESIGN.md","type":"ADDED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":16,"deletions":-21},{"file":"README.adoc","type":"DELETED","insertions":0,"deletions":-31},{"file":"README.md","type":"MODIFIED","insertions":11,"deletions":-8},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/api.adoc","type":"DELETED","insertions":0,"deletions":-9},{"file":"docs/index.adoc","type":"DELETED","insertions":0,"deletions":-11},{"file":"lib/collector.js","type":"ADDED","insertions":237,"deletions":0},{"file":"lib/counter.js","type":"ADDED","insertions":101,"deletions":0},{"file":"lib/gauge.js","type":"ADDED","insertions":87,"deletions":0},{"file":"lib/histogram.js","type":"ADDED","insertions":324,"deletions":0},{"file":"lib/index.js","type":"DELETED","insertions":0,"deletions":-8},{"file":"lib/metric.js","type":"ADDED","insertions":42,"deletions":0},{"file":"lib/metric_vector.js","type":"ADDED","insertions":163,"deletions":0},{"file":"lib/utils.js","type":"ADDED","insertions":115,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":16,"deletions":-16},{"file":"test/basic.test.js","type":"MODIFIED","insertions":424,"deletions":-2},{"file":"tools/bashstyle","type":"DELETED","insertions":0,"deletions":-164},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":17,"deletions":0},{"file":"tools/jsstyle.conf","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"tools/update-ghdocs","type":"DELETED","insertions":0,"deletions":-50}],"sizeInsertions":1571,"sizeDeletions":-325},{"number":"3","revision":"eb2719d6b1f19674c786f2ff160628e929e207a3","parents":["23f072afa0517eeeb6e6907f64af17e9830b44c1"],"ref":"refs/changes/18/2118/3","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1498590605,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1498785380,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"Makefile","line":58,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"For this to work with the make check bot, you\u0027ll need to make sure that npm and other necessary tools are installed as a part of make check. I got this to work with this patch...\n\n+# Cherry-pick just the npm modules needed for the eslint check to speed up\n+# `make check` on the CI checker.\n+$(ESLINT): | $(NPM_EXEC)\n+       $(NPM) install \\\n+           eslint@`json -f package.json devDependencies.eslint` \\\n+           eslint-plugin-joyent@`json -f package.json devDependencies.eslint-plugin-joyent`\n+\n+.PHONY: check-eslint\n+check-eslint: | $(ESLINT)\n+       $(ESLINT) -c $(ESLINT_CONF) $(ESLINT_FILES)\n+\n+check:: check-eslint\n+"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"DESIGN.md","type":"ADDED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":21,"deletions":-20},{"file":"README.adoc","type":"DELETED","insertions":0,"deletions":-31},{"file":"README.md","type":"MODIFIED","insertions":11,"deletions":-8},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/api.adoc","type":"DELETED","insertions":0,"deletions":-9},{"file":"docs/index.adoc","type":"DELETED","insertions":0,"deletions":-11},{"file":"lib/collector.js","type":"ADDED","insertions":237,"deletions":0},{"file":"lib/counter.js","type":"ADDED","insertions":101,"deletions":0},{"file":"lib/gauge.js","type":"ADDED","insertions":87,"deletions":0},{"file":"lib/histogram.js","type":"ADDED","insertions":324,"deletions":0},{"file":"lib/index.js","type":"DELETED","insertions":0,"deletions":-8},{"file":"lib/metric.js","type":"ADDED","insertions":42,"deletions":0},{"file":"lib/metric_vector.js","type":"ADDED","insertions":163,"deletions":0},{"file":"lib/utils.js","type":"ADDED","insertions":115,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":16,"deletions":-16},{"file":"test/basic.test.js","type":"MODIFIED","insertions":424,"deletions":-2},{"file":"tools/bashstyle","type":"DELETED","insertions":0,"deletions":-164},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":17,"deletions":0},{"file":"tools/jsstyle.conf","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"tools/update-ghdocs","type":"DELETED","insertions":0,"deletions":-50}],"sizeInsertions":1576,"sizeDeletions":-324},{"number":"4","revision":"b9a45843099a22de2b0b412ff2f17f6ae71a1cfb","parents":["23f072afa0517eeeb6e6907f64af17e9830b44c1"],"ref":"refs/changes/18/2118/4","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1500323020,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500323098,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1500326388,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1500326388,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}}],"comments":[{"file":"package.json","line":10,"reviewer":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},"message":"nit: I prefer fixing packages at a version I know works. Since this is vasync I\u0027m not super concerned, but it is something to think about."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"DESIGN.md","type":"ADDED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":21,"deletions":-20},{"file":"README.adoc","type":"DELETED","insertions":0,"deletions":-31},{"file":"README.md","type":"MODIFIED","insertions":11,"deletions":-8},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/api.adoc","type":"DELETED","insertions":0,"deletions":-9},{"file":"docs/index.adoc","type":"DELETED","insertions":0,"deletions":-11},{"file":"lib/collector.js","type":"ADDED","insertions":242,"deletions":0},{"file":"lib/common.js","type":"ADDED","insertions":16,"deletions":0},{"file":"lib/counter.js","type":"ADDED","insertions":102,"deletions":0},{"file":"lib/gauge.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/histogram.js","type":"ADDED","insertions":326,"deletions":0},{"file":"lib/index.js","type":"DELETED","insertions":0,"deletions":-8},{"file":"lib/metric.js","type":"ADDED","insertions":42,"deletions":0},{"file":"lib/metric_vector.js","type":"ADDED","insertions":162,"deletions":0},{"file":"lib/utils.js","type":"ADDED","insertions":115,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":17,"deletions":-16},{"file":"test/basic.test.js","type":"MODIFIED","insertions":495,"deletions":-2},{"file":"tools/bashstyle","type":"DELETED","insertions":0,"deletions":-164},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":17,"deletions":0},{"file":"tools/jsstyle.conf","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"tools/update-ghdocs","type":"DELETED","insertions":0,"deletions":-50}],"sizeInsertions":1672,"sizeDeletions":-324},{"number":"5","revision":"6630a9264246c1f4ef130429dcd24fea5233f513","parents":["23f072afa0517eeeb6e6907f64af17e9830b44c1"],"ref":"refs/changes/18/2118/5","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1500395159,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500395242,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"DESIGN.md","type":"ADDED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":21,"deletions":-20},{"file":"README.adoc","type":"DELETED","insertions":0,"deletions":-31},{"file":"README.md","type":"MODIFIED","insertions":11,"deletions":-8},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/api.adoc","type":"DELETED","insertions":0,"deletions":-9},{"file":"docs/index.adoc","type":"DELETED","insertions":0,"deletions":-11},{"file":"lib/collector.js","type":"ADDED","insertions":247,"deletions":0},{"file":"lib/common.js","type":"ADDED","insertions":16,"deletions":0},{"file":"lib/counter.js","type":"ADDED","insertions":102,"deletions":0},{"file":"lib/gauge.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/histogram.js","type":"ADDED","insertions":328,"deletions":0},{"file":"lib/index.js","type":"DELETED","insertions":0,"deletions":-8},{"file":"lib/metric.js","type":"ADDED","insertions":42,"deletions":0},{"file":"lib/metric_vector.js","type":"ADDED","insertions":162,"deletions":0},{"file":"lib/utils.js","type":"ADDED","insertions":138,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":17,"deletions":-16},{"file":"test/basic.test.js","type":"MODIFIED","insertions":523,"deletions":-2},{"file":"tools/bashstyle","type":"DELETED","insertions":0,"deletions":-164},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":17,"deletions":0},{"file":"tools/jsstyle.conf","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"tools/update-ghdocs","type":"DELETED","insertions":0,"deletions":-50}],"sizeInsertions":1730,"sizeDeletions":-324},{"number":"6","revision":"248f4cf5bb99854ba171eb6204a586d3c5df57a4","parents":["23f072afa0517eeeb6e6907f64af17e9830b44c1"],"ref":"refs/changes/18/2118/6","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1500395381,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500395469,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1500399607,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1500399607,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"DESIGN.md","type":"ADDED","insertions":2,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":21,"deletions":-20},{"file":"README.adoc","type":"DELETED","insertions":0,"deletions":-31},{"file":"README.md","type":"MODIFIED","insertions":11,"deletions":-8},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/api.adoc","type":"DELETED","insertions":0,"deletions":-9},{"file":"docs/index.adoc","type":"DELETED","insertions":0,"deletions":-11},{"file":"lib/collector.js","type":"ADDED","insertions":247,"deletions":0},{"file":"lib/common.js","type":"ADDED","insertions":16,"deletions":0},{"file":"lib/counter.js","type":"ADDED","insertions":102,"deletions":0},{"file":"lib/gauge.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/histogram.js","type":"ADDED","insertions":328,"deletions":0},{"file":"lib/index.js","type":"DELETED","insertions":0,"deletions":-8},{"file":"lib/metric.js","type":"ADDED","insertions":42,"deletions":0},{"file":"lib/metric_vector.js","type":"ADDED","insertions":162,"deletions":0},{"file":"lib/utils.js","type":"ADDED","insertions":138,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":17,"deletions":-16},{"file":"test/basic.test.js","type":"MODIFIED","insertions":523,"deletions":-2},{"file":"tools/bashstyle","type":"DELETED","insertions":0,"deletions":-164},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":17,"deletions":0},{"file":"tools/jsstyle.conf","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"tools/update-ghdocs","type":"DELETED","insertions":0,"deletions":-50}],"sizeInsertions":1730,"sizeDeletions":-324},{"number":"7","revision":"d2d7940e33196adc3e4116d61c4d012be9eee1fd","parents":["23f072afa0517eeeb6e6907f64af17e9830b44c1"],"ref":"refs/changes/18/2118/7","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1500662998,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500663174,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":21,"deletions":-20},{"file":"README.adoc","type":"DELETED","insertions":0,"deletions":-31},{"file":"README.md","type":"MODIFIED","insertions":85,"deletions":-9},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/API.md","type":"ADDED","insertions":183,"deletions":0},{"file":"docs/DESIGN.md","type":"ADDED","insertions":458,"deletions":0},{"file":"docs/api.adoc","type":"DELETED","insertions":0,"deletions":-9},{"file":"docs/index.adoc","type":"DELETED","insertions":0,"deletions":-11},{"file":"docs/private_api.md","type":"ADDED","insertions":197,"deletions":0},{"file":"lib/collector.js","type":"ADDED","insertions":247,"deletions":0},{"file":"lib/common.js","type":"ADDED","insertions":16,"deletions":0},{"file":"lib/counter.js","type":"ADDED","insertions":102,"deletions":0},{"file":"lib/gauge.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/histogram.js","type":"ADDED","insertions":328,"deletions":0},{"file":"lib/index.js","type":"DELETED","insertions":0,"deletions":-8},{"file":"lib/metric.js","type":"ADDED","insertions":42,"deletions":0},{"file":"lib/metric_vector.js","type":"ADDED","insertions":162,"deletions":0},{"file":"lib/utils.js","type":"ADDED","insertions":138,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":17,"deletions":-16},{"file":"test/basic.test.js","type":"MODIFIED","insertions":523,"deletions":-2},{"file":"tools/bashstyle","type":"DELETED","insertions":0,"deletions":-164},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":17,"deletions":0},{"file":"tools/jsstyle.conf","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"tools/update-ghdocs","type":"DELETED","insertions":0,"deletions":-50}],"sizeInsertions":2640,"sizeDeletions":-325},{"number":"8","revision":"4cd5d4d08580309480f878ff1cdae703947a75be","parents":["23f072afa0517eeeb6e6907f64af17e9830b44c1"],"ref":"refs/changes/18/2118/8","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1500663209,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1500663340,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":85,"deletions":-9}],"sizeInsertions":85,"sizeDeletions":-9},{"number":"9","revision":"9aecbbca0996523aece96967f2d2b2ca2de2686b","parents":["23f072afa0517eeeb6e6907f64af17e9830b44c1"],"ref":"refs/changes/18/2118/9","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1500663394,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500663582,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1500920149,"by":{"name":"James Nugent","email":"james@joyent.com","username":"jen20"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1500920149,"by":{"name":"James Nugent","email":"james@joyent.com","username":"jen20"}}],"comments":[{"file":"lib/counter.js","line":32,"reviewer":{"name":"James Nugent","email":"james@joyent.com","username":"jen20"},"message":"It\u0027s a little unclear whether this is intended to be a description of what the following statement does (though that appears to just be an assignment) vs instruction for the library consumer?"},{"file":"lib/counter.js","line":32,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Ah, nice catch. This is leftover from a (much) earlier revision. I\u0027ve since changed the way names are created, but apparently neglected to remove this comment. Yes, names are now just assignment operations. Previously they would be constructed by concatenating three different optional/required fields. Thanks for catching this!"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":21,"deletions":-20},{"file":"README.adoc","type":"DELETED","insertions":0,"deletions":-31},{"file":"README.md","type":"MODIFIED","insertions":85,"deletions":-9},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/API.md","type":"ADDED","insertions":183,"deletions":0},{"file":"docs/DESIGN.md","type":"ADDED","insertions":458,"deletions":0},{"file":"docs/api.adoc","type":"DELETED","insertions":0,"deletions":-9},{"file":"docs/index.adoc","type":"DELETED","insertions":0,"deletions":-11},{"file":"docs/private_api.md","type":"ADDED","insertions":197,"deletions":0},{"file":"lib/collector.js","type":"ADDED","insertions":247,"deletions":0},{"file":"lib/common.js","type":"ADDED","insertions":16,"deletions":0},{"file":"lib/counter.js","type":"ADDED","insertions":102,"deletions":0},{"file":"lib/gauge.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/histogram.js","type":"ADDED","insertions":328,"deletions":0},{"file":"lib/index.js","type":"DELETED","insertions":0,"deletions":-8},{"file":"lib/metric.js","type":"ADDED","insertions":42,"deletions":0},{"file":"lib/metric_vector.js","type":"ADDED","insertions":162,"deletions":0},{"file":"lib/utils.js","type":"ADDED","insertions":138,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":17,"deletions":-16},{"file":"test/basic.test.js","type":"MODIFIED","insertions":523,"deletions":-2},{"file":"tools/bashstyle","type":"DELETED","insertions":0,"deletions":-164},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":17,"deletions":0},{"file":"tools/jsstyle.conf","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"tools/update-ghdocs","type":"DELETED","insertions":0,"deletions":-50}],"sizeInsertions":2640,"sizeDeletions":-325},{"number":"10","revision":"8cddfa976643824f02e747ea0aec0ce17d139f38","parents":["23f072afa0517eeeb6e6907f64af17e9830b44c1"],"ref":"refs/changes/18/2118/10","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1500921029,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500921101,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1500929939,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1500929939,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1500930499,"by":{"name":"James Nugent","email":"james@joyent.com","username":"jen20"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1500930499,"by":{"name":"James Nugent","email":"james@joyent.com","username":"jen20"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":21,"deletions":-20},{"file":"README.adoc","type":"DELETED","insertions":0,"deletions":-31},{"file":"README.md","type":"MODIFIED","insertions":85,"deletions":-9},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/API.md","type":"ADDED","insertions":183,"deletions":0},{"file":"docs/DESIGN.md","type":"ADDED","insertions":458,"deletions":0},{"file":"docs/api.adoc","type":"DELETED","insertions":0,"deletions":-9},{"file":"docs/index.adoc","type":"DELETED","insertions":0,"deletions":-11},{"file":"docs/private_api.md","type":"ADDED","insertions":197,"deletions":0},{"file":"lib/collector.js","type":"ADDED","insertions":247,"deletions":0},{"file":"lib/common.js","type":"ADDED","insertions":16,"deletions":0},{"file":"lib/counter.js","type":"ADDED","insertions":100,"deletions":0},{"file":"lib/gauge.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/histogram.js","type":"ADDED","insertions":328,"deletions":0},{"file":"lib/index.js","type":"DELETED","insertions":0,"deletions":-8},{"file":"lib/metric.js","type":"ADDED","insertions":42,"deletions":0},{"file":"lib/metric_vector.js","type":"ADDED","insertions":162,"deletions":0},{"file":"lib/utils.js","type":"ADDED","insertions":138,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":17,"deletions":-16},{"file":"test/basic.test.js","type":"MODIFIED","insertions":523,"deletions":-2},{"file":"tools/bashstyle","type":"DELETED","insertions":0,"deletions":-164},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":17,"deletions":0},{"file":"tools/jsstyle.conf","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"tools/update-ghdocs","type":"DELETED","insertions":0,"deletions":-50}],"sizeInsertions":2638,"sizeDeletions":-325},{"number":"11","revision":"86d7207bf4d172e70cc52132c91670e190dc592d","parents":["23f072afa0517eeeb6e6907f64af17e9830b44c1"],"ref":"refs/changes/18/2118/11","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1500930484,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1500921101,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1500929939,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1500929939,"by":{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"}},{"type":"SUBM","value":"1","grantedOn":1500930499,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":21,"deletions":-20},{"file":"README.adoc","type":"DELETED","insertions":0,"deletions":-31},{"file":"README.md","type":"MODIFIED","insertions":85,"deletions":-9},{"file":"deps/restdown","type":"ADDED","insertions":1,"deletions":0},{"file":"docs/API.md","type":"ADDED","insertions":183,"deletions":0},{"file":"docs/DESIGN.md","type":"ADDED","insertions":458,"deletions":0},{"file":"docs/api.adoc","type":"DELETED","insertions":0,"deletions":-9},{"file":"docs/index.adoc","type":"DELETED","insertions":0,"deletions":-11},{"file":"docs/private_api.md","type":"ADDED","insertions":197,"deletions":0},{"file":"lib/collector.js","type":"ADDED","insertions":247,"deletions":0},{"file":"lib/common.js","type":"ADDED","insertions":16,"deletions":0},{"file":"lib/counter.js","type":"ADDED","insertions":100,"deletions":0},{"file":"lib/gauge.js","type":"ADDED","insertions":88,"deletions":0},{"file":"lib/histogram.js","type":"ADDED","insertions":328,"deletions":0},{"file":"lib/index.js","type":"DELETED","insertions":0,"deletions":-8},{"file":"lib/metric.js","type":"ADDED","insertions":42,"deletions":0},{"file":"lib/metric_vector.js","type":"ADDED","insertions":162,"deletions":0},{"file":"lib/utils.js","type":"ADDED","insertions":138,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":17,"deletions":-16},{"file":"test/basic.test.js","type":"MODIFIED","insertions":523,"deletions":-2},{"file":"tools/bashstyle","type":"DELETED","insertions":0,"deletions":-164},{"file":"tools/eslint.node.conf","type":"ADDED","insertions":17,"deletions":0},{"file":"tools/jsstyle.conf","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"tools/update-ghdocs","type":"DELETED","insertions":0,"deletions":-50}],"sizeInsertions":2638,"sizeDeletions":-325}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},{"name":"James Nugent","email":"james@joyent.com","username":"jen20"},{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}]}