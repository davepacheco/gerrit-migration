{"project":"joyent/node-cmdutil","branch":"master","id":"Icf676c0cd8bfa4a18a695f5cfa2021ced4c4c40d","number":"186","subject":"joyent/node-cmdutil#2 add function for prompting user for confirmation Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Reviewed by: Alex Wilson \u003calex.wilson@joyent.com\u003e Approved by: Robert Mustacchi \u003crm@joyent.com\u003e","owner":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"url":"https://cr.joyent.us/186","commitMessage":"joyent/node-cmdutil#2 add function for prompting user for confirmation\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nReviewed by: Alex Wilson \u003calex.wilson@joyent.com\u003e\nApproved by: Robert Mustacchi \u003crm@joyent.com\u003e\n","createdOn":1470092267,"lastUpdated":1470160005,"open":false,"status":"MERGED","comments":[{"timestamp":1470092267,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 1."},{"timestamp":1470092275,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n\"make check\" exited with status 2\n\n jsl --nologo --nosummary --conf\u003dtools/jsl.node.conf lib/cmdutil.js examples/usage-warn.js examples/warn.js examples/usage.js examples/fail-error.js examples/fail-printflike.js examples/fail-status.js examples/exitOnEpipe.js examples/fail-verror.js examples/confirm.js\n gmake: jsl: Command not found\n Makefile.targ:196: recipe for target \u0027check-jsl-node\u0027 failed\n gmake: *** [check-jsl-node] Error 127"},{"timestamp":1470094199,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1: Code-Review+1\n\n(2 comments)"},{"timestamp":1470095466,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 2."},{"timestamp":1470095540,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 3."},{"timestamp":1470095645,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1470095733,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing-1\n\n\"make check\" exited with status 2\n\n jsl --nologo --nosummary --conf\u003dtools/jsl.node.conf lib/cmdutil.js examples/fail-printflike.js examples/confirm.js examples/usage.js examples/fail-status.js examples/fail-error.js examples/warn.js examples/fail-verror.js examples/exitOnEpipe.js examples/usage-warn.js\n gmake: jsl: Command not found\n Makefile.targ:196: recipe for target \u0027check-jsl-node\u0027 failed\n gmake: *** [check-jsl-node] Error 127"},{"timestamp":1470096559,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: -CI-Testing"},{"timestamp":1470097250,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1470098385,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 4."},{"timestamp":1470098388,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1470157142,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 5."},{"timestamp":1470157146,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1470157162,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 5:\n\nI\u0027ve posted an updated patchset based on feedback from Alex."},{"timestamp":1470157316,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1470157637,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 5: Code-Review+1\n\n(1 comment)\n\nI have some minor feedback in terms of encoding EOL. But I don\u0027t feel it\u0027s too important one way or the other."},{"timestamp":1470158058,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 6."},{"timestamp":1470158062,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1470159623,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1470159691,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1470159795,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1470159893,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 6: Integration-Approval+1"},{"timestamp":1470159971,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 7: Commit message was updated."},{"timestamp":1470160005,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by David Pacheco"}],"currentPatchSet":{"number":"7","revision":"e0828478cc3a26e3360a10f3de81e376f2e69aee","parents":["67d5be5e4bb3ba43f5f43a8862c0c9052280bd78"],"ref":"refs/changes/86/186/7","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1470159971,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1470158062,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470159691,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470159795,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470159893,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1470160005,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"CHANGES.md","type":"ADDED","insertions":9,"deletions":0},{"file":"LICENSE","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":30,"deletions":-4},{"file":"examples/confirm.js","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/cmdutil.js","type":"MODIFIED","insertions":79,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/tst.confirm.sh","type":"ADDED","insertions":36,"deletions":0}],"sizeInsertions":165,"sizeDeletions":-6},"patchSets":[{"number":"1","revision":"5066aa632344afc1c1f06d74de6d1da7ca6330f5","parents":["67d5be5e4bb3ba43f5f43a8862c0c9052280bd78"],"ref":"refs/changes/86/186/1","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1470092267,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470094199,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1470092275,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"README.md","line":33,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"This is no longer correct now that confirm() can return an operational error."},{"file":"README.md","line":33,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I spent some time modifying this documentation before giving up and deciding that it\u0027s not worth allowing confirm() to emit operational errors.  I\u0027ve updated the documentation accordingly.  (The only error that it used to emit was EOF, which was pretty nitty anyway and can reasonably be treated as a negative response.  If we decide to handle future errors in the future, people can opt into that with either a separate function or additional arguments requesting that behavior.)"},{"file":"README.md","line":378,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"It might also be worth calling out that enter by itself will count as a \"no\"."},{"file":"README.md","line":378,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"ADDED","insertions":9,"deletions":0},{"file":"LICENSE","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":22,"deletions":0},{"file":"examples/confirm.js","type":"ADDED","insertions":13,"deletions":0},{"file":"lib/cmdutil.js","type":"MODIFIED","insertions":90,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/tst.confirm.sh","type":"ADDED","insertions":36,"deletions":0}],"sizeInsertions":172,"sizeDeletions":-2},{"number":"2","revision":"82cd102392c916aca8e185b1cdb38e057e4ba2c2","parents":["67d5be5e4bb3ba43f5f43a8862c0c9052280bd78"],"ref":"refs/changes/86/186/2","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1470095466,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"ADDED","insertions":9,"deletions":0},{"file":"LICENSE","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":27,"deletions":-4},{"file":"examples/confirm.js","type":"ADDED","insertions":13,"deletions":0},{"file":"lib/cmdutil.js","type":"MODIFIED","insertions":78,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/tst.confirm.sh","type":"ADDED","insertions":36,"deletions":0}],"sizeInsertions":165,"sizeDeletions":-6},{"number":"3","revision":"a0daf69dcc691a7b1db8f4a75dfa6765d98498f5","parents":["67d5be5e4bb3ba43f5f43a8862c0c9052280bd78"],"ref":"refs/changes/86/186/3","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1470095540,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1470097250,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"ADDED","insertions":9,"deletions":0},{"file":"LICENSE","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":28,"deletions":-4},{"file":"examples/confirm.js","type":"ADDED","insertions":13,"deletions":0},{"file":"lib/cmdutil.js","type":"MODIFIED","insertions":78,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/tst.confirm.sh","type":"ADDED","insertions":36,"deletions":0}],"sizeInsertions":166,"sizeDeletions":-6},{"number":"4","revision":"59f0bbeae6920cd41e994af8a19c4caa924e2332","parents":["67d5be5e4bb3ba43f5f43a8862c0c9052280bd78"],"ref":"refs/changes/86/186/4","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1470098385,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1470098388,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/cmdutil.js","line":180,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I think we may want to use os.EOL rather than just encode \u0027\\n\u0027."},{"file":"lib/cmdutil.js","line":180,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"ADDED","insertions":9,"deletions":0},{"file":"LICENSE","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":28,"deletions":-4},{"file":"examples/confirm.js","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/cmdutil.js","type":"MODIFIED","insertions":78,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/tst.confirm.sh","type":"ADDED","insertions":36,"deletions":0}],"sizeInsertions":162,"sizeDeletions":-6},{"number":"5","revision":"d138b35e9b8f6a4e09c7de90a5477218638f9641","parents":["67d5be5e4bb3ba43f5f43a8862c0c9052280bd78"],"ref":"refs/changes/86/186/5","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1470157142,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470157637,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470157316,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1470157146,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"ADDED","insertions":9,"deletions":0},{"file":"LICENSE","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":30,"deletions":-4},{"file":"examples/confirm.js","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/cmdutil.js","type":"MODIFIED","insertions":78,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/tst.confirm.sh","type":"ADDED","insertions":36,"deletions":0}],"sizeInsertions":164,"sizeDeletions":-6},{"number":"6","revision":"cf676c0cd8bfa4a18a695f5cfa2021ced4c4c40d","parents":["67d5be5e4bb3ba43f5f43a8862c0c9052280bd78"],"ref":"refs/changes/86/186/6","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1470158058,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470159795,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470159893,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470159691,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1470158062,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"ADDED","insertions":9,"deletions":0},{"file":"LICENSE","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":30,"deletions":-4},{"file":"examples/confirm.js","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/cmdutil.js","type":"MODIFIED","insertions":79,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/tst.confirm.sh","type":"ADDED","insertions":36,"deletions":0}],"sizeInsertions":165,"sizeDeletions":-6},{"number":"7","revision":"e0828478cc3a26e3360a10f3de81e376f2e69aee","parents":["67d5be5e4bb3ba43f5f43a8862c0c9052280bd78"],"ref":"refs/changes/86/186/7","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1470159971,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1470160005,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470159795,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470159893,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470159691,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1470158062,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"CHANGES.md","type":"ADDED","insertions":9,"deletions":0},{"file":"LICENSE","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":30,"deletions":-4},{"file":"examples/confirm.js","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/cmdutil.js","type":"MODIFIED","insertions":79,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/tst.confirm.sh","type":"ADDED","insertions":36,"deletions":0}],"sizeInsertions":165,"sizeDeletions":-6}],"allReviewers":[{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}]}