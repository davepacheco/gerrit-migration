{"project":"joyent/node-imgmanifest","branch":"master","id":"I032fccdc4ead72e8ff51a803ed3b6a157d02bacc","number":"1101","subject":"DOCKER-929 Support the docker v2.2 manifest format Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"url":"https://cr.joyent.us/1101","commitMessage":"DOCKER-929 Support the docker v2.2 manifest format\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1481242303,"lastUpdated":1500653927,"open":false,"status":"MERGED","comments":[{"timestamp":1481242303,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 1."},{"timestamp":1481242304,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit cf9e69e8696640f1064440f9f056c9ac6221a333\n    \n    DOCKER-929 Support the docker v2.2 manifest format"},{"timestamp":1481242333,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1481573398,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\n(4 comments)"},{"timestamp":1481580793,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 2."},{"timestamp":1481580794,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit e014b1ef0be99a815bba5c5cb52885e2c3c50a09\n    \n    add CHANGELOG registry link, tweaks from review"},{"timestamp":1481580813,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\n(4 comments)"},{"timestamp":1481580827,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1481581580,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 3."},{"timestamp":1481581581,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit b2e47b96e588a811ad36725fb138530efc0e4ff4\n    \n    forgot the RFD 57 link in the comment"},{"timestamp":1481581603,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1481648951,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1\n\n(1 comment)"},{"timestamp":1500586427,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1500653927,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Todd Whiteman"}],"currentPatchSet":{"number":"4","revision":"032fccdc4ead72e8ff51a803ed3b6a157d02bacc","parents":["05392827f00d0786809321f8d925e8bf5e8edacd"],"ref":"refs/changes/01/1101/4","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1500586427,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1481581603,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481648951,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1481648951,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1500653927,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/imgmanifest.js","type":"MODIFIED","insertions":78,"deletions":-55},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/docker.test.js","type":"MODIFIED","insertions":27,"deletions":-47}],"sizeInsertions":112,"sizeDeletions":-104},"patchSets":[{"number":"1","revision":"ff7d1b08155ec694436b87878b52274a8ba2a46b","parents":["05392827f00d0786809321f8d925e8bf5e8edacd"],"ref":"refs/changes/01/1101/1","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1481242303,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1481242333,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"CHANGES.md","line":10,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Possible to link to something that defines that the v2.2 format is? I don\u0027t recall if there is a convenient link in Docker docs."},{"file":"CHANGES.md","line":10,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/imgmanifest.js","line":1702,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"perhaps \"of the form\" instead of \"like\""},{"file":"lib/imgmanifest.js","line":1702,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"lib/imgmanifest.js","line":1707,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Joining on space?  Is there some doc somewhere that discusses this design choice? Perhaps in the RFD."},{"file":"lib/imgmanifest.js","line":1707,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"I was originally against adding a separator string (as the space doesn\u0027t add anything useful - just conceptually in ones head), but after re-thinking, adding one extra character would align to 8-bytes \u0027 sha256:\u0027, so that seems a better alignment for the hash to work upon.\n\nYes, I\u0027ll add this to the RFD and add a code comment to see RFD 57.\n\nDone."},{"file":"lib/imgmanifest.js","line":1707,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Heh, I\u0027d meant to say originally: \"Joining on empty string?\"\nI.e. I didn\u0027t mean to suggest using a space as a separator over something else. But a space works as well as something else I suppose."},{"file":"lib/imgmanifest.js","line":1735,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Is it worth having a guard against an empty array here? Below we assume there is at least one element."},{"file":"lib/imgmanifest.js","line":1735,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/imgmanifest.js","type":"MODIFIED","insertions":75,"deletions":-55},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/docker.test.js","type":"MODIFIED","insertions":27,"deletions":-47}],"sizeInsertions":109,"sizeDeletions":-104},{"number":"2","revision":"6fdac4faf3387b8b3f3d0c4f3c6d2c6e886f6f2e","parents":["05392827f00d0786809321f8d925e8bf5e8edacd"],"ref":"refs/changes/01/1101/2","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1481580793,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1481580827,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/imgmanifest.js","type":"MODIFIED","insertions":77,"deletions":-55},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/docker.test.js","type":"MODIFIED","insertions":27,"deletions":-47}],"sizeInsertions":111,"sizeDeletions":-104},{"number":"3","revision":"ce023daaf07ac97441a05dea45a39fedfcb2968f","parents":["05392827f00d0786809321f8d925e8bf5e8edacd"],"ref":"refs/changes/01/1101/3","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1481581580,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1481581603,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481648951,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1481648951,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/imgmanifest.js","type":"MODIFIED","insertions":78,"deletions":-55},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/docker.test.js","type":"MODIFIED","insertions":27,"deletions":-47}],"sizeInsertions":112,"sizeDeletions":-104},{"number":"4","revision":"032fccdc4ead72e8ff51a803ed3b6a157d02bacc","parents":["05392827f00d0786809321f8d925e8bf5e8edacd"],"ref":"refs/changes/01/1101/4","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1500586427,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1481581603,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1481648951,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1481648951,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1500653927,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":5,"deletions":0},{"file":"lib/imgmanifest.js","type":"MODIFIED","insertions":78,"deletions":-55},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"test/docker.test.js","type":"MODIFIED","insertions":27,"deletions":-47}],"sizeInsertions":112,"sizeDeletions":-104}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}]}