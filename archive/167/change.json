{"project":"joyent/sdc-napi","branch":"master","id":"I2ec72bf27c76884522c39d5f3d70c6a9f25aed4c","number":"167","subject":"NAPI-360 NAPI needs a new /search/nics endpoint","owner":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"url":"https://cr.joyent.us/167","commitMessage":"NAPI-360 NAPI needs a new /search/nics endpoint\n","createdOn":1469742047,"lastUpdated":1529531722,"open":false,"status":"ABANDONED","comments":[{"timestamp":1469742047,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 1."},{"timestamp":1469742098,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1469742961,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1: Code-Review+1\n\nCan you also update the NAPI-360 ticket to reference the ticket that added strict checking to the /nics endpoint?"},{"timestamp":1469743381,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Patch Set 1:\n\nAdded reference to NAPI-299 in the NAPI-360 summary."},{"timestamp":1469745627,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Patch Set 1:\n\nThese changes -- which implement a new endpoint as an alias for an existing, well tested endpoint -- were tested via net-agent which was modified to use /search/nics instead of /nics like it did before. Everything seems to work. The net-agent changes will be put on Gerrit shortly."},{"timestamp":1469751192,"reviewer":{"name":"Matthew Smillie","email":"matt.smillie@joyent.com","username":"notmatt"},"message":"Patch Set 1: Code-Review+1\n\nPlease add /search/nics to the docs.\n\nCode looks good, IA pending on the related net-agent changes."},{"timestamp":1486171040,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\nHow about an API version header in NAPI response headers that net-agent can use to query the version?  That seems cleaner than having two endpoints on NAPI that do the same thing."},{"timestamp":1486400425,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Patch Set 1:\n\nIt is certainly cleaner. But also impossible at this time. IIRC, this is because older versions of the restify library don\u0027t support version-headers (or didn\u0027t require them). Because of this we use a separate endpoint to imply a newer version of napi."},{"timestamp":1529531722,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Abandoned\n\nGiven that the oldest supported version of the product is a version that does not have buggy version headers, and does strict validation, we no longer need this code for backwards compatibility."}],"currentPatchSet":{"number":"1","revision":"2ec72bf27c76884522c39d5f3d70c6a9f25aed4c","parents":["adc1936fd60e3c3c392f9c983ffa5ff4c33a4992"],"ref":"refs/changes/67/167/1","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1469742047,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1469742098,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1469742961,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1469751192,"by":{"name":"Matthew Smillie","email":"matt.smillie@joyent.com","username":"notmatt"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/nics.js","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":2,"sizeDeletions":0},"patchSets":[{"number":"1","revision":"2ec72bf27c76884522c39d5f3d70c6a9f25aed4c","parents":["adc1936fd60e3c3c392f9c983ffa5ff4c33a4992"],"ref":"refs/changes/67/167/1","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1469742047,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1469742961,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1469742098,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1469751192,"by":{"name":"Matthew Smillie","email":"matt.smillie@joyent.com","username":"notmatt"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/nics.js","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":2,"sizeDeletions":0}],"allReviewers":[{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Matthew Smillie","email":"matt.smillie@joyent.com","username":"notmatt"},{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"}]}