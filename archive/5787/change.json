{"project":"joyent/sdc-cnapi","branch":"master","id":"I91ce7ac2e6426dfe45b2939b40d09dcc7896224f","number":"5787","subject":"TRITON-9 affinity is racy Reviewed by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e Reviewed by: Orlando Vazquez \u003corlando@joyent.com\u003e Approved by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e Approved by: Orlando Vazquez \u003corlando@joyent.com\u003e","owner":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"url":"https://cr.joyent.us/5787","commitMessage":"TRITON-9 affinity is racy\nReviewed by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e\nReviewed by: Orlando Vazquez \u003corlando@joyent.com\u003e\nApproved by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e\nApproved by: Orlando Vazquez \u003corlando@joyent.com\u003e\n","createdOn":1552486174,"lastUpdated":1554478868,"open":false,"status":"MERGED","comments":[{"timestamp":1552486174,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 1."},{"timestamp":1552486212,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 2."},{"timestamp":1552496184,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1552947645,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 3."},{"timestamp":1552947678,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1552975895,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 4."},{"timestamp":1552975929,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1553603820,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 5."},{"timestamp":1553603852,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554220616,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1"},{"timestamp":1554223237,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 6."},{"timestamp":1554223270,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554237393,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 6: Code-Review+1 Integration-Approval+1"},{"timestamp":1554306243,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 6: Code-Review+1 Integration-Approval+1\n\nNo intention do document the modifications made to the endpoints?"},{"timestamp":1554311631,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 7."},{"timestamp":1554311665,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554477555,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 7:\n\n\u003e No intention do document the modifications made to the endpoints?\n\nAs far as I can tell, index.md is generated from static.md and some other pieces, yet it seems to have had some edits made to the file itself. Combined with there\u0027s no locality docs in there and affinities may not be finalized, so...\n\nI\u0027m reluctant to touch that file."},{"timestamp":1554477823,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 8."},{"timestamp":1554477855,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554478285,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 9."},{"timestamp":1554478317,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1554478423,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 9: Code-Review+1 Integration-Approval+1"},{"timestamp":1554478862,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 10: Commit message was updated."},{"timestamp":1554478868,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Marsell Kukuljevic"}],"currentPatchSet":{"number":"10","revision":"72c1664f7b3fb896b23d0268467a7bac08cd8087","parents":["b47ee5afc1385d607e99150575bfffe1b9baba1c"],"ref":"refs/changes/87/5787/10","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1554478862,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554478317,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554478423,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554478423,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"SUBM","value":"1","grantedOn":1554478868,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"config/test.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/designation.js","type":"MODIFIED","insertions":24,"deletions":-23},{"file":"lib/endpoints/allocations.js","type":"MODIFIED","insertions":4,"deletions":-8},{"file":"lib/models/vm.js","type":"MODIFIED","insertions":32,"deletions":-17},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"sapi_manifests/cnapi/template","type":"MODIFIED","insertions":1,"deletions":-3}],"sizeInsertions":65,"sizeDeletions":-55},"patchSets":[{"number":"1","revision":"983b8fd6a1ff22204e812eb0588a00d586a9ad87","parents":["f496623652cd12ff964948f3fe6b9256b867287c"],"ref":"refs/changes/87/5787/1","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1552486174,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"config/test.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/designation.js","type":"MODIFIED","insertions":24,"deletions":-23},{"file":"lib/endpoints/allocations.js","type":"MODIFIED","insertions":4,"deletions":-8},{"file":"lib/models/vm.js","type":"MODIFIED","insertions":32,"deletions":-17},{"file":"sapi_manifests/cnapi/template","type":"MODIFIED","insertions":1,"deletions":-3}],"sizeInsertions":62,"sizeDeletions":-52},{"number":"2","revision":"764f6647e94a0cc417e74e1437dbc9b1a0e55d08","parents":["f496623652cd12ff964948f3fe6b9256b867287c"],"ref":"refs/changes/87/5787/2","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1552486212,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1552496184,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"config/test.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/designation.js","type":"MODIFIED","insertions":24,"deletions":-23},{"file":"lib/endpoints/allocations.js","type":"MODIFIED","insertions":4,"deletions":-8},{"file":"lib/models/vm.js","type":"MODIFIED","insertions":32,"deletions":-17},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"sapi_manifests/cnapi/template","type":"MODIFIED","insertions":1,"deletions":-3}],"sizeInsertions":65,"sizeDeletions":-55},{"number":"3","revision":"52f12d8990d1418eff76c88cc02e884fee840c1d","parents":["9972a7b18a18e8b68dc24a3efc17e1707c2f29cc"],"ref":"refs/changes/87/5787/3","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1552947645,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1552947678,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"config/test.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/designation.js","type":"MODIFIED","insertions":24,"deletions":-23},{"file":"lib/endpoints/allocations.js","type":"MODIFIED","insertions":4,"deletions":-8},{"file":"lib/models/vm.js","type":"MODIFIED","insertions":32,"deletions":-17},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"sapi_manifests/cnapi/template","type":"MODIFIED","insertions":1,"deletions":-3}],"sizeInsertions":65,"sizeDeletions":-55},{"number":"4","revision":"47885ad30558b48b71031e136614dbb656eb3493","parents":["dbd1df6c3e81c62d2e1999f5686c6db0202e8743"],"ref":"refs/changes/87/5787/4","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1552975895,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1552975929,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"config/test.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/designation.js","type":"MODIFIED","insertions":24,"deletions":-23},{"file":"lib/endpoints/allocations.js","type":"MODIFIED","insertions":4,"deletions":-8},{"file":"lib/models/vm.js","type":"MODIFIED","insertions":32,"deletions":-17},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"sapi_manifests/cnapi/template","type":"MODIFIED","insertions":1,"deletions":-3}],"sizeInsertions":65,"sizeDeletions":-55},{"number":"5","revision":"ca48e79a493b23db6f19adfad6a77a6da76d75ef","parents":["c2f947e8527286a755e2f9e7c8c4c2935c2ad191"],"ref":"refs/changes/87/5787/5","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1553603820,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1553603852,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554220616,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554220616,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"config/test.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/designation.js","type":"MODIFIED","insertions":24,"deletions":-23},{"file":"lib/endpoints/allocations.js","type":"MODIFIED","insertions":4,"deletions":-8},{"file":"lib/models/vm.js","type":"MODIFIED","insertions":32,"deletions":-17},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"sapi_manifests/cnapi/template","type":"MODIFIED","insertions":1,"deletions":-3}],"sizeInsertions":65,"sizeDeletions":-55},{"number":"6","revision":"75c379575f66bae3c3e9cbd3f1281ffe9b8f2ad1","parents":["293ec7bc3c6482de266064953fb8eea308d4f03b"],"ref":"refs/changes/87/5787/6","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1554223237,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554223270,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554306243,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554306243,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554237393,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554237393,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"config/test.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/designation.js","type":"MODIFIED","insertions":24,"deletions":-23},{"file":"lib/endpoints/allocations.js","type":"MODIFIED","insertions":4,"deletions":-8},{"file":"lib/models/vm.js","type":"MODIFIED","insertions":32,"deletions":-17},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"sapi_manifests/cnapi/template","type":"MODIFIED","insertions":1,"deletions":-3}],"sizeInsertions":64,"sizeDeletions":-54},{"number":"7","revision":"9e33575a6c69d5515e38e399bdcbfbb45c310b3d","parents":["348a1462aada65ac51c32850e8b94d7f7153f973"],"ref":"refs/changes/87/5787/7","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1554311631,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554311665,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"config/test.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/designation.js","type":"MODIFIED","insertions":24,"deletions":-23},{"file":"lib/endpoints/allocations.js","type":"MODIFIED","insertions":4,"deletions":-8},{"file":"lib/models/vm.js","type":"MODIFIED","insertions":32,"deletions":-17},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"sapi_manifests/cnapi/template","type":"MODIFIED","insertions":1,"deletions":-3}],"sizeInsertions":65,"sizeDeletions":-55},{"number":"8","revision":"592a04b67af4902b53b54997526935265a1f6d49","parents":["b47ee5afc1385d607e99150575bfffe1b9baba1c"],"ref":"refs/changes/87/5787/8","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1554477823,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554477855,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"config/test.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/designation.js","type":"MODIFIED","insertions":24,"deletions":-23},{"file":"lib/endpoints/allocations.js","type":"MODIFIED","insertions":4,"deletions":-8},{"file":"lib/models/vm.js","type":"MODIFIED","insertions":32,"deletions":-17},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"sapi_manifests/cnapi/template","type":"MODIFIED","insertions":1,"deletions":-3}],"sizeInsertions":65,"sizeDeletions":-55},{"number":"9","revision":"91ce7ac2e6426dfe45b2939b40d09dcc7896224f","parents":["b47ee5afc1385d607e99150575bfffe1b9baba1c"],"ref":"refs/changes/87/5787/9","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1554478285,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554478317,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554478423,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554478423,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"config/test.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/designation.js","type":"MODIFIED","insertions":24,"deletions":-23},{"file":"lib/endpoints/allocations.js","type":"MODIFIED","insertions":4,"deletions":-8},{"file":"lib/models/vm.js","type":"MODIFIED","insertions":32,"deletions":-17},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"sapi_manifests/cnapi/template","type":"MODIFIED","insertions":1,"deletions":-3}],"sizeInsertions":65,"sizeDeletions":-55},{"number":"10","revision":"72c1664f7b3fb896b23d0268467a7bac08cd8087","parents":["b47ee5afc1385d607e99150575bfffe1b9baba1c"],"ref":"refs/changes/87/5787/10","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1554478862,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1554478317,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1554478423,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1554478423,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"SUBM","value":"1","grantedOn":1554478868,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"config/test.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/designation.js","type":"MODIFIED","insertions":24,"deletions":-23},{"file":"lib/endpoints/allocations.js","type":"MODIFIED","insertions":4,"deletions":-8},{"file":"lib/models/vm.js","type":"MODIFIED","insertions":32,"deletions":-17},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"sapi_manifests/cnapi/template","type":"MODIFIED","insertions":1,"deletions":-3}],"sizeInsertions":65,"sizeDeletions":-55}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}]}