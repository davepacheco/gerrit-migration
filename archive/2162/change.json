{"project":"joyent/sdc-cloudapi","branch":"master","id":"I7926ac3e7eb3bf0defbb4d15ae9cf8da9d3d6d2e","number":"2162","subject":"PUBAPI-1412: Stale data left behind between test runs PUBAPI-1413: Teardown isn\u0027t propagating errors Reviewed by: Pedro P. Candel \u003cpedro@joyent.com\u003e","owner":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"url":"https://cr.joyent.us/2162","commitMessage":"PUBAPI-1412: Stale data left behind between test runs\nPUBAPI-1413: Teardown isn\u0027t propagating errors\nReviewed by: Pedro P. Candel \u003cpedro@joyent.com\u003e\n","createdOn":1498652611,"lastUpdated":1499204095,"open":false,"status":"MERGED","comments":[{"timestamp":1498652611,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 1."},{"timestamp":1498652646,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1498732792,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 2: Patch Set 1 was rebased"},{"timestamp":1498744886,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1\n\nLGTM. I assume you already \"tested\" this change ;-)"},{"timestamp":1498826174,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 3: Patch Set 2 was rebased"},{"timestamp":1498826198,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 3:\n\n\u003e LGTM. I assume you already \"tested\" this change ;-)\n\nOh, yes!"},{"timestamp":1498826208,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3:\n\n\"make check\" passed ok"},{"timestamp":1498826243,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 4: Commit message was updated."},{"timestamp":1499204066,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 5: Patch Set 4 was rebased"},{"timestamp":1499204071,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Marsell Kukuljevic"},{"timestamp":1499204095,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5:\n\n\"make check\" passed ok"}],"currentPatchSet":{"number":"5","revision":"dddb3039cbca1369ef231f7ea2d1dd64b25c7202","parents":["b4e03f3c033ea8f0336ca2c9419510286b9668a9"],"ref":"refs/changes/62/2162/5","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1499204066,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1498652646,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1498744886,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1498744886,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"SUBM","value":"1","grantedOn":1499204071,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"test/account.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/analytics.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/auth.test.js","type":"MODIFIED","insertions":5,"deletions":-15},{"file":"test/common.js","type":"MODIFIED","insertions":150,"deletions":-33},{"file":"test/datacenters.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/fabrics.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/images.70.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/images.80.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/images.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/keys.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.70.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.71.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.72.test.js","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"test/machines.73.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.80.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.test.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"test/nics.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/packages.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/populate_network.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/services.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/tests.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/users.test.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":208,"sizeDeletions":-72},"patchSets":[{"number":"1","revision":"7926ac3e7eb3bf0defbb4d15ae9cf8da9d3d6d2e","parents":["84e2674e937814b7b230a4aadc7edbb39158fda2"],"ref":"refs/changes/62/2162/1","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1498652611,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1498652646,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"test/account.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/analytics.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/auth.test.js","type":"MODIFIED","insertions":5,"deletions":-15},{"file":"test/common.js","type":"MODIFIED","insertions":150,"deletions":-33},{"file":"test/datacenters.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/fabrics.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/images.70.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/images.80.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/images.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/keys.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.70.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.71.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.72.test.js","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"test/machines.73.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.80.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.test.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"test/nics.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/packages.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/populate_network.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/services.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/tests.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/users.test.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":208,"sizeDeletions":-72},{"number":"2","revision":"a2fc0cef7099c4d7154349e195d1e510d9633498","parents":["fd3c2cc36b8ad148f6318cceb7bf0a93ec5fb7d3"],"ref":"refs/changes/62/2162/2","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1498732792,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1498652646,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1498744886,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1498744886,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"test/account.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/analytics.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/auth.test.js","type":"MODIFIED","insertions":5,"deletions":-15},{"file":"test/common.js","type":"MODIFIED","insertions":150,"deletions":-33},{"file":"test/datacenters.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/fabrics.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/images.70.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/images.80.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/images.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/keys.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.70.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.71.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.72.test.js","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"test/machines.73.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.80.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.test.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"test/nics.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/packages.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/populate_network.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/services.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/tests.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/users.test.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":208,"sizeDeletions":-72},{"number":"3","revision":"4a931be1facfe8cbb12eddd5fe8c05d374b93c11","parents":["a495f5019d88a733537fc18bc46c3f612bbf755f"],"ref":"refs/changes/62/2162/3","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1498826174,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1498652646,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1498744886,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1498744886,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"test/account.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/analytics.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/auth.test.js","type":"MODIFIED","insertions":5,"deletions":-15},{"file":"test/common.js","type":"MODIFIED","insertions":150,"deletions":-33},{"file":"test/datacenters.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/fabrics.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/images.70.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/images.80.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/images.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/keys.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.70.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.71.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.72.test.js","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"test/machines.73.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.80.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.test.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"test/nics.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/packages.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/populate_network.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/services.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/tests.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/users.test.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":208,"sizeDeletions":-72},{"number":"4","revision":"8a988a4c5ba96e9ebb0896f64646dc91dea3e85f","parents":["a495f5019d88a733537fc18bc46c3f612bbf755f"],"ref":"refs/changes/62/2162/4","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1498826243,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1498652646,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1498744886,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1498744886,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"test/account.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/analytics.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/auth.test.js","type":"MODIFIED","insertions":5,"deletions":-15},{"file":"test/common.js","type":"MODIFIED","insertions":150,"deletions":-33},{"file":"test/datacenters.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/fabrics.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/images.70.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/images.80.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/images.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/keys.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.70.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.71.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.72.test.js","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"test/machines.73.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.80.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.test.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"test/nics.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/packages.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/populate_network.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/services.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/tests.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/users.test.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":208,"sizeDeletions":-72},{"number":"5","revision":"dddb3039cbca1369ef231f7ea2d1dd64b25c7202","parents":["b4e03f3c033ea8f0336ca2c9419510286b9668a9"],"ref":"refs/changes/62/2162/5","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1499204066,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1498652646,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1498744886,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1498744886,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"SUBM","value":"1","grantedOn":1499204071,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"test/account.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/analytics.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/auth.test.js","type":"MODIFIED","insertions":5,"deletions":-15},{"file":"test/common.js","type":"MODIFIED","insertions":150,"deletions":-33},{"file":"test/datacenters.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/fabrics.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/images.70.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/images.80.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/images.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/keys.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.70.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.71.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.72.test.js","type":"MODIFIED","insertions":10,"deletions":-1},{"file":"test/machines.73.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.80.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/machines.test.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"test/nics.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/packages.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/populate_network.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/services.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/tests.test.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/users.test.js","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":208,"sizeDeletions":-72}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}]}