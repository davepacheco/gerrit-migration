{"project":"joyent/manta-muskie","branch":"master","id":"I859cf88ad83ae0497aa3fb0956e262f6f685b67c","number":"3488","subject":"MANTA-3520 Create a tool to model the behavior of picker Reviewed by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e Reviewed by: Tim Kordas \u003ctim.kordas@joyent.com\u003e Approved by: Tim Kordas \u003ctim.kordas@joyent.com\u003e","owner":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"url":"https://cr.joyent.us/3488","commitMessage":"MANTA-3520 Create a tool to model the behavior of picker\nReviewed by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e\nReviewed by: Tim Kordas \u003ctim.kordas@joyent.com\u003e\nApproved by: Tim Kordas \u003ctim.kordas@joyent.com\u003e\n","createdOn":1519692867,"lastUpdated":1520289855,"open":false,"status":"MERGED","comments":[{"timestamp":1519692867,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Uploaded patch set 1."},{"timestamp":1519693339,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Uploaded patch set 2."},{"timestamp":1519695307,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Uploaded patch set 3."},{"timestamp":1519749600,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 3:\n\nThere are a couple of TODOs left in the comments, but I think this is ready for a round of reviews.\n\nTesting notes are in the ticket. I am working on documenting my manual testing of the subcommands, but wanted to get started on review now in case any significant changes are requested."},{"timestamp":1519751182,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1519752277,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 3: Code-Review+1\n\n(1 comment)"},{"timestamp":1519753229,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1519755666,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 3:\n\n(4 comments)\n\nLooks good overall to me. I\u0027d like to try it out on my lab setup and I\u0027m looking forward to integrating it with my changes for MANTA-3488."},{"timestamp":1519953436,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Uploaded patch set 4."},{"timestamp":1519953443,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 3:\n\n(5 comments)"},{"timestamp":1519953478,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 3:\n\nPS 3 addresses the feedback from reviewers. I added some manual tests to the ticket and ran the muskie test suite again, successfully."},{"timestamp":1520271228,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 4:\n\n(2 comments)"},{"timestamp":1520272655,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1520279397,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Uploaded patch set 5."},{"timestamp":1520279416,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 5:\n\n(2 comments)\n\nPS 5 addresses the feedback on PS 4."},{"timestamp":1520280139,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1520286754,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1520286899,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 5: Integration-Approval+1"},{"timestamp":1520289162,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Uploaded patch set 6."},{"timestamp":1520289228,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 6:\n\nPS 6 fixes some typos I saw in the help message for `mpicker choose`.\n\nWhen you have a moment, would you mind restoring your +1s for code review and IA?\n\nThis latest patchset is `make prepush` clean."},{"timestamp":1520289324,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1520289389,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 6: Integration-Approval+1"},{"timestamp":1520289396,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1520289595,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Uploaded patch set 7: Commit message was updated."},{"timestamp":1520289855,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jordan Hendricks"}],"currentPatchSet":{"number":"7","revision":"859cf88ad83ae0497aa3fb0956e262f6f685b67c","parents":["1b86a8b906454b8ce532042665b5d9d9b392f96e"],"ref":"refs/changes/88/3488/7","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1520289595,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520289324,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1520289389,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520289396,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}},{"type":"SUBM","value":"1","grantedOn":1520289855,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"bin/mpicker","type":"ADDED","insertions":658,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"lib/picker.js","type":"MODIFIED","insertions":148,"deletions":-62},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":813,"sizeDeletions":-64},"patchSets":[{"number":"1","revision":"1df719654fdbfd5cf1c4076e64669b2f1e323424","parents":["1b86a8b906454b8ce532042665b5d9d9b392f96e"],"ref":"refs/changes/88/3488/1","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1519692867,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"bin/mpicker","type":"ADDED","insertions":617,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"lib/picker.js","type":"MODIFIED","insertions":145,"deletions":-57},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":770,"sizeDeletions":-60},{"number":"2","revision":"86c89242ac3029e423aac6edc595b695a8e54242","parents":["1b86a8b906454b8ce532042665b5d9d9b392f96e"],"ref":"refs/changes/88/3488/2","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1519693339,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"bin/mpicker","type":"ADDED","insertions":615,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"lib/picker.js","type":"MODIFIED","insertions":140,"deletions":-57},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":762,"sizeDeletions":-59},{"number":"3","revision":"a9e5868b9a532de820e3f0c59c7ba0a544adac9f","parents":["1b86a8b906454b8ce532042665b5d9d9b392f96e"],"ref":"refs/changes/88/3488/3","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1519695307,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1519751182,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1519752277,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}}],"comments":[{"file":"bin/mpicker","line":445,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Can you give this callback function a name?"},{"file":"bin/mpicker","line":445,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Done"},{"file":"bin/mpicker","line":447,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Ditto on function name."},{"file":"bin/mpicker","line":447,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Done"},{"file":"lib/errors.js","line":499,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Nice!"},{"file":"lib/picker.js","line":197,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"I realized this assert is wrong. Will fix in the next patchset."},{"file":"lib/picker.js","line":197,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Done"},{"file":"lib/picker.js","line":442,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"+1 to simplification here. I have to re-read this every time I revisit this module and try to figure out what it\u0027s expressing. Maybe it could be expressed as a meaningfully named function that encapsulates the ugly details?"},{"file":"lib/picker.js","line":442,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"I tried to simplify it by making a custom error message for the first two conditions.\n\nAs far as I can tell, the third condition makes little sense -- it will cause choose() to fail if there are more than 2 replicas requested and any DC has the empty string as  name. The \"dcs\" array is created from `this.datacenters`, which is an array of strings created by calling Object.keys on the records database, `this.db`. I\u0027m not sure how this could happen, but even so, it seems like we wouldn\u0027t want to return an error if so.\n\nWhat are your thoughts?"},{"file":"lib/picker.js","line":442,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"I like your changes to separate out the conditions. I agree about the mysterious third conditional in that `if` statement. I went back and looked through the git log of the pre-github import muskie repo and it unfortunately doesn\u0027t offer any clues as to the intention behind it. Just speculating I would guess either there is or was a case where sharks might show up in the moray query output without yet being assigned to a datacenter or that the intended check was to see if any of the `db` arrays for a corresponding `dcs` key was empty and the conditional was just written incorrectly. I agree with your assessment that it doesn\u0027t seem useful or necessary to keep that way it\u0027s written."},{"file":"lib/picker.js","line":518,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"I think the body of this loop is another candidate for simplification. (maybe worth a TODO comment on the main conditional ?"},{"file":"lib/picker.js","line":518,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"I definitely agree some simplification would help. I would prefer to do it under another ticket so we can test it thoroughly. (My goal in this ticket was to avoid changing behavior as much as possible so that the tool could be used to test scenarios before and after future picker code changes.)"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"bin/mpicker","type":"ADDED","insertions":641,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"lib/picker.js","type":"MODIFIED","insertions":140,"deletions":-57},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":788,"sizeDeletions":-59},{"number":"4","revision":"296a2deed83c2e185f3f6be09e6b99e382ea8fb6","parents":["1b86a8b906454b8ce532042665b5d9d9b392f96e"],"ref":"refs/changes/88/3488/4","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1519953436,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"REWORK","comments":[{"file":"lib/picker.js","line":445,"reviewer":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},"message":"this conditional is maybe slightly clearer with a check for dcs.length\u003d\u003d\u003d0 first ?\n\nalso should there be a comparison between replicas and dcs here ? it seems like there should be. Or is that what the (replicas \u003e 1 \u0026\u0026 dcs.length \u003c 2) check is doing. Does that work for all cases ? (e.g. the 4 DC case with 5 replicas requested ?)"},{"file":"lib/picker.js","line":445,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Sure, I can switch the ordering. I was trying to keep it as close to the original code as possible, but in this case the error message will be even clearer if the \"dcs.length \u003d\u003d\u003d 0\" check is first.\n\nAs for the replica/DCs example: Manta isn\u0027t typically deployed with an even number of DCs, but I\u0027ll discuss an example with 6 replicas requested in a 5-DC Manta. Currently, (as you are alluding to, I think) the picker will happily choose a set of sharks for that:\n\nroot@bin $ cat 5-dcs.json | ./mpicker choose -r 6\nreplicas requested: 6\nsize requested: 1 MB\nstorage server count by datacenter:\n        emy-13: 3 (3 available)\n        emy-14: 3 (3 available)\n        emy-15: 3 (3 available)\n        emy-16: 3 (3 available)\n        emy-17: 3 (3 available)\ntotal storage server count: 15 (15 available)\n\nchoices:\n        0:\n                5.stor.emy-13.joyent.us (emy-14)\n                3.stor.emy-13.joyent.us (emy-13)\n                10.stor.emy-13.joyent.us (emy-16)\n                7.stor.emy-13.joyent.us (emy-15)\n                13.stor.emy-13.joyent.us (emy-17)\n                6.stor.emy-13.joyent.us (emy-14)\n\n        1:\n                2.stor.emy-13.joyent.us (emy-13)\n                12.stor.emy-13.joyent.us (emy-16)\n                9.stor.emy-13.joyent.us (emy-15)\n                14.stor.emy-13.joyent.us (emy-17)\n                4.stor.emy-13.joyent.us (emy-14)\n                1.stor.emy-13.joyent.us (emy-13)\n\n\nI took a look at our API docs to see whether there was any guarantee that your data will end up in at least N DCs for N replicas. The only guarantee I saw related to DC durability was: \"By default, the system stores two copies of your object. These two copies are placed in two different datacenters.\" (Source: https://apidocs.joyent.com/manta/storage-reference.html#durability).\n\nSure enough, if we try to place 6 copies in 2 DCs of a 5-DC deployment, that doesn\u0027t work (and fails on the check you mentioned above):\n\nroot@bin $ cat 5-dcs-4-full.json | ./mpicker choose -r 6\nreplicas requested: 6\nsize requested: 1 MB\nstorage server count by datacenter:\n        emy-13: 3 (0 available)\n        emy-14: 3 (0 available)\n        emy-15: 3 (0 available)\n        emy-16: 3 (0 available)\n        emy-17: 3 (3 available)\ntotal storage server count: 15 (3 available)\n\ncould not choose storage node set: 6 copies requested, but only 1 DC(s) have sufficient space\n\n\nThis works for 2 copies requested as well:\nroot@bin $ cat 5-dcs-4-full.json | ./mpicker choose -r 2\nreplicas requested: 2\nsize requested: 1 MB\nstorage server count by datacenter:\n        emy-13: 3 (0 available)\n        emy-14: 3 (0 available)\n        emy-15: 3 (0 available)\n        emy-16: 3 (0 available)\n        emy-17: 3 (3 available)\ntotal storage server count: 15 (3 available)\n\ncould not choose storage node set: 2 copies requested, but only 1 DC(s) have sufficient space\n\n\n\nAs to whether this behavior is correct I think is a separate discussion (and perhaps should be under a new ticket). From what I can tell, this doesn\u0027t violate the promises of our API docs, but does seem to be surprising to at least a couple people I\u0027ve spoken to about it."},{"file":"lib/picker.js","line":541,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Tiniest of nitpicks, but the error message is missing an \u0027of\u0027 after \u0027number\u0027."},{"file":"lib/picker.js","line":541,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"bin/mpicker","type":"ADDED","insertions":658,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"lib/picker.js","type":"MODIFIED","insertions":148,"deletions":-62},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":813,"sizeDeletions":-64},{"number":"5","revision":"f7fbe583d2ae5c97ff1e17878a64972327173579","parents":["1b86a8b906454b8ce532042665b5d9d9b392f96e"],"ref":"refs/changes/88/3488/5","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1520279397,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520286754,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520280139,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1520286899,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"bin/mpicker","type":"ADDED","insertions":658,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"lib/picker.js","type":"MODIFIED","insertions":148,"deletions":-62},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":813,"sizeDeletions":-64},{"number":"6","revision":"f114e6a025885101358da6dca1c2a6acca3f785a","parents":["1b86a8b906454b8ce532042665b5d9d9b392f96e"],"ref":"refs/changes/88/3488/6","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1520289162,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520289324,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520289396,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1520289389,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"bin/mpicker","type":"ADDED","insertions":658,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"lib/picker.js","type":"MODIFIED","insertions":148,"deletions":-62},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":813,"sizeDeletions":-64},{"number":"7","revision":"859cf88ad83ae0497aa3fb0956e262f6f685b67c","parents":["1b86a8b906454b8ce532042665b5d9d9b392f96e"],"ref":"refs/changes/88/3488/7","uploader":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"createdOn":1520289595,"author":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1520289855,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520289324,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520289396,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1520289389,"by":{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"bin/mpicker","type":"ADDED","insertions":658,"deletions":0},{"file":"lib/errors.js","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"lib/picker.js","type":"MODIFIED","insertions":148,"deletions":-62},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":813,"sizeDeletions":-64}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Tim Kordas","email":"tim.kordas@joyent.com","username":"timkordas"},{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}]}