{"project":"joyent/smartos-live","branch":"master","id":"I1b00ef6f33b5462efeba20cce1478de7439bbb3d","number":"1638","subject":"OS-6005 VM.update should wait for zones\u0027 metadata service to restart Reviewed by: Josh Wilsdon \u003cjosh@wilsdon.ca\u003e Approved by: Josh Wilsdon \u003cjosh@wilsdon.ca\u003e","owner":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"url":"https://cr.joyent.us/1638","commitMessage":"OS-6005 VM.update should wait for zones\u0027 metadata service to restart\nReviewed by: Josh Wilsdon \u003cjosh@wilsdon.ca\u003e\nApproved by: Josh Wilsdon \u003cjosh@wilsdon.ca\u003e\n","createdOn":1489089270,"lastUpdated":1489680305,"open":false,"status":"MERGED","comments":[{"timestamp":1489089270,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 1."},{"timestamp":1489089273,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit c1f802acd2a6a0b3114605f712adc35e4455eb1d\n    \n    initial commit"},{"timestamp":1489089312,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1489097521,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 2."},{"timestamp":1489097524,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 05cefc4da03f5e7a0db381591890c3da3c0d1ff5\n    \n    test-routes: make waiting on mdata:fetch optional"},{"timestamp":1489097559,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1489422898,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 3."},{"timestamp":1489422902,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 6aadfad396f7bc4bdfe9b9221b65d6d32f1b68d8\n    \n    remove unused args\n    \n    commit c63aaee1389e4c6f6bd196af34891d26a7d58de1\n    \n    test-routes: make waiting on mdata:fetch optional\n    \n    commit dd37249c85a5be773ff884f3ea76caf4bbdab37f\n    \n    initial commit"},{"timestamp":1489422942,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1489428431,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 3:\n\n(4 comments)"},{"timestamp":1489508855,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 3:\n\n(4 comments)"},{"timestamp":1489508864,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 4."},{"timestamp":1489508867,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 2581b7b2f836b88f262a7dbdbb5ac9d8cca18199\n    \n    changes based on joshw review"},{"timestamp":1489508902,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1489641579,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1489641628,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 4: Integration-Approval+1"},{"timestamp":1489680113,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1489680305,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Dave Eddy"}],"currentPatchSet":{"number":"5","revision":"1b00ef6f33b5462efeba20cce1478de7439bbb3d","parents":["a44bc067ad6b44c1a2166d7550907fcb88114b23"],"ref":"refs/changes/38/1638/5","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1489680113,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489508902,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489641579,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1489641628,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"SUBM","value":"1","grantedOn":1489680305,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":53,"deletions":-10},{"file":"src/vm/tests/test-routes.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"src/vm/tests/test-tmpfs.js","type":"MODIFIED","insertions":4,"deletions":-4}],"sizeInsertions":67,"sizeDeletions":-17},"patchSets":[{"number":"1","revision":"243b38abea1c1de023d55fc0735ab49cf83fc6e4","parents":["d4a8339ce19d3a30e14d1fe8e8459b42e890d4d3"],"ref":"refs/changes/38/1638/1","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1489089270,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489089312,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":52,"deletions":-9},{"file":"src/vm/tests/test-tmpfs.js","type":"MODIFIED","insertions":3,"deletions":-3}],"sizeInsertions":59,"sizeDeletions":-12},{"number":"2","revision":"bde3d88dc132852ca946133de3329bb3aea8c3cc","parents":["d4a8339ce19d3a30e14d1fe8e8459b42e890d4d3"],"ref":"refs/changes/38/1638/2","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1489097521,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489097559,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/vm/man/vmadm.1m.md","line":443,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"perhaps \"regardless of its state prior to the update\" would be more clear?"},{"file":"src/vm/man/vmadm.1m.md","line":443,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Done"},{"file":"src/vm/node_modules/VM.js","line":23,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"2017"},{"file":"src/vm/node_modules/VM.js","line":23,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Done"},{"file":"src/vm/node_modules/VM.js","line":145,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Should be before STOP_TIMEOUT for alphabetization."},{"file":"src/vm/node_modules/VM.js","line":145,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Done"},{"file":"src/vm/tests/test-tmpfs.js","line":1,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"2017"},{"file":"src/vm/tests/test-tmpfs.js","line":1,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":52,"deletions":-9},{"file":"src/vm/tests/test-routes.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"src/vm/tests/test-tmpfs.js","type":"MODIFIED","insertions":3,"deletions":-3}],"sizeInsertions":65,"sizeDeletions":-15},{"number":"3","revision":"b0e5cb51a2ce1e1ca67482e7ef27e68dc3309645","parents":["ac4d9b5056736bafbacdd0e6e2a3b03030c36b4a"],"ref":"refs/changes/38/1638/3","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1489422898,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489422942,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":52,"deletions":-9},{"file":"src/vm/tests/test-routes.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"src/vm/tests/test-tmpfs.js","type":"MODIFIED","insertions":3,"deletions":-3}],"sizeInsertions":65,"sizeDeletions":-15},{"number":"4","revision":"f3d3e42fbe73a3e841cc069aa4375bbd7835593b","parents":["a44bc067ad6b44c1a2166d7550907fcb88114b23"],"ref":"refs/changes/38/1638/4","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1489508864,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489508902,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489641579,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1489641628,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":53,"deletions":-10},{"file":"src/vm/tests/test-routes.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"src/vm/tests/test-tmpfs.js","type":"MODIFIED","insertions":4,"deletions":-4}],"sizeInsertions":67,"sizeDeletions":-17},{"number":"5","revision":"1b00ef6f33b5462efeba20cce1478de7439bbb3d","parents":["a44bc067ad6b44c1a2166d7550907fcb88114b23"],"ref":"refs/changes/38/1638/5","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1489680113,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489508902,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489641579,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1489641628,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"SUBM","value":"1","grantedOn":1489680305,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":53,"deletions":-10},{"file":"src/vm/tests/test-routes.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"src/vm/tests/test-tmpfs.js","type":"MODIFIED","insertions":4,"deletions":-4}],"sizeInsertions":67,"sizeDeletions":-17}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}]}