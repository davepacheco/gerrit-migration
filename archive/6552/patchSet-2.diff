From 51e820fc08ad751f74a5329c82753aed985a4eec Mon Sep 17 00:00:00 2001
From: Tim Foster <tim.foster@joyent.com>
Date: Mon, 22 Jul 2019 15:11:21 +0100
Subject: [PATCH] TOOLS-2287 bits-upload gets confused when building a gerrit
 branch Reviewed by: John Levon <john.levon@joyent.com>

---
 tools/mk/Makefile.targ | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/tools/mk/Makefile.targ b/tools/mk/Makefile.targ
index a6f42d7..755107f 100644
--- a/tools/mk/Makefile.targ
+++ b/tools/mk/Makefile.targ
@@ -535,7 +535,7 @@ ifndef ENGBLD_BITS_UPLOAD_OVERRIDE
 .PHONY: bits-upload
 bits-upload: publish $(BUILDIMAGE_TARG)
 	$(TOP)/deps/eng/tools/bits-upload.sh \
-		-b $(BRANCH) \
+		-b "$(BRANCH)" \
 		-B "$(TRY_BRANCH)" \
 		$(BITS_UPLOAD_LOCAL_ARG) \
 		$(BITS_UPLOAD_IMGAPI_ARG) \
@@ -552,7 +552,7 @@ bits-upload: publish $(BUILDIMAGE_TARG)
 .PHONY: bits-upload-latest
 bits-upload-latest:
 	$(TOP)/deps/eng/tools/bits-upload.sh \
-		-b $(BRANCH) \
+		-b "$(BRANCH)" \
 		-B "$(TRY_BRANCH)" \
 		$(BITS_UPLOAD_LOCAL_ARG) \
 		$(BITS_UPLOAD_IMGAPI_ARG) \
-- 
2.21.0

