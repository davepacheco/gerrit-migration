From 82e16ebf642c6d703cba61ebaaca4fa7b9ef2cca Mon Sep 17 00:00:00 2001
From: Chayeon Hong <chayeon.hong@samsung.com>
Date: Tue, 1 Nov 2016 16:37:54 +0900
Subject: [PATCH] joyent/smartos-live#673 EBUSY should be handled in smartos
 env also

---
 src/img/node_modules/rimraf/rimraf.js | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/img/node_modules/rimraf/rimraf.js b/src/img/node_modules/rimraf/rimraf.js
index eb96c46a..a79162f3 100644
--- a/src/img/node_modules/rimraf/rimraf.js
+++ b/src/img/node_modules/rimraf/rimraf.js
@@ -43,7 +43,7 @@ function rimraf (p, options, cb) {
   var busyTries = 0
   rimraf_(p, options, function CB (er) {
     if (er) {
-      if (isWindows && (er.code === "EBUSY" || er.code === "ENOTEMPTY") &&
+      if ((er.code === "EBUSY" || er.code === "ENOTEMPTY") &&
           busyTries < exports.BUSYTRIES_MAX) {
         busyTries ++
         var time = busyTries * 100
-- 
2.21.0

