{"project":"joyent/illumos-joyent","branch":"master","id":"I28cd1d4864940265e40eecac8df838b0dd72ca5c","number":"3255","subject":"OS-6325 PKCS#11 softtoken should use explicit_bzero Reviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e Reviewed by: Alex Wilson \u003calex.wilson@joyent.com\u003e Approved by: Dan McDonald \u003cdanmcd@joyent.com\u003e","owner":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"url":"https://cr.joyent.us/3255","commitMessage":"OS-6325 PKCS#11 softtoken should use explicit_bzero\nReviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e\nReviewed by: Alex Wilson \u003calex.wilson@joyent.com\u003e\nApproved by: Dan McDonald \u003cdanmcd@joyent.com\u003e\n","createdOn":1516814122,"lastUpdated":1525817604,"open":false,"status":"MERGED","comments":[{"timestamp":1516814122,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 1."},{"timestamp":1516821410,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 1:\n\nOverall suggestion.\n\nYou have many patterns like this:\n\n      /* Determine \"length\". */\n      explicit_bzero(ptr, len);\n      free(ptr);\n\nwhy not function/macro-ize it:\n\n      zero_and_free(ptr, len);\n\n?"},{"timestamp":1516823125,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 1:\n\nI had considered that, but thought it might be better to be more explicit.  Not this change, but it would nice if there was a explicit_bzero+free function that could just take the pointer -- free(3C) already has to know the size of the pointer."},{"timestamp":1518453757,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 1:\n\nSo after doing the CCM/GCM work, even if there isn\u0027t a global function to explicit_bzero + free, it does become handy if there\u0027s a local one.  I\u0027ll post an update with that shortly."},{"timestamp":1518453796,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 2."},{"timestamp":1518456081,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 3: Patch Set 2 was rebased."},{"timestamp":1518460935,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 2:\n\n(5 comments)\n\nFound two classes of issue:\n\n1.) More places you could use cryptodestroy()?\n\n2.) A sloppy use of cryptodestroy where maybe you either meant to use explicit_bzero(), OR you should cryptodestroy() the containing object instead.\n\nI may not have caught every instance of those two types of error."},{"timestamp":1518469296,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 2:\n\n(4 comments)"},{"timestamp":1518469305,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 4."},{"timestamp":1518473075,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 4: Code-Review+1\n\nBetter."},{"timestamp":1520878037,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 4:\n\nSo I have a general question -- why not use freezero(3c) for the cases where you\u0027re doing explicit_bzero followed by free? It\u0027s the same, except it doesn\u0027t require the if () to check for NULL (it\u0027s fine to call freezero with NULL, like free)"},{"timestamp":1520912105,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 5."},{"timestamp":1521237466,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1523033816,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 6."},{"timestamp":1523035873,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 7."},{"timestamp":1523036076,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1523039385,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 7:\n\n(12 comments)\n\nNits..."},{"timestamp":1523042342,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 7:\n\n(12 comments)"},{"timestamp":1523042436,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 8."},{"timestamp":1523043208,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 8: Code-Review+1"},{"timestamp":1525220314,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 8:\n\n(5 comments)"},{"timestamp":1525234015,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 8:\n\n(5 comments)"},{"timestamp":1525234024,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 9."},{"timestamp":1525272842,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 9: Code-Review+1\n\nGood catches, Alex."},{"timestamp":1525294722,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 9: Code-Review+1"},{"timestamp":1525812191,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 10: Commit message was updated."},{"timestamp":1525817462,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 10: Integration-Approval+1"},{"timestamp":1525817550,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 11: Commit message was updated."},{"timestamp":1525817584,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 12: Patch Set 11 was rebased."},{"timestamp":1525817604,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jason King"}],"currentPatchSet":{"number":"12","revision":"28cd1d4864940265e40eecac8df838b0dd72ca5c","parents":["1b2c15a7560df76b763b5eebcf9b645296c0234e"],"ref":"refs/changes/55/3255/12","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1525817584,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525272842,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525294722,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1525817462,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"SUBM","value":"1","grantedOn":1525817604,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaAttrManager.c","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaObjectManager.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelKeys.c","type":"MODIFIED","insertions":5,"deletions":-10},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelObjectUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelSoftCommon.c","type":"MODIFIED","insertions":5,"deletions":-12},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":18,"deletions":-15},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softASN1.c","type":"MODIFIED","insertions":11,"deletions":-38},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAttributeUtil.c","type":"MODIFIED","insertions":23,"deletions":-33},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softBlowfishCrypt.c","type":"MODIFIED","insertions":11,"deletions":-18},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDESCrypt.c","type":"MODIFIED","insertions":7,"deletions":-17},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":26,"deletions":-29},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDigestUtil.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":31,"deletions":-37},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeysUtil.c","type":"MODIFIED","insertions":11,"deletions":-29},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":50,"deletions":-45},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystoreUtil.c","type":"MODIFIED","insertions":75,"deletions":-71},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softMAC.c","type":"MODIFIED","insertions":3,"deletions":-6},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSSL.c","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":6,"deletions":-2}],"sizeInsertions":317,"sizeDeletions":-386},"patchSets":[{"number":"1","revision":"4db27151775500006b6bd3d5703ababacf8be474","parents":["88305497abe82aa90b20abf6c4c7924c43a27e9f"],"ref":"refs/changes/55/3255/1","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1516814122,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaAttrManager.c","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaObjectManager.c","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelKeys.c","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelObjectUtil.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelSoftCommon.c","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softASN1.c","type":"MODIFIED","insertions":11,"deletions":-14},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAttributeUtil.c","type":"MODIFIED","insertions":22,"deletions":-10},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softBlowfishCrypt.c","type":"MODIFIED","insertions":7,"deletions":-4},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDESCrypt.c","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":16,"deletions":-13},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDigestUtil.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":23,"deletions":-19},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeysUtil.c","type":"MODIFIED","insertions":12,"deletions":-9},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":46,"deletions":-11},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystoreUtil.c","type":"MODIFIED","insertions":71,"deletions":-3},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softMAC.c","type":"MODIFIED","insertions":5,"deletions":-4},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSSL.c","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":5,"deletions":-1}],"sizeInsertions":278,"sizeDeletions":-120},{"number":"2","revision":"86973f00237e903912c3ac19df2ff6ca5d317c42","parents":["88305497abe82aa90b20abf6c4c7924c43a27e9f"],"ref":"refs/changes/55/3255/2","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1518453796,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","line":494,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"This is similar to the comments on line 854.  I\u0027ll fix this as well."},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","line":854,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"This doesn\u0027t look right.  The original code doesn\u0027t appear to free aes_ctx-\u003eac_keysched.  Is that a static array in aes_ctx?  If so, maybe you just need cryptodestroy(\u0026soft_aes_ctx-\u003eaes_cbc, len) ?"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","line":854,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uugh..yeah it\u0027s not right.  We can just omit this line.  In the mode init functions (further below in this file), they set aes_ctx_t-\u003eac_keysched \u003d\u003d soft_aes_ctx_t-\u003ekey_sched (using the struct names to hopefully disambiguate).\n\nThe various mode implementations in libsoftoken use aes_ctx_t, while pkcs11_softtoken code uses soft_aes_ctx_t (which duplicates most everything in aes_ctx_t and then tries to keep the two in sync as required for no good reason).\n\nThe call at line 858 (new code) will actually clear out the key schedule.  While it\u0027d be nice to also clear out aes_ctx_t, the actual size varies based on the mode used.  The rewri^Wreorganization of softAESCrypt.c for the CCM/GCM code address that, as it gets rid of soft_aes_ctx_t altogether as they\u0027re no actual use for it."},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","line":158,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"And here?"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","line":296,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"That\u0027s an... interesting way of doing it... fixing this too.."},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","line":182,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"cryptodestroy() here too?"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","line":245,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"And here?"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","line":283,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"And here (and more below as well)?"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","line":283,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/libcryptoutil/common/cryptoutil.h","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/libcryptoutil/common/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/libcryptoutil/common/util.c","type":"MODIFIED","insertions":14,"deletions":-2},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaAttrManager.c","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaObjectManager.c","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelKeys.c","type":"MODIFIED","insertions":6,"deletions":-8},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelObjectUtil.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelSoftCommon.c","type":"MODIFIED","insertions":6,"deletions":-12},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":7,"deletions":-9},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softASN1.c","type":"MODIFIED","insertions":12,"deletions":-38},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAttributeUtil.c","type":"MODIFIED","insertions":22,"deletions":-33},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softBlowfishCrypt.c","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDESCrypt.c","type":"MODIFIED","insertions":6,"deletions":-8},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":18,"deletions":-25},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDigestUtil.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":24,"deletions":-33},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeysUtil.c","type":"MODIFIED","insertions":11,"deletions":-29},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":50,"deletions":-45},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystoreUtil.c","type":"MODIFIED","insertions":75,"deletions":-72},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softMAC.c","type":"MODIFIED","insertions":5,"deletions":-11},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSSL.c","type":"MODIFIED","insertions":8,"deletions":-4},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":7,"deletions":-2}],"sizeInsertions":317,"sizeDeletions":-357},{"number":"3","revision":"b359e474bc1e0d06af9da1a76a51d23f351ad210","parents":["d2b9e3b956fbfcd189ef7088e7602f8f8383ce39"],"ref":"refs/changes/55/3255/3","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1518456081,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"TRIVIAL_REBASE","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/libcryptoutil/common/cryptoutil.h","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/libcryptoutil/common/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/libcryptoutil/common/util.c","type":"MODIFIED","insertions":14,"deletions":-2},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaAttrManager.c","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaObjectManager.c","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelKeys.c","type":"MODIFIED","insertions":6,"deletions":-8},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelObjectUtil.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelSoftCommon.c","type":"MODIFIED","insertions":6,"deletions":-12},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":7,"deletions":-9},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softASN1.c","type":"MODIFIED","insertions":12,"deletions":-38},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAttributeUtil.c","type":"MODIFIED","insertions":22,"deletions":-33},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softBlowfishCrypt.c","type":"MODIFIED","insertions":8,"deletions":-8},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDESCrypt.c","type":"MODIFIED","insertions":6,"deletions":-8},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":18,"deletions":-25},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDigestUtil.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":24,"deletions":-33},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeysUtil.c","type":"MODIFIED","insertions":11,"deletions":-29},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":50,"deletions":-45},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystoreUtil.c","type":"MODIFIED","insertions":75,"deletions":-72},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softMAC.c","type":"MODIFIED","insertions":5,"deletions":-11},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSSL.c","type":"MODIFIED","insertions":8,"deletions":-4},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":7,"deletions":-2}],"sizeInsertions":317,"sizeDeletions":-357},{"number":"4","revision":"f71e4e599989f40fc668b5069deb280c587908f8","parents":["d2b9e3b956fbfcd189ef7088e7602f8f8383ce39"],"ref":"refs/changes/55/3255/4","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1518469305,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1518473075,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/libcryptoutil/common/cryptoutil.h","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/libcryptoutil/common/mapfile-vers","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/lib/libcryptoutil/common/util.c","type":"MODIFIED","insertions":14,"deletions":-2},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaAttrManager.c","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaObjectManager.c","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelKeys.c","type":"MODIFIED","insertions":6,"deletions":-8},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelObjectUtil.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelSoftCommon.c","type":"MODIFIED","insertions":6,"deletions":-12},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":8,"deletions":-18},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softASN1.c","type":"MODIFIED","insertions":12,"deletions":-38},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAttributeUtil.c","type":"MODIFIED","insertions":22,"deletions":-33},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softBlowfishCrypt.c","type":"MODIFIED","insertions":12,"deletions":-20},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDESCrypt.c","type":"MODIFIED","insertions":8,"deletions":-18},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":26,"deletions":-32},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDigestUtil.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":32,"deletions":-41},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeysUtil.c","type":"MODIFIED","insertions":11,"deletions":-29},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":50,"deletions":-45},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystoreUtil.c","type":"MODIFIED","insertions":75,"deletions":-72},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softMAC.c","type":"MODIFIED","insertions":5,"deletions":-11},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSSL.c","type":"MODIFIED","insertions":8,"deletions":-4},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":7,"deletions":-2}],"sizeInsertions":340,"sizeDeletions":-403},{"number":"5","revision":"396bcbd0a0445fefed184d58ccfe0f226b39addd","parents":["d2b9e3b956fbfcd189ef7088e7602f8f8383ce39"],"ref":"refs/changes/55/3255/5","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1520912105,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelSoftCommon.c","line":238,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Should we still set session_p-\u003esign.context to NULL after this, like the old code did? (Does anything else rely on that? I doubt it, but..)\n\nThis question kinda applies to a bunch of these -- did you check none of them still need the \u003d NULL afterwards?"},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelSoftCommon.c","line":238,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"I don\u0027t think so, but better to be safe.  I\u0027ve updated to restore all of those (hopefully I didn\u0027t miss any)."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaAttrManager.c","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaObjectManager.c","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelKeys.c","type":"MODIFIED","insertions":6,"deletions":-8},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelObjectUtil.c","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelSoftCommon.c","type":"MODIFIED","insertions":6,"deletions":-12},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":8,"deletions":-18},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softASN1.c","type":"MODIFIED","insertions":12,"deletions":-38},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAttributeUtil.c","type":"MODIFIED","insertions":22,"deletions":-33},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softBlowfishCrypt.c","type":"MODIFIED","insertions":12,"deletions":-20},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDESCrypt.c","type":"MODIFIED","insertions":8,"deletions":-18},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":26,"deletions":-32},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDigestUtil.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":32,"deletions":-41},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeysUtil.c","type":"MODIFIED","insertions":11,"deletions":-29},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":50,"deletions":-45},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystoreUtil.c","type":"MODIFIED","insertions":75,"deletions":-72},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softMAC.c","type":"MODIFIED","insertions":5,"deletions":-11},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSSL.c","type":"MODIFIED","insertions":8,"deletions":-4},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":7,"deletions":-2}],"sizeInsertions":321,"sizeDeletions":-401},{"number":"6","revision":"2ca76ddbf0a39aa63e1f9678ca539d7b965bc04a","parents":["58cc4d26d2f2ea99f0f9aa988f720d8782bd9bb6"],"ref":"refs/changes/55/3255/6","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1523033816,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaAttrManager.c","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaObjectManager.c","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelKeys.c","type":"MODIFIED","insertions":6,"deletions":-8},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelObjectUtil.c","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelSoftCommon.c","type":"MODIFIED","insertions":6,"deletions":-12},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":8,"deletions":-18},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softASN1.c","type":"MODIFIED","insertions":12,"deletions":-38},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAttributeUtil.c","type":"MODIFIED","insertions":22,"deletions":-33},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softBlowfishCrypt.c","type":"MODIFIED","insertions":12,"deletions":-20},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDESCrypt.c","type":"MODIFIED","insertions":8,"deletions":-18},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":26,"deletions":-32},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDigestUtil.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":32,"deletions":-41},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeysUtil.c","type":"MODIFIED","insertions":11,"deletions":-29},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":50,"deletions":-45},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystoreUtil.c","type":"MODIFIED","insertions":75,"deletions":-72},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softMAC.c","type":"MODIFIED","insertions":5,"deletions":-11},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSSL.c","type":"MODIFIED","insertions":8,"deletions":-4},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":7,"deletions":-2}],"sizeInsertions":320,"sizeDeletions":-401},{"number":"7","revision":"cdcb345702ec0722f87aefd0f48ddeaf1cfd2f0b","parents":["58cc4d26d2f2ea99f0f9aa988f720d8782bd9bb6"],"ref":"refs/changes/55/3255/7","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1523035873,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaObjectManager.c","line":600,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"freezero() here?"},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaObjectManager.c","line":600,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaObjectManager.c","line":865,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"freezero() here?"},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaObjectManager.c","line":865,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaObjectManager.c","line":1499,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"freezero() here?"},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaObjectManager.c","line":1499,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","line":492,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Why not freezero()?"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","line":492,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"The actual size is not easy to determine -- this could actually be cbc_ctx_t, ctr_ctx_t, or something else depending on the mode used (and this all goes away with the CCM/GCM implementation)."},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","line":850,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Why not freezero()?"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","line":850,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Same as above -- we don\u0027t know the actual size here."},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softBlowfishCrypt.c","line":301,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Why not freezero()?"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softBlowfishCrypt.c","line":301,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Similar to AES, we don\u0027t know the actual size due to different modes being possible."},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softBlowfishCrypt.c","line":465,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Why not freezero()?"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softBlowfishCrypt.c","line":465,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Same as above."},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDESCrypt.c","line":452,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Why not freezero()?"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDESCrypt.c","line":452,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Similar to the other mechanisms, we do not know the size."},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDESCrypt.c","line":776,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Why not freezero()?"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDESCrypt.c","line":776,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Same as above."},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","line":1878,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Why not just ```(objp-\u003eobject_type \u003d\u003d TOKEN_PUBLIC)```  ?"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","line":1878,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"It\u0027s probably more of a philosophical thing, since the type of \u0027(expression)\u0027 isn\u0027t boolean_t.  I suppose \u0027!!(expression)\u0027 might be better -- to guarantee the result is always 0 or 1 (and not 0/not zero) -- I\u0027ve never had insomnia enough to make me go through the C standard to determine what the actual result of \u0027(expression)\u0027 is guaranteed to be (i.e. 0/1 vs 0/not zero)."},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSSL.c","line":931,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"NULL check needed?"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSSL.c","line":931,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSSL.c","line":962,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"NULL check needed?"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSSL.c","line":962,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaAttrManager.c","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaObjectManager.c","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelKeys.c","type":"MODIFIED","insertions":5,"deletions":-8},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelObjectUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelSoftCommon.c","type":"MODIFIED","insertions":5,"deletions":-10},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":7,"deletions":-16},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softASN1.c","type":"MODIFIED","insertions":11,"deletions":-38},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAttributeUtil.c","type":"MODIFIED","insertions":22,"deletions":-32},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softBlowfishCrypt.c","type":"MODIFIED","insertions":11,"deletions":-18},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDESCrypt.c","type":"MODIFIED","insertions":7,"deletions":-17},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":26,"deletions":-29},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDigestUtil.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":31,"deletions":-37},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeysUtil.c","type":"MODIFIED","insertions":11,"deletions":-29},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":50,"deletions":-45},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystoreUtil.c","type":"MODIFIED","insertions":75,"deletions":-71},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softMAC.c","type":"MODIFIED","insertions":3,"deletions":-6},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSSL.c","type":"MODIFIED","insertions":7,"deletions":-4},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":6,"deletions":-2}],"sizeInsertions":309,"sizeDeletions":-379},{"number":"8","revision":"88c2304ecd3bc9d2fb9b37aff4f1fa4c1b2090fb","parents":["58cc4d26d2f2ea99f0f9aa988f720d8782bd9bb6"],"ref":"refs/changes/55/3255/8","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1523042436,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1523043208,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"comments":[{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelKeys.c","line":355,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"free(NULL) is perfectly valid, so this \"if\" is superfluous. Probably best to remove it."},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelKeys.c","line":355,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelSoftCommon.c","line":246,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"We can drop this \"if\" too"},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelSoftCommon.c","line":246,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Done"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","line":492,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Does the aes_ctx contain any potentially private data? Should we be freezero()ing it too? There\u0027s a buffer in there, right?"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","line":492,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"It\u0027s hard to say since this code is a mess -- it does some head scratching things where soft_aes_ctx_t is largely a duplicate of all the state in aes_ctx_t, except that sometimes it uses one, sometimes the other.  The followup change that implements CCM and GCM modes cleans this up and just gets rid of soft_aes_ctx_t."},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAttributeUtil.c","line":6327,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Should this not also free sk-\u003esk_value which we malloc\u0027d above? I feel like this should be:\n\n  freezero(sk-\u003esk_value, sizeof (CK_BYTE) * sk-\u003esk_value_len);\n  free(sk);\n  return (CKR_HOST_MEMORY);\n\n(could also get rid of the sizeof (CK_BYTE) both here and above where we alloc it)"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAttributeUtil.c","line":6327,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Yeah -- looks a leak (not the first one in here)."},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softBlowfishCrypt.c","line":301,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Same concern here as for aes_ctx -- should we be zeroing this?"},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softBlowfishCrypt.c","line":301,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Similar to AES -- it\u0027s hard to tell, though probably better safe than sorry"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaAttrManager.c","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaObjectManager.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelKeys.c","type":"MODIFIED","insertions":5,"deletions":-8},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelObjectUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelSoftCommon.c","type":"MODIFIED","insertions":5,"deletions":-10},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":7,"deletions":-16},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softASN1.c","type":"MODIFIED","insertions":11,"deletions":-38},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAttributeUtil.c","type":"MODIFIED","insertions":22,"deletions":-32},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softBlowfishCrypt.c","type":"MODIFIED","insertions":11,"deletions":-18},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDESCrypt.c","type":"MODIFIED","insertions":7,"deletions":-17},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":26,"deletions":-29},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDigestUtil.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":31,"deletions":-37},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeysUtil.c","type":"MODIFIED","insertions":11,"deletions":-29},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":50,"deletions":-45},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystoreUtil.c","type":"MODIFIED","insertions":75,"deletions":-71},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softMAC.c","type":"MODIFIED","insertions":3,"deletions":-6},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSSL.c","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":6,"deletions":-2}],"sizeInsertions":305,"sizeDeletions":-382},{"number":"9","revision":"cb568dc44f38fbd993b393f581bf6ba5e6c59a1d","parents":["58cc4d26d2f2ea99f0f9aa988f720d8782bd9bb6"],"ref":"refs/changes/55/3255/9","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1525234024,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525294722,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525272842,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaAttrManager.c","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaObjectManager.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelKeys.c","type":"MODIFIED","insertions":5,"deletions":-10},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelObjectUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelSoftCommon.c","type":"MODIFIED","insertions":5,"deletions":-12},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":18,"deletions":-15},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softASN1.c","type":"MODIFIED","insertions":11,"deletions":-38},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAttributeUtil.c","type":"MODIFIED","insertions":23,"deletions":-33},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softBlowfishCrypt.c","type":"MODIFIED","insertions":11,"deletions":-18},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDESCrypt.c","type":"MODIFIED","insertions":7,"deletions":-17},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":26,"deletions":-29},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDigestUtil.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":31,"deletions":-37},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeysUtil.c","type":"MODIFIED","insertions":11,"deletions":-29},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":50,"deletions":-45},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystoreUtil.c","type":"MODIFIED","insertions":75,"deletions":-71},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softMAC.c","type":"MODIFIED","insertions":3,"deletions":-6},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSSL.c","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":6,"deletions":-2}],"sizeInsertions":317,"sizeDeletions":-386},{"number":"10","revision":"4e15c3d3d9e9123ad31dc80ea8ed435e67b5dd62","parents":["58cc4d26d2f2ea99f0f9aa988f720d8782bd9bb6"],"ref":"refs/changes/55/3255/10","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1525812191,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525294722,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525272842,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1525817462,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaAttrManager.c","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaObjectManager.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelKeys.c","type":"MODIFIED","insertions":5,"deletions":-10},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelObjectUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelSoftCommon.c","type":"MODIFIED","insertions":5,"deletions":-12},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":18,"deletions":-15},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softASN1.c","type":"MODIFIED","insertions":11,"deletions":-38},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAttributeUtil.c","type":"MODIFIED","insertions":23,"deletions":-33},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softBlowfishCrypt.c","type":"MODIFIED","insertions":11,"deletions":-18},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDESCrypt.c","type":"MODIFIED","insertions":7,"deletions":-17},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":26,"deletions":-29},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDigestUtil.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":31,"deletions":-37},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeysUtil.c","type":"MODIFIED","insertions":11,"deletions":-29},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":50,"deletions":-45},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystoreUtil.c","type":"MODIFIED","insertions":75,"deletions":-71},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softMAC.c","type":"MODIFIED","insertions":3,"deletions":-6},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSSL.c","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":6,"deletions":-2}],"sizeInsertions":317,"sizeDeletions":-386},{"number":"11","revision":"a1b9cfae446529462a5953a5f7880d57b75fa45d","parents":["58cc4d26d2f2ea99f0f9aa988f720d8782bd9bb6"],"ref":"refs/changes/55/3255/11","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1525817550,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525294722,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525272842,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1525817462,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaAttrManager.c","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaObjectManager.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelKeys.c","type":"MODIFIED","insertions":5,"deletions":-10},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelObjectUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelSoftCommon.c","type":"MODIFIED","insertions":5,"deletions":-12},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":18,"deletions":-15},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softASN1.c","type":"MODIFIED","insertions":11,"deletions":-38},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAttributeUtil.c","type":"MODIFIED","insertions":23,"deletions":-33},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softBlowfishCrypt.c","type":"MODIFIED","insertions":11,"deletions":-18},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDESCrypt.c","type":"MODIFIED","insertions":7,"deletions":-17},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":26,"deletions":-29},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDigestUtil.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":31,"deletions":-37},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeysUtil.c","type":"MODIFIED","insertions":11,"deletions":-29},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":50,"deletions":-45},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystoreUtil.c","type":"MODIFIED","insertions":75,"deletions":-71},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softMAC.c","type":"MODIFIED","insertions":3,"deletions":-6},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSSL.c","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":6,"deletions":-2}],"sizeInsertions":317,"sizeDeletions":-386},{"number":"12","revision":"28cd1d4864940265e40eecac8df838b0dd72ca5c","parents":["1b2c15a7560df76b763b5eebcf9b645296c0234e"],"ref":"refs/changes/55/3255/12","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1525817584,"author":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525294722,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"SUBM","value":"1","grantedOn":1525817604,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525272842,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1525817462,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaAttrManager.c","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"usr/src/lib/pkcs11/libpkcs11/common/metaObjectManager.c","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelKeys.c","type":"MODIFIED","insertions":5,"deletions":-10},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelObjectUtil.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelSoftCommon.c","type":"MODIFIED","insertions":5,"deletions":-12},{"file":"usr/src/lib/pkcs11/pkcs11_kernel/common/kernelUtil.c","type":"MODIFIED","insertions":2,"deletions":-5},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAESCrypt.c","type":"MODIFIED","insertions":18,"deletions":-15},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softASN1.c","type":"MODIFIED","insertions":11,"deletions":-38},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softAttributeUtil.c","type":"MODIFIED","insertions":23,"deletions":-33},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softBlowfishCrypt.c","type":"MODIFIED","insertions":11,"deletions":-18},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDESCrypt.c","type":"MODIFIED","insertions":7,"deletions":-17},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDecryptUtil.c","type":"MODIFIED","insertions":26,"deletions":-29},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softDigestUtil.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softEncryptUtil.c","type":"MODIFIED","insertions":31,"deletions":-37},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeysUtil.c","type":"MODIFIED","insertions":11,"deletions":-29},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystore.c","type":"MODIFIED","insertions":50,"deletions":-45},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softKeystoreUtil.c","type":"MODIFIED","insertions":75,"deletions":-71},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softMAC.c","type":"MODIFIED","insertions":3,"deletions":-6},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSSL.c","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSignUtil.c","type":"MODIFIED","insertions":13,"deletions":-6},{"file":"usr/src/lib/pkcs11/pkcs11_softtoken/common/softSlotToken.c","type":"MODIFIED","insertions":6,"deletions":-2}],"sizeInsertions":317,"sizeDeletions":-386}],"allReviewers":[{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}]}