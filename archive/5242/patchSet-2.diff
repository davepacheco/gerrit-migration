From bff75369888f566015f361d3a7775d3a50274662 Mon Sep 17 00:00:00 2001
From: Orlando Vazquez <ovazquez@gmail.com>
Date: Fri, 14 Dec 2018 11:27:41 -0800
Subject: [PATCH] =?UTF-8?q?TRITON-1043=20VMAPI=20workflow=20function=20put?=
 =?UTF-8?q?Vm=20should=20use=20job.params=20rather=20than=20job.params.pay?=
 =?UTF-8?q?load=20Reviewed=20by:=20Todd=20Whiteman=20<todd.whiteman@joyent?=
 =?UTF-8?q?.com>=20Reviewed=20by:=20Pedro=20Palaz=C3=B3n=20Candel=20<pedro?=
 =?UTF-8?q?@joyent.com>=20Approved=20by:=20Todd=20Whiteman=20<todd.whitema?=
 =?UTF-8?q?n@joyent.com>=20Approved=20by:=20Pedro=20Palaz=C3=B3n=20Candel?=
 =?UTF-8?q?=20<pedro@joyent.com>?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 lib/workflows/job-common.js | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/lib/workflows/job-common.js b/lib/workflows/job-common.js
index 5b9f560..4764c16 100644
--- a/lib/workflows/job-common.js
+++ b/lib/workflows/job-common.js
@@ -304,7 +304,7 @@ function pollTask(job, cb) {
 function putVm(job, cb) {
     var vmapi;
 
-    if (job.params.payload.do_not_inventory) {
+    if (job.params.do_not_inventory) {
         cb(null,
             'VM has do_not_inventory set, no need to putVm to VMAPI');
         return;
-- 
2.21.0

