From 6776c0c6ed61f4774bb079657ba06e9df302737e Mon Sep 17 00:00:00 2001
From: Orlando Vazquez <ovazquez@gmail.com>
Date: Fri, 14 Dec 2018 11:26:15 -0800
Subject: [PATCH] TRITON-1043 VMAPI workflow function putVm should use
 job.params rather than job.params.payload

---
 lib/workflows/job-common.js | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/lib/workflows/job-common.js b/lib/workflows/job-common.js
index 5b9f560..4764c16 100644
--- a/lib/workflows/job-common.js
+++ b/lib/workflows/job-common.js
@@ -304,7 +304,7 @@ function pollTask(job, cb) {
 function putVm(job, cb) {
     var vmapi;
 
-    if (job.params.payload.do_not_inventory) {
+    if (job.params.do_not_inventory) {
         cb(null,
             'VM has do_not_inventory set, no need to putVm to VMAPI');
         return;
-- 
2.21.0

