{"project":"joyent/illumos-joyent","branch":"master","id":"Ic0ca16f54c2c85ee7624b42c1082618f184fa9c5","number":"3900","subject":"OS-6926 add support to bhyve zones for ahci disks Reviewed by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Reviewed by: John Levon \u003cjohn.levon@joyent.com\u003e Approved by: John Levon \u003cjohn.levon@joyent.com\u003e","owner":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"url":"https://cr.joyent.us/3900","commitMessage":"OS-6926 add support to bhyve zones for ahci disks\nReviewed by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nReviewed by: John Levon \u003cjohn.levon@joyent.com\u003e\nApproved by: John Levon \u003cjohn.levon@joyent.com\u003e\n","createdOn":1525366891,"lastUpdated":1525968493,"open":false,"status":"MERGED","comments":[{"timestamp":1525366891,"reviewer":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"message":"Uploaded patch set 1."},{"timestamp":1525367824,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1525368748,"reviewer":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"message":"Uploaded patch set 2."},{"timestamp":1525368851,"reviewer":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1525370381,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1525371122,"reviewer":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1525371319,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1525788387,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1525792302,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1525811675,"reviewer":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"message":"Patch Set 3:\n\nhttps://gist.github.com/sjorge/97d6e12a53473a4663ed4d880eadef30\n\nTest of the new boot binary for bhyve after a full clean build of smartos-live."},{"timestamp":1525951127,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1525966597,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1525966668,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1525968493,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Patrick Mooney"}],"currentPatchSet":{"number":"5","revision":"c0ca16f54c2c85ee7624b42c1082618f184fa9c5","parents":["d5480cffa470d8313e316925887ce59a56cd138c"],"ref":"refs/changes/00/3900/5","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1525966668,"author":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525371319,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525788387,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525792302,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1525951127,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"SUBM","value":"1","grantedOn":1525968493,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/lib/brand/bhyve/zone/boot.c","type":"MODIFIED","insertions":22,"deletions":-9}],"sizeInsertions":22,"sizeDeletions":-9},"patchSets":[{"number":"1","revision":"fb80b7457f86973404e10d326943248d896fef45","parents":["11b4b83b31e63fb27818351677574b3560fb5886"],"ref":"refs/changes/00/3900/1","uploader":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"createdOn":1525366891,"author":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/lib/brand/bhyve/zone/boot.c","line":178,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Have you compiled this under DEBUG?  It might complain about lack of initialization."},{"file":"usr/src/lib/brand/bhyve/zone/boot.c","line":178,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"style nit: const char *"},{"file":"usr/src/lib/brand/bhyve/zone/boot.c","line":178,"reviewer":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"message":"Done"},{"file":"usr/src/lib/brand/bhyve/zone/boot.c","line":178,"reviewer":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"message":"I had \u0027const char *emulation \u003d \"virtio-blk\";\u0027 I will change it back and push the change."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/brand/bhyve/zone/boot.c","type":"MODIFIED","insertions":20,"deletions":-9}],"sizeInsertions":20,"sizeDeletions":-9},{"number":"2","revision":"67e57229bc39a1ceaba585bceea24e6d73632ff2","parents":["11b4b83b31e63fb27818351677574b3560fb5886"],"ref":"refs/changes/00/3900/2","uploader":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"createdOn":1525368748,"author":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"isDraft":false,"kind":"REWORK","comments":[{"file":"/COMMIT_MSG","line":7,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"OS-6926 add support to bhyve zones for ahci disks"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/brand/bhyve/zone/boot.c","type":"MODIFIED","insertions":22,"deletions":-9}],"sizeInsertions":22,"sizeDeletions":-9},{"number":"3","revision":"3a039e8443e7444e4e6cd217220f4071525d5143","parents":["11b4b83b31e63fb27818351677574b3560fb5886"],"ref":"refs/changes/00/3900/3","uploader":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"createdOn":1525371122,"author":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525792302,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525371319,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525788387,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1525951127,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/brand/bhyve/zone/boot.c","type":"MODIFIED","insertions":22,"deletions":-9}],"sizeInsertions":22,"sizeDeletions":-9},{"number":"4","revision":"582d0f6dae67a0def263531fd0a3d4d19e6351bb","parents":["d5480cffa470d8313e316925887ce59a56cd138c"],"ref":"refs/changes/00/3900/4","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1525966597,"author":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525792302,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525371319,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525788387,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1525951127,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/lib/brand/bhyve/zone/boot.c","type":"MODIFIED","insertions":22,"deletions":-9}],"sizeInsertions":22,"sizeDeletions":-9},{"number":"5","revision":"c0ca16f54c2c85ee7624b42c1082618f184fa9c5","parents":["d5480cffa470d8313e316925887ce59a56cd138c"],"ref":"refs/changes/00/3900/5","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1525966668,"author":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525792302,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1525968493,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525371319,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525788387,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1525951127,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/lib/brand/bhyve/zone/boot.c","type":"MODIFIED","insertions":22,"deletions":-9}],"sizeInsertions":22,"sizeDeletions":-9}],"allReviewers":[{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}]}