commit b328ddd628c14691631c38a72de6f3a1e2d1768f
Author: Mark Brooks <mark.brooks@joyent.com>
Date:   2019-06-28T16:37:56-04:00 (3 months ago)
    
    OS-7324 upgrade ipmitool to version 1.8.18

diff --git a/ipmitool/Makefile b/ipmitool/Makefile
index eb27e56..a0da703 100644
--- a/ipmitool/Makefile
+++ b/ipmitool/Makefile
@@ -21,7 +21,7 @@
 # Copyright (c) 2012 Joyent Inc., All rights reserved.
 #
 
-VER =	ipmitool-1.8.14
+VER =	ipmitool-1.8.18
 
 include ../Makefile.defs
 
diff --git a/ipmitool/Patches/configure.diff b/ipmitool/Patches/configure.diff
index 40152b8..ca7aee0 100644
--- a/ipmitool/Patches/configure.diff
+++ b/ipmitool/Patches/configure.diff
@@ -1,645 +1,207 @@
-diff -ur ipmitool-1.8.14/configure ipmitool-1.8.14.N/configure
---- ipmitool-1.8.14/configure	2014-05-05 13:35:10.000000000 +0000
-+++ ipmitool-1.8.14.N/configure	2014-05-09 01:13:11.547471526 +0000
-@@ -1,11 +1,9 @@
- #! /bin/sh
- # Guess values for system-dependent variables and create Makefiles.
--# Generated by GNU Autoconf 2.68.
-+# Generated by GNU Autoconf 2.69.
- #
- #
--# Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
--# 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free Software
--# Foundation, Inc.
-+# Copyright (C) 1992-1996, 1998-2012 Free Software Foundation, Inc.
- #
- #
- # This configure script is free software; the Free Software Foundation
-@@ -134,6 +132,31 @@
- # CDPATH.
- (unset CDPATH) >/dev/null 2>&1 && unset CDPATH
- 
-+# Use a proper internal environment variable to ensure we don't fall
-+  # into an infinite loop, continuously re-executing ourselves.
-+  if test x"${_as_can_reexec}" != xno && test "x$CONFIG_SHELL" != x; then
-+    _as_can_reexec=no; export _as_can_reexec;
-+    # We cannot yet assume a decent shell, so we have to provide a
-+# neutralization value for shells without unset; and this also
-+# works around shells that cannot unset nonexistent variables.
-+# Preserve -v and -x to the replacement shell.
-+BASH_ENV=/dev/null
-+ENV=/dev/null
-+(unset BASH_ENV) >/dev/null 2>&1 && unset BASH_ENV ENV
-+case $- in # ((((
-+  *v*x* | *x*v* ) as_opts=-vx ;;
-+  *v* ) as_opts=-v ;;
-+  *x* ) as_opts=-x ;;
-+  * ) as_opts= ;;
-+esac
-+exec $CONFIG_SHELL $as_opts "$as_myself" ${1+"$@"}
-+# Admittedly, this is quite paranoid, since all the known shells bail
-+# out after a failed `exec'.
-+$as_echo "$0: could not re-execute with $CONFIG_SHELL" >&2
-+as_fn_exit 255
-+  fi
-+  # We don't want this to propagate to other subprocesses.
-+          { _as_can_reexec=; unset _as_can_reexec;}
- if test "x$CONFIG_SHELL" = x; then
-   as_bourne_compatible="if test -n \"\${ZSH_VERSION+set}\" && (emulate sh) >/dev/null 2>&1; then :
-   emulate sh
-@@ -167,7 +190,8 @@
- else
-   exitcode=1; echo positional parameters were not saved.
- fi
--test x\$exitcode = x0 || exit 1"
-+test x\$exitcode = x0 || exit 1
-+test -x / || exit 1"
-   as_suggested="  as_lineno_1=";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested" as_lineno_1a=\$LINENO
-   as_lineno_2=";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested" as_lineno_2a=\$LINENO
-   eval 'test \"x\$as_lineno_1'\$as_run'\" != \"x\$as_lineno_2'\$as_run'\" &&
-@@ -220,21 +244,25 @@
- 
- 
-       if test "x$CONFIG_SHELL" != x; then :
--  # We cannot yet assume a decent shell, so we have to provide a
--	# neutralization value for shells without unset; and this also
--	# works around shells that cannot unset nonexistent variables.
--	# Preserve -v and -x to the replacement shell.
--	BASH_ENV=/dev/null
--	ENV=/dev/null
--	(unset BASH_ENV) >/dev/null 2>&1 && unset BASH_ENV ENV
--	export CONFIG_SHELL
--	case $- in # ((((
--	  *v*x* | *x*v* ) as_opts=-vx ;;
--	  *v* ) as_opts=-v ;;
--	  *x* ) as_opts=-x ;;
--	  * ) as_opts= ;;
--	esac
--	exec "$CONFIG_SHELL" $as_opts "$as_myself" ${1+"$@"}
-+  export CONFIG_SHELL
-+             # We cannot yet assume a decent shell, so we have to provide a
-+# neutralization value for shells without unset; and this also
-+# works around shells that cannot unset nonexistent variables.
-+# Preserve -v and -x to the replacement shell.
-+BASH_ENV=/dev/null
-+ENV=/dev/null
-+(unset BASH_ENV) >/dev/null 2>&1 && unset BASH_ENV ENV
-+case $- in # ((((
-+  *v*x* | *x*v* ) as_opts=-vx ;;
-+  *v* ) as_opts=-v ;;
-+  *x* ) as_opts=-x ;;
-+  * ) as_opts= ;;
-+esac
-+exec $CONFIG_SHELL $as_opts "$as_myself" ${1+"$@"}
-+# Admittedly, this is quite paranoid, since all the known shells bail
-+# out after a failed `exec'.
-+$as_echo "$0: could not re-execute with $CONFIG_SHELL" >&2
-+exit 255
+--- ipmitool-1.8.18-32/configure	2016-10-08 08:11:34.000000000 +0000
++++ ipmitool-1.8.18.N/configure	2019-06-27 15:41:38.646191188 +0000
+@@ -2412,7 +2412,7 @@
+     NONENONEs,x,x, &&
+   program_prefix=${target_alias}-
+ 
+-am__api_version='1.14'
++am__api_version='1.15'
+ 
+ # Find a good install program.  We prefer a C program (faster),
+ # so one script is as good as another.  But avoid the broken or
+@@ -2604,7 +2604,7 @@
+ $as_echo "$as_me: WARNING: 'missing' script is too old or missing" >&2;}
  fi
  
-     if test x$as_have_required = xno; then :
-@@ -336,6 +364,14 @@
- 
+-if test x"${install_sh}" != xset; then
++if test x"${install_sh+set}" != xset; then
+   case $am_aux_dir in
+   *\ * | *\	*)
+     install_sh="\${SHELL} '$am_aux_dir/install-sh'" ;;
+@@ -2932,8 +2932,8 @@
+ # <http://lists.gnu.org/archive/html/automake/2012-07/msg00014.html>
+ mkdir_p='$(MKDIR_P)'
+ 
+-# We need awk for the "check" target.  The system "awk" is bad on
+-# some platforms.
++# We need awk for the "check" target (and possibly the TAP driver).  The
++# system "awk" is bad on some platforms.
+ # Always define AMTAR for backward compatibility.  Yes, it's still used
+ # in the wild :-(  We should find a proper way to deprecate it ...
+ AMTAR='$${TAR-tar}'
+@@ -5839,8 +5839,7 @@
+     ;;
+   *)
+     lt_cv_sys_max_cmd_len=`(getconf ARG_MAX) 2> /dev/null`
+-    if test -n "$lt_cv_sys_max_cmd_len" && \
+-	test undefined != "$lt_cv_sys_max_cmd_len"; then
++    if test -n "$lt_cv_sys_max_cmd_len"; then
+       lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \/ 4`
+       lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \* 3`
+     else
+@@ -6241,6 +6240,10 @@
+   fi
+   ;;
  
- } # as_fn_mkdir_p
++gnu*)
++  lt_cv_deplibs_check_method=pass_all
++  ;;
 +
-+# as_fn_executable_p FILE
-+# -----------------------
-+# Test if FILE is an executable regular file.
-+as_fn_executable_p ()
-+{
-+  test -f "$1" && test -x "$1"
-+} # as_fn_executable_p
- # as_fn_append VAR VALUE
- # ----------------------
- # Append the text in VALUE to the end of the definition contained in VAR. Take
-@@ -457,6 +493,10 @@
-   chmod +x "$as_me.lineno" ||
-     { $as_echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2; as_fn_exit 1; }
- 
-+  # If we had to re-execute with $CONFIG_SHELL, we're ensured to have
-+  # already done that, so ensure we don't try to do so again and fall
-+  # in an infinite loop.  This has already happened in practice.
-+  _as_can_reexec=no; export _as_can_reexec
-   # Don't try to exec as it changes $[0], causing all sort of problems
-   # (the dirname of $[0] is not the place where we might find the
-   # original and so on.  Autoconf is especially sensitive to this).
-@@ -491,16 +531,16 @@
-     # ... but there are two gotchas:
-     # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
-     # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
--    # In both cases, we have to default to `cp -p'.
-+    # In both cases, we have to default to `cp -pR'.
-     ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
--      as_ln_s='cp -p'
-+      as_ln_s='cp -pR'
-   elif ln conf$$.file conf$$ 2>/dev/null; then
-     as_ln_s=ln
+ haiku*)
+   lt_cv_deplibs_check_method=pass_all
+   ;;
+@@ -6279,11 +6282,11 @@
+   ;;
+ 
+ # This must be glibc/ELF.
+-linux* | k*bsd*-gnu | kopensolaris*-gnu | gnu*)
++linux* | k*bsd*-gnu | kopensolaris*-gnu)
+   lt_cv_deplibs_check_method=pass_all
+   ;;
+ 
+-netbsd* | netbsdelf*-gnu)
++netbsd*)
+   if echo __ELF__ | $CC -E - | $GREP __ELF__ > /dev/null; then
+     lt_cv_deplibs_check_method='match_pattern /lib[^/]+(\.so\.[0-9]+\.[0-9]+|_pic\.a)$'
    else
--    as_ln_s='cp -p'
-+    as_ln_s='cp -pR'
-   fi
- else
--  as_ln_s='cp -p'
-+  as_ln_s='cp -pR'
- fi
- rm -f conf$$ conf$$.exe conf$$.dir/conf$$.file conf$$.file
- rmdir conf$$.dir 2>/dev/null
-@@ -512,28 +552,8 @@
-   as_mkdir_p=false
- fi
- 
--if test -x / >/dev/null 2>&1; then
--  as_test_x='test -x'
--else
--  if ls -dL / >/dev/null 2>&1; then
--    as_ls_L_option=L
--  else
--    as_ls_L_option=
--  fi
--  as_test_x='
--    eval sh -c '\''
--      if test -d "$1"; then
--	test -d "$1/.";
--      else
--	case $1 in #(
--	-*)set "./$1";;
--	esac;
--	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in #((
--	???[sx]*):;;*)false;;esac;fi
--    '\'' sh
--  '
--fi
--as_executable_p=$as_test_x
-+as_test_x='test -x'
-+as_executable_p=as_fn_executable_p
- 
- # Sed expression to map a string onto a valid CPP name.
- as_tr_cpp="eval sed 'y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g'"
-@@ -1247,8 +1267,6 @@
- if test "x$host_alias" != x; then
-   if test "x$build_alias" = x; then
-     cross_compiling=maybe
--    $as_echo "$as_me: WARNING: if you wanted to set the --build type, don't use --host.
--    If a cross compiler is detected then cross compile mode will be used" >&2
-   elif test "x$build_alias" != "x$host_alias"; then
-     cross_compiling=yes
-   fi
-@@ -1527,9 +1545,9 @@
- if $ac_init_version; then
-   cat <<\_ACEOF
- configure
--generated by GNU Autoconf 2.68
-+generated by GNU Autoconf 2.69
- 
--Copyright (C) 2010 Free Software Foundation, Inc.
-+Copyright (C) 2012 Free Software Foundation, Inc.
- This configure script is free software; the Free Software Foundation
- gives unlimited permission to copy, distribute and modify it.
- _ACEOF
-@@ -1802,7 +1820,7 @@
- 	 test ! -s conftest.err
-        } && test -s conftest$ac_exeext && {
- 	 test "$cross_compiling" = yes ||
--	 $as_test_x conftest$ac_exeext
-+	 test -x conftest$ac_exeext
-        }; then :
-   ac_retval=0
- else
-@@ -1892,7 +1910,7 @@
- running configure, to aid debugging if configure makes a mistake.
- 
- It was created by $as_me, which was
--generated by GNU Autoconf 2.68.  Invocation command line was
-+generated by GNU Autoconf 2.69.  Invocation command line was
- 
-   $ $0 $@
- 
-@@ -2418,7 +2436,7 @@
-     # by default.
-     for ac_prog in ginstall scoinst install; do
-       for ac_exec_ext in '' $ac_executable_extensions; do
--	if { test -f "$as_dir/$ac_prog$ac_exec_ext" && $as_test_x "$as_dir/$ac_prog$ac_exec_ext"; }; then
-+	if as_fn_executable_p "$as_dir/$ac_prog$ac_exec_ext"; then
- 	  if test $ac_prog = install &&
- 	    grep dspmsg "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
- 	    # AIX install.  It has an incompatible calling convention.
-@@ -2587,7 +2605,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_STRIP="${ac_tool_prefix}strip"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -2627,7 +2645,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_ac_ct_STRIP="strip"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -2678,7 +2696,7 @@
-   test -z "$as_dir" && as_dir=.
-     for ac_prog in mkdir gmkdir; do
- 	 for ac_exec_ext in '' $ac_executable_extensions; do
--	   { test -f "$as_dir/$ac_prog$ac_exec_ext" && $as_test_x "$as_dir/$ac_prog$ac_exec_ext"; } || continue
-+	   as_fn_executable_p "$as_dir/$ac_prog$ac_exec_ext" || continue
- 	   case `"$as_dir/$ac_prog$ac_exec_ext" --version 2>&1` in #(
- 	     'mkdir (GNU coreutils) '* | \
- 	     'mkdir (coreutils) '* | \
-@@ -2731,7 +2749,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_AWK="$ac_prog"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -2885,7 +2903,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_CC="${ac_tool_prefix}gcc"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -2925,7 +2943,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_ac_ct_CC="gcc"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -2978,7 +2996,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_CC="${ac_tool_prefix}cc"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -3019,7 +3037,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     if test "$as_dir/$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
-        ac_prog_rejected=yes
-        continue
-@@ -3077,7 +3095,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -3121,7 +3139,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_ac_ct_CC="$ac_prog"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -3567,8 +3585,7 @@
- /* end confdefs.h.  */
- #include <stdarg.h>
- #include <stdio.h>
--#include <sys/types.h>
--#include <sys/stat.h>
-+struct stat;
- /* Most of the following tests are stolen from RCS 5.7's src/conf.sh.  */
- struct buf { int x; };
- FILE * (*rcsopen) (struct buf *, struct stat *, int);
-@@ -3903,7 +3920,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_RPMBUILD="rpmbuild"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -3941,7 +3958,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_SED="sed"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -4118,7 +4135,7 @@
-     for ac_prog in grep ggrep; do
-     for ac_exec_ext in '' $ac_executable_extensions; do
-       ac_path_GREP="$as_dir/$ac_prog$ac_exec_ext"
--      { test -f "$ac_path_GREP" && $as_test_x "$ac_path_GREP"; } || continue
-+      as_fn_executable_p "$ac_path_GREP" || continue
- # Check for GNU ac_path_GREP and select it if it is found.
-   # Check for GNU $ac_path_GREP
- case `"$ac_path_GREP" --version 2>&1` in
-@@ -4184,7 +4201,7 @@
-     for ac_prog in egrep; do
-     for ac_exec_ext in '' $ac_executable_extensions; do
-       ac_path_EGREP="$as_dir/$ac_prog$ac_exec_ext"
--      { test -f "$ac_path_EGREP" && $as_test_x "$ac_path_EGREP"; } || continue
-+      as_fn_executable_p "$ac_path_EGREP" || continue
- # Check for GNU ac_path_EGREP and select it if it is found.
-   # Check for GNU $ac_path_EGREP
- case `"$ac_path_EGREP" --version 2>&1` in
-@@ -4412,11 +4429,11 @@
- int
- main ()
- {
--/* FIXME: Include the comments suggested by Paul. */
+@@ -7360,7 +7363,7 @@
+   rm -rf conftest*
+   ;;
+ 
+-x86_64-*kfreebsd*-gnu|x86_64-*linux*|powerpc*-*linux*| \
++x86_64-*kfreebsd*-gnu|x86_64-*linux*|ppc*-*linux*|powerpc*-*linux*| \
+ s390*-*linux*|s390*-*tpf*|sparc*-*linux*)
+   # Find out which ABI we are using.
+   echo 'int i;' > conftest.$ac_ext
+@@ -7376,19 +7379,9 @@
+ 	    LD="${LD-ld} -m elf_i386_fbsd"
+ 	    ;;
+ 	  x86_64-*linux*)
+-	    case `/usr/bin/file conftest.o` in
+-	      *x86-64*)
+-		LD="${LD-ld} -m elf32_x86_64"
+-		;;
+-	      *)
+-		LD="${LD-ld} -m elf_i386"
+-		;;
+-	    esac
+-	    ;;
+-	  powerpc64le-*)
+-	    LD="${LD-ld} -m elf32lppclinux"
++	    LD="${LD-ld} -m elf_i386"
+ 	    ;;
+-	  powerpc64-*)
++	  ppc64-*linux*|powerpc64-*linux*)
+ 	    LD="${LD-ld} -m elf32ppclinux"
+ 	    ;;
+ 	  s390x-*linux*)
+@@ -7407,10 +7400,7 @@
+ 	  x86_64-*linux*)
+ 	    LD="${LD-ld} -m elf_x86_64"
+ 	    ;;
+-	  powerpcle-*)
+-	    LD="${LD-ld} -m elf64lppc"
+-	    ;;
+-	  powerpc-*)
++	  ppc*-*linux*|powerpc*-*linux*)
+ 	    LD="${LD-ld} -m elf64ppc"
+ 	    ;;
+ 	  s390*-*linux*|s390*-*tpf*)
+@@ -8947,7 +8937,7 @@
+       lt_prog_compiler_static='-non_shared'
+       ;;
+ 
+-    linux* | k*bsd*-gnu | kopensolaris*-gnu | gnu*)
++    linux* | k*bsd*-gnu | kopensolaris*-gnu)
+       case $cc_basename in
+       # old Intel for x86_64 which still supported -KPIC.
+       ecc*)
+@@ -9425,9 +9415,6 @@
+   openbsd*)
+     with_gnu_ld=no
+     ;;
+-  linux* | k*bsd*-gnu | gnu*)
+-    link_all_deplibs=no
+-    ;;
+   esac
+ 
+   ld_shlibs=yes
+@@ -9649,7 +9636,7 @@
+       fi
+       ;;
+ 
+-    netbsd* | netbsdelf*-gnu)
++    netbsd*)
+       if echo __ELF__ | $CC -E - | $GREP __ELF__ >/dev/null; then
+ 	archive_cmds='$LD -Bshareable $libobjs $deplibs $linker_flags -o $lib'
+ 	wlarc=
+@@ -9826,7 +9813,6 @@
+ 	if test "$aix_use_runtimelinking" = yes; then
+ 	  shared_flag="$shared_flag "'${wl}-G'
+ 	fi
+-	link_all_deplibs=no
+       else
+ 	# not using gcc
+ 	if test "$host_cpu" = ia64; then
+@@ -10280,7 +10266,7 @@
+       link_all_deplibs=yes
+       ;;
+ 
+-    netbsd* | netbsdelf*-gnu)
++    netbsd*)
+       if echo __ELF__ | $CC -E - | $GREP __ELF__ >/dev/null; then
+ 	archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'  # a.out
+       else
+@@ -11117,6 +11103,17 @@
+   esac
+   ;;
+ 
++gnu*)
++  version_type=linux # correct to gnu/linux during the next big refactor
++  need_lib_prefix=no
++  need_version=no
++  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}${major} ${libname}${shared_ext}'
++  soname_spec='${libname}${release}${shared_ext}$major'
++  shlibpath_var=LD_LIBRARY_PATH
++  shlibpath_overrides_runpath=no
++  hardcode_into_libs=yes
++  ;;
 +
- #ifndef __cplusplus
--  /* Ultrix mips cc rejects this.  */
-+  /* Ultrix mips cc rejects this sort of thing.  */
-   typedef int charset[2];
--  const charset cs;
-+  const charset cs = { 0, 0 };
-   /* SunOS 4.1.1 cc rejects this.  */
-   char const *const *pcpcc;
-   char **ppc;
-@@ -4433,8 +4450,9 @@
-   ++pcpcc;
-   ppc = (char**) pcpcc;
-   pcpcc = (char const *const *) ppc;
--  { /* SCO 3.2v4 cc rejects this.  */
--    char *t;
-+  { /* SCO 3.2v4 cc rejects this sort of thing.  */
-+    char tx;
-+    char *t = &tx;
-     char const *s = 0 ? (char *) 0 : (char const *) 0;
- 
-     *t++ = 0;
-@@ -4450,10 +4468,10 @@
-     iptr p = 0;
-     ++p;
-   }
--  { /* AIX XL C 1.02.0.0 rejects this saying
-+  { /* AIX XL C 1.02.0.0 rejects this sort of thing, saying
-        "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
--    struct s { int j; const int *ap[3]; };
--    struct s *b; b->j = 5;
-+    struct s { int j; const int *ap[3]; } bx;
-+    struct s *b = &bx; b->j = 5;
-   }
-   { /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
-     const int foo = 10;
-@@ -5157,7 +5175,7 @@
-     for ac_prog in sed gsed; do
-     for ac_exec_ext in '' $ac_executable_extensions; do
-       ac_path_SED="$as_dir/$ac_prog$ac_exec_ext"
--      { test -f "$ac_path_SED" && $as_test_x "$ac_path_SED"; } || continue
-+      as_fn_executable_p "$ac_path_SED" || continue
- # Check for GNU ac_path_SED and select it if it is found.
-   # Check for GNU $ac_path_SED
- case `"$ac_path_SED" --version 2>&1` in
-@@ -5236,7 +5254,7 @@
-     for ac_prog in fgrep; do
-     for ac_exec_ext in '' $ac_executable_extensions; do
-       ac_path_FGREP="$as_dir/$ac_prog$ac_exec_ext"
--      { test -f "$ac_path_FGREP" && $as_test_x "$ac_path_FGREP"; } || continue
-+      as_fn_executable_p "$ac_path_FGREP" || continue
- # Check for GNU ac_path_FGREP and select it if it is found.
-   # Check for GNU $ac_path_FGREP
- case `"$ac_path_FGREP" --version 2>&1` in
-@@ -5492,7 +5510,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_DUMPBIN="$ac_tool_prefix$ac_prog"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -5536,7 +5554,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_ac_ct_DUMPBIN="$ac_prog"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -5949,7 +5967,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_OBJDUMP="${ac_tool_prefix}objdump"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -5989,7 +6007,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_ac_ct_OBJDUMP="objdump"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -6295,7 +6313,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_DLLTOOL="${ac_tool_prefix}dlltool"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -6335,7 +6353,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_ac_ct_DLLTOOL="dlltool"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -6438,7 +6456,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_AR="$ac_tool_prefix$ac_prog"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -6482,7 +6500,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_ac_ct_AR="$ac_prog"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -6607,7 +6625,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_STRIP="${ac_tool_prefix}strip"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -6647,7 +6665,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_ac_ct_STRIP="strip"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -6706,7 +6724,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -6746,7 +6764,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_ac_ct_RANLIB="ranlib"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -7395,7 +7413,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_MANIFEST_TOOL="${ac_tool_prefix}mt"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -7435,7 +7453,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_ac_ct_MANIFEST_TOOL="mt"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -7515,7 +7533,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_DSYMUTIL="${ac_tool_prefix}dsymutil"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -7555,7 +7573,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_ac_ct_DSYMUTIL="dsymutil"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -7607,7 +7625,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_NMEDIT="${ac_tool_prefix}nmedit"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -7647,7 +7665,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_ac_ct_NMEDIT="nmedit"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -7699,7 +7717,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_LIPO="${ac_tool_prefix}lipo"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -7739,7 +7757,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_ac_ct_LIPO="lipo"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -7791,7 +7809,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_OTOOL="${ac_tool_prefix}otool"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -7831,7 +7849,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_ac_ct_OTOOL="otool"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -7883,7 +7901,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_OTOOL64="${ac_tool_prefix}otool64"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -7923,7 +7941,7 @@
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-+  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-     ac_cv_prog_ac_ct_OTOOL64="otool64"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -12447,12 +12465,9 @@
- 	STRIP=gstrip
+ haiku*)
+   version_type=linux # correct to gnu/linux during the next big refactor
+   need_lib_prefix=no
+@@ -11233,7 +11230,7 @@
+   ;;
+ 
+ # This must be glibc/ELF.
+-linux* | k*bsd*-gnu | kopensolaris*-gnu | gnu*)
++linux* | k*bsd*-gnu | kopensolaris*-gnu)
+   version_type=linux # correct to gnu/linux during the next big refactor
+   need_lib_prefix=no
+   need_version=no
+@@ -11297,18 +11294,6 @@
+   dynamic_linker='GNU/Linux ld.so'
+   ;;
+ 
+-netbsdelf*-gnu)
+-  version_type=linux
+-  need_lib_prefix=no
+-  need_version=no
+-  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
+-  soname_spec='${libname}${release}${shared_ext}$major'
+-  shlibpath_var=LD_LIBRARY_PATH
+-  shlibpath_overrides_runpath=no
+-  hardcode_into_libs=yes
+-  dynamic_linker='NetBSD ld.elf_so'
+-  ;;
+-
+ netbsd*)
+   version_type=sunos
+   need_lib_prefix=no
+@@ -12573,11 +12558,9 @@
  	LD=gld
  	AR=gar
--	# openssl libs are in /usr/sfw/lib on solaris 10
+ 	# openssl libs are in /usr/sfw/lib on solaris 10
 -	LIBS="$LIBS -R/usr/sfw/lib"
  	# disable the linux-specific interfaces
 -	xenable_intf_bmc=yes
@@ -649,7 +211,7 @@ diff -ur ipmitool-1.8.14/configure ipmitool-1.8.14.N/configure
  	xenable_intf_lipmi=no
  	xenable_ipmishell=no
  	xenable_all_options=no
-@@ -12520,13 +12535,13 @@
+@@ -12676,13 +12659,13 @@
  fi
  
  
@@ -667,7 +229,7 @@ diff -ur ipmitool-1.8.14/configure ipmitool-1.8.14.N/configure
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
-@@ -12536,42 +12551,42 @@
+@@ -12692,42 +12675,42 @@
  #ifdef __cplusplus
  extern "C"
  #endif
@@ -708,6 +270,63 @@ diff -ur ipmitool-1.8.14/configure ipmitool-1.8.14.N/configure
  fi
  
  
+-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for EVP_sha256 in -lcrypto" >&5
+-$as_echo_n "checking for EVP_sha256 in -lcrypto... " >&6; }
+-if ${ac_cv_lib_crypto_EVP_sha256+:} false; then :
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for sunw_EVP_sha256 in -lsunw_crypto" >&5
++$as_echo_n "checking for sunw_EVP_sha256 in -lsunw_crypto... " >&6; }
++if ${ac_cv_lib_sunw_crypto_sunw_EVP_sha256+:} false; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_check_lib_save_LIBS=$LIBS
+-LIBS="-lcrypto -lcrypto $LIBS"
++LIBS="-lsunw_crypto -lsunw_crypto $LIBS"
+ cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+@@ -12737,30 +12720,30 @@
+ #ifdef __cplusplus
+ extern "C"
+ #endif
+-char EVP_sha256 ();
++char sunw_EVP_sha256 ();
+ int
+ main ()
+ {
+-return EVP_sha256 ();
++return sunw_EVP_sha256 ();
+   ;
+   return 0;
+ }
+ _ACEOF
+ if ac_fn_c_try_link "$LINENO"; then :
+-  ac_cv_lib_crypto_EVP_sha256=yes
++  ac_cv_lib_sunw_crypto_sunw_EVP_sha256=yes
+ else
+-  ac_cv_lib_crypto_EVP_sha256=no
++  ac_cv_lib_sunw_crypto_sunw_EVP_sha256=no
+ fi
+ rm -f core conftest.err conftest.$ac_objext \
+     conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_crypto_EVP_sha256" >&5
+-$as_echo "$ac_cv_lib_crypto_EVP_sha256" >&6; }
+-if test "x$ac_cv_lib_crypto_EVP_sha256" = xyes; then :
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_sunw_crypto_sunw_EVP_sha256" >&5
++$as_echo "$ac_cv_lib_sunw_crypto_sunw_EVP_sha256" >&6; }
++if test "x$ac_cv_lib_sunw_crypto_sunw_EVP_sha256" = xyes; then :
+   if test "x$xenable_internal_sha256" != "xyes"; then
+ 		if test "x$have_crypto" != "xyes"; then
+-			LIBS="$LIBS -lcrypto"
++			LIBS="$LIBS -lsunw_crypto"
+ 		have_sha256=yes
+ 		fi
+ 
+@@ -12770,13 +12753,13 @@
+ fi
+ 
+ 
 -{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for MD5_Init in -lcrypto" >&5
 -$as_echo_n "checking for MD5_Init in -lcrypto... " >&6; }
 -if ${ac_cv_lib_crypto_MD5_Init+:} false; then :
@@ -722,7 +341,7 @@ diff -ur ipmitool-1.8.14/configure ipmitool-1.8.14.N/configure
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
-@@ -12581,30 +12596,30 @@
+@@ -12786,30 +12769,30 @@
  #ifdef __cplusplus
  extern "C"
  #endif
@@ -761,7 +380,7 @@ diff -ur ipmitool-1.8.14/configure ipmitool-1.8.14.N/configure
  	        have_md5=yes
  	    fi
  
-@@ -12614,13 +12629,13 @@
+@@ -12819,13 +12802,13 @@
  fi
  
  
@@ -779,7 +398,7 @@ diff -ur ipmitool-1.8.14/configure ipmitool-1.8.14.N/configure
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
-@@ -12630,30 +12645,30 @@
+@@ -12835,30 +12818,30 @@
  #ifdef __cplusplus
  extern "C"
  #endif
@@ -818,105 +437,12 @@ diff -ur ipmitool-1.8.14/configure ipmitool-1.8.14.N/configure
  	        have_md2=yes
  	    fi
  
-@@ -14182,16 +14197,16 @@
-     # ... but there are two gotchas:
-     # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
-     # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
--    # In both cases, we have to default to `cp -p'.
-+    # In both cases, we have to default to `cp -pR'.
-     ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
--      as_ln_s='cp -p'
-+      as_ln_s='cp -pR'
-   elif ln conf$$.file conf$$ 2>/dev/null; then
-     as_ln_s=ln
-   else
--    as_ln_s='cp -p'
-+    as_ln_s='cp -pR'
-   fi
- else
--  as_ln_s='cp -p'
-+  as_ln_s='cp -pR'
- fi
- rm -f conf$$ conf$$.exe conf$$.dir/conf$$.file conf$$.file
- rmdir conf$$.dir 2>/dev/null
-@@ -14251,28 +14266,16 @@
-   as_mkdir_p=false
- fi
- 
--if test -x / >/dev/null 2>&1; then
--  as_test_x='test -x'
--else
--  if ls -dL / >/dev/null 2>&1; then
--    as_ls_L_option=L
--  else
--    as_ls_L_option=
--  fi
--  as_test_x='
--    eval sh -c '\''
--      if test -d "$1"; then
--	test -d "$1/.";
--      else
--	case $1 in #(
--	-*)set "./$1";;
--	esac;
--	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in #((
--	???[sx]*):;;*)false;;esac;fi
--    '\'' sh
--  '
--fi
--as_executable_p=$as_test_x
-+
-+# as_fn_executable_p FILE
-+# -----------------------
-+# Test if FILE is an executable regular file.
-+as_fn_executable_p ()
-+{
-+  test -f "$1" && test -x "$1"
-+} # as_fn_executable_p
-+as_test_x='test -x'
-+as_executable_p=as_fn_executable_p
- 
- # Sed expression to map a string onto a valid CPP name.
- as_tr_cpp="eval sed 'y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g'"
-@@ -14294,7 +14297,7 @@
- # values after options handling.
- ac_log="
- This file was extended by $as_me, which was
--generated by GNU Autoconf 2.68.  Invocation command line was
-+generated by GNU Autoconf 2.69.  Invocation command line was
- 
-   CONFIG_FILES    = $CONFIG_FILES
-   CONFIG_HEADERS  = $CONFIG_HEADERS
-@@ -14360,10 +14363,10 @@
- ac_cs_config="`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`"
- ac_cs_version="\\
- config.status
--configured by $0, generated by GNU Autoconf 2.68,
-+configured by $0, generated by GNU Autoconf 2.69,
-   with options \\"\$ac_cs_config\\"
- 
--Copyright (C) 2010 Free Software Foundation, Inc.
-+Copyright (C) 2012 Free Software Foundation, Inc.
- This config.status script is free software; the Free Software Foundation
- gives unlimited permission to copy, distribute and modify it."
- 
-@@ -14454,7 +14457,7 @@
- _ACEOF
- cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
- if \$ac_cs_recheck; then
--  set X '$SHELL' '$0' $ac_configure_args \$ac_configure_extra_args --no-create --no-recursion
-+  set X $SHELL '$0' $ac_configure_args \$ac_configure_extra_args --no-create --no-recursion
-   shift
-   \$as_echo "running CONFIG_SHELL=$SHELL \$*" >&6
-   CONFIG_SHELL='$SHELL'
-diff -ur ipmitool-1.8.14/configure.in ipmitool-1.8.14.N/configure.in
---- ipmitool-1.8.14/configure.in	2014-05-05 13:33:26.000000000 +0000
-+++ ipmitool-1.8.14.N/configure.in	2014-05-09 01:13:03.045492119 +0000
-@@ -73,12 +73,9 @@
- 	STRIP=gstrip
+--- ipmitool-1.8.18-32/configure.ac	2016-10-08 08:08:59.000000000 +0000
++++ ipmitool-1.8.18.N/configure.ac	2019-06-26 18:52:59.466303383 +0000
+@@ -74,11 +74,9 @@
  	LD=gld
  	AR=gar
--	# openssl libs are in /usr/sfw/lib on solaris 10
+ 	# openssl libs are in /usr/sfw/lib on solaris 10
 -	LIBS="$LIBS -R/usr/sfw/lib"
  	# disable the linux-specific interfaces
 -	xenable_intf_bmc=yes
@@ -926,7 +452,7 @@ diff -ur ipmitool-1.8.14/configure.in ipmitool-1.8.14.N/configure.in
  	xenable_intf_lipmi=no
  	xenable_ipmishell=no
  	xenable_all_options=no
-@@ -138,31 +135,31 @@
+@@ -154,41 +152,41 @@
  	[xenable_internal_md5=$enableval],
  	[xenable_internal_md5=no])
  
@@ -939,6 +465,19 @@ diff -ur ipmitool-1.8.14/configure.in ipmitool-1.8.14.N/configure.in
 -	[have_crypto=no], [-lcrypto])
 +	[have_crypto=no], [-lsunw_crypto])
  
+-AC_CHECK_LIB([crypto], [EVP_sha256],
++AC_CHECK_LIB([sunw_crypto], [sunw_EVP_sha256],
+ 	[if test "x$xenable_internal_sha256" != "xyes"; then
+ 		if test "x$have_crypto" != "xyes"; then
+-			LIBS="$LIBS -lcrypto"
++			LIBS="$LIBS -lsunw_crypto"
+ 		have_sha256=yes
+ 		fi
+ 		AC_DEFINE(HAVE_CRYPTO_SHA256, [1], [Define to 1 if libcrypto supports SHA256.])
+ 	fi],
+-	[], [-lcrypto])
++	[], [-lsunw_crypto])
+ 
 -AC_CHECK_LIB([crypto], [MD5_Init],
 +AC_CHECK_LIB([sunw_crypto], [sunw_MD5_Init],
  	[if test "x$xenable_internal_md5" != "xyes"; then
diff --git a/ipmitool/Patches/lib.diff b/ipmitool/Patches/lib.diff
new file mode 100644
index 0000000..1b5e04f
--- /dev/null
+++ b/ipmitool/Patches/lib.diff
@@ -0,0 +1,66 @@
+diff -ru ipmitool-1.8.18-32/lib/helper.c ipmitool-1.8.18.N/lib/helper.c
+--- ipmitool-1.8.18-32/lib/helper.c	2016-07-31 06:52:40.000000000 +0000
++++ ipmitool-1.8.18.N/lib/helper.c	2019-06-26 19:32:09.785252820 +0000
+@@ -30,6 +30,7 @@
+  * EVEN IF SUN HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.
+  */
+ #define _POSIX_SOURCE
++#define __EXTENSIONS__
+ #define /* glibc 2.19 and earlier */ _BSD_SOURCE || \
+ 	/* Since glibc 2.20 */_DEFAULT_SOURCE || \
+ 	_XOPEN_SOURCE >= 500 || \
+diff -ru ipmitool-1.8.18-32/lib/ipmi_hpmfwupg.c ipmitool-1.8.18.N/lib/ipmi_hpmfwupg.c
+--- ipmitool-1.8.18-32/lib/ipmi_hpmfwupg.c	2016-06-29 18:01:49.000000000 +0000
++++ ipmitool-1.8.18.N/lib/ipmi_hpmfwupg.c	2019-06-26 19:07:01.800434943 +0000
+@@ -46,6 +46,7 @@
+ #include <stdio.h>
+ #include <time.h>
+ #include <sys/param.h>
++#include <sys/sysmacros.h>
+ #include <unistd.h>
+ 
+ #if HAVE_CONFIG_H
+diff -ru ipmitool-1.8.18-32/lib/ipmi_isol.c ipmitool-1.8.18.N/lib/ipmi_isol.c
+--- ipmitool-1.8.18-32/lib/ipmi_isol.c	2016-03-13 10:14:08.000000000 +0000
++++ ipmitool-1.8.18.N/lib/ipmi_isol.c	2019-06-27 15:47:22.231230537 +0000
+@@ -30,6 +30,7 @@
+  * EVEN IF SUN HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.
+  */
+ #define _XOPEN_SOURCE
++#define __EXTENSIONS__
+ 
+ #include <stdlib.h>
+ #include <string.h>
+diff -ru ipmitool-1.8.18-32/lib/ipmi_main.c ipmitool-1.8.18.N/lib/ipmi_main.c
+--- ipmitool-1.8.18-32/lib/ipmi_main.c	2016-07-31 06:56:33.000000000 +0000
++++ ipmitool-1.8.18.N/lib/ipmi_main.c	2019-06-27 15:49:29.001572468 +0000
+@@ -34,6 +34,7 @@
+ 	(_XOPEN_SOURCE >= 500 || \
+ 	_XOPEN_SOURCE && _XOPEN_SOURCE_EXTENDED) && \
+ 	!(_POSIX_C_SOURCE >= 200112L || _XOPEN_SOURCE >= 600)
++#define __EXTENSIONS__
+ 
+ #include <stdlib.h>
+ #include <stdio.h>
+diff -ru ipmitool-1.8.18-32/lib/ipmi_sol.c ipmitool-1.8.18.N/lib/ipmi_sol.c
+--- ipmitool-1.8.18-32/lib/ipmi_sol.c	2016-06-29 18:06:29.000000000 +0000
++++ ipmitool-1.8.18.N/lib/ipmi_sol.c	2019-06-27 15:47:54.602184146 +0000
+@@ -34,6 +34,7 @@
+ 	(_XOPEN_SOURCE >= 500 || \
+                        _XOPEN_SOURCE && _XOPEN_SOURCE_EXTENDED) && \
+ 	!(_POSIX_C_SOURCE >= 200809L || _XOPEN_SOURCE >= 700)
++#define __EXTENSIONS__
+ 
+ #include <stdlib.h>
+ #include <string.h>
+diff -ru ipmitool-1.8.18-32/lib/ipmi_sunoem.c ipmitool-1.8.18.N/lib/ipmi_sunoem.c
+--- ipmitool-1.8.18-32/lib/ipmi_sunoem.c	2016-05-30 18:28:40.000000000 +0000
++++ ipmitool-1.8.18.N/lib/ipmi_sunoem.c	2019-06-27 15:49:54.034008862 +0000
+@@ -30,6 +30,7 @@
+  * EVEN IF SUN HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.
+  */
+ #define _XOPEN_SOURCE
++#define __EXTENSIONS__
+ 
+ #include <stdlib.h>
+ #include <stdio.h>
diff --git a/ipmitool/Patches/macro.diff b/ipmitool/Patches/macro.diff
deleted file mode 100644
index 9610a67..0000000
--- a/ipmitool/Patches/macro.diff
+++ /dev/null
@@ -1,11 +0,0 @@
-diff -ur ipmitool-1.8.14/lib/ipmi_hpmfwupg.c ipmitool-1.8.14.N/lib/ipmi_hpmfwupg.c
---- ipmitool-1.8.14/lib/ipmi_hpmfwupg.c	2014-04-17 19:13:42.000000000 +0000
-+++ ipmitool-1.8.14.N/lib/ipmi_hpmfwupg.c	2014-05-09 01:19:10.569689015 +0000
-@@ -41,6 +41,7 @@
- #include <stdio.h>
- #include <time.h>
- #include <sys/param.h>
-+#include <sys/sysmacros.h>
- 
- #if HAVE_CONFIG_H
- # include <config.h>
diff --git a/ipmitool/Patches/s6_addr16.diff b/ipmitool/Patches/s6_addr16.diff
deleted file mode 100644
index d695d5a..0000000
--- a/ipmitool/Patches/s6_addr16.diff
+++ /dev/null
@@ -1,16 +0,0 @@
-diff -ur ipmitool-1.8.14/src/plugins/ipmi_intf.c ipmitool-1.8.14.N/src/plugins/ipmi_intf.c
---- ipmitool-1.8.14/src/plugins/ipmi_intf.c	2014-04-17 19:13:42.000000000 +0000
-+++ ipmitool-1.8.14.N/src/plugins/ipmi_intf.c	2014-05-09 01:17:45.847307379 +0000
-@@ -464,10 +464,12 @@
- 							 * byte. See also this page:
- 							 * http://www.freebsd.org/doc/en/books/developers-handbook/ipv6.html
- 							 */
-+#if 0
- 							if (IN6_IS_ADDR_LINKLOCAL(&tmp6->sin6_addr)
- 									&& (tmp6->sin6_addr.s6_addr16[1] != 0)) {
- 								addr6->sin6_scope_id = ntohs(tmp6->sin6_addr.s6_addr16[1]);
- 							}
-+#endif
- 						}
- 
- 						/* OK, now try to connect with the scope id from this interface address */
diff --git a/ipmitool/Patches/src.diff b/ipmitool/Patches/src.diff
new file mode 100644
index 0000000..c64168c
--- /dev/null
+++ b/ipmitool/Patches/src.diff
@@ -0,0 +1,35 @@
+diff -ru ipmitool-1.8.18-32/src/plugins/ipmi_intf.c ipmitool-1.8.18.N/src/plugins/ipmi_intf.c
+--- ipmitool-1.8.18-32/src/plugins/ipmi_intf.c	2016-07-31 06:52:40.000000000 +0000
++++ ipmitool-1.8.18.N/src/plugins/ipmi_intf.c	2019-06-27 15:50:11.662546324 +0000
+@@ -32,6 +32,7 @@
+ #define _XOPEN_SOURCE 700
+ #define _GNU_SOURCE 1
+ #define _DARWIN_C_SOURCE 1
++#define __EXTENSIONS__
+ 
+ #include <stdio.h>
+ #include <stdlib.h>
+@@ -439,10 +440,12 @@
+ 							 * byte. See also this page:
+ 							 * http://www.freebsd.org/doc/en/books/developers-handbook/ipv6.html
+ 							 */
++#if 0
+ 							if (IN6_IS_ADDR_LINKLOCAL(&tmp6->sin6_addr)
+ 									&& (tmp6->sin6_addr.s6_addr[1] != 0)) {
+ 								addr6->sin6_scope_id = ntohs(tmp6->sin6_addr.s6_addr[1]);
+ 							}
++#endif
+ 						}
+ 
+ 						/* OK, now try to connect with the scope id from this interface address */
+diff -ru ipmitool-1.8.18-32/src/plugins/open/open.c ipmitool-1.8.18.N/src/plugins/open/open.c
+--- ipmitool-1.8.18-32/src/plugins/open/open.c	2016-05-31 20:26:19.000000000 +0000
++++ ipmitool-1.8.18.N/src/plugins/open/open.c	2019-06-27 15:07:44.255731266 +0000
+@@ -30,6 +30,7 @@
+  * EVEN IF SUN HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.
+  */
+ #define _POSIX_C_SOURCE 1
++#define __EXTENSIONS__
+ 
+ #include <stdio.h>
+ #include <fcntl.h>
diff --git a/ipmitool/ipmitool-1.8.14.tar.gz b/ipmitool/ipmitool-1.8.14.tar.gz
deleted file mode 100644
index 4073392..0000000
Binary files a/ipmitool/ipmitool-1.8.14.tar.gz and /dev/null differ
diff --git a/ipmitool/ipmitool-1.8.18.tar.gz b/ipmitool/ipmitool-1.8.18.tar.gz
new file mode 100644
index 0000000..260dda1
Binary files /dev/null and b/ipmitool/ipmitool-1.8.18.tar.gz differ
