{"project":"joyent/sdc-fwapi","branch":"master","topic":"FWAPI-234","id":"I379c8af4c872c6e06ce73adb82d38f7846e38d05","number":"1089","subject":"FWAPI-234 Firewall rule queries should be validated","owner":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"url":"https://cr.joyent.us/1089","commitMessage":"FWAPI-234 Firewall rule queries should be validated\n","createdOn":1481161159,"lastUpdated":1518505867,"open":false,"status":"ABANDONED","comments":[{"timestamp":1481161159,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 1."},{"timestamp":1481161191,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1481161266,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Topic set to FWAPI-234"},{"timestamp":1481161476,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 2: Commit message was updated."},{"timestamp":1481332594,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 2:\n\n(9 comments)"},{"timestamp":1481581139,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 3."},{"timestamp":1481581169,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1481758648,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 4."},{"timestamp":1481758680,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1486418972,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 5."},{"timestamp":1486418999,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1486423636,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 6."},{"timestamp":1486423785,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing-1\n\n(3 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1486425632,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 7."},{"timestamp":1486426467,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 8."},{"timestamp":1486426633,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1486506265,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 8: Code-Review+1\n\n(6 comments)\n\nLooks good, but we\u0027ll want to make sure that the list schema has the other fields that you can search on."},{"timestamp":1488415655,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 9."},{"timestamp":1488415823,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1488588892,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 9:\n\n(5 comments)"},{"timestamp":1488849190,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 10."},{"timestamp":1488849329,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1488932228,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 11."},{"timestamp":1488932387,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1489009330,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 12."},{"timestamp":1489009459,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 12: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1489012025,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 13."},{"timestamp":1489012215,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 13: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1489101968,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 13: Code-Review+1\n\n(3 comments)\n\nLooks good. Just several small notes. Once those are fixed, can you add testing notes to the ticket?"},{"timestamp":1492815645,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 14."},{"timestamp":1492816824,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 14: Code-Review+1\n\n(1 comment)"},{"timestamp":1492818955,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 15."},{"timestamp":1492819112,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 15: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1493938071,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Patch Set 16: Patch Set 15 was rebased"},{"timestamp":1493938137,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 16:\n\n\"make check\" passed ok"},{"timestamp":1518505293,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 17."},{"timestamp":1518505867,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Abandoned\n\nApparently, I pushed the wrong branch onto Gerrit, which simply makes the history confusing. I am abandoning this CR and will push the proper branch to a new one."}],"currentPatchSet":{"number":"17","revision":"379c8af4c872c6e06ce73adb82d38f7846e38d05","parents":["09aa98b6fab4711f313e4d381b201cfb9065aa4e"],"ref":"refs/changes/89/1089/17","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1518505293,"author":{"name":"Nick Zivkovic","email":"zivkovic.nick@gmail.com","username":""},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/firewalls/vms.js","type":"MODIFIED","insertions":34,"deletions":-41},{"file":"lib/endpoints/resolve.js","type":"MODIFIED","insertions":49,"deletions":-30},{"file":"lib/endpoints/rules/index.js","type":"MODIFIED","insertions":60,"deletions":-38},{"file":"lib/endpoints/updates.js","type":"MODIFIED","insertions":38,"deletions":-46},{"file":"lib/persist.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/rule.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/util/array.js","type":"DELETED","insertions":0,"deletions":-45},{"file":"lib/util/common.js","type":"ADDED","insertions":124,"deletions":0},{"file":"lib/util/constants.js","type":"MODIFIED","insertions":20,"deletions":-7},{"file":"lib/util/ip.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/util/validate.js","type":"DELETED","insertions":0,"deletions":-106},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/config.json","type":"ADDED","insertions":13,"deletions":0},{"file":"test/config.json.coal","type":"ADDED","insertions":13,"deletions":0},{"file":"test/config.json.emy","type":"ADDED","insertions":13,"deletions":0},{"file":"test/integration/get.test.js","type":"MODIFIED","insertions":318,"deletions":-17},{"file":"test/integration/resolve.test.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/lib/vm.js","type":"MODIFIED","insertions":11,"deletions":0},{"file":"test/unit/data/migration.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":5,"deletions":-4}],"sizeInsertions":707,"sizeDeletions":-340},"patchSets":[{"number":"1","revision":"1daa02f21d58f953df305638dbed96f457001f9c","parents":["af362d0b912f6c457afbe3a34cbd6ec1d723ab2f"],"ref":"refs/changes/89/1089/1","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1481161159,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1481161191,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/rules/index.js","type":"MODIFIED","insertions":49,"deletions":-38},{"file":"lib/persist.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/rule.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/util/array.js","type":"DELETED","insertions":0,"deletions":-43},{"file":"lib/util/constants.js","type":"MODIFIED","insertions":19,"deletions":-12},{"file":"lib/util/validate.js","type":"DELETED","insertions":0,"deletions":-104},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/integration/get.test.js","type":"MODIFIED","insertions":316,"deletions":-17},{"file":"test/lib/vm.js","type":"MODIFIED","insertions":12,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":5,"deletions":-4}],"sizeInsertions":408,"sizeDeletions":-224},{"number":"2","revision":"36ad737b22422d5ddad9b352b1fe1616b7a8849d","parents":["af362d0b912f6c457afbe3a34cbd6ec1d723ab2f"],"ref":"refs/changes/89/1089/2","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1481161476,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1481161191,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/endpoints/rules/index.js","line":90,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"While we\u0027re modifying this line, can you move the \"return\" to its own line?"},{"file":"lib/endpoints/rules/index.js","line":98,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Here, also."},{"file":"lib/endpoints/rules/index.js","line":104,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Remove the \"return\"."},{"file":"lib/endpoints/rules/index.js","line":203,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"And here."},{"file":"lib/endpoints/rules/index.js","line":208,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Here, too."},{"file":"lib/endpoints/rules/index.js","line":214,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Here."},{"file":"lib/endpoints/rules/index.js","line":219,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Remove \"return\"."},{"file":"package.json","line":27,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"s/_/-/"},{"file":"test/integration/get.test.js","line":39,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"The checks don\u0027t care if we use actual VMs, right? I think you can just use UUIDs create from mod_uuid.v4() to do these tests, instead of looking up real VMs."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/rules/index.js","type":"MODIFIED","insertions":49,"deletions":-38},{"file":"lib/persist.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/rule.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/util/array.js","type":"DELETED","insertions":0,"deletions":-43},{"file":"lib/util/constants.js","type":"MODIFIED","insertions":19,"deletions":-12},{"file":"lib/util/validate.js","type":"DELETED","insertions":0,"deletions":-104},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/integration/get.test.js","type":"MODIFIED","insertions":316,"deletions":-17},{"file":"test/lib/vm.js","type":"MODIFIED","insertions":12,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":5,"deletions":-4}],"sizeInsertions":408,"sizeDeletions":-224},{"number":"3","revision":"6930f5a5a1e5add1b2118c887e66651588353dff","parents":["af362d0b912f6c457afbe3a34cbd6ec1d723ab2f"],"ref":"refs/changes/89/1089/3","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1481581139,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1481581169,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/rules/index.js","type":"MODIFIED","insertions":55,"deletions":-38},{"file":"lib/persist.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/rule.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/util/array.js","type":"DELETED","insertions":0,"deletions":-43},{"file":"lib/util/constants.js","type":"MODIFIED","insertions":19,"deletions":-12},{"file":"lib/util/validate.js","type":"DELETED","insertions":0,"deletions":-104},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/integration/get.test.js","type":"MODIFIED","insertions":292,"deletions":-17},{"file":"test/lib/vm.js","type":"MODIFIED","insertions":12,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":5,"deletions":-4}],"sizeInsertions":390,"sizeDeletions":-224},{"number":"4","revision":"a2192a0bab602810f6679a742ee7b312c2fffa12","parents":["af362d0b912f6c457afbe3a34cbd6ec1d723ab2f"],"ref":"refs/changes/89/1089/4","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1481758648,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1481758680,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/rules/index.js","type":"MODIFIED","insertions":55,"deletions":-38},{"file":"lib/persist.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/rule.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/util/array.js","type":"DELETED","insertions":0,"deletions":-43},{"file":"lib/util/constants.js","type":"MODIFIED","insertions":19,"deletions":-12},{"file":"lib/util/validate.js","type":"DELETED","insertions":0,"deletions":-104},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/integration/get.test.js","type":"MODIFIED","insertions":285,"deletions":-17},{"file":"test/lib/vm.js","type":"MODIFIED","insertions":12,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":5,"deletions":-4}],"sizeInsertions":383,"sizeDeletions":-224},{"number":"5","revision":"0bdb8a90d1cebf44d0bfdfce533d5314c7af8231","parents":["af362d0b912f6c457afbe3a34cbd6ec1d723ab2f"],"ref":"refs/changes/89/1089/5","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1486418972,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1486418999,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/rules/index.js","type":"MODIFIED","insertions":55,"deletions":-38},{"file":"lib/persist.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/rule.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/util/array.js","type":"DELETED","insertions":0,"deletions":-43},{"file":"lib/util/constants.js","type":"MODIFIED","insertions":19,"deletions":-12},{"file":"lib/util/validate.js","type":"DELETED","insertions":0,"deletions":-104},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/integration/get.test.js","type":"MODIFIED","insertions":285,"deletions":-17},{"file":"test/lib/vm.js","type":"MODIFIED","insertions":12,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":5,"deletions":-4}],"sizeInsertions":383,"sizeDeletions":-224},{"number":"6","revision":"edbe78f31d4dda8fe355e6eb4102bc3b1d31ceb6","parents":["97f6648f4e1169f1068d3180fb0e06b2df398283"],"ref":"refs/changes/89/1089/6","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1486423636,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1486423785,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/endpoints/rules/index.js","line":23,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"\u0027util\u0027 is defined but never used"},{"file":"lib/endpoints/rules/index.js","line":211,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"\u0027validated\u0027 is defined but never used"},{"file":"lib/persist.js","line":21,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"\u0027util_obj\u0027 is defined but never used"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/endpoints/rules/index.js","type":"MODIFIED","insertions":55,"deletions":-38},{"file":"lib/persist.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/rule.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/util/array.js","type":"DELETED","insertions":0,"deletions":-45},{"file":"lib/util/constants.js","type":"MODIFIED","insertions":19,"deletions":-5},{"file":"lib/util/validate.js","type":"DELETED","insertions":0,"deletions":-106},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/integration/get.test.js","type":"MODIFIED","insertions":284,"deletions":-17},{"file":"test/lib/vm.js","type":"MODIFIED","insertions":12,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":5,"deletions":-4}],"sizeInsertions":383,"sizeDeletions":-222},{"number":"7","revision":"fd1abf1f9ab7f3e2e8e4c0f7e0ce3fd4eeb64a4e","parents":["97f6648f4e1169f1068d3180fb0e06b2df398283"],"ref":"refs/changes/89/1089/7","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1486425632,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/endpoints/rules/index.js","type":"MODIFIED","insertions":54,"deletions":-38},{"file":"lib/persist.js","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"lib/rule.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/util/array.js","type":"DELETED","insertions":0,"deletions":-45},{"file":"lib/util/constants.js","type":"MODIFIED","insertions":19,"deletions":-7},{"file":"lib/util/validate.js","type":"DELETED","insertions":0,"deletions":-106},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/integration/get.test.js","type":"MODIFIED","insertions":282,"deletions":-17},{"file":"test/lib/vm.js","type":"MODIFIED","insertions":12,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":5,"deletions":-4}],"sizeInsertions":379,"sizeDeletions":-224},{"number":"8","revision":"eecf9040da9243eda52226c1d789d947164062c4","parents":["97f6648f4e1169f1068d3180fb0e06b2df398283"],"ref":"refs/changes/89/1089/8","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1486426467,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1486506265,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1486426633,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/endpoints/rules/index.js","line":0,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Let\u0027s make the schemas globals, like LIST_SCHEMA and DELETE_SCHEMA."},{"file":"lib/endpoints/rules/index.js","line":87,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Some fields are missing: \n\n- enabled (boolean)\n- port (array of numbers and \u0027all\u0027)\n- protocol (one of tcp, udp, icmp, icmp6)\n- action (one of block or allow), global (boolean)\n- tag (can be a string, array, or object, so we may as well just pass through all values here)\n- wildcard (array of strings)"},{"file":"test/integration/get.test.js","line":37,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"These don\u0027t need to be inside a test. They can remain a constant, like before."},{"file":"test/integration/get.test.js","line":174,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I don\u0027t think we need this, right? mod_rule.list() will call t.end() itself if a cb isn\u0027t passed."},{"file":"test/integration/get.test.js","line":356,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Let\u0027s also add a list on a subnet like 10.99.99.0/23 and make sure that it gets rejected for having bits set to the right of the mask."},{"file":"test/integration/get.test.js","line":356,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Can you add this test?"},{"file":"test/lib/vm.js","line":478,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I don\u0027t think we need these with the latest patchset anymore, right?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/rules/index.js","type":"MODIFIED","insertions":54,"deletions":-38},{"file":"lib/persist.js","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"lib/rule.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/util/array.js","type":"DELETED","insertions":0,"deletions":-45},{"file":"lib/util/constants.js","type":"MODIFIED","insertions":19,"deletions":-7},{"file":"lib/util/validate.js","type":"DELETED","insertions":0,"deletions":-106},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/integration/get.test.js","type":"MODIFIED","insertions":282,"deletions":-17},{"file":"test/lib/vm.js","type":"MODIFIED","insertions":12,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":5,"deletions":-4}],"sizeInsertions":378,"sizeDeletions":-223},{"number":"9","revision":"f2a83ee5fa97b8075f8d178a9ceeb81dceef2cd0","parents":["97f6648f4e1169f1068d3180fb0e06b2df398283"],"ref":"refs/changes/89/1089/9","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1488415655,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1488415823,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/endpoints/rules/index.js","line":27,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Can you create a:\n\n// --- Globals\n\nsection here, and place the *_SCHEMA objects in it?"},{"file":"lib/endpoints/rules/index.js","line":74,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Can you move the validate* up to the Internal section?"},{"file":"lib/endpoints/rules/index.js","line":84,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"This should check that the input is an array or a string. If it\u0027s a string, it can skip the iteration below. (Although it would run, just iterate over each character.)"},{"file":"test/integration/get.test.js","line":0,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"The successful mod_rule.list() tests should check for some of the expected results. You can provide an \"exp\" array to check for the rules you expect."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/rules/index.js","type":"MODIFIED","insertions":96,"deletions":-37},{"file":"lib/persist.js","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"lib/rule.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/util/array.js","type":"DELETED","insertions":0,"deletions":-45},{"file":"lib/util/constants.js","type":"MODIFIED","insertions":19,"deletions":-7},{"file":"lib/util/validate.js","type":"DELETED","insertions":0,"deletions":-106},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/integration/get.test.js","type":"MODIFIED","insertions":365,"deletions":0},{"file":"test/lib/vm.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"tools/rsync-to","type":"MODIFIED","insertions":5,"deletions":-4}],"sizeInsertions":491,"sizeDeletions":-206},{"number":"10","revision":"6aad678ec961a3d8f2ad4d7a2cdda7e8379cc9ef","parents":["97f6648f4e1169f1068d3180fb0e06b2df398283"],"ref":"refs/changes/89/1089/10","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1488849190,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1488849329,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/rules/index.js","type":"MODIFIED","insertions":103,"deletions":-38},{"file":"lib/persist.js","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"lib/rule.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/util/array.js","type":"DELETED","insertions":0,"deletions":-45},{"file":"lib/util/constants.js","type":"MODIFIED","insertions":19,"deletions":-7},{"file":"lib/util/validate.js","type":"DELETED","insertions":0,"deletions":-106},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/integration/get.test.js","type":"MODIFIED","insertions":377,"deletions":0},{"file":"test/lib/vm.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"tools/rsync-to","type":"MODIFIED","insertions":5,"deletions":-4}],"sizeInsertions":510,"sizeDeletions":-207},{"number":"11","revision":"0cf2ad09a16f4b8617d72c9a0ac8f09c39205ebb","parents":["97f6648f4e1169f1068d3180fb0e06b2df398283"],"ref":"refs/changes/89/1089/11","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1488932228,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1488932387,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/rules/index.js","type":"MODIFIED","insertions":103,"deletions":-38},{"file":"lib/persist.js","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"lib/rule.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/util/array.js","type":"DELETED","insertions":0,"deletions":-45},{"file":"lib/util/constants.js","type":"MODIFIED","insertions":19,"deletions":-7},{"file":"lib/util/validate.js","type":"DELETED","insertions":0,"deletions":-106},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/integration/get.test.js","type":"MODIFIED","insertions":394,"deletions":-1},{"file":"test/lib/vm.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"tools/rsync-to","type":"MODIFIED","insertions":5,"deletions":-4}],"sizeInsertions":527,"sizeDeletions":-208},{"number":"12","revision":"eba783c782cc7c6d9b4e8fa92940c95ba066cfe4","parents":["97f6648f4e1169f1068d3180fb0e06b2df398283"],"ref":"refs/changes/89/1089/12","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1489009330,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1489009459,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/integration/get.test.js","line":100,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"\u0027err\u0027 is defined but never used"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/rules/index.js","type":"MODIFIED","insertions":103,"deletions":-38},{"file":"lib/persist.js","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"lib/rule.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/util/array.js","type":"DELETED","insertions":0,"deletions":-45},{"file":"lib/util/constants.js","type":"MODIFIED","insertions":19,"deletions":-7},{"file":"lib/util/validate.js","type":"DELETED","insertions":0,"deletions":-106},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/integration/get.test.js","type":"MODIFIED","insertions":406,"deletions":-1},{"file":"test/lib/vm.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"tools/rsync-to","type":"MODIFIED","insertions":5,"deletions":-4}],"sizeInsertions":539,"sizeDeletions":-208},{"number":"13","revision":"23c009109f25105d771ea69c415724973a4f5b38","parents":["97f6648f4e1169f1068d3180fb0e06b2df398283"],"ref":"refs/changes/89/1089/13","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1489012025,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489101968,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489012215,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/endpoints/rules/index.js","line":50,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"This should also allow for an owner_uuid field, which gets passed by CloudAPI to prevent users from deleting global rules.."},{"file":"package.json","line":33,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"This can be updated to 0.1.2."},{"file":"test/integration/get.test.js","line":50,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Can you leave this a global so that we can concatenate it to PRE_EXISTING_GLOBALS in the global search test below?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/rules/index.js","type":"MODIFIED","insertions":103,"deletions":-38},{"file":"lib/persist.js","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"lib/rule.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/util/array.js","type":"DELETED","insertions":0,"deletions":-45},{"file":"lib/util/constants.js","type":"MODIFIED","insertions":19,"deletions":-7},{"file":"lib/util/validate.js","type":"DELETED","insertions":0,"deletions":-106},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/integration/get.test.js","type":"MODIFIED","insertions":406,"deletions":-1},{"file":"test/lib/vm.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"tools/rsync-to","type":"MODIFIED","insertions":5,"deletions":-4}],"sizeInsertions":539,"sizeDeletions":-208},{"number":"14","revision":"04151055fcfb0fb0a43f279a67ac11ad8870accd","parents":["97f6648f4e1169f1068d3180fb0e06b2df398283"],"ref":"refs/changes/89/1089/14","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1492815645,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1492816824,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"comments":[{"file":"lib/endpoints/rules/index.js","line":54,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"This should just be validate.UUID. Only one gets passed here."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/rules/index.js","type":"MODIFIED","insertions":107,"deletions":-38},{"file":"lib/persist.js","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"lib/rule.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/util/array.js","type":"DELETED","insertions":0,"deletions":-45},{"file":"lib/util/constants.js","type":"MODIFIED","insertions":19,"deletions":-7},{"file":"lib/util/validate.js","type":"DELETED","insertions":0,"deletions":-106},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/integration/get.test.js","type":"MODIFIED","insertions":406,"deletions":0},{"file":"test/lib/vm.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"tools/rsync-to","type":"MODIFIED","insertions":5,"deletions":-4}],"sizeInsertions":543,"sizeDeletions":-207},{"number":"15","revision":"0100f22bda94c3ee1fce396ad9dc06c4966a7276","parents":["97f6648f4e1169f1068d3180fb0e06b2df398283"],"ref":"refs/changes/89/1089/15","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1492818955,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1492819112,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/rules/index.js","type":"MODIFIED","insertions":107,"deletions":-38},{"file":"lib/persist.js","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"lib/rule.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/util/array.js","type":"DELETED","insertions":0,"deletions":-45},{"file":"lib/util/constants.js","type":"MODIFIED","insertions":19,"deletions":-7},{"file":"lib/util/validate.js","type":"DELETED","insertions":0,"deletions":-106},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/integration/get.test.js","type":"MODIFIED","insertions":406,"deletions":0},{"file":"test/lib/vm.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"tools/rsync-to","type":"MODIFIED","insertions":5,"deletions":-4}],"sizeInsertions":543,"sizeDeletions":-207},{"number":"16","revision":"676f8c0adcee83982e3561c079150d483ed3751f","parents":["749ce8ba0c137ea300b123500325ed015548bdf4"],"ref":"refs/changes/89/1089/16","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1493938071,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1492819112,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/rules/index.js","type":"MODIFIED","insertions":107,"deletions":-38},{"file":"lib/persist.js","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"lib/rule.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/util/array.js","type":"DELETED","insertions":0,"deletions":-45},{"file":"lib/util/constants.js","type":"MODIFIED","insertions":19,"deletions":-7},{"file":"lib/util/validate.js","type":"DELETED","insertions":0,"deletions":-106},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/integration/get.test.js","type":"MODIFIED","insertions":406,"deletions":0},{"file":"test/lib/vm.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"tools/rsync-to","type":"MODIFIED","insertions":5,"deletions":-4}],"sizeInsertions":543,"sizeDeletions":-207},{"number":"17","revision":"379c8af4c872c6e06ce73adb82d38f7846e38d05","parents":["09aa98b6fab4711f313e4d381b201cfb9065aa4e"],"ref":"refs/changes/89/1089/17","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1518505293,"author":{"name":"Nick Zivkovic","email":"zivkovic.nick@gmail.com","username":""},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/firewalls/vms.js","type":"MODIFIED","insertions":34,"deletions":-41},{"file":"lib/endpoints/resolve.js","type":"MODIFIED","insertions":49,"deletions":-30},{"file":"lib/endpoints/rules/index.js","type":"MODIFIED","insertions":60,"deletions":-38},{"file":"lib/endpoints/updates.js","type":"MODIFIED","insertions":38,"deletions":-46},{"file":"lib/persist.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/rule.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/util/array.js","type":"DELETED","insertions":0,"deletions":-45},{"file":"lib/util/common.js","type":"ADDED","insertions":124,"deletions":0},{"file":"lib/util/constants.js","type":"MODIFIED","insertions":20,"deletions":-7},{"file":"lib/util/ip.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/util/validate.js","type":"DELETED","insertions":0,"deletions":-106},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/config.json","type":"ADDED","insertions":13,"deletions":0},{"file":"test/config.json.coal","type":"ADDED","insertions":13,"deletions":0},{"file":"test/config.json.emy","type":"ADDED","insertions":13,"deletions":0},{"file":"test/integration/get.test.js","type":"MODIFIED","insertions":318,"deletions":-17},{"file":"test/integration/resolve.test.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/lib/vm.js","type":"MODIFIED","insertions":11,"deletions":0},{"file":"test/unit/data/migration.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"tools/rsync-to","type":"MODIFIED","insertions":5,"deletions":-4}],"sizeInsertions":707,"sizeDeletions":-340}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}]}