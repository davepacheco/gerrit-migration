{"project":"joyent/illumos-joyent","branch":"master","id":"Ida8ce195d8bda689beff509f504f2ca5483f482e","number":"293","subject":"OS-5591 Double flock(3C) causes undue block OS-5585 fcntl(F_OFD_GETLK) should return EINVAL on bad parameters Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Approved by: Robert Mustacchi \u003crm@j","owner":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"url":"https://cr.joyent.us/293","commitMessage":"OS-5591 Double flock(3C) causes undue block\nOS-5585 fcntl(F_OFD_GETLK) should return EINVAL on bad parameters\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nApproved by: Robert Mustacchi \u003crm@joyent.com\u003e\n","createdOn":1471311687,"lastUpdated":1471486783,"open":false,"status":"MERGED","comments":[{"timestamp":1471311687,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 1."},{"timestamp":1471327002,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 2."},{"timestamp":1471327500,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 2:\n\nI\u0027ve run these changes and tests on a debug kernel, and they finish successfully."},{"timestamp":1471349807,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\n(2 comments)\n\nNice job tracking this down and great work adding the new tests. I just had a nit on a couple of your comments."},{"timestamp":1471366730,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 3."},{"timestamp":1471366830,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 3:\n\n(2 comments)"},{"timestamp":1471368275,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1471368855,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1471371325,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1471372621,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 5: Code-Review+1\n\n(2 comments)\n\nHave you looked into the difficulty of attempting to compile/run those tests on a different OS?"},{"timestamp":1471390186,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 5:\n\nPorting these to NetBSD, OS X and Linux weren\u0027t too difficult. I removed the F_FLOCK{,W} EINVAL tests since those are private and specific to our platform.\n\nIt would seem that on Linux, locks set with flock(3C) don\u0027t interact with locks set by fcntl(2). This prevents using fcntl(F_GETLK) in the tests, but once I disable the tests for interactions between flock(3C) and fcntl(2) (and stop trying to inspect locks set by flock(3C) with fcntl(F_GETLK)), everything else runs. The flock(2) manual page for Linux confirms this.\n\nNetBSD and OS X doesn\u0027t have the F_OFD_*LK fcntl(2) operations, but I was able to run everything else. On these platforms, POSIX style locks and locks set by flock(3C) _do_ interact."},{"timestamp":1471391091,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 6."},{"timestamp":1471391253,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 7."},{"timestamp":1471391292,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 7:\n\n(2 comments)"},{"timestamp":1471442022,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 7: Code-Review+1\n\nGreat.  Thanks for the detail on your wider OS testing."},{"timestamp":1471481143,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 8: Patch Set 7 was rebased"},{"timestamp":1471481823,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 8: Integration-Approval+1"},{"timestamp":1471481894,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 9: Commit message was updated."},{"timestamp":1471486783,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Cody Peter Mello"}],"currentPatchSet":{"number":"9","revision":"2284cf450f099ce8441493d7c9f2c1cb0bbf474f","parents":["fae673de1d84b263986f4dcdde53f15478ad664d"],"ref":"refs/changes/93/293/9","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1471481894,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1471442022,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1471481823,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1471486783,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-ostest.mf","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/test/os-tests/runfiles/default.run","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/test/os-tests/tests/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/os-tests/tests/file-locking/Makefile","type":"ADDED","insertions":77,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/acquire-lock.c","type":"ADDED","insertions":161,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/runtests.c","type":"ADDED","insertions":677,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/util.c","type":"ADDED","insertions":175,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/util.h","type":"ADDED","insertions":49,"deletions":0},{"file":"usr/src/uts/common/os/flock.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/syscall/fcntl.c","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":1155,"sizeDeletions":-7},"patchSets":[{"number":"1","revision":"9c3e007d1c3c7c96e6bb3e5a08a63ac897cdf358","parents":["66e216c143cfaea8bda7fb7742d9019fe1f8efdd"],"ref":"refs/changes/93/293/1","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1471311687,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-ostest.mf","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/test/os-tests/runfiles/default.run","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/test/os-tests/tests/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/os-tests/tests/file-locking/Makefile","type":"ADDED","insertions":72,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/acquire-lock.c","type":"ADDED","insertions":156,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/runtests.c","type":"ADDED","insertions":657,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/util.c","type":"ADDED","insertions":170,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/util.h","type":"ADDED","insertions":47,"deletions":0},{"file":"usr/src/uts/common/os/flock.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/syscall/fcntl.c","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":1115,"sizeDeletions":-4},{"number":"2","revision":"dd4a70ed7c81afde4b02e9d07da177fec545e819","parents":["66e216c143cfaea8bda7fb7742d9019fe1f8efdd"],"ref":"refs/changes/93/293/2","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1471327002,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/test/os-tests/tests/file-locking/acquire-lock.c","line":48,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"This seems to be an incomplete sentence."},{"file":"usr/src/test/os-tests/tests/file-locking/acquire-lock.c","line":48,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"usr/src/test/os-tests/tests/file-locking/acquire-lock.c","line":83,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Same here with this comment as above."},{"file":"usr/src/test/os-tests/tests/file-locking/acquire-lock.c","line":83,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-ostest.mf","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/test/os-tests/runfiles/default.run","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/test/os-tests/tests/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/os-tests/tests/file-locking/Makefile","type":"ADDED","insertions":77,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/acquire-lock.c","type":"ADDED","insertions":161,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/runtests.c","type":"ADDED","insertions":677,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/util.c","type":"ADDED","insertions":175,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/util.h","type":"ADDED","insertions":49,"deletions":0},{"file":"usr/src/uts/common/os/flock.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/syscall/fcntl.c","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":1152,"sizeDeletions":-4},{"number":"3","revision":"e5a1bf4dfc75e1806c94d5ce778e347fca08dc8d","parents":["66e216c143cfaea8bda7fb7742d9019fe1f8efdd"],"ref":"refs/changes/93/293/3","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1471366730,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-ostest.mf","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/test/os-tests/runfiles/default.run","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/test/os-tests/tests/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/os-tests/tests/file-locking/Makefile","type":"ADDED","insertions":77,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/acquire-lock.c","type":"ADDED","insertions":161,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/runtests.c","type":"ADDED","insertions":677,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/util.c","type":"ADDED","insertions":175,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/util.h","type":"ADDED","insertions":49,"deletions":0},{"file":"usr/src/uts/common/os/flock.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/syscall/fcntl.c","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":1152,"sizeDeletions":-4},{"number":"4","revision":"85082f52500951b4b330ee5a5759c77bb1cc3130","parents":["a270c481cb999e137b33c873091fdaca2e0d7b44"],"ref":"refs/changes/93/293/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1471368275,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1471368855,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-ostest.mf","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/test/os-tests/runfiles/default.run","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/test/os-tests/tests/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/os-tests/tests/file-locking/Makefile","type":"ADDED","insertions":77,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/acquire-lock.c","type":"ADDED","insertions":161,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/runtests.c","type":"ADDED","insertions":677,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/util.c","type":"ADDED","insertions":175,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/util.h","type":"ADDED","insertions":49,"deletions":0},{"file":"usr/src/uts/common/os/flock.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/syscall/fcntl.c","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":1152,"sizeDeletions":-4},{"number":"5","revision":"6d811a70b9a432354fcd3b9b7a67a9dd6857c93c","parents":["a270c481cb999e137b33c873091fdaca2e0d7b44"],"ref":"refs/changes/93/293/5","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1471371325,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1471368855,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1471372621,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"comments":[{"file":"usr/src/uts/common/os/flock.c","line":526,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Insert a comma after \u0027pid\u0027"},{"file":"usr/src/uts/common/os/flock.c","line":526,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"usr/src/uts/common/os/flock.c","line":528,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Comma after \u0027forks\u0027"},{"file":"usr/src/uts/common/os/flock.c","line":528,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-ostest.mf","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/test/os-tests/runfiles/default.run","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/test/os-tests/tests/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/os-tests/tests/file-locking/Makefile","type":"ADDED","insertions":77,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/acquire-lock.c","type":"ADDED","insertions":161,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/runtests.c","type":"ADDED","insertions":677,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/util.c","type":"ADDED","insertions":175,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/util.h","type":"ADDED","insertions":49,"deletions":0},{"file":"usr/src/uts/common/os/flock.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/syscall/fcntl.c","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":1152,"sizeDeletions":-4},{"number":"6","revision":"bfc9bf9e3ffe7c7e17c4288f3f79ae481ee7ee88","parents":["a270c481cb999e137b33c873091fdaca2e0d7b44"],"ref":"refs/changes/93/293/6","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1471391091,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-ostest.mf","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/test/os-tests/runfiles/default.run","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/test/os-tests/tests/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/os-tests/tests/file-locking/Makefile","type":"ADDED","insertions":77,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/acquire-lock.c","type":"ADDED","insertions":161,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/runtests.c","type":"ADDED","insertions":677,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/util.c","type":"ADDED","insertions":175,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/util.h","type":"ADDED","insertions":49,"deletions":0},{"file":"usr/src/uts/common/os/flock.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/syscall/fcntl.c","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":1154,"sizeDeletions":-6},{"number":"7","revision":"da8ce195d8bda689beff509f504f2ca5483f482e","parents":["a270c481cb999e137b33c873091fdaca2e0d7b44"],"ref":"refs/changes/93/293/7","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1471391253,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1471442022,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-ostest.mf","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/test/os-tests/runfiles/default.run","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/test/os-tests/tests/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/os-tests/tests/file-locking/Makefile","type":"ADDED","insertions":77,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/acquire-lock.c","type":"ADDED","insertions":161,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/runtests.c","type":"ADDED","insertions":677,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/util.c","type":"ADDED","insertions":175,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/util.h","type":"ADDED","insertions":49,"deletions":0},{"file":"usr/src/uts/common/os/flock.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/syscall/fcntl.c","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":1155,"sizeDeletions":-7},{"number":"8","revision":"cec796e3c36d294811fea817b33c9fdd48f68230","parents":["fae673de1d84b263986f4dcdde53f15478ad664d"],"ref":"refs/changes/93/293/8","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1471481143,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1471481823,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1471442022,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-ostest.mf","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/test/os-tests/runfiles/default.run","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/test/os-tests/tests/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/os-tests/tests/file-locking/Makefile","type":"ADDED","insertions":77,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/acquire-lock.c","type":"ADDED","insertions":161,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/runtests.c","type":"ADDED","insertions":677,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/util.c","type":"ADDED","insertions":175,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/util.h","type":"ADDED","insertions":49,"deletions":0},{"file":"usr/src/uts/common/os/flock.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/syscall/fcntl.c","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":1155,"sizeDeletions":-7},{"number":"9","revision":"2284cf450f099ce8441493d7c9f2c1cb0bbf474f","parents":["fae673de1d84b263986f4dcdde53f15478ad664d"],"ref":"refs/changes/93/293/9","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1471481894,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1471481823,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1471486783,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1471442022,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/pkg/manifests/system-test-ostest.mf","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/test/os-tests/runfiles/default.run","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/test/os-tests/tests/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/os-tests/tests/file-locking/Makefile","type":"ADDED","insertions":77,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/acquire-lock.c","type":"ADDED","insertions":161,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/runtests.c","type":"ADDED","insertions":677,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/util.c","type":"ADDED","insertions":175,"deletions":0},{"file":"usr/src/test/os-tests/tests/file-locking/util.h","type":"ADDED","insertions":49,"deletions":0},{"file":"usr/src/uts/common/os/flock.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/syscall/fcntl.c","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":1155,"sizeDeletions":-7}],"allReviewers":[{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}]}