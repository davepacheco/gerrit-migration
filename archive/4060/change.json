{"project":"joyent/sdcadm","branch":"master","id":"Iaf67a0208c78bf5cda3d81ddf067135b8277eaf7","number":"4060","subject":"TOOLS-1926 sdcadm health is stuck and won\u0027t exit Reviewed by: Alex Wilson \u003calex.wilson@joyent.com\u003e Approved by: Alex Wilson \u003calex.wilson@joyent.com\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/4060","commitMessage":"TOOLS-1926 sdcadm health is stuck and won\u0027t exit\nReviewed by: Alex Wilson \u003calex.wilson@joyent.com\u003e\nApproved by: Alex Wilson \u003calex.wilson@joyent.com\u003e\n","createdOn":1527766473,"lastUpdated":1528490222,"open":false,"status":"MERGED","comments":[{"timestamp":1527766473,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1527766478,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 0516fb0a0d0abd8eb945d5806123d0a6665cbd52\n    \n    TOOLS-1926 sdcadm health is stuck and won\u0027t exit"},{"timestamp":1527766514,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1527792506,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1527792511,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit e379d91c49554da9022f37c595ff54861e8b4a5e\n    \n    TOOLS-1926 sdcadm health is stuck and won\u0027t exit"},{"timestamp":1527792589,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2:\n\n\"make check\" passed ok"},{"timestamp":1527792975,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 2: Code-Review+1\n\nWe should open a bug on cueball to get public API for this, but since the version is pinned currently for sdcadm this seems fine for now."},{"timestamp":1527793098,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1527864917,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 3."},{"timestamp":1527864922,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit df0ae295d23f471e10a6f3685f3cc026db8cf67a\n    \n    TOOLS-1926 sdcadm health is stuck and won\u0027t exit"},{"timestamp":1527864954,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1527870065,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 4."},{"timestamp":1527870070,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 96c47ebf7739dcd0d5d7ed2de48d37b14afec82b\n    \n    TOOLS-1926 sdcadm health is stuck and won\u0027t exit"},{"timestamp":1527870104,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1527882087,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 4: Code-Review+1\n\n(2 comments)"},{"timestamp":1528041788,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 5."},{"timestamp":1528041792,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit b8b3c46a1368633e74cc3af0f091903b6794d941\n    \n    TOOLS-1926 sdcadm health is stuck and won\u0027t exit"},{"timestamp":1528160529,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1528209331,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 5:\n\n(2 comments)\n\nI dunno why CI didn\u0027t ran again for this one :-/\n\nTests are passing so far, though."},{"timestamp":1528222282,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 6: Patch Set 5 was rebased."},{"timestamp":1528222287,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit 9b55da72517392b5a54be3f48b25a93dacb0c830\n    \n    TOOLS-1926 sdcadm health is stuck and won\u0027t exit"},{"timestamp":1528222317,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1528478249,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 7: Patch Set 6 was rebased."},{"timestamp":1528478253,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 7:\n\nNew commits:\n    \n    commit 7445add24b8d91139c24923676f4956b9f60bcfa\n    \n    TOOLS-1926 sdcadm health is stuck and won\u0027t exit"},{"timestamp":1528481662,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 8: Patch Set 7 was rebased."},{"timestamp":1528481667,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 8:\n\nNew commits:\n    \n    commit 760c9c33d9775f255411e3b184ab8c06a32ede82\n    \n    TOOLS-1926 sdcadm health is stuck and won\u0027t exit"},{"timestamp":1528484210,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 8:\n\nTest suite running as expected even after all the merges:\n\n# check-health when binder is down\nok 431 null\nok 432 should be equal\nok 433 should be equal\nok 434 errcode is 1\nok 435 process not killed\nok 436 binder off stderr\nok 437 null\nok 438 should be equal\nok 439 should be equal\nok 440 undefined\n\n1..440\n# tests 440\n# pass  440"},{"timestamp":1528484946,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 8: Integration-Approval+1"},{"timestamp":1528490196,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 9: Commit message was updated."},{"timestamp":1528490222,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"9","revision":"af67a0208c78bf5cda3d81ddf067135b8277eaf7","parents":["3fbc528636315ec02d63231b4e0f683c5fd37b15"],"ref":"refs/changes/60/4060/9","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1528490196,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528160529,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528222317,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1528484946,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"SUBM","value":"1","grantedOn":1528490222,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"test/check-health.test.js","type":"MODIFIED","insertions":51,"deletions":-2}],"sizeInsertions":64,"sizeDeletions":-2},"patchSets":[{"number":"1","revision":"3596275bf504a51d245cb30f13a8033495631443","parents":["880176503514196257d82013e1a7aacc4274ebb8"],"ref":"refs/changes/60/4060/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1527766473,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527766514,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":13,"deletions":0}],"sizeInsertions":13,"sizeDeletions":0},{"number":"2","revision":"8fdc4259ac92b8c40ee8d9556ee122fd2d5b252b","parents":["39aad99285cd9bd845f2f91601d8e8c3216c0d0f"],"ref":"refs/changes/60/4060/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1527792506,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1527792975,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1527793098,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527766514,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":13,"deletions":0}],"sizeInsertions":13,"sizeDeletions":0},{"number":"3","revision":"9b3abe8da4df312687aaeafd8fad5dac94d90751","parents":["e60b92876b73ec7368ea4189e26c8d88dbf17aa5"],"ref":"refs/changes/60/4060/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1527864917,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527864954,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":13,"deletions":0}],"sizeInsertions":13,"sizeDeletions":0},{"number":"4","revision":"04939c65ea6b3b9adaa8a1a3ec87e736af11b57a","parents":["e60b92876b73ec7368ea4189e26c8d88dbf17aa5"],"ref":"refs/changes/60/4060/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1527870065,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1527882087,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527870104,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/check-health.test.js","line":241,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Note to future selves: If we ever turn on the binder loadbalancer for triton we\u0027ll have to revisit this. :P"},{"file":"test/check-health.test.js","line":241,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Indeed :D"},{"file":"test/check-health.test.js","line":263,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Should this be \"enableBinderCb\"?"},{"file":"test/check-health.test.js","line":263,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"test/check-health.test.js","type":"MODIFIED","insertions":50,"deletions":-2}],"sizeInsertions":63,"sizeDeletions":-2},{"number":"5","revision":"431f2c2e793a4c777cfdbec249c115ea74794e09","parents":["e60b92876b73ec7368ea4189e26c8d88dbf17aa5"],"ref":"refs/changes/60/4060/5","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1528041788,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528160529,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"test/check-health.test.js","type":"MODIFIED","insertions":51,"deletions":-2}],"sizeInsertions":64,"sizeDeletions":-2},{"number":"6","revision":"1fe30e475f4320b99d95e2443a1c08ed0fe20ee7","parents":["4031c5768ae15515a7d4dd28289034343a1eff62"],"ref":"refs/changes/60/4060/6","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1528222282,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528160529,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528222317,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"test/check-health.test.js","type":"MODIFIED","insertions":51,"deletions":-2}],"sizeInsertions":64,"sizeDeletions":-2},{"number":"7","revision":"5c4106803687a910f06798620a29ec7491a692ea","parents":["ee4bfb9c3acb3dfd730549dfff71fff8d1ab3452"],"ref":"refs/changes/60/4060/7","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1528478249,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528160529,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528222317,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"test/check-health.test.js","type":"MODIFIED","insertions":51,"deletions":-2}],"sizeInsertions":64,"sizeDeletions":-2},{"number":"8","revision":"ec22411612c522b5d8133950782b69bb6a68f773","parents":["3fbc528636315ec02d63231b4e0f683c5fd37b15"],"ref":"refs/changes/60/4060/8","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1528481662,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528160529,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1528484946,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528222317,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"test/check-health.test.js","type":"MODIFIED","insertions":51,"deletions":-2}],"sizeInsertions":64,"sizeDeletions":-2},{"number":"9","revision":"af67a0208c78bf5cda3d81ddf067135b8277eaf7","parents":["3fbc528636315ec02d63231b4e0f683c5fd37b15"],"ref":"refs/changes/60/4060/9","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1528490196,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528160529,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1528484946,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1528222317,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1528490222,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":13,"deletions":0},{"file":"test/check-health.test.js","type":"MODIFIED","insertions":51,"deletions":-2}],"sizeInsertions":64,"sizeDeletions":-2}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}