{"project":"joyent/illumos-joyent","branch":"master","id":"I45ef6548de32f5ef9851c228eeb96601e15d5d1b","number":"5590","subject":"OS-7582 Fix \u0027zfs recv\u0027 of non large_dnode send streams Reviewed by: Kody Kantor \u003ckody.kantor@joyent.com\u003e Approved by: Kody Kantor \u003ckody.kantor@joyent.com\u003e","owner":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"url":"https://cr.joyent.us/5590","commitMessage":"OS-7582 Fix \u0027zfs recv\u0027 of non large_dnode send streams\nReviewed by: Kody Kantor \u003ckody.kantor@joyent.com\u003e\nApproved by: Kody Kantor \u003ckody.kantor@joyent.com\u003e\n","createdOn":1550182054,"lastUpdated":1550186401,"open":false,"status":"MERGED","comments":[{"timestamp":1550182054,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 1."},{"timestamp":1550183991,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 1:\n\nThis is slightly different than the ZoL patch.\n\nIt looks like the full ZoL patch depends on another change that we don\u0027t have (the fix for object reclaim with large dnodes). You mentioned that we should bring that in separately later, right? If we\u0027re planning to bring that in later that sounds good and I\u0027ll +1 this.\n\nDo you think we should change the ticket name to match the ZoL issue?"},{"timestamp":1550185774,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\nYes, this is the problem with most (all?) of the ZoL patches. We can\u0027t bring them over exactly as they exist in ZoL. I don\u0027t think we want to pull in any more of the ZoL work unless it fixes other bugs here. My preference would be to bring in those extra changes separately if we can. I\u0027ll update the ticket synopsis when I update the reviewer/approver. For testing, I\u0027ve obviously imported our image and mounted it."},{"timestamp":1550186033,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 1: Code-Review+1 Integration-Approval+1\n\nGreat, thanks Jerry. Looks good to me."},{"timestamp":1550186359,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 2: Commit message was updated."},{"timestamp":1550186401,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jerry Jelinek"}],"currentPatchSet":{"number":"2","revision":"45ef6548de32f5ef9851c228eeb96601e15d5d1b","parents":["c8b89b2e0ef5e796d5ea1ee45802f7ebc39545f4"],"ref":"refs/changes/90/5590/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1550186359,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550186033,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1550186033,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"SUBM","value":"1","grantedOn":1550186401,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/dmu_object.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/dmu_send.c","type":"MODIFIED","insertions":7,"deletions":-5}],"sizeInsertions":10,"sizeDeletions":-5},"patchSets":[{"number":"1","revision":"f97b884cbffa6ce0d15474de32f69d39e26b84ce","parents":["c8b89b2e0ef5e796d5ea1ee45802f7ebc39545f4"],"ref":"refs/changes/90/5590/1","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1550182054,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550186033,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1550186033,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/dmu_object.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/dmu_send.c","type":"MODIFIED","insertions":7,"deletions":-5}],"sizeInsertions":10,"sizeDeletions":-5},{"number":"2","revision":"45ef6548de32f5ef9851c228eeb96601e15d5d1b","parents":["c8b89b2e0ef5e796d5ea1ee45802f7ebc39545f4"],"ref":"refs/changes/90/5590/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1550186359,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1550186401,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550186033,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1550186033,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/dmu_object.c","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/dmu_send.c","type":"MODIFIED","insertions":7,"deletions":-5}],"sizeInsertions":10,"sizeDeletions":-5}],"allReviewers":[{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}]}