{"project":"joyent/illumos-joyent","branch":"master","id":"I4f723dcffd015c7d11cd1c7a3155f46aa0600646","number":"3951","subject":"OS-6923 bhyve could be more precise with vPIT OS-6849 bhyve should localize vatpit resources Reviewed by: Hans Rosenfeld \u003chans.rosenfeld@joyent.com\u003e Reviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e Approved by: Dan McDonald \u003cdanmcd@joyent.com\u003e","owner":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"url":"https://cr.joyent.us/3951","commitMessage":"OS-6923 bhyve could be more precise with vPIT\nOS-6849 bhyve should localize vatpit resources\nReviewed by: Hans Rosenfeld \u003chans.rosenfeld@joyent.com\u003e\nReviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e\nApproved by: Dan McDonald \u003cdanmcd@joyent.com\u003e\n","createdOn":1526324750,"lastUpdated":1529420089,"open":false,"status":"MERGED","comments":[{"timestamp":1526324750,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 1."},{"timestamp":1526324804,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\nDone without a bunch of #ifdef _FreeBSD_ for now."},{"timestamp":1526641822,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1528483183,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1528838499,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 2:\n\n(2 comments)\n\nSeeing all of this 64-bit math makes me worry about constants and compilers being stupid."},{"timestamp":1528838901,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1528839186,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 2: Code-Review+1\n\n(1 comment)"},{"timestamp":1529355932,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1529419989,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 3: Patch Set 2 was rebased."},{"timestamp":1529420057,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1529420089,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Patrick Mooney"}],"currentPatchSet":{"number":"4","revision":"4f723dcffd015c7d11cd1c7a3155f46aa0600646","parents":["967bcd4bf4ed12e06a616379429f6f1a8765bbe4"],"ref":"refs/changes/51/3951/4","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1529420057,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1526641822,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528839186,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1529355932,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"SUBM","value":"1","grantedOn":1529420088,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/compat/freebsd/sys/time.h","type":"MODIFIED","insertions":10,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/io/vatpit.c","type":"MODIFIED","insertions":56,"deletions":-26},{"file":"usr/src/uts/i86pc/io/vmm/io/vatpit.h","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/vmm.c","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":71,"sizeDeletions":-26},"patchSets":[{"number":"1","revision":"e12bc0694446d1ab6178a449d0ad32160e50a99a","parents":["f9b2546bbcb539268f3a40c8f3e6d32ffb2b469d"],"ref":"refs/changes/51/3951/1","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1526324750,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1526641822,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/compat/freebsd/sys/time.h","type":"MODIFIED","insertions":10,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/io/vatpit.c","type":"MODIFIED","insertions":56,"deletions":-26},{"file":"usr/src/uts/i86pc/io/vmm/io/vatpit.h","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/vmm.c","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":71,"sizeDeletions":-26},{"number":"2","revision":"a4ff814a390d4dc426b495fa50894a21c77e6bca","parents":["d8dd35875a530f93803ac5c9384765e988d715c3"],"ref":"refs/changes/51/3951/2","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1528483183,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1526641822,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528839186,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1529355932,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"comments":[{"file":"usr/src/uts/i86pc/io/vmm/io/vatpit.c","line":70,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Does this need to be \"1193181ull\" to prevent..."},{"file":"usr/src/uts/i86pc/io/vmm/io/vatpit.c","line":115,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"... compiler weirdness from happening here?"},{"file":"usr/src/uts/i86pc/io/vmm/io/vatpit.c","line":115,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"struct bintime`sec is a ulong_t and we only compile for 64-bit, so I think it\u0027s fine?"},{"file":"usr/src/uts/i86pc/io/vmm/io/vatpit.c","line":115,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"If lint or compiler isn\u0027t complaining, you\u0027re probably okay."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/compat/freebsd/sys/time.h","type":"MODIFIED","insertions":10,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/io/vatpit.c","type":"MODIFIED","insertions":56,"deletions":-26},{"file":"usr/src/uts/i86pc/io/vmm/io/vatpit.h","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/vmm.c","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":71,"sizeDeletions":-26},{"number":"3","revision":"0479dcd7690635507bf54aec300f459fe6ea49d7","parents":["967bcd4bf4ed12e06a616379429f6f1a8765bbe4"],"ref":"refs/changes/51/3951/3","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1529419989,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1526641822,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528839186,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1529355932,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/compat/freebsd/sys/time.h","type":"MODIFIED","insertions":10,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/io/vatpit.c","type":"MODIFIED","insertions":56,"deletions":-26},{"file":"usr/src/uts/i86pc/io/vmm/io/vatpit.h","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/vmm.c","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":71,"sizeDeletions":-26},{"number":"4","revision":"4f723dcffd015c7d11cd1c7a3155f46aa0600646","parents":["967bcd4bf4ed12e06a616379429f6f1a8765bbe4"],"ref":"refs/changes/51/3951/4","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1529420057,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1529420088,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1526641822,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1528839186,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1529355932,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/compat/freebsd/sys/time.h","type":"MODIFIED","insertions":10,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/io/vatpit.c","type":"MODIFIED","insertions":56,"deletions":-26},{"file":"usr/src/uts/i86pc/io/vmm/io/vatpit.h","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/i86pc/io/vmm/vmm.c","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":71,"sizeDeletions":-26}],"allReviewers":[{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}]}