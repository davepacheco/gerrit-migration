From 9aef94f7964855bfc454f251f7b47e58a7ddd8d5 Mon Sep 17 00:00:00 2001
From: Orlando Vazquez <ovazquez@gmail.com>
Date: Tue, 6 Mar 2018 16:50:41 -0800
Subject: [PATCH] TRITON-215 CNAPI waitlist code incorrectly using splice
 method of array objects

---
 lib/models/waitlist.js | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/lib/models/waitlist.js b/lib/models/waitlist.js
index 0f4132a..f336e4a 100644
--- a/lib/models/waitlist.js
+++ b/lib/models/waitlist.js
@@ -708,7 +708,7 @@ function (ticket, serverqueue, etag, callback) {
         });
     }
 
-    queue.splice(ticketIdx, ticketIdx+1);
+    queue.splice(ticketIdx, 1);
     serverqueue.tickets[key] = queue;
 
     Object.keys(serverqueue.tickets).forEach(function (k) {
@@ -822,7 +822,7 @@ function (ticket, serverqueue, etag, callback) {
         });
     }
 
-    queue.splice(ticketIdx, ticketIdx+1);
+    queue.splice(ticketIdx, 1);
     serverqueue.tickets[key] = queue;
 
     Object.keys(serverqueue.tickets).forEach(function (k) {
@@ -948,7 +948,7 @@ function (ticket, serverqueue, etag, callback) {
         });
     }
 
-    queue.splice(ticketIdx, ticketIdx+1);
+    queue.splice(ticketIdx, 1);
     serverqueue.tickets[key] = queue;
 
     Object.keys(serverqueue.tickets).forEach(function (k) {
-- 
2.21.0

