commit daa535caac0e98e5f2ae1c1f22438105f78df7a9 (refs/changes/53/3553/2)
Author: Orlando Vazquez <ovazquez@gmail.com>
Date:   2018-03-06T16:51:44-08:00 (1 year, 7 months ago)
    
    TRITON-215 CNAPI waitlist code incorrectly using splice method of array objects

diff --git a/lib/models/waitlist.js b/lib/models/waitlist.js
index 0f4132a..70ad6df 100644
--- a/lib/models/waitlist.js
+++ b/lib/models/waitlist.js
@@ -5,7 +5,7 @@
  */
 
 /*
- * Copyright (c) 2016, Joyent, Inc.
+ * Copyright (c) 2018, Joyent, Inc.
  */
 
 /*
@@ -708,7 +708,7 @@ function (ticket, serverqueue, etag, callback) {
         });
     }
 
-    queue.splice(ticketIdx, ticketIdx+1);
+    queue.splice(ticketIdx, 1);
     serverqueue.tickets[key] = queue;
 
     Object.keys(serverqueue.tickets).forEach(function (k) {
@@ -822,7 +822,7 @@ function (ticket, serverqueue, etag, callback) {
         });
     }
 
-    queue.splice(ticketIdx, ticketIdx+1);
+    queue.splice(ticketIdx, 1);
     serverqueue.tickets[key] = queue;
 
     Object.keys(serverqueue.tickets).forEach(function (k) {
@@ -948,7 +948,7 @@ function (ticket, serverqueue, etag, callback) {
         });
     }
 
-    queue.splice(ticketIdx, ticketIdx+1);
+    queue.splice(ticketIdx, 1);
     serverqueue.tickets[key] = queue;
 
     Object.keys(serverqueue.tickets).forEach(function (k) {
diff --git a/package.json b/package.json
index 39ffe24..298451b 100644
--- a/package.json
+++ b/package.json
@@ -1,7 +1,7 @@
 {
   "name": "cnapi",
   "description": "SmartDataCenter Compute Node API",
-  "version": "1.8.0",
+  "version": "1.8.1",
   "author": "Joyent (joyent.com)",
   "private": true,
   "dependencies": {
