{"project":"joyent/manta-debugging-guide","branch":"master","id":"I33fae291338315585099fb5a6f10e21c1d1edaa6","number":"6027","subject":"MANTA-4197 Manta Debugging Guide: expand historical-log-fetching instructions Reviewed by: David Pacheco \u003cdap@joyent.com\u003e Approved by: David Pacheco \u003cdap@joyent.com\u003e","owner":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"url":"https://cr.joyent.us/6027","commitMessage":"MANTA-4197 Manta Debugging Guide: expand historical-log-fetching instructions\nReviewed by: David Pacheco \u003cdap@joyent.com\u003e\nApproved by: David Pacheco \u003cdap@joyent.com\u003e\n","createdOn":1553808307,"lastUpdated":1553879412,"open":false,"status":"MERGED","comments":[{"timestamp":1553808307,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Uploaded patch set 1."},{"timestamp":1553808809,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1: Code-Review+1\n\n(1 comment)\n\nOut of curiosity, what version of asciidoctor are you using?  There\u0027s a bunch of spurious diff in the index.html file but that\u0027s just an unfortunate side effect of having to commit that to this repo."},{"timestamp":1553810973,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Patch Set 1:\n\n(1 comment)\n\nI installed it from the Ubuntu package repository:\n\nAsciidoctor 1.5.5 [http://asciidoctor.org]\nRuntime Environment (ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-linux-gnu]) (lc:UTF-8 fs:UTF-8 in:- ex:UTF-8)"},{"timestamp":1553815060,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\n\u003e (1 comment)\n \u003e \n \u003e I installed it from the Ubuntu package repository:\n \u003e \n \u003e Asciidoctor 1.5.5 [http://asciidoctor.org]\n \u003e Runtime Environment (ruby 2.5.1p57 (2018-03-29 revision 63029)\n \u003e [x86_64-linux-gnu]) (lc:UTF-8 fs:UTF-8 in:- ex:UTF-8)\n\n\nOkay.  I\u0027m using 1.5.7.1.  We may just wind up having a lot of churn in this file."},{"timestamp":1553815194,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1553816000,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Patch Set 1:\n\nFair enough. I\u0027ve added (brief) testing notes to the ticket."},{"timestamp":1553818160,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\nDoes the rendered version look right in your browser?"},{"timestamp":1553818435,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Patch Set 1:\n\nIndeed it does!"},{"timestamp":1553878247,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1: Integration-Approval+1"},{"timestamp":1553879387,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"Patch Set 2: Commit message was updated."},{"timestamp":1553879412,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Isaac Davis"}],"currentPatchSet":{"number":"2","revision":"1699845270b0dacd90faa3911937c90cdbab08ac","parents":["03923a7292c899b7c2fd1dfb675237b87383c538"],"ref":"refs/changes/27/6027/2","uploader":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"createdOn":1553879387,"author":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553808809,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553878247,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"SUBM","value":"1","grantedOn":1553879412,"by":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"0002-investigation-tasks.adoc","type":"MODIFIED","insertions":16,"deletions":-2},{"file":"docs/index.html","type":"MODIFIED","insertions":137,"deletions":-127}],"sizeInsertions":153,"sizeDeletions":-129},"patchSets":[{"number":"1","revision":"33fae291338315585099fb5a6f10e21c1d1edaa6","parents":["03923a7292c899b7c2fd1dfb675237b87383c538"],"ref":"refs/changes/27/6027/1","uploader":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"createdOn":1553808307,"author":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553808809,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553878247,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"comments":[{"file":"0002-investigation-tasks.adoc","line":306,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This isn\u0027t wrong, but was there any reason not to use `xargs mget | grep 10.1.2.3`?  It might be faster that way, but I\u0027m not sure, and it probably isn\u0027t worth spending time on, but I was just wondering."},{"file":"0002-investigation-tasks.adoc","line":306,"reviewer":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"message":"This is a good point -- I had forgotten that xargs existed.\n\nI think xargs would work in the general case but breaks with the use of `head`. `xargs mget | head -n 10` will stop after ten total lines of output, rather than getting the first ten lines of every log file.\n\nIn order to get the desired behavior, you\u0027d have to run something like:\n\n    mfind -t o /poseidon/stor/logs/haproxy/2018/12/05 |\n        xargs -I % sh -c \"mget % | head -n 10\"\n\nThis seems more expensive than `while read...`, given the subshell.\n\nI defer to whichever you think is best!"},{"file":"0002-investigation-tasks.adoc","line":306,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Yeah, it probably is, although you could potentially use `-P N` to get a lot more parallelism, which might be significant in some cases.\n\nThis isn\u0027t worth spending much time on though.  If you\u0027ve tested what you\u0027ve got here, I\u0027d just go with that."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"0002-investigation-tasks.adoc","type":"MODIFIED","insertions":16,"deletions":-2},{"file":"docs/index.html","type":"MODIFIED","insertions":137,"deletions":-127}],"sizeInsertions":153,"sizeDeletions":-129},{"number":"2","revision":"1699845270b0dacd90faa3911937c90cdbab08ac","parents":["03923a7292c899b7c2fd1dfb675237b87383c538"],"ref":"refs/changes/27/6027/2","uploader":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"createdOn":1553879387,"author":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1553808809,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1553878247,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"SUBM","value":"1","grantedOn":1553879412,"by":{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"0002-investigation-tasks.adoc","type":"MODIFIED","insertions":16,"deletions":-2},{"file":"docs/index.html","type":"MODIFIED","insertions":137,"deletions":-127}],"sizeInsertions":153,"sizeDeletions":-129}],"allReviewers":[{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Isaac Davis","email":"isaac.davis@joyent.com","username":"isaacdavis"}]}