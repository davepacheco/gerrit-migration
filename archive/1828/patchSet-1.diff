commit 86700e200166defcc2ef3b36e4cee2ea6d01b30e (refs/changes/28/1828/1)
Author: Hans Rosenfeld <hans.rosenfeld@joyent.com>
Date:   2017-04-24T17:40:20+02:00 (2 years, 5 months ago)
    
    OS-6072 increase ramdisk size by 3M for DEBUG kernels

diff --git a/tools/build_live b/tools/build_live
index e8c98150..547e1edf 100755
--- a/tools/build_live
+++ b/tools/build_live
@@ -66,6 +66,11 @@ if [ "$(id -u)" != "0" ]; then
   exit 1
 fi
 
+# Increase RSIZE by 3M if we have a DEBUG kernel
+if strings ${ROOT}/proto/kernel/$ARCH64/genunix | grep -q "DEBUG enabled"; then
+    RSIZE=$(expr ${RSIZE} + 3000)
+fi
+
 # Send a copy of stdout and stderr to LOGFILE
 exec > >(tee ${LOGFILE}) 2>&1
 
