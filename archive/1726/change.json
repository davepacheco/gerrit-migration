{"project":"joyent/illumos-joyent","branch":"master","id":"I59d73dcf2d9b389641c1b420dc1dc2db59257220","number":"1726","subject":"OS-6018 NFSv3 interaction with Linux statd fails Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Approved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e","owner":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"url":"https://cr.joyent.us/1726","commitMessage":"OS-6018 NFSv3 interaction with Linux statd fails\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nApproved by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\n","createdOn":1490723377,"lastUpdated":1491410449,"open":false,"status":"MERGED","comments":[{"timestamp":1490723377,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 1."},{"timestamp":1491261549,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(7 comments)"},{"timestamp":1491305919,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\n(7 comments)"},{"timestamp":1491306367,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 2."},{"timestamp":1491406105,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1491407976,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1491409822,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 3: Patch Set 2 was rebased."},{"timestamp":1491410372,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1491410449,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jerry Jelinek"}],"currentPatchSet":{"number":"4","revision":"59d73dcf2d9b389641c1b420dc1dc2db59257220","parents":["84091937dcd347b6d3f6be0b707e956fe77a2a52"],"ref":"refs/changes/26/1726/4","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1491410372,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491406105,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1491407976,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1491410449,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/os/lx_lockd.c","type":"ADDED","insertions":333,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","type":"DELETED","insertions":0,"deletions":-230},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/klm/mapfile-mod","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/common/klm/nlm_dispatch.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/uts/common/klm/nlm_impl.c","type":"MODIFIED","insertions":21,"deletions":-4},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/intel/Makefile.files","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/intel/lx_brand/Makefile","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":379,"sizeDeletions":-245},"patchSets":[{"number":"1","revision":"5536a97c1f1a9e9f5982791cfbb6cea1315b1f83","parents":["6c6de9cfb599f52d7ac3fa90ff7c026e995b5c00"],"ref":"refs/changes/26/1726/1","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1490723377,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":16,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"File-generic comment: lx_start_lockd became kind of a misnomer as this file grew in scope of duties.  Perhaps a rename to lx_nfs.c (or something similar) might be worthwhile."},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":16,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"I had considered renaming the file but didn\u0027t want to make the CR more complicated. However, I have gone ahead done that."},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":51,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Couldn\u0027t this be specified as:\n#include \u003cklm/nlm_impl.h\u003e\nand the extra -I be omitted from the makefile?"},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":51,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"done"},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":58,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Like the other cases, a comment dictating the source of these declarations would be nice."},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":58,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"done"},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":267,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Full colon?"},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":267,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"changed"},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":313,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Newline after variable decl would be nice."},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":313,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"added"},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":316,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"A newline here would be good too."},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","line":316,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"added"},{"file":"usr/src/uts/intel/lx_brand/Makefile","line":66,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"See other comment about potentially eliminating the need for this directive."},{"file":"usr/src/uts/intel/lx_brand/Makefile","line":66,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","type":"MODIFIED","insertions":103,"deletions":-2},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/klm/mapfile-mod","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/common/klm/nlm_dispatch.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/uts/common/klm/nlm_impl.c","type":"MODIFIED","insertions":21,"deletions":-4},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/intel/lx_brand/Makefile","type":"MODIFIED","insertions":5,"deletions":-2}],"sizeInsertions":150,"sizeDeletions":-16},{"number":"2","revision":"42f8c4f6bd0eeda4bbdc74c36f435a0d8d5fcbbc","parents":["a39551f1bdd9f8905f1c45cae344516e8162f877"],"ref":"refs/changes/26/1726/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1491306367,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491406105,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1491407976,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/os/lx_lockd.c","type":"ADDED","insertions":333,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","type":"DELETED","insertions":0,"deletions":-230},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/klm/mapfile-mod","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/common/klm/nlm_dispatch.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/uts/common/klm/nlm_impl.c","type":"MODIFIED","insertions":21,"deletions":-4},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/intel/Makefile.files","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/intel/lx_brand/Makefile","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":379,"sizeDeletions":-245},{"number":"3","revision":"a8e31871498e3d6c7772f8bc1f1aa9fe491a0e16","parents":["84091937dcd347b6d3f6be0b707e956fe77a2a52"],"ref":"refs/changes/26/1726/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1491409822,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491406105,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1491407976,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/os/lx_lockd.c","type":"ADDED","insertions":333,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","type":"DELETED","insertions":0,"deletions":-230},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/klm/mapfile-mod","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/common/klm/nlm_dispatch.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/uts/common/klm/nlm_impl.c","type":"MODIFIED","insertions":21,"deletions":-4},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/intel/Makefile.files","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/intel/lx_brand/Makefile","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":379,"sizeDeletions":-245},{"number":"4","revision":"59d73dcf2d9b389641c1b420dc1dc2db59257220","parents":["84091937dcd347b6d3f6be0b707e956fe77a2a52"],"ref":"refs/changes/26/1726/4","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1491410372,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1491410449,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491406105,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1491407976,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/brand/lx/os/lx_lockd.c","type":"ADDED","insertions":333,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_start_lockd.c","type":"DELETED","insertions":0,"deletions":-230},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/klm/mapfile-mod","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/common/klm/nlm_dispatch.c","type":"MODIFIED","insertions":6,"deletions":-5},{"file":"usr/src/uts/common/klm/nlm_impl.c","type":"MODIFIED","insertions":21,"deletions":-4},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/intel/Makefile.files","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/intel/lx_brand/Makefile","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":379,"sizeDeletions":-245}],"allReviewers":[{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}]}