{"project":"joyent/sdc-cloud-analytics","branch":"master","id":"Ibd00138556eb5e80b1b31233414ac8b05a9052ef","number":"5927","subject":"TOOLS-2201 engbld submodule handling results in dirty repositories","owner":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"url":"https://cr.joyent.us/5927","commitMessage":"TOOLS-2201 engbld submodule handling results in dirty repositories\n","createdOn":1552997265,"lastUpdated":1552998058,"open":false,"status":"ABANDONED","comments":[{"timestamp":1552997265,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 1."},{"timestamp":1552997271,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 1d258b701293b3f3c28ef6938012dea53ca7ee1d\n    \n    TOOLS-2201 engbld submodule handling results in dirty repositories"},{"timestamp":1552997420,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n sed -e \u0027s#@@CA_VERSION@@#-20190319T121016Z-gbd00138-dirty#g\u0027 pkg/cabase-package.json \u003e build/pkg/cabase/package.json\n (cd deps/node; ./configure --prefix\u003d/tmp/repo/build/node --with-dtrace --openssl-libpath\u003d/opt/local/lib --openssl-includes\u003d/opt/local/include \u0026\u0026 gmake \u0026\u0026 gmake install)\n Checking for program g++ or c++          : /opt/local/bin/g++ \n Checking for program cpp                 : /opt/local/bin/cpp \n Checking for program ar                  : /opt/local/bin/ar \n Checking for program ranlib              : /opt/local/bin/ranlib \n Checking for g++                         : ok  \n Checking for program gcc or cc           : /opt/local/bin/gcc \n Checking for gcc                         : ok  \n Checking for library dl                  : yes \n Checking for program dtrace              : /usr/sbin/dtrace \n Checking for function SSL_library_init   : yes \n Checking for header openssl/crypto.h     : yes \n Checking for library util                : not found \n Checking for library rt                  : yes \n Checking for ifaddrs on solaris          : yes \n Checking for library socket              : yes \n Checking for library nsl                 : yes \n Checking for library kstat               : yes \n Checking for fdatasync(2) with c++       : no \n \u0027configure\u0027 finished successfully (2.190s)\n gmake[1]: Entering directory \u0027/tmp/repo/deps/node\u0027\n Waf: Entering directory `/tmp/repo/deps/node/out\u0027\n [ 2/39] cc: deps/http_parser/http_parser.c -\u003e out/Release/deps/http_parser/http_parser_3.o\n gcc: error: unrecognized command line option \u0027-threads\u0027\n Waf: Leaving directory `/tmp/repo/deps/node/out\u0027\n DEST_OS: sunos\n DEST_CPU: x64\n Parallel Jobs: 1\n Product type: program\n /opt/local/bin/gcc -threads -g -O3 -DHAVE_OPENSSL\u003d1 -DSUNOS_HAVE_IFADDRS -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS\u003d64 -DHAVE_FDATASYNC\u003d0 -DARCH\u003d\"x64\" -DPLATFORM\u003d\"sunos\" -D__POSIX__\u003d1 -Wno-unused-parameter -D_FORTIFY_SOURCE\u003d2 -IRelease/deps/http_parser -I../deps/http_parser ../deps/http_parser/http_parser.c -c -o Release/deps/http_parser/http_parser_3.o\n Build failed:  -\u003e task failed (err #1): \n \t{task: cc http_parser.c -\u003e http_parser_3.o}\n Makefile:21: recipe for target \u0027program\u0027 failed\n gmake[1]: *** [program] Error 1\n gmake[1]: Leaving directory \u0027/tmp/repo/deps/node\u0027\n deps/eng/tools/mk/Makefile.node.targ:36: recipe for target \u0027build/node/bin/node\u0027 failed\n gmake: *** [build/node/bin/node] Error 2"},{"timestamp":1552998058,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Abandoned\n\nCA was deprecated by TRITON-884, no need for this change."}],"currentPatchSet":{"number":"1","revision":"bd00138556eb5e80b1b31233414ac8b05a9052ef","parents":["57736ae61cc3ffbdff5ff2af507da9f3aac8f924"],"ref":"refs/changes/27/5927/1","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1552997265,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1552997420,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"deps/eng","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1,"sizeDeletions":-1},"patchSets":[{"number":"1","revision":"bd00138556eb5e80b1b31233414ac8b05a9052ef","parents":["57736ae61cc3ffbdff5ff2af507da9f3aac8f924"],"ref":"refs/changes/27/5927/1","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1552997265,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1552997420,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"deps/eng","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":1,"sizeDeletions":-1}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}]}