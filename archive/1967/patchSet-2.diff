commit 7d3a92941994addecd73c17b2ae3d6766324612b (refs/changes/67/1967/2)
Author: Richard Bradley <richard.bradley@joyent.com>
Date:   2017-05-18T09:59:39+00:00 (2 years, 5 months ago)
    
    MANTA-3273 "manta-adm zk fixup" broken with VMs in remote DCs

diff --git a/lib/adm.js b/lib/adm.js
index 984a7e0..578d2f0 100644
--- a/lib/adm.js
+++ b/lib/adm.js
@@ -2428,7 +2428,8 @@ maAdm.prototype.auditZkServers = function ()
 
 		serverUuid = zkinstance.params['server_uuid'];
 		if (!self.ma_vms.hasOwnProperty(uuid)) {
-			if (self.ma_cns[serverUuid] !== null) {
+			if (self.ma_cns.hasOwnProperty(serverUuid) &&
+			    self.ma_cns[serverUuid] !== null) {
 				validationErrors.push(new VError(
 				    'nameservice instance "%s": VM appears ' +
 				    'to have been provisioned in this ' +
