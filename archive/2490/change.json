{"project":"joyent/eng","branch":"master","id":"I655fa08b2c613065df8180209246a4899c128c67","number":"2490","subject":"TOOLS-1850 common Makefile infrastructure for Go toolchain use TOOLS-1949 sdcnode updates for Dec 2017 node.js security releases Reviewed by: David Pacheco \u003cdap@joyent.com\u003e Approved by: David Pacheco \u003cdap@joyent.com\u003e","owner":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"url":"https://cr.joyent.us/2490","commitMessage":"TOOLS-1850 common Makefile infrastructure for Go toolchain use\nTOOLS-1949 sdcnode updates for Dec 2017 node.js security releases\nReviewed by: David Pacheco \u003cdap@joyent.com\u003e\nApproved by: David Pacheco \u003cdap@joyent.com\u003e\n","createdOn":1504305666,"lastUpdated":1515095640,"open":false,"status":"MERGED","comments":[{"timestamp":1504305666,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 1."},{"timestamp":1504306125,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 2."},{"timestamp":1506969029,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1511807975,"reviewer":{"name":"Sean Chittenden","email":"sean.chittenden@joyent.com","username":"seanc"},"message":"Patch Set 2: Code-Review-1\n\n(1 comment)\n\nWe need updated build flags for binaries in order to have `pg_prefaulter version` work.  The provided build target stamps the binary accordingly, so that\u0027s the other way to integrate this binary."},{"timestamp":1513972203,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 3."},{"timestamp":1513972354,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1514931532,"reviewer":{"name":"Sean Chittenden","email":"sean.chittenden@joyent.com","username":"seanc"},"message":"Patch Set 3: -Code-Review\n\n(4 comments)\n\nThe only substantive question that I have here is there a way to pass in linker flags to `${GO} build`?  I\u0027m guessing the calling GNUmakefile will just source these makefiles and call `${GO} build -X ...` ?"},{"timestamp":1514934253,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 3:\n\n(9 comments)"},{"timestamp":1515020940,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 3:\n\n\u003e The only substantive question that I have here is there a way to\n \u003e pass in linker flags to `${GO} build`?  I\u0027m guessing the calling\n \u003e GNUmakefile will just source these makefiles and call `${GO} build\n \u003e -X ...` ?\n\nThat is correct!  One of the chief functions of this repository is the library of Makefiles.  Consuming repositories include the parts that contain relevant functionality.  In this case, the \"go_prebuilt\" part of the library will arrange for a correct toolchain to materialise in the project workspace; what that project then does with it is up to the project itself.\n\nFor example, see the change to \"manta-manatee.git\" where I\u0027m using the \"$(GO)\" command in a couple of different ways, including the use of linker flags:\n\nhttps://cr.joyent.us/#/c/3136/5/Makefile"},{"timestamp":1515024613,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 4."},{"timestamp":1515025236,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 5."},{"timestamp":1515025554,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 5:\n\n(12 comments)"},{"timestamp":1515025830,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1515090328,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 6: Patch Set 5 was rebased."},{"timestamp":1515094298,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 7."},{"timestamp":1515095011,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 7: Code-Review+1 Integration-Approval+1\n\n(2 comments)"},{"timestamp":1515095528,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 8."},{"timestamp":1515095595,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 8: Code-Review+1 Integration-Approval+1"},{"timestamp":1515095629,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 9: Commit message was updated."},{"timestamp":1515095640,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Joshua M. Clulow"}],"currentPatchSet":{"number":"9","revision":"655fa08b2c613065df8180209246a4899c128c67","parents":["200799a2ea8c634e5758a0b69e5695c6a1c440d7"],"ref":"refs/changes/90/2490/9","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1515095629,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515095595,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1515095595,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"SUBM","value":"1","grantedOn":1515095640,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":24,"deletions":-4},{"file":"src/tellmewhereto.go","type":"ADDED","insertions":20,"deletions":0},{"file":"tools/download_go","type":"ADDED","insertions":126,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"tools/mk/Makefile.go_prebuilt.defs","type":"ADDED","insertions":132,"deletions":0},{"file":"tools/mk/Makefile.go_prebuilt.targ","type":"ADDED","insertions":55,"deletions":0}],"sizeInsertions":367,"sizeDeletions":-5},"patchSets":[{"number":"1","revision":"5b0fe534441668bf698bfc00a5f9bff339dda77c","parents":["a3caa0cb0f936d561acd08f6ca4cd19ab2a0f982"],"ref":"refs/changes/90/2490/1","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1504305666,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":25,"deletions":0},{"file":"tools/download_go","type":"ADDED","insertions":80,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"MODIFIED","insertions":8,"deletions":0},{"file":"tools/mk/Makefile.go_prebuilt.defs","type":"ADDED","insertions":132,"deletions":0},{"file":"tools/mk/Makefile.go_prebuilt.targ","type":"ADDED","insertions":47,"deletions":0}],"sizeInsertions":293,"sizeDeletions":0},{"number":"2","revision":"8903c9c54014b1b1337c7b567943bb3553f95e76","parents":["a3caa0cb0f936d561acd08f6ca4cd19ab2a0f982"],"ref":"refs/changes/90/2490/2","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1504306125,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506969029,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1511807975,"by":{"name":"Sean Chittenden","email":"sean.chittenden@joyent.com","username":"seanc"}}],"comments":[{"file":"Makefile","line":181,"reviewer":{"name":"Sean Chittenden","email":"sean.chittenden@joyent.com","username":"seanc"},"message":"After `build`, we should pass in some linker flags in order to stamp the binary with date and commit version information.  From the Makefile:\n\ngo build -ldflags \"-X main.commit\u003d`git describe --tags --always` -X main.date\u003d`date +%Y-%m-%d_%H:%d`\" -o $@ main.go"},{"file":"Makefile","line":181,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"This stuff was not meant to be in \"eng.git\" directly -- these parts will appear in some form in Manatee\u0027s Makefile.  I\u0027ve cleaned them up here."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":25,"deletions":0},{"file":"tools/download_go","type":"ADDED","insertions":80,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"MODIFIED","insertions":8,"deletions":0},{"file":"tools/mk/Makefile.go_prebuilt.defs","type":"ADDED","insertions":132,"deletions":0},{"file":"tools/mk/Makefile.go_prebuilt.targ","type":"ADDED","insertions":47,"deletions":0}],"sizeInsertions":293,"sizeDeletions":0},{"number":"3","revision":"da587a012bdfcd776bed12b3ce63e650e3423c24","parents":["a3caa0cb0f936d561acd08f6ca4cd19ab2a0f982"],"ref":"refs/changes/90/2490/3","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1513972203,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","comments":[{"file":"tools/download_go","line":14,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"It may be useful to document exactly what this does (e.g., \"This script fetches illumos Go binaries from download.joyent.com and puts them into the specified output directory.  The GOVERSION, GOOS, and GOARCH parameters specify which binaries to fetch, and the resulting file is placed into OUTDIR with the same name as it was found on the server.  If any of this fails, the script exits non-zero without having modified the output file.\""},{"file":"tools/download_go","line":14,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Done"},{"file":"tools/download_go","line":19,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This belongs above the previous block comment."},{"file":"tools/download_go","line":19,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Done"},{"file":"tools/download_go","line":26,"reviewer":{"name":"Sean Chittenden","email":"sean.chittenden@joyent.com","username":"seanc"},"message":"Add a `set -e` and `set -u` here?"},{"file":"tools/download_go","line":26,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"This script is constructed to be correct without \"errexit\".  I\u0027m checking the exit status of all of the operations where failure is important.  In others, e.g. the diagnostic use of \"printf\", I\u0027m not concerned with a non-zero exit and would like the program to continue to run."},{"file":"tools/download_go","line":44,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"It might be worth spelling this out more explicitly (e.g., \"a minimal set of tools that should be available everywhere that this script will run\").  Or maybe a note at the top of this file about the set of external tools it uses."},{"file":"tools/download_go","line":44,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Done"},{"file":"tools/download_go","line":45,"reviewer":{"name":"Sean Chittenden","email":"sean.chittenden@joyent.com","username":"seanc"},"message":"Naive question here: why can\u0027t we just use the version of Go found in pkgsrc and manage the version of the Go compiler there?  I\u0027m not aware of a reason why, as an example, we\u0027d want to specify Go 1.8 when Go 1.9 is available.  Running around and slipping binaries to 1.9 or 1.10 when it comes out, seems like something that\u0027ll get eventually get missed and we\u0027ll have code being built in the past."},{"file":"tools/download_go","line":45,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"The way we\u0027re obtaining and using the Go toolchain here is similar, in principle, to our use of \"sdcnode\".  In particular, we wish to retain reasonably tight control over the toolchain in use when building the software; it is a dependency like any other.\n\nAt this time, I think we want to have an engineer in the loop who can do the required due diligence before pulling in a new dependency version, as we do with \"sdcnode\".\n\nThe use of pkgsrc for this purpose would preclude tight control of toolchain selection on a per-workspace basis."},{"file":"tools/download_go","line":59,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I think this ought to be quoted."},{"file":"tools/download_go","line":59,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I don\u0027t believe bash does word expansion in double square bracket context."},{"file":"tools/download_go","line":66,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"It looks like this might do the wrong thing if invoked concurrently.  I assume that\u0027s okay for this use-case, though."},{"file":"tools/download_go","line":66,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"It does the wrong thing in that case, and indeed in others.  I\u0027ve now tried to make it better!"},{"file":"tools/mk/Makefile.go_prebuilt.defs","line":32,"reviewer":{"name":"Sean Chittenden","email":"sean.chittenden@joyent.com","username":"seanc"},"message":"Can we introduce a surrogate version number, like \"latest\", to pull in the latest released version?  That would address my previous concern."},{"file":"tools/mk/Makefile.go_prebuilt.defs","line":32,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"For now, we\u0027ll be sticking with explicit versions.  If this becomes a problem in practice, we can revisit more complex solutions to this."},{"file":"tools/mk/Makefile.go_prebuilt.defs","line":37,"reviewer":{"name":"Sean Chittenden","email":"sean.chittenden@joyent.com","username":"seanc"},"message":"Extra tab character here"},{"file":"tools/mk/Makefile.go_prebuilt.defs","line":37,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Done"},{"file":"tools/mk/Makefile.go_prebuilt.defs","line":38,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Presumably this is only during the build?  This is not recorded and somehow applied at runtime, right?"},{"file":"tools/mk/Makefile.go_prebuilt.defs","line":38,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"That is correct.  All of this is in the context of the Go toolchain, which you can think of as working in basically all the ways that \"gcc\" would work here."},{"file":"tools/mk/Makefile.go_prebuilt.defs","line":68,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"FWIW, you can also do this:\n\n    CACHE_DIR ?\u003d $(error ...)\n\nThat has the advantage that it will only fail if and when that variable is actually used."},{"file":"tools/mk/Makefile.go_prebuilt.defs","line":127,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Should this also include GO_GOOS and GO_GOARCH, since the caller can have changed these as well?"},{"file":"tools/mk/Makefile.go_prebuilt.defs","line":127,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"GO_GOOS and GO_GOARCH nominate the _target_ architecture for which the toolchain will be building binaries.  This is unrelated to the architecture of the built toolchain itself, for the same reasons now outlined around the hardcoding of \"solaris\" and \"amd64\" in the other Makefile."},{"file":"tools/mk/Makefile.go_prebuilt.targ","line":36,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I think this should use the actual variables from Makefile.go_prebuilt.defs."},{"file":"tools/mk/Makefile.go_prebuilt.targ","line":36,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I\u0027ve (hopefully convincingly!) described the distinction between those variables and these values in a comment."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"tools/download_go","type":"ADDED","insertions":89,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"MODIFIED","insertions":8,"deletions":0},{"file":"tools/mk/Makefile.go_prebuilt.defs","type":"ADDED","insertions":132,"deletions":0},{"file":"tools/mk/Makefile.go_prebuilt.targ","type":"ADDED","insertions":47,"deletions":0}],"sizeInsertions":277,"sizeDeletions":0},{"number":"4","revision":"5aa64f70b20841d0c99413a40cdcddab8ec31286","parents":["a3caa0cb0f936d561acd08f6ca4cd19ab2a0f982"],"ref":"refs/changes/90/2490/4","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1515024613,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"tools/download_go","type":"ADDED","insertions":126,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"MODIFIED","insertions":8,"deletions":0},{"file":"tools/mk/Makefile.go_prebuilt.defs","type":"ADDED","insertions":132,"deletions":0},{"file":"tools/mk/Makefile.go_prebuilt.targ","type":"ADDED","insertions":55,"deletions":0}],"sizeInsertions":322,"sizeDeletions":0},{"number":"5","revision":"dba28856cb129347aafd9bd25fd0c2b1bc04af4c","parents":["a3caa0cb0f936d561acd08f6ca4cd19ab2a0f982"],"ref":"refs/changes/90/2490/5","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1515025236,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515025830,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"tools/download_go","type":"ADDED","insertions":126,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"MODIFIED","insertions":8,"deletions":0},{"file":"tools/mk/Makefile.go_prebuilt.defs","type":"ADDED","insertions":132,"deletions":0},{"file":"tools/mk/Makefile.go_prebuilt.targ","type":"ADDED","insertions":55,"deletions":0}],"sizeInsertions":322,"sizeDeletions":0},{"number":"6","revision":"3ea3f263be35531458ea7e0076c294a3819698b0","parents":["200799a2ea8c634e5758a0b69e5695c6a1c440d7"],"ref":"refs/changes/90/2490/6","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1515090328,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515025830,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"tools/download_go","type":"ADDED","insertions":126,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"MODIFIED","insertions":8,"deletions":0},{"file":"tools/mk/Makefile.go_prebuilt.defs","type":"ADDED","insertions":132,"deletions":0},{"file":"tools/mk/Makefile.go_prebuilt.targ","type":"ADDED","insertions":55,"deletions":0}],"sizeInsertions":322,"sizeDeletions":0},{"number":"7","revision":"ed462000a971c9ff245829b22d279f6f5647bca0","parents":["200799a2ea8c634e5758a0b69e5695c6a1c440d7"],"ref":"refs/changes/90/2490/7","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1515094298,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515095011,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1515095011,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"comments":[{"file":"Makefile","line":119,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"How about a one-line comment saying that we\u0027re exercising the Go toolchain targets here?"},{"file":"Makefile","line":120,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"The indenting here differs from the block immediately preceding it."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":15,"deletions":-3},{"file":"src/tellmewhereto.go","type":"ADDED","insertions":20,"deletions":0},{"file":"tools/download_go","type":"ADDED","insertions":126,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"MODIFIED","insertions":8,"deletions":0},{"file":"tools/mk/Makefile.go_prebuilt.defs","type":"ADDED","insertions":132,"deletions":0},{"file":"tools/mk/Makefile.go_prebuilt.targ","type":"ADDED","insertions":55,"deletions":0}],"sizeInsertions":357,"sizeDeletions":-3},{"number":"8","revision":"1b54e432ca12ac650f646dca39e4ea6f08cf8c9b","parents":["200799a2ea8c634e5758a0b69e5695c6a1c440d7"],"ref":"refs/changes/90/2490/8","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1515095528,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515095595,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1515095595,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":24,"deletions":-4},{"file":"src/tellmewhereto.go","type":"ADDED","insertions":20,"deletions":0},{"file":"tools/download_go","type":"ADDED","insertions":126,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"tools/mk/Makefile.go_prebuilt.defs","type":"ADDED","insertions":132,"deletions":0},{"file":"tools/mk/Makefile.go_prebuilt.targ","type":"ADDED","insertions":55,"deletions":0}],"sizeInsertions":367,"sizeDeletions":-5},{"number":"9","revision":"655fa08b2c613065df8180209246a4899c128c67","parents":["200799a2ea8c634e5758a0b69e5695c6a1c440d7"],"ref":"refs/changes/90/2490/9","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1515095629,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1515095595,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1515095595,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"SUBM","value":"1","grantedOn":1515095640,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":24,"deletions":-4},{"file":"src/tellmewhereto.go","type":"ADDED","insertions":20,"deletions":0},{"file":"tools/download_go","type":"ADDED","insertions":126,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"tools/mk/Makefile.go_prebuilt.defs","type":"ADDED","insertions":132,"deletions":0},{"file":"tools/mk/Makefile.go_prebuilt.targ","type":"ADDED","insertions":55,"deletions":0}],"sizeInsertions":367,"sizeDeletions":-5}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Sean Chittenden","email":"sean.chittenden@joyent.com","username":"seanc"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}]}