{"project":"joyent/illumos-joyent","branch":"master","id":"I04702c67f9849459ded9e8023702a4bb9f298b5a","number":"3587","subject":"OS-6547 Implement KPTI Reviewed by: John Levon \u003cjohn.levon@joyent.com\u003e Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Approved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e","owner":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"url":"https://cr.joyent.us/3587","commitMessage":"OS-6547 Implement KPTI\nReviewed by: John Levon \u003cjohn.levon@joyent.com\u003e\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1520878896,"lastUpdated":1520879727,"open":false,"status":"MERGED","comments":[{"timestamp":1520878896,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 1."},{"timestamp":1520879181,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1520879464,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1: Integration-Approval+1"},{"timestamp":1520879505,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 2: Commit message was updated."},{"timestamp":1520879727,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Alex Wilson"}],"currentPatchSet":{"number":"2","revision":"d85fbfe15cf9925f83722b6d62da49d549af615c","parents":["8005f4ee748b1fe324b3f234a2defe0dd557611b"],"ref":"refs/changes/87/3587/2","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1520879505,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520879181,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1520879464,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1520879726,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/i86mmu.c","type":"MODIFIED","insertions":164,"deletions":-75},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/i86mmu.h","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/unix.c","type":"MODIFIED","insertions":21,"deletions":-5},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/unix_sup.s","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/cmd/mdb/intel/kmdb/kaif.c","type":"MODIFIED","insertions":37,"deletions":0},{"file":"usr/src/cmd/mdb/intel/mdb/mdb_amd64util.c","type":"MODIFIED","insertions":11,"deletions":-8},{"file":"usr/src/cmd/mdb/intel/mdb/mdb_kreg.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/sys/sysmacros.h","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"usr/src/uts/i86pc/Makefile.files","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/i86pc/ml/genassym.c","type":"MODIFIED","insertions":2,"deletions":-21},{"file":"usr/src/uts/i86pc/ml/kdi_subr.s","type":"DELETED","insertions":0,"deletions":-160},{"file":"usr/src/uts/i86pc/ml/kpti_trampolines.s","type":"ADDED","insertions":713,"deletions":0},{"file":"usr/src/uts/i86pc/ml/locore.s","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/i86pc/ml/offsets.in","type":"MODIFIED","insertions":39,"deletions":-1},{"file":"usr/src/uts/i86pc/ml/syscall_asm_amd64.s","type":"MODIFIED","insertions":76,"deletions":-29},{"file":"usr/src/uts/i86pc/os/intr.c","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"usr/src/uts/i86pc/os/mlsetup.c","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"usr/src/uts/i86pc/os/mp_pc.c","type":"MODIFIED","insertions":52,"deletions":-4},{"file":"usr/src/uts/i86pc/os/mp_startup.c","type":"MODIFIED","insertions":48,"deletions":-37},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":25,"deletions":-31},{"file":"usr/src/uts/i86pc/os/trap.c","type":"MODIFIED","insertions":41,"deletions":-51},{"file":"usr/src/uts/i86pc/sys/machcpuvar.h","type":"MODIFIED","insertions":85,"deletions":-2},{"file":"usr/src/uts/i86pc/sys/machparam.h","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"usr/src/uts/i86pc/sys/machprivregs.h","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/i86pc/sys/rm_platter.h","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/uts/i86pc/vm/hat_i86.c","type":"MODIFIED","insertions":718,"deletions":-116},{"file":"usr/src/uts/i86pc/vm/hat_i86.h","type":"MODIFIED","insertions":52,"deletions":-21},{"file":"usr/src/uts/i86pc/vm/hat_pte.h","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"usr/src/uts/i86pc/vm/htable.c","type":"MODIFIED","insertions":44,"deletions":-37},{"file":"usr/src/uts/i86pc/vm/htable.h","type":"MODIFIED","insertions":15,"deletions":-7},{"file":"usr/src/uts/i86xpv/Makefile.files","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/intel/Makefile.rules","type":"MODIFIED","insertions":0,"deletions":-6},{"file":"usr/src/uts/intel/amd64/sys/kdi_regs.h","type":"MODIFIED","insertions":14,"deletions":-13},{"file":"usr/src/uts/intel/ia32/ml/exception.s","type":"MODIFIED","insertions":43,"deletions":-24},{"file":"usr/src/uts/intel/ia32/ml/swtch.s","type":"MODIFIED","insertions":40,"deletions":-21},{"file":"usr/src/uts/intel/ia32/os/desctbls.c","type":"MODIFIED","insertions":239,"deletions":-179},{"file":"usr/src/uts/intel/ia32/os/sysi86.c","type":"MODIFIED","insertions":22,"deletions":-3},{"file":"usr/src/uts/intel/ia32/sys/trap.h","type":"MODIFIED","insertions":20,"deletions":0},{"file":"usr/src/uts/intel/kdi/ia32/kdi_asm.s","type":"DELETED","insertions":0,"deletions":-662},{"file":"usr/src/uts/intel/kdi/kdi_asm.s","fileOld":"usr/src/uts/intel/kdi/amd64/kdi_asm.s","type":"RENAMED","insertions":75,"deletions":-59},{"file":"usr/src/uts/intel/kdi/kdi_idt.c","type":"MODIFIED","insertions":20,"deletions":-6},{"file":"usr/src/uts/intel/kdi/kdi_idthdl.s","type":"MODIFIED","insertions":161,"deletions":-36},{"file":"usr/src/uts/intel/kdi/kdi_offsets.in","type":"MODIFIED","insertions":0,"deletions":-9},{"file":"usr/src/uts/intel/sys/archsystm.h","type":"MODIFIED","insertions":10,"deletions":-6},{"file":"usr/src/uts/intel/sys/segments.h","type":"MODIFIED","insertions":38,"deletions":-12}],"sizeInsertions":2930,"sizeDeletions":-1677},"patchSets":[{"number":"1","revision":"04702c67f9849459ded9e8023702a4bb9f298b5a","parents":["8005f4ee748b1fe324b3f234a2defe0dd557611b"],"ref":"refs/changes/87/3587/1","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1520878896,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520879181,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1520879464,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/i86mmu.c","type":"MODIFIED","insertions":164,"deletions":-75},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/i86mmu.h","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/unix.c","type":"MODIFIED","insertions":21,"deletions":-5},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/unix_sup.s","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/cmd/mdb/intel/kmdb/kaif.c","type":"MODIFIED","insertions":37,"deletions":0},{"file":"usr/src/cmd/mdb/intel/mdb/mdb_amd64util.c","type":"MODIFIED","insertions":11,"deletions":-8},{"file":"usr/src/cmd/mdb/intel/mdb/mdb_kreg.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/sys/sysmacros.h","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"usr/src/uts/i86pc/Makefile.files","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/i86pc/ml/genassym.c","type":"MODIFIED","insertions":2,"deletions":-21},{"file":"usr/src/uts/i86pc/ml/kdi_subr.s","type":"DELETED","insertions":0,"deletions":-160},{"file":"usr/src/uts/i86pc/ml/kpti_trampolines.s","type":"ADDED","insertions":713,"deletions":0},{"file":"usr/src/uts/i86pc/ml/locore.s","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/i86pc/ml/offsets.in","type":"MODIFIED","insertions":39,"deletions":-1},{"file":"usr/src/uts/i86pc/ml/syscall_asm_amd64.s","type":"MODIFIED","insertions":76,"deletions":-29},{"file":"usr/src/uts/i86pc/os/intr.c","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"usr/src/uts/i86pc/os/mlsetup.c","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"usr/src/uts/i86pc/os/mp_pc.c","type":"MODIFIED","insertions":52,"deletions":-4},{"file":"usr/src/uts/i86pc/os/mp_startup.c","type":"MODIFIED","insertions":48,"deletions":-37},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":25,"deletions":-31},{"file":"usr/src/uts/i86pc/os/trap.c","type":"MODIFIED","insertions":41,"deletions":-51},{"file":"usr/src/uts/i86pc/sys/machcpuvar.h","type":"MODIFIED","insertions":85,"deletions":-2},{"file":"usr/src/uts/i86pc/sys/machparam.h","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"usr/src/uts/i86pc/sys/machprivregs.h","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/i86pc/sys/rm_platter.h","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/uts/i86pc/vm/hat_i86.c","type":"MODIFIED","insertions":718,"deletions":-116},{"file":"usr/src/uts/i86pc/vm/hat_i86.h","type":"MODIFIED","insertions":52,"deletions":-21},{"file":"usr/src/uts/i86pc/vm/hat_pte.h","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"usr/src/uts/i86pc/vm/htable.c","type":"MODIFIED","insertions":44,"deletions":-37},{"file":"usr/src/uts/i86pc/vm/htable.h","type":"MODIFIED","insertions":15,"deletions":-7},{"file":"usr/src/uts/i86xpv/Makefile.files","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/intel/Makefile.rules","type":"MODIFIED","insertions":0,"deletions":-6},{"file":"usr/src/uts/intel/amd64/sys/kdi_regs.h","type":"MODIFIED","insertions":14,"deletions":-13},{"file":"usr/src/uts/intel/ia32/ml/exception.s","type":"MODIFIED","insertions":43,"deletions":-24},{"file":"usr/src/uts/intel/ia32/ml/swtch.s","type":"MODIFIED","insertions":40,"deletions":-21},{"file":"usr/src/uts/intel/ia32/os/desctbls.c","type":"MODIFIED","insertions":239,"deletions":-179},{"file":"usr/src/uts/intel/ia32/os/sysi86.c","type":"MODIFIED","insertions":22,"deletions":-3},{"file":"usr/src/uts/intel/ia32/sys/trap.h","type":"MODIFIED","insertions":20,"deletions":0},{"file":"usr/src/uts/intel/kdi/ia32/kdi_asm.s","type":"DELETED","insertions":0,"deletions":-662},{"file":"usr/src/uts/intel/kdi/kdi_asm.s","fileOld":"usr/src/uts/intel/kdi/amd64/kdi_asm.s","type":"RENAMED","insertions":75,"deletions":-59},{"file":"usr/src/uts/intel/kdi/kdi_idt.c","type":"MODIFIED","insertions":20,"deletions":-6},{"file":"usr/src/uts/intel/kdi/kdi_idthdl.s","type":"MODIFIED","insertions":161,"deletions":-36},{"file":"usr/src/uts/intel/kdi/kdi_offsets.in","type":"MODIFIED","insertions":0,"deletions":-9},{"file":"usr/src/uts/intel/sys/archsystm.h","type":"MODIFIED","insertions":10,"deletions":-6},{"file":"usr/src/uts/intel/sys/segments.h","type":"MODIFIED","insertions":38,"deletions":-12}],"sizeInsertions":2930,"sizeDeletions":-1677},{"number":"2","revision":"d85fbfe15cf9925f83722b6d62da49d549af615c","parents":["8005f4ee748b1fe324b3f234a2defe0dd557611b"],"ref":"refs/changes/87/3587/2","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1520879505,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1520879726,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1520879181,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1520879464,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/i86mmu.c","type":"MODIFIED","insertions":164,"deletions":-75},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/i86mmu.h","type":"MODIFIED","insertions":5,"deletions":0},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/unix.c","type":"MODIFIED","insertions":21,"deletions":-5},{"file":"usr/src/cmd/mdb/i86pc/modules/unix/unix_sup.s","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/cmd/mdb/intel/kmdb/kaif.c","type":"MODIFIED","insertions":37,"deletions":0},{"file":"usr/src/cmd/mdb/intel/mdb/mdb_amd64util.c","type":"MODIFIED","insertions":11,"deletions":-8},{"file":"usr/src/cmd/mdb/intel/mdb/mdb_kreg.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/sys/sysmacros.h","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"usr/src/uts/i86pc/Makefile.files","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"usr/src/uts/i86pc/ml/genassym.c","type":"MODIFIED","insertions":2,"deletions":-21},{"file":"usr/src/uts/i86pc/ml/kdi_subr.s","type":"DELETED","insertions":0,"deletions":-160},{"file":"usr/src/uts/i86pc/ml/kpti_trampolines.s","type":"ADDED","insertions":713,"deletions":0},{"file":"usr/src/uts/i86pc/ml/locore.s","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/i86pc/ml/offsets.in","type":"MODIFIED","insertions":39,"deletions":-1},{"file":"usr/src/uts/i86pc/ml/syscall_asm_amd64.s","type":"MODIFIED","insertions":76,"deletions":-29},{"file":"usr/src/uts/i86pc/os/intr.c","type":"MODIFIED","insertions":31,"deletions":-1},{"file":"usr/src/uts/i86pc/os/mlsetup.c","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"usr/src/uts/i86pc/os/mp_pc.c","type":"MODIFIED","insertions":52,"deletions":-4},{"file":"usr/src/uts/i86pc/os/mp_startup.c","type":"MODIFIED","insertions":48,"deletions":-37},{"file":"usr/src/uts/i86pc/os/startup.c","type":"MODIFIED","insertions":25,"deletions":-31},{"file":"usr/src/uts/i86pc/os/trap.c","type":"MODIFIED","insertions":41,"deletions":-51},{"file":"usr/src/uts/i86pc/sys/machcpuvar.h","type":"MODIFIED","insertions":85,"deletions":-2},{"file":"usr/src/uts/i86pc/sys/machparam.h","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"usr/src/uts/i86pc/sys/machprivregs.h","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/i86pc/sys/rm_platter.h","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"usr/src/uts/i86pc/vm/hat_i86.c","type":"MODIFIED","insertions":718,"deletions":-116},{"file":"usr/src/uts/i86pc/vm/hat_i86.h","type":"MODIFIED","insertions":52,"deletions":-21},{"file":"usr/src/uts/i86pc/vm/hat_pte.h","type":"MODIFIED","insertions":12,"deletions":-4},{"file":"usr/src/uts/i86pc/vm/htable.c","type":"MODIFIED","insertions":44,"deletions":-37},{"file":"usr/src/uts/i86pc/vm/htable.h","type":"MODIFIED","insertions":15,"deletions":-7},{"file":"usr/src/uts/i86xpv/Makefile.files","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/intel/Makefile.rules","type":"MODIFIED","insertions":0,"deletions":-6},{"file":"usr/src/uts/intel/amd64/sys/kdi_regs.h","type":"MODIFIED","insertions":14,"deletions":-13},{"file":"usr/src/uts/intel/ia32/ml/exception.s","type":"MODIFIED","insertions":43,"deletions":-24},{"file":"usr/src/uts/intel/ia32/ml/swtch.s","type":"MODIFIED","insertions":40,"deletions":-21},{"file":"usr/src/uts/intel/ia32/os/desctbls.c","type":"MODIFIED","insertions":239,"deletions":-179},{"file":"usr/src/uts/intel/ia32/os/sysi86.c","type":"MODIFIED","insertions":22,"deletions":-3},{"file":"usr/src/uts/intel/ia32/sys/trap.h","type":"MODIFIED","insertions":20,"deletions":0},{"file":"usr/src/uts/intel/kdi/ia32/kdi_asm.s","type":"DELETED","insertions":0,"deletions":-662},{"file":"usr/src/uts/intel/kdi/kdi_asm.s","fileOld":"usr/src/uts/intel/kdi/amd64/kdi_asm.s","type":"RENAMED","insertions":75,"deletions":-59},{"file":"usr/src/uts/intel/kdi/kdi_idt.c","type":"MODIFIED","insertions":20,"deletions":-6},{"file":"usr/src/uts/intel/kdi/kdi_idthdl.s","type":"MODIFIED","insertions":161,"deletions":-36},{"file":"usr/src/uts/intel/kdi/kdi_offsets.in","type":"MODIFIED","insertions":0,"deletions":-9},{"file":"usr/src/uts/intel/sys/archsystm.h","type":"MODIFIED","insertions":10,"deletions":-6},{"file":"usr/src/uts/intel/sys/segments.h","type":"MODIFIED","insertions":38,"deletions":-12}],"sizeInsertions":2930,"sizeDeletions":-1677}],"allReviewers":[{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}]}