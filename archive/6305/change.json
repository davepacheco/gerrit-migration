{"project":"joyent/sdc-cloudapi","branch":"master","topic":"rfd163","id":"I1c1a629c55536a040aee14cf6595c1ec5eee977f","number":"6305","subject":"TRITON-1324 CloudAPI needs to support log parameter on firewall rules Reviewed by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e Reviewed by: Orlando Vazquez \u003corlando@joyent.com\u003e Approved by: Orlando Vazquez \u003corlando@joyent.com\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/6305","commitMessage":"TRITON-1324 CloudAPI needs to support log parameter on firewall rules\nReviewed by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e\nReviewed by: Orlando Vazquez \u003corlando@joyent.com\u003e\nApproved by: Orlando Vazquez \u003corlando@joyent.com\u003e\n","createdOn":1558104332,"lastUpdated":1559139431,"open":false,"status":"MERGED","comments":[{"timestamp":1558104332,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1558104336,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 2ab0e3cbdb33eb2389df4b21b3d226b16d58e830\n    \n    TRITON-1324 CloudAPI needs to support log parameter on firewall rules"},{"timestamp":1558104368,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1558111865,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\n(1 comment)\n\nRemoved a failing test based on the wrong assumption"},{"timestamp":1558112787,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Topic set to rfd163"},{"timestamp":1558363138,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNote I tested this with https://cr.joyent.us/6245 already on my HN"},{"timestamp":1558444615,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1558458910,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2."},{"timestamp":1558458915,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit fdd71414c97b43c05a61efca7f330641abc9ae5c\n    \n    TRITON-1324 CloudAPI needs to support log parameter on firewall rules"},{"timestamp":1558458947,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1558459061,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\n(1 comment)\n\nOk, created a \"too high\" package so we can keep the failing resize test."},{"timestamp":1558645057,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1559067329,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1559139355,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3: Patch Set 2 was rebased"},{"timestamp":1559139381,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 4."},{"timestamp":1559139393,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3:\n\n\"make check\" passed ok"},{"timestamp":1559139394,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 5: Patch Set 4 was rebased"},{"timestamp":1559139404,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"},{"timestamp":1559139419,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4:\n\n\"make check\" passed ok"},{"timestamp":1559139431,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5:\n\n\"make check\" passed ok"}],"currentPatchSet":{"number":"5","revision":"b0d7bf4e39cae5af2b81d42d454e3a949814f196","parents":["0b0dec6b3e99962990e481414de4b520dbbd0c9e"],"ref":"refs/changes/05/6305/5","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1559139394,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1558458947,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558645057,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1559067329,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1559067329,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"SUBM","value":"1","grantedOn":1559139404,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"lib/rules.js","type":"MODIFIED","insertions":13,"deletions":-7},{"file":"test/machines.test.js","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"test/machines/firewall-rules.js","type":"MODIFIED","insertions":11,"deletions":-6},{"file":"test/machines/resize.js","type":"MODIFIED","insertions":2,"deletions":-8},{"file":"test/populate_network.test.js","type":"MODIFIED","insertions":1,"deletions":-2}],"sizeInsertions":36,"sizeDeletions":-32},"patchSets":[{"number":"1","revision":"da8222da9b4749684f04b2dfc4b50f2092217eb0","parents":["e46b9540cba121dd80c536c829f3c611fceadf6a"],"ref":"refs/changes/05/6305/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1558104332,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1558104368,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/machines/resize.js","line":23,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"This is no longer used."},{"file":"test/machines/resize.js","line":58,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"This test is based on the assumption that any COAL will have always the default RAM size, which is not true on many cases and, specially, it\u0027s not true if you have 1 or more CNs."},{"file":"test/machines/resize.js","line":58,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"I wonder if instead of doing ths, it would be better to change the pkgUp package to require 100 TiB of RAM, then always run it.  100 TiB is the new 640 KiB.\n\nIf getting to the bottom of this proves to be difficult for some reason, it could be punted to a separate ticket and just note the failure of this test in the test results for TRITON-1324."},{"file":"test/machines/resize.js","line":58,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"I went for something I think it\u0027ll be huge enough to fail provisioning on nightly too, we\u0027ll see :-)"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/rules.js","type":"MODIFIED","insertions":13,"deletions":-7},{"file":"test/machines/firewall-rules.js","type":"MODIFIED","insertions":11,"deletions":-6},{"file":"test/machines/resize.js","type":"MODIFIED","insertions":1,"deletions":-34},{"file":"test/populate_network.test.js","type":"MODIFIED","insertions":1,"deletions":-2}],"sizeInsertions":26,"sizeDeletions":-49},{"number":"2","revision":"623d3ef3afcb953e7f4df18ffbc9ce38f8b4f6ab","parents":["e46b9540cba121dd80c536c829f3c611fceadf6a"],"ref":"refs/changes/05/6305/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1558458910,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1558458947,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1559067329,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1559067329,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558645057,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/rules.js","type":"MODIFIED","insertions":13,"deletions":-7},{"file":"test/machines.test.js","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"test/machines/firewall-rules.js","type":"MODIFIED","insertions":11,"deletions":-6},{"file":"test/machines/resize.js","type":"MODIFIED","insertions":2,"deletions":-8},{"file":"test/populate_network.test.js","type":"MODIFIED","insertions":1,"deletions":-2}],"sizeInsertions":36,"sizeDeletions":-32},{"number":"3","revision":"4c008b1794a7c3328ade25a4ed7c2c064b57c6fd","parents":["0b0dec6b3e99962990e481414de4b520dbbd0c9e"],"ref":"refs/changes/05/6305/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1559139355,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1558458947,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1559067329,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1559067329,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558645057,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/rules.js","type":"MODIFIED","insertions":13,"deletions":-7},{"file":"test/machines.test.js","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"test/machines/firewall-rules.js","type":"MODIFIED","insertions":11,"deletions":-6},{"file":"test/machines/resize.js","type":"MODIFIED","insertions":2,"deletions":-8},{"file":"test/populate_network.test.js","type":"MODIFIED","insertions":1,"deletions":-2}],"sizeInsertions":36,"sizeDeletions":-32},{"number":"4","revision":"1c1a629c55536a040aee14cf6595c1ec5eee977f","parents":["e46b9540cba121dd80c536c829f3c611fceadf6a"],"ref":"refs/changes/05/6305/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1559139381,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1558458947,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1559067329,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1559067329,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558645057,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"lib/rules.js","type":"MODIFIED","insertions":13,"deletions":-7},{"file":"test/machines.test.js","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"test/machines/firewall-rules.js","type":"MODIFIED","insertions":11,"deletions":-6},{"file":"test/machines/resize.js","type":"MODIFIED","insertions":2,"deletions":-8},{"file":"test/populate_network.test.js","type":"MODIFIED","insertions":1,"deletions":-2}],"sizeInsertions":36,"sizeDeletions":-32},{"number":"5","revision":"b0d7bf4e39cae5af2b81d42d454e3a949814f196","parents":["0b0dec6b3e99962990e481414de4b520dbbd0c9e"],"ref":"refs/changes/05/6305/5","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1559139394,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1558458947,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1559139404,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1559067329,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1559067329,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558645057,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"lib/rules.js","type":"MODIFIED","insertions":13,"deletions":-7},{"file":"test/machines.test.js","type":"MODIFIED","insertions":9,"deletions":-9},{"file":"test/machines/firewall-rules.js","type":"MODIFIED","insertions":11,"deletions":-6},{"file":"test/machines/resize.js","type":"MODIFIED","insertions":2,"deletions":-8},{"file":"test/populate_network.test.js","type":"MODIFIED","insertions":1,"deletions":-2}],"sizeInsertions":36,"sizeDeletions":-32}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}]}