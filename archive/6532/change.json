{"project":"joyent/illumos-joyent","branch":"master","id":"I4545ad234925a6176b310074fe28c034b92c2d97","number":"6532","subject":"OS-7867 zfs create needs dry-run Reviewed by: Brian Behlendorf \u003cbehlendorf1@llnl.gov\u003e Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Approved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e","owner":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"url":"https://cr.joyent.us/6532","commitMessage":"OS-7867 zfs create needs dry-run\nReviewed by: Brian Behlendorf \u003cbehlendorf1@llnl.gov\u003e\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1561936478,"lastUpdated":1562589169,"open":false,"status":"MERGED","comments":[{"timestamp":1561936478,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Uploaded patch set 1."},{"timestamp":1562174192,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Uploaded patch set 2."},{"timestamp":1562184227,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2: Code-Review+1\n\nThis looks good to me for our private implementation. I would omit the non-smartos runfiles from this change since they\u0027re not useful on smartos."},{"timestamp":1562190345,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Uploaded patch set 3."},{"timestamp":1562191662,"reviewer":{"name":"Brian Behlendorf","email":"behlendorf1@llnl.gov","username":"behlendorf"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1562192514,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1\n\nI\u0027m giving IA so you\u0027re not blocked, but please wait until the release is branched today (assuming that was not already your plan)."},{"timestamp":1562331931,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Uploaded patch set 4."},{"timestamp":1562587382,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1\n\nAs best I can see, you just got clobbered on the rebase for the run file, so you should be all set to integrate."},{"timestamp":1562589132,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 5: Commit message was updated."},{"timestamp":1562589155,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 6: Patch Set 5 was rebased"},{"timestamp":1562589169,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Mike Gerdts"}],"currentPatchSet":{"number":"6","revision":"b322ba367cdb75882f1cede5a8b22c7fd17ced94","parents":["374965e669006070cff81f276f2e13f54c6d9d51"],"ref":"refs/changes/32/6532/6","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1562589155,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562587382,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1562587382,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1562589169,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/cmd/zfs/zfs_main.c","type":"MODIFIED","insertions":95,"deletions":-22},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zfs_create/zfs_create_dryrun.ksh","type":"ADDED","insertions":169,"deletions":0}],"sizeInsertions":266,"sizeDeletions":-23},"patchSets":[{"number":"1","revision":"24f604c3d4ec7580e93bb16aa2fd7611520021a4","parents":["88531c3e5ce29d6ea3c44903bc3f1daf216153ed"],"ref":"refs/changes/32/6532/1","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1561936478,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/zfs/zfs_main.c","type":"MODIFIED","insertions":93,"deletions":-24},{"file":"usr/src/man/man1m/zfs.1m","type":"MODIFIED","insertions":36,"deletions":-4},{"file":"usr/src/test/zfs-tests/runfiles/delphix.run","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/runfiles/omnios.run","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/zfs-tests/runfiles/openindiana.run","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zfs_create/zfs_create_dryrun.ksh","type":"ADDED","insertions":169,"deletions":0}],"sizeInsertions":304,"sizeDeletions":-32},{"number":"2","revision":"18e9cc031e5d855e75bd9401506897c81da085e6","parents":["88531c3e5ce29d6ea3c44903bc3f1daf216153ed"],"ref":"refs/changes/32/6532/2","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1562174192,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562184227,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/zfs/zfs_main.c","type":"MODIFIED","insertions":95,"deletions":-22},{"file":"usr/src/test/zfs-tests/runfiles/delphix.run","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/runfiles/omnios.run","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/zfs-tests/runfiles/openindiana.run","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zfs_create/zfs_create_dryrun.ksh","type":"ADDED","insertions":169,"deletions":0}],"sizeInsertions":270,"sizeDeletions":-26},{"number":"3","revision":"102f95af4d7caecce6362f6510968730cd587f84","parents":["88531c3e5ce29d6ea3c44903bc3f1daf216153ed"],"ref":"refs/changes/32/6532/3","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1562190345,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562192514,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1562192514,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562191662,"by":{"name":"Brian Behlendorf","email":"behlendorf1@llnl.gov","username":"behlendorf"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/zfs/zfs_main.c","type":"MODIFIED","insertions":95,"deletions":-22},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zfs_create/zfs_create_dryrun.ksh","type":"ADDED","insertions":169,"deletions":0}],"sizeInsertions":265,"sizeDeletions":-23},{"number":"4","revision":"4545ad234925a6176b310074fe28c034b92c2d97","parents":["7b68e6271c0d65aaf13b11f96df43d8572db22fb"],"ref":"refs/changes/32/6532/4","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1562331931,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562587382,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1562587382,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/zfs/zfs_main.c","type":"MODIFIED","insertions":95,"deletions":-22},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zfs_create/zfs_create_dryrun.ksh","type":"ADDED","insertions":169,"deletions":0}],"sizeInsertions":266,"sizeDeletions":-23},{"number":"5","revision":"ea4bca2f01ffcacb36738ee76f55bbbe0ef26bd3","parents":["7b68e6271c0d65aaf13b11f96df43d8572db22fb"],"ref":"refs/changes/32/6532/5","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1562589132,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562587382,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1562587382,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/cmd/zfs/zfs_main.c","type":"MODIFIED","insertions":95,"deletions":-22},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zfs_create/zfs_create_dryrun.ksh","type":"ADDED","insertions":169,"deletions":0}],"sizeInsertions":266,"sizeDeletions":-23},{"number":"6","revision":"b322ba367cdb75882f1cede5a8b22c7fd17ced94","parents":["374965e669006070cff81f276f2e13f54c6d9d51"],"ref":"refs/changes/32/6532/6","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1562589155,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562587382,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1562587382,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1562589169,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/cmd/zfs/zfs_main.c","type":"MODIFIED","insertions":95,"deletions":-22},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zfs_create/zfs_create_dryrun.ksh","type":"ADDED","insertions":169,"deletions":0}],"sizeInsertions":266,"sizeDeletions":-23}],"allReviewers":[{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Brian Behlendorf","email":"behlendorf1@llnl.gov","username":"behlendorf"},{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}]}