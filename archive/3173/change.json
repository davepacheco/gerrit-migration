{"project":"joyent/illumos-joyent","branch":"master","topic":"IKEV2","id":"Ibf45b3d69a17991985ba0a07da101c8f6a54d818","number":"3173","subject":"libperiodic","owner":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"url":"https://cr.joyent.us/3173","commitMessage":"libperiodic\n","createdOn":1515458955,"lastUpdated":1519855467,"open":true,"status":"NEW","comments":[{"timestamp":1515458955,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 1."},{"timestamp":1515458968,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Topic set to IKEV2"},{"timestamp":1515645472,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 1:\n\n(2 comments)\n\nTiny amount of comments now.  More tomorrow."},{"timestamp":1515721215,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 1:\n\nWould like to see big-theory and manpages here as well."},{"timestamp":1516947916,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(3 comments)\n\nI\u0027ll need to take a deeper look at this again. Jason, can you remind me what you changed here from the initial version?"},{"timestamp":1516949012,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 1:\n\n(1 comment)\n\nIIRC, for this one it was just the entries in manifest, and either the entry in usr/lib/Makefile, or possibly just the missing dependencies in usr/lib/Makefile-- I\u0027ll need to dig up the original webrev to confirm.  I don\u0027t recall any actual code changes in this one (there was a small bug in librefhash that I\u0027ll comment there on)."},{"timestamp":1519855463,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Uploaded patch set 2."}],"currentPatchSet":{"number":"2","revision":"bf45b3d69a17991985ba0a07da101c8f6a54d818","parents":["dcfabe727de41d525e4b2a94b88c62f519a259de"],"ref":"refs/changes/73/3173/2","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1519855463,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":4,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/Makefile","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/libperiodic/Makefile","type":"ADDED","insertions":42,"deletions":0},{"file":"usr/src/lib/libperiodic/Makefile.com","type":"ADDED","insertions":33,"deletions":0},{"file":"usr/src/lib/libperiodic/amd64/Makefile","type":"ADDED","insertions":19,"deletions":0},{"file":"usr/src/lib/libperiodic/common/libperiodic.c","type":"ADDED","insertions":391,"deletions":0},{"file":"usr/src/lib/libperiodic/common/libperiodic.h","type":"ADDED","insertions":53,"deletions":0},{"file":"usr/src/lib/libperiodic/common/llib-lperiodic","type":"ADDED","insertions":19,"deletions":0},{"file":"usr/src/lib/libperiodic/common/mapfile-vers","type":"ADDED","insertions":42,"deletions":0},{"file":"usr/src/lib/libperiodic/i386/Makefile","type":"ADDED","insertions":18,"deletions":0},{"file":"usr/src/lib/libperiodic/sparc/Makefile","type":"ADDED","insertions":18,"deletions":0},{"file":"usr/src/lib/libperiodic/sparcv9/Makefile","type":"ADDED","insertions":19,"deletions":0},{"file":"usr/src/test/os-tests/runfiles/default.run","type":"MODIFIED","insertions":10,"deletions":0},{"file":"usr/src/test/os-tests/tests/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/os-tests/tests/periodic/Makefile","type":"ADDED","insertions":67,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/absolute.c","type":"ADDED","insertions":101,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/badargs.c","type":"ADDED","insertions":156,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/cancel.c","type":"ADDED","insertions":101,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/interleave.c","type":"ADDED","insertions":142,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/interval.c","type":"ADDED","insertions":125,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/oneshot.c","type":"ADDED","insertions":96,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/periodic.c","type":"ADDED","insertions":117,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/reschedule.c","type":"ADDED","insertions":184,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/stress.c","type":"ADDED","insertions":199,"deletions":0}],"sizeInsertions":1962,"sizeDeletions":-1},"patchSets":[{"number":"1","revision":"af6245477ca39b4db5211b560cfc3f715670c03d","parents":["dcfabe727de41d525e4b2a94b88c62f519a259de"],"ref":"refs/changes/73/3173/1","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1515458955,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/lib/libperiodic/Makefile.com","line":23,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I\u0027m not sure if we should link to libumem or not given other issues that have been raised around dynamic linking here with calling malloc/free."},{"file":"usr/src/lib/libperiodic/Makefile.com","line":23,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Did we ever get an agreed upon way forward with dealing with libumem in libs (even if not implemented yet)?  We can go in and yank out the umem_*() calls, but it would be nice to keep the benefits of umem without having to depend on the consumer using libumem"},{"file":"usr/src/lib/libperiodic/common/libperiodic.c","line":37,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"So this is dependent on refhash landing first or concurrently, right?"},{"file":"usr/src/lib/libperiodic/common/libperiodic.c","line":37,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Yes."},{"file":"usr/src/lib/libperiodic/common/libperiodic.c","line":156,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"I see we already created libidspace.  (Note for when we upstream all of this.)"},{"file":"usr/src/lib/libperiodic/common/mapfile-vers","line":13,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Contributor needs to be filled in, oops."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":4,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/Makefile","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/libperiodic/Makefile","type":"ADDED","insertions":42,"deletions":0},{"file":"usr/src/lib/libperiodic/Makefile.com","type":"ADDED","insertions":33,"deletions":0},{"file":"usr/src/lib/libperiodic/amd64/Makefile","type":"ADDED","insertions":19,"deletions":0},{"file":"usr/src/lib/libperiodic/common/libperiodic.c","type":"ADDED","insertions":390,"deletions":0},{"file":"usr/src/lib/libperiodic/common/libperiodic.h","type":"ADDED","insertions":53,"deletions":0},{"file":"usr/src/lib/libperiodic/common/llib-lperiodic","type":"ADDED","insertions":19,"deletions":0},{"file":"usr/src/lib/libperiodic/common/mapfile-vers","type":"ADDED","insertions":42,"deletions":0},{"file":"usr/src/lib/libperiodic/i386/Makefile","type":"ADDED","insertions":18,"deletions":0},{"file":"usr/src/lib/libperiodic/sparc/Makefile","type":"ADDED","insertions":18,"deletions":0},{"file":"usr/src/lib/libperiodic/sparcv9/Makefile","type":"ADDED","insertions":19,"deletions":0},{"file":"usr/src/test/os-tests/runfiles/default.run","type":"MODIFIED","insertions":10,"deletions":0},{"file":"usr/src/test/os-tests/tests/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/os-tests/tests/periodic/Makefile","type":"ADDED","insertions":67,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/absolute.c","type":"ADDED","insertions":101,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/badargs.c","type":"ADDED","insertions":156,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/cancel.c","type":"ADDED","insertions":101,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/interleave.c","type":"ADDED","insertions":142,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/interval.c","type":"ADDED","insertions":125,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/oneshot.c","type":"ADDED","insertions":96,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/periodic.c","type":"ADDED","insertions":117,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/reschedule.c","type":"ADDED","insertions":184,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/stress.c","type":"ADDED","insertions":199,"deletions":0}],"sizeInsertions":1961,"sizeDeletions":-1},{"number":"2","revision":"bf45b3d69a17991985ba0a07da101c8f6a54d818","parents":["dcfabe727de41d525e4b2a94b88c62f519a259de"],"ref":"refs/changes/73/3173/2","uploader":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"createdOn":1519855463,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":4,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/lib/Makefile","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/lib/libperiodic/Makefile","type":"ADDED","insertions":42,"deletions":0},{"file":"usr/src/lib/libperiodic/Makefile.com","type":"ADDED","insertions":33,"deletions":0},{"file":"usr/src/lib/libperiodic/amd64/Makefile","type":"ADDED","insertions":19,"deletions":0},{"file":"usr/src/lib/libperiodic/common/libperiodic.c","type":"ADDED","insertions":391,"deletions":0},{"file":"usr/src/lib/libperiodic/common/libperiodic.h","type":"ADDED","insertions":53,"deletions":0},{"file":"usr/src/lib/libperiodic/common/llib-lperiodic","type":"ADDED","insertions":19,"deletions":0},{"file":"usr/src/lib/libperiodic/common/mapfile-vers","type":"ADDED","insertions":42,"deletions":0},{"file":"usr/src/lib/libperiodic/i386/Makefile","type":"ADDED","insertions":18,"deletions":0},{"file":"usr/src/lib/libperiodic/sparc/Makefile","type":"ADDED","insertions":18,"deletions":0},{"file":"usr/src/lib/libperiodic/sparcv9/Makefile","type":"ADDED","insertions":19,"deletions":0},{"file":"usr/src/test/os-tests/runfiles/default.run","type":"MODIFIED","insertions":10,"deletions":0},{"file":"usr/src/test/os-tests/tests/Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/os-tests/tests/periodic/Makefile","type":"ADDED","insertions":67,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/absolute.c","type":"ADDED","insertions":101,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/badargs.c","type":"ADDED","insertions":156,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/cancel.c","type":"ADDED","insertions":101,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/interleave.c","type":"ADDED","insertions":142,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/interval.c","type":"ADDED","insertions":125,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/oneshot.c","type":"ADDED","insertions":96,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/periodic.c","type":"ADDED","insertions":117,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/reschedule.c","type":"ADDED","insertions":184,"deletions":0},{"file":"usr/src/test/os-tests/tests/periodic/stress.c","type":"ADDED","insertions":199,"deletions":0}],"sizeInsertions":1962,"sizeDeletions":-1}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}]}