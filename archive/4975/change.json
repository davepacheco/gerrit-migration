{"project":"joyent/smartos-live","branch":"master","id":"Ic4c1261b61b700cd5da3652c993d9fe2ee95ff16","number":"4975","subject":"TRITON-841 Add “Admin IP” and “Admin_IP” to sysinfo output Reviewed by: Jorge Schrauwen \u003csjorge@blackdot.be\u003e Reviewed by: Cody Peter Mello \u003cmelloc@writev.io\u003e Approved by: Cody Peter Mello \u003cmelloc@writev.io\u003e","owner":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"url":"https://cr.joyent.us/4975","commitMessage":"TRITON-841 Add “Admin IP” and “Admin_IP” to sysinfo output\nReviewed by: Jorge Schrauwen \u003csjorge@blackdot.be\u003e\nReviewed by: Cody Peter Mello \u003cmelloc@writev.io\u003e\nApproved by: Cody Peter Mello \u003cmelloc@writev.io\u003e\n","createdOn":1539883156,"lastUpdated":1543353313,"open":false,"status":"MERGED","comments":[{"timestamp":1539883156,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 1."},{"timestamp":1539883201,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539884968,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1539896025,"reviewer":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"message":"Patch Set 1:\n\nDo we also want to add admin_ip6 ? I think it is only used in SmartOS though not in Triton/SDC."},{"timestamp":1539899345,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Patch Set 1:\n\nI don\u0027t think the NAPI nic object provides an \u0027ip\u0027 field or any family designation.  But you made me think of something else, so give me some time to check it out."},{"timestamp":1542210651,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 2."},{"timestamp":1542210698,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1542211255,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Patch Set 2:\n\nI adjusted this a bit so that `sysinfo -p | grep Admin_IP` on a headnode would also provide the admin IP address.\n\nRegarding IPv6.  I looked into this a bit, and think that we should look into making the net-boot-config.js script aware of IPv6 and acting accordingly.  IP family designation lives at the NAPI network level, so things like IPs and gateways could be IPv6 and the script should denote them accordingly (e.g. \u003cnet\u003e_gatewayv6).  TRITON-959"},{"timestamp":1542213707,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 3."},{"timestamp":1542213756,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1542745252,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 4."},{"timestamp":1542745304,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1542747460,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1542747618,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 5."},{"timestamp":1542747671,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1542789122,"reviewer":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1543198845,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1"},{"timestamp":1543353069,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1543353256,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 7: Patch Set 6 was rebased."},{"timestamp":1543353309,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7:\n\n\"make check\" passed ok"},{"timestamp":1543353313,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Rui"}],"currentPatchSet":{"number":"7","revision":"c4c1261b61b700cd5da3652c993d9fe2ee95ff16","parents":["42ee47eb957ff65d0ec90a1efefadf94c7e1eca4"],"ref":"refs/changes/75/4975/7","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1543353256,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1542747671,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1542789122,"by":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1543198845,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1543198845,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1543353313,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"src/sysinfo","type":"MODIFIED","insertions":16,"deletions":-1}],"sizeInsertions":16,"sizeDeletions":-1},"patchSets":[{"number":"1","revision":"33f15c2b03233e3baab16ac9ec2ef7444f22daef","parents":["6a1255390f2359e83cc7d46a0ebdbc73021cc0b8"],"ref":"refs/changes/75/4975/1","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1539883156,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539883201,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/node_modules/net-boot-config.js","type":"MODIFIED","insertions":9,"deletions":0},{"file":"src/sysinfo","type":"MODIFIED","insertions":9,"deletions":0}],"sizeInsertions":18,"sizeDeletions":0},{"number":"2","revision":"0c2eb83ad7cbff8f8c099dea238d6f0eb4d019a7","parents":["6a1255390f2359e83cc7d46a0ebdbc73021cc0b8"],"ref":"refs/changes/75/4975/2","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1542210651,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1542210698,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/node_modules/net-boot-config.js","type":"MODIFIED","insertions":8,"deletions":0},{"file":"src/sysinfo","type":"MODIFIED","insertions":10,"deletions":0}],"sizeInsertions":18,"sizeDeletions":0},{"number":"3","revision":"3dd3640e42f70c13f2ad5e831f6e902e7f3455d5","parents":["6a1255390f2359e83cc7d46a0ebdbc73021cc0b8"],"ref":"refs/changes/75/4975/3","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1542213707,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1542213756,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/node_modules/net-boot-config.js","type":"MODIFIED","insertions":8,"deletions":0},{"file":"src/sysinfo","type":"MODIFIED","insertions":9,"deletions":0}],"sizeInsertions":17,"sizeDeletions":0},{"number":"4","revision":"50bc58fee203207196bcf7974a5dfcf0cc6fa67d","parents":["6a1255390f2359e83cc7d46a0ebdbc73021cc0b8"],"ref":"refs/changes/75/4975/4","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1542745252,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1542747460,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1542745304,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/sysinfo","type":"MODIFIED","insertions":12,"deletions":-1}],"sizeInsertions":12,"sizeDeletions":-1},{"number":"5","revision":"ff4165440b15bd2f9df063af7b7b4c1d96af6263","parents":["6a1255390f2359e83cc7d46a0ebdbc73021cc0b8"],"ref":"refs/changes/75/4975/5","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1542747618,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1543198845,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1543198845,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1542747671,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1542789122,"by":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/sysinfo","type":"MODIFIED","insertions":16,"deletions":-1}],"sizeInsertions":16,"sizeDeletions":-1},{"number":"6","revision":"0c03db46c24b3292acf09f8a85a6e5887e69d180","parents":["6a1255390f2359e83cc7d46a0ebdbc73021cc0b8"],"ref":"refs/changes/75/4975/6","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1543353069,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1543198845,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1543198845,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1542747671,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1542789122,"by":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"src/sysinfo","type":"MODIFIED","insertions":16,"deletions":-1}],"sizeInsertions":16,"sizeDeletions":-1},{"number":"7","revision":"c4c1261b61b700cd5da3652c993d9fe2ee95ff16","parents":["42ee47eb957ff65d0ec90a1efefadf94c7e1eca4"],"ref":"refs/changes/75/4975/7","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1543353256,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1543198845,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1543198845,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1542747671,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1542789122,"by":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"}},{"type":"SUBM","value":"1","grantedOn":1543353313,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"src/sysinfo","type":"MODIFIED","insertions":16,"deletions":-1}],"sizeInsertions":16,"sizeDeletions":-1}],"allReviewers":[{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}]}