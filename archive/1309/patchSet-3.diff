From 855743dd7d47afe17f1b7eca99ff457919fdef70 Mon Sep 17 00:00:00 2001
From: Jerry Jelinek <jerry.jelinek@joyent.com>
Date: Fri, 20 Jan 2017 23:50:58 +0000
Subject: [PATCH] OS-5909 lint complains about naked set_errno calls Reviewed
 by: Patrick Mooney <patrick.mooney@joyent.com> Approved by: Patrick Mooney
 <patrick.mooney@joyent.com>

---
 usr/src/uts/common/brand/lx/syscall/lx_futex.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/usr/src/uts/common/brand/lx/syscall/lx_futex.c b/usr/src/uts/common/brand/lx/syscall/lx_futex.c
index 0f6390b014..ff65a38fb2 100644
--- a/usr/src/uts/common/brand/lx/syscall/lx_futex.c
+++ b/usr/src/uts/common/brand/lx/syscall/lx_futex.c
@@ -585,7 +585,7 @@ futex_wake_op(memid_t *memid, caddr_t addr2, memid_t *memid2,
 
 	/* LINTED: alignment */
 	if ((wake = futex_wake_op_execute((int32_t *)addr2, val3)) < 0) {
-		set_errno(-wake);	/* convert back to positive errno */
+		(void) set_errno(-wake); /* convert back to positive errno */
 		ret = -1;
 		goto out;
 	}
@@ -600,7 +600,7 @@ futex_wake_op(memid_t *memid, caddr_t addr2, memid_t *memid2,
 			 * A PI waiter. It is invalid to mix PI and non-PI
 			 * usage on the same futex.
 			 */
-			set_errno(EINVAL);
+			(void) set_errno(EINVAL);
 			ret = -1;
 			goto out;
 		}
@@ -626,7 +626,7 @@ futex_wake_op(memid_t *memid, caddr_t addr2, memid_t *memid2,
 			 * A PI waiter. It is invalid to mix PI and non-PI
 			 * usage on the same futex.
 			 */
-			set_errno(EINVAL);
+			(void) set_errno(EINVAL);
 			ret = -1;
 			goto out;
 		}
@@ -1381,7 +1381,7 @@ lx_futex(uintptr_t addr, int op, int val, uintptr_t lx_timeout,
 	case FUTEX_UNLOCK_PI:
 		rval = futex_unlock_pi(&memid, (uint32_t *)addr, 0);
 		if (rval != 0)
-			set_errno(rval);
+			(void) set_errno(rval);
 		break;
 	}
 
-- 
2.21.0

