{"project":"joyent/node-artedi","branch":"master","id":"I8997a59be12013a413b39f109342cd14008ee4c9","number":"5024","subject":"joyent/node-artedi#17 node-artedi histograms should be compatible with Prometheus TRITON-928 node-artedi histograms should be compatible with Prometheus Reviewed by: Kody A Kantor \u003ckody@kkantor.com\u003e Approved by: Kody A Kantor \u003ckody@kkantor.com\u003e","owner":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"url":"https://cr.joyent.us/5024","commitMessage":"joyent/node-artedi#17 node-artedi histograms should be compatible with Prometheus\nTRITON-928 node-artedi histograms should be compatible with Prometheus\nReviewed by: Kody A Kantor \u003ckody@kkantor.com\u003e\nApproved by: Kody A Kantor \u003ckody@kkantor.com\u003e\n","createdOn":1541188267,"lastUpdated":1542327493,"open":false,"status":"MERGED","comments":[{"timestamp":1541188267,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 1."},{"timestamp":1541188268,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit e6aa68b8538ebc19f7c169bd72d3f42b9e4cddd8\n    \n    fix histogram buckets to be compatible with Prometheus"},{"timestamp":1541188288,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1542038552,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 1: Code-Review+1\n\n(3 comments)\n\nLooks good! Just a couple comments that you don\u0027t have to address if you don\u0027t want to."},{"timestamp":1542089534,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 2."},{"timestamp":1542089535,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 8f64af8c088a6f7f454f54d343bd2c371d88a217\n    \n    address review feedback"},{"timestamp":1542089558,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 1:\n\n(3 comments)"},{"timestamp":1542089558,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n ./node_modules/.bin/json --validate -f package.json\n deps/jsstyle/jsstyle -f tools/jsstyle.conf lib/histogram.js lib/collector.js lib/common.js lib/metric_vector.js lib/utils.js lib/provider.js lib/metric.js lib/buckets.js lib/gauge.js lib/counter.js test/basic.test.js test/buckets.test.js\n ./node_modules/.bin/eslint -c tools/eslint.node.conf lib/histogram.js lib/collector.js lib/common.js lib/metric_vector.js lib/utils.js lib/provider.js lib/metric.js lib/buckets.js lib/gauge.js lib/counter.js test/basic.test.js test/buckets.test.js\n \n /tmp/repo/node_modules/eslint/node_modules/file-entry-cache/node_modules/flat-cache/node_modules/del/index.js:2\n const path \u003d require(\u0027path\u0027);\n ^^^^^\n Use of const in strict mode.\n SyntaxError: Use of const in strict mode.\n     at Module._compile (module.js:439:25)\n     at Object.Module._extensions..js (module.js:474:10)\n     at Module.load (module.js:356:32)\n     at Function.Module._load (module.js:312:12)\n     at Module.require (module.js:364:17)\n     at require (module.js:380:17)\n     at Object.\u003canonymous\u003e (/tmp/repo/node_modules/eslint/node_modules/file-entry-cache/node_modules/flat-cache/cache.js:3:11)\n     at Module._compile (module.js:456:26)\n     at Object.Module._extensions..js (module.js:474:10)\n     at Module.load (module.js:356:32)\n tools/mk/Makefile.targ:217: recipe for target \u0027check\u0027 failed\n gmake: *** [check] Error 1"},{"timestamp":1542126403,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 2: Code-Review+1\n\nGreat! Do you know why the make check bot failed here?"},{"timestamp":1542132027,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 2:\n\nThe make check bot failure looks like the standard failure of using an old version of node. I hit that all the time. What I don\u0027t understand is why the previous make check *passed*."},{"timestamp":1542134003,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 2:\n\nSee TOOLS-2075 for a report of this same make check bot bug."},{"timestamp":1542232877,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 2: Integration-Approval+1\n\nCool. Thanks for finding, fixing, and testing this so thoroughly. I can\u0027t think of anything else that we should test before integration.\n\nDo you think you could mark the TRITON-928 ticket \u0027public\u0027?"},{"timestamp":1542327003,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1542327169,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 4: Commit message was updated."},{"timestamp":1542327493,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Josh Wilsdon"}],"currentPatchSet":{"number":"4","revision":"54b21b7631fbd6ea3f0ce48490f00c649596022e","parents":["bfe2e281be076a1bb86cd4a8d1296a9cf87d2f2e"],"ref":"refs/changes/24/5024/4","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1542327169,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1542089558,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1542126403,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1542232877,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"SUBM","value":"1","grantedOn":1542327493,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":10,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":21,"deletions":-14},{"file":"docs/API.md","type":"MODIFIED","insertions":65,"deletions":-10},{"file":"docs/DESIGN.md","type":"MODIFIED","insertions":0,"deletions":-105},{"file":"docs/migrating.md","type":"ADDED","insertions":171,"deletions":0},{"file":"docs/private_api.md","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"examples/artedi_v1_buckets.js","type":"ADDED","insertions":103,"deletions":0},{"file":"lib/buckets.js","type":"ADDED","insertions":127,"deletions":0},{"file":"lib/collector.js","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"lib/histogram.js","type":"MODIFIED","insertions":42,"deletions":-132},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/basic.test.js","type":"MODIFIED","insertions":93,"deletions":-37},{"file":"test/buckets.test.js","type":"ADDED","insertions":169,"deletions":0}],"sizeInsertions":817,"sizeDeletions":-303},"patchSets":[{"number":"1","revision":"36667832d64f9b30e0b53da63d2cdcf4d55f317c","parents":["bfe2e281be076a1bb86cd4a8d1296a9cf87d2f2e"],"ref":"refs/changes/24/5024/1","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1541188267,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1541188288,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1542038552,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"comments":[{"file":"docs/API.md","line":289,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"To be consistent with the other uses of arguments in these docs you could surround this in a ` ` block if you were so inclined. There are a couple more spots you could do this in this block too."},{"file":"docs/API.md","line":289,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Done"},{"file":"lib/buckets.js","line":75,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Extra dot here"},{"file":"lib/buckets.js","line":75,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Done"},{"file":"test/buckets.test.js","line":8,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Nice, I like how you wrote these tests."},{"file":"test/buckets.test.js","line":8,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Thanks!"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":10,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":21,"deletions":-14},{"file":"docs/API.md","type":"MODIFIED","insertions":65,"deletions":-10},{"file":"docs/DESIGN.md","type":"MODIFIED","insertions":0,"deletions":-105},{"file":"docs/migrating.md","type":"ADDED","insertions":171,"deletions":0},{"file":"docs/private_api.md","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"examples/artedi_v1_buckets.js","type":"ADDED","insertions":103,"deletions":0},{"file":"lib/buckets.js","type":"ADDED","insertions":127,"deletions":0},{"file":"lib/collector.js","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"lib/histogram.js","type":"MODIFIED","insertions":42,"deletions":-132},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/basic.test.js","type":"MODIFIED","insertions":93,"deletions":-37},{"file":"test/buckets.test.js","type":"ADDED","insertions":169,"deletions":0}],"sizeInsertions":817,"sizeDeletions":-303},{"number":"2","revision":"07148b783e5f22e4cd543953539c0ce2c33d12fc","parents":["bfe2e281be076a1bb86cd4a8d1296a9cf87d2f2e"],"ref":"refs/changes/24/5024/2","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1542089534,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1542089558,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1542126403,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1542232877,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":10,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":21,"deletions":-14},{"file":"docs/API.md","type":"MODIFIED","insertions":65,"deletions":-10},{"file":"docs/DESIGN.md","type":"MODIFIED","insertions":0,"deletions":-105},{"file":"docs/migrating.md","type":"ADDED","insertions":171,"deletions":0},{"file":"docs/private_api.md","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"examples/artedi_v1_buckets.js","type":"ADDED","insertions":103,"deletions":0},{"file":"lib/buckets.js","type":"ADDED","insertions":127,"deletions":0},{"file":"lib/collector.js","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"lib/histogram.js","type":"MODIFIED","insertions":42,"deletions":-132},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/basic.test.js","type":"MODIFIED","insertions":93,"deletions":-37},{"file":"test/buckets.test.js","type":"ADDED","insertions":169,"deletions":0}],"sizeInsertions":817,"sizeDeletions":-303},{"number":"3","revision":"8997a59be12013a413b39f109342cd14008ee4c9","parents":["bfe2e281be076a1bb86cd4a8d1296a9cf87d2f2e"],"ref":"refs/changes/24/5024/3","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1542327003,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1542089558,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1542126403,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1542232877,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":10,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":21,"deletions":-14},{"file":"docs/API.md","type":"MODIFIED","insertions":65,"deletions":-10},{"file":"docs/DESIGN.md","type":"MODIFIED","insertions":0,"deletions":-105},{"file":"docs/migrating.md","type":"ADDED","insertions":171,"deletions":0},{"file":"docs/private_api.md","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"examples/artedi_v1_buckets.js","type":"ADDED","insertions":103,"deletions":0},{"file":"lib/buckets.js","type":"ADDED","insertions":127,"deletions":0},{"file":"lib/collector.js","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"lib/histogram.js","type":"MODIFIED","insertions":42,"deletions":-132},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/basic.test.js","type":"MODIFIED","insertions":93,"deletions":-37},{"file":"test/buckets.test.js","type":"ADDED","insertions":169,"deletions":0}],"sizeInsertions":817,"sizeDeletions":-303},{"number":"4","revision":"54b21b7631fbd6ea3f0ce48490f00c649596022e","parents":["bfe2e281be076a1bb86cd4a8d1296a9cf87d2f2e"],"ref":"refs/changes/24/5024/4","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1542327169,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1542089558,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1542327493,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1542126403,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1542232877,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":10,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":21,"deletions":-14},{"file":"docs/API.md","type":"MODIFIED","insertions":65,"deletions":-10},{"file":"docs/DESIGN.md","type":"MODIFIED","insertions":0,"deletions":-105},{"file":"docs/migrating.md","type":"ADDED","insertions":171,"deletions":0},{"file":"docs/private_api.md","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"examples/artedi_v1_buckets.js","type":"ADDED","insertions":103,"deletions":0},{"file":"lib/buckets.js","type":"ADDED","insertions":127,"deletions":0},{"file":"lib/collector.js","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"lib/histogram.js","type":"MODIFIED","insertions":42,"deletions":-132},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/basic.test.js","type":"MODIFIED","insertions":93,"deletions":-37},{"file":"test/buckets.test.js","type":"ADDED","insertions":169,"deletions":0}],"sizeInsertions":817,"sizeDeletions":-303}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}]}