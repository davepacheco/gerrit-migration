{"project":"joyent/sdcadm","branch":"master","id":"I880176503514196257d82013e1a7aacc4274ebb8","number":"3945","subject":"TOOLS-1717 sdcadm should not load SDC Application from SAPI when not required Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/3945","commitMessage":"TOOLS-1717 sdcadm should not load SDC Application from SAPI when not required\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1526288020,"lastUpdated":1527539515,"open":false,"status":"MERGED","comments":[{"timestamp":1526288020,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1526288025,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit e09e4e89570d27680c33e97b23c6b4189fb8029f\n    \n    TOOLS-1717 sdcadm should not load SDC Application from SAPI when not required"},{"timestamp":1526288059,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1526288269,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\nTrent, this is the result of applying pending https://cr.joyent.us/#/c/1626/ to current master. Related also to our little pending https://cr.joyent.us/#/c/3899/ and to https://cr.joyent.us/#/c/1552/."},{"timestamp":1526334328,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\n(7 comments)\n\nMostly looks good. I haven\u0027t run the code in my COAL to play with it yet."},{"timestamp":1526463099,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2."},{"timestamp":1526463104,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit e7ea4cafe9b3c2588c0e4b05f7fcd939e857249b\n    \n    TOOLS-1717 sdcadm should not load SDC Application from SAPI when not required"},{"timestamp":1526463135,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1526463174,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\n(7 comments)\n\nDone with all your suggestions, including removing opts.quiet completely and replaced with a VError instance wrapping the error message thrown. I\u0027m opening an additional issue related to sdcadm process not exiting when binder is down."},{"timestamp":1526485553,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 3."},{"timestamp":1526485559,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit a93ba869225f764492849d8ce067564c9d5dcc2e\n    \n    TOOLS-1717 sdcadm should not load SDC Application from SAPI when not required\n    \n    commit 116b1e545c2af44ecac21155a5101f03fdd73fdb\n    \n    TRITON-348 sdcadm should use eslint\n    Reviewed by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e\n    Approved by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e"},{"timestamp":1526485589,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1526485598,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\nAlso rebased to the new Eslint stuff. I\u0027m gonna re-run all the tests once more, just in case."},{"timestamp":1526485858,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1526485864,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit a93ba869225f764492849d8ce067564c9d5dcc2e\n    \n    TOOLS-1717 sdcadm should not load SDC Application from SAPI when not required"},{"timestamp":1526550162,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 5: Patch Set 4 was rebased."},{"timestamp":1526550167,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit a7d60fd4b682cf8e64a9aacdacd4194caa9f17b0\n    \n    TOOLS-1717 sdcadm should not load SDC Application from SAPI when not required"},{"timestamp":1526550199,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5:\n\n\"make check\" passed ok"},{"timestamp":1526640706,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 6: Patch Set 5 was rebased."},{"timestamp":1526640712,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit 521ec8260b08d9fae41396c96210c02e2118adee\n    \n    TOOLS-1717 sdcadm should not load SDC Application from SAPI when not required"},{"timestamp":1526640744,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6:\n\n\"make check\" passed ok"},{"timestamp":1526663248,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 7: Patch Set 6 was rebased."},{"timestamp":1526663254,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 7:\n\nNew commits:\n    \n    commit 277668f75f1a27fcec17ba5676cd7749b01bb4b0\n    \n    TOOLS-1717 sdcadm should not load SDC Application from SAPI when not required"},{"timestamp":1526663283,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7:\n\n\"make check\" passed ok"},{"timestamp":1526828405,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 8."},{"timestamp":1526828410,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 8:\n\nNew commits:\n    \n    commit e01c5a5787557fafc536d12bd27382b77da40d7d\n    \n    TOOLS-1717 sdcadm should not load SDC Application from SAPI when not required"},{"timestamp":1526828440,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1526985983,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 9: Patch Set 8 was rebased."},{"timestamp":1526985989,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 9:\n\nNew commits:\n    \n    commit fe4145f47c18cb210f1bdf97545e209130b58577\n    \n    TOOLS-1717 sdcadm should not load SDC Application from SAPI when not required"},{"timestamp":1526986018,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9:\n\n\"make check\" passed ok"},{"timestamp":1527179951,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 10: Patch Set 9 was rebased."},{"timestamp":1527179957,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 10:\n\nNew commits:\n    \n    commit 06fa2244a08331ddf0187b4a79be4fb25fa23042\n    \n    TOOLS-1717 sdcadm should not load SDC Application from SAPI when not required"},{"timestamp":1527179987,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10:\n\n\"make check\" passed ok"},{"timestamp":1527508692,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 11: Patch Set 10 was rebased."},{"timestamp":1527508698,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 11:\n\nNew commits:\n    \n    commit 77cd592ad96484810f6073314695b6f9be6302e9\n    \n    TOOLS-1717 sdcadm should not load SDC Application from SAPI when not required"},{"timestamp":1527508730,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11:\n\n\"make check\" passed ok"},{"timestamp":1527530974,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 11:\n\n(1 comment)\n\nA few new hits from rebases to convert:\n\n```\n$ rg \u0027sdcadm\\.sdc\\b\u0027 lib\nlib/steps/zookeeper.js\n119:    var app \u003d sdcadm.sdc;\n415:    var app \u003d opts.sdcadm.sdc;\n573:    var app \u003d opts.sdcadm.sdc;\n\nlib/cli/do_check_config.js\n45:    var sdc \u003d self.sdcadm.sdc.metadata;\n```"},{"timestamp":1527532079,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 12."},{"timestamp":1527532085,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 12:\n\nNew commits:\n    \n    commit f6c619cc30b18145e67cd5ea88d7c88c4a61ef77\n    \n    TOOLS-1717 sdcadm should not load SDC Application from SAPI when not required"},{"timestamp":1527532123,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 12: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1527532521,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 12: Code-Review+1 Integration-Approval+1\n\nAssuming your test run passes, LGTM."},{"timestamp":1527539499,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 13: Commit message was updated."},{"timestamp":1527539515,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"13","revision":"880176503514196257d82013e1a7aacc4274ebb8","parents":["5344723d24831914c0b6a79d66fab57399b03adf"],"ref":"refs/changes/45/3945/13","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1527539499,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527532123,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1527532521,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1527532521,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1527539515,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/channel.js","type":"MODIFIED","insertions":121,"deletions":-91},{"file":"lib/cli/do_avail.js","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"lib/cli/do_check_config.js","type":"MODIFIED","insertions":29,"deletions":-22},{"file":"lib/cli/do_nfs_volumes.js","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"lib/cli/do_self_update.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":26,"deletions":-18},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":12,"deletions":-9},{"file":"lib/default-fabric.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/platform.js","type":"MODIFIED","insertions":53,"deletions":-37},{"file":"lib/post-setup/cmon.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/post-setup/cns.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/post-setup/dev-sample-data.js","type":"MODIFIED","insertions":12,"deletions":-5},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/fabrics.js","type":"MODIFIED","insertions":106,"deletions":-74},{"file":"lib/post-setup/ha-binder.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/post-setup/underlay-nics.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/post-setup/volapi.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":142,"deletions":-75},{"file":"lib/steps/binder.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/steps/no-rabbit.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/steps/zookeeper.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"test/platform.test.js","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":636,"sizeDeletions":-399},"patchSets":[{"number":"1","revision":"e4acdadc066739841098813fa186dff8070f973f","parents":["f2bf9bb71062b09fcbf05034c1ef768358696cbc"],"ref":"refs/changes/45/3945/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1526288020,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1526288059,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/cli/do_update_gz_tools.js","line":8,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Could update copyright years in these and other files. I\u0027m not going to -1 for that tho. :)"},{"file":"lib/cli/do_update_gz_tools.js","line":8,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"I\u0027m expecting to merge this one after TRITON-348, which pretty much updates every copyright notice so I\u0027d rather wait before I enter another source of conflict. I\u0027ll update once it\u0027s merged if necessary"},{"file":"lib/post-setup/ha-manatee.js","line":133,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"There is just one usage of `app.FOO` below. Perhaps drop the `app` var and use `self.sdcadm.sdcApp` instead?"},{"file":"lib/post-setup/ha-manatee.js","line":133,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/sdcadm.js","line":413,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I wonder if we could avoid the arg.quiet option and direct printing to console.log here by instead just wrapping the error with a VError and provides the extra friendly message."},{"file":"lib/sdcadm.js","line":413,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Good idea. Let\u0027s go try that."},{"file":"lib/sdcadm.js","line":1148,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"`this.sdc` needs to be updated here."},{"file":"lib/sdcadm.js","line":1148,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/sdcadm.js","line":3648,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Does `selfUpdate` need `self.sdcApp`? I don\u0027t see it in *this* function, but perhaps a called func expects it."},{"file":"lib/sdcadm.js","line":3648,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"You\u0027re right. get default channel below needs it, but it\u0027s taking care of loading it if needed so, removed here."},{"file":"lib/sdcadm.js","line":4745,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I don\u0027t see where `ensureSdcApp` is being called for this `checkConfig` call."},{"file":"lib/sdcadm.js","line":4745,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"self.getServices does that call."},{"file":"lib/sdcadm.js","line":5179,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Perhaps:\n```\nself.ensureSdcApp({quiet: opts.json}, next)\n```\n?"},{"file":"lib/sdcadm.js","line":5179,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Indeed"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/channel.js","type":"MODIFIED","insertions":123,"deletions":-87},{"file":"lib/cli/do_avail.js","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"lib/cli/do_nfs_volumes.js","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"lib/cli/do_self_update.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":19,"deletions":-12},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":11,"deletions":-8},{"file":"lib/default-fabric.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/platform.js","type":"MODIFIED","insertions":54,"deletions":-34},{"file":"lib/post-setup/cmon.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/post-setup/cns.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/post-setup/dev-sample-data.js","type":"MODIFIED","insertions":12,"deletions":-5},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/fabrics.js","type":"MODIFIED","insertions":102,"deletions":-70},{"file":"lib/post-setup/ha-binder.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/post-setup/underlay-nics.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/post-setup/volapi.js","type":"MODIFIED","insertions":23,"deletions":-12},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":211,"deletions":-128},{"file":"lib/steps/binder.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/steps/no-rabbit.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/platform.test.js","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":661,"sizeDeletions":-405},{"number":"2","revision":"1311ab3bb75501724c5630b07a4f967efd6fd770","parents":["f2bf9bb71062b09fcbf05034c1ef768358696cbc"],"ref":"refs/changes/45/3945/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1526463099,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1526463135,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/channel.js","type":"MODIFIED","insertions":123,"deletions":-87},{"file":"lib/cli/do_avail.js","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"lib/cli/do_nfs_volumes.js","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"lib/cli/do_self_update.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":19,"deletions":-12},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":11,"deletions":-8},{"file":"lib/default-fabric.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/platform.js","type":"MODIFIED","insertions":54,"deletions":-34},{"file":"lib/post-setup/cmon.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/post-setup/cns.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/post-setup/dev-sample-data.js","type":"MODIFIED","insertions":12,"deletions":-5},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/fabrics.js","type":"MODIFIED","insertions":102,"deletions":-70},{"file":"lib/post-setup/ha-binder.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/post-setup/underlay-nics.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/post-setup/volapi.js","type":"MODIFIED","insertions":23,"deletions":-12},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":199,"deletions":-130},{"file":"lib/steps/binder.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/steps/no-rabbit.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/platform.test.js","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":648,"sizeDeletions":-408},{"number":"3","revision":"daa3ca96727dba2337740d2944ee7bda263a3e0b","parents":["f2bf9bb71062b09fcbf05034c1ef768358696cbc"],"ref":"refs/changes/45/3945/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1526485553,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1526485589,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".eslintrc","type":"ADDED","insertions":45,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"lib/channel.js","type":"MODIFIED","insertions":130,"deletions":-96},{"file":"lib/cli/do_add_new_agent_svcs.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"lib/cli/do_avail.js","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"lib/cli/do_check_config.js","type":"MODIFIED","insertions":335,"deletions":-3},{"file":"lib/cli/do_check_health.js","type":"MODIFIED","insertions":26,"deletions":-17},{"file":"lib/cli/do_completion.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/cli/do_history.js","type":"MODIFIED","insertions":22,"deletions":-14},{"file":"lib/cli/do_install_docker_cert.js","type":"MODIFIED","insertions":15,"deletions":-9},{"file":"lib/cli/do_instances.js","type":"MODIFIED","insertions":7,"deletions":-4},{"file":"lib/cli/do_nfs_volumes.js","type":"MODIFIED","insertions":16,"deletions":-16},{"file":"lib/cli/do_rollback.js","type":"MODIFIED","insertions":24,"deletions":-13},{"file":"lib/cli/do_self_update.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/cli/do_services.js","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"lib/cli/do_update.js","type":"MODIFIED","insertions":32,"deletions":-17},{"file":"lib/cli/do_update_agents.js","type":"MODIFIED","insertions":53,"deletions":-35},{"file":"lib/cli/do_update_docker.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":856,"deletions":-13},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":112,"deletions":-78},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/cli/index.js","type":"MODIFIED","insertions":23,"deletions":-18},{"file":"lib/common.js","type":"MODIFIED","insertions":66,"deletions":-45},{"file":"lib/dc-maint.js","type":"MODIFIED","insertions":21,"deletions":-19},{"file":"lib/default-fabric.js","type":"MODIFIED","insertions":25,"deletions":-13},{"file":"lib/history.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/locker.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/logging.js","type":"MODIFIED","insertions":11,"deletions":-7},{"file":"lib/platform.js","type":"MODIFIED","insertions":314,"deletions":-224},{"file":"lib/post-setup/cmon.js","type":"MODIFIED","insertions":27,"deletions":-19},{"file":"lib/post-setup/cns.js","type":"MODIFIED","insertions":29,"deletions":-19},{"file":"lib/post-setup/common-external-nics.js","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"lib/post-setup/dev-headnode-prov.js","type":"MODIFIED","insertions":20,"deletions":-15},{"file":"lib/post-setup/dev-sample-data.js","type":"MODIFIED","insertions":25,"deletions":-16},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":50,"deletions":-27},{"file":"lib/post-setup/fabrics.js","type":"MODIFIED","insertions":184,"deletions":-116},{"file":"lib/post-setup/ha-binder.js","type":"MODIFIED","insertions":6,"deletions":-8},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":106,"deletions":-91},{"file":"lib/post-setup/index.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/post-setup/underlay-nics.js","type":"MODIFIED","insertions":40,"deletions":-30},{"file":"lib/post-setup/volapi.js","type":"MODIFIED","insertions":43,"deletions":-26},{"file":"lib/procedures/download-images.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/procedures/procedure.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"lib/procedures/shared.js","type":"MODIFIED","insertions":99,"deletions":-61},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":30,"deletions":-22},{"file":"lib/procedures/update-manatee-v2.js","type":"MODIFIED","insertions":171,"deletions":-157},{"file":"lib/procedures/update-single-headnode-imgapi.js","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":469,"deletions":-1386},{"file":"lib/steps/binder.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/steps/no-rabbit.js","type":"MODIFIED","insertions":19,"deletions":-13},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/steps/servers.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/steps/update_vm_size.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/ur.js","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/check-health.test.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"test/common.js","type":"MODIFIED","insertions":12,"deletions":-7},{"file":"test/experimental.test.js","type":"MODIFIED","insertions":0,"deletions":-18},{"file":"test/platform.test.js","type":"MODIFIED","insertions":7,"deletions":0},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":3,"deletions":-4},{"file":"test/services.test.js","type":"MODIFIED","insertions":15,"deletions":-8},{"file":"tools/mk/Makefile.deps","type":"MODIFIED","insertions":35,"deletions":-1},{"file":"tools/mk/Makefile.targ","type":"MODIFIED","insertions":32,"deletions":-4}],"sizeInsertions":3673,"sizeDeletions":-2767},{"number":"4","revision":"73b9e0015c7ee7db2b9c6c7cde2bbd1bd9940da2","parents":["116b1e545c2af44ecac21155a5101f03fdd73fdb"],"ref":"refs/changes/45/3945/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1526485858,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1526485589,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/channel.js","type":"MODIFIED","insertions":121,"deletions":-91},{"file":"lib/cli/do_avail.js","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"lib/cli/do_nfs_volumes.js","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"lib/cli/do_self_update.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":26,"deletions":-18},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":12,"deletions":-9},{"file":"lib/default-fabric.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/platform.js","type":"MODIFIED","insertions":53,"deletions":-37},{"file":"lib/post-setup/cmon.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/post-setup/cns.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/post-setup/dev-sample-data.js","type":"MODIFIED","insertions":12,"deletions":-5},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/fabrics.js","type":"MODIFIED","insertions":106,"deletions":-74},{"file":"lib/post-setup/ha-binder.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/post-setup/underlay-nics.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/post-setup/volapi.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":142,"deletions":-75},{"file":"lib/steps/binder.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/steps/no-rabbit.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/platform.test.js","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":599,"sizeDeletions":-371},{"number":"5","revision":"56545abebc3fdc862197833a1dbfdb986ce76c1e","parents":["3db0cb4107a7c609e3614bd448fec321916fafa7"],"ref":"refs/changes/45/3945/5","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1526550162,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1526485589,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/channel.js","type":"MODIFIED","insertions":121,"deletions":-91},{"file":"lib/cli/do_avail.js","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"lib/cli/do_nfs_volumes.js","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"lib/cli/do_self_update.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":26,"deletions":-18},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":12,"deletions":-9},{"file":"lib/default-fabric.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/platform.js","type":"MODIFIED","insertions":53,"deletions":-37},{"file":"lib/post-setup/cmon.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/post-setup/cns.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/post-setup/dev-sample-data.js","type":"MODIFIED","insertions":12,"deletions":-5},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/fabrics.js","type":"MODIFIED","insertions":106,"deletions":-74},{"file":"lib/post-setup/ha-binder.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/post-setup/underlay-nics.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/post-setup/volapi.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":142,"deletions":-75},{"file":"lib/steps/binder.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/steps/no-rabbit.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/platform.test.js","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":599,"sizeDeletions":-371},{"number":"6","revision":"466893a8ef2f83f0f654d3805ef5d9dd3b1e2d55","parents":["a968cbeede4bff9f4c2b3f3603d029f2db13b929"],"ref":"refs/changes/45/3945/6","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1526640706,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1526485589,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/channel.js","type":"MODIFIED","insertions":121,"deletions":-91},{"file":"lib/cli/do_avail.js","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"lib/cli/do_nfs_volumes.js","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"lib/cli/do_self_update.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":26,"deletions":-18},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":12,"deletions":-9},{"file":"lib/default-fabric.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/platform.js","type":"MODIFIED","insertions":53,"deletions":-37},{"file":"lib/post-setup/cmon.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/post-setup/cns.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/post-setup/dev-sample-data.js","type":"MODIFIED","insertions":12,"deletions":-5},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/fabrics.js","type":"MODIFIED","insertions":106,"deletions":-74},{"file":"lib/post-setup/ha-binder.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/post-setup/underlay-nics.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/post-setup/volapi.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":142,"deletions":-75},{"file":"lib/steps/binder.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/steps/no-rabbit.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/platform.test.js","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":599,"sizeDeletions":-371},{"number":"7","revision":"878b9c62311c09510007937ae41ad52350a27f24","parents":["65db9afe341b272c1aa7098502cccfecbaa10cd6"],"ref":"refs/changes/45/3945/7","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1526663248,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1526485589,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/channel.js","type":"MODIFIED","insertions":121,"deletions":-91},{"file":"lib/cli/do_avail.js","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"lib/cli/do_nfs_volumes.js","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"lib/cli/do_self_update.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":26,"deletions":-18},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":12,"deletions":-9},{"file":"lib/default-fabric.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/platform.js","type":"MODIFIED","insertions":53,"deletions":-37},{"file":"lib/post-setup/cmon.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/post-setup/cns.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/post-setup/dev-sample-data.js","type":"MODIFIED","insertions":12,"deletions":-5},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/fabrics.js","type":"MODIFIED","insertions":106,"deletions":-74},{"file":"lib/post-setup/ha-binder.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/post-setup/underlay-nics.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/post-setup/volapi.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":142,"deletions":-75},{"file":"lib/steps/binder.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/steps/no-rabbit.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/platform.test.js","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":599,"sizeDeletions":-371},{"number":"8","revision":"243052505a88402463e299e1452adde0fcc87a2a","parents":["3a87f3d6270cd478d9bd492c6ba698992d4f8ff9"],"ref":"refs/changes/45/3945/8","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1526828405,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1526828440,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/channel.js","type":"MODIFIED","insertions":121,"deletions":-91},{"file":"lib/cli/do_avail.js","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"lib/cli/do_nfs_volumes.js","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"lib/cli/do_self_update.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":26,"deletions":-18},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":12,"deletions":-9},{"file":"lib/default-fabric.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/platform.js","type":"MODIFIED","insertions":53,"deletions":-37},{"file":"lib/post-setup/cmon.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/post-setup/cns.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/post-setup/dev-sample-data.js","type":"MODIFIED","insertions":12,"deletions":-5},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/fabrics.js","type":"MODIFIED","insertions":106,"deletions":-74},{"file":"lib/post-setup/ha-binder.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/post-setup/underlay-nics.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/post-setup/volapi.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":142,"deletions":-75},{"file":"lib/steps/binder.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/steps/no-rabbit.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/platform.test.js","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":601,"sizeDeletions":-374},{"number":"9","revision":"28b13b41eb9bd1443b17ef8fc36ffd65275f23b3","parents":["b718594e7acfaa9a18c5486bf3306d603fc89585"],"ref":"refs/changes/45/3945/9","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1526985983,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1526828440,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/channel.js","type":"MODIFIED","insertions":121,"deletions":-91},{"file":"lib/cli/do_avail.js","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"lib/cli/do_nfs_volumes.js","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"lib/cli/do_self_update.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":26,"deletions":-18},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":12,"deletions":-9},{"file":"lib/default-fabric.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/platform.js","type":"MODIFIED","insertions":53,"deletions":-37},{"file":"lib/post-setup/cmon.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/post-setup/cns.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/post-setup/dev-sample-data.js","type":"MODIFIED","insertions":12,"deletions":-5},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/fabrics.js","type":"MODIFIED","insertions":106,"deletions":-74},{"file":"lib/post-setup/ha-binder.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/post-setup/underlay-nics.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/post-setup/volapi.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":142,"deletions":-75},{"file":"lib/steps/binder.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/steps/no-rabbit.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/platform.test.js","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":601,"sizeDeletions":-374},{"number":"10","revision":"495b171c1d678f925c58d52b3ac7524648c9aee1","parents":["8e04a29a57bcc8d8226bf3b887a06a75021a6bff"],"ref":"refs/changes/45/3945/10","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1527179951,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1526828440,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/channel.js","type":"MODIFIED","insertions":121,"deletions":-91},{"file":"lib/cli/do_avail.js","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"lib/cli/do_nfs_volumes.js","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"lib/cli/do_self_update.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":26,"deletions":-18},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":12,"deletions":-9},{"file":"lib/default-fabric.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/platform.js","type":"MODIFIED","insertions":53,"deletions":-37},{"file":"lib/post-setup/cmon.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/post-setup/cns.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/post-setup/dev-sample-data.js","type":"MODIFIED","insertions":12,"deletions":-5},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/fabrics.js","type":"MODIFIED","insertions":106,"deletions":-74},{"file":"lib/post-setup/ha-binder.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/post-setup/underlay-nics.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/post-setup/volapi.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":142,"deletions":-75},{"file":"lib/steps/binder.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/steps/no-rabbit.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/platform.test.js","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":601,"sizeDeletions":-374},{"number":"11","revision":"5815e068e1e3b5fb5ed4953dce19220cc415229f","parents":["5344723d24831914c0b6a79d66fab57399b03adf"],"ref":"refs/changes/45/3945/11","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1527508692,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1526828440,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/platform.test.js","line":272,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"This hunk for TRITON-417 ?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/channel.js","type":"MODIFIED","insertions":121,"deletions":-91},{"file":"lib/cli/do_avail.js","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"lib/cli/do_nfs_volumes.js","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"lib/cli/do_self_update.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":26,"deletions":-18},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":12,"deletions":-9},{"file":"lib/default-fabric.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/platform.js","type":"MODIFIED","insertions":53,"deletions":-37},{"file":"lib/post-setup/cmon.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/post-setup/cns.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/post-setup/dev-sample-data.js","type":"MODIFIED","insertions":12,"deletions":-5},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/fabrics.js","type":"MODIFIED","insertions":106,"deletions":-74},{"file":"lib/post-setup/ha-binder.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/post-setup/underlay-nics.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/post-setup/volapi.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":142,"deletions":-75},{"file":"lib/steps/binder.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/steps/no-rabbit.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"test/platform.test.js","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":601,"sizeDeletions":-374},{"number":"12","revision":"a1379abf2f63daa30b139b4fad1e29d690372b17","parents":["5344723d24831914c0b6a79d66fab57399b03adf"],"ref":"refs/changes/45/3945/12","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1527532079,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527532123,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1527532521,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1527532521,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/channel.js","type":"MODIFIED","insertions":121,"deletions":-91},{"file":"lib/cli/do_avail.js","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"lib/cli/do_check_config.js","type":"MODIFIED","insertions":29,"deletions":-22},{"file":"lib/cli/do_nfs_volumes.js","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"lib/cli/do_self_update.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":26,"deletions":-18},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":12,"deletions":-9},{"file":"lib/default-fabric.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/platform.js","type":"MODIFIED","insertions":53,"deletions":-37},{"file":"lib/post-setup/cmon.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/post-setup/cns.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/post-setup/dev-sample-data.js","type":"MODIFIED","insertions":12,"deletions":-5},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/fabrics.js","type":"MODIFIED","insertions":106,"deletions":-74},{"file":"lib/post-setup/ha-binder.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/post-setup/underlay-nics.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/post-setup/volapi.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":142,"deletions":-75},{"file":"lib/steps/binder.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/steps/no-rabbit.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/steps/zookeeper.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"test/platform.test.js","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":636,"sizeDeletions":-399},{"number":"13","revision":"880176503514196257d82013e1a7aacc4274ebb8","parents":["5344723d24831914c0b6a79d66fab57399b03adf"],"ref":"refs/changes/45/3945/13","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1527539499,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1527532123,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1527532521,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1527532521,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1527539515,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/channel.js","type":"MODIFIED","insertions":121,"deletions":-91},{"file":"lib/cli/do_avail.js","type":"MODIFIED","insertions":10,"deletions":-5},{"file":"lib/cli/do_check_config.js","type":"MODIFIED","insertions":29,"deletions":-22},{"file":"lib/cli/do_nfs_volumes.js","type":"MODIFIED","insertions":9,"deletions":-5},{"file":"lib/cli/do_self_update.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/cli/do_update_gz_tools.js","type":"MODIFIED","insertions":26,"deletions":-18},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":12,"deletions":-9},{"file":"lib/default-fabric.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/platform.js","type":"MODIFIED","insertions":53,"deletions":-37},{"file":"lib/post-setup/cmon.js","type":"MODIFIED","insertions":9,"deletions":-7},{"file":"lib/post-setup/cns.js","type":"MODIFIED","insertions":7,"deletions":-5},{"file":"lib/post-setup/dev-sample-data.js","type":"MODIFIED","insertions":12,"deletions":-5},{"file":"lib/post-setup/docker.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/fabrics.js","type":"MODIFIED","insertions":106,"deletions":-74},{"file":"lib/post-setup/ha-binder.js","type":"MODIFIED","insertions":5,"deletions":-3},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/post-setup/underlay-nics.js","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"lib/post-setup/volapi.js","type":"MODIFIED","insertions":22,"deletions":-12},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":6,"deletions":-2},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":142,"deletions":-75},{"file":"lib/steps/binder.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/steps/no-rabbit.js","type":"MODIFIED","insertions":4,"deletions":-3},{"file":"lib/steps/sapi.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/steps/zookeeper.js","type":"MODIFIED","insertions":6,"deletions":-3},{"file":"test/platform.test.js","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":636,"sizeDeletions":-399}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}