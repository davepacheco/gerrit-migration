{"project":"joyent/sdc-amon","branch":"master","id":"Iec495e5dcaa3ae0282de015be9e425b7f318cc5d","number":"2430","subject":"MON-366 mattermost notifications Reviewed by: Josh Wilsdon \u003cjosh@wilsdon.ca\u003e Approved by: Josh Wilsdon \u003cjosh@wilsdon.ca\u003e","owner":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"url":"https://cr.joyent.us/2430","commitMessage":"MON-366 mattermost notifications\nReviewed by: Josh Wilsdon \u003cjosh@wilsdon.ca\u003e\nApproved by: Josh Wilsdon \u003cjosh@wilsdon.ca\u003e\n","createdOn":1503092767,"lastUpdated":1503589941,"open":false,"status":"MERGED","comments":[{"timestamp":1503092767,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 1."},{"timestamp":1503092768,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit b1f25854eba9a953040805de794696a2b0c340bc\n    \n    docs for setting up MM notifications\n    \n    commit 40cab2c538ef178a0a03851bf80289cbfad457e4\n    \n    first stab at MM notifications support (still need docs)"},{"timestamp":1503092792,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n(6 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1503093142,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 2."},{"timestamp":1503093144,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 54d5f93e83397de7efa32a29882b563e44aa6af1\n    \n    fix \u0027make check\u0027"},{"timestamp":1503093181,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1503521516,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1\n\n(3 comments)\n\nSeems fine? ¯\\_(ツ)_/¯"},{"timestamp":1503524975,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1503525014,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3:\n\njosh: Sorry, I\u0027d fixed \u0027make check\u0027 but not pushed to the remote grr-MON-366 branch. My bad."},{"timestamp":1503525061,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3:\n\njosh, er nevermind. THat was me reading the automation comments about make-check failure as if they were from you."},{"timestamp":1503531833,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 4."},{"timestamp":1503531834,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit fa1de4365c24e056b9170fa2c501b50a9df68958\n    \n    fix copyright dates"},{"timestamp":1503531861,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1503543456,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1\n\nso much better."},{"timestamp":1503589941,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Trent Mick"}],"currentPatchSet":{"number":"4","revision":"ec495e5dcaa3ae0282de015be9e425b7f318cc5d","parents":["bb5f9a545fa3dfce6a41bbceb6c94f3b8e2f4211"],"ref":"refs/changes/30/2430/4","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1503531833,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1503531861,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1503543456,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1503543456,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"SUBM","value":"1","grantedOn":1503589941,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"docs/design.md","type":"MODIFIED","insertions":247,"deletions":-3},{"file":"docs/index.md","type":"MODIFIED","insertions":209,"deletions":-17},{"file":"docs/media/mattermost-example-1.png","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/mattermost-example-2.png","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/mattermost-example-3.png","type":"ADDED","insertions":0,"deletions":0},{"file":"master/lib/notifications/mattermost.js","type":"ADDED","insertions":355,"deletions":0},{"file":"master/lib/notifications/xmpp.js","type":"MODIFIED","insertions":4,"deletions":-7},{"file":"master/lib/probes.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"master/package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"master/sapi_manifests/amon/template","type":"MODIFIED","insertions":5,"deletions":0}],"sizeInsertions":826,"sizeDeletions":-32},"patchSets":[{"number":"1","revision":"20fa02e57ed9db3ec377ac9d9ed0baa48ee5c4a2","parents":["bb5f9a545fa3dfce6a41bbceb6c94f3b8e2f4211"],"ref":"refs/changes/30/2430/1","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1503092767,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1503092792,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"master/lib/notifications/mattermost.js","line":134,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: missing semicolon"},{"file":"master/lib/notifications/mattermost.js","line":217,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: variable is declared but never referenced: mediumLower"},{"file":"master/lib/notifications/mattermost.js","line":258,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: variable is declared but never referenced: alarm"},{"file":"master/lib/notifications/mattermost.js","line":259,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: variable is declared but never referenced: event"},{"file":"master/lib/notifications/mattermost.js","line":261,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: variable is declared but never referenced: probe"},{"file":"master/lib/notifications/mattermost.js","line":313,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: trailing_comma"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"docs/design.md","type":"MODIFIED","insertions":247,"deletions":-3},{"file":"docs/index.md","type":"MODIFIED","insertions":208,"deletions":-16},{"file":"docs/media/mattermost-example-1.png","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/mattermost-example-2.png","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/mattermost-example-3.png","type":"ADDED","insertions":0,"deletions":0},{"file":"master/lib/notifications/mattermost.js","type":"ADDED","insertions":358,"deletions":0},{"file":"master/lib/notifications/xmpp.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"master/lib/probes.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"master/package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"master/sapi_manifests/amon/template","type":"MODIFIED","insertions":5,"deletions":0}],"sizeInsertions":826,"sizeDeletions":-26},{"number":"2","revision":"5ee93a53b58f082ff006239231cfb6e93697ed02","parents":["bb5f9a545fa3dfce6a41bbceb6c94f3b8e2f4211"],"ref":"refs/changes/30/2430/2","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1503093142,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1503093181,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1503521516,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1503521516,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"comments":[{"file":"docs/index.md","line":13,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"2017"},{"file":"master/lib/notifications/xmpp.js","line":8,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"2017"},{"file":"master/lib/probes.js","line":8,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"2017"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"docs/design.md","type":"MODIFIED","insertions":247,"deletions":-3},{"file":"docs/index.md","type":"MODIFIED","insertions":208,"deletions":-16},{"file":"docs/media/mattermost-example-1.png","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/mattermost-example-2.png","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/mattermost-example-3.png","type":"ADDED","insertions":0,"deletions":0},{"file":"master/lib/notifications/mattermost.js","type":"ADDED","insertions":355,"deletions":0},{"file":"master/lib/notifications/xmpp.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"master/lib/probes.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"master/package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"master/sapi_manifests/amon/template","type":"MODIFIED","insertions":5,"deletions":0}],"sizeInsertions":823,"sizeDeletions":-26},{"number":"3","revision":"7b2b87ba0f5ac200ee57b4499871666116518f49","parents":["bb5f9a545fa3dfce6a41bbceb6c94f3b8e2f4211"],"ref":"refs/changes/30/2430/3","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1503524975,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1503093181,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1503521516,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1503521516,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"docs/design.md","type":"MODIFIED","insertions":247,"deletions":-3},{"file":"docs/index.md","type":"MODIFIED","insertions":208,"deletions":-16},{"file":"docs/media/mattermost-example-1.png","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/mattermost-example-2.png","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/mattermost-example-3.png","type":"ADDED","insertions":0,"deletions":0},{"file":"master/lib/notifications/mattermost.js","type":"ADDED","insertions":355,"deletions":0},{"file":"master/lib/notifications/xmpp.js","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"master/lib/probes.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"master/package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"master/sapi_manifests/amon/template","type":"MODIFIED","insertions":5,"deletions":0}],"sizeInsertions":823,"sizeDeletions":-26},{"number":"4","revision":"ec495e5dcaa3ae0282de015be9e425b7f318cc5d","parents":["bb5f9a545fa3dfce6a41bbceb6c94f3b8e2f4211"],"ref":"refs/changes/30/2430/4","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1503531833,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1503531861,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1503589941,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1503543456,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1503543456,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"docs/design.md","type":"MODIFIED","insertions":247,"deletions":-3},{"file":"docs/index.md","type":"MODIFIED","insertions":209,"deletions":-17},{"file":"docs/media/mattermost-example-1.png","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/mattermost-example-2.png","type":"ADDED","insertions":0,"deletions":0},{"file":"docs/media/mattermost-example-3.png","type":"ADDED","insertions":0,"deletions":0},{"file":"master/lib/notifications/mattermost.js","type":"ADDED","insertions":355,"deletions":0},{"file":"master/lib/notifications/xmpp.js","type":"MODIFIED","insertions":4,"deletions":-7},{"file":"master/lib/probes.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"master/package.json","type":"MODIFIED","insertions":3,"deletions":-2},{"file":"master/sapi_manifests/amon/template","type":"MODIFIED","insertions":5,"deletions":0}],"sizeInsertions":826,"sizeDeletions":-32}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}]}