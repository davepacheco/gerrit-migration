From 51a11e9490e7b81f6a22cb9e59e76a7111982c98 Mon Sep 17 00:00:00 2001
From: Jerry Jelinek <jerry.jelinek@joyent.com>
Date: Fri, 24 Mar 2017 23:25:27 +0000
Subject: [PATCH] OS-5873 Need NFS client lockd support: fcntl F_SETLK returns
 ENOLCK in LX zone [fix debug build error]

---
 usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c b/usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c
index 23a39e6acd..07319c9997 100644
--- a/usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c
+++ b/usr/src/lib/brand/lx/lx_lockd/nfs_tbind.c
@@ -145,7 +145,7 @@ extern void lx_rpcb_unset(const rpcvers_t, char *);
 /*
  * Built-in netconfig table.
  */
-#define	N_NETCONF_ENTS	5
+#define	N_NETCONF_ENTS	6
 static struct netconfig nca[N_NETCONF_ENTS] = {
 	{"udp6", NC_TPI_CLTS,     1, "inet6", "udp", "/dev/udp6", 0, NULL},
 	{"tcp6", NC_TPI_COTS_ORD, 1, "inet6", "tcp", "/dev/tcp6", 0, NULL},
@@ -594,7 +594,6 @@ void
 nlm_do_one(char *provider, int (*svc)(int, struct netbuf, struct netconfig *))
 {
 	register int sock;
-	struct protob *protobp;
 	struct netbuf *retaddr;
 	struct netconfig *retnconf;
 	struct netbuf addrmask;
-- 
2.21.0

