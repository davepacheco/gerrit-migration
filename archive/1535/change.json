{"project":"joyent/muppet","branch":"master","topic":"MANTA-3110","id":"I3fb950c4531d3a040b4cbfb960d600698e39c121","number":"1535","subject":"MANTA-3110 Loadbalancers need support for multiple untrusted networks Reviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e Reviewed by: Alex Wilson \u003calex.wilson@joyent.com\u003e Approved by: Robert Mustacchi \u003crm@joyent.com\u003e","owner":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"url":"https://cr.joyent.us/1535","commitMessage":"MANTA-3110 Loadbalancers need support for multiple untrusted networks\nReviewed by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\nReviewed by: Alex Wilson \u003calex.wilson@joyent.com\u003e\nApproved by: Robert Mustacchi \u003crm@joyent.com\u003e\n","createdOn":1487360551,"lastUpdated":1487968125,"open":false,"status":"MERGED","comments":[{"timestamp":1487360551,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 1."},{"timestamp":1487360575,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1487360577,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Topic set to MANTA-3110"},{"timestamp":1487381464,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 1:\n\n(6 comments)"},{"timestamp":1487586718,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 1:\n\n(3 comments)\n\nHeads up: I may drop out at short notice, so I might not be available to hit the +1 buttons on this change. If you get +1s from anyone else, feel free to proceed without mine."},{"timestamp":1487890237,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 2."},{"timestamp":1487890266,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1487890550,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 2:\n\n(8 comments)"},{"timestamp":1487890772,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 3."},{"timestamp":1487890795,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1487900126,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 4."},{"timestamp":1487900151,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1487900560,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 5."},{"timestamp":1487900576,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1487900583,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1487926978,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 5: Code-Review+1\n\nFrom the parts I\u0027ve had a chance to look at, and from your responses to my feedback, this looks good to me.  I think there are a few bits I glossed over, though, so I\u0027d probably wait for Richard\u0027s +1 before integrating."},{"timestamp":1487959543,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 5: Code-Review+1\n\n(2 comments)\n\nGenerally looks fine to me."},{"timestamp":1487962523,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 5:\n\n(2 comments)"},{"timestamp":1487962656,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1487963095,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 7: Commit message was updated."},{"timestamp":1487966033,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 7: Integration-Approval+1"},{"timestamp":1487968125,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Cody Peter Mello"}],"currentPatchSet":{"number":"7","revision":"3fb950c4531d3a040b4cbfb960d600698e39c121","parents":["0c8fa2c3e0c16642e9c69b9fa9794d9723c8f3cd"],"ref":"refs/changes/35/1535/7","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1487963095,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1487900583,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487926978,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487959543,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1487966033,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1487968125,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"etc/haproxy.cfg.in","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":33,"deletions":-11},{"file":"main.js","type":"MODIFIED","insertions":77,"deletions":-4},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"sapi_manifests/muppet/template","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":119,"sizeDeletions":-25},"patchSets":[{"number":"1","revision":"33e47347b612b1bdc8bfdf31991d92a2bb4ffbad","parents":["0c8fa2c3e0c16642e9c69b9fa9794d9723c8f3cd"],"ref":"refs/changes/35/1535/1","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1487360551,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1487360575,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"main.js","line":65,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Should we use the full path to `mdata-get` here?\n\nI don\u0027t know if some Manta installations predate the addition of the \"sdc\" prefix in our metadata. I don\u0027t think we need to change much here, because my understanding is that `mdata-get` will exit non-zero and we\u0027ll catch that in \"err\"."},{"file":"main.js","line":65,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"main.js","line":72,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Might be good to throw some context on this with VError? For example:\n\n    setImmediate(callback, VError(err, \u0027fetching untrusted IPs\u0027));"},{"file":"main.js","line":72,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"main.js","line":80,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Is it possible for operators to change or delete the \"sdc\" namespace metadata? My understanding is that they can\u0027t via any support means, but should we assert an array before this line?"},{"file":"main.js","line":80,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"There shouldn\u0027t be a way to change sdc:nics to anything other than an array, but I\u0027ve addded an assertion."},{"file":"main.js","line":82,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Are \"admin\" and \"manta\" always the only trusted networks/nic tags?\n\nIn manta-net.sh (https://github.com/joyent/sdc-manta/blob/master/networking/manta-net.sh), my understanding is that we at least hint of the possibility of being able to choose the nic tag that the manta network uses. Whether this is actually done or not is another question (I also don\u0027t know if this works or not elsewhere in Manta), but should we provide some form of config in order to specify the nic tag of the manta network?"},{"file":"main.js","line":82,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Currently these are the only only trusted ones, yeah. I feel like supporting alternative NIC tags would have to be done separately since so many Manta components just use auto.MANTA_IP."},{"file":"main.js","line":92,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"What if we add new reserved values in the future, or new IP formats?  Should we perhaps assert that \"mod_net.isIPv4()\" returns true?"},{"file":"main.js","line":92,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"main.js","line":95,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Should we be checking for non-IPv4 values here, too?"},{"file":"main.js","line":95,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Yes, we should. This could be set to \u0027dhcp\u0027."},{"file":"main.js","line":314,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"LOG.fatal?"},{"file":"main.js","line":314,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"main.js","line":319,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"LOG.fatal?  Also, why is it fatal to find no trusted IPs?"},{"file":"main.js","line":319,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I talked with Dave and he suggested supporting no trusted IPs and only listening on the the trusted network in that case. The most recent patchset supports this configuration."},{"file":"sapi_manifests/muppet/template","line":3,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Could we provide a way to override the untrusted IP list through SAPI instance metadata?"},{"file":"sapi_manifests/muppet/template","line":3,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Josh and I discussed this in person and decided not to add a way to control this in SAPI for now."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"etc/haproxy.cfg.in","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":16,"deletions":-10},{"file":"main.js","type":"MODIFIED","insertions":74,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"sapi_manifests/muppet/template","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":97,"sizeDeletions":-20},{"number":"2","revision":"78a3d699bc48a4a26da454c157e428f146fd492f","parents":["0c8fa2c3e0c16642e9c69b9fa9794d9723c8f3cd"],"ref":"refs/changes/35/1535/2","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1487890237,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1487890266,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"etc/haproxy.cfg.in","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":32,"deletions":-10},{"file":"main.js","type":"MODIFIED","insertions":74,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"sapi_manifests/muppet/template","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":114,"sizeDeletions":-23},{"number":"3","revision":"68a5c54219f8a3b4257b82196cdcd24324bef9f9","parents":["0c8fa2c3e0c16642e9c69b9fa9794d9723c8f3cd"],"ref":"refs/changes/35/1535/3","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1487890772,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1487890795,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"etc/haproxy.cfg.in","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":32,"deletions":-10},{"file":"main.js","type":"MODIFIED","insertions":74,"deletions":-3},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"sapi_manifests/muppet/template","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":114,"sizeDeletions":-23},{"number":"4","revision":"652de1bca3f4479d574be7ab3090c6792b00153f","parents":["0c8fa2c3e0c16642e9c69b9fa9794d9723c8f3cd"],"ref":"refs/changes/35/1535/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1487900126,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1487900151,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"etc/haproxy.cfg.in","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":33,"deletions":-11},{"file":"main.js","type":"MODIFIED","insertions":75,"deletions":-4},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"sapi_manifests/muppet/template","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":116,"sizeDeletions":-25},{"number":"5","revision":"fe690b8a0af0b023750e78ffae452b883e452aee","parents":["0c8fa2c3e0c16642e9c69b9fa9794d9723c8f3cd"],"ref":"refs/changes/35/1535/5","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1487900560,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487959543,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487926978,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1487900583,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"deps/jsstyle","line":1,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"What\u0027s this update cover?"},{"file":"deps/jsstyle","line":1,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"This is to make the Perl warnings go away."},{"file":"main.js","line":320,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"So this does mean we\u0027re very likely to go into maintenance if the metadata agent is broken... then again, normally the metadata agent is broken for the entire boot up of a VM and stops us from getting past network/physical, so maybe this doesn\u0027t matter."},{"file":"main.js","line":320,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Yeah. If the metadata agent isn\u0027t working when the zone comes up, it\u0027ll break much earlier in booting. It would have to break in between the startup scripts and Muppet starting."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"etc/haproxy.cfg.in","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":33,"deletions":-11},{"file":"main.js","type":"MODIFIED","insertions":77,"deletions":-4},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"sapi_manifests/muppet/template","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":119,"sizeDeletions":-25},{"number":"6","revision":"aebca344f9d7a561780ce14ad671733bbaa5b71d","parents":["0c8fa2c3e0c16642e9c69b9fa9794d9723c8f3cd"],"ref":"refs/changes/35/1535/6","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1487962656,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487959543,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487926978,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1487900583,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"etc/haproxy.cfg.in","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":33,"deletions":-11},{"file":"main.js","type":"MODIFIED","insertions":77,"deletions":-4},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"sapi_manifests/muppet/template","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":119,"sizeDeletions":-25},{"number":"7","revision":"3fb950c4531d3a040b4cbfb960d600698e39c121","parents":["0c8fa2c3e0c16642e9c69b9fa9794d9723c8f3cd"],"ref":"refs/changes/35/1535/7","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1487963095,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1487966033,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1487968125,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487959543,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487926978,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1487900583,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"etc/config.coal.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"etc/haproxy.cfg.in","type":"MODIFIED","insertions":1,"deletions":-4},{"file":"lib/lb_manager.js","type":"MODIFIED","insertions":33,"deletions":-11},{"file":"main.js","type":"MODIFIED","insertions":77,"deletions":-4},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"sapi_manifests/muppet/template","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":119,"sizeDeletions":-25}],"allReviewers":[{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}]}