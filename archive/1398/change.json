{"project":"joyent/sdcadm","branch":"master","id":"I38867e73b2cf5c3bbe27b1d6428c8e2762bfd87a","number":"1398","subject":"TOOLS-1665 Updating agents fails if \"cmon-agent\" service doesn\u0027t exist in SAPI Reviewed by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e Approved by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e","owner":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"url":"https://cr.joyent.us/1398","commitMessage":"TOOLS-1665 Updating agents fails if \"cmon-agent\" service doesn\u0027t exist in SAPI\nReviewed by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e\nApproved by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e\n","createdOn":1486014999,"lastUpdated":1486052197,"open":false,"status":"MERGED","comments":[{"timestamp":1486014999,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 1."},{"timestamp":1486015000,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 250580ccb5149546d309cd642bf5987e1637e44d\n    \n    deprecate sdcadm ex add-new-agent-svcs; add its functionality to update-other and update-agents"},{"timestamp":1486015030,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1486034119,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1: Code-Review+1 Integration-Approval+1\n\n(2 comments)\n\nIt looks good to me. Comments are pretty minor and could be added later since we need this for today\u0027s release."},{"timestamp":1486044906,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 2."},{"timestamp":1486044907,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit f8af10791f613a16e66ac88f5c5adda2a172e3be\n    \n    feedback from pedro"},{"timestamp":1486044947,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1486050503,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1486052197,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Trent Mick"}],"currentPatchSet":{"number":"2","revision":"38867e73b2cf5c3bbe27b1d6428c8e2762bfd87a","parents":["a57e0eaa198414a91d2c1594cc99f06f7832bca1"],"ref":"refs/changes/98/1398/2","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1486044906,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1486044947,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1486050503,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1486050503,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"SUBM","value":"1","grantedOn":1486052197,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":0,"deletions":-6},{"file":"lib/cli/do_add_new_agent_svcs.js","type":"MODIFIED","insertions":23,"deletions":-237},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/steps/agent-services.js","type":"ADDED","insertions":283,"deletions":0},{"file":"lib/steps/index.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":326,"sizeDeletions":-251},"patchSets":[{"number":"1","revision":"8cb68fefccb105b49357646e2ef4d00c6c4929af","parents":["a57e0eaa198414a91d2c1594cc99f06f7832bca1"],"ref":"refs/changes/98/1398/1","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1486014999,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1486015030,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1486034119,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1486034119,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"comments":[{"file":"lib/steps/agent-services.js","line":39,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Given we\u0027re asserting every argument here, I\u0027d say we could assert cb is a function too?"},{"file":"lib/steps/agent-services.js","line":61,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"This is an excellent time to sort all of these alphabetically, though"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":0,"deletions":-6},{"file":"lib/cli/do_add_new_agent_svcs.js","type":"MODIFIED","insertions":23,"deletions":-237},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/steps/agent-services.js","type":"ADDED","insertions":273,"deletions":0},{"file":"lib/steps/index.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":316,"sizeDeletions":-251},{"number":"2","revision":"38867e73b2cf5c3bbe27b1d6428c8e2762bfd87a","parents":["a57e0eaa198414a91d2c1594cc99f06f7832bca1"],"ref":"refs/changes/98/1398/2","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1486044906,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1486044947,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1486052197,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1486050503,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1486050503,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":0,"deletions":-6},{"file":"lib/cli/do_add_new_agent_svcs.js","type":"MODIFIED","insertions":23,"deletions":-237},{"file":"lib/cli/do_update_other.js","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/steps/agent-services.js","type":"ADDED","insertions":283,"deletions":0},{"file":"lib/steps/index.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":326,"sizeDeletions":-251}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}]}