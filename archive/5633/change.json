{"project":"joyent/illumos-joyent","branch":"master","id":"I727500e0fbb95141ea67e4e79412d2dfe2660553","number":"5633","subject":"OS-7606 Multicast NCEs know no bounds! Reviewed by: Cody Peter Mello \u003cmelloc@writev.io\u003e Reviewed by: Jason King \u003cjason.king@joyent.com\u003e Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Approved by: Robert Mustacchi \u003crm@joyent.com\u003e","owner":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"url":"https://cr.joyent.us/5633","commitMessage":"OS-7606 Multicast NCEs know no bounds!\nReviewed by: Cody Peter Mello \u003cmelloc@writev.io\u003e\nReviewed by: Jason King \u003cjason.king@joyent.com\u003e\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nApproved by: Robert Mustacchi \u003crm@joyent.com\u003e\n","createdOn":1551050234,"lastUpdated":1551303979,"open":false,"status":"MERGED","comments":[{"timestamp":1551050234,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 1."},{"timestamp":1551056441,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 2: Commit message was updated."},{"timestamp":1551071416,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 3: Patch Set 2 was rebased."},{"timestamp":1551121267,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3:\n\n(12 comments)\n\nIn general, this looks pretty good. Thanks for putting this together."},{"timestamp":1551122104,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 3:\n\n(12 comments)\n\nThank you, all-or-almost-all of your suggested actions will be taken, but I have a couple of clarifying questions."},{"timestamp":1551124383,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3:\n\n(7 comments)"},{"timestamp":1551130546,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 3:\n\n(4 comments)\n\nMid-fixes, thanks for the guidance on the stat-keeping."},{"timestamp":1551134860,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 4."},{"timestamp":1551134946,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 4:\n\n(1 comment)\n\nCheckpoint push. Testing tonight, plus there are likely some tiny tweaks to be made."},{"timestamp":1551146975,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 5."},{"timestamp":1551147181,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 5:\n\nMore than tiny tweaks.  DEBUG reference-tracking in IP gets broken by this new code, so I had to deal with it."},{"timestamp":1551191612,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 6: Patch Set 5 was rebased."},{"timestamp":1551195375,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 7."},{"timestamp":1551195418,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 7:\n\nTesting notes in ticket, git pbchk-clean."},{"timestamp":1551204269,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 7: Code-Review+1"},{"timestamp":1551204809,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 7:\n\n(4 comments)"},{"timestamp":1551208169,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 7:\n\n(3 comments)"},{"timestamp":1551208672,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 7:\n\n(7 comments)\n\nThank you for your suggestions."},{"timestamp":1551210542,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 8."},{"timestamp":1551218764,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 8: Code-Review+1\n\n(1 comment)"},{"timestamp":1551221642,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 8: Code-Review+1"},{"timestamp":1551222033,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 8: Code-Review+1"},{"timestamp":1551224704,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 9: Patch Set 8 was rebased."},{"timestamp":1551224897,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 10: Commit message was updated."},{"timestamp":1551227987,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 10:\n\nRunning one last test, otherwise good for an IA inspection (testing notes in ticket)."},{"timestamp":1551229843,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 11: Patch Set 10 was rebased."},{"timestamp":1551276464,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 12: Patch Set 11 was rebased."},{"timestamp":1551303613,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 12: Integration-Approval+1"},{"timestamp":1551303888,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 13: Patch Set 12 was rebased."},{"timestamp":1551303940,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Uploaded patch set 14: Commit message was updated."},{"timestamp":1551303979,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Dan McDonald"}],"currentPatchSet":{"number":"14","revision":"727500e0fbb95141ea67e4e79412d2dfe2660553","parents":["effbf48007cb2553cf312d93f7e4cf469e837d77"],"ref":"refs/changes/33/5633/14","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1551303940,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551218764,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551221642,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551222033,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1551303613,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1551303979,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/uts/common/inet/ip.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","type":"MODIFIED","insertions":277,"deletions":-15},{"file":"usr/src/uts/common/inet/ip_stack.h","type":"MODIFIED","insertions":15,"deletions":-8},{"file":"usr/src/uts/intel/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/intel/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":313,"sizeDeletions":-30},"patchSets":[{"number":"1","revision":"66cf0f22c3e1041d9d6dfd70381776061fd59b71","parents":["9b2ce9c90f656792c9d27ec8cbcec521f3f8922f"],"ref":"refs/changes/33/5633/1","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1551050234,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/ip.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","type":"MODIFIED","insertions":252,"deletions":-18},{"file":"usr/src/uts/intel/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/intel/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":269,"sizeDeletions":-24},{"number":"2","revision":"ca62001a76ec2569aa2d122206ec7861e952f184","parents":["9b2ce9c90f656792c9d27ec8cbcec521f3f8922f"],"ref":"refs/changes/33/5633/2","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1551056441,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"NO_CODE_CHANGE","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/ip.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","type":"MODIFIED","insertions":252,"deletions":-18},{"file":"usr/src/uts/intel/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/intel/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":269,"sizeDeletions":-24},{"number":"3","revision":"d628b2ebc412398aae7d864b1ded7a7e4e7e53cf","parents":["540be08e437ce290999b29a244386a4283dca907"],"ref":"refs/changes/33/5633/3","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1551071416,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"TRIVIAL_REBASE","comments":[{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1085,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Because we\u0027re holding the ill_lock, I guess it\u0027s not possible for us to encounter a condemned nce on the list, would you agree? Not sure if it\u0027s worth us checking / asserting that at all."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1085,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"nce_delete() handles condemned ones it gets by returning immediately. I can additionally comment here if you wish."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1085,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"So, the reason I was bringing this up was that if we encounter a condemned one here, then we\u0027ll probably end up doing the wrong thing as we shouldn\u0027t touch one that\u0027s already been condemned by another thread as its list pointers will have already been manipulated, etc.. Since one needs to hold the ill_lock to condemn the node, I don\u0027t believe that we can end up in a case where this occurs."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1088,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Can we not be clever with this and just have the caller past in a list_t?"},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1088,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"First-draft syndrome.  Others in this neck of the woods do Just That, so yes, I\u0027ll need to fix it, thanks."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1088,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I understand, thanks for being willing to make the change!"},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1125,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It might be clearer to match the description in ncec_delete() in so far as this reference is for it being in the list. I was a bit thrown off by \u0027interning\u0027 at first."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1125,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Can do."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1135,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I would keep track of the stat."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1135,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Followup question -\u003e should I use that very stat? Or should I create-and-use a new one?"},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1135,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I would use a new stat to cover this case."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1135,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Thank you for the clarification."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1138,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is it legal for us to use the reference from the list walk infrastructure for this?"},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1138,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Very much.  Other nce_walk callbacks do this as well."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1138,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Thanks for confirming."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1143,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"What would normally have cleaned these entries up?"},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1143,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"nce_graveyard_free(), I should state that more explicitly here."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1143,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Well, nce_graveyard_free() is something you\u0027re introducing. I was trying to ask about what would happen without this change. I guess only either the nce timing out or memory pressure via a kmem_reap()?"},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1143,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Yes, and multicast NCEs never time out (and the unicast ones are driven by ARP and NDP games, NOT by a generic grim-reaper thread)."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1182,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Can I recommend ASSERT3U so we can figure out which value it actually was that was off at this point as graveyard will have changed."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1182,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Will do."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1185,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"So, I think this\u0027ll be a lot cleaner if we use the normal list_t, in particular if we end up with a bug where things haven\u0027t been properly removed from the lists. As if one of these ncec_t\u0027s is in a list and we do a ::walk list, since normally it\u0027ll have the pointers to the list nodes."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1185,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"See my comment above about first-draft syndrome - this will get cleaned up as well."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1186,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I assume that the reason we\u0027re not bothering with locking around reading this is because we believe that it\u0027s on here and therefore save to get rid of?"},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1186,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Also ncec_flags like this are write-once."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1191,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Minor nit, but might be nice to be consistent with the use of { and }."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1191,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Might as well do that too, thanks."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1199,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is there a particular reason we don\u0027t want to use TQ_SLEEP? I mostly ask based on your question below. If we delete all the nce_t\u0027s and the memory for the ncec\u0027s backs up because we hadn\u0027t cleaned it up, would anything ever come back around and clean that up?"},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1199,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"I\u0027m always afraid of functions like this being called in the forwarding path. We don\u0027t have any JPC nodes that are acting as multicast routers, but that could be the case here.\n\nTBH I\u0027d feel even MORE comfortable if there as a TQ_NORMALPRI to go along with this, but it doesn\u0027t exist currently.  (We have many KM_NOSLEEP allocations in IP and allocb that could benefit from (KM_NOSLEEP|KM_NORMALPRI).)"},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1199,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"OK, that\u0027s fine. I\u0027m just not sure what will ever clean up those values then. Just memory pressure from a kmem_reap?"},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1199,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Yes."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":5002,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This assert doesn\u0027t look right. Why would the pointer we passed not be NULL? The if statement at +4997 suggests it\u0027s perfectly fine for it to be valid. In fact, graveyard has to be non-NULL or ncec_too_many_mcast would case a #PF."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":5002,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"This was moved from older code.  It should either be deleted, or changed to ASSERT(graveyard \u003d\u003d NULL || *graveyard \u003d\u003d NULL);"},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":5002,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Well, if graveyard is NULL, we will panic in nce_too_many_mcast(), so not sure there\u0027s a case where it\u0027s valid for us to receive a value of NULL where we also end up in the nce_too_many_mcast() codepath."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":5002,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"This is a casualty of the using list_t in nce_too_many_mcast(), so it\u0027s gone."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/ip.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","type":"MODIFIED","insertions":252,"deletions":-18},{"file":"usr/src/uts/intel/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/intel/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":269,"sizeDeletions":-24},{"number":"4","revision":"df417521269697da38e584e3e18d72130836878a","parents":["a23a88c8822def3a025fde613631b67191ea9ae0"],"ref":"refs/changes/33/5633/4","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1551134860,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1090,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Like this one.  :("}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/ip.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","type":"MODIFIED","insertions":259,"deletions":-16},{"file":"usr/src/uts/common/inet/ip_stack.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/intel/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/intel/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":280,"sizeDeletions":-22},{"number":"5","revision":"b98341c12fdc13ec18309020abbec7d99c74bfbe","parents":["a23a88c8822def3a025fde613631b67191ea9ae0"],"ref":"refs/changes/33/5633/5","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1551146975,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/ip.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","type":"MODIFIED","insertions":275,"deletions":-16},{"file":"usr/src/uts/common/inet/ip_stack.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/intel/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/intel/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":296,"sizeDeletions":-22},{"number":"6","revision":"d4c3cdf96775f96951445392b4ceb9e57e389177","parents":["e5af3bd1c99c58d9dd19baec10e1b5e8f064858d"],"ref":"refs/changes/33/5633/6","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1551191612,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"TRIVIAL_REBASE","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/ip.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","type":"MODIFIED","insertions":275,"deletions":-16},{"file":"usr/src/uts/common/inet/ip_stack.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/intel/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/intel/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":296,"sizeDeletions":-22},{"number":"7","revision":"777e1107b2b82cd00d207c0d7beda3345f6952eb","parents":["e5af3bd1c99c58d9dd19baec10e1b5e8f064858d"],"ref":"refs/changes/33/5633/7","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1551195375,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551204269,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"comments":[{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1032,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This is slightly out of date now."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1032,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Will fix."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1067,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Maybe expand on this further to explain that this means that we\u0027re evicting the oldest entries."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1067,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Will fix."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1108,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"What would you think about moving bumping this counter into nce_add_impl()? Since we weren\u0027t adding anything new here, I was confused about why this was being bumped until I read its caller."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1108,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Excellent idea.  It\u0027ll make here and there more readable too, I think. I mentioned first-draft-syndrome earlier, and bumping here is another case of that."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1186,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I think I understand why it\u0027s doing the list_destroy() here, versus the callers, as it simplifies everything else, but it was a bit surprising at first blush that it was here versus in the caller who created the list."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1192,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Can this be written as \"*_notr()\" to make it clear that it\u0027s referring to a class of functions?"},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1192,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Will fix."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1199,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I assume we don\u0027t need to check if the ill is condemned here?"},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1199,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Correct, as ill_refhold() itself does not."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1199,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"ill_refhold() doesn\u0027t because it explicitly requires consumers to check via ILL_CAN_LOOKUP. I\u0027m kind of assuming that we\u0027re in a state where we wouldn\u0027t have the ill unless we had it, so it\u0027s fine."},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1223,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Should we have a stat for TQ_NOSLEEP failures so we can know for certain whether or not we hit this case and therefore haven\u0027t cleaned up because of memory issues?"},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1223,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"\u003csee below\u003e"},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","line":1226,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Yes, and as a note to myself, it should be done here."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/ip.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","type":"MODIFIED","insertions":274,"deletions":-15},{"file":"usr/src/uts/common/inet/ip_stack.h","type":"MODIFIED","insertions":14,"deletions":-8},{"file":"usr/src/uts/intel/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/intel/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":308,"sizeDeletions":-30},{"number":"8","revision":"6c8f24f934c6899b8ba705bfbf925f1b95ead04e","parents":["e5af3bd1c99c58d9dd19baec10e1b5e8f064858d"],"ref":"refs/changes/33/5633/8","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1551210542,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551218764,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551221642,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551222033,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/ip.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","type":"MODIFIED","insertions":277,"deletions":-15},{"file":"usr/src/uts/common/inet/ip_stack.h","type":"MODIFIED","insertions":15,"deletions":-8},{"file":"usr/src/uts/intel/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/intel/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":313,"sizeDeletions":-30},{"number":"9","revision":"8c5a7d3770ea915a70bb083a48b9f3a6215f3e27","parents":["46c76a4f2a42a132a2957bec5f12b68322f731a7"],"ref":"refs/changes/33/5633/9","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1551224704,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551218764,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551221642,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551222033,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/ip.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","type":"MODIFIED","insertions":277,"deletions":-15},{"file":"usr/src/uts/common/inet/ip_stack.h","type":"MODIFIED","insertions":15,"deletions":-8},{"file":"usr/src/uts/intel/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/intel/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":313,"sizeDeletions":-30},{"number":"10","revision":"3c332ddb45f52a48dc26a42feac40b1b470efaee","parents":["46c76a4f2a42a132a2957bec5f12b68322f731a7"],"ref":"refs/changes/33/5633/10","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1551224897,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551218764,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551221642,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551222033,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/inet/ip.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","type":"MODIFIED","insertions":277,"deletions":-15},{"file":"usr/src/uts/common/inet/ip_stack.h","type":"MODIFIED","insertions":15,"deletions":-8},{"file":"usr/src/uts/intel/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/intel/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":313,"sizeDeletions":-30},{"number":"11","revision":"41ff0a8deecf78c13d967551edaeed268d4baac8","parents":["0d3f2b61dcfb18edace4fd257054f6fdbe07c99c"],"ref":"refs/changes/33/5633/11","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1551229843,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551218764,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551221642,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551222033,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/inet/ip.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","type":"MODIFIED","insertions":277,"deletions":-15},{"file":"usr/src/uts/common/inet/ip_stack.h","type":"MODIFIED","insertions":15,"deletions":-8},{"file":"usr/src/uts/intel/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/intel/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":313,"sizeDeletions":-30},{"number":"12","revision":"3afd09535fa4b69c09d52c4a92cff553f6693ec0","parents":["4117818aad7977764f027cf497594742d22e8956"],"ref":"refs/changes/33/5633/12","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1551276464,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551218764,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1551303613,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551221642,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551222033,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/inet/ip.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","type":"MODIFIED","insertions":277,"deletions":-15},{"file":"usr/src/uts/common/inet/ip_stack.h","type":"MODIFIED","insertions":15,"deletions":-8},{"file":"usr/src/uts/intel/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/intel/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":313,"sizeDeletions":-30},{"number":"13","revision":"64906fa91ce1cc927a3b7d0abafe67cd961f5a4d","parents":["effbf48007cb2553cf312d93f7e4cf469e837d77"],"ref":"refs/changes/33/5633/13","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1551303888,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551218764,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1551303613,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551221642,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551222033,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/inet/ip.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","type":"MODIFIED","insertions":277,"deletions":-15},{"file":"usr/src/uts/common/inet/ip_stack.h","type":"MODIFIED","insertions":15,"deletions":-8},{"file":"usr/src/uts/intel/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/intel/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":313,"sizeDeletions":-30},{"number":"14","revision":"727500e0fbb95141ea67e4e79412d2dfe2660553","parents":["effbf48007cb2553cf312d93f7e4cf469e837d77"],"ref":"refs/changes/33/5633/14","uploader":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"createdOn":1551303940,"author":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551218764,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1551303613,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551221642,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551222033,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"SUBM","value":"1","grantedOn":1551303979,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/uts/common/inet/ip.h","type":"MODIFIED","insertions":5,"deletions":-2},{"file":"usr/src/uts/common/inet/ip/ip.c","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/inet/ip/ip_ndp.c","type":"MODIFIED","insertions":277,"deletions":-15},{"file":"usr/src/uts/common/inet/ip_stack.h","type":"MODIFIED","insertions":15,"deletions":-8},{"file":"usr/src/uts/intel/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/intel/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.debug64","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/sparc/ip/ip.global-objs.obj64","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":313,"sizeDeletions":-30}],"allReviewers":[{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}]}