{"project":"joyent/illumos-joyent","branch":"master","id":"If92efa0bbe42adba606c2523638d6238b731b3f1","number":"5314","subject":"OS-6602 ZFS not detecting faulty spares in a timely manner OS-7499 ZFS retire agent cannot fault inactive spares Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Approved by: Jerry Jelinek \u003cjerr","owner":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"url":"https://cr.joyent.us/5314","commitMessage":"OS-6602 ZFS not detecting faulty spares in a timely manner\nOS-7499 ZFS retire agent cannot fault inactive spares\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1546637800,"lastUpdated":1549481678,"open":false,"status":"MERGED","comments":[{"timestamp":1546637800,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 1."},{"timestamp":1546641175,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\n(3 comments)\n\nThis is a good start although I had a few general comments."},{"timestamp":1546641252,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(4 comments)"},{"timestamp":1546899437,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 2."},{"timestamp":1546899791,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 1:\n\n(2 comments)\n\nThanks for the feedback. I\u0027m going to try prototyping something to improve the locking situation."},{"timestamp":1547049075,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2:\n\n(3 comments)"},{"timestamp":1547141497,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 3."},{"timestamp":1547145345,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 4."},{"timestamp":1547153756,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 4: Code-Review+1\n\nI think this is looking a lot better."},{"timestamp":1547243446,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 5."},{"timestamp":1547244239,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 5:\n\n(1 comment)\n\nPS5 includes a simple test that we won\u0027t be able to put in our smartos.run runfile because of its dependency on zinject, which we don\u0027t ship by default.\n\nI also added a proposed fix to prevent ZFS from sparing in faulted spares."},{"timestamp":1547248103,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 6."},{"timestamp":1547248169,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 6:\n\nPS6 adds zinject to our image and the test to the smartos runfile."},{"timestamp":1547248483,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1547255794,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1547577872,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 7."},{"timestamp":1547578193,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 7:\n\nI ran a debug build and tried a few different approaches to resolve some locking issues. I think the better approach here is to let the spa manage locking itself by kicking off the probes asynchronously."},{"timestamp":1547578424,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 7:\n\n(1 comment)"},{"timestamp":1547578978,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 8."},{"timestamp":1547579020,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 7:\n\n(1 comment)"},{"timestamp":1547580586,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 7:\n\n(3 comments)\n\nIn addition to the bug Patrick noted, I saw a few copyright nits."},{"timestamp":1547580943,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 9."},{"timestamp":1547585187,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 9: Code-Review+1"},{"timestamp":1547672982,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 10."},{"timestamp":1547673240,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 10:\n\nAfter the last couple revisions I think a separate thread for this work is overkill."},{"timestamp":1547741013,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 10:\n\n(3 comments)"},{"timestamp":1547752102,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 11."},{"timestamp":1547767148,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 11: Code-Review+1"},{"timestamp":1547872183,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 11: Code-Review+1"},{"timestamp":1548797999,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 12."},{"timestamp":1548798083,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 12:\n\nPS12 includes an \u0027off\u0027 switch for spare polling, adds SERD logic for allowing a few failed polls, and makes the polling interval more frequent by default."},{"timestamp":1548802447,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 12:\n\n(1 comment)\n\nThis looks good to me, I just had one question."},{"timestamp":1548803146,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 12:\n\n(1 comment)"},{"timestamp":1548804107,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 12: Code-Review+1"},{"timestamp":1549406461,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 12: Code-Review+1"},{"timestamp":1549480048,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 12: Integration-Approval+1"},{"timestamp":1549481367,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 13: Patch Set 12 was rebased."},{"timestamp":1549481541,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 14: Commit message was updated."},{"timestamp":1549481678,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Kody A Kantor"}],"currentPatchSet":{"number":"14","revision":"f92efa0bbe42adba606c2523638d6238b731b3f1","parents":["2bd653815361427c17538380a0ae62a9a27120ff"],"ref":"refs/changes/14/5314/14","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1549481541,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1548804107,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549406461,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1549480048,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1549481678,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/fm/modules/common/zfs-diagnosis/zfs_de.c","type":"MODIFIED","insertions":29,"deletions":-9},{"file":"usr/src/cmd/fm/modules/common/zfs-retire/zfs_retire.c","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/lib/libzfs/common/libzfs_pool.c","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"usr/src/test/zfs-tests/include/libtest.shlib","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/setup.ksh","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/zpool_replace_002_neg.ksh","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/spa.c","type":"MODIFIED","insertions":18,"deletions":-1},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","type":"MODIFIED","insertions":36,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/sys/spa.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/fs/zfs/sys/spa_impl.h","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":173,"sizeDeletions":-23},"patchSets":[{"number":"1","revision":"4f3353a5d018ec68df10ed0924036a5de2073c06","parents":["8a15db18cc817a39246b143e7ccd35a0898ed743"],"ref":"refs/changes/14/5314/1","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1546637800,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","line":241,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"This interval is a lot shorter than I was thinking we would need. I had been thinking maybe once a day, but perhaps we could extend it to at least 5 minutes?"},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","line":241,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"One day works for me. The device is faulted even if only one vdev_probe fails, so daily is perfectly fine."},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","line":1021,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Is there a reason to create this single-instance type vs a set of named variables like?:\nkmutex_t spare_poll_lock;\nkcondvar_t spare_poll_cv;\n..."},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","line":1021,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Not a good reason, no. I just thought folks would want related fields grouped together in a structure like this."},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","line":1042,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Perhaps move this after the spare check so if the poll_thread_destroy function wakes us, the thread can immediately exit rather than doing one last check of the spares?"},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","line":1043,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"You should recheck poll_cancel here in case the thread was woken up due to destroy. You don\u0027t want to do all of the work in that case."},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","line":1059,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"I think we could cause problems here with this potentially long-running  operation while we\u0027re holding spa_spare_lock, since nothing can happen with spares until all the probing is done. If there are a lot of spares and probing a disk takes a long time for some reason, this could have a noticeable impact on how quickly a different spare can be used.\n\nThe code would be a lot more complex, but it might be good if we can drop the lock somehow during this process, although I realize that is not easy to properly resume. Maybe dropping it after a single probe, then starting the loop over again but not probing until we get past the vdev we just probed? It would be good to understand the potential worst case here if we have to hold the lock throughout both loops."},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","line":1076,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"cv_signal the poll_cv so it can wake up immediately to bail"},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","line":1079,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Use braces for this while loop, especially since the continuation makes the body more than one line."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/fm/modules/common/zfs-diagnosis/zfs_de.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/cmd/fm/modules/common/zfs-retire/zfs_retire.c","type":"MODIFIED","insertions":14,"deletions":-6},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","type":"MODIFIED","insertions":92,"deletions":0}],"sizeInsertions":108,"sizeDeletions":-7},{"number":"2","revision":"cff7ee52fd1c18184ddc520e481fd0a9738e7d6d","parents":["6fb307ce14869b1c3684d0948a7844194c69b5bd"],"ref":"refs/changes/14/5314/2","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1546899437,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/cmd/fm/modules/common/zfs-retire/zfs_retire.c","line":130,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Should there be an additional bug filed for this broken behavior?  (It could still be put back as one unified commit)"},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","line":1017,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"These and your spa_spare_poll_* functions can all be static, I think."},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","line":1050,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Per Jerry\u0027s comment about this taking a potentially long time with the spa_spare_lock held: Since this has the ability to add itself to a parent zio, perhaps you could create a top-level zio, initial all the vdev_probe() ops as children of it, and then wait for its completion with spa_spare_lock dropped."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/fm/modules/common/zfs-diagnosis/zfs_de.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/cmd/fm/modules/common/zfs-retire/zfs_retire.c","type":"MODIFIED","insertions":14,"deletions":-6},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","type":"MODIFIED","insertions":88,"deletions":0}],"sizeInsertions":104,"sizeDeletions":-7},{"number":"3","revision":"794cc109d6a73a1ce3e9ffacbdc5c09fd0d27607","parents":["6fb307ce14869b1c3684d0948a7844194c69b5bd"],"ref":"refs/changes/14/5314/3","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1547141497,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/cmd/fm/modules/common/zfs-diagnosis/zfs_de.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/fm/modules/common/zfs-retire/zfs_retire.c","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","type":"MODIFIED","insertions":100,"deletions":0}],"sizeInsertions":118,"sizeDeletions":-7},{"number":"4","revision":"a99621c89857322fcbeb380ce242322e20860c5e","parents":["6fb307ce14869b1c3684d0948a7844194c69b5bd"],"ref":"refs/changes/14/5314/4","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1547145345,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547153756,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/cmd/fm/modules/common/zfs-diagnosis/zfs_de.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/fm/modules/common/zfs-retire/zfs_retire.c","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","type":"MODIFIED","insertions":100,"deletions":0}],"sizeInsertions":118,"sizeDeletions":-7},{"number":"5","revision":"b610d838f296e5b5680c20b43d374b60828e458e","parents":["6fb307ce14869b1c3684d0948a7844194c69b5bd"],"ref":"refs/changes/14/5314/5","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1547243446,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/lib/libzfs/common/libzfs_pool.c","line":2861,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"This is the least invasive change I could think of to prevent ZFS from sparing in a faulted spare.\n\nTurns out the zfs_retire.c and zpool_main.c both use this function when performing device replacements. zfs_retire finds the replacement vdev from within the pool. zpool_main, however, does a lot of strange things to hand craft a more stripped down nvroot argument. I believe zpool_main does that because the device isn\u0027t necessarily already in the pool."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"usr/src/cmd/fm/modules/common/zfs-diagnosis/zfs_de.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/fm/modules/common/zfs-retire/zfs_retire.c","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/lib/libzfs/common/libzfs_pool.c","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"usr/src/test/zfs-tests/include/libtest.shlib","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/setup.ksh","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/zpool_replace_002_neg.ksh","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","type":"MODIFIED","insertions":100,"deletions":0}],"sizeInsertions":179,"sizeDeletions":-12},{"number":"6","revision":"6cb7a40f3a1baad8434d2ed8c5a75a658cbee320","parents":["6fb307ce14869b1c3684d0948a7844194c69b5bd"],"ref":"refs/changes/14/5314/6","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1547248103,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","comments":[{"file":"manifest","line":10816,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"We don\u0027t want this line. You want to follow the same pattern as zdb, which is a symlink to isaexec. Since we only ship a 64-bit kernel, add a line like this:\nh usr/sbin/zinject\u003dusr/lib/isaexec"},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","line":1064,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"prepend (void) to indicate we don\u0027t care about the return val"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/fm/modules/common/zfs-diagnosis/zfs_de.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/fm/modules/common/zfs-retire/zfs_retire.c","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/lib/libzfs/common/libzfs_pool.c","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"usr/src/test/zfs-tests/include/libtest.shlib","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/setup.ksh","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/zpool_replace_002_neg.ksh","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","type":"MODIFIED","insertions":100,"deletions":0}],"sizeInsertions":183,"sizeDeletions":-14},{"number":"7","revision":"7b38d175b76e7e8606db5292fb8f9a43298e09fe","parents":["6fb307ce14869b1c3684d0948a7844194c69b5bd"],"ref":"refs/changes/14/5314/7","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1547577872,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/test/zfs-tests/include/libtest.shlib","line":28,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"add joyent copyright"},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","line":13,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"update year"},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/setup.ksh","line":26,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"add joyent copyright"},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","line":1071,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"The cv_timedwait_hires() call will return with spare_poll_lock still held.  I\u0027m not sure how this didn\u0027t panic on a recursive enter in your test."},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","line":1071,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Yep. This will be a recursive entry if the poll thread is set to cancel. Good catch. This wasn\u0027t hit in the test because it doesn\u0027t cancel the spare polling thread. I\u0027m not sure why this wasn\u0027t hit during shutdown though."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/fm/modules/common/zfs-diagnosis/zfs_de.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/fm/modules/common/zfs-retire/zfs_retire.c","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/lib/libzfs/common/libzfs_pool.c","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"usr/src/test/zfs-tests/include/libtest.shlib","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/setup.ksh","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/zpool_replace_002_neg.ksh","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/spa.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","type":"MODIFIED","insertions":99,"deletions":0}],"sizeInsertions":185,"sizeDeletions":-15},{"number":"8","revision":"2cfeb79d3112bb0f9f7a3e8ba2f2dfcaf7c79433","parents":["6fb307ce14869b1c3684d0948a7844194c69b5bd"],"ref":"refs/changes/14/5314/8","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1547578978,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/fm/modules/common/zfs-diagnosis/zfs_de.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/fm/modules/common/zfs-retire/zfs_retire.c","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/lib/libzfs/common/libzfs_pool.c","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"usr/src/test/zfs-tests/include/libtest.shlib","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/setup.ksh","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/zpool_replace_002_neg.ksh","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/spa.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","type":"MODIFIED","insertions":98,"deletions":0}],"sizeInsertions":184,"sizeDeletions":-15},{"number":"9","revision":"7ea5157292911166ce05e80f0fc5eb939f3f352c","parents":["6fb307ce14869b1c3684d0948a7844194c69b5bd"],"ref":"refs/changes/14/5314/9","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1547580943,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547585187,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/fm/modules/common/zfs-diagnosis/zfs_de.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/fm/modules/common/zfs-retire/zfs_retire.c","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/lib/libzfs/common/libzfs_pool.c","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"usr/src/test/zfs-tests/include/libtest.shlib","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/setup.ksh","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/zpool_replace_002_neg.ksh","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/spa.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","type":"MODIFIED","insertions":98,"deletions":0}],"sizeInsertions":190,"sizeDeletions":-16},{"number":"10","revision":"64382c5f098f7cdf46b92a5afe9f323f002977e9","parents":["6fb307ce14869b1c3684d0948a7844194c69b5bd"],"ref":"refs/changes/14/5314/10","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1547672982,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","line":1021,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"It appears that you should be doing a spa_config_enter (as a RW_READER) and spa_config_exit around this code, based on how this is accessed elsewhere."},{"file":"usr/src/uts/common/fs/zfs/sys/spa.h","line":28,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"fix date"},{"file":"usr/src/uts/common/fs/zfs/sys/spa_impl.h","line":28,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"missing copyright"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/fm/modules/common/zfs-diagnosis/zfs_de.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/fm/modules/common/zfs-retire/zfs_retire.c","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/lib/libzfs/common/libzfs_pool.c","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"usr/src/test/zfs-tests/include/libtest.shlib","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/setup.ksh","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/zpool_replace_002_neg.ksh","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/spa.c","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","type":"MODIFIED","insertions":30,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/sys/spa.h","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/sys/spa_impl.h","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":138,"sizeDeletions":-16},{"number":"11","revision":"85acb9844d85793948732d4d602008f267816bc7","parents":["6fb307ce14869b1c3684d0948a7844194c69b5bd"],"ref":"refs/changes/14/5314/11","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1547752102,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547767148,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547872183,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/fm/modules/common/zfs-diagnosis/zfs_de.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/cmd/fm/modules/common/zfs-retire/zfs_retire.c","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/lib/libzfs/common/libzfs_pool.c","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"usr/src/test/zfs-tests/include/libtest.shlib","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/setup.ksh","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/zpool_replace_002_neg.ksh","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/spa.c","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","type":"MODIFIED","insertions":36,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/sys/spa.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/fs/zfs/sys/spa_impl.h","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":146,"sizeDeletions":-17},{"number":"12","revision":"a83d673d74d34fa985a18b3cae53d6f4e3e38397","parents":["0fc869936c6de9789e78eb9e102bd08d81162df3"],"ref":"refs/changes/14/5314/12","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1548797999,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1548804107,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1549480048,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549406461,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"comments":[{"file":"usr/src/cmd/fm/modules/common/zfs-diagnosis/zfs_de.c","line":911,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Just so I am clear, if zc_zerd_probe is an empty string at line 902, we always create a name at line 903, so by the time we get to this call, zc_serd_probe can never be an empty string?"},{"file":"usr/src/cmd/fm/modules/common/zfs-diagnosis/zfs_de.c","line":911,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"That\u0027s my understanding as well, yes."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/fm/modules/common/zfs-diagnosis/zfs_de.c","type":"MODIFIED","insertions":29,"deletions":-9},{"file":"usr/src/cmd/fm/modules/common/zfs-retire/zfs_retire.c","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/lib/libzfs/common/libzfs_pool.c","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"usr/src/test/zfs-tests/include/libtest.shlib","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/setup.ksh","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/zpool_replace_002_neg.ksh","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/spa.c","type":"MODIFIED","insertions":18,"deletions":-1},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","type":"MODIFIED","insertions":36,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/sys/spa.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/fs/zfs/sys/spa_impl.h","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":173,"sizeDeletions":-23},{"number":"13","revision":"a87c5e7bd098c232402535593a5959cea3545283","parents":["2bd653815361427c17538380a0ae62a9a27120ff"],"ref":"refs/changes/14/5314/13","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1549481367,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1548804107,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1549480048,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549406461,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/fm/modules/common/zfs-diagnosis/zfs_de.c","type":"MODIFIED","insertions":29,"deletions":-9},{"file":"usr/src/cmd/fm/modules/common/zfs-retire/zfs_retire.c","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/lib/libzfs/common/libzfs_pool.c","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"usr/src/test/zfs-tests/include/libtest.shlib","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/setup.ksh","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/zpool_replace_002_neg.ksh","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/spa.c","type":"MODIFIED","insertions":18,"deletions":-1},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","type":"MODIFIED","insertions":36,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/sys/spa.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/fs/zfs/sys/spa_impl.h","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":173,"sizeDeletions":-23},{"number":"14","revision":"f92efa0bbe42adba606c2523638d6238b731b3f1","parents":["2bd653815361427c17538380a0ae62a9a27120ff"],"ref":"refs/changes/14/5314/14","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1549481541,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1548804107,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1549480048,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549406461,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1549481678,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/fm/modules/common/zfs-diagnosis/zfs_de.c","type":"MODIFIED","insertions":29,"deletions":-9},{"file":"usr/src/cmd/fm/modules/common/zfs-retire/zfs_retire.c","type":"MODIFIED","insertions":15,"deletions":-6},{"file":"usr/src/lib/libzfs/common/libzfs_pool.c","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"usr/src/test/zfs-tests/include/libtest.shlib","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/test/zfs-tests/runfiles/smartos.run","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/setup.ksh","type":"MODIFIED","insertions":5,"deletions":-1},{"file":"usr/src/test/zfs-tests/tests/functional/cli_root/zpool_replace/zpool_replace_002_neg.ksh","type":"ADDED","insertions":51,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/spa.c","type":"MODIFIED","insertions":18,"deletions":-1},{"file":"usr/src/uts/common/fs/zfs/spa_misc.c","type":"MODIFIED","insertions":36,"deletions":0},{"file":"usr/src/uts/common/fs/zfs/sys/spa.h","type":"MODIFIED","insertions":4,"deletions":-1},{"file":"usr/src/uts/common/fs/zfs/sys/spa_impl.h","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":173,"sizeDeletions":-23}],"allReviewers":[{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}]}