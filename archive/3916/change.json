{"project":"joyent/moray-test-suite","branch":"master","topic":"MORAY-407","id":"I8105e673292120631ce41fffd85b13e59a60b2e3","number":"3916","subject":"MORAY-407 Moray extended identifier support (53-bit \"_id\") Reviewed by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e Approved by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e Approved by: David Pacheco \u003cdap@joyent.com\u003e","owner":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"url":"https://cr.joyent.us/3916","commitMessage":"MORAY-407 Moray extended identifier support (53-bit \"_id\")\nReviewed by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e\nApproved by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e\nApproved by: David Pacheco \u003cdap@joyent.com\u003e\n","createdOn":1525720497,"lastUpdated":1525994851,"open":false,"status":"MERGED","comments":[{"timestamp":1525720497,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 1."},{"timestamp":1525720500,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n(6 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1525720819,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 2."},{"timestamp":1525720825,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1525720964,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 3."},{"timestamp":1525720969,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1525733034,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 4."},{"timestamp":1525733040,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1525738803,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 4:\n\n(4 comments)"},{"timestamp":1525820149,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Topic set to MORAY-407"},{"timestamp":1525899950,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 5."},{"timestamp":1525899956,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1525899958,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 5:\n\n(4 comments)"},{"timestamp":1525903095,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1525909546,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1525913131,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 6: Integration-Approval+1"},{"timestamp":1525913512,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 6: Integration-Approval+1"},{"timestamp":1525994848,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 7: Commit message was updated."},{"timestamp":1525994851,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Joshua M. Clulow"}],"currentPatchSet":{"number":"7","revision":"e60df2e161f2d3f7d2b37a178cf92ccce9b7f4b3","parents":["968e6bdfe7b5a3f3f201ec7dadbb2bd108e6a54c"],"ref":"refs/changes/16/3916/7","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1525994848,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1525899956,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525909546,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1525913131,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1525913512,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1525994851,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"test/extended_id.test.js","type":"ADDED","insertions":789,"deletions":0},{"file":"test/objects.test.js","type":"MODIFIED","insertions":16,"deletions":-39}],"sizeInsertions":805,"sizeDeletions":-39},"patchSets":[{"number":"1","revision":"948039d53b8347edcf584d77733246da107bf77d","parents":["968e6bdfe7b5a3f3f201ec7dadbb2bd108e6a54c"],"ref":"refs/changes/16/3916/1","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1525720497,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1525720500,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/extended_id.test.js","line":44,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: trailing_comma"},{"file":"test/extended_id.test.js","line":112,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: undeclared identifier: b"},{"file":"test/extended_id.test.js","line":317,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: identifer err hides an identifier in a parent scope"},{"file":"test/extended_id.test.js","line":438,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: identifer err hides an identifier in a parent scope"},{"file":"test/extended_id.test.js","line":553,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: identifer err hides an identifier in a parent scope"},{"file":"test/extended_id.test.js","line":596,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: identifer err hides an identifier in a parent scope"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/extended_id.test.js","type":"ADDED","insertions":702,"deletions":0},{"file":"test/objects.test.js","type":"MODIFIED","insertions":0,"deletions":-45}],"sizeInsertions":702,"sizeDeletions":-45},{"number":"2","revision":"782d94e3f75f2b4c0c514a5065b99ff0ad2e0b98","parents":["968e6bdfe7b5a3f3f201ec7dadbb2bd108e6a54c"],"ref":"refs/changes/16/3916/2","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1525720819,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1525720825,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/extended_id.test.js","type":"ADDED","insertions":670,"deletions":0},{"file":"test/objects.test.js","type":"MODIFIED","insertions":0,"deletions":-45}],"sizeInsertions":670,"sizeDeletions":-45},{"number":"3","revision":"58ca9b7b6a0a76daf9cd092c1024bbe89b68e1aa","parents":["968e6bdfe7b5a3f3f201ec7dadbb2bd108e6a54c"],"ref":"refs/changes/16/3916/3","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1525720964,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1525720969,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/extended_id.test.js","type":"ADDED","insertions":673,"deletions":0},{"file":"test/objects.test.js","type":"MODIFIED","insertions":0,"deletions":-45}],"sizeInsertions":673,"sizeDeletions":-45},{"number":"4","revision":"f6a70b21f629d88a3ebffd025e6fd9f23c2c79cb","parents":["968e6bdfe7b5a3f3f201ec7dadbb2bd108e6a54c"],"ref":"refs/changes/16/3916/4","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1525733034,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1525733040,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/extended_id.test.js","line":113,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Instead of sorting below, I think that you should be able to pass an options object of:\n\n    {\n        sort: {\n            attribute: \u0027_id\u0027,\n            order: \u0027ASC\u0027\n        }\n    }"},{"file":"test/extended_id.test.js","line":113,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"I\u0027ve added the ability to use the database sort so that I can specifically test the ASC and DESC sort for \"_id\" and \"_idx\".  In the tests that don\u0027t test the sort order, though, I\u0027d like to keep post-sorting here -- I think it allows those tests to ignore broken sorting and focus on what they\u0027re really testing."},{"file":"test/extended_id.test.js","line":274,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Write this as:\n\n    function putOne() {\n\nSo that it\u0027s named?"},{"file":"test/extended_id.test.js","line":274,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Done"},{"file":"test/extended_id.test.js","line":647,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"\"so that there is only one more\""},{"file":"test/extended_id.test.js","line":647,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Done"},{"file":"test/objects.test.js","line":939,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"t.fail"},{"file":"test/objects.test.js","line":939,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/extended_id.test.js","type":"ADDED","insertions":732,"deletions":0},{"file":"test/objects.test.js","type":"MODIFIED","insertions":15,"deletions":-38}],"sizeInsertions":747,"sizeDeletions":-38},{"number":"5","revision":"c76843bce2f7b122a2ef09c0ae32a7232a4e3027","parents":["968e6bdfe7b5a3f3f201ec7dadbb2bd108e6a54c"],"ref":"refs/changes/16/3916/5","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1525899950,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1525899956,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/extended_id.test.js","type":"ADDED","insertions":789,"deletions":0},{"file":"test/objects.test.js","type":"MODIFIED","insertions":16,"deletions":-39}],"sizeInsertions":805,"sizeDeletions":-39},{"number":"6","revision":"8105e673292120631ce41fffd85b13e59a60b2e3","parents":["968e6bdfe7b5a3f3f201ec7dadbb2bd108e6a54c"],"ref":"refs/changes/16/3916/6","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1525903095,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1525913131,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525909546,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1525913512,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1525899956,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"test/extended_id.test.js","type":"ADDED","insertions":789,"deletions":0},{"file":"test/objects.test.js","type":"MODIFIED","insertions":16,"deletions":-39}],"sizeInsertions":805,"sizeDeletions":-39},{"number":"7","revision":"e60df2e161f2d3f7d2b37a178cf92ccce9b7f4b3","parents":["968e6bdfe7b5a3f3f201ec7dadbb2bd108e6a54c"],"ref":"refs/changes/16/3916/7","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1525994848,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1525913131,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1525909546,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1525913512,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1525994851,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1525899956,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"test/extended_id.test.js","type":"ADDED","insertions":789,"deletions":0},{"file":"test/objects.test.js","type":"MODIFIED","insertions":16,"deletions":-39}],"sizeInsertions":805,"sizeDeletions":-39}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}]}