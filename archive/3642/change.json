{"project":"joyent/illumos-joyent","branch":"master","id":"Ib82d93d42ad7765c7c72f2d4ef4db6f3cd74adb9","number":"3642","subject":"OS-6694 bhyve uart emulation does not handle 4 byte requests Reviewed by: John Levon \u003cjohn.levon@joyent.com\u003e Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Approved by: Jerry Jelinek \u003cjerry.je","owner":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"url":"https://cr.joyent.us/3642","commitMessage":"OS-6694 bhyve uart emulation does not handle 4 byte requests\nReviewed by: John Levon \u003cjohn.levon@joyent.com\u003e\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1521128247,"lastUpdated":1521224808,"open":false,"status":"MERGED","comments":[{"timestamp":1521128247,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Uploaded patch set 1."},{"timestamp":1521128729,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Uploaded patch set 2."},{"timestamp":1521129115,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1521129283,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2:\n\n(2 comments)"},{"timestamp":1521130220,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Uploaded patch set 3."},{"timestamp":1521130528,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Uploaded patch set 4."},{"timestamp":1521130560,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 2:\n\n(2 comments)\n\nPlease ignore patch set 3."},{"timestamp":1521130655,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1521130729,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1521130784,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1521223299,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 4:\n\nTest results at https://jira.joyent.us/browse/OS-6694?focusedCommentId\u003d186883\u0026page\u003dcom.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-186883"},{"timestamp":1521223995,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 4: Integration-Approval+1"},{"timestamp":1521224780,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 5: Commit message was updated."},{"timestamp":1521224794,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 6: Patch Set 5 was rebased"},{"timestamp":1521224808,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Mike Gerdts"}],"currentPatchSet":{"number":"6","revision":"37c3d9c0c52dc69f6c31123761894a1c85149f8c","parents":["d40d50dab4b6a89f1e840364a47eeaf2ff7c6195"],"ref":"refs/changes/42/3642/6","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1521224794,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521130655,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521130729,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521130784,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1521223995,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1521224808,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_lpc.c","type":"MODIFIED","insertions":19,"deletions":0}],"sizeInsertions":19,"sizeDeletions":0},"patchSets":[{"number":"1","revision":"7db9212751ed5cd9ae24b88444e2dfed9262733f","parents":["d8aa9216af8c1d23eaddba43fdd00ffe3f59da7a"],"ref":"refs/changes/42/3642/1","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1521128247,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_lpc.c","type":"MODIFIED","insertions":13,"deletions":0}],"sizeInsertions":13,"sizeDeletions":0},{"number":"2","revision":"bcfdd74a8cf7f5ed94d3d104183e068310b559aa","parents":["d8aa9216af8c1d23eaddba43fdd00ffe3f59da7a"],"ref":"refs/changes/42/3642/2","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1521128729,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521129115,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"comments":[{"file":"usr/src/cmd/bhyve/pci_lpc.c","line":5,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I\u0027ve been keeping our copyrights in a comment immediately following the one from upstream so they\u0027re less likely to clash. See \u0027vga.c\u0027 for example."},{"file":"usr/src/cmd/bhyve/pci_lpc.c","line":5,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Done"},{"file":"usr/src/cmd/bhyve/pci_lpc.c","line":179,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Maybe wrap it in an ifdef until it\u0027s upstreamed?"},{"file":"usr/src/cmd/bhyve/pci_lpc.c","line":179,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_lpc.c","type":"MODIFIED","insertions":14,"deletions":0}],"sizeInsertions":14,"sizeDeletions":0},{"number":"3","revision":"51a5aa6d1c2dddcc1a8d74c6011dfc929e9fd1ae","parents":["d8aa9216af8c1d23eaddba43fdd00ffe3f59da7a"],"ref":"refs/changes/42/3642/3","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1521130220,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/bhyve/Makefile.com","type":"MODIFIED","insertions":9,"deletions":-1},{"file":"usr/src/cmd/bhyve/bhyverun.c","type":"MODIFIED","insertions":1,"deletions":-5},{"file":"usr/src/cmd/bhyve/mevent.c","type":"MODIFIED","insertions":202,"deletions":-1},{"file":"usr/src/cmd/bhyve/mevent_test.c","type":"MODIFIED","insertions":22,"deletions":-2},{"file":"usr/src/cmd/bhyve/test/Makefile","type":"ADDED","insertions":19,"deletions":0},{"file":"usr/src/cmd/bhyve/test/Makefile.com","type":"ADDED","insertions":56,"deletions":0},{"file":"usr/src/cmd/bhyve/test/Makefile.subdirs","type":"ADDED","insertions":29,"deletions":0},{"file":"usr/src/cmd/bhyve/test/Makefile.targ","type":"ADDED","insertions":59,"deletions":0},{"file":"usr/src/cmd/bhyve/test/scripts/Makefile","type":"ADDED","insertions":28,"deletions":0},{"file":"usr/src/cmd/bhyve/test/scripts/bhyvetest.ksh","type":"ADDED","insertions":242,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/Makefile","type":"ADDED","insertions":18,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/Makefile","type":"ADDED","insertions":32,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/lists.delete.c","type":"ADDED","insertions":172,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/mevent.c","type":"ADDED","insertions":57,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/read.disable.c","type":"ADDED","insertions":163,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/read.pause.c","type":"ADDED","insertions":152,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/read.requeue.c","type":"ADDED","insertions":108,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/testlib.c","type":"ADDED","insertions":72,"deletions":0},{"file":"usr/src/cmd/bhyve/test/tst/mevent/testlib.h","type":"ADDED","insertions":89,"deletions":0},{"file":"usr/src/cmd/bhyve/uart_emul.c","type":"MODIFIED","insertions":4,"deletions":-91}],"sizeInsertions":1534,"sizeDeletions":-100},{"number":"4","revision":"b82d93d42ad7765c7c72f2d4ef4db6f3cd74adb9","parents":["d8aa9216af8c1d23eaddba43fdd00ffe3f59da7a"],"ref":"refs/changes/42/3642/4","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1521130528,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521130784,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521130729,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1521223995,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521130655,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_lpc.c","type":"MODIFIED","insertions":19,"deletions":0}],"sizeInsertions":19,"sizeDeletions":0},{"number":"5","revision":"21716a6a3418a82b2f2ac3504b4f4c87a1c551f4","parents":["d8aa9216af8c1d23eaddba43fdd00ffe3f59da7a"],"ref":"refs/changes/42/3642/5","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1521224780,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521130784,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521130729,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1521223995,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521130655,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_lpc.c","type":"MODIFIED","insertions":19,"deletions":0}],"sizeInsertions":19,"sizeDeletions":0},{"number":"6","revision":"37c3d9c0c52dc69f6c31123761894a1c85149f8c","parents":["d40d50dab4b6a89f1e840364a47eeaf2ff7c6195"],"ref":"refs/changes/42/3642/6","uploader":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"createdOn":1521224794,"author":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521130784,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521130729,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1521223995,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"SUBM","value":"1","grantedOn":1521224808,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521130655,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/cmd/bhyve/pci_lpc.c","type":"MODIFIED","insertions":19,"deletions":0}],"sizeInsertions":19,"sizeDeletions":0}],"allReviewers":[{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}]}