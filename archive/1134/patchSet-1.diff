From 59d8a1d01dfaeb0b2722cd296f7964e11519d149 Mon Sep 17 00:00:00 2001
From: Patrick Mooney <pmooney@pfmooney.com>
Date: Thu, 15 Dec 2016 21:24:54 +0000
Subject: [PATCH] OS-5850 kmdb_fault() continuously prints that it's trying to
 enter safe mode

---
 usr/src/cmd/mdb/common/kmdb/kmdb_fault.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/usr/src/cmd/mdb/common/kmdb/kmdb_fault.c b/usr/src/cmd/mdb/common/kmdb/kmdb_fault.c
index 06f7c2927f..83589154ea 100644
--- a/usr/src/cmd/mdb/common/kmdb/kmdb_fault.c
+++ b/usr/src/cmd/mdb/common/kmdb/kmdb_fault.c
@@ -44,7 +44,8 @@
 void
 kmdb_fault(kreg_t tt, kreg_t pc, kreg_t sp, int cpuid)
 {
-	int debug_self_confirm = 0, try;
+	int debug_self_confirm = 0;
+	volatile int try;
 	jmp_buf pcb, *old;
 	char c;
 
-- 
2.21.0

