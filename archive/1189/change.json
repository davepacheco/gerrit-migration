{"project":"joyent/node-cueball","branch":"master","id":"I02639abc505884f6e02cee315b37f6fc0213a808","number":"1189","subject":"joyent/node-cueball#66 want claim() to return in same event loop run if possible","owner":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"url":"https://cr.joyent.us/1189","commitMessage":"joyent/node-cueball#66 want claim() to return in same event loop run if possible\n","createdOn":1482971800,"lastUpdated":1483580237,"open":false,"status":"ABANDONED","comments":[{"timestamp":1482971800,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 1."},{"timestamp":1482971891,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1483574785,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\nI don\u0027t think this is a great change to make.  I think it\u0027s probably pretty easy for callers to get this wrong, and it\u0027s not worth saving 5ms to me.\n\nI\u0027d also be interested to know why a setImmediate() introduces a 5ms delay.  That\u0027s why more than I\u0027d expect.  I wrote a dumb microbenchmark and found the cost to be closer to 50us:\nhttps://gist.github.com/davepacheco/ceb771b591d86310fbeae2fbfba42398"},{"timestamp":1483575254,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 1:\n\n\u003e I don\u0027t think this is a great change to make.  I think it\u0027s\n \u003e probably pretty easy for callers to get this wrong, and it\u0027s not\n \u003e worth saving 5ms to me.\n \u003e \n \u003e I\u0027d also be interested to know why a setImmediate() introduces a\n \u003e 5ms delay.  That\u0027s why more than I\u0027d expect.  I wrote a dumb\n \u003e microbenchmark and found the cost to be closer to 50us:\n \u003e https://gist.github.com/davepacheco/ceb771b591d86310fbeae2fbfba42398\n\nIt\u0027s only ~5ms under load in a busy process -- and not on every request, either, it just moves the mean request latency up by about that much, it seems. I got these numbers off a stress test made for measuring http agent performance, which is inside the  keepalive-agent  npm package."},{"timestamp":1483580237,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Abandoned"}],"currentPatchSet":{"number":"1","revision":"02639abc505884f6e02cee315b37f6fc0213a808","parents":["9fb4d7eb8bb8dbb87c79bf71825413ace6bb0969"],"ref":"refs/changes/89/1189/1","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1482971800,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482971891,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":9,"deletions":0}],"sizeInsertions":9,"sizeDeletions":0},"patchSets":[{"number":"1","revision":"02639abc505884f6e02cee315b37f6fc0213a808","parents":["9fb4d7eb8bb8dbb87c79bf71825413ace6bb0969"],"ref":"refs/changes/89/1189/1","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1482971800,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482971891,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/connection-fsm.js","type":"MODIFIED","insertions":9,"deletions":0}],"sizeInsertions":9,"sizeDeletions":0}],"allReviewers":[{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},{"name":"Joyent Automation","username":"joyent-automation"}]}