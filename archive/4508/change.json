{"project":"joyent/smartos-live","branch":"master","id":"Ie73b614b7c09d0dc61fa28267451d4026db748d1","number":"4508","subject":"OS-7075 platform needs to be rackaware Reviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e Reviewed by: Jason King \u003cjason.king@joyent.com\u003e Approved by: Michael Zeller \u003cmike.zeller@joyent.com\u003e","owner":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"url":"https://cr.joyent.us/4508","commitMessage":"OS-7075 platform needs to be rackaware\nReviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e\nReviewed by: Jason King \u003cjason.king@joyent.com\u003e\nApproved by: Michael Zeller \u003cmike.zeller@joyent.com\u003e\n","createdOn":1531414674,"lastUpdated":1531937748,"open":false,"status":"MERGED","comments":[{"timestamp":1531414674,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 1."},{"timestamp":1531414720,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1531423594,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 2: Commit message was updated."},{"timestamp":1531428828,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 2: Code-Review+1\n\n(1 comment)\n\nOne nit."},{"timestamp":1531428905,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1531447838,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 3."},{"timestamp":1531447885,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1531448478,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1531453117,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1531490369,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Patch Set 3:\n\n(2 comments)"},{"timestamp":1531932036,"reviewer":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1531937548,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1531937555,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1531937662,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1531937701,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 5: Patch Set 4 was rebased."},{"timestamp":1531937740,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Rui"},{"timestamp":1531937748,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5:\n\n\"make check\" passed ok"}],"currentPatchSet":{"number":"5","revision":"e73b614b7c09d0dc61fa28267451d4026db748d1","parents":["4ef75f64406c4e95c2668f4bf256f5e8a86cb2b8"],"ref":"refs/changes/08/4508/5","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1531937701,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1531447885,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1531448478,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1531932036,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1531937548,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1531937555,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"SUBM","value":"1","grantedOn":1531937740,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"overlay/generic/lib/svc/method/net-physical","type":"MODIFIED","insertions":29,"deletions":-14},{"file":"src/node_modules/net-boot-config.js","type":"MODIFIED","insertions":24,"deletions":-4},{"file":"src/sysinfo","type":"MODIFIED","insertions":11,"deletions":0}],"sizeInsertions":64,"sizeDeletions":-18},"patchSets":[{"number":"1","revision":"5b76ef37768dba60d02316ff91a10531653d0162","parents":["6d232f498952cf009c7dbd046d99cf65acf6ef08"],"ref":"refs/changes/08/4508/1","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1531414674,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1531414720,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"overlay/generic/lib/svc/method/net-physical","type":"MODIFIED","insertions":29,"deletions":-14},{"file":"src/node_modules/net-boot-config.js","type":"MODIFIED","insertions":24,"deletions":-4},{"file":"src/sysinfo","type":"MODIFIED","insertions":11,"deletions":0}],"sizeInsertions":64,"sizeDeletions":-18},{"number":"2","revision":"6ef3f59d2094447bd95bcfaabf7b69ced1ad1888","parents":["6d232f498952cf009c7dbd046d99cf65acf6ef08"],"ref":"refs/changes/08/4508/2","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1531423594,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1531414720,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1531428905,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1531428828,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"comments":[{"file":"src/node_modules/net-boot-config.js","line":181,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"close-quote"},{"file":"src/node_modules/net-boot-config.js","line":181,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"overlay/generic/lib/svc/method/net-physical","type":"MODIFIED","insertions":29,"deletions":-14},{"file":"src/node_modules/net-boot-config.js","type":"MODIFIED","insertions":24,"deletions":-4},{"file":"src/sysinfo","type":"MODIFIED","insertions":11,"deletions":0}],"sizeInsertions":64,"sizeDeletions":-18},{"number":"3","revision":"c73df54b37c890cfaa18f1585aba2acb854a3e17","parents":["6d232f498952cf009c7dbd046d99cf65acf6ef08"],"ref":"refs/changes/08/4508/3","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1531447838,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1531447885,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1531937555,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1531937548,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1531932036,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1531448478,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"comments":[{"file":"overlay/generic/lib/svc/method/net-physical","line":541,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"holy evals batman :)\n\n 1. After looking at this for a few seconds I kind of find it hard to follow.\n2. Is there an alternative to using so many evals we could go with instead?"},{"file":"overlay/generic/lib/svc/method/net-physical","line":541,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"say admin_tag is \"foo\" and the value of \"CONFIG_foo_ip\" is 1.1.1.1\n\nWe are setting \"CONFIG_admin_ip\" to the result of $CONFIG_foo_ip.\n\nWithout eval the value of CONFIG_admin_ip would be literally:\n$CONFIG_foo_ip\n\nWith eval the value of CONFIG_admin_ip will be:\n1.1.1.1\n\nI\u0027m open to alternatives, but I can\u0027t think of a more elegant way to do this type of thing in bash.\n\nIf you poke around a bit in sysinfo and the rest of network/physical, this practice is fairly common place."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"overlay/generic/lib/svc/method/net-physical","type":"MODIFIED","insertions":29,"deletions":-14},{"file":"src/node_modules/net-boot-config.js","type":"MODIFIED","insertions":24,"deletions":-4},{"file":"src/sysinfo","type":"MODIFIED","insertions":11,"deletions":0}],"sizeInsertions":64,"sizeDeletions":-18},{"number":"4","revision":"2b5a8a0c686adb6b8ca7f4a2f8c6b1a042bdd4fe","parents":["6d232f498952cf009c7dbd046d99cf65acf6ef08"],"ref":"refs/changes/08/4508/4","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1531937662,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1531447885,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1531937555,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1531937548,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1531932036,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1531448478,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"overlay/generic/lib/svc/method/net-physical","type":"MODIFIED","insertions":29,"deletions":-14},{"file":"src/node_modules/net-boot-config.js","type":"MODIFIED","insertions":24,"deletions":-4},{"file":"src/sysinfo","type":"MODIFIED","insertions":11,"deletions":0}],"sizeInsertions":64,"sizeDeletions":-18},{"number":"5","revision":"e73b614b7c09d0dc61fa28267451d4026db748d1","parents":["4ef75f64406c4e95c2668f4bf256f5e8a86cb2b8"],"ref":"refs/changes/08/4508/5","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1531937701,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1531447885,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1531937555,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1531937548,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1531932036,"by":{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1531448478,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"SUBM","value":"1","grantedOn":1531937740,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"overlay/generic/lib/svc/method/net-physical","type":"MODIFIED","insertions":29,"deletions":-14},{"file":"src/node_modules/net-boot-config.js","type":"MODIFIED","insertions":24,"deletions":-4},{"file":"src/sysinfo","type":"MODIFIED","insertions":11,"deletions":0}],"sizeInsertions":64,"sizeDeletions":-18}],"allReviewers":[{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Jason King","email":"jason.king@joyent.com","username":"jasonbking"},{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}]}