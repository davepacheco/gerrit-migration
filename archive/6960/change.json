{"project":"joyent/smartos-live","branch":"master","id":"I9a2273a76f29d56264620263f2adce74c71807cf","number":"6960","subject":"TRITON-1910 vminfod timeout when updating ram on bhyve vm Reviewed by: Dave Eddy \u003cdave.eddy@joyent.com\u003e Reviewed by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e Approved by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e","owner":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"url":"https://cr.joyent.us/6960","commitMessage":"TRITON-1910 vminfod timeout when updating ram on bhyve vm\nReviewed by: Dave Eddy \u003cdave.eddy@joyent.com\u003e\nReviewed by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e\nApproved by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e\n","createdOn":1570479049,"lastUpdated":1570818957,"open":false,"status":"MERGED","comments":[{"timestamp":1570479049,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 1."},{"timestamp":1570479054,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit d9af09c859bd42c3596a03370d869d3b6a542e7e\n    \n    TRITON-1910 vminfod timeout when updating ram on bhyve vm"},{"timestamp":1570479150,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1570558696,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 1: Code-Review+1\n\nThe code itself to me looks good.  Have you ran the full test suite to verify that this doesn\u0027t break any other VM types when modifying ram? Could you also possibly make a test for this case specifically (the case you outline in the ticket) to make sure we don\u0027t accidentally break this in the future."},{"timestamp":1570571995,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 2."},{"timestamp":1570571998,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit fabd0754320ea2fd1e6802b422b7fba833ceefd7\n    \n    TRITON-1910 vminfod timeout when updating ram on bhyve vm"},{"timestamp":1570572088,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1570572316,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\nRebased.\n\nJust ran the full test suite, all looks good:\n\n  #  TEST COMPLETE IN 5598 SECONDS, SUMMARY:\n  #\n  # PASS: 5145 / 5145\n\n\nI did add a specific test case for TRITON-1910 in \u0027test-update-bhyve.js\u0027, which does otherwise fail (vminfod timeout) before the patch to VM.js is applied."},{"timestamp":1570817308,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 3."},{"timestamp":1570817310,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 6bfad96fd3d8615d8ec287b1fa9957929d04425c\n    \n    TRITON-1910 vminfod timeout when updating ram on bhyve vm"},{"timestamp":1570818742,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1570818944,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1570818957,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Todd Whiteman"}],"currentPatchSet":{"number":"4","revision":"9a2273a76f29d56264620263f2adce74c71807cf","parents":["ec5d00b245258c6cfd72c482a87f06030da183dc"],"ref":"refs/changes/60/6960/4","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1570818944,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1570479150,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570558696,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570818742,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1570818742,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"SUBM","value":"1","grantedOn":1570818957,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"src/vm/tests/test-update-bhyve.js","type":"MODIFIED","insertions":51,"deletions":-3}],"sizeInsertions":59,"sizeDeletions":-6},"patchSets":[{"number":"1","revision":"e42b8d0505a819630c1220d17161257e20149993","parents":["cd7639473bdbbdbc55ba6de3f364f9af0687da63"],"ref":"refs/changes/60/6960/1","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1570479049,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1570479150,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570558696,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"src/vm/tests/test-update-bhyve.js","type":"MODIFIED","insertions":51,"deletions":-3}],"sizeInsertions":59,"sizeDeletions":-6},{"number":"2","revision":"6f1a3f25b3e4eeb6eb64b59014a41635ab98fb42","parents":["cff96ea00326835ea5f656d5e6f4f34b16014c0c"],"ref":"refs/changes/60/6960/2","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1570571995,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1570572088,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"src/vm/tests/test-update-bhyve.js","type":"MODIFIED","insertions":51,"deletions":-3}],"sizeInsertions":59,"sizeDeletions":-6},{"number":"3","revision":"57fdf08d053a43fee79b97038bbe88531bb1b29f","parents":["ec5d00b245258c6cfd72c482a87f06030da183dc"],"ref":"refs/changes/60/6960/3","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1570817308,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1570479150,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570558696,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570818742,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1570818742,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"src/vm/tests/test-update-bhyve.js","type":"MODIFIED","insertions":51,"deletions":-3}],"sizeInsertions":59,"sizeDeletions":-6},{"number":"4","revision":"9a2273a76f29d56264620263f2adce74c71807cf","parents":["ec5d00b245258c6cfd72c482a87f06030da183dc"],"ref":"refs/changes/60/6960/4","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1570818944,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1570479150,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570558696,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"SUBM","value":"1","grantedOn":1570818957,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1570818742,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1570818742,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"src/vm/tests/test-update-bhyve.js","type":"MODIFIED","insertions":51,"deletions":-3}],"sizeInsertions":59,"sizeDeletions":-6}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}]}