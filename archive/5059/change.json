{"project":"joyent/smartos-live","branch":"master","id":"I7c25563b5938d493b4ef0bcc64b23c2cceb87188","number":"5059","subject":"OS-7370 smartos-live should support building the strap cache OS-7377 measure_terminal.c needs GCC fixes Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Approved by: Robert Mustacchi \u003crm@joyent.com\u003e","owner":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"url":"https://cr.joyent.us/5059","commitMessage":"OS-7370 smartos-live should support building the strap cache\nOS-7377 measure_terminal.c needs GCC fixes\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nApproved by: Robert Mustacchi \u003crm@joyent.com\u003e\n","createdOn":1542207889,"lastUpdated":1542803761,"open":false,"status":"MERGED","comments":[{"timestamp":1542207889,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 1."},{"timestamp":1542207891,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 263fa20fb3a42f4316f15b7a0fdd111a2dde6f3d\n    \n    m\n    \n    commit ea2603c914b33b0d1a1d96a7b11af8a301ef923d\n    \n    OS-XXXX need target to build proto.strap cache\n    \n    commit 0119aa5f96283954fc80e767c075928373152955\n    \n    bump root size for gcc7"},{"timestamp":1542207910,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1: Code-Review-1"},{"timestamp":1542207937,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1542314486,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 2."},{"timestamp":1542314536,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1542373493,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 2: -Code-Review"},{"timestamp":1542395769,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2:\n\n(3 comments)"},{"timestamp":1542558186,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 3."},{"timestamp":1542558238,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1542564407,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 4."},{"timestamp":1542564459,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1542663007,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1542738847,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4: Integration-Approval+1"},{"timestamp":1542795753,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1542803706,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 6: Patch Set 5 was rebased"},{"timestamp":1542803756,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by John Levon"},{"timestamp":1542803761,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6:\n\n\"make check\" passed ok"}],"currentPatchSet":{"number":"6","revision":"ed6c20fdaae08db70ac5bbf60ba6c3d2e53dc6a2","parents":["3c1aa42777928dc08c97839aefbb5fbbad7f0228"],"ref":"refs/changes/59/5059/6","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1542803706,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1542564459,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1542663007,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1542738847,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1542803756,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":8,"deletions":0},{"file":"src/measure_terminal.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"tools/build_strap","type":"MODIFIED","insertions":66,"deletions":-6}],"sizeInsertions":77,"sizeDeletions":-9},"patchSets":[{"number":"1","revision":"d9322a9e5d0395d6ba4df93efd6a75525bdd46f2","parents":["e352e7a16607cd868650f7593022e99509998f22"],"ref":"refs/changes/59/5059/1","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1542207889,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1542207937,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1542207910,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":4,"deletions":0},{"file":"tools/build_live","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tools/build_strap","type":"MODIFIED","insertions":64,"deletions":-6}],"sizeInsertions":69,"sizeDeletions":-7},{"number":"2","revision":"b28d0aad968c4411f912e40ad98030c530632ab9","parents":["87aa89bd1fa57bc910461ca672d3a4b856ed448c"],"ref":"refs/changes/59/5059/2","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1542314486,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1542314536,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"tools/build_strap","line":158,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Unchecked exit status? If we get EPERM should probably not continue."},{"file":"tools/build_strap","line":163,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Unchecked exit status? If we get EPERM should probably not continue."},{"file":"tools/build_strap","line":168,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Can you replace this with fatal?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":8,"deletions":0},{"file":"src/measure_terminal.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"tools/build_strap","type":"MODIFIED","insertions":66,"deletions":-6}],"sizeInsertions":77,"sizeDeletions":-9},{"number":"3","revision":"07856c2c9b0c07a29e9ef579d69f98dfae99a7da","parents":["87aa89bd1fa57bc910461ca672d3a4b856ed448c"],"ref":"refs/changes/59/5059/3","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1542558186,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1542558238,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":8,"deletions":0},{"file":"src/measure_terminal.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"tools/build_strap","type":"MODIFIED","insertions":65,"deletions":-6}],"sizeInsertions":76,"sizeDeletions":-9},{"number":"4","revision":"092734385444b131a5984fcdd5af61af24c9f9cd","parents":["87aa89bd1fa57bc910461ca672d3a4b856ed448c"],"ref":"refs/changes/59/5059/4","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1542564407,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1542663007,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1542738847,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1542564459,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":8,"deletions":0},{"file":"src/measure_terminal.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"tools/build_strap","type":"MODIFIED","insertions":66,"deletions":-6}],"sizeInsertions":77,"sizeDeletions":-9},{"number":"5","revision":"7c25563b5938d493b4ef0bcc64b23c2cceb87188","parents":["87aa89bd1fa57bc910461ca672d3a4b856ed448c"],"ref":"refs/changes/59/5059/5","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1542795753,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1542663007,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1542738847,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1542564459,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":8,"deletions":0},{"file":"src/measure_terminal.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"tools/build_strap","type":"MODIFIED","insertions":66,"deletions":-6}],"sizeInsertions":77,"sizeDeletions":-9},{"number":"6","revision":"ed6c20fdaae08db70ac5bbf60ba6c3d2e53dc6a2","parents":["3c1aa42777928dc08c97839aefbb5fbbad7f0228"],"ref":"refs/changes/59/5059/6","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1542803706,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1542663007,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1542738847,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1542564459,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1542803756,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":8,"deletions":0},{"file":"src/measure_terminal.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"tools/build_strap","type":"MODIFIED","insertions":66,"deletions":-6}],"sizeInsertions":77,"sizeDeletions":-9}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}]}