{"project":"joyent/illumos-joyent","branch":"master","id":"I005d090d5d39829784302a3c8574b81b88fc69d0","number":"4643","subject":"OS-5852 kmdb tortures via single-step miscellaneous trap Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Approved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e","owner":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"url":"https://cr.joyent.us/4643","commitMessage":"OS-5852 kmdb tortures via single-step miscellaneous trap\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1533651953,"lastUpdated":1534341186,"open":false,"status":"MERGED","comments":[{"timestamp":1533651953,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 1."},{"timestamp":1533651955,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 969e335f7be2b531fc7b5469a1d1cd1b3e131bdd\n    \n    m\n    \n    commit be8aa258b51977d7920c49202eefa012a3b298b6\n    \n    m\n    \n    commit a22728b883ba11a04675aa1701baf27c21000efa\n    \n    m"},{"timestamp":1533652024,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1: Integration-Approval-1\n\nnot yet"},{"timestamp":1533736984,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1: -Integration-Approval"},{"timestamp":1534194151,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1534238807,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 2."},{"timestamp":1534238818,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 3270e8991c0d3e860c796c1543b5b10f78cc2400\n    \n    m"},{"timestamp":1534238921,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1534244233,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 3: Patch Set 2 was rebased."},{"timestamp":1534244248,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 60bb01c2f4cbc2802847cea261979592984be6ac\n    \n    m\n    \n    commit 346e17b707f82496dc4e0aebc398cb7dfb35c4b5\n    \n    m\n    \n    commit e67415f2d4f1374bf6fe5cb582ba48ae70c3f0cf\n    \n    m\n    \n    commit 6eab862023962b394b940059a57f25620d9a95c8\n    \n    m"},{"timestamp":1534260294,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1534287042,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 4: Patch Set 3 was rebased"},{"timestamp":1534340035,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1"},{"timestamp":1534341103,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 5: Patch Set 4 was rebased"},{"timestamp":1534341152,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1534341155,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit a4adc7f6dcdd04528c128c4811f5e57d214397bf\n    \n    m\n    \n    commit 82a8fdc693b704e660f30cc599fc56c7fe02bcec\n    \n    m\n    \n    commit f58dabaffaf77b4e4f99db6e6dad441c98a77c18\n    \n    m\n    \n    commit 3e167e3dab22d2541efca15a1e4ced4dff3b0748\n    \n    m"},{"timestamp":1534341186,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by John Levon"}],"currentPatchSet":{"number":"6","revision":"005d090d5d39829784302a3c8574b81b88fc69d0","parents":["c6493650bb8171db31ebebfa92d9a19dd0fe3e82"],"ref":"refs/changes/43/4643/6","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1534341152,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534260294,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534340035,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1534340035,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1534341186,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/cmd/mdb/common/kmdb/kaif_start.c","type":"MODIFIED","insertions":25,"deletions":-8},{"file":"usr/src/uts/intel/amd64/sys/kdi_regs.h","type":"MODIFIED","insertions":49,"deletions":0},{"file":"usr/src/uts/intel/kdi/kdi_asm.s","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/intel/kdi/kdi_idt.c","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":83,"sizeDeletions":-8},"patchSets":[{"number":"1","revision":"d06e1558494f434a9d1ca14fa0d90d60cc93e554","parents":["cbea82cfd0c1061956ed58fe8f73c1c64f8c2291"],"ref":"refs/changes/43/4643/1","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1533651953,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/intel/amd64/sys/kdi_regs.h","line":84,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Probably worth adding a comment that this has to be kept in sync with wherever the definition for the type of krs_gregs is."},{"file":"usr/src/uts/intel/amd64/sys/kdi_regs.h","line":84,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Done"},{"file":"usr/src/uts/intel/kdi/kdi_asm.s","line":431,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Do we need to increase KDI_NCRUMBS?"},{"file":"usr/src/uts/intel/kdi/kdi_asm.s","line":431,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"No: that is the size of the array indexed by ADVANCE_CRUMB_POINTER. This is just filling out the particular entry we\u0027re at a little bit more. \"ADD_CRUMB\" is a confusing macro name in this respect."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/common/kmdb/kaif_start.c","type":"MODIFIED","insertions":25,"deletions":-8},{"file":"usr/src/uts/intel/amd64/sys/kdi_regs.h","type":"MODIFIED","insertions":47,"deletions":0},{"file":"usr/src/uts/intel/kdi/kdi_asm.s","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/intel/kdi/kdi_idt.c","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":81,"sizeDeletions":-8},{"number":"2","revision":"21b7d01202e842c14fb7f195718d5b0e59105519","parents":["185a422e63f55e51465370d497ca1c1a13366df4"],"ref":"refs/changes/43/4643/2","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1534238807,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/common/kmdb/kaif_start.c","type":"MODIFIED","insertions":25,"deletions":-8},{"file":"usr/src/uts/intel/amd64/sys/kdi_regs.h","type":"MODIFIED","insertions":49,"deletions":0},{"file":"usr/src/uts/intel/kdi/kdi_asm.s","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/intel/kdi/kdi_idt.c","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":83,"sizeDeletions":-8},{"number":"3","revision":"c530e87983596b546330b15a8a942f6db6756b73","parents":["b50884db8d84f652919a0d7b6fd6dd3d28fb035e"],"ref":"refs/changes/43/4643/3","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1534244233,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534260294,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/common/kmdb/kaif_start.c","type":"MODIFIED","insertions":25,"deletions":-8},{"file":"usr/src/uts/intel/amd64/sys/kdi_regs.h","type":"MODIFIED","insertions":49,"deletions":0},{"file":"usr/src/uts/intel/kdi/kdi_asm.s","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/intel/kdi/kdi_idt.c","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":83,"sizeDeletions":-8},{"number":"4","revision":"7753abb72b771bf7b71641bcebb97747ebf78d2c","parents":["4f3af6ac0e7bc423c116341136c1757ff948a506"],"ref":"refs/changes/43/4643/4","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1534287042,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534260294,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534340035,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1534340035,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/common/kmdb/kaif_start.c","type":"MODIFIED","insertions":25,"deletions":-8},{"file":"usr/src/uts/intel/amd64/sys/kdi_regs.h","type":"MODIFIED","insertions":49,"deletions":0},{"file":"usr/src/uts/intel/kdi/kdi_asm.s","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/intel/kdi/kdi_idt.c","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":83,"sizeDeletions":-8},{"number":"5","revision":"7a20b963a2ca4eb6f6afa1dac183f373f9444969","parents":["c6493650bb8171db31ebebfa92d9a19dd0fe3e82"],"ref":"refs/changes/43/4643/5","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1534341103,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534260294,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534340035,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1534340035,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/mdb/common/kmdb/kaif_start.c","type":"MODIFIED","insertions":25,"deletions":-8},{"file":"usr/src/uts/intel/amd64/sys/kdi_regs.h","type":"MODIFIED","insertions":49,"deletions":0},{"file":"usr/src/uts/intel/kdi/kdi_asm.s","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/intel/kdi/kdi_idt.c","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":83,"sizeDeletions":-8},{"number":"6","revision":"005d090d5d39829784302a3c8574b81b88fc69d0","parents":["c6493650bb8171db31ebebfa92d9a19dd0fe3e82"],"ref":"refs/changes/43/4643/6","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1534341152,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534260294,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534340035,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1534340035,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1534341186,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/cmd/mdb/common/kmdb/kaif_start.c","type":"MODIFIED","insertions":25,"deletions":-8},{"file":"usr/src/uts/intel/amd64/sys/kdi_regs.h","type":"MODIFIED","insertions":49,"deletions":0},{"file":"usr/src/uts/intel/kdi/kdi_asm.s","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/intel/kdi/kdi_idt.c","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":83,"sizeDeletions":-8}],"allReviewers":[{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}]}