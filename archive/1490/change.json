{"project":"joyent/sdcadm","branch":"master","id":"I77f82d4536b1293d98bf8e0216409d6c9746d48e","number":"1490","subject":"TOOLS-1651 sdcadm create should support agent instances Reviewed by: Trent Mick \u003ctrent.mick@joyent.com\u003e","owner":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"url":"https://cr.joyent.us/1490","commitMessage":"TOOLS-1651 sdcadm create should support agent instances\nReviewed by: Trent Mick \u003ctrent.mick@joyent.com\u003e\n","createdOn":1486733386,"lastUpdated":1487616277,"open":false,"status":"MERGED","comments":[{"timestamp":1486733386,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 1."},{"timestamp":1486733438,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1486758383,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\n(5 comments)\n\nThis looks like it isn\u0027t working for dockerlogger.\nFirst I deleted my dockerlogger instance from SAPI and:\n\n```\n[root@headnode (coal) ~]# sdcadm create dockerlogger -s headnode\nUsing channel dev\nsdcadm create: error (Update): do not support the following changes:\n    {\"type\":\"create\",\"service\":\"dockerlogger\",\"image\":\"7630d856-f1fa-4481-ba1e-bb730a7c201f\"}\n[root@headnode (coal) ~]# sdcadm experimental create dockerlogger -s headnode\nUsing channel dev\nsdcadm experimental create: error (Update): do not support the following changes:\n    {\"type\":\"create\",\"service\":\"dockerlogger\",\"image\":\"7630d856-f1fa-4481-ba1e-bb730a7c201f\"}\n```\n\nThen I tried amon-agent. First remove it:\n\n```\nsdc-cnapi /servers/$(sysinfo | json UUID) \\\n    | json -H -j agents server_uuid -e \u0027this.agents \u003d this.agents.filter(function (a) { return a.name !\u003d\u003d \"amon-agent\" });\u0027 \\\n    | sdc-cnapi /servers/$(sysinfo | json UUID) -X POST -d@-Then I tried with amon-agent (on my COAL headnode). First remove it:\n\nsdcadm insts amon-agent -Ho instance | while read uuid; do sdc-sapi /instances/$uuid -X DELETE; done\n```\n\nThen create it:\n\n```\n[root@headnode (coal) ~]# sdcadm create amon-agent -s $(sysinfo | json UUID)\nUsing channel dev\n\nThis command will make the following changes:\n    download 1 image (6 MiB):\n        image 1592b9a5-9308-4a15-8325-156ff00586b2\n            (amon-agent@1.0.1)\n    create a new instance of \"amon-agent\" service\n        on server 564d68f7-1607-3add-5b72-917902f817a8 (headnode)\n        using image 1592b9a5-9308-4a15-8325-156ff00586b2 (amon-agent@1.0.1)\n\nWould you like to continue? [y/N] y\n\nCreate work dir: /var/sdcadm/updates/20170210T202356Z\nDownloading image 1592b9a5-9308-4a15-8325-156ff00586b2\n    (amon-agent@1.0.1)\nImported image 1592b9a5-9308-4a15-8325-156ff00586b2\n    (amon-agent@1.0.1)\nVerifying that CNAPI is able to run agent updates\n...ing instance of amon-agent [\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003e] 100%        1\nsuccessfully created instance of agent amon-agent.\nCreated successfully (elapsed 28s).\n[root@headnode (coal) ~]# sdcadm insts amon-agent\nINSTANCE                              SERVICE     HOSTNAME  VERSION  ALIAS\n33d08fe2-5979-4063-af06-e113750c32bd  amon-agent  headnode  1.0.1    -\n```\n\nThat seemed to work. :)"},{"timestamp":1487089242,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\n(5 comments)\n\nLooks like you\u0027ve tried to create the dockerlogger instance using hostname instead of server UUID, which is not supported until TOOLS-1682 is implemented. It\u0027s working fine with server uuid:\n\n        [root@headnode (coal) ~]# sdcadm create cmon-agent -s 564d457a-36e6-9fe8-b667-9804b3de2053\n        Using channel dev\n\n        This command will make the following changes:\n            create a new instance of \"cmon-agent\" service\n                on server 564d457a-36e6-9fe8-b667-9804b3de2053 (foolkiller)\n                using image 30c6339b-dbec-4b3d-bdf7-83588ec18251 (cmon-agent@1.1.0)\n\n        Would you like to continue? [y/N] y\n\n        Create work dir: /var/sdcadm/updates/20170214T161023Z\n        Verifying that CNAPI is able to run agent updates\n        ...stance of cmon-agent [\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003e] 100%        1\n        successfully created instance of agent cmon-agent.\n        Created successfully (elapsed 17s).\n        [root@headnode (coal) ~]# sdcadm create dockerlogger -s 564d457a-36e6-9fe8-b667-9804b3de2053\n        Using channel dev\n\n        This command will make the following changes:\n            create a new instance of \"dockerlogger\" service\n                on server 564d457a-36e6-9fe8-b667-9804b3de2053 (foolkiller)\n                using image 7630d856-f1fa-4481-ba1e-bb730a7c201f (dockerlogger@1.0.0-master-20161116T194856Z-g3abcf86)\n\n        Would you like to continue? [y/N] y\n\n        Create work dir: /var/sdcadm/updates/20170214T161556Z\n        Validating servers\n        Checking servers availability\n        Getting image file from local imgapi\n        Copying dockerlogger to assets dir: /usbkey/extra/dockerlogger\n        Starting dockerlogger instance creation\n        ...loading dockerlogger [\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003e] 100%        1\n        Installing dockerlogger [\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003e] 100%        1\n        Deleting temporary /var/tmp/dockerlogger-7630d856-f1fa-4481-ba1e-bb730a7c201f.sh\n        Created successfully (elapsed 3s).\n        [root@headnode (coal) ~]# sdcadm insts cmon-agent\n        INSTANCE                              SERVICE     HOSTNAME    VERSION  ALIAS\n        1d3cb819-ab54-4527-8ed2-3d739dfe4bd6  cmon-agent  foolkiller  1.1.0    -\n        3d23f14b-de6a-479d-ba33-19b6fb7384d6  cmon-agent  headnode    1.1.0    -\n        [root@headnode (coal) ~]# sdcadm insts dockerlogger\n        INSTANCE                              SERVICE       HOSTNAME    VERSION                                 ALIAS\n        63a2b421-654f-4d21-b669-1c7f4237ef97  dockerlogger  foolkiller  1.0.0-master-20161116T194856Z-g3abcf86  -\n        3e481498-f4f2-4c94-9796-d9ac32f430ff  dockerlogger  headnode    1.0.0-master-20161116T194856Z-g3abcf86  -\n        [root@headnode (coal) ~]#\n\n \n\u003e (5 comments)\n \u003e \n \u003e This looks like it isn\u0027t working for dockerlogger.\n \u003e First I deleted my dockerlogger instance from SAPI and:\n \u003e \n \u003e ```\n \u003e [root@headnode (coal) ~]# sdcadm create dockerlogger -s headnode\n \u003e Using channel dev\n \u003e sdcadm create: error (Update): do not support the following\n \u003e changes:\n \u003e {\"type\":\"create\",\"service\":\"dockerlogger\",\"image\":\"7630d856-f1fa-4481-ba1e-bb730a7c201f\"}\n \u003e [root@headnode (coal) ~]# sdcadm experimental create dockerlogger\n \u003e -s headnode\n \u003e Using channel dev\n \u003e sdcadm experimental create: error (Update): do not support the\n \u003e following changes:\n \u003e {\"type\":\"create\",\"service\":\"dockerlogger\",\"image\":\"7630d856-f1fa-4481-ba1e-bb730a7c201f\"}\n \u003e ```\n \u003e \n \u003e Then I tried amon-agent. First remove it:\n \u003e \n \u003e ```\n \u003e sdc-cnapi /servers/$(sysinfo | json UUID) \\\n \u003e | json -H -j agents server_uuid -e \u0027this.agents \u003d this.agents.filter(function\n \u003e (a) { return a.name !\u003d\u003d \"amon-agent\" });\u0027 \\\n \u003e | sdc-cnapi /servers/$(sysinfo | json UUID) -X POST -d@-Then I\n \u003e tried with amon-agent (on my COAL headnode). First remove it:\n \u003e \n \u003e sdcadm insts amon-agent -Ho instance | while read uuid; do sdc-sapi\n \u003e /instances/$uuid -X DELETE; done\n \u003e ```\n \u003e \n \u003e Then create it:\n \u003e \n \u003e ```\n \u003e [root@headnode (coal) ~]# sdcadm create amon-agent -s $(sysinfo |\n \u003e json UUID)\n \u003e Using channel dev\n \u003e \n \u003e This command will make the following changes:\n \u003e download 1 image (6 MiB):\n \u003e image 1592b9a5-9308-4a15-8325-156ff00586b2\n \u003e (amon-agent@1.0.1)\n \u003e create a new instance of \"amon-agent\" service\n \u003e on server 564d68f7-1607-3add-5b72-917902f817a8 (headnode)\n \u003e using image 1592b9a5-9308-4a15-8325-156ff00586b2 (amon-agent@1.0.1)\n \u003e \n \u003e Would you like to continue? [y/N] y\n \u003e \n \u003e Create work dir: /var/sdcadm/updates/20170210T202356Z\n \u003e Downloading image 1592b9a5-9308-4a15-8325-156ff00586b2\n \u003e (amon-agent@1.0.1)\n \u003e Imported image 1592b9a5-9308-4a15-8325-156ff00586b2\n \u003e (amon-agent@1.0.1)\n \u003e Verifying that CNAPI is able to run agent updates\n \u003e ...ing instance of amon-agent [\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003e]\n \u003e 100%        1\n \u003e successfully created instance of agent amon-agent.\n \u003e Created successfully (elapsed 28s).\n \u003e [root@headnode (coal) ~]# sdcadm insts amon-agent\n \u003e INSTANCE                              SERVICE     HOSTNAME  VERSION\n \u003e  ALIAS\n \u003e 33d08fe2-5979-4063-af06-e113750c32bd  amon-agent  headnode  1.0.1  \n \u003e  -\n \u003e ```\n \u003e \n \u003e That seemed to work. :)"},{"timestamp":1487089266,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 2."},{"timestamp":1487089304,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1487258571,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(2 comments)\n\n1. It would be nice to not wrap a single error in a MultiError:\n\n```\n[root@headnode (coal) ~]# sdcadm create -s $(sysinfo | json UUID) amon-agent\nUsing channel dev\nsdcadm create: error (MultiError): multiple (1) errors\n    error (Usage): Agent \"amon-agent\" instance already exists on server \"564d68f7-1607-3add-5b72-917902f817a8\".\n```\n\nThat\u0027s not a new thing here tho.\n\n\n2. With dockerlogger it looks like it will allow me to create an instance when there is already one there:\n\n```\n[root@headnode (coal) ~]# sdcadm insts dockerlogger\nINSTANCE                              SERVICE       HOSTNAME  VERSION                                 ALIAS\nb2fc92c0-bc25-4a74-b41a-77b8d3cb027b  dockerlogger  headnode  1.0.0-master-20161116T194856Z-g3abcf86  -\n[root@headnode (coal) ~]# sdcadm create dockerlogger -s $(sysinfo | json UUID)\nUsing channel dev\n\nThis command will make the following changes:\n    create a new instance of \"dockerlogger\" service\n        on server 564d68f7-1607-3add-5b72-917902f817a8 (headnode)\n        using image 7630d856-f1fa-4481-ba1e-bb730a7c201f (dockerlogger@1.0.0-master-20161116T194856Z-g3abcf86)\n\nWould you like to continue? [y/N]\n```"},{"timestamp":1487609108,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3: Patch Set 2 was rebased"},{"timestamp":1487609141,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3:\n\n\"make check\" passed ok"},{"timestamp":1487611380,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Uploaded patch set 4."},{"timestamp":1487611424,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 4:\n\n(1 comment)\n\nTrent, all the suggested changes made, but the exception of the MultiError which is already handled into a different issue"},{"timestamp":1487611425,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1487613178,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1"},{"timestamp":1487616277,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Pedro Palazón Candel"}],"currentPatchSet":{"number":"4","revision":"77f82d4536b1293d98bf8e0216409d6c9746d48e","parents":["932c322ab61fced8fff9bfbdbd3defc611b2c08a"],"ref":"refs/changes/90/1490/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1487611380,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1487611425,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487613178,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1487613178,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1487616277,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/cli/do_create.js","type":"MODIFIED","insertions":64,"deletions":-18},{"file":"lib/cli/index.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/common.js","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":146,"deletions":-6},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":21,"deletions":-5},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":66,"deletions":-26},{"file":"lib/procedures/update-manatee-v2.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":5,"deletions":-12}],"sizeInsertions":328,"sizeDeletions":-77},"patchSets":[{"number":"1","revision":"a2cb07734c019e76097e28167d91452b4d40daa6","parents":["bc6e8bfa1cd91ec3946b0bd57829ff9e6a733907"],"ref":"refs/changes/90/1490/1","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1486733386,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1486733438,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/cli/do_create.js","line":23,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Why the new \u0027sdcadm ex create\u0027 command? I didn\u0027t think I saw any differ handling if \u0027experimental\u003dtrue\u0027."},{"file":"lib/cli/do_create.js","line":23,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Yeah, I first though about not allowing create to make agent instances but when inside experimental, then I decided I didn\u0027t want that since it seemed to work just using existing code from update agents and update docker logger files and, of course, forgot to remove the experimental bits."},{"file":"lib/cli/do_create.js","line":187,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"just one newline here"},{"file":"lib/cli/do_create.js","line":187,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done, but it\u0027s what it was there before :-)"},{"file":"lib/procedures/index.js","line":887,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Let\u0027s just use double-quotes for quoting things in strings so we don\u0027t have to do escaping. That a style suggestion for when you come upon then. I don\u0027t want to make a bunch of work here."},{"file":"lib/procedures/index.js","line":887,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"on"},{"file":"lib/procedures/index.js","line":887,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Ah just changed those into createAgentInstance. The remaining functions can be updated some other time"},{"file":"lib/procedures/index.js","line":887,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"},{"file":"lib/procedures/update-agent-v1.js","line":57,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Is sdcadm\u0027s change.type really \u0027create\u0027 and not \u0027create-instance\u0027?  If so, then \"boo\". :)"},{"file":"lib/procedures/update-agent-v1.js","line":57,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Indeed. I just modified every instance and now it is \"create-instance\" if nothing else, just to make it match the original plan ;-)"},{"file":"lib/procedures/update-agent-v1.js","line":57,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"These should be updated too:\n\n```\npost-setup/ha-manatee.js\n485:                    type: \u0027create\u0027,\n\nprocedures/update-manatee-v2.js\n864:                        type: \u0027create\u0027,\n937:                        type: \u0027create\u0027,\n998:                        type: \u0027create\u0027,\n```"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/cli/do_create.js","type":"MODIFIED","insertions":95,"deletions":-18},{"file":"lib/cli/index.js","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"lib/common.js","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":117,"deletions":-6},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":20,"deletions":-5},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":66,"deletions":-26},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":3,"deletions":-10},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":328,"sizeDeletions":-70},{"number":"2","revision":"a774049ecc599dc6d4ae3fed9bfe2fb1f86589cf","parents":["541923162247dbb232cfc842a33842f6da6dcf2c"],"ref":"refs/changes/90/1490/2","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1487089266,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1487089304,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/common.js","line":1638,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"If you care to update, I\u0027d prefer \"Ip\" here. I don\u0027t care strongly enough to make work tho. :)"},{"file":"lib/common.js","line":1638,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/cli/do_create.js","type":"MODIFIED","insertions":64,"deletions":-18},{"file":"lib/cli/index.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/common.js","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":118,"deletions":-6},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":21,"deletions":-5},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":66,"deletions":-26},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":5,"deletions":-12}],"sizeInsertions":294,"sizeDeletions":-71},{"number":"3","revision":"41165dcd060b2a442a0c4e040e734349f884dad5","parents":["932c322ab61fced8fff9bfbdbd3defc611b2c08a"],"ref":"refs/changes/90/1490/3","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1487609108,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1487089304,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/cli/do_create.js","type":"MODIFIED","insertions":64,"deletions":-18},{"file":"lib/cli/index.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/common.js","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":118,"deletions":-6},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":21,"deletions":-5},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":66,"deletions":-26},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":5,"deletions":-12}],"sizeInsertions":294,"sizeDeletions":-71},{"number":"4","revision":"77f82d4536b1293d98bf8e0216409d6c9746d48e","parents":["932c322ab61fced8fff9bfbdbd3defc611b2c08a"],"ref":"refs/changes/90/1490/4","uploader":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"createdOn":1487611380,"author":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1487611425,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1487613178,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1487613178,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1487616277,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/cli/do_create.js","type":"MODIFIED","insertions":64,"deletions":-18},{"file":"lib/cli/index.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/common.js","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"lib/post-setup/ha-manatee.js","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/procedures/index.js","type":"MODIFIED","insertions":146,"deletions":-6},{"file":"lib/procedures/update-agent-v1.js","type":"MODIFIED","insertions":21,"deletions":-5},{"file":"lib/procedures/update-dockerlogger.js","type":"MODIFIED","insertions":66,"deletions":-26},{"file":"lib/procedures/update-manatee-v2.js","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"lib/sdcadm.js","type":"MODIFIED","insertions":5,"deletions":-12}],"sizeInsertions":328,"sizeDeletions":-77}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}]}