{"project":"joyent/illumos-joyent","branch":"master","id":"I084bab208e0b7c16aa583ebb268d2886e066a4b8","number":"771","subject":"OS-5740 dtrace helpers leaked during fork when lwp_create fails Reviewed by: Bryan Cantrill \u003cbryan@joyent.com\u003e Reviewed by: Ryan Zezeski \u003crpz@joyent.com\u003e Approved by: Robert Mustacchi \u003crm@joyent.com\u003e","owner":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"url":"https://cr.joyent.us/771","commitMessage":"OS-5740 dtrace helpers leaked during fork when lwp_create fails\nReviewed by: Bryan Cantrill \u003cbryan@joyent.com\u003e\nReviewed by: Ryan Zezeski \u003crpz@joyent.com\u003e\nApproved by: Robert Mustacchi \u003crm@joyent.com\u003e\n","createdOn":1477354930,"lastUpdated":1477414302,"open":false,"status":"MERGED","comments":[{"timestamp":1477354930,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 1."},{"timestamp":1477372347,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Patch Set 1: Code-Review+1\n\nLooks great -- thanks for fixing this ancient bug of mine!"},{"timestamp":1477372479,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\nA run of dtest \"passed\" with the expected errors."},{"timestamp":1477406388,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1477406396,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 2."},{"timestamp":1477406428,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1477406582,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1477406643,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1477408071,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1477414244,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1477414302,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Patrick Mooney"}],"currentPatchSet":{"number":"4","revision":"084bab208e0b7c16aa583ebb268d2886e066a4b8","parents":["876676abc35e7852f07c02c7d7fce5ee06dbe110"],"ref":"refs/changes/71/771/4","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1477414244,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1477406582,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1477406643,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1477414302,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/dtrace/dtrace.c","type":"MODIFIED","insertions":14,"deletions":-4},{"file":"usr/src/uts/common/os/dtrace_subr.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/os/exit.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/os/fork.c","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/sys/dtrace.h","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":26,"sizeDeletions":-11},"patchSets":[{"number":"1","revision":"2433e732181fe3d4bdfdfc2d20790699dd1b086e","parents":["63be22a60afc7de097f038691b9cab2a1dd22854"],"ref":"refs/changes/71/771/1","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1477354930,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1477372347,"by":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"}}],"comments":[{"file":"usr/src/uts/common/dtrace/dtrace.c","line":15481,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"process process"},{"file":"usr/src/uts/common/dtrace/dtrace.c","line":15481,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/dtrace/dtrace.c","type":"MODIFIED","insertions":14,"deletions":-4},{"file":"usr/src/uts/common/os/dtrace_subr.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/os/exit.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/os/fork.c","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/sys/dtrace.h","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":26,"sizeDeletions":-11},{"number":"2","revision":"badf6ac225064847d9bbd8c3959c5897109c7bd2","parents":["f71817add648fc4f52e69697061f7bba9f896931"],"ref":"refs/changes/71/771/2","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1477406396,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1477406643,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1477406582,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/dtrace/dtrace.c","type":"MODIFIED","insertions":14,"deletions":-4},{"file":"usr/src/uts/common/os/dtrace_subr.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/os/exit.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/os/fork.c","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/sys/dtrace.h","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":26,"sizeDeletions":-11},{"number":"3","revision":"e1baef58bacced1434bc101ed80a4542f56ead8c","parents":["f71817add648fc4f52e69697061f7bba9f896931"],"ref":"refs/changes/71/771/3","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1477408071,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1477406643,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1477406582,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/dtrace/dtrace.c","type":"MODIFIED","insertions":14,"deletions":-4},{"file":"usr/src/uts/common/os/dtrace_subr.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/os/exit.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/os/fork.c","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/sys/dtrace.h","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":26,"sizeDeletions":-11},{"number":"4","revision":"084bab208e0b7c16aa583ebb268d2886e066a4b8","parents":["876676abc35e7852f07c02c7d7fce5ee06dbe110"],"ref":"refs/changes/71/771/4","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1477414244,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1477406643,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1477414302,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1477406582,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/dtrace/dtrace.c","type":"MODIFIED","insertions":14,"deletions":-4},{"file":"usr/src/uts/common/os/dtrace_subr.c","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/os/exit.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/os/fork.c","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/sys/dtrace.h","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":26,"sizeDeletions":-11}],"allReviewers":[{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}]}