{"project":"joyent/electric-moray","branch":"master","id":"I5340c2316da2adcd7261a08fcd72f949f6076959","number":"2642","subject":"MANTA-2866 electric-moray setup failed: name service lookup timeout Reviewed by: David Pacheco \u003cdap@joyent.com\u003e Approved by: Brittany Wald \u003cbrittany.wald@joyent.com\u003e","owner":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"url":"https://cr.joyent.us/2642","commitMessage":"MANTA-2866 electric-moray setup failed: name service lookup timeout\nReviewed by: David Pacheco \u003cdap@joyent.com\u003e\nApproved by: Brittany Wald \u003cbrittany.wald@joyent.com\u003e\n","createdOn":1506113085,"lastUpdated":1512608348,"open":false,"status":"MERGED","comments":[{"timestamp":1506113085,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 1."},{"timestamp":1506113126,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1506114124,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1: Code-Review+1\n\n(3 comments)"},{"timestamp":1506114496,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 2."},{"timestamp":1506114503,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 1:\n\n(3 comments)"},{"timestamp":1506114528,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1506115945,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2: Code-Review+1\n\n(1 comment)"},{"timestamp":1512495940,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 3: Patch Set 2 was rebased"},{"timestamp":1512495967,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3:\n\n\"make check\" passed ok"},{"timestamp":1512608235,"reviewer":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1512608329,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1512608348,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Joshua M. Clulow"}],"currentPatchSet":{"number":"4","revision":"5340c2316da2adcd7261a08fcd72f949f6076959","parents":["c5128f07e3697a5845fb4a8b48c9bfd935848581"],"ref":"refs/changes/42/2642/4","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1512608329,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506114528,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506115945,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1512608235,"by":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"}},{"type":"SUBM","value":"1","grantedOn":1512608348,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"boot/setup.sh","type":"MODIFIED","insertions":36,"deletions":-8}],"sizeInsertions":36,"sizeDeletions":-8},"patchSets":[{"number":"1","revision":"9fe9f4cb837b09d88005c8395f4e3897497be6d1","parents":["d6b91a20c8284a2b3502986e187194805500eb8b"],"ref":"refs/changes/42/2642/1","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1506113085,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506114124,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506113126,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"boot/setup.sh","line":10,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Update."},{"file":"boot/setup.sh","line":10,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Done"},{"file":"boot/setup.sh","line":39,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"The old code did give up after a while.  Do we never want to do that?  If something really is wrong, Ii might be hard to identify that something like this is stuck.\n\nI guess eventually the mdata:execute script will time this out anyway."},{"file":"boot/setup.sh","line":39,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"As I said in the comment below, the service will time out and fail in the end (in only a handful of minutes anyway).  I think it\u0027s better to try for as long as possible, rather than give up before that point."},{"file":"boot/setup.sh","line":39,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Sounds good.  Sorry for having missed the comment."},{"file":"boot/setup.sh","line":60,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Does this not need to be double-quoted?  (It seems that it doesn\u0027t, but I find that pretty surprising.)"},{"file":"boot/setup.sh","line":60,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"It does not, because word expansion is not (as I understand it) performed within the \"[[ ... ]]\" context."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"boot/setup.sh","type":"MODIFIED","insertions":32,"deletions":-5}],"sizeInsertions":32,"sizeDeletions":-5},{"number":"2","revision":"22f7f63205084db5aabfef9c406b075fe577a743","parents":["d6b91a20c8284a2b3502986e187194805500eb8b"],"ref":"refs/changes/42/2642/2","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1506114496,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506115945,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506114528,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"boot/setup.sh","type":"MODIFIED","insertions":36,"deletions":-8}],"sizeInsertions":36,"sizeDeletions":-8},{"number":"3","revision":"d57a3f31cf9bfd7af810bc1f607ef4ae66fe66fc","parents":["c5128f07e3697a5845fb4a8b48c9bfd935848581"],"ref":"refs/changes/42/2642/3","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1512495940,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506115945,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506114528,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1512608235,"by":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"boot/setup.sh","type":"MODIFIED","insertions":36,"deletions":-8}],"sizeInsertions":36,"sizeDeletions":-8},{"number":"4","revision":"5340c2316da2adcd7261a08fcd72f949f6076959","parents":["c5128f07e3697a5845fb4a8b48c9bfd935848581"],"ref":"refs/changes/42/2642/4","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1512608329,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1506115945,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"SUBM","value":"1","grantedOn":1512608348,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1506114528,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1512608235,"by":{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"boot/setup.sh","type":"MODIFIED","insertions":36,"deletions":-8}],"sizeInsertions":36,"sizeDeletions":-8}],"allReviewers":[{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Brittany Wald","email":"brittany.wald@joyent.com","username":"princesspretzel"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}]}