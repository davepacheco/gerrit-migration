{"project":"joyent/illumos-joyent","branch":"master","id":"I9d76a618dbc5cbfb6e7905939f771b01eb62bb55","number":"5324","subject":"OS-7486 Properly detect SMT on AMD Reviewed by: John Levon \u003cjohn.levon@joyent.com\u003e Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Approved by: John Levon \u003cjohn.levon@joyent.com\u003e","owner":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"url":"https://cr.joyent.us/5324","commitMessage":"OS-7486 Properly detect SMT on AMD\nReviewed by: John Levon \u003cjohn.levon@joyent.com\u003e\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nApproved by: John Levon \u003cjohn.levon@joyent.com\u003e\n","createdOn":1546910585,"lastUpdated":1547512950,"open":false,"status":"MERGED","comments":[{"timestamp":1546910585,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 1."},{"timestamp":1546910684,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1: Code-Review-1\n\nStill undergoing some additional testing at this point."},{"timestamp":1546976063,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1: -Code-Review"},{"timestamp":1547047200,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\n(45 comments)\n\nThanks for the comment and the refactoring here, it really helps a lot!"},{"timestamp":1547067400,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1547073463,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 2."},{"timestamp":1547073469,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(46 comments)"},{"timestamp":1547076871,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\n(4 comments)"},{"timestamp":1547077500,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 2:\n\n(6 comments)"},{"timestamp":1547101046,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 3."},{"timestamp":1547101050,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2:\n\n(6 comments)"},{"timestamp":1547128875,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3:\n\n(5 comments)"},{"timestamp":1547164772,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3:\n\n(5 comments)"},{"timestamp":1547164797,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 4."},{"timestamp":1547204415,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1547406758,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 5."},{"timestamp":1547406771,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4:\n\nThis adds some additional clarification based on some data I found in the field."},{"timestamp":1547421096,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1547480647,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 5:\n\nIs it worth a quick sanity check of LX brand /proc/cpuinfo on the new AMD systems?"},{"timestamp":1547493338,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 5: Integration-Approval+1"},{"timestamp":1547495649,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 5: Code-Review+1\n\n(9 comments)\n\nThis looks good, thanks for adding all of the great new documentation. I saw a few nits which I marked. You can ignore those if you like."},{"timestamp":1547499435,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1547501653,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 6."},{"timestamp":1547501661,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 5:\n\n(10 comments)"},{"timestamp":1547502540,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1547504157,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1547504163,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 6: Integration-Approval+1"},{"timestamp":1547512684,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 7: Patch Set 6 was rebased."},{"timestamp":1547512726,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 8: Commit message was updated."},{"timestamp":1547512950,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Robert Mustacchi"}],"currentPatchSet":{"number":"8","revision":"9d76a618dbc5cbfb6e7905939f771b01eb62bb55","parents":["9c8d4a1a37ad374d40250c38a5103106b29903a6"],"ref":"refs/changes/24/5324/8","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1547512726,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547502540,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547504157,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1547504163,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"SUBM","value":"1","grantedOn":1547512950,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/i86pc/os/cmi_hw.c","type":"MODIFIED","insertions":13,"deletions":-5},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":1379,"deletions":-392}],"sizeInsertions":1392,"sizeDeletions":-397},"patchSets":[{"number":"1","revision":"af31102b1340f177e714ed06f7c21b88bca5647f","parents":["6fb307ce14869b1c3684d0948a7844194c69b5bd"],"ref":"refs/changes/24/5324/1","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1546910585,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/i86pc/os/cpuid.c","line":41,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"\"cpuid_subr.c,\""},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":41,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":52,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"\"Understanding\" ?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":52,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":119,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"\"issuing\""},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":119,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":129,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"\"32 bits\""},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":129,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":130,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"s/or not//"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":130,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":143,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"\"processor\""},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":143,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":168,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"\"4 bits\""},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":168,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":219,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"\"queried\" - and do we really need to say \"x86\" ?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":219,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":235,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Is KMDB started before phase 2?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":235,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Yes."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":290,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Think this should be:\n\n\"...terminology, and the operating system itself uses occasionally overlapping...\""},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":290,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":310,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"s/during/for/ ?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":310,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":357,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Mention \"strand\" alias in rest of kernel?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":357,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":361,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Do we want a separate CHIP section? That defines potential chip\u003c-\u003ecore cardinality?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":361,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I\u0027m not sure, chip can be rather arbitrary and is often used by us to refer to the whole package, ala cpi_chipid. I\u0027m not sure how to really square off that usage. I\u0027ve tried to write a definition that addresses that, but I\u0027m not a fan of it."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":361,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I think calling that explicitly is worth doing. The whole nomenclature is a bit of a mess, and your definitions are extremely useful in this respect. So pointing out that \"chip\" is overloaded - especially outside of this file - is useful IMHO"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":439,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"s/MCMs,/MCMs/"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":439,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":440,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"s/between the/between/"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":440,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":441,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"s/processor/package/"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":441,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":471,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"s/processors/CPUs/"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":471,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":492,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"s/including,/including/"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":492,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":499,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"When is \u003e 1 node *not* a multi-chip module? Some clarification here seems like it would be useful"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":499,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I don\u0027t know enough about AMDs previous iteration to say whether or not they were strictly an instance of a multi-chip module or not. But I guess I\u0027ll just assert it more likely is and have tried to avoid the ambiguity.\n\nThe hard thing is that even in the case where we have older generations, there may actually still be an MCM as the Northbridge probably leads it to be considered an MCM."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":500,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"s/Each/each/"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":500,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":547,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"says \"L3\" twice"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":547,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":569,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"We haven\u0027t used die as a terminology above. Can this say \"chip\" maybe? And below?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":569,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I really don\u0027t want to use chip. It\u0027s overloaded far too much. What we call a chip in terms of cpi_chipid is different. I\u0027ve attempted to call out die explicitly and address this overloaded terminology. Is this better?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":569,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I\u0027m happy if we\u0027re going to use \"die\" as consistently as we are able in this file. We\u0027re stuck with chip meaning two different things, indeed."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":675,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Not sure what the \"and socket\" means here?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":675,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is the update clearer?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":691,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"This section starts using \"socket\", but previously we preferred other terms?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":691,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I\u0027ve switched to \u0027package\u0027. Is that better?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":702,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"synthetic"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":702,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":726,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"chip and package are defined differently for MCMs? This section does not make this clear at all."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":726,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"The OS use of chip is entirely different and I don\u0027t want to go through the entire gate and change our use of \u0027chip\u0027 as socket. I\u0027ve tried to make this clearer. Is it in reality?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":734,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"ditto"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":734,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"See above."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":748,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I think you can skip the sentence \"The term \u0027node\u0027...\": we already described that"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":748,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":759,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"s/socket/package/ ?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":759,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":766,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"s/units/unit"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":766,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":775,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Is it worth briefly mentioning what happens under hypervisors?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":775,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I\u0027ve tried to put something together here. Not sure if it\u0027s any good. Thoughts?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":776,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"this section is somewhat expanded version of the text around :44 - could we move up and merge?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":776,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I\u0027d really rather not. I consider the bit around :44 to be a high level abstract that\u0027s supposed to motivate everything else. I think it only makes sense to talk about how this is exposed in technical details once you have an understanding of everything else."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1321,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Did you consider #define\u0027ing all these as well, but decided against?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1321,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Briefly, but just decided to focus on the ones I was adding since I had almost messed it up a few times."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1604,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"\"that\""},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1604,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1620,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"s/. We/, we/"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1620,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1635,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"can fit on one line?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1635,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1670,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"could reverse test and skip indentation of the rest of code?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1670,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I\u0027ll think about it, but kind of would rather not change it from what I got."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1803,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"s/good,/good/"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1803,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1860,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"package"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1860,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1871,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"0x prefix?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1871,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1903,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I think this would be clearer moved down to :1924 ?\n\nThat is, if \u003e\u003d 0x17, we take the pkgcoreid path,\notherwise it\u0027s a compunit thing if bulldozer"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1903,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I thought about that when originally doing that, but I really didn\u0027t like that. The biggest one was that it means that the place where we set pkgcoreid is split up and I wanted to make it much clearer about where it is that we set it. Would you be happier if it was turned into its own function?\n\nOne of the things I\u0027ve really tried to do is focus on making sure that we have the same thing being set in the different ways in the same place."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":2213,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"!is_x86... instead of B_FALSE comparison"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":2213,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"OK, I can change it. That\u0027s how I got it originally."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":2219,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"initialize cpi_compunitid?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":2219,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It wasn\u0027t previously set before, but I\u0027ve explicitly set it to zero (which it likely was defaulting)."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":2245,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I\u0027m not clear why we are different to the known-vendor settings at :2218"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":2245,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Some of this is based on how it was originally constructed. But there are some differences in terms of how we assign values. Can you clarify a bit as to which settings you\u0027re referring to? Or is this asking why is there even a separate block?\n\nIn terms of the latter, while I had thought about combining the two, I was afraid of changing the default ID behavior that was being used today for single CPU set ups as this already feels fairly risky."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":2245,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"That was my question. Paranoia seems fine, but can I get a \"historical reasons\" comment as to why they\u0027re different?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":3952,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Is there a particular reason we\u0027re using \"function\" not \"leaf\" here?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":3952,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"No, that\u0027s how it was previously used. I can change it. Though now I worry if I should be using the term leaf at all."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":3952,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Leaf seems fine to me?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":4003,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"ditto"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":4003,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/i86pc/os/cmi_hw.c","type":"MODIFIED","insertions":13,"deletions":-5},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":1294,"deletions":-385}],"sizeInsertions":1307,"sizeDeletions":-390},{"number":"2","revision":"3655a650ffbca3246e8e6f10443f57eb00ef0adc","parents":["6fb307ce14869b1c3684d0948a7844194c69b5bd"],"ref":"refs/changes/24/5324/2","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1547073463,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/i86pc/os/cpuid.c","line":526,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"\"this indicates\""},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":526,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":713,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Sorry, I missed this \"socket\" usage, package instead?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":713,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":782,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"s/packages s/packages /"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":782,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":810,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"closest"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":810,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":812,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"\"between packages\" ?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":812,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":814,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Thanks for this"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":814,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/i86pc/os/cmi_hw.c","type":"MODIFIED","insertions":13,"deletions":-5},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":1364,"deletions":-390}],"sizeInsertions":1377,"sizeDeletions":-395},{"number":"3","revision":"5c434727a956eee4b27bdc643d00aeb3ae55f598","parents":["6fb307ce14869b1c3684d0948a7844194c69b5bd"],"ref":"refs/changes/24/5324/3","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1547101046,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/i86pc/os/cpuid.c","line":807,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"\"the logical CPU uses\" ?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":807,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":809,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"furthest away from the CPU?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":809,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":2306,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Could still do a little comment as to why we\u0027re different from ::2278"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":2306,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":4043,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"One last stray \"fn 4\" mention?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":4043,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":4083,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"One last last?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":4083,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/i86pc/os/cmi_hw.c","type":"MODIFIED","insertions":13,"deletions":-5},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":1363,"deletions":-390}],"sizeInsertions":1376,"sizeDeletions":-395},{"number":"4","revision":"e29038a578f2a7bb35d7f63b09e85fd998c22819","parents":["6fb307ce14869b1c3684d0948a7844194c69b5bd"],"ref":"refs/changes/24/5324/4","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1547164797,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547204415,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/i86pc/os/cmi_hw.c","type":"MODIFIED","insertions":13,"deletions":-5},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":1371,"deletions":-392}],"sizeInsertions":1384,"sizeDeletions":-397},{"number":"5","revision":"41191ffd5b5ff8c29a9bab83e099a5c583310bf5","parents":["6fb307ce14869b1c3684d0948a7844194c69b5bd"],"ref":"refs/changes/24/5324/5","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1547406758,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547495649,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547421096,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1547493338,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"comments":[{"file":"usr/src/uts/i86pc/os/cpuid.c","line":49,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"This is used as one word in other parts of the comment, so we should be consistent. I think one word is also less confusing for this usage."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":49,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":154,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"I think this would be clearer as \"consumer\"."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":154,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I\u0027ve put consumer in parens, as that\u0027s what others call it."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":339,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"missing \u0027by\u0027"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":339,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":417,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"missing a comma here"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":417,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1393,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Any reason not to do a define for this as well?"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1393,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"John earlier asked the same thing. Just didn\u0027t want to change up everything at this time. I only did the ones I was adding and screwed up."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1774,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"I\u0027m surprised the compiler doesn\u0027t warn that this variable may be used uninitialized."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":1774,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"The compiler\u0027s not perfect. We know that it should be OK. For the moment I\u0027ve initialized it; however, we should probably come back and clean this up further."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":3043,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"this comment seems obsolete and could be deleted as well"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":3043,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I\u0027m going to leave this for the future at some point as it\u0027s not related to what I\u0027m changing."},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":4056,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"this comment is wrong now"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":4056,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":4094,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"this comment is wrong now"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":4094,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":4096,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"this comment is wrong now"},{"file":"usr/src/uts/i86pc/os/cpuid.c","line":4096,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/i86pc/os/cmi_hw.c","type":"MODIFIED","insertions":13,"deletions":-5},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":1378,"deletions":-392}],"sizeInsertions":1391,"sizeDeletions":-397},{"number":"6","revision":"49d7a90f4498de501504072c7d846f32c04e1664","parents":["6fb307ce14869b1c3684d0948a7844194c69b5bd"],"ref":"refs/changes/24/5324/6","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1547501653,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547502540,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547504157,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1547504163,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/i86pc/os/cmi_hw.c","type":"MODIFIED","insertions":13,"deletions":-5},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":1379,"deletions":-392}],"sizeInsertions":1392,"sizeDeletions":-397},{"number":"7","revision":"d72132138729766f48dc1991526c69feb9559ef4","parents":["9c8d4a1a37ad374d40250c38a5103106b29903a6"],"ref":"refs/changes/24/5324/7","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1547512684,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547502540,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547504157,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1547504163,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/i86pc/os/cmi_hw.c","type":"MODIFIED","insertions":13,"deletions":-5},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":1379,"deletions":-392}],"sizeInsertions":1392,"sizeDeletions":-397},{"number":"8","revision":"9d76a618dbc5cbfb6e7905939f771b01eb62bb55","parents":["9c8d4a1a37ad374d40250c38a5103106b29903a6"],"ref":"refs/changes/24/5324/8","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1547512726,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1547512950,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547502540,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1547504157,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1547504163,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/i86pc/os/cmi_hw.c","type":"MODIFIED","insertions":13,"deletions":-5},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":1379,"deletions":-392}],"sizeInsertions":1392,"sizeDeletions":-397}],"allReviewers":[{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}]}