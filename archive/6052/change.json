{"project":"joyent/illumos-joyent","branch":"master","id":"Ia6a0e2aee988bd529ac3621e19f33518fe40a0b9","number":"6052","subject":"OS-7165 Want support for AMD Zen CPC events Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Reviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e Approved by: Dan McDonald \u003cdanmcd@joyent.com\u003e","owner":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"url":"https://cr.joyent.us/6052","commitMessage":"OS-7165 Want support for AMD Zen CPC events\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nReviewed by: Dan McDonald \u003cdanmcd@joyent.com\u003e\nApproved by: Dan McDonald \u003cdanmcd@joyent.com\u003e\n","createdOn":1554485191,"lastUpdated":1556054508,"open":false,"status":"MERGED","comments":[{"timestamp":1554485191,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 1."},{"timestamp":1554497008,"reviewer":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1555409388,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1555426483,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(13 comments)"},{"timestamp":1555446460,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 2."},{"timestamp":1555446467,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(14 comments)"},{"timestamp":1555517393,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2: Code-Review+1\n\n(1 comment)"},{"timestamp":1555521016,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1555522048,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 3."},{"timestamp":1555522056,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2:\n\n(2 comments)"},{"timestamp":1555523724,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1555523779,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1555665817,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1555707550,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1555707771,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1555707971,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1\n\nThank you, and sorry for missing the existing one in the .c file.\n\nTesting also looks sane, and thanks for including the regression test on Intel."},{"timestamp":1555903823,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 4."},{"timestamp":1555903841,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3:\n\nThere were some merge issues and also I found a typo in the cpc manual references."},{"timestamp":1555936337,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1556032684,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1556038761,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1\n\nShip it!"},{"timestamp":1556054427,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 5: Patch Set 4 was rebased."},{"timestamp":1556054500,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1556054508,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Robert Mustacchi"}],"currentPatchSet":{"number":"6","revision":"a6a0e2aee988bd529ac3621e19f33518fe40a0b9","parents":["27896fdc5eb580ff60d4bb646cf7488e1b8545b9"],"ref":"refs/changes/52/6052/6","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1556054500,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555936337,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556032684,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556038761,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556038761,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"SUBM","value":"1","grantedOn":1556054508,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"exception_lists/copyright","type":"MODIFIED","insertions":1,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/data/Makefile","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/data/amdpmc/Makefile","type":"ADDED","insertions":30,"deletions":0},{"file":"usr/src/data/amdpmc/README","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/data/amdpmc/f17h_core.json","type":"ADDED","insertions":1043,"deletions":0},{"file":"usr/src/man/man3cpc/cpc.3cpc","type":"MODIFIED","insertions":14,"deletions":-6},{"file":"usr/src/man/man3lib/libcpc.3lib","type":"MODIFIED","insertions":5,"deletions":-8},{"file":"usr/src/tools/cpcgen/cpcgen.c","type":"MODIFIED","insertions":701,"deletions":-114},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/uts/intel/ia32/os/cpc_subr.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/intel/opteron_pcbe/Makefile","type":"MODIFIED","insertions":30,"deletions":-2},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe.c","type":"MODIFIED","insertions":186,"deletions":-84},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe_table.h","type":"ADDED","insertions":105,"deletions":0},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":2150,"sizeDeletions":-219},"patchSets":[{"number":"1","revision":"e8510bbca90d412819a67786e8adde5adc44ed36","parents":["6aaf159ea324821122771dc6552e8ed77cc1f8fe"],"ref":"refs/changes/52/6052/1","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1554485191,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","comments":[{"file":"manifest","line":1845,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Pardon my ignorance: Do we expect this to remain one file in the long-term?  It seems odd comparing to the Intel side which is broken down by family/model/etc"},{"file":"manifest","line":1845,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"So, the way that the PCBE modules work is that they try to look up a module in the following order:\n\nvendor.family.model.stepping\nvendor.family.model\nvendor.family\nvendor\n\nThe Intel module is only a single actual module when we get to the main-stay core family (family 6 upper models), but we link in the models that are actually supported by this, which makes sense given how we have to know about the model to support it.\n\nOn the AMD side, they currently just attach for all AMD CPUs; however, the model support is a bit weak. Until my change we would have provided incorrect CPU counters for unsupported families (pretty much anything other than 0xf, 0x10, and 0x11. As the module checks for support itself, it isn\u0027t as important; however, we could break it out so that we\u0027re only found by specific families."},{"file":"usr/src/man/man3lib/libcpc.3lib","line":20,"reviewer":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"message":"nit: explanation?"},{"file":"usr/src/man/man3lib/libcpc.3lib","line":20,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/tools/cpcgen/cpcgen.c","line":641,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Could be const, like suffix"},{"file":"usr/src/tools/cpcgen/cpcgen.c","line":641,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/tools/cpcgen/cpcgen.c","line":699,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Isn\u0027t a \u0027map-\u003ecmap_next \u003d cpcgen_maps\u0027 assignment necessary before this?"},{"file":"usr/src/tools/cpcgen/cpcgen.c","line":699,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It is, thanks. I missed this because we only had a single data file on AMD today."},{"file":"usr/src/tools/cpcgen/cpcgen.c","line":1444,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Need a \u0027free(upper)\u0027 in the success case, right?"},{"file":"usr/src/tools/cpcgen/cpcgen.c","line":1444,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Good catch."},{"file":"usr/src/tools/cpcgen/cpcgen.c","line":1563,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"This should be a write warning, not one referencing a failed lookup, right?"},{"file":"usr/src/tools/cpcgen/cpcgen.c","line":1563,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/tools/cpcgen/cpcgen.c","line":1614,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Would it perhaps make sense to have a common error exit code path for this and the following cases?"},{"file":"usr/src/tools/cpcgen/cpcgen.c","line":1614,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Seems like a reasonable thing to do, rather than repeating the errno dance so many times"},{"file":"usr/src/tools/cpcgen/cpcgen.c","line":1614,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I\u0027ve tried to put together what I think is a reasonable compromise. Unfortunately, just having a single goto err isn\u0027t helpful as there are several different error messages. I\u0027ve wrapped up all the errno twidling and removing instead in a single function that is now used everywhere this pattern was previously used."},{"file":"usr/src/tools/cpcgen/cpcgen.c","line":1778,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I assume \u0027bit\u0027 is limited to \u003c\u003d 31?"},{"file":"usr/src/tools/cpcgen/cpcgen.c","line":1778,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Yes, though I\u0027ll add a check for that."},{"file":"usr/src/uts/intel/ia32/os/cpc_subr.c","line":145,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"append comma"},{"file":"usr/src/uts/intel/ia32/os/cpc_subr.c","line":145,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/intel/opteron_pcbe/Makefile","line":39,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Recalling when the other cpcgen changes went in, do we have any sort of rule that forces a dependency on that binary (and its prereqs)?  It was only a problem for incremental builds on existing workspaces, so not something to get too bent out of shape about."},{"file":"usr/src/uts/intel/opteron_pcbe/Makefile","line":39,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I\u0027m not sure what the right way is to do this, to be honest. A part of me is confused that it wasn\u0027t rebuilt as part of rebuilding the tools. I\u0027ll try to do some incremental build testing before I ask for IA to see if we can avoid this. It feels like another part of the build should safeguard this as we don\u0027t have this kind of thing for other tools that we use."},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe.c","line":161,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Should this perhaps be sized based on OPT_PCBE_EXT_NCOUNTERS, or maybe CTASSERTED against it?"},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe.c","line":161,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe.c","line":170,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Why the forward declaration?"},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe.c","line":170,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Was artifact of refactoring. Removed."},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe.c","line":421,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"love all the added const"},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe.c","line":421,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe.c","line":848,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Update for the new larger size?   (Also, would it be worth the safety of a VERIFY?)"},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe.c","line":848,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I\u0027ve fixed this for the moment, but opted to leave it as an assert for the moment."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"exception_lists/copyright","type":"MODIFIED","insertions":1,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/data/Makefile","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/data/amdpmc/Makefile","type":"ADDED","insertions":30,"deletions":0},{"file":"usr/src/data/amdpmc/README","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/data/amdpmc/f17h_core.json","type":"ADDED","insertions":1043,"deletions":0},{"file":"usr/src/man/man3cpc/cpc.3cpc","type":"MODIFIED","insertions":14,"deletions":-6},{"file":"usr/src/man/man3lib/libcpc.3lib","type":"MODIFIED","insertions":5,"deletions":-8},{"file":"usr/src/tools/cpcgen/cpcgen.c","type":"MODIFIED","insertions":674,"deletions":-68},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/uts/intel/ia32/os/cpc_subr.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/intel/opteron_pcbe/Makefile","type":"MODIFIED","insertions":30,"deletions":-2},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe.c","type":"MODIFIED","insertions":180,"deletions":-77},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe_table.h","type":"ADDED","insertions":105,"deletions":0},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":2117,"sizeDeletions":-166},{"number":"2","revision":"9e038b0bcd2cceeace9665e5bf38224b288949c9","parents":["38cd105041d3ba59fa4f5ec53d120c0b49f7ae1d"],"ref":"refs/changes/52/6052/2","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1555446460,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555517393,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"comments":[{"file":"usr/src/man/man3cpc/cpc.3cpc","line":131,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"AMD"},{"file":"usr/src/man/man3cpc/cpc.3cpc","line":131,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"D\u0027oh, thanks."},{"file":"usr/src/tools/cpcgen/cpcgen.c","line":697,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"style nit: This might read easier if the cmap_next was at the end, preceding the cpcgen_maps assignment.  It makes the chaining clear, IMO."},{"file":"usr/src/tools/cpcgen/cpcgen.c","line":697,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"exception_lists/copyright","type":"MODIFIED","insertions":1,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/data/Makefile","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/data/amdpmc/Makefile","type":"ADDED","insertions":30,"deletions":0},{"file":"usr/src/data/amdpmc/README","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/data/amdpmc/f17h_core.json","type":"ADDED","insertions":1043,"deletions":0},{"file":"usr/src/man/man3cpc/cpc.3cpc","type":"MODIFIED","insertions":14,"deletions":-6},{"file":"usr/src/man/man3lib/libcpc.3lib","type":"MODIFIED","insertions":5,"deletions":-8},{"file":"usr/src/tools/cpcgen/cpcgen.c","type":"MODIFIED","insertions":698,"deletions":-113},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/uts/intel/ia32/os/cpc_subr.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/intel/opteron_pcbe/Makefile","type":"MODIFIED","insertions":30,"deletions":-2},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe.c","type":"MODIFIED","insertions":186,"deletions":-84},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe_table.h","type":"ADDED","insertions":105,"deletions":0},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":2147,"sizeDeletions":-218},{"number":"3","revision":"1ad151fe67033de8f6f9a2be78eaa3e428dbf2c5","parents":["38cd105041d3ba59fa4f5ec53d120c0b49f7ae1d"],"ref":"refs/changes/52/6052/3","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1555522048,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555523724,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555523779,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555665817,"by":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555707971,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1555707971,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"comments":[{"file":"usr/src/uts/intel/pcbe/opteron_pcbe_table.h","line":27,"reviewer":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},"message":"Do you need THIRDPARTYLICENSE for this?"},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe_table.h","line":27,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This came directly from the existing C files, so no net new THIRDPARTYLICENSE files should be required. The existing ones are in uts/intel/pcbe/THIRDPARTYLICENSE, uts/intel/pcbe/THIRDPARTYLICENSE.descrip."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"exception_lists/copyright","type":"MODIFIED","insertions":1,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/data/Makefile","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/data/amdpmc/Makefile","type":"ADDED","insertions":30,"deletions":0},{"file":"usr/src/data/amdpmc/README","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/data/amdpmc/f17h_core.json","type":"ADDED","insertions":1043,"deletions":0},{"file":"usr/src/man/man3cpc/cpc.3cpc","type":"MODIFIED","insertions":14,"deletions":-6},{"file":"usr/src/man/man3lib/libcpc.3lib","type":"MODIFIED","insertions":5,"deletions":-8},{"file":"usr/src/tools/cpcgen/cpcgen.c","type":"MODIFIED","insertions":701,"deletions":-114},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/uts/intel/ia32/os/cpc_subr.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/intel/opteron_pcbe/Makefile","type":"MODIFIED","insertions":30,"deletions":-2},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe.c","type":"MODIFIED","insertions":186,"deletions":-84},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe_table.h","type":"ADDED","insertions":105,"deletions":0},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":2150,"sizeDeletions":-219},{"number":"4","revision":"177712450ec588e96c02b2e47e86fb24e6d0ed8d","parents":["415cf8a5eb8e0e24078e9823addd997910540da3"],"ref":"refs/changes/52/6052/4","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1555903823,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555936337,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556032684,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556038761,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556038761,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"exception_lists/copyright","type":"MODIFIED","insertions":1,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/data/Makefile","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/data/amdpmc/Makefile","type":"ADDED","insertions":30,"deletions":0},{"file":"usr/src/data/amdpmc/README","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/data/amdpmc/f17h_core.json","type":"ADDED","insertions":1043,"deletions":0},{"file":"usr/src/man/man3cpc/cpc.3cpc","type":"MODIFIED","insertions":14,"deletions":-6},{"file":"usr/src/man/man3lib/libcpc.3lib","type":"MODIFIED","insertions":5,"deletions":-8},{"file":"usr/src/tools/cpcgen/cpcgen.c","type":"MODIFIED","insertions":701,"deletions":-114},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/uts/intel/ia32/os/cpc_subr.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/intel/opteron_pcbe/Makefile","type":"MODIFIED","insertions":30,"deletions":-2},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe.c","type":"MODIFIED","insertions":186,"deletions":-84},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe_table.h","type":"ADDED","insertions":105,"deletions":0},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":2150,"sizeDeletions":-219},{"number":"5","revision":"13dd97c362ee4ec0eeb64987b84e1fdfea90d021","parents":["27896fdc5eb580ff60d4bb646cf7488e1b8545b9"],"ref":"refs/changes/52/6052/5","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1556054427,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555936337,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556032684,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556038761,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556038761,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"exception_lists/copyright","type":"MODIFIED","insertions":1,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/data/Makefile","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/data/amdpmc/Makefile","type":"ADDED","insertions":30,"deletions":0},{"file":"usr/src/data/amdpmc/README","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/data/amdpmc/f17h_core.json","type":"ADDED","insertions":1043,"deletions":0},{"file":"usr/src/man/man3cpc/cpc.3cpc","type":"MODIFIED","insertions":14,"deletions":-6},{"file":"usr/src/man/man3lib/libcpc.3lib","type":"MODIFIED","insertions":5,"deletions":-8},{"file":"usr/src/tools/cpcgen/cpcgen.c","type":"MODIFIED","insertions":701,"deletions":-114},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/uts/intel/ia32/os/cpc_subr.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/intel/opteron_pcbe/Makefile","type":"MODIFIED","insertions":30,"deletions":-2},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe.c","type":"MODIFIED","insertions":186,"deletions":-84},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe_table.h","type":"ADDED","insertions":105,"deletions":0},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":2150,"sizeDeletions":-219},{"number":"6","revision":"a6a0e2aee988bd529ac3621e19f33518fe40a0b9","parents":["27896fdc5eb580ff60d4bb646cf7488e1b8545b9"],"ref":"refs/changes/52/6052/6","uploader":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"createdOn":1556054500,"author":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1556054508,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1555936337,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556032684,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556038761,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556038761,"by":{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"exception_lists/copyright","type":"MODIFIED","insertions":1,"deletions":0},{"file":"manifest","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/data/Makefile","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/data/amdpmc/Makefile","type":"ADDED","insertions":30,"deletions":0},{"file":"usr/src/data/amdpmc/README","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/data/amdpmc/f17h_core.json","type":"ADDED","insertions":1043,"deletions":0},{"file":"usr/src/man/man3cpc/cpc.3cpc","type":"MODIFIED","insertions":14,"deletions":-6},{"file":"usr/src/man/man3lib/libcpc.3lib","type":"MODIFIED","insertions":5,"deletions":-8},{"file":"usr/src/tools/cpcgen/cpcgen.c","type":"MODIFIED","insertions":701,"deletions":-114},{"file":"usr/src/uts/i86pc/os/cpuid.c","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"usr/src/uts/intel/ia32/os/cpc_subr.c","type":"MODIFIED","insertions":7,"deletions":0},{"file":"usr/src/uts/intel/opteron_pcbe/Makefile","type":"MODIFIED","insertions":30,"deletions":-2},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe.c","type":"MODIFIED","insertions":186,"deletions":-84},{"file":"usr/src/uts/intel/pcbe/opteron_pcbe_table.h","type":"ADDED","insertions":105,"deletions":0},{"file":"usr/src/uts/intel/sys/x86_archext.h","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":2150,"sizeDeletions":-219}],"allReviewers":[{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},{"name":"Dan McDonald","email":"danmcd@joyent.com","username":"danmcd"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}]}