{"project":"joyent/moray","branch":"master","id":"I643715648dd4153d4bd0a063a11ee75ff836e2e8","number":"1360","subject":"MORAY-382 moray repo docs need work Reviewed by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e Approved by: Robert Mustacchi \u003crm@joyent.com\u003e","owner":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"url":"https://cr.joyent.us/1360","commitMessage":"MORAY-382 moray repo docs need work\nReviewed by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e\nApproved by: Robert Mustacchi \u003crm@joyent.com\u003e\n","createdOn":1485529962,"lastUpdated":1485828863,"open":false,"status":"MERGED","comments":[{"timestamp":1485529962,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 1."},{"timestamp":1485529987,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1485530075,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\nFor reviewers: there\u0027s a rendered copy of this change at https://github.com/davepacheco/moray, and you can view the rendered diff there by clicking the little page icon on each file here:\nhttps://github.com/joyent/moray/compare/master...davepacheco:master"},{"timestamp":1485642488,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1: Code-Review+1\n\n(17 comments)"},{"timestamp":1485825325,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 2."},{"timestamp":1485825356,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1485825804,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2:\n\n(17 comments)"},{"timestamp":1485826699,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1485828434,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1485828822,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1485828863,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by David Pacheco"}],"currentPatchSet":{"number":"3","revision":"643715648dd4153d4bd0a063a11ee75ff836e2e8","parents":["788a26209d187f5edf218e61e94ff33121b05a24"],"ref":"refs/changes/60/1360/3","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1485828822,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1485825356,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1485826699,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1485828434,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1485828863,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":131,"deletions":-33},{"file":"docs/index.md","type":"MODIFIED","insertions":198,"deletions":-218},{"file":"env.sh","type":"MODIFIED","insertions":3,"deletions":-3}],"sizeInsertions":332,"sizeDeletions":-254},"patchSets":[{"number":"1","revision":"e8a6cfb8492361b28b6bc75d0f18984e896c0ff4","parents":["788a26209d187f5edf218e61e94ff33121b05a24"],"ref":"refs/changes/60/1360/1","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1485529962,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1485642488,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1485529987,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"README.md","line":14,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Should we keep the search bit?"},{"file":"README.md","line":14,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Done"},{"file":"README.md","line":26,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"This should probably link to the moray(1) manual page."},{"file":"README.md","line":26,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"These links aren\u0027t live yet, so I\u0027ve removed this confusing link and updated the link below."},{"file":"README.md","line":27,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Make this a link to https://github.com/joyent/node-moray/"},{"file":"README.md","line":27,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Done"},{"file":"README.md","line":39,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"The existing documentation uses \"key/value\", but the newly added bits use \"key-value\". I don\u0027t think it matters which one is used, but I think that we should be consistent. Looking around elsewhere, hyphenation seems to be the most popular way of writing it."},{"file":"README.md","line":39,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I\u0027ve updated the other places where I found this (one or two in this file and a few in docs/index.md)."},{"file":"README.md","line":166,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"How about: Just scp\u0027ing it into the GZ (Global Zone) and executing it should work."},{"file":"README.md","line":166,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Done"},{"file":"docs/index.md","line":47,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I think this should be stylized as \"deleteMany\" so that it matches the RPC name and batch operation."},{"file":"docs/index.md","line":47,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Done"},{"file":"docs/index.md","line":467,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"This bit needs some reworking. The client defaults to noCache: true today, and Moray doesn\u0027t ever try to read from the async slaves anymore, I believe. I\u0027ll try to think of something that we could put here instead, but it\u0027s possible we could just delete it."},{"file":"docs/index.md","line":467,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Done"},{"file":"docs/index.md","line":474,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"\"Moray\""},{"file":"docs/index.md","line":474,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Done"},{"file":"docs/index.md","line":477,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"s/increases/increase/"},{"file":"docs/index.md","line":477,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Done"},{"file":"docs/index.md","line":536,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Should this paragraph mention that using fields that aren\u0027t indexed can result in inaccurate counts, or return zero values when there are matching values?"},{"file":"docs/index.md","line":536,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I don\u0027t want to duplicate the documentation, and there aren\u0027t manual pages for these RPCs, so I\u0027ve added a sterner warning ahead of the suggestion to see the manual page (which does describe the problems in more detail)."},{"file":"docs/index.md","line":672,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"trailing space"},{"file":"docs/index.md","line":672,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Done"},{"file":"docs/index.md","line":678,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"How about \"merge the results in the returned value\". The current phrasing makes it sound like the JSON value in the database gets updated with the merge."},{"file":"docs/index.md","line":678,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Done"},{"file":"docs/index.md","line":909,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"\"Moray\""},{"file":"docs/index.md","line":909,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Done"},{"file":"docs/index.md","line":925,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"s/The/They/"},{"file":"docs/index.md","line":925,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Done"},{"file":"docs/index.md","line":931,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Can we insert here: Additionally, they run in the same callback chain as the rest of the operation, so failure to call the callback will stall the operation and leak the Postgres handle."},{"file":"docs/index.md","line":931,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Done"},{"file":"docs/index.md","line":935,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"`pre`"},{"file":"docs/index.md","line":935,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Done"},{"file":"docs/index.md","line":963,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"`post`"},{"file":"docs/index.md","line":963,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":128,"deletions":-31},{"file":"docs/index.md","type":"MODIFIED","insertions":182,"deletions":-202},{"file":"env.sh","type":"MODIFIED","insertions":3,"deletions":-3}],"sizeInsertions":313,"sizeDeletions":-236},{"number":"2","revision":"52e46fa1432eb7c1e14f967835a59e419f70b007","parents":["788a26209d187f5edf218e61e94ff33121b05a24"],"ref":"refs/changes/60/1360/2","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1485825325,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1485828434,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1485826699,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1485825356,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":131,"deletions":-33},{"file":"docs/index.md","type":"MODIFIED","insertions":198,"deletions":-218},{"file":"env.sh","type":"MODIFIED","insertions":3,"deletions":-3}],"sizeInsertions":332,"sizeDeletions":-254},{"number":"3","revision":"643715648dd4153d4bd0a063a11ee75ff836e2e8","parents":["788a26209d187f5edf218e61e94ff33121b05a24"],"ref":"refs/changes/60/1360/3","uploader":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"createdOn":1485828822,"author":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1485828863,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1485828434,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1485826699,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1485825356,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":131,"deletions":-33},{"file":"docs/index.md","type":"MODIFIED","insertions":198,"deletions":-218},{"file":"env.sh","type":"MODIFIED","insertions":3,"deletions":-3}],"sizeInsertions":332,"sizeDeletions":-254}],"allReviewers":[{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}]}