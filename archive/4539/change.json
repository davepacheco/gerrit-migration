{"project":"joyent/moray","branch":"master","id":"Idb014de5cd1ede1d0570a987781748e32bbb01ca","number":"4539","subject":"MORAY-480 Moray should pass an artedi collector to Cueball to expose connection-related failure events","owner":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"url":"https://cr.joyent.us/4539","commitMessage":"MORAY-480 Moray should pass an artedi collector to Cueball to expose connection-related failure events\n","createdOn":1531954975,"lastUpdated":1532026917,"open":false,"status":"MERGED","comments":[{"timestamp":1531954975,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Uploaded patch set 1."},{"timestamp":1531955029,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1532017654,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Patch Set 1: Code-Review+1\n\n(2 comments)\n\nLooks good to me, just some questions really."},{"timestamp":1532022281,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1: Code-Review+1 Integration-Approval+1\n\n(1 comment)\n\nLooks good to me. One question I have, since I haven\u0027t looked at artedi too closely: if we added a second cueball pool, and passed the collector to both, would one override the stats of the other?"},{"timestamp":1532022460,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1532022961,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Patch Set 1:\n\n\u003e (1 comment)\n \u003e \n \u003e Looks good to me. One question I have, since I haven\u0027t looked at\n \u003e artedi too closely: if we added a second cueball pool, and passed\n \u003e the collector to both, would one override the stats of the other?\n\nEach connection [set|pool] gets its own uuid upon creation and its added as a label within the collector so that the stats of one set or pool don\u0027t drown out the stats of another.  I pasted some sample output in the ticket.  If you\u0027re curious, you can checkout the sample output that I pasted in the ticket and look for the label \"uuid\"."},{"timestamp":1532023820,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1:\n\n\u003e Each connection [set|pool] gets its own uuid upon creation and its added as a label within the collector so that the stats of one set or pool don\u0027t drown out the stats of another.\n\nAh, neat. Makes sense. Thanks for the answer!"},{"timestamp":1532026569,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Patch Set 1:\n\n\u003e \u003e Each connection [set|pool] gets its own uuid upon creation and\n \u003e its added as a label within the collector so that the stats of one\n \u003e set or pool don\u0027t drown out the stats of another.\n \u003e \n \u003e Ah, neat. Makes sense. Thanks for the answer!\n\nYeah, you bet.  Hey Cody, real quick, I noticed that this conflicts with https://cr.joyent.us/4468 which is yours.  Are you ok with me integrating or would you rather I hold off until you tie that up?"},{"timestamp":1532026855,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1:\n\nGo for it. There are several things I want to check first before integrating that one."},{"timestamp":1532026913,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Patch Set 1:\n\n\u003e Go for it. There are several things I want to check first before\n \u003e integrating that one.\n\nRoger that.  Thank you, sir."},{"timestamp":1532026917,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Robert Bogart"}],"currentPatchSet":{"number":"1","revision":"db014de5cd1ede1d0570a987781748e32bbb01ca","parents":["f48867686146b6e707d2e5c2828f1a2f0c2dbe9b"],"ref":"refs/changes/39/4539/1","uploader":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"createdOn":1531954975,"author":{"name":"Robert Bogart","email":"robert.bogart@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1531955029,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1532017654,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1532022281,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1532022281,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1532026917,"by":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"}}],"comments":[{"file":"README.md","line":246,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Are you referring to these events: https://github.com/joyent/node-cueball/commit/09f6a09beb4e8b51e0f9e95da15f3d24a7e76720#diff-50e3aa130a4f97a42ee2cf111c7b1d9dR36? \n\nAre those documented anywhere?"},{"file":"README.md","line":246,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Good point.  I couldn\u0027t find them formally documented anywhere, so I filed https://github.com/joyent/node-cueball/issues/145 to track the issue."},{"file":"package.json","line":16,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Looks like this hasn\u0027t been released yet? https://github.com/joyent/node-cueball/releases"},{"file":"package.json","line":16,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"It looks like it was, but it wasn\u0027t tagged. I\u0027ve gone ahead and tagged 99002e0ec33c42bb360b849b921fc6a663339949 as \"v2.7.0\"."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/pg.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":4,"sizeDeletions":-2},"patchSets":[{"number":"1","revision":"db014de5cd1ede1d0570a987781748e32bbb01ca","parents":["f48867686146b6e707d2e5c2828f1a2f0c2dbe9b"],"ref":"refs/changes/39/4539/1","uploader":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"createdOn":1531954975,"author":{"name":"Robert Bogart","email":"robert.bogart@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1532022281,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1532022281,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1531955029,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1532017654,"by":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"}},{"type":"SUBM","value":"1","grantedOn":1532026917,"by":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"}}],"comments":[{"file":"README.md","line":246,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Are you referring to these events: https://github.com/joyent/node-cueball/commit/09f6a09beb4e8b51e0f9e95da15f3d24a7e76720#diff-50e3aa130a4f97a42ee2cf111c7b1d9dR36? \n\nAre those documented anywhere?"},{"file":"README.md","line":246,"reviewer":{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"},"message":"Good point.  I couldn\u0027t find them formally documented anywhere, so I filed https://github.com/joyent/node-cueball/issues/145 to track the issue."},{"file":"package.json","line":16,"reviewer":{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},"message":"Looks like this hasn\u0027t been released yet? https://github.com/joyent/node-cueball/releases"},{"file":"package.json","line":16,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"It looks like it was, but it wasn\u0027t tagged. I\u0027ve gone ahead and tagged 99002e0ec33c42bb360b849b921fc6a663339949 as \"v2.7.0\"."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/pg.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":4,"sizeDeletions":-2}],"allReviewers":[{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Jan Wyszynski","email":"jan.wyszynski@joyent.com","username":"IanWyszynski"},{"name":"Robert Bogart","email":"Robert.bogart@joyent.com","username":"rhb2"}]}