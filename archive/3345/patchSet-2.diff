From 512099f3d7d8420bb7cdfac4fc1b95a82331133e Mon Sep 17 00:00:00 2001
From: Rob Johnston <rob.johnston@joyent.com>
Date: Mon, 12 Feb 2018 18:21:31 +0000
Subject: [PATCH] OS-6597 Changes for OS-6490 break sparc build

---
 usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c b/usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c
index ecaa749bed..4f205432f6 100644
--- a/usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c
+++ b/usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c
@@ -17,7 +17,9 @@
 #include <fcntl.h>
 #include <fm/libtopo.h>
 #include <fm/topo_mod.h>
+#ifdef	__x86
 #include <sys/mc.h>
+#endif
 #include <sys/fm/protocol.h>
 #include <string.h>
 #include <unistd.h>
@@ -398,6 +400,7 @@ smbios_enum_memory(smbios_hdl_t *shp, const smbios_struct_t *sp, void *arg)
 static boolean_t
 has_mc_driver()
 {
+#ifdef	__x86
 	int mc_fd;
 	mc_snapshot_info_t mcs;
 
@@ -410,6 +413,9 @@ has_mc_driver()
 	}
 	(void) close(mc_fd);
 	return (B_TRUE);
+#else
+	return (B_TRUE);
+#endif
 }
 
 /*ARGSUSED*/
-- 
2.21.0

