From ca5742bd861365455e9c9953517d42967198fb02 Mon Sep 17 00:00:00 2001
From: Rob Johnston <rob.johnston@joyent.com>
Date: Mon, 12 Feb 2018 18:21:31 +0000
Subject: [PATCH] OS-6597 Changes for OS-6490 break sparc build

---
 usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c b/usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c
index 097bc2c09a..de043d8ba8 100644
--- a/usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c
+++ b/usr/src/lib/fm/topo/modules/common/smbios/smbios_enum.c
@@ -17,7 +17,9 @@
 #include <fcntl.h>
 #include <fm/libtopo.h>
 #include <fm/topo_mod.h>
+#ifdef	__x86
 #include <sys/mc.h>
+#endif
 #include <sys/fm/protocol.h>
 #include <string.h>
 #include <unistd.h>
@@ -530,6 +532,7 @@ err:
 static boolean_t
 has_mc_driver()
 {
+#ifdef	__x86
 	int mc_fd;
 	mc_snapshot_info_t mcs;
 
@@ -542,6 +545,9 @@ has_mc_driver()
 	}
 	(void) close(mc_fd);
 	return (B_TRUE);
+#else
+	return (B_TRUE);
+#endif
 }
 
 /*ARGSUSED*/
-- 
2.21.0

