{"project":"joyent/manta-mackerel","branch":"master","topic":"MANTA-2781","id":"I653f10889303e18d7e4dba39f119321ea1d753e1","number":"1599","subject":"MANTA-2781 mackerel: deliver-access does not handle backpressure properly","owner":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"url":"https://cr.joyent.us/1599","commitMessage":"MANTA-2781 mackerel: deliver-access does not handle backpressure properly\n","createdOn":1488408936,"lastUpdated":1489696701,"open":true,"status":"NEW","comments":[{"timestamp":1488408936,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 1."},{"timestamp":1488408946,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Topic set to MANTA-2781"},{"timestamp":1488408965,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1488409509,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 2."},{"timestamp":1488409557,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1489181545,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 2: Code-Review+1\n\n(4 comments)"},{"timestamp":1489691571,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 2:\n\n(4 comments)"},{"timestamp":1489691615,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Uploaded patch set 3."},{"timestamp":1489691645,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1489696701,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 3: Code-Review+1"}],"currentPatchSet":{"number":"3","revision":"653f10889303e18d7e4dba39f119321ea1d753e1","parents":["52e119c4e10b65371b5abc05b685e62a20c64d88"],"ref":"refs/changes/99/1599/3","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1489691615,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489691645,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489696701,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"assets/lib/deliver-access.js","type":"MODIFIED","insertions":190,"deletions":-69},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":192,"sizeDeletions":-69},"patchSets":[{"number":"1","revision":"21814bdfef5df0ab68dff13d7fa9cec92c39e829","parents":["52e119c4e10b65371b5abc05b685e62a20c64d88"],"ref":"refs/changes/99/1599/1","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1488408936,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1488408965,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"assets/lib/deliver-access.js","type":"MODIFIED","insertions":155,"deletions":-67},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":157,"sizeDeletions":-67},{"number":"2","revision":"ecd113b133a54423662ec78a08297b4c7aed8029","parents":["52e119c4e10b65371b5abc05b685e62a20c64d88"],"ref":"refs/changes/99/1599/2","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1488409509,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489181545,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1488409557,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"assets/lib/deliver-access.js","line":1,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"D: (not related to this change)"},{"file":"assets/lib/deliver-access.js","line":1,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Sad face indeed."},{"file":"assets/lib/deliver-access.js","line":207,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"It\u0027d be nice to have a comment about the input objects and output objects for this stream and what it does."},{"file":"assets/lib/deliver-access.js","line":207,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Done"},{"file":"assets/lib/deliver-access.js","line":318,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Could use a vasync barrier here."},{"file":"assets/lib/deliver-access.js","line":318,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"That\u0027s true, but I think I\u0027ll punt on it for now.  If we keep this code as part of Metering v2, I\u0027ll address it then."},{"file":"package.json","line":16,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I\u0027d suggest eliding the \"^\"."},{"file":"package.json","line":16,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"assets/lib/deliver-access.js","type":"MODIFIED","insertions":156,"deletions":-69},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":158,"sizeDeletions":-69},{"number":"3","revision":"653f10889303e18d7e4dba39f119321ea1d753e1","parents":["52e119c4e10b65371b5abc05b685e62a20c64d88"],"ref":"refs/changes/99/1599/3","uploader":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"createdOn":1489691615,"author":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489696701,"by":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489691645,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"assets/lib/deliver-access.js","type":"MODIFIED","insertions":190,"deletions":-69},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"tools/jsl.node.conf","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":192,"sizeDeletions":-69}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}]}