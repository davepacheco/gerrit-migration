{"project":"joyent/sdc-vmapi","branch":"master","id":"I95f05a784a24b90d42909b07c4c96e888cc89a45","number":"2745","subject":"ZAPI-802 drop pointless templating of VMAPI\u0027s SMF manifest Reviewed by: Todd Whiteman \u003ctodd.whiteman@joyent.com\u003e Approved by: Todd Whiteman \u003ctodd.whiteman@joyent.com\u003e","owner":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"url":"https://cr.joyent.us/2745","commitMessage":"ZAPI-802 drop pointless templating of VMAPI\u0027s SMF manifest\nReviewed by: Todd Whiteman \u003ctodd.whiteman@joyent.com\u003e\nApproved by: Todd Whiteman \u003ctodd.whiteman@joyent.com\u003e\n","createdOn":1507332088,"lastUpdated":1507334342,"open":false,"status":"MERGED","comments":[{"timestamp":1507332088,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 1."},{"timestamp":1507332089,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 0cefd12d86919fd7353076232fb288821041e3e4\n    \n    ZAPI-802 drop pointless templating of VMAPI\u0027s SMF manifest"},{"timestamp":1507332122,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1507333715,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\nTesting notes: a TRY_BRANCH build of VMAPI installed (via \u0027sdcadm up\u0027) just fine."},{"timestamp":1507333958,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1: Code-Review+1 Integration-Approval+1"},{"timestamp":1507334028,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Uploaded patch set 2: Commit message was updated."},{"timestamp":1507334033,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Trent Mick"},{"timestamp":1507334039,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1507334342,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\n(2 comments)\n\n@jclulow:"}],"currentPatchSet":{"number":"2","revision":"95f05a784a24b90d42909b07c4c96e888cc89a45","parents":["0bea167b7604fc3c5ac39bb42c4b71ed63650c39"],"ref":"refs/changes/45/2745/2","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1507334028,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507332122,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507333958,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507333958,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}},{"type":"SUBM","value":"1","grantedOn":1507334033,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"boot/configure.sh","type":"MODIFIED","insertions":3,"deletions":-7},{"file":"boot/setup.sh","type":"MODIFIED","insertions":2,"deletions":0},{"file":"smf/manifests/vmapi.xml","fileOld":"smf/manifests/vmapi.xml.in","type":"RENAMED","insertions":3,"deletions":-3}],"sizeInsertions":9,"sizeDeletions":-11},"patchSets":[{"number":"1","revision":"31a6be7c41b0c5249458f42159cde3f17dad4d12","parents":["0bea167b7604fc3c5ac39bb42c4b71ed63650c39"],"ref":"refs/changes/45/2745/1","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1507332088,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507332122,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507333958,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507333958,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"comments":[{"file":"boot/setup.sh","line":36,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"This file doesn\u0027t seem to use \"errexit\"; should we be checking the exit status here?"},{"file":"boot/setup.sh","line":36,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Fair. I\u0027ve opened ZAPI-804 to look into setting errexit. FWIW, the configure.sh from which I moved \u0027svccfg import\u0027 here also didn\u0027t have errexit."},{"file":"smf/manifests/vmapi.xml","line":35,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"What do we deploy in \"/usr/local/bin\"? (Can we remove that here also)"},{"file":"smf/manifests/vmapi.xml","line":35,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Sorry, I merged this already. I\u0027d looked at that too and a number of (cargo-culting, I assume) Triton API SMF manifests do the same.  They also have \"/usr/local/bin\" on their *PATH* so I\u0027d wanted to think about cleaning up the PATH entries at the same time -- or at least understanding where the /usr/local/bin PATH entry was from.\n\nZAPI-803 opened for that."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"boot/configure.sh","type":"MODIFIED","insertions":3,"deletions":-7},{"file":"boot/setup.sh","type":"MODIFIED","insertions":2,"deletions":0},{"file":"smf/manifests/vmapi.xml","fileOld":"smf/manifests/vmapi.xml.in","type":"RENAMED","insertions":3,"deletions":-3}],"sizeInsertions":9,"sizeDeletions":-11},{"number":"2","revision":"95f05a784a24b90d42909b07c4c96e888cc89a45","parents":["0bea167b7604fc3c5ac39bb42c4b71ed63650c39"],"ref":"refs/changes/45/2745/2","uploader":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"createdOn":1507334028,"author":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1507332122,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1507334033,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1507333958,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1507333958,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"boot/configure.sh","type":"MODIFIED","insertions":3,"deletions":-7},{"file":"boot/setup.sh","type":"MODIFIED","insertions":2,"deletions":0},{"file":"smf/manifests/vmapi.xml","fileOld":"smf/manifests/vmapi.xml.in","type":"RENAMED","insertions":3,"deletions":-3}],"sizeInsertions":9,"sizeDeletions":-11}],"allReviewers":[{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}]}