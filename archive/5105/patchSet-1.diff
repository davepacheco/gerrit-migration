From 4b3af15c2343fac2cb8e60d80f59a187d68a70f3 Mon Sep 17 00:00:00 2001
From: Trent Mick <trentm@gmail.com>
Date: Thu, 22 Nov 2018 13:35:53 -0800
Subject: [PATCH] TRITON-982 trim what node-mahi publishes to npm

---
 .gitignore   |  7 ++-----
 .npmignore   | 10 ++++++++++
 Makefile     |  2 +-
 package.json |  2 +-
 4 files changed, 14 insertions(+), 7 deletions(-)
 create mode 100644 .npmignore

diff --git a/.gitignore b/.gitignore
index ce891c9..3f3ade8 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1,9 +1,6 @@
 /node_modules
-/tmp
-build
-docs/*.json
-docs/*.html
+/build
+/mahi-*.tgz
 cscope.in.out
 cscope.po.out
 cscope.out
-smf/manifests/bapi.xml
diff --git a/.npmignore b/.npmignore
new file mode 100644
index 0000000..105aa84
--- /dev/null
+++ b/.npmignore
@@ -0,0 +1,10 @@
+cscope.in.out
+cscope.po.out
+cscope.out
+/deps
+/build
+/mahi-*.tgz
+/node_modules
+/test
+/tmp
+/tools
diff --git a/Makefile b/Makefile
index eafba1c..f590423 100644
--- a/Makefile
+++ b/Makefile
@@ -52,7 +52,7 @@ all: $(REPO_DEPS) $(TAP)
 $(TAP):
 	$(NPM) install
 
-CLEAN_FILES += $(TAP) ./node_modules/tap
+CLEAN_FILES += ./node_modules npm-debug.log mahi-*.tgz
 
 .PHONY: test
 test: $(TAP)
diff --git a/package.json b/package.json
index 465a879..c691895 100644
--- a/package.json
+++ b/package.json
@@ -1,7 +1,7 @@
 {
     "name": "mahi",
     "description": "Mahi client",
-    "version": "2.2.1",
+    "version": "2.2.2",
     "author": "Joyent (joyent.com)",
     "main": "index.js",
     "// lru-cache": "attempting to pin version while satisfying transitive deps, because lru-cache@4.1.4 includes yallist@3 which breaks node --abort-on-uncaught-exception with node <v4",
-- 
2.21.0

