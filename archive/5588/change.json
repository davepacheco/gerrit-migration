{"project":"joyent/sdc-cnapi","branch":"master","id":"If8cb28c02631b972e564b7c2d4c389fa08c0be56","number":"5588","subject":"TRITON-1180 cnapi waitlist ticket race if serverwaitlistticketrelease starts and completes during serverwaitlistticketcreate Reviewed by: Josh Wilsdon \u003cjosh@wilsdon.ca\u003e Approved by: Josh Wilsdon \u003cjosh@wilsdon.ca\u003e","owner":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"url":"https://cr.joyent.us/5588","commitMessage":"TRITON-1180 cnapi waitlist ticket race if serverwaitlistticketrelease starts and completes during serverwaitlistticketcreate\nReviewed by: Josh Wilsdon \u003cjosh@wilsdon.ca\u003e\nApproved by: Josh Wilsdon \u003cjosh@wilsdon.ca\u003e\n","createdOn":1550175033,"lastUpdated":1552071774,"open":false,"status":"MERGED","comments":[{"timestamp":1550175033,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 1."},{"timestamp":1550175037,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit edb5ef3645d897bc6bda8a166f527871082d8791\n    \n    add retry/backoff\n    \n    commit 1f65fdd02b5c80533c670c4131b2e688c9a6d50b\n    \n    wip"},{"timestamp":1550175063,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1550177088,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 2."},{"timestamp":1550177089,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 307f3c20c34c8c6fcb24feea691f7cdedf54f0b0\n    \n    add retry/backoff\n    \n    commit d819cc5172a6d2a5f8b224cfb833237f133b462a\n    \n    wip"},{"timestamp":1550177212,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1550183663,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 3."},{"timestamp":1550183664,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 859d723ccfc3fed9137018da2d8cc90bbcc1f3ff\n    \n    reduce log spam\n    \n    commit df076505cd6a1ac34adbd54347aed25246f70ccd\n    \n    slim down code somewhat"},{"timestamp":1550183692,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1550183875,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 4."},{"timestamp":1550183876,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 52fa4e13b9658bab130bff01c0698e62f1948911\n    \n    bump dates"},{"timestamp":1550183904,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1550186285,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 5."},{"timestamp":1550186287,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit c87e6bb0f7d65853e5a148cd9d3c07fbc73bfeea\n    \n    reduce log spam\n    \n    commit 78c0050f958c95948e2005ac123376d600e868e7\n    \n    bump dates\n    \n    commit df076505cd6a1ac34adbd54347aed25246f70ccd\n    \n    slim down code somewhat\n    \n    commit 307f3c20c34c8c6fcb24feea691f7cdedf54f0b0\n    \n    add retry/backoff\n    \n    commit d819cc5172a6d2a5f8b224cfb833237f133b462a\n    \n    wip"},{"timestamp":1550186314,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1550189369,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 6."},{"timestamp":1550189371,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit 4cca92f5c85f194fe3fd1539109763187eba71fa\n    \n    refactor waitlist logic to do a two-step activation process"},{"timestamp":1550189398,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing-1\n\n(2 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1550190932,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 7."},{"timestamp":1550190933,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 7:\n\nNew commits:\n    \n    commit 764c5238bf6c7045b98b0802cc174f645669d9e1\n    \n    fix make check\n    \n    commit 67bc7125879d0cbc361da1a201b12b00079c7b7d\n    \n    TRITON-1180"},{"timestamp":1550190961,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1550191979,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 8."},{"timestamp":1550191980,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 8:\n\nNew commits:\n    \n    commit 51d85af62c70da240acd71e286a909f1e9bd2d78\n    \n    TRITON-1180\n    fix make check"},{"timestamp":1550192008,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1550615737,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 8: Code-Review+1\n\n(5 comments)\n\nWhat tests have you run against this?"},{"timestamp":1551461120,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 9."},{"timestamp":1551461122,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 9:\n\nNew commits:\n    \n    commit 4fd5a70fc14a18e271f4b7e73e7b7569069d9a93\n    \n    Take steps to ensure we never get \u0027stuck\u0027 not activating tickets\n    \n    commit 030808ea9023e4cdce3e74dcc23f9cfdbb84dee8\n    \n    wip\n    \n    commit f9b5b98f10a5a01ef1fed437745d5871112a47ef\n    \n    wip\n    \n    commit 21dc73207f02a81d9b5889ff2f1548a203386589\n    \n    TRITON-1180\n    fix make check"},{"timestamp":1551461154,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1551467955,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 10."},{"timestamp":1551467956,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 10:\n\nNew commits:\n    \n    commit f439158b2cbeefd202a8dea62d5b665335a9606e\n    \n    uncomment out test"},{"timestamp":1551467988,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1551468707,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 9:\n\n(3 comments)"},{"timestamp":1551825914,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 11."},{"timestamp":1551825915,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 11:\n\nNew commits:\n    \n    commit 3e3059442d9bea8ac42f86b07eb6620f13d208af\n    \n    apply feedback"},{"timestamp":1551830620,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 9:\n\n(2 comments)"},{"timestamp":1552002247,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 11: Code-Review+1\n\nprobably need to update the version in package.json and rebase?"},{"timestamp":1552003644,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 12."},{"timestamp":1552003645,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 12:\n\nNew commits:\n    \n    commit ca5c55f365991f63a133f78b9ec9921875bf78a1\n    \n    apply feedback\n    \n    commit 8f715267cfc74eb5a745d6d515a3b1b504bcc9df\n    \n    uncomment out test\n    \n    commit a2c4459d43e84e3084cc46c4c56a4a4037738ff3\n    \n    Take steps to ensure we never get \u0027stuck\u0027 not activating tickets\n    \n    commit 04c5c78dcd7272ec8b7d80a8558e5a5385145c18\n    \n    wip\n    \n    commit bb9e9f986e7b73da4dc296ca6fb4f8b34c447447\n    \n    wip\n    \n    commit 1dd1effbb670b23327dace958fe9eb2ec0ff8f1c\n    \n    TRITON-1180\n    fix make check"},{"timestamp":1552005617,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 12: Code-Review+1 Integration-Approval+1\n\n¯\\_(ツ)_/¯"},{"timestamp":1552067549,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 13: Commit message was updated."},{"timestamp":1552071774,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Orlando Vazquez"}],"currentPatchSet":{"number":"13","revision":"f8cb28c02631b972e564b7c2d4c389fa08c0be56","parents":["ea42336ceda6187821e83f903b5812444bd14161"],"ref":"refs/changes/88/5588/13","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1552067549,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552005617,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1552005617,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"SUBM","value":"1","grantedOn":1552071774,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/endpoints/index.js","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/endpoints/waitlist.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"lib/models/waitlist.js","type":"MODIFIED","insertions":444,"deletions":-277},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":450,"sizeDeletions":-280},"patchSets":[{"number":"1","revision":"29b3018b36aa1a80905e79a213ba85deae7613f8","parents":["235dba3c798242ae1ca5bf420a0d47f2ace912c8"],"ref":"refs/changes/88/5588/1","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1550175033,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550175063,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/waitlist.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"lib/models/waitlist.js","type":"MODIFIED","insertions":190,"deletions":-242},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/model/test-model-server.js","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":194,"sizeDeletions":-246},{"number":"2","revision":"2376c3f7d6676fa3a92e626a857334eaf13d8c04","parents":["a2f3b06e5a2e6a24a9fc77392f368bdc8f851a39"],"ref":"refs/changes/88/5588/2","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1550177088,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550177212,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/waitlist.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"lib/models/waitlist.js","type":"MODIFIED","insertions":190,"deletions":-242},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":193,"sizeDeletions":-245},{"number":"3","revision":"2974164a2fefb1caf5fba6d22ca40d2ebda14c4a","parents":["a2f3b06e5a2e6a24a9fc77392f368bdc8f851a39"],"ref":"refs/changes/88/5588/3","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1550183663,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550183692,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/waitlist.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"lib/models/waitlist.js","type":"MODIFIED","insertions":240,"deletions":-286},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":243,"sizeDeletions":-289},{"number":"4","revision":"a4266071f6a5c26e0af4c141ed4393d558617029","parents":["a2f3b06e5a2e6a24a9fc77392f368bdc8f851a39"],"ref":"refs/changes/88/5588/4","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1550183875,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550183904,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/waitlist.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"lib/models/waitlist.js","type":"MODIFIED","insertions":241,"deletions":-287},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":245,"sizeDeletions":-291},{"number":"5","revision":"18151e44af3e1a4d666d6e749852c20949477f2e","parents":["a2f3b06e5a2e6a24a9fc77392f368bdc8f851a39"],"ref":"refs/changes/88/5588/5","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1550186285,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550186314,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/waitlist.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"lib/models/waitlist.js","type":"MODIFIED","insertions":237,"deletions":-283},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":241,"sizeDeletions":-287},{"number":"6","revision":"d0e07a3d19e0945b1a2ac973d8c338ebf1b8dc2c","parents":["a2f3b06e5a2e6a24a9fc77392f368bdc8f851a39"],"ref":"refs/changes/88/5588/6","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1550189369,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1550189398,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/models/waitlist.js","line":679,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line \u003e 80 characters"},{"file":"lib/models/waitlist.js","line":779,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"space or tab at end of line"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/waitlist.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"lib/models/waitlist.js","type":"MODIFIED","insertions":251,"deletions":-284},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":255,"sizeDeletions":-288},{"number":"7","revision":"89d0aa82d3805ed0dab72edde9cc2f7496dc5a87","parents":["a2f3b06e5a2e6a24a9fc77392f368bdc8f851a39"],"ref":"refs/changes/88/5588/7","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1550190932,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550190961,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/waitlist.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"lib/models/waitlist.js","type":"MODIFIED","insertions":262,"deletions":-284},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":266,"sizeDeletions":-288},{"number":"8","revision":"ddba6f314f3e59410a9f493f6de4381f38e7a45c","parents":["a2f3b06e5a2e6a24a9fc77392f368bdc8f851a39"],"ref":"refs/changes/88/5588/8","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1550191979,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1550192008,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1550615737,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"comments":[{"file":"lib/models/waitlist.js","line":591,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"is this missing \"with an\"?"},{"file":"lib/models/waitlist.js","line":608,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"is \"findNextTickets\" the right name for this function now that it finds all active and queued tickets?"},{"file":"lib/models/waitlist.js","line":789,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"extra space here, or gerrit is terrible?"},{"file":"lib/models/waitlist.js","line":899,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"This means we can still end up in a state where there\u0027s no active ticket, right? If we had etag error 10 times we just give up?"},{"file":"lib/models/waitlist.js","line":961,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"If we\u0027re not going to do anything here other than return next(err), you could just pass next here instead of creating a new function. No big deal though, it\u0027s fine how it is too."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/waitlist.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"lib/models/waitlist.js","type":"MODIFIED","insertions":263,"deletions":-266},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":267,"sizeDeletions":-270},{"number":"9","revision":"67b4a885d1968d8af3beb482743af3456be06472","parents":["f7901895f2645a0e293c693d85454e2580ab9eb9"],"ref":"refs/changes/88/5588/9","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1551461120,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1551461154,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/models/waitlist.js","line":686,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"I think you mean: \"...we can make sure we don\u0027t...\""},{"file":"lib/models/waitlist.js","line":686,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Done"},{"file":"lib/models/waitlist.js","line":692,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Might want to point out that the problem case is where we have a lot of etag conflicts, or other errors and then we timeout... which leaves no tickets active."},{"file":"test/waitlist/test-waitlist.js","line":774,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Hmmm. Is this something that needs to be removed? Or... fixed?"},{"file":"test/waitlist/test-waitlist.js","line":774,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"I will probably remove it in a subsequent commit."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/endpoints/index.js","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/endpoints/waitlist.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"lib/models/waitlist.js","type":"MODIFIED","insertions":443,"deletions":-277},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"test/waitlist/test-waitlist.js","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":452,"sizeDeletions":-283},{"number":"10","revision":"dcc6fae07e3ac4405e41c642eec6b6542f96ccbc","parents":["f7901895f2645a0e293c693d85454e2580ab9eb9"],"ref":"refs/changes/88/5588/10","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1551467955,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1551467988,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/index.js","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/endpoints/waitlist.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"lib/models/waitlist.js","type":"MODIFIED","insertions":443,"deletions":-277},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":450,"sizeDeletions":-281},{"number":"11","revision":"133d3891206f5fab49ad895adfbe0a77a07054c2","parents":["f7901895f2645a0e293c693d85454e2580ab9eb9"],"ref":"refs/changes/88/5588/11","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1551825914,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552002247,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/endpoints/index.js","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/endpoints/waitlist.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"lib/models/waitlist.js","type":"MODIFIED","insertions":444,"deletions":-277},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":451,"sizeDeletions":-281},{"number":"12","revision":"52861743b4c512832404cf98b3bfe61136eefa08","parents":["ea42336ceda6187821e83f903b5812444bd14161"],"ref":"refs/changes/88/5588/12","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1552003644,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552005617,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1552005617,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/endpoints/index.js","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/endpoints/waitlist.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"lib/models/waitlist.js","type":"MODIFIED","insertions":444,"deletions":-277},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":450,"sizeDeletions":-280},{"number":"13","revision":"f8cb28c02631b972e564b7c2d4c389fa08c0be56","parents":["ea42336ceda6187821e83f903b5812444bd14161"],"ref":"refs/changes/88/5588/13","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1552067549,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552005617,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1552005617,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"SUBM","value":"1","grantedOn":1552071774,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/endpoints/index.js","type":"MODIFIED","insertions":3,"deletions":0},{"file":"lib/endpoints/waitlist.js","type":"MODIFIED","insertions":1,"deletions":-2},{"file":"lib/models/waitlist.js","type":"MODIFIED","insertions":444,"deletions":-277},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-1}],"sizeInsertions":450,"sizeDeletions":-280}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}]}