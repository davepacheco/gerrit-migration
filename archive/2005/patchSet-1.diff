From ebeba1b01641fa6ad13813cc899c587554cc89cb Mon Sep 17 00:00:00 2001
From: Alex Wilson <alex.wilson@joyent.com>
Date: Thu, 25 May 2017 16:02:49 -0700
Subject: [PATCH] joyent/node-sshpk#29 tests fail with openssl 1.1.0e because
 of extra spaces in DN output

---
 test/openssl-cmd.js | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/test/openssl-cmd.js b/test/openssl-cmd.js
index ab27c93..a62d24f 100644
--- a/test/openssl-cmd.js
+++ b/test/openssl-cmd.js
@@ -222,10 +222,12 @@ function genTests() {
 			var output = Buffer.concat(bufs).toString();
 
 			var m = output.match(/Issuer: (.*)$/m);
-			t.strictEqual(m[1], 'CN=' + algo + ', C=US');
+			t.strictEqual(m[1].replace(/ = /g, '='),
+			    'CN=' + algo + ', C=US');
 
 			m = output.match(/Subject: (.*)$/m);
-			t.strictEqual(m[1], 'CN=' + algo + ', C=US');
+			t.strictEqual(m[1].replace(/ = /g, '='),
+			    'CN=' + algo + ', C=US');
 
 			var re = /DNS:([^, \n]+)([, ]+|$)/gm;
 			m = re.exec(output);
-- 
2.21.0

