{"project":"joyent/node-triton","branch":"master","id":"I225010194aa5980d0bdce61e9e6db979b172f042","number":"1035","subject":"joyent/node-triton#148 triton profile edit failes if EDITOR contains a space","owner":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"url":"https://cr.joyent.us/1035","commitMessage":"joyent/node-triton#148 triton profile edit failes if EDITOR contains a space\n","createdOn":1480565449,"lastUpdated":1488503044,"open":false,"status":"ABANDONED","comments":[{"timestamp":1480565449,"reviewer":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"message":"Uploaded patch set 1."},{"timestamp":1480565493,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1482285632,"reviewer":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"message":"Uploaded patch set 2."},{"timestamp":1482285661,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1482373403,"reviewer":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"message":"Uploaded patch set 3: Patch Set 2 was rebased."},{"timestamp":1482373660,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3:\n\n\"make check\" passed ok"},{"timestamp":1482984800,"reviewer":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"message":"Uploaded patch set 4: Patch Set 3 was rebased."},{"timestamp":1482984838,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4:\n\n\"make check\" passed ok"},{"timestamp":1483676882,"reviewer":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"message":"Uploaded patch set 5: Patch Set 4 was rebased."},{"timestamp":1483677015,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5:\n\n\"make check\" passed ok"},{"timestamp":1484542652,"reviewer":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"message":"Uploaded patch set 6: Patch Set 5 was rebased."},{"timestamp":1484542695,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6:\n\n\"make check\" passed ok"},{"timestamp":1484698575,"reviewer":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"message":"Uploaded patch set 7: Patch Set 6 was rebased."},{"timestamp":1484698604,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7:\n\n\"make check\" passed ok"},{"timestamp":1486014576,"reviewer":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"message":"Uploaded patch set 8: Patch Set 7 was rebased."},{"timestamp":1486014609,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8:\n\n\"make check\" passed ok"},{"timestamp":1486085772,"reviewer":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"message":"Uploaded patch set 9."},{"timestamp":1486085800,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1486947916,"reviewer":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"message":"Uploaded patch set 10: Patch Set 9 was rebased."},{"timestamp":1486947945,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10:\n\n\"make check\" passed ok"},{"timestamp":1487295756,"reviewer":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"message":"Uploaded patch set 11: Patch Set 10 was rebased."},{"timestamp":1487295790,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11:\n\n\"make check\" passed ok"},{"timestamp":1487550682,"reviewer":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"message":"Uploaded patch set 12: Patch Set 11 was rebased."},{"timestamp":1487550722,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 12:\n\n\"make check\" passed ok"},{"timestamp":1488235763,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 12: Code-Review-1\n\nThanks for a start at this. Some notes:\n\n1. This doesn\u0027t handle quotes properly, e.g. a quoted argv[0] to give a path to an editor binary with spaces in it. E.g.:\n\n```\n$ echo $EDITOR\n\"/Applications/Mac Vim/MacVim.app/Contents/MacOS/Vim\" -f\n[12:25:22 trentm@danger0:~/joy/node-triton (cr-1035-12)]\n$ triton profile edit foo\nXXX EDITOR: \"\\\"/Applications/Mac Vim/MacVim.app/Contents/MacOS/Vim\\\" -f\"\nXXX editor: \"\\\"/Applications/Mac\"\nXXX editorArgs: [\"Vim/MacVim.app/Contents/MacOS/Vim\"]\nevents.js:141\n      throw er; // Unhandled \u0027error\u0027 event\n      ^\n\nError: spawn \"/Applications/Mac ENOENT\n    at exports._errnoException (util.js:907:11)\n    at Process.ChildProcess._handle.onexit (internal/child_process.js:189:32)\n    at onErrorNT (internal/child_process.js:355:16)\n    at nextTickCallbackWith2Args (node.js:458:9)\n    at process._tickCallback (node.js:372:17)\n    at Function.Module.runMain (module.js:443:11)\n    at startup (node.js:139:18)\n    at node.js:990:3\n```\n\n2. Here is a start that fixes that (and also improves logging and fixes an issue with returning an error if the spanw fails): https://gist.github.com/trentm/efabb9c79464243c50a81e2ecfb01be0\n\n3. However, I would still like to avoid the spawn-args dep. I don\u0027t love its quality (see comments on that below).  Instead I\u0027d like to see a new function added to common.js to do the line-to-argv conversion. For example it could be a translation of this Python code:  https://github.com/trentm/cmdln/blob/master/lib/cmdln.py#L1345-L1463\n\nI might try to poke at that sometime, or if you want you could have a go at that.\n\n\nComments on spawn-args:\n\n\n- this should throw:\n```\n\u003e spawnargs(\u0027\"foo\\\u0027\u0027, {removequotes: \u0027always\u0027})\n[]\n```\n\n- Its \"remotequotes\":\"always\" option should be the default and shouldn\u0027t be optional."},{"timestamp":1488259406,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 12:\n\nalternative CR: https://cr.joyent.us/#/c/1586/\n\nYong,\nWould you be willing to review that one?"},{"timestamp":1488503044,"reviewer":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"message":"Abandoned\n\nit is duplicated"}],"currentPatchSet":{"number":"12","revision":"225010194aa5980d0bdce61e9e6db979b172f042","parents":["98ba032b5d51ec09dc40d338c0decd8759d465a2"],"ref":"refs/changes/35/1035/12","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1487550682,"author":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1486085800,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1488235763,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":16,"sizeDeletions":-1},"patchSets":[{"number":"1","revision":"3ddd45c4bffd1787061763d0642e114d5650d778","parents":["696439f1ae107c6a6fe0bc4949b0ddb0605dc939"],"ref":"refs/changes/35/1035/1","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1480565449,"author":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1480565493,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":16,"sizeDeletions":-1},{"number":"2","revision":"89b2fcf8d5534d1ba5b90f0d77e882e0f9c1db9a","parents":["c7140609f0d887391b58eea407f01dd10da17846"],"ref":"refs/changes/35/1035/2","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1482285632,"author":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482285661,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":16,"sizeDeletions":-1},{"number":"3","revision":"6a32ac11f9377350a4608d3318b7b7a2dee691b7","parents":["3a369e4bb834d0e65a4a030e21c7f9dc9481a7d9"],"ref":"refs/changes/35/1035/3","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1482373403,"author":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482285661,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":16,"sizeDeletions":-1},{"number":"4","revision":"2349427fe30f0c686a65e6c5da7f513004492738","parents":["04cc61ee1ddbaf4f229ee36450ec21b486154d6e"],"ref":"refs/changes/35/1035/4","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1482984800,"author":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482285661,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":16,"sizeDeletions":-1},{"number":"5","revision":"8a07f7e14ae06994dc079e9981bc744166efba82","parents":["76759e547e67d0c45970bb881f90ae9a82912c77"],"ref":"refs/changes/35/1035/5","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1483676882,"author":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482285661,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":16,"sizeDeletions":-1},{"number":"6","revision":"0a0b0e090f60b8f7cda4b70c6521949c81de799d","parents":["d99110553d768226f9fb30765e37738d9a4427b3"],"ref":"refs/changes/35/1035/6","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1484542652,"author":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482285661,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":16,"sizeDeletions":-1},{"number":"7","revision":"415bc8bb3c10d68fbed29621415baa32a46189b6","parents":["c7c91aea8314c972cb09d406f98ce02b032bafc3"],"ref":"refs/changes/35/1035/7","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1484698575,"author":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482285661,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":16,"sizeDeletions":-1},{"number":"8","revision":"c580d85eee218842d2c9b12b961149aeb3f73fab","parents":["75cb032f3a4d143ca9fe65e5d4d02ad040c537fb"],"ref":"refs/changes/35/1035/8","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1486014576,"author":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1482285661,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":16,"sizeDeletions":-1},{"number":"9","revision":"349d4c2aaf02c614c57046ca46f644764feb228e","parents":["1503088abd917f40368d5d80ce1c1e2c83ea5a96"],"ref":"refs/changes/35/1035/9","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1486085772,"author":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1486085800,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":16,"sizeDeletions":-1},{"number":"10","revision":"8396e4b8c0995bff2bdace24e2478b58db37988f","parents":["3f4eff598c86f7ded9f09fe00a32d79cae1cb6b9"],"ref":"refs/changes/35/1035/10","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1486947916,"author":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1486085800,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":16,"sizeDeletions":-1},{"number":"11","revision":"1f76f50c02f3aa304f3985115a36f5de15d49b67","parents":["ec9b6cc5aae21b9ee9502afa1da116f2da4e9910"],"ref":"refs/changes/35/1035/11","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1487295756,"author":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1486085800,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":16,"sizeDeletions":-1},{"number":"12","revision":"225010194aa5980d0bdce61e9e6db979b172f042","parents":["98ba032b5d51ec09dc40d338c0decd8759d465a2"],"ref":"refs/changes/35/1035/12","uploader":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"createdOn":1487550682,"author":{"name":"Yang Yong","email":"yy1111.yang@samsung.com","username":"YangYong3"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1486085800,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1488235763,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":16,"sizeDeletions":-1}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}]}