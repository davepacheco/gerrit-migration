{"project":"joyent/sdc-docker","branch":"master","id":"Id14b04dbf76a1e870f7025c121b979cbc3fcb22b","number":"1778","subject":"DOCKER-1032 test-docker failure in nightly: cli-links.test.js (DOCKER_CLI_VERSION\u003d1.10.3) Reviewed by: Trent Mick \u003ctrent.mick@joyent.com\u003e Approved by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e","owner":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"url":"https://cr.joyent.us/1778","commitMessage":"DOCKER-1032 test-docker failure in nightly: cli-links.test.js (DOCKER_CLI_VERSION\u003d1.10.3)\nReviewed by: Trent Mick \u003ctrent.mick@joyent.com\u003e\nApproved by: Julien Gilli \u003cjulien.gilli@joyent.com\u003e\n","createdOn":1491856788,"lastUpdated":1491942047,"open":false,"status":"MERGED","comments":[{"timestamp":1491856788,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 1."},{"timestamp":1491856824,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1491857537,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1491857775,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1491858864,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1491862782,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 2."},{"timestamp":1491862819,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1491863461,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(2 comments)"},{"timestamp":1491863692,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 2:\n\n(2 comments)"},{"timestamp":1491864322,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1491864454,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1491869447,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 3."},{"timestamp":1491869478,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1491926258,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1491941916,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1491942039,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 4: Commit message was updated."},{"timestamp":1491942047,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Julien Gilli"}],"currentPatchSet":{"number":"4","revision":"eadaa0a85cef3ae6a18c685392638f0c2a654fb9","parents":["acdd806ac8c8db7320da560f2acedde8576ff891"],"ref":"refs/changes/78/1778/4","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1491942039,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1491869478,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491926258,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1491941916,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"SUBM","value":"1","grantedOn":1491942047,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":59,"deletions":-27},{"file":"lib/models/link.js","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":60,"sizeDeletions":-27},"patchSets":[{"number":"1","revision":"98f72696d76085fe34641c6dc13f5fd80f8c2bd1","parents":["acdd806ac8c8db7320da560f2acedde8576ff891"],"ref":"refs/changes/78/1778/1","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1491856788,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1491856824,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/backends/sdc/containers.js","line":1117,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"should be `callback`, right?"},{"file":"lib/backends/sdc/containers.js","line":1117,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Right, good catch."},{"file":"lib/backends/sdc/containers.js","line":3398,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"This should say instead that the deleteVm *job* was *started* successfully. Also include the job info object (perhaps renaming `job` to `jobInfo`)."},{"file":"lib/backends/sdc/containers.js","line":3398,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Ah, I missed `sync: true` above. Including the job object would be useful, still."},{"file":"lib/backends/sdc/containers.js","line":3398,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Agreed on including the job object. Will fix."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":35,"deletions":-17}],"sizeInsertions":35,"sizeDeletions":-17},{"number":"2","revision":"bfb7809211dd8b13db139b2b4db0882e88c1f267","parents":["acdd806ac8c8db7320da560f2acedde8576ff891"],"ref":"refs/changes/78/1778/2","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1491862782,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1491862819,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/backends/sdc/containers.js","line":1140,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Are link objects big here? Else it would be nice to log which ones we\u0027ve found for deleting."},{"file":"lib/backends/sdc/containers.js","line":1140,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"A typical link object looks like the following:\n\n{\n\t\"owner_uuid\": \"34aad20a-71d5-467c-850a-add5218bce97\",\n\t\"container_uuid\": \"21fd2882-78b1-6c89-fe0e-d989df910004\",\n\t\"container_name\": \"sdcdockertest_link_link_container_r\",\n\t\"target_uuid\": \"60d2416c-92ee-c17a-b9f1-dde7aa493c8c\",\n\t\"target_name\": \"sdcdockertest_link_target_r\",\n\t\"alias\": \"target\"\n}"},{"file":"lib/backends/sdc/containers.js","line":1140,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"I\u0027d be inclined to log them if they aren\u0027t already loged in `Link.del`. You?  nit tho."},{"file":"lib/backends/sdc/containers.js","line":1140,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"They are logged in \u0027Link.del\u0027 as debug. I\u0027m ok with logging them as info here."},{"file":"lib/backends/sdc/containers.js","line":3469,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"number of \"%[ds]\" doesn\u0027t match number of args."},{"file":"lib/backends/sdc/containers.js","line":3469,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Will fix."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":57,"deletions":-26},{"file":"lib/models/link.js","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":58,"sizeDeletions":-26},{"number":"3","revision":"d14b04dbf76a1e870f7025c121b979cbc3fcb22b","parents":["acdd806ac8c8db7320da560f2acedde8576ff891"],"ref":"refs/changes/78/1778/3","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1491869447,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1491869478,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491926258,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1491941916,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":59,"deletions":-27},{"file":"lib/models/link.js","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":60,"sizeDeletions":-27},{"number":"4","revision":"eadaa0a85cef3ae6a18c685392638f0c2a654fb9","parents":["acdd806ac8c8db7320da560f2acedde8576ff891"],"ref":"refs/changes/78/1778/4","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1491942039,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1491869478,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1491926258,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1491941916,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"SUBM","value":"1","grantedOn":1491942047,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":59,"deletions":-27},{"file":"lib/models/link.js","type":"MODIFIED","insertions":1,"deletions":0}],"sizeInsertions":60,"sizeDeletions":-27}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}]}