commit 526c715ce729ce0e0b68c7c45b201903277e2484 (refs/changes/67/3367/2)
Author: Mike Zeller <mike.zeller@joyent.com>
Date:   2018-02-15T08:57:54-08:00 (1 year, 8 months ago)
    
    TRITON-144 cloudapi is missing a "field" parameter in duplicate IP errors
        Reviewed by: Trent Mick <trent.mick@joyent.com>
        Approved by: Trent Mick <trent.mick@joyent.com>

diff --git a/lib/errors.js b/lib/errors.js
index 9a7c949..e74be82 100644
--- a/lib/errors.js
+++ b/lib/errors.js
@@ -438,6 +438,7 @@ function translateDuplicateIpErrors(error) {
              * have provisioned the zone.
              */
             return {
+                field: 'ip',
                 code: 'UsedBy',
                 message: 'IP in use'
             };
diff --git a/test/machines.test.js b/test/machines.test.js
index 848f19c..67c1380 100644
--- a/test/machines.test.js
+++ b/test/machines.test.js
@@ -1628,6 +1628,7 @@ test('Create Machine using network and in use IP', function (t) {
             code: 'InvalidParameters',
             message: 'Invalid parameters',
             errors: [ {
+                field: 'ip',
                 code: 'UsedBy',
                 message: 'IP in use'
             } ]
