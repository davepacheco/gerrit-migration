{"project":"joyent/sdc-docker","branch":"master","id":"Iffbea193e69d3e687e4fe37629e5f910df7b91e0","number":"2433","subject":"DOCKER-1047 Allow network pools as arguments for --network and --label triton.network.public Reviewed by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e Reviewed by: Todd Whiteman \u003ctodd.whiteman@joyent.com\u003e Approved by: Todd Whiteman \u003ctodd.whiteman@joyent.com\u003e","owner":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"url":"https://cr.joyent.us/2433","commitMessage":"DOCKER-1047 Allow network pools as arguments for --network and --label triton.network.public\nReviewed by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e\nReviewed by: Todd Whiteman \u003ctodd.whiteman@joyent.com\u003e\nApproved by: Todd Whiteman \u003ctodd.whiteman@joyent.com\u003e\n","createdOn":1503098223,"lastUpdated":1505528478,"open":false,"status":"MERGED","comments":[{"timestamp":1503098223,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 1."},{"timestamp":1503098256,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n(9 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1503098726,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 2."},{"timestamp":1503098768,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1503098882,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 3."},{"timestamp":1503098919,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1503445197,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 3:\n\n(4 comments)"},{"timestamp":1503448464,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Patch Set 3:\n\n(4 comments)"},{"timestamp":1503698066,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 4."},{"timestamp":1503698099,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1503938783,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1503951520,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1503954165,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1503954967,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 4:\n\n(3 comments)"},{"timestamp":1503955180,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1503957454,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1503960577,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 5."},{"timestamp":1503960619,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1504292401,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1504297769,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1504298170,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 6."},{"timestamp":1504298207,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1504301299,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1504302005,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1504302802,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 7."},{"timestamp":1504302841,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1504303474,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 7: Code-Review+1\n\nPlease have someone else review the vasync.tryEach parts as previously discussed (I\u0027d suggest Cody, Trent or Julian).\n\nOtherwise, looks good to me!"},{"timestamp":1504303710,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Patch Set 7:\n\nHey Todd, thanks for reviewing! I\u0027ve already pinged Julien, and he agreed to take a look at the tryEach code."},{"timestamp":1504627479,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 7: Code-Review+1\n\n(5 comments)"},{"timestamp":1504643830,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Patch Set 7:\n\n(4 comments)"},{"timestamp":1504651660,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Patch Set 7:\n\n(1 comment)"},{"timestamp":1504808014,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 8."},{"timestamp":1504808047,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1504892766,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 8: Code-Review+1\n\n(1 comment)"},{"timestamp":1504901112,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 8: Integration-Approval+1"},{"timestamp":1504902130,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Patch Set 8:\n\n(1 comment)"},{"timestamp":1505100651,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 9."},{"timestamp":1505100689,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing-1\n\n(2 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1505101079,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 10."},{"timestamp":1505101112,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1505164172,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 11."},{"timestamp":1505164210,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1505164391,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 12."},{"timestamp":1505164429,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 12: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1505429109,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 13."},{"timestamp":1505429148,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 13: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1505429199,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 14."},{"timestamp":1505429236,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 14: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1505508906,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 15: Patch Set 14 was rebased."},{"timestamp":1505508948,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 15:\n\n\"make check\" passed ok"},{"timestamp":1505520533,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 15:\n\n(1 comment)"},{"timestamp":1505523433,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Uploaded patch set 16."},{"timestamp":1505523467,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 16: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1505524913,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 16: Code-Review+1 Integration-Approval+1"},{"timestamp":1505528297,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Patch Set 17: Commit message was updated."},{"timestamp":1505528478,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Nick Zivkovic"}],"currentPatchSet":{"number":"17","revision":"9a9337cc3f2e77dd850872d101a7bb01e6872fb9","parents":["b751d9dc133205bf1a81b28b8eec0ddc2a1cc19f"],"ref":"refs/changes/33/2433/17","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1505528297,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505523467,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505524913,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1505524913,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}},{"type":"SUBM","value":"1","grantedOn":1505528478,"by":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":8,"deletions":-16},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":123,"deletions":-9},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-create.test.js","type":"MODIFIED","insertions":35,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":23,"deletions":0}],"sizeInsertions":193,"sizeDeletions":-28},"patchSets":[{"number":"1","revision":"9056793ba2c1f04cd48b056ff5acc37f87025da7","parents":["ade9dd9f71902a99d1d457cd77c24c32d0c0001d"],"ref":"refs/changes/33/2433/1","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1503098223,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1503098256,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/backends/sdc/networks.js","line":281,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: comparisons against null, 0, true, false, or an empty string allowing implicit type conversion (use \u003d\u003d\u003d or !\u003d\u003d)"},{"file":"lib/backends/sdc/networks.js","line":296,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: comparisons against null, 0, true, false, or an empty string allowing implicit type conversion (use \u003d\u003d\u003d or !\u003d\u003d)"},{"file":"lib/backends/sdc/networks.js","line":328,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: comparisons against null, 0, true, false, or an empty string allowing implicit type conversion (use \u003d\u003d\u003d or !\u003d\u003d)"},{"file":"lib/backends/sdc/networks.js","line":343,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: comparisons against null, 0, true, false, or an empty string allowing implicit type conversion (use \u003d\u003d\u003d or !\u003d\u003d)"},{"file":"lib/backends/sdc/networks.js","line":400,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: variable is declared but never referenced: napi"},{"file":"test/integration/api-create.test.js","line":387,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: variable is declared but never referenced: network_pool"},{"file":"test/integration/api-create.test.js","line":453,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: variable is declared but never referenced: external_uuid"},{"file":"test/integration/api-create.test.js","line":494,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: identifer t hides an identifier in a parent scope"},{"file":"test/integration/api-create.test.js","line":497,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: identifer err hides an identifier in a parent scope"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":8,"deletions":-15},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":112,"deletions":-8},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-create.test.js","type":"MODIFIED","insertions":42,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":23,"deletions":0}],"sizeInsertions":187,"sizeDeletions":-25},{"number":"2","revision":"27484e9e6e173c66427cb2c5f8fedfa0a5dc7349","parents":["ade9dd9f71902a99d1d457cd77c24c32d0c0001d"],"ref":"refs/changes/33/2433/2","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1503098726,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1503098768,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/integration/api-create.test.js","line":544,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line \u003e 80 characters"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":8,"deletions":-15},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":112,"deletions":-9},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-create.test.js","type":"MODIFIED","insertions":38,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":23,"deletions":0}],"sizeInsertions":183,"sizeDeletions":-26},{"number":"3","revision":"eb7210c98ff4bc0d7253f92702c5853333313814","parents":["ade9dd9f71902a99d1d457cd77c24c32d0c0001d"],"ref":"refs/changes/33/2433/3","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1503098882,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1503098919,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/backends/sdc/networks.js","line":278,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"For vasync.tryEach - what happens in the case of a napi function call returning an error (e.g. a connection reset error, or a request parameter error)? Does it just try the next case - what happens to that napi error at the end?\n\nTo me it looks like the napi error would be subsequently lost (by the \"final\" method).\n\nMy preference would be to use a vasync.pipeline, and that in the case of a napi error, the error (name or error code) is checked such that only an expected error is allowed to proceed (e.g. on a 404 not found error). Any other error is a hard error, stopping the vasync pipeline."},{"file":"lib/backends/sdc/networks.js","line":278,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Ah, I forgot about non-404 errors. I assumed that since we error out when we return an empty list anyway, that forwarding the error was more or less optional. But yes, we certainly don\u0027t want this tryEach to continue even if NAPI returned a non-404. We want to keep the stop-on-success success behavior of tryEach and additionally we want to stop on a non-404. We can do this more easily from within the tryEach construct than from pipeline (at least it seems that way to me), by doing `cb(null, err)` when we hit the non-404 errors. We then forward this to our caller (findNetworkOrPoolByNmeOrId) via the callback-func we pass to tryEach.\n\nAlso, I\u0027ll add a comment here about non-404\u0027s for our fellow travelers."},{"file":"lib/backends/sdc/networks.js","line":278,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"I think pipeline could still be a good match for this workflow, rather than tryEach. With pipeline you can use an early abort marker to signal that the pipeline chain should stop when a match has been found. Here is an example in the docker images code which breaks the pipeline when the image was found:\n\nhttps://github.com/joyent/sdc-docker/blob/bf38a7f08889ec11d5fc87ef660f0163bd6bc593/lib/backends/sdc/images.js#L835\nhttps://github.com/joyent/sdc-docker/blob/bf38a7f08889ec11d5fc87ef660f0163bd6bc593/lib/backends/sdc/images.js#L813\n\nThis way, you can abort the chain in the case of an unhandled error, by using next(err), or end the chain in the case of an early match, by using next(true) and return the wanted result.\n\nWhat do you think of this approach?"},{"file":"lib/backends/sdc/networks.js","line":278,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Hey, so I\u0027ve written code implementing the non-404 error handling using tryEach before seeing your comment here last Friday:\n\nhttps://cr.joyent.us/#/c/2433/4/lib/backends/sdc/networks.js\n\nAnd it seems that using either one would involve passing an object to the callback --- in the error or result slot for pipeline and tryEach, respectively --- so that the final callback would know if it stopped on success or on a bad error.\n\nBoth methods are analogous to each other, but I am not inclined to change it around unless the pipeline approach is substantially better in some non-obvious way."},{"file":"lib/backends/sdc/networks.js","line":278,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Your approach does likely achieve the same result.\n\nIt could be because I\u0027m unfamiliar with tryEach, but I find it is harder for me to follow and understand this code.\n\nAnyway, I\u0027ll move past this for now (and continue reviewing the rest), but I\u0027ll ask you to get someone else\u0027s opinion on that methodology (tryEach v\u0027s pipeline) for this code."},{"file":"lib/backends/sdc/networks.js","line":278,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Sure thing, I\u0027ll ping Cody and Julien as soon as I implement the other feedback below. Thanks, btw!"},{"file":"lib/backends/sdc/networks.js","line":278,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Now that the code bails on non-404 errors, it seems good to me. If you wanted to implement this using just pipeline, you could set a top-level variable with the result value, and skip anything when it\u0027s set:\n\n    var result \u003d null;\n    \n    vasync.pipeline({ funcs: [\n        ...\n        function (_, cb) {\n            if (result !\u003d\u003d null) {\n                cb();\n                return;\n            }\n\n            ...\n        }\n    ], function (err) {\n        callback(err, result);\n    });"},{"file":"lib/backends/sdc/networks.js","line":288,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"I\u0027m not sure why this function is added? Are we now allowing wildcard \u0027*\u0027 in the network names?\n\nSame goes for the \u0027listFiltNetPools\u0027 function."},{"file":"lib/backends/sdc/networks.js","line":288,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Well, no. We can search by either name or uuid. So, if we are talking to an old NAPI that does not match prefixes of UUIDs, we will have to filter through them ourselves (if we don\u0027t we will end up returning bad info to the user -- i.e. the network or pool was not found, when in fact it does exist)."},{"file":"lib/backends/sdc/networks.js","line":425,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Nit: I prefer the main argument \u0027listParams\u0027 to be ahead of opts, e.g.:\n  getNetworksOrPools(listParams, opts, cb);"},{"file":"lib/backends/sdc/networks.js","line":425,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Ah right. I\u0027ll swap them."},{"file":"package.json","line":32,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"We are moving away from git url hashes, is there a released version? If not, can we make a release of vasync?"},{"file":"package.json","line":32,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Yeah, this is just for development and testing. There will be a new version of vasync released soon (after Dap returns). This particular change fixes a bug that affects pipeline (and forEachPipeline), which we use throughout the code. So, we won\u0027t integrate these changes before we publish vasync 2.1.0."},{"file":"test/integration/api-create.test.js","line":499,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I think we can just remove this block, unless you wanted to write some additional tests after it."},{"file":"test/integration/api-create.test.js","line":499,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"THis has already been removed."},{"file":"test/integration/api-create.test.js","line":499,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Ah, I missed that, sorry."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":8,"deletions":-15},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":112,"deletions":-9},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-create.test.js","type":"MODIFIED","insertions":39,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":23,"deletions":0}],"sizeInsertions":184,"sizeDeletions":-26},{"number":"4","revision":"4531f105c24cc492f5d18432312e6d9ada93131a","parents":["ade9dd9f71902a99d1d457cd77c24c32d0c0001d"],"ref":"refs/changes/33/2433/4","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1503698066,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1503698099,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/backends/sdc/networks.js","line":292,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Please add a comment for this function that it is used in the case of an old NAPI (i.e. one that does not match partial UUIDs)."},{"file":"lib/backends/sdc/networks.js","line":313,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"I don\u0027t think this case can exist - as the function returns at the beginning if (params.name) exists.\n\nSame goes for listFiltNetPools."},{"file":"lib/backends/sdc/networks.js","line":317,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"This (having a \u0027*\u0027 suffix) has to be the case for a partial uuid match, right? If so, this check can be moved to the beginning of the function and much of this filter function can be simplified to a one-line uuid substr check.\n\nSame goes for listFiltNetPools."},{"file":"test/integration/api-create.test.js","line":499,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"It looks like this code can be dropped - as there is a \u0027t2.end()\u0027 call right after this code."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":8,"deletions":-15},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":124,"deletions":-9},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-create.test.js","type":"MODIFIED","insertions":39,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":23,"deletions":0}],"sizeInsertions":196,"sizeDeletions":-26},{"number":"5","revision":"38d08e0874c5f92e7ee35d65f68dc85248b78b8d","parents":["ade9dd9f71902a99d1d457cd77c24c32d0c0001d"],"ref":"refs/changes/33/2433/5","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1503960577,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1503960619,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/backends/sdc/networks.js","line":317,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"It seems str will be getting shorter and shorter the more this code is run... I\u0027d rename that variable to \u0027uuidPrefix\u0027 and set it once at the beginning of listFiltNets, then compare the p.uuid against uuidPrefix.\n\nSame for listFiltNetPools()."},{"file":"lib/backends/sdc/networks.js","line":317,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Good catch, renaming."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":8,"deletions":-15},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":120,"deletions":-9},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-create.test.js","type":"MODIFIED","insertions":35,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":23,"deletions":0}],"sizeInsertions":188,"sizeDeletions":-26},{"number":"6","revision":"6d287ee3316a78673cb29d78b6520167dd0ae911","parents":["ade9dd9f71902a99d1d457cd77c24c32d0c0001d"],"ref":"refs/changes/33/2433/6","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1504298170,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1504298207,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/backends/sdc/networks.js","line":302,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Nit: This is where you should set the \u0027uuidPrefix\u0027 variable (and sz/length if you wanted as well), rather than in the listNetworks callback - as you only need to calculate it the once, rather than re-calculating it on every filtered result object.\n\nNote that using \u0027str\u0027 as a variable name is often too generic, a more descriptive name will be appreciated :)"},{"file":"lib/backends/sdc/networks.js","line":302,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Good point, changing."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":8,"deletions":-15},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":122,"deletions":-9},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-create.test.js","type":"MODIFIED","insertions":35,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":23,"deletions":0}],"sizeInsertions":190,"sizeDeletions":-26},{"number":"7","revision":"182d54d5569daf130ea6b1a7aabab28d8097c77c","parents":["ade9dd9f71902a99d1d457cd77c24c32d0c0001d"],"ref":"refs/changes/33/2433/7","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1504302802,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1504627479,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1504302841,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1504303474,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"comments":[{"file":"lib/backends/sdc/containers.js","line":666,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"The \"fabric\" filter here will prevent using getNetworksOrPools() with pools, since network pools don\u0027t have a \"fabric\" parameter to search on.\n\nI think we can just remove it, since I think we want to support allowing people to use the external network label with fabric networks (but I don\u0027t know for certain)."},{"file":"lib/backends/sdc/containers.js","line":666,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"So, removing it causes a test failure, namely the \u0027external network cleanup\u0027 test, which gets an error `{code: \u0027InUse\u0027, \u0027network must have no NICs provisioned\u0027}`. This might be a test-bug, will take a deeper look and adjust the code accordingly."},{"file":"lib/backends/sdc/containers.js","line":666,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"As it turns out, this only happened that one time, and has never happened since, regardless of how many times I comment/uncomment this member."},{"file":"lib/backends/sdc/networks.js","line":274,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Can you add assertions on the types of params, opts and callback?"},{"file":"lib/backends/sdc/networks.js","line":274,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Sure thing."},{"file":"lib/backends/sdc/networks.js","line":387,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"While all of the callbacks pass an object that has type\u003derr or type\u003dres, someone in the future could make a mistake and accidentally pass something that isn\u0027t either of those. In that case, the callback would just never be called here. Could we have an else branch that calls assert.fail(\"...\") here? Alternatively you can have a leading assertion:\n\n    assert.ok(res.type \u003d\u003d\u003d \u0027err\u0027 || res.type \u003d\u003d\u003d \u0027res\u0027);\n\nOr you could restructure the above to pass objects like:\n\n    callback(null, { err: ... });\n    callback(null, { data: ... });\n\nAnd then here we would be able to do:\n\n    assert.ok(res.err || res.data);\n    callback(res.err, res.data);\n\nSo that the callback is always called, and there\u0027s no branching on the value of \"type\"."},{"file":"lib/backends/sdc/networks.js","line":387,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Wow! It is at times like this that I wish Gerrit had a \u0027merit\u0027 button. I am definitely making this clarifying and simplifying change."},{"file":"lib/backends/sdc/networks.js","line":387,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Yes, that looks better!\n\nI think you missed the assert Cody mentioned:\n  assert.ok(res.err || res.data);"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":8,"deletions":-15},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":122,"deletions":-9},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-create.test.js","type":"MODIFIED","insertions":35,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":23,"deletions":0}],"sizeInsertions":190,"sizeDeletions":-26},{"number":"8","revision":"b3ee75ae92096cd68e95175c7d2ef8a874e6c4f9","parents":["ade9dd9f71902a99d1d457cd77c24c32d0c0001d"],"ref":"refs/changes/33/2433/8","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1504808014,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1504892766,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1504808047,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1504901112,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"comments":[{"file":"package.json","line":32,"reviewer":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"message":"Just a reminder to my future self: this needs to be changed to 2.1.0, once the vasync#35 goes back."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":8,"deletions":-16},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":122,"deletions":-9},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-create.test.js","type":"MODIFIED","insertions":35,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":23,"deletions":0}],"sizeInsertions":190,"sizeDeletions":-27},{"number":"9","revision":"f85f524078658c9ca43e9c3fd1cf11ee986281de","parents":["ade9dd9f71902a99d1d457cd77c24c32d0c0001d"],"ref":"refs/changes/33/2433/9","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1505100651,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1505100689,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/backends/sdc/containers.js","line":4220,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"indent is 21 not a multiple of 4 spaces"},{"file":"lib/backends/sdc/index.js","line":83,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line \u003e 80 characters"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":137,"deletions":-285},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":122,"deletions":-9},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-create.test.js","type":"MODIFIED","insertions":35,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":23,"deletions":0}],"sizeInsertions":320,"sizeDeletions":-297},{"number":"10","revision":"781dde27b58624a6caf2eb495166ffd712c4af15","parents":["ade9dd9f71902a99d1d457cd77c24c32d0c0001d"],"ref":"refs/changes/33/2433/10","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1505101079,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505101112,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":137,"deletions":-285},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":122,"deletions":-9},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-create.test.js","type":"MODIFIED","insertions":35,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":23,"deletions":0}],"sizeInsertions":321,"sizeDeletions":-297},{"number":"11","revision":"d736f418a72e302243333c871b40c7afd7fc5ac7","parents":["ade9dd9f71902a99d1d457cd77c24c32d0c0001d"],"ref":"refs/changes/33/2433/11","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1505164172,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1505164210,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/backends/sdc/index.js","line":83,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line \u003e 80 characters"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":8,"deletions":-16},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":122,"deletions":-9},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-create.test.js","type":"MODIFIED","insertions":35,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":23,"deletions":0}],"sizeInsertions":191,"sizeDeletions":-28},{"number":"12","revision":"8e20f54ca1973e3db01e975df902c7ea13f673d3","parents":["ade9dd9f71902a99d1d457cd77c24c32d0c0001d"],"ref":"refs/changes/33/2433/12","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1505164391,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1505164429,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/backends/sdc/index.js","line":83,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"space or tab at end of line"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":8,"deletions":-16},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":122,"deletions":-9},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-create.test.js","type":"MODIFIED","insertions":35,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":23,"deletions":0}],"sizeInsertions":192,"sizeDeletions":-28},{"number":"13","revision":"c4a6b546032e3519656a490fb5ac077713e0c6f6","parents":["ade9dd9f71902a99d1d457cd77c24c32d0c0001d"],"ref":"refs/changes/33/2433/13","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1505429109,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1505429148,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/backends/sdc/index.js","line":83,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"space or tab at end of line"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":8,"deletions":-16},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":122,"deletions":-9},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-create.test.js","type":"MODIFIED","insertions":35,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":23,"deletions":0}],"sizeInsertions":192,"sizeDeletions":-28},{"number":"14","revision":"7115f3482532e6f5c85b25d7175a590286d4af99","parents":["ade9dd9f71902a99d1d457cd77c24c32d0c0001d"],"ref":"refs/changes/33/2433/14","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1505429199,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505429236,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":8,"deletions":-16},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":122,"deletions":-9},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-create.test.js","type":"MODIFIED","insertions":35,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":23,"deletions":0}],"sizeInsertions":192,"sizeDeletions":-28},{"number":"15","revision":"c1ae9f51a17f2d3b933e35335b9a73d2b8df235a","parents":["b751d9dc133205bf1a81b28b8eec0ddc2a1cc19f"],"ref":"refs/changes/33/2433/15","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1505508906,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505429236,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":8,"deletions":-16},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":122,"deletions":-9},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-create.test.js","type":"MODIFIED","insertions":35,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":23,"deletions":0}],"sizeInsertions":192,"sizeDeletions":-28},{"number":"16","revision":"ffbea193e69d3e687e4fe37629e5f910df7b91e0","parents":["b751d9dc133205bf1a81b28b8eec0ddc2a1cc19f"],"ref":"refs/changes/33/2433/16","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1505523433,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505523467,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505524913,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1505524913,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":8,"deletions":-16},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":123,"deletions":-9},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-create.test.js","type":"MODIFIED","insertions":35,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":23,"deletions":0}],"sizeInsertions":193,"sizeDeletions":-28},{"number":"17","revision":"9a9337cc3f2e77dd850872d101a7bb01e6872fb9","parents":["b751d9dc133205bf1a81b28b8eec0ddc2a1cc19f"],"ref":"refs/changes/33/2433/17","uploader":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"createdOn":1505528297,"author":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1505523467,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1505528478,"by":{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1505524913,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1505524913,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"lib/backends/sdc/containers.js","type":"MODIFIED","insertions":8,"deletions":-16},{"file":"lib/backends/sdc/index.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/backends/sdc/networks.js","type":"MODIFIED","insertions":123,"deletions":-9},{"file":"lib/endpoints/networks.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/integration/api-create.test.js","type":"MODIFIED","insertions":35,"deletions":0},{"file":"test/integration/helpers.js","type":"MODIFIED","insertions":23,"deletions":0}],"sizeInsertions":193,"sizeDeletions":-28}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},{"name":"Nick Zivkovic","email":"nick.zivkovic@joyent.com","username":"nickziv"},{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}]}