{"project":"joyent/manta-marlin","branch":"master","topic":"lullaby-phase3","id":"I8ee2e5ea4d08315dd70bc15b89e670082ee626f9","number":"5665","subject":"MANTA-4081 convert manta-marlin to engbld framework Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Reviewed by: Richard Bradley \u003crichard.bradley@joyent.com\u003e Approved by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e","owner":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"url":"https://cr.joyent.us/5665","commitMessage":"MANTA-4081 convert manta-marlin to engbld framework\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nReviewed by: Richard Bradley \u003crichard.bradley@joyent.com\u003e\nApproved by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e\n","createdOn":1551374797,"lastUpdated":1552473578,"open":false,"status":"MERGED","comments":[{"timestamp":1551374797,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 1."},{"timestamp":1551374804,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 576958474dc0f4e55ba8011f050be0b7bc662451\n    \n    MANTA-4081 convert manta-marlin to engbld framework"},{"timestamp":1551374957,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Topic set to lullaby-phase3"},{"timestamp":1551376026,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1552053186,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1552056105,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1552056248,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 2."},{"timestamp":1552056255,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 3ec11410a4f97d156e16b7021f58369a643f5f2f\n    \n    try to be more locally-consistent with tabs-vs-spaces"},{"timestamp":1552065564,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1552325772,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 3."},{"timestamp":1552325781,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit b60f5ef15b2a19259b4fe70b082b483b04e05207\n    \n    bump deps/eng to get pfexec detection fix, TOOLS-2199"},{"timestamp":1552366738,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3: Code-Review+1\n\nThis built for me fine on a smartos@1.6.3 builder.\n\nNote some base image inconsistencies for current ubilds:\n\n\n\n- https://jenkins.joyent.us/job/marlin/configure has `!platform:true \u0026\u0026 image_ver:15.4.1 \u0026\u0026 pkgsrc_arch:multiarch \u0026\u0026 pi:20151126T062538Z \u0026\u0026 jenkins_agent:2`\n\n- current manta-marlin#master has a 15.4.1 UUID for the sdcnode build.\n\n- MG targets.json.in has smartos@1.6.3 as the origin image.\n\nI haven\u0027t had a chance to test this out yet. I *think* I might be able to  in nightly-1 tomorrow."},{"timestamp":1552388298,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1552402491,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1552410345,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 4."},{"timestamp":1552410352,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 589399ba744ef5748503f1b2e3c994609ce60d53\n    \n    revert node_prebuilt image to sdc-smartos@1.6.3: fd2cc906-8938-11e3-beab-4359c665ac99"},{"timestamp":1552410612,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 4:\n\n\u003e New commits:\n \u003e \n \u003e commit 589399ba744ef5748503f1b2e3c994609ce60d53\n \u003e \n \u003e revert node_prebuilt image to sdc-smartos@1.6.3: fd2cc906-8938-11e3-beab-4359c665ac99\n\n \u003e New commits:\n \u003e \n \u003e commit 589399ba744ef5748503f1b2e3c994609ce60d53\n \u003e \n \u003e revert node_prebuilt image to sdc-smartos@1.6.3: \n\nI sanity tested this by building on a 1.6.3 dev zone, and installing the resulting image on a coal instance. I verified mlogin and mjob create/list/get all worked. I had the jobsupervisor SMF log tail -f\u0027ing in the background, and didn\u0027t notice anything unusual."},{"timestamp":1552413370,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1"},{"timestamp":1552467777,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1552473578,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Tim Foster"}],"currentPatchSet":{"number":"4","revision":"8ee2e5ea4d08315dd70bc15b89e670082ee626f9","parents":["93325715daf76c232b93a82833a5f28870fd1581"],"ref":"refs/changes/65/5665/4","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1552410345,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552413370,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1552413370,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552467777,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"SUBM","value":"1","grantedOn":1552473578,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":3,"deletions":-1},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":46,"deletions":-31},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"dev/tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-51},{"file":"dev/tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-54},{"file":"dev/tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-153},{"file":"dev/tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"dev/tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"dev/tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"dev/tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-318}],"sizeInsertions":53,"sizeDeletions":-719},"patchSets":[{"number":"1","revision":"f2b5c318879104321039eddf264ee42daa2d7e0a","parents":["93325715daf76c232b93a82833a5f28870fd1581"],"ref":"refs/changes/65/5665/1","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1551374797,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1551376026,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"Makefile","line":432,"reviewer":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},"message":"Super nit: I think this should be a tab."},{"file":"Makefile","line":432,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Yep, I\u0027ll fix that. Make doesn\u0027t care about whitespace when we\u0027re not defining the commands a target runs. That said it looks like I introduced some more inconsistency near line 158/159 of this file where I\u0027m tab-indenting rather than space-indenting. Toss a coin time? :)"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":3,"deletions":-1},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":45,"deletions":-30},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"dev/tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-51},{"file":"dev/tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-54},{"file":"dev/tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-153},{"file":"dev/tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"dev/tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"dev/tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"dev/tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-318}],"sizeInsertions":52,"sizeDeletions":-718},{"number":"2","revision":"314fff22bc7b53e4ac71159efc89f9f42d99b169","parents":["93325715daf76c232b93a82833a5f28870fd1581"],"ref":"refs/changes/65/5665/2","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1552056248,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552065564,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":3,"deletions":-1},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":45,"deletions":-30},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"dev/tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-51},{"file":"dev/tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-54},{"file":"dev/tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-153},{"file":"dev/tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"dev/tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"dev/tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"dev/tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-318}],"sizeInsertions":52,"sizeDeletions":-718},{"number":"3","revision":"811b0094de1ca3f0c0581d57b831142a572ef049","parents":["93325715daf76c232b93a82833a5f28870fd1581"],"ref":"refs/changes/65/5665/3","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1552325772,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552366738,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552388298,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1552402491,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":3,"deletions":-1},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":45,"deletions":-30},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"dev/tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-51},{"file":"dev/tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-54},{"file":"dev/tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-153},{"file":"dev/tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"dev/tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"dev/tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"dev/tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-318}],"sizeInsertions":52,"sizeDeletions":-718},{"number":"4","revision":"8ee2e5ea4d08315dd70bc15b89e670082ee626f9","parents":["93325715daf76c232b93a82833a5f28870fd1581"],"ref":"refs/changes/65/5665/4","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1552410345,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552413370,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1552413370,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552467777,"by":{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"}},{"type":"SUBM","value":"1","grantedOn":1552473578,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":3,"deletions":-1},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":46,"deletions":-31},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"dev/tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-51},{"file":"dev/tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-54},{"file":"dev/tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-153},{"file":"dev/tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"dev/tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"dev/tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"dev/tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-318}],"sizeInsertions":53,"sizeDeletions":-719}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Richard Bradley","email":"richard.bradley@joyent.com","username":"chudley"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}]}