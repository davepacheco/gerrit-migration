{"project":"joyent/sdc-vm-agent","branch":"master","topic":"lullaby-phase2","id":"I4c74d7d95a907bf38d62bc57277f4526dec3051e","number":"5543","subject":"TRITON-1150 convert sdc-vm-agent to engbld framework Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"url":"https://cr.joyent.us/5543","commitMessage":"TRITON-1150 convert sdc-vm-agent to engbld framework\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1549625311,"lastUpdated":1551176843,"open":false,"status":"MERGED","comments":[{"timestamp":1549625311,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 1."},{"timestamp":1549625317,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 184a20693417aa4c7af1a12ccf93f3a1711e30d5\n    \n    TRITON-1150 convert sdc-vm-agent to engbld framework"},{"timestamp":1549626943,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Topic set to lullaby-phase2"},{"timestamp":1550740802,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\nThe README needs updating as it mentions building on Mac/Linux?"},{"timestamp":1550741930,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\n(8 comments)\n\nIf we intentionally don\u0027t want \"make test\" to run tests/, seems like it might be worth commenting as to why"},{"timestamp":1550763017,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 2."},{"timestamp":1550763024,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 7b76d3435925deaa43d13e403e84fd4f2c1c0b17\n    \n    TRITON-1150 convert sdc-vm-agent to engbld framework"},{"timestamp":1550853987,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 3."},{"timestamp":1550853994,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 83e84686d2699f7b354b54cf0ac2d03b33b884aa\n    \n    TRITON-1150 convert sdc-vm-agent to engbld framework"},{"timestamp":1550954050,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1:\n\n(8 comments)"},{"timestamp":1550954071,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 4."},{"timestamp":1550954078,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 00de0b8ffae82322ad455d5216b0270618135e46\n    \n    TRITON-1150 convert sdc-vm-agent to engbld framework"},{"timestamp":1550954127,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1:\n\nJohn asked a few questions I wasn\u0027t quite sure of, so adding Trent as\na sanity check."},{"timestamp":1550962624,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1551029680,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4: Code-Review-1\n\nHere is patch I think should be applied: https://gist.github.com/trentm/03e40e517bdfcc2edbc31128805d108c\n\nSee larger discussion on the JIRA ticket (TRITON-1150)."},{"timestamp":1551091677,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 4:\n\n\u003e Here is patch I think should be applied: https://gist.github.com/trentm/03e40e517bdfcc2edbc31128805d108c\n \u003e \n \u003e See larger discussion on the JIRA ticket (TRITON-1150).\n\nThanks for the patch, and investigation on TRITON-1150. I\u0027ve applied\nthat and all looks well."},{"timestamp":1551091701,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 5."},{"timestamp":1551091707,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit be89e742480cfbed1fcd04f0c856daf544ceafb9\n    \n    TRITON-1150 convert sdc-vm-agent to engbld framework"},{"timestamp":1551100450,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1551105156,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1551105342,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1551105788,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 5:\n\n\u003e (1 comment)\n\nYep, you\u0027re right that I\u0027m finding this mixed messaging on flexibility hard to get straight. I suppose one could look at cross-platform development as coming in phases, with initial testing on one platform, but requiring final testing and qualification to be done on the official platform? We don\u0027t have any of that written down afaik, other than general eng.git statements about \"FCS all the time\" and automated testing in the \u0027nightly environment\u0027, which implies builds done on a known platform."},{"timestamp":1551117640,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 5:\n\nI\u0027ve filed TOOLS-2187 to have us add an escape hatch to buildimage to force the inclusion of a given min_platform, despite whatever may be running on the build machine. That won\u0027t be part of this putback, but might suffice for power users?"},{"timestamp":1551121499,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1\n\nbuilt, installed in nightly-1 and working"},{"timestamp":1551176831,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1551176843,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Tim Foster"}],"currentPatchSet":{"number":"6","revision":"4c74d7d95a907bf38d62bc57277f4526dec3051e","parents":["5752763396022f0068136af0cb5b3a377b7789d8"],"ref":"refs/changes/43/5543/6","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1551176831,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551121499,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1551121499,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1551176843,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":4,"deletions":-4},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":".kthxbai","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":29,"deletions":-30},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-51},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-87},{"file":"tools/mk/Makefile.node.defs","type":"DELETED","insertions":0,"deletions":-104},{"file":"tools/mk/Makefile.node.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.node_deps.defs","type":"DELETED","insertions":0,"deletions":-43},{"file":"tools/mk/Makefile.node_deps.targ","type":"DELETED","insertions":0,"deletions":-24},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-153},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-345}],"sizeInsertions":39,"sizeDeletions":-997},"patchSets":[{"number":"1","revision":"3057debd8dabe53edfa3594ebe8c74690944ed5a","parents":["5752763396022f0068136af0cb5b3a377b7789d8"],"ref":"refs/changes/43/5543/1","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1549625311,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","comments":[{"file":"Makefile","line":30,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"strip ?"},{"file":"Makefile","line":30,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"I don\u0027t quite follow? A few components do allow developers to build on non-Illumos bits, so where that was done, I left this support in place in case it\u0027s convenient for the maintainers."},{"file":"Makefile","line":30,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I\u0027m having trouble squaring this with validate-buildenv. We\u0027re making people worry about the base PI but it\u0027s totally fine to build an a completely separate OS?"},{"file":"Makefile","line":30,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"I see. I think the assumption is that if you\u0027re building on a mac, then you\u0027re likely a developer testing changes locally, but when building on something that looks like a potential production deployment, we become more strict.\n\nThe fact that there\u0027s such a disparate set of development environments across all of the components in Triton/Manta makes it difficult to apply a common set of rules, so we\u0027re trying to retain flexibility where it already exists.\n\nObviously at the moment, a mac is unlikely to ever be able to produce a zfs image, or be selected as a valid build machine in Jenkins, so there\u0027s little chance of this flexibility (aimed at developer convenience) screwing up a production build.\n\nThe PI question (encoding the build machine PI as \u0027min_platform\u0027, resulting in _less_ convenience for developers testing on possibly older platforms) is harder to deal with, and we\u0027re erring on the side of caution there at the moment."},{"file":"Makefile","line":30,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"During our discussion last week though, you were very dubious about even the \"dev doing testing\" part of not having an official build environment.\n\nI guess that it\u0027s just a matter of IA-reviewers making sure that changes to these repos have been through an official build?"},{"file":"Makefile","line":59,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"are any of these deps needed now they\u0027re defined in deps/eng?"},{"file":"Makefile","line":59,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"I\u0027ll double check on this."},{"file":"Makefile","line":60,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"It\u0027s not clear that we need to do this ourselves??"},{"file":"Makefile","line":60,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"We need the kthxbai change similar to TRITON-1109, but\nI believe we do still need to skip agent lifecycle scripts. \nWithout that, we get errors building:\n\n\u003d\u003d\u003d\u003d\n\u003e vm-agent@1.8.3 postinstall /space/phase2/sdc-vm-agent\n\u003e npm/postinstall.sh\n\ndi_init() failed\nnpm/postinstall.sh: line 32: npm_config_etc: unbound variable\n\nnpm WARN eslint-plugin-joyent@2.0.0 requires a peer of eslint@^4.10.0 but none was installed.\nnpm ERR! SunOS 5.11\nnpm ERR! argv \"/space/phase2/sdc-vm-agent/build/node/bin/node\" \"/space/phase2/sdc-vm-agent/build/node/bin/npm\" \"install\"\nnpm ERR! node v6.15.1\nnpm ERR! npm  v3.10.10\nnpm ERR! code ELIFECYCLE\nnpm ERR! vm-agent@1.8.3 postinstall: `npm/postinstall.sh`\nnpm ERR! Exit status 1\nnpm ERR!\nnpm ERR! Failed at the vm-agent@1.8.3 postinstall script \u0027npm/postinstall.sh\u0027.\nnpm ERR! Make sure you have the latest version of node.js and npm installed.\nnpm ERR! If you do, this is most likely a problem with the vm-agent package,\nnpm ERR! not with npm itself.\nnpm ERR! Tell the author that this fails on your system:\nnpm ERR!     npm/postinstall.sh\nnpm ERR! You can get information on how to open an issue for this project with:\nnpm ERR!     npm bugs vm-agent\nnpm ERR! Or if that isn\u0027t available, you can get their info via:\nnpm ERR!     npm owner ls vm-agent\nnpm ERR! There is likely additional logging output above.\n\nnpm ERR! Please include the following file with any support request:\nnpm ERR!     /space/phase2/sdc-vm-agent/npm-debug.log\nMakefile:60: recipe for target \u0027all\u0027 failed\nmake: *** [all] Error 1\n\u003d\u003d\u003d\n\nClearly stuff we shouldn\u0027t be attempting to execute at\nbuild-time. I\u0027m not sure how to cope with the eslint\nwarning, but that\u0027s something separate.\n\nElsewhere we fixed that sort of thing with TRITON-478,\nbut this is just as valid a fix."},{"file":"Makefile","line":69,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"all already depends on SMF_MANIFESTS"},{"file":"Makefile","line":69,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Thanks, will fix that."},{"file":"Makefile","line":72,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"_GITDESCRIBE?\n\nBut more generally, doesn\u0027t the stamp now end up in the results? Do we need this too?"},{"file":"Makefile","line":72,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Yes we get the stamp in the \u0027version\u0027 property of the\nmanifest, though I don\u0027t think anything drops a flat file into\nthe image containing that stamp. I don\u0027t see anything in this\nrepository using this, but am not sure whether this file is\nload-bearing or not. I\u0027d rather leave this as is, just to err\non the side of caution."},{"file":"Makefile","line":72,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"That file might actually be load-bearing. We\u0027d need to dig in to verify if any scripts are using that \"describe\" file to identify the version of the installed agent.  For original headnode setup and install/upgrade via the agentsshar the image manifest isn\u0027t anywhere to provide a version for the installed agent.  Agent versioning and update is messy right now (some details in RFD 82), so I\u0027d be inclined to not mess with this right now, and certainly not jumbled in with the build system changes."},{"file":"Makefile","line":113,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"ditto, do we need this and :117"},{"file":"Makefile","line":113,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Yep, we don\u0027t need this check, though I\u0027ll hang on to 117\njust to avoid confusion."},{"file":"Makefile","line":121,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"This can be removed now you have print-$(VAR) ?"},{"file":"Makefile","line":121,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Yep, will do that."},{"file":"Makefile","line":129,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Is this relevant now?"},{"file":"Makefile","line":129,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"I\u0027m not sure. Will check with trentm, but this feels like\nit\u0027s probably ancient support."},{"file":"Makefile","line":129,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Yes, this is used to tag releases of this repo, which is used for triton-mockcloud.git to get clear versioned deps of some of the agents (see https://github.com/joyent/triton-mockcloud/blob/master/package.json#L12-L15)."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":19,"deletions":-16},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-51},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-87},{"file":"tools/mk/Makefile.node.defs","type":"DELETED","insertions":0,"deletions":-104},{"file":"tools/mk/Makefile.node.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.node_deps.defs","type":"DELETED","insertions":0,"deletions":-43},{"file":"tools/mk/Makefile.node_deps.targ","type":"DELETED","insertions":0,"deletions":-24},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-153},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-345}],"sizeInsertions":24,"sizeDeletions":-976},{"number":"2","revision":"b8b88b0f61e5edf7d7fb16ff1578d8c0a075a2dc","parents":["5752763396022f0068136af0cb5b3a377b7789d8"],"ref":"refs/changes/43/5543/2","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1550763017,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":17,"deletions":-18},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-51},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-87},{"file":"tools/mk/Makefile.node.defs","type":"DELETED","insertions":0,"deletions":-104},{"file":"tools/mk/Makefile.node.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.node_deps.defs","type":"DELETED","insertions":0,"deletions":-43},{"file":"tools/mk/Makefile.node_deps.targ","type":"DELETED","insertions":0,"deletions":-24},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-153},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-345}],"sizeInsertions":22,"sizeDeletions":-978},{"number":"3","revision":"40301f217158b5561b854f6aed1455a24cca4b84","parents":["5752763396022f0068136af0cb5b3a377b7789d8"],"ref":"refs/changes/43/5543/3","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1550853987,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":18,"deletions":-19},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-51},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-87},{"file":"tools/mk/Makefile.node.defs","type":"DELETED","insertions":0,"deletions":-104},{"file":"tools/mk/Makefile.node.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.node_deps.defs","type":"DELETED","insertions":0,"deletions":-43},{"file":"tools/mk/Makefile.node_deps.targ","type":"DELETED","insertions":0,"deletions":-24},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-153},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-345}],"sizeInsertions":23,"sizeDeletions":-979},{"number":"4","revision":"76bd00e2768d6e77879b3a93965f3fab3c7c92a7","parents":["5752763396022f0068136af0cb5b3a377b7789d8"],"ref":"refs/changes/43/5543/4","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1550954071,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"-1","grantedOn":1551029680,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":23,"deletions":-28},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-51},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-87},{"file":"tools/mk/Makefile.node.defs","type":"DELETED","insertions":0,"deletions":-104},{"file":"tools/mk/Makefile.node.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.node_deps.defs","type":"DELETED","insertions":0,"deletions":-43},{"file":"tools/mk/Makefile.node_deps.targ","type":"DELETED","insertions":0,"deletions":-24},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-153},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-345}],"sizeInsertions":29,"sizeDeletions":-989},{"number":"5","revision":"6d993b2c0c5998e536f6c0290ee8d9c1ce4eec18","parents":["5752763396022f0068136af0cb5b3a377b7789d8"],"ref":"refs/changes/43/5543/5","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1551091701,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551121499,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1551121499,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":4,"deletions":-4},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":".kthxbai","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":29,"deletions":-30},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-51},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-87},{"file":"tools/mk/Makefile.node.defs","type":"DELETED","insertions":0,"deletions":-104},{"file":"tools/mk/Makefile.node.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.node_deps.defs","type":"DELETED","insertions":0,"deletions":-43},{"file":"tools/mk/Makefile.node_deps.targ","type":"DELETED","insertions":0,"deletions":-24},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-153},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-345}],"sizeInsertions":39,"sizeDeletions":-997},{"number":"6","revision":"4c74d7d95a907bf38d62bc57277f4526dec3051e","parents":["5752763396022f0068136af0cb5b3a377b7789d8"],"ref":"refs/changes/43/5543/6","uploader":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"createdOn":1551176831,"author":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1551121499,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1551121499,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1551176843,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":4,"deletions":-4},{"file":".gitmodules","type":"MODIFIED","insertions":3,"deletions":0},{"file":".kthxbai","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":29,"deletions":-30},{"file":"deps/eng","type":"ADDED","insertions":1,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-3},{"file":"tools/mk/Makefile.defs","type":"DELETED","insertions":0,"deletions":-51},{"file":"tools/mk/Makefile.deps","type":"DELETED","insertions":0,"deletions":-87},{"file":"tools/mk/Makefile.node.defs","type":"DELETED","insertions":0,"deletions":-104},{"file":"tools/mk/Makefile.node.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.node_deps.defs","type":"DELETED","insertions":0,"deletions":-43},{"file":"tools/mk/Makefile.node_deps.targ","type":"DELETED","insertions":0,"deletions":-24},{"file":"tools/mk/Makefile.node_prebuilt.defs","type":"DELETED","insertions":0,"deletions":-153},{"file":"tools/mk/Makefile.node_prebuilt.targ","type":"DELETED","insertions":0,"deletions":-42},{"file":"tools/mk/Makefile.smf.defs","type":"DELETED","insertions":0,"deletions":-40},{"file":"tools/mk/Makefile.smf.targ","type":"DELETED","insertions":0,"deletions":-29},{"file":"tools/mk/Makefile.targ","type":"DELETED","insertions":0,"deletions":-345}],"sizeInsertions":39,"sizeDeletions":-997}],"allReviewers":[{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}]}