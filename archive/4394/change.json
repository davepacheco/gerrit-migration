{"project":"joyent/node-verror","branch":"master","id":"Ia2da49e4b7323f9f215c559c24a95e52e85ad3e8","number":"4394","subject":"joyent/node-verror#57 Ability to disable printf","owner":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"url":"https://cr.joyent.us/4394","commitMessage":"joyent/node-verror#57 Ability to disable printf\n","createdOn":1529523596,"lastUpdated":1563303551,"open":false,"status":"ABANDONED","comments":[{"timestamp":1529523596,"reviewer":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"message":"Uploaded patch set 1."},{"timestamp":1529523599,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1529538817,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 1:\n\n(2 comments)\n\nThanks for submitting this!  There are a few comments inline.  Also:\n\n- You\u0027ll want to update the documentation in the README for the new option.\n- I assume you\u0027ll want to create a new top-level class as well?  We\u0027ll want to document that as well.\n- You don\u0027t have to do this, but if you also bump the minor version in package.json and update CHANGES.md, then we can publish a new version once this lands."},{"timestamp":1529545591,"reviewer":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"message":"Uploaded patch set 2."},{"timestamp":1529545594,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1529545733,"reviewer":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"message":"Uploaded patch set 3."},{"timestamp":1529545736,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1529546788,"reviewer":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"message":"Patch Set 3:\n\n(2 comments)\n\nDone for now. I added documentation and bumped the version number. Let me know if you have any other feedback."},{"timestamp":1529595724,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 3:\n\n(3 comments)\n\nThanks!  This is looking good.  I haven\u0027t yet looked at the latest lib/verror.js changes yet."},{"timestamp":1529596175,"reviewer":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"message":"Uploaded patch set 4."},{"timestamp":1529596178,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1529596254,"reviewer":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"message":"Patch Set 4:\n\n(3 comments)"},{"timestamp":1530022717,"reviewer":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1530022731,"reviewer":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"message":"Patch Set 4: -Code-Review"},{"timestamp":1543614662,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Patch Set 3:\n\n(9 comments)\n\nFirst of all, I\u0027m very sorry that this fell off my radar.  It\u0027s been way too long.\n\nI\u0027ve made a few comments on the changes.  Broadly, they still look great.  I really appreciate your willingness to put this change together, and I imagine some of this seems pretty nitty -- if you\u0027d like, I\u0027d be happy to make these suggested changes."},{"timestamp":1563303551,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Abandoned\n\nThis was superseded by other changes -- see joyent/node-verror#57."}],"currentPatchSet":{"number":"4","revision":"a2da49e4b7323f9f215c559c24a95e52e85ad3e8","parents":["ecddeda07827742bd2c598033a02f4c42a6fdc26"],"ref":"refs/changes/94/4394/4","uploader":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"createdOn":1529596175,"author":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1529596178,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"CHANGES.md","line":9,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"The pattern here is that the text for each issue in this file should exactly match the commit message and the issue\u0027s synopsis in GitHub."},{"file":"README.md","line":212,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"We should add `PError` here, both in the title and the next paragraph."},{"file":"README.md","line":252,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This could be a bit clearer.  Maybe:\n\n\u003e If true, then `sprintf()` is not called on the `sprintf_args` arguments.  Instead, the first argument is taken as a plain string to be used as this error\u0027s message."},{"file":"README.md","line":274,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Needs rewrap."},{"file":"README.md","line":283,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"extra comma"},{"file":"lib/verror.js","line":121,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"How about asserting that `sprintf_args` has only one argument in this case?"},{"file":"lib/verror.js","line":367,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This check seems backwards?"},{"file":"lib/verror.js","line":431,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Same as above?  Maybe I\u0027m misunderstanding the behavior here."},{"file":"lib/verror.js","line":478,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This should probably either be `args` like in the other constructors."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":12,"deletions":-7},{"file":"lib/verror.js","type":"MODIFIED","insertions":48,"deletions":-5},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/tst.common.js","type":"MODIFIED","insertions":16,"deletions":0}],"sizeInsertions":81,"sizeDeletions":-13},"patchSets":[{"number":"1","revision":"b58a34a3c659ec5fb80be25e94126395d99922db","parents":["ecddeda07827742bd2c598033a02f4c42a6fdc26"],"ref":"refs/changes/94/4394/1","uploader":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"createdOn":1529523596,"author":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1529523599,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"/COMMIT_MSG","line":7,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"We use a pretty specific commit message format here.  In this case, it should be:\n\n    joyent/node-verror#57 Ability to disable printf formatting\n\n(You can see previous commits for examples.)"},{"file":"/COMMIT_MSG","line":7,"reviewer":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"message":"Done"},{"file":"test/tst.verror.js","line":50,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"I wonder if this block should go into tst.common.js, which is run for `SError` and `WError` as well."},{"file":"test/tst.verror.js","line":50,"reviewer":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"message":"I moved it to tst.common.js. That actually highlighted some inconsistencies (since fixed) with how `skipPrintf` was working with `SError` and `WError`."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/verror.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"test/tst.verror.js","type":"MODIFIED","insertions":14,"deletions":0}],"sizeInsertions":17,"sizeDeletions":-1},{"number":"2","revision":"cb6d38d42a4edf1416f880c09f41f085ece2131c","parents":["ecddeda07827742bd2c598033a02f4c42a6fdc26"],"ref":"refs/changes/94/4394/2","uploader":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"createdOn":1529545591,"author":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1529545594,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"lib/verror.js","type":"MODIFIED","insertions":48,"deletions":-5},{"file":"test/tst.common.js","type":"MODIFIED","insertions":16,"deletions":0}],"sizeInsertions":72,"sizeDeletions":-8},{"number":"3","revision":"f43f6f73faa17a67e5a0a485c333528c6bfe4bd2","parents":["ecddeda07827742bd2c598033a02f4c42a6fdc26"],"ref":"refs/changes/94/4394/3","uploader":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"createdOn":1529545733,"author":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1529545736,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"/COMMIT_MSG","line":7,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"typo here (\"joyen\")"},{"file":"/COMMIT_MSG","line":7,"reviewer":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"message":"Done"},{"file":"README.md","line":283,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Looks like this line needs to be re-wrapped."},{"file":"README.md","line":283,"reviewer":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"message":"Done"},{"file":"test/tst.common.js","line":181,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Thanks for moving this.\n\nAre we now missing tests that PError doesn\u0027t use printf by default, and that the other classes do?"},{"file":"test/tst.common.js","line":181,"reviewer":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"message":"The fact that the existing tests exercise printf should cover us, although I can add some explicit tests that check something like `new VError().skipPrintf \u003d\u003d\u003d false`. \n\nYou\u0027re correct that nothing tests that PError doesn\u0027t use printf by default. How\u0027s that tested for SError? I didn\u0027t see anything, but seems like it should be handled similarly."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":8,"deletions":-3},{"file":"lib/verror.js","type":"MODIFIED","insertions":48,"deletions":-5},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/tst.common.js","type":"MODIFIED","insertions":16,"deletions":0}],"sizeInsertions":77,"sizeDeletions":-9},{"number":"4","revision":"a2da49e4b7323f9f215c559c24a95e52e85ad3e8","parents":["ecddeda07827742bd2c598033a02f4c42a6fdc26"],"ref":"refs/changes/94/4394/4","uploader":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"createdOn":1529596175,"author":{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1529596178,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"CHANGES.md","line":9,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"The pattern here is that the text for each issue in this file should exactly match the commit message and the issue\u0027s synopsis in GitHub."},{"file":"README.md","line":212,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"We should add `PError` here, both in the title and the next paragraph."},{"file":"README.md","line":252,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This could be a bit clearer.  Maybe:\n\n\u003e If true, then `sprintf()` is not called on the `sprintf_args` arguments.  Instead, the first argument is taken as a plain string to be used as this error\u0027s message."},{"file":"README.md","line":274,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Needs rewrap."},{"file":"README.md","line":283,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"extra comma"},{"file":"lib/verror.js","line":121,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"How about asserting that `sprintf_args` has only one argument in this case?"},{"file":"lib/verror.js","line":367,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This check seems backwards?"},{"file":"lib/verror.js","line":431,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"Same as above?  Maybe I\u0027m misunderstanding the behavior here."},{"file":"lib/verror.js","line":478,"reviewer":{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},"message":"This should probably either be `args` like in the other constructors."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":12,"deletions":-7},{"file":"lib/verror.js","type":"MODIFIED","insertions":48,"deletions":-5},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/tst.common.js","type":"MODIFIED","insertions":16,"deletions":0}],"sizeInsertions":81,"sizeDeletions":-13}],"allReviewers":[{"name":"David Pacheco","email":"dap@joyent.com","username":"davepacheco"},{"name":"Gabe Gorelick","email":"gabegorelick@gmail.com","username":"gabegorelick"},{"name":"Joyent Automation","username":"joyent-automation"}]}