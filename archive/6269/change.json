{"project":"joyent/illumos-joyent","branch":"master","id":"I8bab6c89a8b6b113b13e1cca5a6dc469de70ef77","number":"6269","subject":"OS-7801 bhyve should expose MD_CLEAR capability Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Approved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e","owner":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"url":"https://cr.joyent.us/6269","commitMessage":"OS-7801 bhyve should expose MD_CLEAR capability\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1558036348,"lastUpdated":1558120055,"open":false,"status":"MERGED","comments":[{"timestamp":1558036348,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 1."},{"timestamp":1558036431,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1558036750,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\nI haven\u0027t looked if Linux and Windows do the same thing we do if MDS_CLEAR but !RDCL_NO? We don\u0027t pass through the latter."},{"timestamp":1558041445,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1: Code-Review+1\n\n\u003e I haven\u0027t looked if Linux and Windows do the same thing we do if\n \u003e MDS_CLEAR but !RDCL_NO? We don\u0027t pass through the latter.\n\nI think for the moment we should pass it through regardless of whether or not we have RDCL_NO or MDS_NO and we should revisit that when we come back and deal with EIBRS and friends with the spectre v2 overhaul."},{"timestamp":1558091314,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1558099015,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\nTest notes are in the ticket.  I\u0027ll be exploring a few more scenarios beyond a Linux guest."},{"timestamp":1558100324,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1: Integration-Approval+1\n\nIt sounds like you\u0027re ready to go on this, but if you do run additional tests and hit a snag, I trust you to do the right thing. :-)"},{"timestamp":1558116703,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1558120022,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1558120055,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Patrick Mooney"}],"currentPatchSet":{"number":"3","revision":"8bab6c89a8b6b113b13e1cca5a6dc469de70ef77","parents":["9dc0ec47175e096cf43e85a5cb88d6c8b0f61539"],"ref":"refs/changes/69/6269/3","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1558120022,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558041445,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558091314,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1558100324,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1558120055,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/contrib/freebsd/x86/specialreg.h","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/specialreg.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":10,"sizeDeletions":-2},"patchSets":[{"number":"1","revision":"dce1314d0b2a8480bf455394a9017f94bf11cfa3","parents":["171c41516455d5579f0096ea3661f70562231175"],"ref":"refs/changes/69/6269/1","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1558036348,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558041445,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558091314,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1558100324,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"comments":[{"file":"usr/contrib/freebsd/x86/specialreg.h","line":80,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"This file includes seemingly unrelated changes because the headers here in usr/contrib are copied wholesale from freebsd.  I simply used the latest version in HEAD."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/contrib/freebsd/x86/specialreg.h","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/specialreg.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":10,"sizeDeletions":-2},{"number":"2","revision":"3d8e9639fe5349d87426e0a264bbafa4e8e3235b","parents":["9dc0ec47175e096cf43e85a5cb88d6c8b0f61539"],"ref":"refs/changes/69/6269/2","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1558116703,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558041445,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558091314,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1558100324,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/contrib/freebsd/x86/specialreg.h","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/specialreg.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":10,"sizeDeletions":-2},{"number":"3","revision":"8bab6c89a8b6b113b13e1cca5a6dc469de70ef77","parents":["9dc0ec47175e096cf43e85a5cb88d6c8b0f61539"],"ref":"refs/changes/69/6269/3","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1558120022,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558041445,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1558091314,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1558100324,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1558120055,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/contrib/freebsd/x86/specialreg.h","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/compat/freebsd/amd64/machine/specialreg.h","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/i86pc/io/vmm/x86.c","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":10,"sizeDeletions":-2}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}]}