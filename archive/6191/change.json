{"project":"joyent/smartos-live","branch":"master","id":"I0158021c21657bdc537895a634d1a73b593e6639","number":"6191","subject":"joyent/smartos-live#771 imgadm vacuum will try to reap images used by bhyve vms Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"url":"https://cr.joyent.us/6191","commitMessage":"joyent/smartos-live#771 imgadm vacuum will try to reap images used by bhyve vms\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1556852268,"lastUpdated":1556933389,"open":false,"status":"MERGED","comments":[{"timestamp":1556852268,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 1."},{"timestamp":1556852270,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 6c2d7f19d35d0bffee8eb3c7926708a230d12efb\n    \n    joyent/smartos-live#771 imgadm vacuum will try to reap images used by bhyve vms"},{"timestamp":1556852321,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1556852556,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\nTested using an image that was in use by a bhyve vm. After this change the image no longer shows up in the imgadm vacuum list. Once the bhyve vm is deleted, the image shows up again in imgadm vacuum list and can be successfully vacuumed."},{"timestamp":1556863275,"reviewer":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1556900006,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1: Code-Review+1\n\n(2 comments)\n\nOne nit... and I\u0027d like to try it at the office before IA."},{"timestamp":1556905216,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 1:\n\nTodd: wfm.\n\nCan you also bump the version and CHANGES.md?"},{"timestamp":1556908889,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 2."},{"timestamp":1556908892,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 7d75689ef11208fabacc739bb38cfadea241a8c6\n    \n    comments, bump version and changelog"},{"timestamp":1556908902,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1556908942,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1556921148,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1\n\nThanks!"},{"timestamp":1556933373,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1556933389,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Todd Whiteman"}],"currentPatchSet":{"number":"3","revision":"0158021c21657bdc537895a634d1a73b593e6639","parents":["e552ee5c77ab0d39de8f60055b5e1f4974982e10"],"ref":"refs/changes/91/6191/3","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1556933373,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1556908942,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556921148,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556921148,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1556933389,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"src/img/CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/img/lib/imgadm.js","type":"MODIFIED","insertions":10,"deletions":-2},{"file":"src/img/package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":15,"sizeDeletions":-3},"patchSets":[{"number":"1","revision":"eab6d124e0ae517fb9184f885a08fe17f2152bdd","parents":["e552ee5c77ab0d39de8f60055b5e1f4974982e10"],"ref":"refs/changes/91/6191/1","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1556852268,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1556852321,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556900006,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556863275,"by":{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"}}],"comments":[{"file":"src/img/lib/imgadm.js","line":23,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Per the latest RFD on copyright things, this should drop the \"All rights reserved.\". Current format:\n\n\"Copyright 2019 Joyent, Inc.\""},{"file":"src/img/lib/imgadm.js","line":23,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"},{"file":"src/img/lib/imgadm.js","line":91,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"That was easy!  Possible to get a comment for this one that shows the three different typical examples?"},{"file":"src/img/lib/imgadm.js","line":91,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/img/lib/imgadm.js","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":2,"sizeDeletions":-2},{"number":"2","revision":"9beeed9e27689a1c5225286332919a23344d2f56","parents":["e552ee5c77ab0d39de8f60055b5e1f4974982e10"],"ref":"refs/changes/91/6191/2","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1556908889,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1556908942,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556921148,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556921148,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"src/img/CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/img/lib/imgadm.js","type":"MODIFIED","insertions":10,"deletions":-2},{"file":"src/img/package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":15,"sizeDeletions":-3},{"number":"3","revision":"0158021c21657bdc537895a634d1a73b593e6639","parents":["e552ee5c77ab0d39de8f60055b5e1f4974982e10"],"ref":"refs/changes/91/6191/3","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1556933373,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1556908942,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1556921148,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1556921148,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1556933389,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"src/img/CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"src/img/lib/imgadm.js","type":"MODIFIED","insertions":10,"deletions":-2},{"file":"src/img/package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":15,"sizeDeletions":-3}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Jorge Schrauwen","email":"sjorge@blackdot.be","username":"sjorge"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}]}