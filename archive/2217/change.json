{"project":"joyent/illumos-joyent","branch":"master","id":"I6fe5755698e91248d3d3d1c09f4fcb2e9cd9175a","number":"2217","subject":"OS-6234 want a simple refcount implementation in DDI","owner":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"url":"https://cr.joyent.us/2217","commitMessage":"OS-6234 want a simple refcount implementation in DDI\n","createdOn":1500040259,"lastUpdated":1500295598,"open":false,"status":"ABANDONED","comments":[{"timestamp":1500040259,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Uploaded patch set 1."},{"timestamp":1500073339,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\nThe header changes look ok, but it would be good to include a consumer of this new interface so we can see the rest of things here."},{"timestamp":1500292147,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 1:\n\n\u003e The header changes look ok, but it would be good to include a\n \u003e consumer of this new interface so we can see the rest of things\n \u003e here.\n\nThe consumer for this interface will be linuxkpi which lives in gfx-drm. I could modify ZFS to use this interface, but that wouldn\u0027t be integrated -- the whole point of doing it this way was that we don\u0027t want to touch ZFS and go through all the pain associated with that."},{"timestamp":1500294452,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1500295528,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1500295598,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Abandoned\n\nI think it\u0027s easier for now to not bother with refcount and just reimplement the tiny bit of refcounting that linuxkpi kref.h needs."}],"currentPatchSet":{"number":"1","revision":"6fe5755698e91248d3d3d1c09f4fcb2e9cd9175a","parents":["3402a4505415d6c3deedce572627d511ee4dbb31"],"ref":"refs/changes/17/2217/1","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1500040259,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/sys/sunddi.h","line":2299,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Is this correct or a copy/paste mistake from the previous line?"},{"file":"usr/src/uts/common/sys/sunddi.h","line":2299,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Thats the same as in usr/src/uts/common/fs/zfs/sys/refcount.h, so I assume it\u0027s good."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/sys/sunddi.h","type":"MODIFIED","insertions":28,"deletions":0}],"sizeInsertions":28,"sizeDeletions":0},"patchSets":[{"number":"1","revision":"6fe5755698e91248d3d3d1c09f4fcb2e9cd9175a","parents":["3402a4505415d6c3deedce572627d511ee4dbb31"],"ref":"refs/changes/17/2217/1","uploader":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"createdOn":1500040259,"author":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/sys/sunddi.h","line":2299,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Is this correct or a copy/paste mistake from the previous line?"},{"file":"usr/src/uts/common/sys/sunddi.h","line":2299,"reviewer":{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"},"message":"Thats the same as in usr/src/uts/common/fs/zfs/sys/refcount.h, so I assume it\u0027s good."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/sys/sunddi.h","type":"MODIFIED","insertions":28,"deletions":0}],"sizeInsertions":28,"sizeDeletions":0}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Hans Rosenfeld","email":"hans.rosenfeld@joyent.com","username":"hrosenfeld"}]}