{"project":"joyent/illumos-joyent","branch":"master","id":"I2856f8e8068d0168f37880ebb2e2cec56102522f","number":"1060","subject":"OS-5830 improve hyprlofs error checking Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Reviewed by: Alex Wilson \u003calex.wilson@joyent.com\u003e Approved by: Robert Mustacchi \u003crm@joyent.com\u003e","owner":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"url":"https://cr.joyent.us/1060","commitMessage":"OS-5830 improve hyprlofs error checking\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nReviewed by: Alex Wilson \u003calex.wilson@joyent.com\u003e\nApproved by: Robert Mustacchi \u003crm@joyent.com\u003e\n","createdOn":1480972767,"lastUpdated":1480977950,"open":false,"status":"MERGED","comments":[{"timestamp":1480972767,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 1."},{"timestamp":1480974492,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 1: Code-Review+1\n\n(1 comment)\n\nI don\u0027t see any other obvious signed confusions in hyprlofs after this, and the use of  MAX_IOCTL_PARAMS seems to guard against arithmetic overflows in the multiplication."},{"timestamp":1480974775,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1: Code-Review+1\n\nIt looks like we\u0027ve cleared up most of the cases of signed confusion that I can see."},{"timestamp":1480975649,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 2."},{"timestamp":1480975849,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 2: Code-Review+1\n\nLet the signed types be sent back to the hellscape from whence they came"},{"timestamp":1480975967,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1480977850,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1480977937,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1480977950,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jerry Jelinek"}],"currentPatchSet":{"number":"3","revision":"2856f8e8068d0168f37880ebb2e2cec56102522f","parents":["0025193671abc58806b94583cb40635dd083e26e"],"ref":"refs/changes/60/1060/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1480977937,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480975849,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480975967,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1480977850,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1480977950,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/fs/hyprlofs/hyprlofs_vnops.c","type":"MODIFIED","insertions":16,"deletions":-15}],"sizeInsertions":16,"sizeDeletions":-15},"patchSets":[{"number":"1","revision":"38255d40891328ad912af6f58469797f8e34567a","parents":["0025193671abc58806b94583cb40635dd083e26e"],"ref":"refs/changes/60/1060/1","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1480972767,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480974775,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480974492,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}}],"comments":[{"file":"usr/src/uts/common/fs/hyprlofs/hyprlofs_vnops.c","line":1146,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"As discussed on Jabber, I think we should clean up this too while we\u0027re here (also a signed/unsigned confusion). Probably fine as a separate bug though."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/fs/hyprlofs/hyprlofs_vnops.c","type":"MODIFIED","insertions":12,"deletions":-11}],"sizeInsertions":12,"sizeDeletions":-11},{"number":"2","revision":"7e8ee8dc952e2cb7a018fb0367fd31677e9d0835","parents":["0025193671abc58806b94583cb40635dd083e26e"],"ref":"refs/changes/60/1060/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1480975649,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480975967,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1480977850,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480975849,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/fs/hyprlofs/hyprlofs_vnops.c","type":"MODIFIED","insertions":16,"deletions":-15}],"sizeInsertions":16,"sizeDeletions":-15},{"number":"3","revision":"2856f8e8068d0168f37880ebb2e2cec56102522f","parents":["0025193671abc58806b94583cb40635dd083e26e"],"ref":"refs/changes/60/1060/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1480977937,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480975967,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1480977850,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1480975849,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"SUBM","value":"1","grantedOn":1480977950,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/fs/hyprlofs/hyprlofs_vnops.c","type":"MODIFIED","insertions":16,"deletions":-15}],"sizeInsertions":16,"sizeDeletions":-15}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}]}