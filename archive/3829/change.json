{"project":"joyent/smartos-live","branch":"master","id":"I87be3c9b796b4738b2b465ec57a45156804f049c","number":"3829","subject":"OS-6857 Allow writing linklocal routes using MAC addresses instead of NIC index Reviewed by: Dave Eddy \u003cdave.eddy@joyent.com\u003e Reviewed by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e Approved by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e","owner":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"url":"https://cr.joyent.us/3829","commitMessage":"OS-6857 Allow writing linklocal routes using MAC addresses instead of NIC index\nReviewed by: Dave Eddy \u003cdave.eddy@joyent.com\u003e\nReviewed by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e\nApproved by: Cody Peter Mello \u003ccody.mello@joyent.com\u003e\n","createdOn":1523984286,"lastUpdated":1524247943,"open":false,"status":"MERGED","comments":[{"timestamp":1523984286,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Uploaded patch set 1."},{"timestamp":1523984333,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1523986550,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Uploaded patch set 2."},{"timestamp":1523986596,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1523990920,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 2:\n\n(2 comments)\n\nIt would be nice if we could somehow normalize the MAC address (i.e. \"a:b:c:d:e:f\" becomes \"0a:0b:0c:0d:0e:0f\") as it came in, but I\u0027m not sure where the best place for that would be."},{"timestamp":1523991464,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 2:\n\n(6 comments)"},{"timestamp":1523999219,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Uploaded patch set 3."},{"timestamp":1523999266,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1523999285,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 2:\n\n(8 comments)"},{"timestamp":1523999535,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 2:\n\nI am not sure what we should do about normalizing the mac addr. \nWhen you go through vmadm directly macaddr.parse() will handle most of this for us, and .toString() will mad with zeros.  If a user goes around vmadm and updates /zones/uuid/config/routes.json then there are no guarantees and metadata/agent.js will simply compare the macs and skip any issues it runs into just like it does today.  I believe macs are stored in vmadm in the same format that the toString() is giving us.  Maybe its best we wrap the mac from the vmobj in a macaddr.parse as well to be safe?"},{"timestamp":1524003032,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 3:\n\n(2 comments)"},{"timestamp":1524162470,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Uploaded patch set 4."},{"timestamp":1524162477,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 4:\n\n(2 comments)"},{"timestamp":1524162516,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1524162914,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1524167795,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Uploaded patch set 5."},{"timestamp":1524167806,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1524167841,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1524242118,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 5: Code-Review+1"},{"timestamp":1524247404,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 5: Code-Review+1 Integration-Approval+1"},{"timestamp":1524247733,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Uploaded patch set 6: Patch Set 5 was rebased."},{"timestamp":1524247887,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Uploaded patch set 7: Commit message was updated."},{"timestamp":1524247943,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Michael Zeller"}],"currentPatchSet":{"number":"7","revision":"87be3c9b796b4738b2b465ec57a45156804f049c","parents":["93f9d2728a901c1d6bc574a15853bf335c18b7dd"],"ref":"refs/changes/29/3829/7","uploader":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"createdOn":1524247887,"author":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1524167841,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1524242118,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1524247404,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1524247404,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1524247943,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":35,"deletions":0},{"file":"src/vm/lib/metadata/agent.js","type":"MODIFIED","insertions":64,"deletions":-11},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":37,"deletions":-6},{"file":"src/vm/node_modules/macaddr/lib/macaddr.js","type":"ADDED","insertions":236,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/assert-plus/assert.js","type":"ADDED","insertions":211,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/assert-plus/package.json","type":"ADDED","insertions":82,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/lib/jsprim.js","type":"ADDED","insertions":735,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/lib/extsprintf.js","type":"ADDED","insertions":183,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/package.json","type":"ADDED","insertions":41,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/lib/links.js","type":"ADDED","insertions":66,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/lib/validate.js","type":"ADDED","insertions":273,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/package.json","type":"ADDED","insertions":65,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/lib/verror.js","type":"ADDED","insertions":451,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/lib/util.js","type":"ADDED","insertions":107,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/package.json","type":"ADDED","insertions":59,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/package.json","type":"ADDED","insertions":50,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/package.json","type":"ADDED","insertions":51,"deletions":0},{"file":"src/vm/node_modules/macaddr/package.json","type":"ADDED","insertions":63,"deletions":0},{"file":"src/vm/tests/test-routes-joyent-minimal.js","type":"MODIFIED","insertions":40,"deletions":-8}],"sizeInsertions":2925,"sizeDeletions":-25},"patchSets":[{"number":"1","revision":"66617e7c6be89d1ab5fe5c532a56b65e79dda51a","parents":["c6f5e9955adbc45688074ab1b8cac5d340262c56"],"ref":"refs/changes/29/3829/1","uploader":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"createdOn":1523984286,"author":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1523984333,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":37,"deletions":0},{"file":"src/vm/lib/metadata/agent.js","type":"MODIFIED","insertions":42,"deletions":-9},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":44,"deletions":-18},{"file":"src/vm/node_modules/macaddr/lib/macaddr.js","type":"ADDED","insertions":236,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/assert-plus/assert.js","type":"ADDED","insertions":211,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/assert-plus/package.json","type":"ADDED","insertions":82,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/lib/jsprim.js","type":"ADDED","insertions":735,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/lib/extsprintf.js","type":"ADDED","insertions":183,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/package.json","type":"ADDED","insertions":41,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/lib/links.js","type":"ADDED","insertions":66,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/lib/validate.js","type":"ADDED","insertions":273,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/package.json","type":"ADDED","insertions":65,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/test/tests.js","type":"ADDED","insertions":95,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/lib/verror.js","type":"ADDED","insertions":451,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/lib/util.js","type":"ADDED","insertions":107,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/package.json","type":"ADDED","insertions":59,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/package.json","type":"ADDED","insertions":50,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/package.json","type":"ADDED","insertions":51,"deletions":0},{"file":"src/vm/node_modules/macaddr/package.json","type":"ADDED","insertions":63,"deletions":0},{"file":"src/vm/tests/test-routes-joyent-minimal.js","type":"MODIFIED","insertions":40,"deletions":-8}],"sizeInsertions":3007,"sizeDeletions":-35},{"number":"2","revision":"8c20a3bf4f040a759f7a36188d37f443c7d0f3a9","parents":["c6f5e9955adbc45688074ab1b8cac5d340262c56"],"ref":"refs/changes/29/3829/2","uploader":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"createdOn":1523986550,"author":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1523986596,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/manifest","line":504,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Is the test dir required?"},{"file":"src/manifest","line":504,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"src/vm/lib/metadata/agent.js","line":23,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"2018"},{"file":"src/vm/lib/metadata/agent.js","line":23,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"src/vm/lib/metadata/agent.js","line":1400,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Since this is not the mac itself, but a possible regex match, i\u0027d prefer if this was named something like `macMatch` to make that clear."},{"file":"src/vm/lib/metadata/agent.js","line":1400,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"src/vm/lib/metadata/agent.js","line":1418,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"nit: No space between `i` and `++`"},{"file":"src/vm/lib/metadata/agent.js","line":1418,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"src/vm/node_modules/VM.js","line":5020,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Let\u0027s add ^ and $ to both of these regexes. It looks like currently it will accept leading and trailing characters."},{"file":"src/vm/node_modules/VM.js","line":5020,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Same comment as the agent, i\u0027d prefer this be called `macMatch`... calling it `macArray` makes me think it is an array of mac address parts."},{"file":"src/vm/node_modules/VM.js","line":5020,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"src/vm/node_modules/VM.js","line":5020,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"},{"file":"src/vm/node_modules/VM.js","line":5027,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"should this be a log.warn or log.error? how problematic is this?"},{"file":"src/vm/node_modules/VM.js","line":5027,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"I don\u0027t have a preference one way or another.  I think it should just be logged.  The proper error is returned to the user regardless since this is parsing user provided input."},{"file":"src/vm/node_modules/VM.js","line":5039,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"It looks like this should be inside a for loop over each of the ips, like below.\n\nIt might be good to actually move the loop over the ips to outside of the conditional, and have the macs[]/nics[] branches set the index."},{"file":"src/vm/node_modules/VM.js","line":5039,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":37,"deletions":0},{"file":"src/vm/lib/metadata/agent.js","type":"MODIFIED","insertions":42,"deletions":-9},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":47,"deletions":-18},{"file":"src/vm/node_modules/macaddr/lib/macaddr.js","type":"ADDED","insertions":236,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/assert-plus/assert.js","type":"ADDED","insertions":211,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/assert-plus/package.json","type":"ADDED","insertions":82,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/lib/jsprim.js","type":"ADDED","insertions":735,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/lib/extsprintf.js","type":"ADDED","insertions":183,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/package.json","type":"ADDED","insertions":41,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/lib/links.js","type":"ADDED","insertions":66,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/lib/validate.js","type":"ADDED","insertions":273,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/package.json","type":"ADDED","insertions":65,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/test/tests.js","type":"ADDED","insertions":95,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/lib/verror.js","type":"ADDED","insertions":451,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/lib/util.js","type":"ADDED","insertions":107,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/package.json","type":"ADDED","insertions":59,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/package.json","type":"ADDED","insertions":50,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/package.json","type":"ADDED","insertions":51,"deletions":0},{"file":"src/vm/node_modules/macaddr/package.json","type":"ADDED","insertions":63,"deletions":0},{"file":"src/vm/tests/test-routes-joyent-minimal.js","type":"MODIFIED","insertions":40,"deletions":-8}],"sizeInsertions":3010,"sizeDeletions":-35},{"number":"3","revision":"191d94439650c540ad2013ea922a4a1952397368","parents":["c6f5e9955adbc45688074ab1b8cac5d340262c56"],"ref":"refs/changes/29/3829/3","uploader":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"createdOn":1523999219,"author":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1523999266,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/vm/lib/metadata/agent.js","line":1404,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"should this be `$`?"},{"file":"src/vm/lib/metadata/agent.js","line":1404,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Fail on my part.  That\u0027s what I get for testing VM.js and quickly modifying this before the push.\n\nFixed"},{"file":"src/vm/lib/metadata/agent.js","line":1415,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"should this be:\n\n\n mac \u003d macMatch[1]"},{"file":"src/vm/lib/metadata/agent.js","line":1415,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"same as above."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":35,"deletions":0},{"file":"src/vm/lib/metadata/agent.js","type":"MODIFIED","insertions":48,"deletions":-11},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":37,"deletions":-6},{"file":"src/vm/node_modules/macaddr/lib/macaddr.js","type":"ADDED","insertions":236,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/assert-plus/assert.js","type":"ADDED","insertions":211,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/assert-plus/package.json","type":"ADDED","insertions":82,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/lib/jsprim.js","type":"ADDED","insertions":735,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/lib/extsprintf.js","type":"ADDED","insertions":183,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/package.json","type":"ADDED","insertions":41,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/lib/links.js","type":"ADDED","insertions":66,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/lib/validate.js","type":"ADDED","insertions":273,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/package.json","type":"ADDED","insertions":65,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/lib/verror.js","type":"ADDED","insertions":451,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/lib/util.js","type":"ADDED","insertions":107,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/package.json","type":"ADDED","insertions":59,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/package.json","type":"ADDED","insertions":50,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/package.json","type":"ADDED","insertions":51,"deletions":0},{"file":"src/vm/node_modules/macaddr/package.json","type":"ADDED","insertions":63,"deletions":0},{"file":"src/vm/tests/test-routes-joyent-minimal.js","type":"MODIFIED","insertions":40,"deletions":-8}],"sizeInsertions":2909,"sizeDeletions":-25},{"number":"4","revision":"782b2c0afdfe1cc476658604198b8c29ea08208b","parents":["c6f5e9955adbc45688074ab1b8cac5d340262c56"],"ref":"refs/changes/29/3829/4","uploader":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"createdOn":1524162470,"author":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1524162516,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/vm/lib/metadata/agent.js","line":1439,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Since both of these are MAC objects, you can do:\n\n    if (nicMac.compare(mac) \u003d\u003d\u003d 0) {"},{"file":"src/vm/lib/metadata/agent.js","line":1439,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":35,"deletions":0},{"file":"src/vm/lib/metadata/agent.js","type":"MODIFIED","insertions":64,"deletions":-11},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":37,"deletions":-6},{"file":"src/vm/node_modules/macaddr/lib/macaddr.js","type":"ADDED","insertions":236,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/assert-plus/assert.js","type":"ADDED","insertions":211,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/assert-plus/package.json","type":"ADDED","insertions":82,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/lib/jsprim.js","type":"ADDED","insertions":735,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/lib/extsprintf.js","type":"ADDED","insertions":183,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/package.json","type":"ADDED","insertions":41,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/lib/links.js","type":"ADDED","insertions":66,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/lib/validate.js","type":"ADDED","insertions":273,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/package.json","type":"ADDED","insertions":65,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/lib/verror.js","type":"ADDED","insertions":451,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/lib/util.js","type":"ADDED","insertions":107,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/package.json","type":"ADDED","insertions":59,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/package.json","type":"ADDED","insertions":50,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/package.json","type":"ADDED","insertions":51,"deletions":0},{"file":"src/vm/node_modules/macaddr/package.json","type":"ADDED","insertions":63,"deletions":0},{"file":"src/vm/tests/test-routes-joyent-minimal.js","type":"MODIFIED","insertions":40,"deletions":-8}],"sizeInsertions":2925,"sizeDeletions":-25},{"number":"5","revision":"1a8f271a35af7c8cbb64b65a72393b35de6ae2db","parents":["c6f5e9955adbc45688074ab1b8cac5d340262c56"],"ref":"refs/changes/29/3829/5","uploader":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"createdOn":1524167795,"author":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1524247404,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1524247404,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1524167841,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1524242118,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":35,"deletions":0},{"file":"src/vm/lib/metadata/agent.js","type":"MODIFIED","insertions":64,"deletions":-11},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":37,"deletions":-6},{"file":"src/vm/node_modules/macaddr/lib/macaddr.js","type":"ADDED","insertions":236,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/assert-plus/assert.js","type":"ADDED","insertions":211,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/assert-plus/package.json","type":"ADDED","insertions":82,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/lib/jsprim.js","type":"ADDED","insertions":735,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/lib/extsprintf.js","type":"ADDED","insertions":183,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/package.json","type":"ADDED","insertions":41,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/lib/links.js","type":"ADDED","insertions":66,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/lib/validate.js","type":"ADDED","insertions":273,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/package.json","type":"ADDED","insertions":65,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/lib/verror.js","type":"ADDED","insertions":451,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/lib/util.js","type":"ADDED","insertions":107,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/package.json","type":"ADDED","insertions":59,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/package.json","type":"ADDED","insertions":50,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/package.json","type":"ADDED","insertions":51,"deletions":0},{"file":"src/vm/node_modules/macaddr/package.json","type":"ADDED","insertions":63,"deletions":0},{"file":"src/vm/tests/test-routes-joyent-minimal.js","type":"MODIFIED","insertions":40,"deletions":-8}],"sizeInsertions":2925,"sizeDeletions":-25},{"number":"6","revision":"cf461a09395312d4f8bc2f8736e567e0c740b1e3","parents":["93f9d2728a901c1d6bc574a15853bf335c18b7dd"],"ref":"refs/changes/29/3829/6","uploader":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"createdOn":1524247733,"author":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1524247404,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1524247404,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1524167841,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1524242118,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":35,"deletions":0},{"file":"src/vm/lib/metadata/agent.js","type":"MODIFIED","insertions":64,"deletions":-11},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":37,"deletions":-6},{"file":"src/vm/node_modules/macaddr/lib/macaddr.js","type":"ADDED","insertions":236,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/assert-plus/assert.js","type":"ADDED","insertions":211,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/assert-plus/package.json","type":"ADDED","insertions":82,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/lib/jsprim.js","type":"ADDED","insertions":735,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/lib/extsprintf.js","type":"ADDED","insertions":183,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/package.json","type":"ADDED","insertions":41,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/lib/links.js","type":"ADDED","insertions":66,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/lib/validate.js","type":"ADDED","insertions":273,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/package.json","type":"ADDED","insertions":65,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/lib/verror.js","type":"ADDED","insertions":451,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/lib/util.js","type":"ADDED","insertions":107,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/package.json","type":"ADDED","insertions":59,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/package.json","type":"ADDED","insertions":50,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/package.json","type":"ADDED","insertions":51,"deletions":0},{"file":"src/vm/node_modules/macaddr/package.json","type":"ADDED","insertions":63,"deletions":0},{"file":"src/vm/tests/test-routes-joyent-minimal.js","type":"MODIFIED","insertions":40,"deletions":-8}],"sizeInsertions":2925,"sizeDeletions":-25},{"number":"7","revision":"87be3c9b796b4738b2b465ec57a45156804f049c","parents":["93f9d2728a901c1d6bc574a15853bf335c18b7dd"],"ref":"refs/changes/29/3829/7","uploader":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"createdOn":1524247887,"author":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1524247404,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1524247404,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1524167841,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1524242118,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"SUBM","value":"1","grantedOn":1524247943,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"src/manifest","type":"MODIFIED","insertions":35,"deletions":0},{"file":"src/vm/lib/metadata/agent.js","type":"MODIFIED","insertions":64,"deletions":-11},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":37,"deletions":-6},{"file":"src/vm/node_modules/macaddr/lib/macaddr.js","type":"ADDED","insertions":236,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/assert-plus/assert.js","type":"ADDED","insertions":211,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/assert-plus/package.json","type":"ADDED","insertions":82,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/lib/jsprim.js","type":"ADDED","insertions":735,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/lib/extsprintf.js","type":"ADDED","insertions":183,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/extsprintf/package.json","type":"ADDED","insertions":41,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/lib/links.js","type":"ADDED","insertions":66,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/lib/validate.js","type":"ADDED","insertions":273,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/json-schema/package.json","type":"ADDED","insertions":65,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/lib/verror.js","type":"ADDED","insertions":451,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/LICENSE","type":"ADDED","insertions":19,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/lib/util.js","type":"ADDED","insertions":107,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/node_modules/core-util-is/package.json","type":"ADDED","insertions":59,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/node_modules/verror/package.json","type":"ADDED","insertions":50,"deletions":0},{"file":"src/vm/node_modules/macaddr/node_modules/jsprim/package.json","type":"ADDED","insertions":51,"deletions":0},{"file":"src/vm/node_modules/macaddr/package.json","type":"ADDED","insertions":63,"deletions":0},{"file":"src/vm/tests/test-routes-joyent-minimal.js","type":"MODIFIED","insertions":40,"deletions":-8}],"sizeInsertions":2925,"sizeDeletions":-25}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}]}