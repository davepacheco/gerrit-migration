{"project":"joyent/sdc-cn-agent","branch":"master","id":"I36f982828aedb36759c9c8c8a97a4b0741540a0f","number":"4896","subject":"TRITON-809 update sdc-cn-agent for TRITON-805 Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Reviewed by: Orlando Vazquez \u003corlando@joyent.com\u003e Approved by: Orlando Vazquez \u003corlando@joyent.com\u003e","owner":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"url":"https://cr.joyent.us/4896","commitMessage":"TRITON-809 update sdc-cn-agent for TRITON-805\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nReviewed by: Orlando Vazquez \u003corlando@joyent.com\u003e\nApproved by: Orlando Vazquez \u003corlando@joyent.com\u003e\n","createdOn":1538170564,"lastUpdated":1539387586,"open":false,"status":"MERGED","comments":[{"timestamp":1538170564,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 1."},{"timestamp":1538170566,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 16bae700867520ffe0fded34dd11d6bd1e68cd5c\n    \n    update cn-agent for node-vmadm and dummy vminfod"},{"timestamp":1538171438,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n(2 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1538173306,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 2."},{"timestamp":1538173308,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 0ad0761865458e6f21bcfbcac4f867dd68bc2a40\n    \n    fix make check\n    \n    commit a6e77f8fc6091faebe95da0c534fa2326e1b4464\n    \n    fix make check"},{"timestamp":1538173360,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539290767,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 3."},{"timestamp":1539290769,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 73bc01f6a636f0431571a7bb8a25b510200ca993\n    \n    bump sdc-clients to hopfully get past BadDigest\n    \n    commit eeacf4a07fe78a8ba5567c1ee4d08bdf5b7d8ac0\n    \n    add support for reprovision\n    \n    commit 5c158795b320343276f6d2c4f68501ca64c38b97\n    \n    add support for snapshots and fix autoboot"},{"timestamp":1539290822,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539294508,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3: Code-Review+1\n\n(1 comment)"},{"timestamp":1539326905,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1539386329,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Uploaded patch set 4."},{"timestamp":1539386330,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 37e575f22391d452c30d5ce796a033eaa2595c0e\n    \n    bump to vmadm release 1.3.0 now that that\u0027s published"},{"timestamp":1539386367,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539386977,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1"},{"timestamp":1539387586,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Josh Wilsdon"}],"currentPatchSet":{"number":"4","revision":"36f982828aedb36759c9c8c8a97a4b0741540a0f","parents":["14ba95d61c68988b6854f917cceb04fadf3f5a52"],"ref":"refs/changes/96/4896/4","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1539386329,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539386367,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539386977,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1539386977,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1539387586,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"bin/cn-agent.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/app.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/backends/dummy/index.js","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"lib/backends/dummy/lib/sysinfo.js","type":"MODIFIED","insertions":7,"deletions":0},{"file":"lib/backends/dummy/lib/vmadm.js","type":"DELETED","insertions":0,"deletions":-922},{"file":"lib/backends/dummy/tasks/machine_boot.js","type":"MODIFIED","insertions":12,"deletions":-2},{"file":"lib/backends/dummy/tasks/machine_create.js","type":"MODIFIED","insertions":19,"deletions":-2},{"file":"lib/backends/dummy/tasks/machine_create_snapshot.js","type":"ADDED","insertions":76,"deletions":0},{"file":"lib/backends/dummy/tasks/machine_delete_snapshot.js","type":"ADDED","insertions":78,"deletions":0},{"file":"lib/backends/dummy/tasks/machine_destroy.js","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"lib/backends/dummy/tasks/machine_load.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"lib/backends/dummy/tasks/machine_reboot.js","type":"MODIFIED","insertions":12,"deletions":-2},{"file":"lib/backends/dummy/tasks/machine_reprovision.js","type":"ADDED","insertions":201,"deletions":0},{"file":"lib/backends/dummy/tasks/machine_rollback_snapshot.js","type":"ADDED","insertions":76,"deletions":0},{"file":"lib/backends/dummy/tasks/machine_shutdown.js","type":"MODIFIED","insertions":12,"deletions":-2},{"file":"lib/backends/dummy/tasks/machine_update.js","type":"MODIFIED","insertions":13,"deletions":-3},{"file":"lib/backends/dummy/tasks/nop.js","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"lib/backends/dummy/tasks/server_update_nics.js","type":"ADDED","insertions":145,"deletions":0},{"file":"lib/task_agent/task_agent.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/task_agent/task_runner.js","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"lib/task_agent/task_worker.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-3}],"sizeInsertions":700,"sizeDeletions":-950},"patchSets":[{"number":"1","revision":"c7b0b7fcdbd0ee6da20caa850b35ff128d400788","parents":["14ba95d61c68988b6854f917cceb04fadf3f5a52"],"ref":"refs/changes/96/4896/1","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1538170564,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1538171438,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/backends/dummy/tasks/server_update_nics.js","line":74,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: missing semicolon"},{"file":"lib/backends/dummy/tasks/server_update_nics.js","line":79,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"warning: variable is declared but never referenced: filename"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"bin/cn-agent.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/app.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/backends/dummy/index.js","type":"MODIFIED","insertions":7,"deletions":0},{"file":"lib/backends/dummy/lib/sysinfo.js","type":"MODIFIED","insertions":7,"deletions":0},{"file":"lib/backends/dummy/lib/vmadm.js","type":"DELETED","insertions":0,"deletions":-922},{"file":"lib/backends/dummy/tasks/machine_boot.js","type":"MODIFIED","insertions":12,"deletions":-2},{"file":"lib/backends/dummy/tasks/machine_create.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"lib/backends/dummy/tasks/machine_destroy.js","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"lib/backends/dummy/tasks/machine_load.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"lib/backends/dummy/tasks/machine_reboot.js","type":"MODIFIED","insertions":12,"deletions":-2},{"file":"lib/backends/dummy/tasks/machine_shutdown.js","type":"MODIFIED","insertions":12,"deletions":-2},{"file":"lib/backends/dummy/tasks/machine_update.js","type":"MODIFIED","insertions":13,"deletions":-3},{"file":"lib/backends/dummy/tasks/nop.js","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"lib/backends/dummy/tasks/server_update_nics.js","type":"ADDED","insertions":145,"deletions":0},{"file":"lib/task_agent/task_agent.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/task_agent/task_runner.js","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"lib/task_agent/task_worker.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":258,"sizeDeletions":-947},{"number":"2","revision":"f7a74447d0f6044cf06c91a7cabd6c4d17e47e9d","parents":["14ba95d61c68988b6854f917cceb04fadf3f5a52"],"ref":"refs/changes/96/4896/2","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1538173306,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1538173360,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"bin/cn-agent.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/app.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/backends/dummy/index.js","type":"MODIFIED","insertions":7,"deletions":0},{"file":"lib/backends/dummy/lib/sysinfo.js","type":"MODIFIED","insertions":7,"deletions":0},{"file":"lib/backends/dummy/lib/vmadm.js","type":"DELETED","insertions":0,"deletions":-922},{"file":"lib/backends/dummy/tasks/machine_boot.js","type":"MODIFIED","insertions":12,"deletions":-2},{"file":"lib/backends/dummy/tasks/machine_create.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"lib/backends/dummy/tasks/machine_destroy.js","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"lib/backends/dummy/tasks/machine_load.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"lib/backends/dummy/tasks/machine_reboot.js","type":"MODIFIED","insertions":12,"deletions":-2},{"file":"lib/backends/dummy/tasks/machine_shutdown.js","type":"MODIFIED","insertions":12,"deletions":-2},{"file":"lib/backends/dummy/tasks/machine_update.js","type":"MODIFIED","insertions":13,"deletions":-3},{"file":"lib/backends/dummy/tasks/nop.js","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"lib/backends/dummy/tasks/server_update_nics.js","type":"ADDED","insertions":145,"deletions":0},{"file":"lib/task_agent/task_agent.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/task_agent/task_runner.js","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"lib/task_agent/task_worker.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":258,"sizeDeletions":-947},{"number":"3","revision":"92a6424e471888df82394008be0d76947e2c21a0","parents":["14ba95d61c68988b6854f917cceb04fadf3f5a52"],"ref":"refs/changes/96/4896/3","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1539290767,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539290822,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539294508,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539326905,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1539326905,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"comments":[{"file":"package.json","line":36,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"assuming waiting for that to merge"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"bin/cn-agent.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/app.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/backends/dummy/index.js","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"lib/backends/dummy/lib/sysinfo.js","type":"MODIFIED","insertions":7,"deletions":0},{"file":"lib/backends/dummy/lib/vmadm.js","type":"DELETED","insertions":0,"deletions":-922},{"file":"lib/backends/dummy/tasks/machine_boot.js","type":"MODIFIED","insertions":12,"deletions":-2},{"file":"lib/backends/dummy/tasks/machine_create.js","type":"MODIFIED","insertions":19,"deletions":-2},{"file":"lib/backends/dummy/tasks/machine_create_snapshot.js","type":"ADDED","insertions":76,"deletions":0},{"file":"lib/backends/dummy/tasks/machine_delete_snapshot.js","type":"ADDED","insertions":78,"deletions":0},{"file":"lib/backends/dummy/tasks/machine_destroy.js","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"lib/backends/dummy/tasks/machine_load.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"lib/backends/dummy/tasks/machine_reboot.js","type":"MODIFIED","insertions":12,"deletions":-2},{"file":"lib/backends/dummy/tasks/machine_reprovision.js","type":"ADDED","insertions":201,"deletions":0},{"file":"lib/backends/dummy/tasks/machine_rollback_snapshot.js","type":"ADDED","insertions":76,"deletions":0},{"file":"lib/backends/dummy/tasks/machine_shutdown.js","type":"MODIFIED","insertions":12,"deletions":-2},{"file":"lib/backends/dummy/tasks/machine_update.js","type":"MODIFIED","insertions":13,"deletions":-3},{"file":"lib/backends/dummy/tasks/nop.js","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"lib/backends/dummy/tasks/server_update_nics.js","type":"ADDED","insertions":145,"deletions":0},{"file":"lib/task_agent/task_agent.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/task_agent/task_runner.js","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"lib/task_agent/task_worker.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-3}],"sizeInsertions":700,"sizeDeletions":-950},{"number":"4","revision":"36f982828aedb36759c9c8c8a97a4b0741540a0f","parents":["14ba95d61c68988b6854f917cceb04fadf3f5a52"],"ref":"refs/changes/96/4896/4","uploader":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"createdOn":1539386329,"author":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539386367,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539386977,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1539386977,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1539387586,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"bin/cn-agent.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/app.js","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"lib/backends/dummy/index.js","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"lib/backends/dummy/lib/sysinfo.js","type":"MODIFIED","insertions":7,"deletions":0},{"file":"lib/backends/dummy/lib/vmadm.js","type":"DELETED","insertions":0,"deletions":-922},{"file":"lib/backends/dummy/tasks/machine_boot.js","type":"MODIFIED","insertions":12,"deletions":-2},{"file":"lib/backends/dummy/tasks/machine_create.js","type":"MODIFIED","insertions":19,"deletions":-2},{"file":"lib/backends/dummy/tasks/machine_create_snapshot.js","type":"ADDED","insertions":76,"deletions":0},{"file":"lib/backends/dummy/tasks/machine_delete_snapshot.js","type":"ADDED","insertions":78,"deletions":0},{"file":"lib/backends/dummy/tasks/machine_destroy.js","type":"MODIFIED","insertions":11,"deletions":-1},{"file":"lib/backends/dummy/tasks/machine_load.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"lib/backends/dummy/tasks/machine_reboot.js","type":"MODIFIED","insertions":12,"deletions":-2},{"file":"lib/backends/dummy/tasks/machine_reprovision.js","type":"ADDED","insertions":201,"deletions":0},{"file":"lib/backends/dummy/tasks/machine_rollback_snapshot.js","type":"ADDED","insertions":76,"deletions":0},{"file":"lib/backends/dummy/tasks/machine_shutdown.js","type":"MODIFIED","insertions":12,"deletions":-2},{"file":"lib/backends/dummy/tasks/machine_update.js","type":"MODIFIED","insertions":13,"deletions":-3},{"file":"lib/backends/dummy/tasks/nop.js","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"lib/backends/dummy/tasks/server_update_nics.js","type":"ADDED","insertions":145,"deletions":0},{"file":"lib/task_agent/task_agent.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/task_agent/task_runner.js","type":"MODIFIED","insertions":6,"deletions":-6},{"file":"lib/task_agent/task_worker.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-3}],"sizeInsertions":700,"sizeDeletions":-950}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},{"name":"Chris Burroughs","email":"chris.burroughs@joyent.com","username":"cburroughs"}]}