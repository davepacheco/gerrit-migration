From 75f044acd3f118bb4a4781fd30513203577f4f72 Mon Sep 17 00:00:00 2001
From: Angela Fong <angela.fong@joyent.com>
Date: Tue, 27 Dec 2016 21:35:25 -0800
Subject: [PATCH] ADMINUI-2360 Network description enterable/viewable from the
 UI

---
 www/js/tpl/networks-detail.hbs | 6 ++++++
 www/js/tpl/networks-form.hbs   | 9 +++++++++
 www/js/views/network-form.js   | 4 ++++
 3 files changed, 19 insertions(+)

diff --git a/www/js/tpl/networks-detail.hbs b/www/js/tpl/networks-detail.hbs
index 5bc2f64e..ea2a4647 100644
--- a/www/js/tpl/networks-detail.hbs
+++ b/www/js/tpl/networks-detail.hbs
@@ -100,6 +100,12 @@
       <div class="value" name="internet_nat">{{#if internet_nat}}yes{{else}}no{{/if}}</div>
       </li>
     {{/if}}
+
+    <li>
+      <strong>Description</strong>
+      <div class="value" name="description">{{description}}</div>
+    </li>
+
   </ul>
 </section>
 
diff --git a/www/js/tpl/networks-form.hbs b/www/js/tpl/networks-form.hbs
index 77c90579..b8e0cc48 100644
--- a/www/js/tpl/networks-form.hbs
+++ b/www/js/tpl/networks-form.hbs
@@ -259,6 +259,15 @@
                 </div>
             {{/if}}
 
+            <div class="form-group">
+                <label class="control-label col-sm-4" for="network-descr">Description</label>
+                <div class="controls col-sm-7">
+                    <input type="textarea" id="network-descr" value="{{description}}"
+                        class="form-control"
+                        name="description" placeholder="More details about the network">
+                </div>
+            </div>
+
             <div class="form-group">
                 <div class="col-sm-offset-4 col-sm-8">
                     <button type="submit" class="btn btn-primary save">Save Network</button>
diff --git a/www/js/views/network-form.js b/www/js/views/network-form.js
index 1fabc365..8b8add18 100644
--- a/www/js/views/network-form.js
+++ b/www/js/views/network-form.js
@@ -167,6 +167,10 @@ var View = Backbone.Marionette.Layout.extend({
         data.routes = routes;
         data.nic_tag = this.$('select[name=nic_tag]').val();
 
+        if (!data.description) {
+            delete data.description;
+        }
+
         if (this.options.isFabric) {
             var vlan = this.options.data || {};
             data.vlan_id = vlan.vlan_id || this.$('select[name=vlan_id]').val();
-- 
2.21.0

