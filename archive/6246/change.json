{"project":"joyent/boray","branch":"master","id":"I93823001f47917340e716d5fe6606f38322bd8fd","number":"6246","subject":"MANTA-4271 Add config file parameter to boray Reviewed by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e Reviewed by: Michael Zeller \u003cmike.zeller@joyent.com\u003e Approved by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e","owner":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"url":"https://cr.joyent.us/6246","commitMessage":"MANTA-4271 Add config file parameter to boray\nReviewed by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e\nReviewed by: Michael Zeller \u003cmike.zeller@joyent.com\u003e\nApproved by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e\n","createdOn":1557897704,"lastUpdated":1559241765,"open":false,"status":"MERGED","comments":[{"timestamp":1557897704,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 1."},{"timestamp":1557897707,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 7fbfbee4e1959a902f6e4fd204c5d4efa899732e\n    \n    initial commit"},{"timestamp":1557897708,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n fatal: No tags can describe \u00279302b4489f0a6e6196e64173f6ac62c1ffb27257\u0027.\n Try --always, or create some tags.\n xmllint --noout --path tools/ --dtdvalid tools/service_bundle.dtd.1 smf/manifests/boray.xml\n warning: failed to load external entity \"tools/service_bundle.dtd.1\"\n Could not parse DTD tools/service_bundle.dtd.1\n deps/eng/tools/mk/Makefile.smf.targ:34: recipe for target \u0027smf/manifests/boray.xml.smfchk\u0027 failed\n gmake: *** [smf/manifests/boray.xml.smfchk] Error 2"},{"timestamp":1557936761,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1557936764,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit b3b297180380308e01a5105c862d960693f229fe\n    \n    initial commit"},{"timestamp":1557936766,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2:\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n xmllint --noout --path tools/ --dtdvalid tools/service_bundle.dtd.1 smf/manifests/boray.xml\n warning: failed to load external entity \"tools/service_bundle.dtd.1\"\n Could not parse DTD tools/service_bundle.dtd.1\n deps/eng/tools/mk/Makefile.smf.targ:34: recipe for target \u0027smf/manifests/boray.xml.smfchk\u0027 failed\n gmake: *** [smf/manifests/boray.xml.smfchk] Error 2"},{"timestamp":1558023905,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 2:\n\n(2 comments)"},{"timestamp":1558106542,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1558107495,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 3: Patch Set 2 was rebased."},{"timestamp":1558107498,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit d661a940637449e0a3872c9a1d76747668054700\n    \n    initial commit"},{"timestamp":1558107499,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3:\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n xmllint --noout --path deps/eng/tools/ --dtdvalid deps/eng/tools/service_bundle.dtd.1 smf/manifests/boray.xml\n cargo check\n gmake: cargo: Command not found\n deps/eng/tools/mk/Makefile.targ:269: recipe for target \u0027check-rust\u0027 failed\n gmake: *** [check-rust] Error 127"},{"timestamp":1558108922,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 4."},{"timestamp":1558108924,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 480058483bf7d8da9644c0a88aaa2728dc51e2d5\n    \n    changes based on kelly review, CLI args override config"},{"timestamp":1558108925,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n xmllint --noout --path deps/eng/tools/ --dtdvalid deps/eng/tools/service_bundle.dtd.1 smf/manifests/boray.xml\n cargo check\n gmake: cargo: Command not found\n deps/eng/tools/mk/Makefile.targ:269: recipe for target \u0027check-rust\u0027 failed\n gmake: *** [check-rust] Error 127"},{"timestamp":1558109270,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 5."},{"timestamp":1558109272,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit 17bed5b4d46a17a06e64ab986377885601c4cd7b\n    \n    be consistent with string style"},{"timestamp":1558109273,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n xmllint --noout --path deps/eng/tools/ --dtdvalid deps/eng/tools/service_bundle.dtd.1 smf/manifests/boray.xml\n cargo check\n gmake: cargo: Command not found\n deps/eng/tools/mk/Makefile.targ:269: recipe for target \u0027check-rust\u0027 failed\n gmake: *** [check-rust] Error 127"},{"timestamp":1558112434,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 5:\n\n(7 comments)"},{"timestamp":1559058280,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 6."},{"timestamp":1559058284,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit 1553581cc64a5017134acaa9d8d120ade5276f09\n    \n    changes based on mike\u0027s review"},{"timestamp":1559058284,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n xmllint --noout --path deps/eng/tools/ --dtdvalid deps/eng/tools/service_bundle.dtd.1 smf/manifests/boray.xml\n cargo check\n gmake: cargo: Command not found\n deps/eng/tools/mk/Makefile.targ:269: recipe for target \u0027check-rust\u0027 failed\n gmake: *** [check-rust] Error 127"},{"timestamp":1559058306,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 5:\n\n(7 comments)"},{"timestamp":1559059121,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 7."},{"timestamp":1559059124,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 7:\n\nNew commits:\n    \n    commit 9fc3a24bda3bc97eb736f59024b17abb58929d40\n    \n    remove debugging output"},{"timestamp":1559059124,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n xmllint --noout --path deps/eng/tools/ --dtdvalid deps/eng/tools/service_bundle.dtd.1 smf/manifests/boray.xml\n cargo check\n gmake: cargo: Command not found\n deps/eng/tools/mk/Makefile.targ:269: recipe for target \u0027check-rust\u0027 failed\n gmake: *** [check-rust] Error 127"},{"timestamp":1559239049,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 7:\n\n(1 comment)"},{"timestamp":1559239695,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 7: Code-Review+1 Integration-Approval+1\n\nI think this looks good. Nice work!"},{"timestamp":1559241731,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Patch Set 7: Code-Review+1"},{"timestamp":1559241755,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 8: Commit message was updated."},{"timestamp":1559241765,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Dave Eddy"}],"currentPatchSet":{"number":"8","revision":"93823001f47917340e716d5fe6606f38322bd8fd","parents":["0f2ae306b67c66417bc760e37c51ea0809ae68e4"],"ref":"refs/changes/46/6246/8","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1559241755,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1559059124,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1559239695,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1559239695,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1559241731,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"SUBM","value":"1","grantedOn":1559241765,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Cargo.lock","type":"MODIFIED","insertions":10,"deletions":0},{"file":"Cargo.toml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"config.toml.dist","type":"ADDED","insertions":15,"deletions":0},{"file":"src/config.rs","type":"ADDED","insertions":39,"deletions":0},{"file":"src/main.rs","type":"MODIFIED","insertions":79,"deletions":-22},{"file":"src/metrics.rs","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/opts.rs","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":160,"sizeDeletions":-25},"patchSets":[{"number":"1","revision":"9302b4489f0a6e6196e64173f6ac62c1ffb27257","parents":["8a824cab9e55af55672f41fedfc959d7eca13fdd"],"ref":"refs/changes/46/6246/1","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1557897704,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1557897708,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Cargo.lock","type":"MODIFIED","insertions":10,"deletions":0},{"file":"Cargo.toml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"config.toml.dist","type":"ADDED","insertions":15,"deletions":0},{"file":"src/config.rs","type":"ADDED","insertions":39,"deletions":0},{"file":"src/main.rs","type":"MODIFIED","insertions":54,"deletions":-20},{"file":"src/metrics.rs","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/opts.rs","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":135,"sizeDeletions":-23},{"number":"2","revision":"0eda544e072b9c0349e9789cf7a52a0b55bb9b96","parents":["a525df06b279539a708aa125c6f71b29cba35f6a"],"ref":"refs/changes/46/6246/2","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1557936761,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1557897708,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/main.rs","line":38,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"I usually expect that CLI args and ENV vars will override config files. What is your experience with that. It could just be handy to say override the log level on the command line to debug something or change a db parameter for some one-off testing. What do you think about that versus having the config file always win? I guess my thought is choosing each configuration option independently and having each one first favor the CLI arg value, then fall back to config file, and maybe a default last (or perhaps there should not be defaults for some and we should just crash if no value if provided)."},{"file":"src/main.rs","line":38,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"This matches my experience and I agree with it.\n\nI haven\u0027t done too much work with toml.rs, but basically, if a config file is specified then it should contain *every* key needed to run.  Then, this program can look for more arguments to override what is in the config file (if specified)."},{"file":"src/main.rs","line":72,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"I think it\u0027s only because if the cueball static IP resolver that we are limited to IP address. Hopefully gonna get a postgres primary resolver prototype going in the next few days."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Cargo.lock","type":"MODIFIED","insertions":10,"deletions":0},{"file":"Cargo.toml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"config.toml.dist","type":"ADDED","insertions":15,"deletions":0},{"file":"src/config.rs","type":"ADDED","insertions":39,"deletions":0},{"file":"src/main.rs","type":"MODIFIED","insertions":54,"deletions":-20},{"file":"src/metrics.rs","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/opts.rs","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":135,"sizeDeletions":-23},{"number":"3","revision":"9d7d47a1adfed22bbffeab15b5cabb9287fa0b61","parents":["0f2ae306b67c66417bc760e37c51ea0809ae68e4"],"ref":"refs/changes/46/6246/3","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1558107495,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1557897708,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Cargo.lock","type":"MODIFIED","insertions":10,"deletions":0},{"file":"Cargo.toml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"config.toml.dist","type":"ADDED","insertions":15,"deletions":0},{"file":"src/config.rs","type":"ADDED","insertions":39,"deletions":0},{"file":"src/main.rs","type":"MODIFIED","insertions":54,"deletions":-20},{"file":"src/metrics.rs","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/opts.rs","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":135,"sizeDeletions":-23},{"number":"4","revision":"991f5218e0b61dcd1937eaf37b3935558eea2fb3","parents":["0f2ae306b67c66417bc760e37c51ea0809ae68e4"],"ref":"refs/changes/46/6246/4","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1558108922,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1558108925,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Cargo.lock","type":"MODIFIED","insertions":10,"deletions":0},{"file":"Cargo.toml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"config.toml.dist","type":"ADDED","insertions":15,"deletions":0},{"file":"src/config.rs","type":"ADDED","insertions":39,"deletions":0},{"file":"src/main.rs","type":"MODIFIED","insertions":59,"deletions":-20},{"file":"src/metrics.rs","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/opts.rs","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":140,"sizeDeletions":-23},{"number":"5","revision":"4b41c6f87f20756fceea419f194c47f51b1741d8","parents":["0f2ae306b67c66417bc760e37c51ea0809ae68e4"],"ref":"refs/changes/46/6246/5","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1558109270,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1558109273,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/main.rs","line":23,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Shouldn\u0027t be needed"},{"file":"src/main.rs","line":23,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Done"},{"file":"src/main.rs","line":34,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"nit I prefer to_owned() for these, but there\u0027s nothing wrong with to_string() in newer versions of rust."},{"file":"src/main.rs","line":34,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Done"},{"file":"src/main.rs","line":41,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"extra \";\""},{"file":"src/main.rs","line":41,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Done"},{"file":"src/main.rs","line":47,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"instead of expect it might be nicer to eprintln!() the error and set an exit code."},{"file":"src/main.rs","line":47,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Done"},{"file":"src/main.rs","line":65,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"nit\n\nFor these you could also do something like:\n\nlevel \u003d matches.value_of(\"level\").map_or(level, std::borrow::ToOwned::to_owned);"},{"file":"src/main.rs","line":65,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Done"},{"file":"src/main.rs","line":78,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"nit\n\nSame thing with eprintln!() and exit code."},{"file":"src/main.rs","line":78,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Done"},{"file":"src/main.rs","line":80,"reviewer":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},"message":"Might not need the turbo fish here.  Aka ::\u003cLevel\u003e(), the compiler might be able to figure it out based on how filter_level is used below on line 93.  But it doesn\u0027t hurt."},{"file":"src/main.rs","line":80,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Cargo.lock","type":"MODIFIED","insertions":10,"deletions":0},{"file":"Cargo.toml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"config.toml.dist","type":"ADDED","insertions":15,"deletions":0},{"file":"src/config.rs","type":"ADDED","insertions":39,"deletions":0},{"file":"src/main.rs","type":"MODIFIED","insertions":59,"deletions":-20},{"file":"src/metrics.rs","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/opts.rs","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":140,"sizeDeletions":-23},{"number":"6","revision":"119aada52e1b472e0777c12458672c7a241d5043","parents":["0f2ae306b67c66417bc760e37c51ea0809ae68e4"],"ref":"refs/changes/46/6246/6","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1559058280,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1559058284,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Cargo.lock","type":"MODIFIED","insertions":10,"deletions":0},{"file":"Cargo.toml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"config.toml.dist","type":"ADDED","insertions":15,"deletions":0},{"file":"src/config.rs","type":"ADDED","insertions":39,"deletions":0},{"file":"src/main.rs","type":"MODIFIED","insertions":81,"deletions":-22},{"file":"src/metrics.rs","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/opts.rs","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":162,"sizeDeletions":-25},{"number":"7","revision":"827e864af01d9262858fbae34676bc8bd5800a3f","parents":["0f2ae306b67c66417bc760e37c51ea0809ae68e4"],"ref":"refs/changes/46/6246/7","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1559059121,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1559059124,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1559241731,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1559239695,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1559239695,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"comments":[{"file":"src/main.rs","line":33,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Just looking for another opinion on this, but I feel like the configuration part of `main` has become an outsized portion. Perhaps we should consider factoring out config into its own function. Seems like `main` really just need the pool and the TCP stream. Just a comment, not looking for anything to be done in this CR."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Cargo.lock","type":"MODIFIED","insertions":10,"deletions":0},{"file":"Cargo.toml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"config.toml.dist","type":"ADDED","insertions":15,"deletions":0},{"file":"src/config.rs","type":"ADDED","insertions":39,"deletions":0},{"file":"src/main.rs","type":"MODIFIED","insertions":79,"deletions":-22},{"file":"src/metrics.rs","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/opts.rs","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":160,"sizeDeletions":-25},{"number":"8","revision":"93823001f47917340e716d5fe6606f38322bd8fd","parents":["0f2ae306b67c66417bc760e37c51ea0809ae68e4"],"ref":"refs/changes/46/6246/8","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1559241755,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1559059124,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1559241765,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1559241731,"by":{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1559239695,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1559239695,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"Cargo.lock","type":"MODIFIED","insertions":10,"deletions":0},{"file":"Cargo.toml","type":"MODIFIED","insertions":2,"deletions":-1},{"file":"README.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"config.toml.dist","type":"ADDED","insertions":15,"deletions":0},{"file":"src/config.rs","type":"ADDED","insertions":39,"deletions":0},{"file":"src/main.rs","type":"MODIFIED","insertions":79,"deletions":-22},{"file":"src/metrics.rs","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"src/opts.rs","type":"MODIFIED","insertions":6,"deletions":0}],"sizeInsertions":160,"sizeDeletions":-25}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Michael Zeller","email":"mike.zeller@joyent.com","username":"papertigers"},{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}]}