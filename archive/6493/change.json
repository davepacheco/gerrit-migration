{"project":"joyent/sdc-vmapi","branch":"master","id":"Icea429e156d9604c6ef40a18898d5c8bb3f96ad8","number":"6493","subject":"TRITON-1720 migration needs a rollback feature Reviewed by: Orlando Vazquez \u003corlando@joyent.com\u003e Approved by: Orlando Vazquez \u003corlando@joyent.com\u003e","owner":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"url":"https://cr.joyent.us/6493","commitMessage":"TRITON-1720 migration needs a rollback feature\nReviewed by: Orlando Vazquez \u003corlando@joyent.com\u003e\nApproved by: Orlando Vazquez \u003corlando@joyent.com\u003e\n","createdOn":1561421241,"lastUpdated":1561561999,"open":false,"status":"MERGED","comments":[{"timestamp":1561421241,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 1."},{"timestamp":1561421242,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit f167c10819d18ac0f3163e6f3722cbe1c294c157\n    \n    TRITON-1720 migration needs a rollback feature"},{"timestamp":1561424140,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1561503056,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 1: Code-Review+1 Integration-Approval+1\n\n(4 comments)"},{"timestamp":1561503683,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Uploaded patch set 2."},{"timestamp":1561503685,"reviewer":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit acffd3ed033583970fe727d31edea51540329095\n    \n    spelling fix for intentionally"},{"timestamp":1561503728,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1561533939,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1"},{"timestamp":1561561999,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Todd Whiteman"}],"currentPatchSet":{"number":"2","revision":"cea429e156d9604c6ef40a18898d5c8bb3f96ad8","parents":["8a79827c798c80af6394fd8a1a1f31b745185d1a"],"ref":"refs/changes/93/6493/2","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1561503683,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1561503728,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1561533939,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1561533939,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"SUBM","value":"1","grantedOn":1561561999,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":17,"deletions":-1},{"file":"lib/apis/moray.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/vm-migration/migrate.js","type":"MODIFIED","insertions":29,"deletions":-1},{"file":"lib/workflows/migrate-rollback.js","type":"ADDED","insertions":101,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"lib/workflows/vm-migration/abort.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/workflows/vm-migration/begin.js","type":"MODIFIED","insertions":7,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"MODIFIED","insertions":50,"deletions":-2},{"file":"lib/workflows/vm-migration/rollback.js","type":"ADDED","insertions":501,"deletions":0},{"file":"lib/workflows/vm-migration/switch.js","type":"MODIFIED","insertions":74,"deletions":-20},{"file":"lib/workflows/vm-migration/sync.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/vmapi/template","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/lib/migration.js","type":"MODIFIED","insertions":84,"deletions":-8}],"sizeInsertions":878,"sizeDeletions":-40},"patchSets":[{"number":"1","revision":"9d5c1e73058718d22bcd995fbe897477d8405401","parents":["8a79827c798c80af6394fd8a1a1f31b745185d1a"],"ref":"refs/changes/93/6493/1","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1561421241,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1561424140,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1561503056,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1561503056,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"comments":[{"file":"lib/workflows/vm-migration/rollback.js","line":85,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Intentionally"},{"file":"lib/workflows/vm-migration/rollback.js","line":214,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Intentionally"},{"file":"lib/workflows/vm-migration/rollback.js","line":265,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Intentionally"},{"file":"lib/workflows/vm-migration/rollback.js","line":401,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Intentionally"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":17,"deletions":-1},{"file":"lib/apis/moray.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/vm-migration/migrate.js","type":"MODIFIED","insertions":29,"deletions":-1},{"file":"lib/workflows/migrate-rollback.js","type":"ADDED","insertions":101,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"lib/workflows/vm-migration/begin.js","type":"MODIFIED","insertions":7,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"MODIFIED","insertions":50,"deletions":-2},{"file":"lib/workflows/vm-migration/rollback.js","type":"ADDED","insertions":501,"deletions":0},{"file":"lib/workflows/vm-migration/switch.js","type":"MODIFIED","insertions":65,"deletions":-11},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/vmapi/template","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/lib/migration.js","type":"MODIFIED","insertions":84,"deletions":-8}],"sizeInsertions":867,"sizeDeletions":-29},{"number":"2","revision":"cea429e156d9604c6ef40a18898d5c8bb3f96ad8","parents":["8a79827c798c80af6394fd8a1a1f31b745185d1a"],"ref":"refs/changes/93/6493/2","uploader":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"createdOn":1561503683,"author":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1561503728,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1561533939,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1561533939,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"SUBM","value":"1","grantedOn":1561561999,"by":{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":17,"deletions":-1},{"file":"lib/apis/moray.js","type":"MODIFIED","insertions":4,"deletions":-2},{"file":"lib/vm-migration/migrate.js","type":"MODIFIED","insertions":29,"deletions":-1},{"file":"lib/workflows/migrate-rollback.js","type":"ADDED","insertions":101,"deletions":0},{"file":"lib/workflows/migrate-switch.js","type":"MODIFIED","insertions":7,"deletions":-3},{"file":"lib/workflows/vm-migration/abort.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/workflows/vm-migration/begin.js","type":"MODIFIED","insertions":7,"deletions":0},{"file":"lib/workflows/vm-migration/common.js","type":"MODIFIED","insertions":50,"deletions":-2},{"file":"lib/workflows/vm-migration/rollback.js","type":"ADDED","insertions":501,"deletions":0},{"file":"lib/workflows/vm-migration/switch.js","type":"MODIFIED","insertions":74,"deletions":-20},{"file":"lib/workflows/vm-migration/sync.js","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"sapi_manifests/vmapi/template","type":"MODIFIED","insertions":1,"deletions":0},{"file":"test/lib/migration.js","type":"MODIFIED","insertions":84,"deletions":-8}],"sizeInsertions":878,"sizeDeletions":-40}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},{"name":"Todd Whiteman","email":"todd.whiteman@joyent.com","username":"twhiteman"}]}