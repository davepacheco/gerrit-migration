{"project":"joyent/illumos-joyent","branch":"master","id":"I7b6299c0ec8aaa0509e7b373a3f8ccd9be98f199","number":"183","subject":"OS-5007 support SO_ATTACH_FILTER on ICMP sockets Reviewed by: Cody Mello \u003cmelloc@joyent.com\u003e Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Approved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e","owner":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"url":"https://cr.joyent.us/183","commitMessage":"OS-5007 support SO_ATTACH_FILTER on ICMP sockets\nReviewed by: Cody Mello \u003cmelloc@joyent.com\u003e\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nApproved by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\n","createdOn":1470071877,"lastUpdated":1470416869,"open":false,"status":"MERGED","comments":[{"timestamp":1470071877,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 1."},{"timestamp":1470072940,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 1: Code-Review+1\n\nThis looks good to me, but I\u0027m wondering if the ticket subject would better read \"Support socket filters on ICMP sockets\", since this seems to affect more than just LX?"},{"timestamp":1470073335,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n@cody.mello That\u0027s a good suggestion.  I\u0027ll update the ticket title."},{"timestamp":1470151483,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1: Code-Review+1\n\nIs the comment in the bug report an issue that you are going to ignore or is there still more work to be done on this?"},{"timestamp":1470151606,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\nThe comment regarding krtld grumbling when booting on a DEBUG kernel was made moot by the work done in OS-5549."},{"timestamp":1470153607,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1: Integration-Approval+1"},{"timestamp":1470188517,"reviewer":{"name":"Dillon Amburgey","email":"dillona@dillona.com","username":"dillona"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1470206591,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1470351334,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 2: Patch Set 1 was rebased."},{"timestamp":1470356208,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 3."},{"timestamp":1470358120,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1470414650,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1470416755,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 4: Patch Set 3 was rebased"},{"timestamp":1470416869,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Patrick Mooney"}],"currentPatchSet":{"number":"4","revision":"100cd24f6e23e51397d6b5bfde6f10869333e1f1","parents":["498af06a42ecbb363e60543186de1d11578c8e9a"],"ref":"refs/changes/83/183/4","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1470416755,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470358120,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470414650,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470414650,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1470416869,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/inet/ip/icmp.c","type":"MODIFIED","insertions":121,"deletions":-4},{"file":"usr/src/uts/common/inet/ip/icmp_opt_data.c","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ipclassifier.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/rawip_impl.h","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/intel/icmp/Makefile","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/sparc/icmp/Makefile","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":142,"sizeDeletions":-5},"patchSets":[{"number":"1","revision":"f6d8ae19f1338ece23e3d43360c0d1cc667e459f","parents":["bc510d9e02ace3790b5697e30de0647aef48c28a"],"ref":"refs/changes/83/183/1","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1470071877,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470072940,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470151483,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470153607,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"comments":[{"file":"usr/src/uts/common/inet/ip/icmp.c","line":2059,"reviewer":{"name":"Dillon Amburgey","email":"dillona@dillona.com","username":"dillona"},"message":"Should you check (or assert?) to see that len is at least sizeof(ipha_t) or sizeof(ip6_t)"},{"file":"usr/src/uts/common/inet/ip/icmp.c","line":2059,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I believe that the assert at L2706 covers this, prior to potential filter evaluation."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/ip/icmp.c","type":"MODIFIED","insertions":121,"deletions":-4},{"file":"usr/src/uts/common/inet/ip/icmp_opt_data.c","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ipclassifier.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/rawip_impl.h","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/intel/icmp/Makefile","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/sparc/icmp/Makefile","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":142,"sizeDeletions":-5},{"number":"2","revision":"0172b679fe6e1bd51674f19e39eec057905c9136","parents":["171573f2b91f8c975e78e2658c05730e9427467e"],"ref":"refs/changes/83/183/2","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1470351334,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470072940,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470151483,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470153607,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/inet/ip/icmp.c","type":"MODIFIED","insertions":121,"deletions":-4},{"file":"usr/src/uts/common/inet/ip/icmp_opt_data.c","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ipclassifier.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/rawip_impl.h","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/intel/icmp/Makefile","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/sparc/icmp/Makefile","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":142,"sizeDeletions":-5},{"number":"3","revision":"7b6299c0ec8aaa0509e7b373a3f8ccd9be98f199","parents":["171573f2b91f8c975e78e2658c05730e9427467e"],"ref":"refs/changes/83/183/3","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1470356208,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470358120,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470414650,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470414650,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/inet/ip/icmp.c","type":"MODIFIED","insertions":121,"deletions":-4},{"file":"usr/src/uts/common/inet/ip/icmp_opt_data.c","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ipclassifier.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/rawip_impl.h","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/intel/icmp/Makefile","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/sparc/icmp/Makefile","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":142,"sizeDeletions":-5},{"number":"4","revision":"100cd24f6e23e51397d6b5bfde6f10869333e1f1","parents":["498af06a42ecbb363e60543186de1d11578c8e9a"],"ref":"refs/changes/83/183/4","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1470416755,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470358120,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1470414650,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1470414650,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1470416869,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/inet/ip/icmp.c","type":"MODIFIED","insertions":121,"deletions":-4},{"file":"usr/src/uts/common/inet/ip/icmp_opt_data.c","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/common/inet/ip/ipclassifier.c","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"usr/src/uts/common/inet/rawip_impl.h","type":"MODIFIED","insertions":6,"deletions":0},{"file":"usr/src/uts/intel/icmp/Makefile","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/sparc/icmp/Makefile","type":"MODIFIED","insertions":3,"deletions":0}],"sizeInsertions":142,"sizeDeletions":-5}],"allReviewers":[{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Dillon Amburgey","email":"dillona@dillona.com","username":"dillona"}]}