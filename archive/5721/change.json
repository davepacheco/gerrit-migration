{"project":"joyent/sdc-cloudapi","branch":"master","id":"I0615dd459720adf400dac3ef0b93f5ec0ed256d1","number":"5721","subject":"TRITON-1247 CloudAPI GetPackage and ListPackages should return `flexible_disk` and `disks` for bhyve packages","owner":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"url":"https://cr.joyent.us/5721","commitMessage":"TRITON-1247 CloudAPI GetPackage and ListPackages should return `flexible_disk` and `disks` for bhyve packages\n","createdOn":1551842745,"lastUpdated":1552502655,"open":false,"status":"MERGED","comments":[{"timestamp":1551842745,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Uploaded patch set 1."},{"timestamp":1551842745,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 4dbd2976bed41500c6f78c3f7d560c520f67ebf0\n    \n    expose flexible_disk and disks attrs for packages\n    \n    commit ec09cc62223b7ddfb7ea14d5a03d96cf7a6555d6\n    \n    fix docs\n    \n    commit dd87a4ad2b95f79e4ddf774543842612f95d480f\n    \n    update docs\n    \n    commit de939708886666d28837c734e341a93682351458\n    \n    remove unnecessary return\n    \n    commit 7e29e9188cb062338782de974f55d71379c1a690\n    \n    remove uuid\n    \n    commit e778bc6c79f261ba24b37fce35eb61cfa77aa017\n    \n    use disk.id instead of disk.uuid"},{"timestamp":1551901472,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\n(2 comments)\n\nLooks good to me but for a minor question and some format nit you can ignore"},{"timestamp":1551903067,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Uploaded patch set 2."},{"timestamp":1551903067,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 40cc5a90b04af050847e74a1366e5eb68c947d97\n    \n    update docs table formatting"},{"timestamp":1551903173,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Uploaded patch set 3."},{"timestamp":1551903173,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 9db2f453f2d2504f4d4ee01dfe1412cb5e2fc950\n    \n    update docs table formatting"},{"timestamp":1551903202,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 3:\n\n(2 comments)"},{"timestamp":1552059947,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\n(1 comment)\n\nMy vote is to get rid of `flexible_disk` when not present."},{"timestamp":1552414623,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Uploaded patch set 4."},{"timestamp":1552414623,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 292a9d5b7a4e42f9430435d1c506fb8b7d628359\n    \n    don\u0027t pass flexible_disk if it doesn\u0027t exist"},{"timestamp":1552414647,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1552491569,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1"},{"timestamp":1552496172,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1552502655,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Dylan Yep"}],"currentPatchSet":{"number":"4","revision":"0615dd459720adf400dac3ef0b93f5ec0ed256d1","parents":["7b9edc12198e2c1286c36d5fff2fdcbb566fca30"],"ref":"refs/changes/21/5721/4","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1552414623,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552491569,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1552491569,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1552496172,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1552502655,"by":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":46,"deletions":-36},{"file":"lib/packages.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/packages.test.js","type":"MODIFIED","insertions":37,"deletions":-2}],"sizeInsertions":99,"sizeDeletions":-40},"patchSets":[{"number":"1","revision":"3919e613aa422e7ac5dc4e512224c6f19eb9f863","parents":["7b9edc12198e2c1286c36d5fff2fdcbb566fca30"],"ref":"refs/changes/21/5721/1","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1551842745,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"REWORK","comments":[{"file":"docs/index.md","line":4233,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"I know it\u0027s a little bit annoying but, could you update the columns above to make the table readable also when going through the raw text?"},{"file":"docs/index.md","line":4233,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Done"},{"file":"lib/packages.js","line":55,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Will this one always be present?"},{"file":"lib/packages.js","line":55,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"I wasn\u0027t sure what to do about this. `flexible_disk` will not always be defined, but maybe that\u0027s useful information to pass through? I also considered setting p.flexible disk to `false` if undefined. What do you think?"},{"file":"lib/packages.js","line":55,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"I would say it would be better to do not pass the parameter along to VMAPI on such case and delegate the addition or not of the property to VMAPI instead of CloudAPI.\n\nIn general, I\u0027d say that when undefined, I\u0027d just avoid to pass a property, unless it\u0027s strictly required and can be set to a sensible default value. In this case is not mandatory so, I\u0027d say move ahead w/o it"},{"file":"lib/packages.js","line":55,"reviewer":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":10,"deletions":0},{"file":"lib/packages.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/packages.test.js","type":"MODIFIED","insertions":37,"deletions":-2}],"sizeInsertions":61,"sizeDeletions":-4},{"number":"2","revision":"b2a9fab4c47d38b12ca2a1ae17094b997b68b8c2","parents":["7b9edc12198e2c1286c36d5fff2fdcbb566fca30"],"ref":"refs/changes/21/5721/2","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1551903067,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":46,"deletions":-36},{"file":"lib/packages.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/packages.test.js","type":"MODIFIED","insertions":37,"deletions":-2}],"sizeInsertions":97,"sizeDeletions":-40},{"number":"3","revision":"44bba393a49ec176f608540ed5a30ec3fb024f88","parents":["7b9edc12198e2c1286c36d5fff2fdcbb566fca30"],"ref":"refs/changes/21/5721/3","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1551903173,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":46,"deletions":-36},{"file":"lib/packages.js","type":"MODIFIED","insertions":13,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/packages.test.js","type":"MODIFIED","insertions":37,"deletions":-2}],"sizeInsertions":97,"sizeDeletions":-40},{"number":"4","revision":"0615dd459720adf400dac3ef0b93f5ec0ed256d1","parents":["7b9edc12198e2c1286c36d5fff2fdcbb566fca30"],"ref":"refs/changes/21/5721/4","uploader":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"createdOn":1552414623,"author":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1552496172,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552491569,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1552491569,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"SUBM","value":"1","grantedOn":1552502655,"by":{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"docs/index.md","type":"MODIFIED","insertions":46,"deletions":-36},{"file":"lib/packages.js","type":"MODIFIED","insertions":15,"deletions":-1},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"test/packages.test.js","type":"MODIFIED","insertions":37,"deletions":-2}],"sizeInsertions":99,"sizeDeletions":-40}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},{"name":"Dylan Yep","email":"dyep49@gmail.com","username":"dyep49"}]}