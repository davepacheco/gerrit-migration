{"project":"joyent/schemas","branch":"master","id":"If7132863450d28413a83f8f36c6cf9fb2e2f7c4b","number":"5309","subject":"TRITON-721 joyent-schemas should support RAN sysinfo keys Reviewed by: Trent Mick \u003ctrentm@gmail.com\u003e Approved by: Trent Mick \u003ctrentm@gmail.com\u003e","owner":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"url":"https://cr.joyent.us/5309","commitMessage":"TRITON-721 joyent-schemas should support RAN sysinfo keys\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1546545144,"lastUpdated":1546619076,"open":false,"status":"MERGED","comments":[{"timestamp":1546545144,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 1."},{"timestamp":1546545175,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1546545199,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1546545309,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 2."},{"timestamp":1546545335,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1546545401,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1546548352,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1546548995,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1546549528,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\n(1 comment)"},{"timestamp":1546551911,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 3."},{"timestamp":1546551937,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing-1\n\n(2 comments)\n\n\"make check\" exited with status 2"},{"timestamp":1546552065,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 4."},{"timestamp":1546552090,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1546552166,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1\n\nSeems fine to me.\nIt would be nice to add this (manually or whatever) to a cnapi zone and verify that a provision works (i.e. that DAPI doesn\u0027t choke on it).\n\nI wish we still had sufficient resources to have a CN at the min_platform in nightly-1."},{"timestamp":1546618945,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1546619076,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Rui"}],"currentPatchSet":{"number":"5","revision":"f7132863450d28413a83f8f36c6cf9fb2e2f7c4b","parents":["09cebfca94169601568fec60f7a6144130f7fd31"],"ref":"refs/changes/09/5309/5","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1546618945,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1546552090,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1546552166,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1546552166,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1546619076,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/cnapi/server.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/dapi/server.js","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":6,"sizeDeletions":-2},"patchSets":[{"number":"1","revision":"3357e062fa45b06d8dcefb469c9e5288b70e8ff4","parents":["09cebfca94169601568fec60f7a6144130f7fd31"],"ref":"refs/changes/09/5309/1","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1546545144,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1546545175,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/cnapi/server.js","line":2,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"2019"},{"file":"lib/cnapi/server.js","line":2,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Done"},{"file":"lib/dapi/server.js","line":2,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"2019"},{"file":"lib/dapi/server.js","line":2,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/cnapi/server.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/dapi/server.js","type":"MODIFIED","insertions":2,"deletions":0}],"sizeInsertions":4,"sizeDeletions":0},{"number":"2","revision":"9f075b14622f1309e8cc6f95b88aae9bd806a203","parents":["09cebfca94169601568fec60f7a6144130f7fd31"],"ref":"refs/changes/09/5309/2","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1546545309,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1546545335,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/dapi/server.js","line":53,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Are these new sysinfo fields that appear only on newer platforms? If so, if DAPI gets this update, will it start to reject sysinfo from CNs running the older platform?"},{"file":"lib/dapi/server.js","line":53,"reviewer":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"message":"Yes.  Unless of course I s/req/opt/\n\nAlso note that DAPI (and all other repos that I found) pull in the \u0027joyent-schemas\u0027 module by commit ID."},{"file":"lib/dapi/server.js","line":53,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"\u003e Also note that DAPI (and all other repos that I found) pull in the \u0027joyent-schemas\u0027 module by commit ID.\n\nThough presumably the update here is to eventually get it into DAPI and others using these schema. I think until that new platform is at or past min_platform, this needs to be `.opt`, perhaps with a comment here pointing to the ticket that added these to sysinfo and the platform date."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/cnapi/server.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/dapi/server.js","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":6,"sizeDeletions":-2},{"number":"3","revision":"04f96c7c1184e2fbd58cbe6000f30efd58fbf650","parents":["09cebfca94169601568fec60f7a6144130f7fd31"],"ref":"refs/changes/09/5309/3","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1546551911,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1546551937,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/cnapi/server.js","line":208,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line \u003e 80 characters"},{"file":"lib/dapi/server.js","line":54,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"line \u003e 80 characters"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/cnapi/server.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/dapi/server.js","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":6,"sizeDeletions":-2},{"number":"4","revision":"6c94253feac5284f7d5136f5c86485ee943a8f02","parents":["09cebfca94169601568fec60f7a6144130f7fd31"],"ref":"refs/changes/09/5309/4","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1546552065,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1546552090,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1546552166,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1546552166,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/cnapi/server.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/dapi/server.js","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":6,"sizeDeletions":-2},{"number":"5","revision":"f7132863450d28413a83f8f36c6cf9fb2e2f7c4b","parents":["09cebfca94169601568fec60f7a6144130f7fd31"],"ref":"refs/changes/09/5309/5","uploader":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"createdOn":1546618945,"author":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1546552090,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1546552166,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1546552166,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1546619076,"by":{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"lib/cnapi/server.js","type":"MODIFIED","insertions":3,"deletions":-1},{"file":"lib/dapi/server.js","type":"MODIFIED","insertions":3,"deletions":-1}],"sizeInsertions":6,"sizeDeletions":-2}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Rui Loura","email":"rui@joyent.com","username":"rjloura"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}]}