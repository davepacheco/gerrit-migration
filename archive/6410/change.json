{"project":"joyent/illumos-joyent","branch":"master","id":"I7e245eea79c984940d5e91efdeba785cc0788982","number":"6410","subject":"OS-7828 add support for kernel crash dump encryption Reviewed by: Robert Mustacchi \u003crobert.mustacchi@joyent.com\u003e Approved by: Joshua M. Clulow \u003cjmc@joyent.com\u003e","owner":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"url":"https://cr.joyent.us/6410","commitMessage":"OS-7828 add support for kernel crash dump encryption\nReviewed by: Robert Mustacchi \u003crobert.mustacchi@joyent.com\u003e\nApproved by: Joshua M. Clulow \u003cjmc@joyent.com\u003e\n","createdOn":1560188238,"lastUpdated":1561845487,"open":false,"status":"MERGED","comments":[{"timestamp":1560188238,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Uploaded patch set 1."},{"timestamp":1560205981,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(11 comments)\n\nThanks. In general this looks good. Most of the things here are fairly minor, the general pieces look sound."},{"timestamp":1560654447,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Patch Set 1:\n\n(11 comments)"},{"timestamp":1560669174,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Uploaded patch set 2."},{"timestamp":1560810024,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 2: Code-Review+1\n\n(2 comments)\n\nThanks for the second pass on this. It looks good."},{"timestamp":1561496937,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Uploaded patch set 3."},{"timestamp":1561496967,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Patch Set 4: Patch Set 3 was rebased"},{"timestamp":1561499877,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1561765358,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1561765394,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Patch Set 6: Patch Set 5 was rebased"},{"timestamp":1561831970,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Uploaded patch set 7: Commit message was updated."},{"timestamp":1561832234,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Uploaded patch set 8: Patch Set 7 was rebased."},{"timestamp":1561845247,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 9: Commit message was updated."},{"timestamp":1561845267,"reviewer":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},"message":"Patch Set 9: Integration-Approval+1\n\nThank you for the detailed testing notes!  I marked the ticket public and I approve!"},{"timestamp":1561845487,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Bryan Cantrill"}],"currentPatchSet":{"number":"9","revision":"d2cb459496a9ba43c051f163b6233046ccb5bcdf","parents":["e9686f2048541f02e63b97976f385b6efa0f4831"],"ref":"refs/changes/10/6410/9","uploader":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"createdOn":1561845247,"author":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1561499877,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1561845267,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"SUBM","value":"1","grantedOn":1561845487,"by":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/dumpadm/dconf.c","type":"MODIFIED","insertions":40,"deletions":0},{"file":"usr/src/cmd/dumpadm/dconf.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/dumpadm/main.c","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"usr/src/cmd/savecore/Makefile.com","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"usr/src/cmd/savecore/savecore.c","type":"MODIFIED","insertions":157,"deletions":-15},{"file":"usr/src/common/crypto/chacha/chacha.c","type":"MODIFIED","insertions":18,"deletions":-6},{"file":"usr/src/common/crypto/chacha/chacha.h","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/lib/libc/port/gen/arc4random.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1m/dumpadm.1m","type":"MODIFIED","insertions":36,"deletions":-4},{"file":"usr/src/man/man1m/savecore.1m","type":"MODIFIED","insertions":19,"deletions":-8},{"file":"usr/src/test/libc-tests/tests/random/chacha_tv.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/Makefile.rules","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/io/dump.c","type":"MODIFIED","insertions":27,"deletions":-3},{"file":"usr/src/uts/common/os/dumpsubr.c","type":"MODIFIED","insertions":103,"deletions":-4},{"file":"usr/src/uts/common/sys/dumpadm.h","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/common/sys/dumphdr.h","type":"MODIFIED","insertions":29,"deletions":0}],"sizeInsertions":467,"sizeDeletions":-53},"patchSets":[{"number":"1","revision":"653e36fa52b5c7f9f6d41b09b71f401ec81c6f74","parents":["2cbcfc285b5e437a620b2eff0f206603f3f3b29a"],"ref":"refs/changes/10/6410/1","uploader":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"createdOn":1560188238,"author":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/cmd/dumpadm/dconf.c","line":554,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I think this technically needs to be %zu as I think, but am not certain that sizeof () ends up returning a size_t."},{"file":"usr/src/cmd/dumpadm/dconf.c","line":554,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Going to rephrase this in terms of DUMP_CRYPT_KEYLEN"},{"file":"usr/src/cmd/savecore/Makefile.com","line":24,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Don\u0027t forget to run pbchk before we put this back."},{"file":"usr/src/cmd/savecore/Makefile.com","line":24,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Fixed"},{"file":"usr/src/cmd/savecore/savecore.c","line":347,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I guess because this is only being used for the dump keyfile, it\u0027s OK that it\u0027s not really handling partial reads in the buffer. Was that your thought here?"},{"file":"usr/src/cmd/savecore/savecore.c","line":347,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"There really isn\u0027t much that can be done on a partial read other than to fail -- as Pread()."},{"file":"usr/src/cmd/savecore/savecore.c","line":659,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Should be %u, signed/unsigned mismatch."},{"file":"usr/src/cmd/savecore/savecore.c","line":659,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Fixed"},{"file":"usr/src/common/crypto/chacha/chacha.c","line":0,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Can we add a comment somewhere to this file or chacha.h that this specifically uses the original djb based 64-bit nonce and 64-bit counter. This allows our message to be much larger; however, the current RFC for chacha20 has a 96-bit nonce and a 32-bit counter. Mostly this is just to make sure that they realize that dump relies on this and that if we need to change things to match the newer RFC, that they need to not break dump."},{"file":"usr/src/common/crypto/chacha/chacha.c","line":0,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Fixed"},{"file":"usr/src/man/man1m/dumpadm.1m","line":66,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Should we mention that this may cause failures as part of the service start up as the dump extraction done as part of the savecore service will fail?"},{"file":"usr/src/man/man1m/dumpadm.1m","line":66,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"The service won\u0027t actually fail -- only the savecore will fail, and will log accordingly."},{"file":"usr/src/test/libc-tests/tests/random/chacha_tv.c","line":0,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is it possible to extend this test or write some other basic sanity test for how the counter mode should work outside of dump just so we can have some additional confidence that we haven\u0027t broken it outside of testing dump?"},{"file":"usr/src/test/libc-tests/tests/random/chacha_tv.c","line":0,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Let me noodle on this one..."},{"file":"usr/src/uts/common/io/dump.c","line":194,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Since this is new code, does it make sense for us to now use ddi_copyin?"},{"file":"usr/src/uts/common/io/dump.c","line":194,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"I\u0027m not sure about the value of this because this isn\u0027t ever going to be a DDI-compliant driver. Are we changing all copyin()s to be ddi_copyin()s system wide?"},{"file":"usr/src/uts/common/io/dump.c","line":194,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"The rough rule has been to try and ask for folks to do this for new code as it handles the layered device case which makes future changes easier. Given everything else here, it\u0027s probably fine to leave it as is."},{"file":"usr/src/uts/common/sys/dumphdr.h","line":69,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Can we either call this CHACHA20 or in the comment say it\u0027s explicitly ChaCha20? As there are variants of ChaCha with different numbers of rounds performed, seems useful to be explicit about."},{"file":"usr/src/uts/common/sys/dumphdr.h","line":69,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Yes, agreed. Fixed."},{"file":"usr/src/uts/common/sys/dumphdr.h","line":87,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"What we can do though is use a CTASSERT in the build of the kernel bits and that can check and use the sizeof bits. Maybe toss that in dumpsubr.c?"},{"file":"usr/src/uts/common/sys/dumphdr.h","line":87,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Agreed! Thanks for the education on CTASSERT!"},{"file":"usr/src/uts/common/sys/dumphdr.h","line":114,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"In this case, the structure isn\u0027t currently packed. Do we need to consider or want to add padding to cover the fact that dump_crypt_hmac isn\u0027t at a natural alignment point?"},{"file":"usr/src/uts/common/sys/dumphdr.h","line":114,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"I have fixed this by splitting this out, allowing DUMP_VERSION to not change."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/dumpadm/dconf.c","type":"MODIFIED","insertions":40,"deletions":0},{"file":"usr/src/cmd/dumpadm/dconf.h","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/cmd/dumpadm/main.c","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"usr/src/cmd/savecore/Makefile.com","type":"MODIFIED","insertions":9,"deletions":-2},{"file":"usr/src/cmd/savecore/savecore.c","type":"MODIFIED","insertions":139,"deletions":-13},{"file":"usr/src/common/crypto/chacha/chacha.c","type":"MODIFIED","insertions":7,"deletions":-6},{"file":"usr/src/common/crypto/chacha/chacha.h","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/lib/libc/port/gen/arc4random.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1m/dumpadm.1m","type":"MODIFIED","insertions":34,"deletions":-4},{"file":"usr/src/man/man1m/savecore.1m","type":"MODIFIED","insertions":19,"deletions":-8},{"file":"usr/src/test/libc-tests/tests/random/chacha_tv.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/Makefile.rules","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/io/dump.c","type":"MODIFIED","insertions":27,"deletions":-3},{"file":"usr/src/uts/common/os/dumpsubr.c","type":"MODIFIED","insertions":92,"deletions":-4},{"file":"usr/src/uts/common/sys/dumpadm.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/uts/common/sys/dumphdr.h","type":"MODIFIED","insertions":33,"deletions":-1}],"sizeInsertions":425,"sizeDeletions":-50},{"number":"2","revision":"f643830c6082bc49e6cde842982a93974f17e6ee","parents":["c3cbf49c8d881ba57710e7e8b70aa6275bc5fc44"],"ref":"refs/changes/10/6410/2","uploader":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"createdOn":1560669174,"author":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1560810024,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"comments":[{"file":"usr/src/cmd/savecore/savecore.c","line":409,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"It through me off a little bit that we didn\u0027t end up updating endoff here. I think this makes sense now after looking at the surrounding usage. Would you mind adding a comment here that just notes why we don\u0027t need to change endoff?"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/dumpadm/dconf.c","type":"MODIFIED","insertions":40,"deletions":0},{"file":"usr/src/cmd/dumpadm/dconf.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/dumpadm/main.c","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"usr/src/cmd/savecore/Makefile.com","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"usr/src/cmd/savecore/savecore.c","type":"MODIFIED","insertions":151,"deletions":-15},{"file":"usr/src/common/crypto/chacha/chacha.c","type":"MODIFIED","insertions":18,"deletions":-6},{"file":"usr/src/common/crypto/chacha/chacha.h","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/lib/libc/port/gen/arc4random.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1m/dumpadm.1m","type":"MODIFIED","insertions":36,"deletions":-4},{"file":"usr/src/man/man1m/savecore.1m","type":"MODIFIED","insertions":19,"deletions":-8},{"file":"usr/src/test/libc-tests/tests/random/chacha_tv.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/Makefile.rules","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/io/dump.c","type":"MODIFIED","insertions":27,"deletions":-3},{"file":"usr/src/uts/common/os/dumpsubr.c","type":"MODIFIED","insertions":103,"deletions":-4},{"file":"usr/src/uts/common/sys/dumpadm.h","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/common/sys/dumphdr.h","type":"MODIFIED","insertions":29,"deletions":0}],"sizeInsertions":461,"sizeDeletions":-53},{"number":"3","revision":"1e6ebb990e8c547cb4c0eb7fdd28b0f00957221b","parents":["c3cbf49c8d881ba57710e7e8b70aa6275bc5fc44"],"ref":"refs/changes/10/6410/3","uploader":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"createdOn":1561496937,"author":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/dumpadm/dconf.c","type":"MODIFIED","insertions":40,"deletions":0},{"file":"usr/src/cmd/dumpadm/dconf.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/dumpadm/main.c","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"usr/src/cmd/savecore/Makefile.com","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"usr/src/cmd/savecore/savecore.c","type":"MODIFIED","insertions":157,"deletions":-15},{"file":"usr/src/common/crypto/chacha/chacha.c","type":"MODIFIED","insertions":18,"deletions":-6},{"file":"usr/src/common/crypto/chacha/chacha.h","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/lib/libc/port/gen/arc4random.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1m/dumpadm.1m","type":"MODIFIED","insertions":36,"deletions":-4},{"file":"usr/src/man/man1m/savecore.1m","type":"MODIFIED","insertions":19,"deletions":-8},{"file":"usr/src/test/libc-tests/tests/random/chacha_tv.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/Makefile.rules","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/io/dump.c","type":"MODIFIED","insertions":27,"deletions":-3},{"file":"usr/src/uts/common/os/dumpsubr.c","type":"MODIFIED","insertions":103,"deletions":-4},{"file":"usr/src/uts/common/sys/dumpadm.h","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/common/sys/dumphdr.h","type":"MODIFIED","insertions":29,"deletions":0}],"sizeInsertions":467,"sizeDeletions":-53},{"number":"4","revision":"956ac4e2449f2dfeb00dc719ec8eb7fae9875917","parents":["d152c784e9ec5ececac97129ea92fe6afc57078c"],"ref":"refs/changes/10/6410/4","uploader":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"createdOn":1561496967,"author":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1561499877,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/cmd/dumpadm/dconf.c","type":"MODIFIED","insertions":40,"deletions":0},{"file":"usr/src/cmd/dumpadm/dconf.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/dumpadm/main.c","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"usr/src/cmd/savecore/Makefile.com","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"usr/src/cmd/savecore/savecore.c","type":"MODIFIED","insertions":157,"deletions":-15},{"file":"usr/src/common/crypto/chacha/chacha.c","type":"MODIFIED","insertions":18,"deletions":-6},{"file":"usr/src/common/crypto/chacha/chacha.h","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/lib/libc/port/gen/arc4random.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1m/dumpadm.1m","type":"MODIFIED","insertions":36,"deletions":-4},{"file":"usr/src/man/man1m/savecore.1m","type":"MODIFIED","insertions":19,"deletions":-8},{"file":"usr/src/test/libc-tests/tests/random/chacha_tv.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/Makefile.rules","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/io/dump.c","type":"MODIFIED","insertions":27,"deletions":-3},{"file":"usr/src/uts/common/os/dumpsubr.c","type":"MODIFIED","insertions":103,"deletions":-4},{"file":"usr/src/uts/common/sys/dumpadm.h","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/common/sys/dumphdr.h","type":"MODIFIED","insertions":29,"deletions":0}],"sizeInsertions":467,"sizeDeletions":-53},{"number":"5","revision":"17521a835eb23edf4b9b49c20f03dcb152abac47","parents":["d152c784e9ec5ececac97129ea92fe6afc57078c"],"ref":"refs/changes/10/6410/5","uploader":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"createdOn":1561765358,"author":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1561499877,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/dumpadm/dconf.c","type":"MODIFIED","insertions":40,"deletions":0},{"file":"usr/src/cmd/dumpadm/dconf.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/dumpadm/main.c","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"usr/src/cmd/savecore/Makefile.com","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"usr/src/cmd/savecore/savecore.c","type":"MODIFIED","insertions":157,"deletions":-15},{"file":"usr/src/common/crypto/chacha/chacha.c","type":"MODIFIED","insertions":18,"deletions":-6},{"file":"usr/src/common/crypto/chacha/chacha.h","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/lib/libc/port/gen/arc4random.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1m/dumpadm.1m","type":"MODIFIED","insertions":36,"deletions":-4},{"file":"usr/src/man/man1m/savecore.1m","type":"MODIFIED","insertions":19,"deletions":-8},{"file":"usr/src/test/libc-tests/tests/random/chacha_tv.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/Makefile.rules","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/io/dump.c","type":"MODIFIED","insertions":27,"deletions":-3},{"file":"usr/src/uts/common/os/dumpsubr.c","type":"MODIFIED","insertions":103,"deletions":-4},{"file":"usr/src/uts/common/sys/dumpadm.h","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/common/sys/dumphdr.h","type":"MODIFIED","insertions":29,"deletions":0}],"sizeInsertions":467,"sizeDeletions":-53},{"number":"6","revision":"3d00da62618bd3e52821ba7a529efd7cbd4945cb","parents":["9f27b084492b24583dbcc44e59ce9eaacd78ed68"],"ref":"refs/changes/10/6410/6","uploader":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"createdOn":1561765394,"author":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1561499877,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/dumpadm/dconf.c","type":"MODIFIED","insertions":40,"deletions":0},{"file":"usr/src/cmd/dumpadm/dconf.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/dumpadm/main.c","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"usr/src/cmd/savecore/Makefile.com","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"usr/src/cmd/savecore/savecore.c","type":"MODIFIED","insertions":157,"deletions":-15},{"file":"usr/src/common/crypto/chacha/chacha.c","type":"MODIFIED","insertions":18,"deletions":-6},{"file":"usr/src/common/crypto/chacha/chacha.h","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/lib/libc/port/gen/arc4random.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1m/dumpadm.1m","type":"MODIFIED","insertions":36,"deletions":-4},{"file":"usr/src/man/man1m/savecore.1m","type":"MODIFIED","insertions":19,"deletions":-8},{"file":"usr/src/test/libc-tests/tests/random/chacha_tv.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/Makefile.rules","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/io/dump.c","type":"MODIFIED","insertions":27,"deletions":-3},{"file":"usr/src/uts/common/os/dumpsubr.c","type":"MODIFIED","insertions":103,"deletions":-4},{"file":"usr/src/uts/common/sys/dumpadm.h","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/common/sys/dumphdr.h","type":"MODIFIED","insertions":29,"deletions":0}],"sizeInsertions":467,"sizeDeletions":-53},{"number":"7","revision":"bdc02fd29f9d1b049caa4613a72d8b635fc01c99","parents":["9f27b084492b24583dbcc44e59ce9eaacd78ed68"],"ref":"refs/changes/10/6410/7","uploader":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"createdOn":1561831970,"author":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1561499877,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/dumpadm/dconf.c","type":"MODIFIED","insertions":40,"deletions":0},{"file":"usr/src/cmd/dumpadm/dconf.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/dumpadm/main.c","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"usr/src/cmd/savecore/Makefile.com","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"usr/src/cmd/savecore/savecore.c","type":"MODIFIED","insertions":157,"deletions":-15},{"file":"usr/src/common/crypto/chacha/chacha.c","type":"MODIFIED","insertions":18,"deletions":-6},{"file":"usr/src/common/crypto/chacha/chacha.h","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/lib/libc/port/gen/arc4random.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1m/dumpadm.1m","type":"MODIFIED","insertions":36,"deletions":-4},{"file":"usr/src/man/man1m/savecore.1m","type":"MODIFIED","insertions":19,"deletions":-8},{"file":"usr/src/test/libc-tests/tests/random/chacha_tv.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/Makefile.rules","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/io/dump.c","type":"MODIFIED","insertions":27,"deletions":-3},{"file":"usr/src/uts/common/os/dumpsubr.c","type":"MODIFIED","insertions":103,"deletions":-4},{"file":"usr/src/uts/common/sys/dumpadm.h","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/common/sys/dumphdr.h","type":"MODIFIED","insertions":29,"deletions":0}],"sizeInsertions":467,"sizeDeletions":-53},{"number":"8","revision":"7e245eea79c984940d5e91efdeba785cc0788982","parents":["e9686f2048541f02e63b97976f385b6efa0f4831"],"ref":"refs/changes/10/6410/8","uploader":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"createdOn":1561832234,"author":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1561499877,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/dumpadm/dconf.c","type":"MODIFIED","insertions":40,"deletions":0},{"file":"usr/src/cmd/dumpadm/dconf.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/dumpadm/main.c","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"usr/src/cmd/savecore/Makefile.com","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"usr/src/cmd/savecore/savecore.c","type":"MODIFIED","insertions":157,"deletions":-15},{"file":"usr/src/common/crypto/chacha/chacha.c","type":"MODIFIED","insertions":18,"deletions":-6},{"file":"usr/src/common/crypto/chacha/chacha.h","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/lib/libc/port/gen/arc4random.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1m/dumpadm.1m","type":"MODIFIED","insertions":36,"deletions":-4},{"file":"usr/src/man/man1m/savecore.1m","type":"MODIFIED","insertions":19,"deletions":-8},{"file":"usr/src/test/libc-tests/tests/random/chacha_tv.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/Makefile.rules","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/io/dump.c","type":"MODIFIED","insertions":27,"deletions":-3},{"file":"usr/src/uts/common/os/dumpsubr.c","type":"MODIFIED","insertions":103,"deletions":-4},{"file":"usr/src/uts/common/sys/dumpadm.h","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/common/sys/dumphdr.h","type":"MODIFIED","insertions":29,"deletions":0}],"sizeInsertions":467,"sizeDeletions":-53},{"number":"9","revision":"d2cb459496a9ba43c051f163b6233046ccb5bcdf","parents":["e9686f2048541f02e63b97976f385b6efa0f4831"],"ref":"refs/changes/10/6410/9","uploader":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"createdOn":1561845247,"author":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1561499877,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1561845267,"by":{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"}},{"type":"SUBM","value":"1","grantedOn":1561845487,"by":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"usr/src/cmd/dumpadm/dconf.c","type":"MODIFIED","insertions":40,"deletions":0},{"file":"usr/src/cmd/dumpadm/dconf.h","type":"MODIFIED","insertions":2,"deletions":0},{"file":"usr/src/cmd/dumpadm/main.c","type":"MODIFIED","insertions":11,"deletions":-3},{"file":"usr/src/cmd/savecore/Makefile.com","type":"MODIFIED","insertions":10,"deletions":-3},{"file":"usr/src/cmd/savecore/savecore.c","type":"MODIFIED","insertions":157,"deletions":-15},{"file":"usr/src/common/crypto/chacha/chacha.c","type":"MODIFIED","insertions":18,"deletions":-6},{"file":"usr/src/common/crypto/chacha/chacha.h","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/lib/libc/port/gen/arc4random.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/man/man1m/dumpadm.1m","type":"MODIFIED","insertions":36,"deletions":-4},{"file":"usr/src/man/man1m/savecore.1m","type":"MODIFIED","insertions":19,"deletions":-8},{"file":"usr/src/test/libc-tests/tests/random/chacha_tv.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/Makefile.files","type":"MODIFIED","insertions":1,"deletions":0},{"file":"usr/src/uts/common/Makefile.rules","type":"MODIFIED","insertions":4,"deletions":0},{"file":"usr/src/uts/common/io/dump.c","type":"MODIFIED","insertions":27,"deletions":-3},{"file":"usr/src/uts/common/os/dumpsubr.c","type":"MODIFIED","insertions":103,"deletions":-4},{"file":"usr/src/uts/common/sys/dumpadm.h","type":"MODIFIED","insertions":3,"deletions":0},{"file":"usr/src/uts/common/sys/dumphdr.h","type":"MODIFIED","insertions":29,"deletions":0}],"sizeInsertions":467,"sizeDeletions":-53}],"allReviewers":[{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Joshua M. Clulow","email":"jmc@joyent.com","username":"jclulow"},{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"}]}