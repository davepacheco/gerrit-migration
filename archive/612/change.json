{"project":"joyent/node-mooremachine","branch":"master","id":"I9775e18ae2f65dca31b0dda3761f276bcb252375","number":"612","subject":"joyent/node-mooremachine#9 substates are broken Reviewed by: Cody Mello \u003ccody.mello@joyent.com\u003e","owner":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"url":"https://cr.joyent.us/612","commitMessage":"joyent/node-mooremachine#9 substates are broken\nReviewed by: Cody Mello \u003ccody.mello@joyent.com\u003e\n","createdOn":1475787204,"lastUpdated":1475821898,"open":false,"status":"MERGED","comments":[{"timestamp":1475787204,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 1."},{"timestamp":1475787240,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1475787785,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 2."},{"timestamp":1475787818,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1475794536,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 3."},{"timestamp":1475794565,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1475794861,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 4."},{"timestamp":1475794895,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1475803874,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 4: Code-Review+1\n\n(2 comments)"},{"timestamp":1475817378,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 5: Published edit on patch set 4."},{"timestamp":1475817381,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Patch Set 5:\n\n(1 comment)"},{"timestamp":1475817409,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1475818868,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 6."},{"timestamp":1475818901,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1475821533,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 7."},{"timestamp":1475821575,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing-1\n\n(1 comment)\n\n\"make check\" exited with status 2"},{"timestamp":1475821714,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Uploaded patch set 8."},{"timestamp":1475821765,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1475821815,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 8: Code-Review+1 Integration-Approval+1\n\n(1 comment)"},{"timestamp":1475821898,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Alex Wilson"}],"currentPatchSet":{"number":"8","revision":"9775e18ae2f65dca31b0dda3761f276bcb252375","parents":["46b521a67d71710db20133b409a7c1da8e1dc46d"],"ref":"refs/changes/12/612/8","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1475821714,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1475821765,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1475821815,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1475821815,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1475821898,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/fsm.js","type":"MODIFIED","insertions":52,"deletions":-7},{"file":"test/basic.test.js","type":"MODIFIED","insertions":147,"deletions":0}],"sizeInsertions":199,"sizeDeletions":-7},"patchSets":[{"number":"1","revision":"12e3212c615de602881225619ffc620418fdc10f","parents":["c9705c763ad8e1a484efe61b422ab54916ba7c4b"],"ref":"refs/changes/12/612/1","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1475787204,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1475787240,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/fsm.js","type":"MODIFIED","insertions":21,"deletions":-4},{"file":"test/basic.test.js","type":"MODIFIED","insertions":51,"deletions":0}],"sizeInsertions":72,"sizeDeletions":-4},{"number":"2","revision":"41d4716cb445a3cfe9454b5c8bc1e1ddf56774e6","parents":["c9705c763ad8e1a484efe61b422ab54916ba7c4b"],"ref":"refs/changes/12/612/2","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1475787785,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1475787818,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/fsm.js","type":"MODIFIED","insertions":24,"deletions":-5},{"file":"test/basic.test.js","type":"MODIFIED","insertions":51,"deletions":0}],"sizeInsertions":75,"sizeDeletions":-5},{"number":"3","revision":"4ee2cce10b86fdc3f471a34dafef88ca2b3b1f89","parents":["c9705c763ad8e1a484efe61b422ab54916ba7c4b"],"ref":"refs/changes/12/612/3","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1475794536,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1475794565,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/fsm.js","type":"MODIFIED","insertions":40,"deletions":-7},{"file":"test/basic.test.js","type":"MODIFIED","insertions":51,"deletions":0}],"sizeInsertions":91,"sizeDeletions":-7},{"number":"4","revision":"3314945f67376b4abfe3c13e55092f85557a4b3e","parents":["c9705c763ad8e1a484efe61b422ab54916ba7c4b"],"ref":"refs/changes/12/612/4","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1475794861,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1475803874,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1475794895,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/fsm.js","line":55,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I don\u0027t understand why nextState needs to be reset. Shouldn\u0027t it already be undefined by the time you make it to line 201?"},{"file":"lib/fsm.js","line":55,"reviewer":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"message":"Are you confusing fsh_nextState with fsm_nextState? This handle should have fsh_nextState set to something, because we left the parent state towards a sub-state of it. We reset the parent handle so it can be used again"},{"file":"lib/fsm.js","line":55,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Ah, yes, I was. This makes more sense now."},{"file":"test/basic.test.js","line":115,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Move back one indentation level."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/fsm.js","type":"MODIFIED","insertions":42,"deletions":-7},{"file":"test/basic.test.js","type":"MODIFIED","insertions":51,"deletions":0}],"sizeInsertions":93,"sizeDeletions":-7},{"number":"5","revision":"ce41b0912eaafd7b0e72fad1ab1a776e0cd46de4","parents":["c9705c763ad8e1a484efe61b422ab54916ba7c4b"],"ref":"refs/changes/12/612/5","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1475817378,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1475817409,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/fsm.js","type":"MODIFIED","insertions":42,"deletions":-7},{"file":"test/basic.test.js","type":"MODIFIED","insertions":51,"deletions":0}],"sizeInsertions":93,"sizeDeletions":-7},{"number":"6","revision":"392a167ab36e56062e6f00e644e55b41236eb035","parents":["46b521a67d71710db20133b409a7c1da8e1dc46d"],"ref":"refs/changes/12/612/6","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1475818868,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1475818901,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/fsm.js","type":"MODIFIED","insertions":49,"deletions":-7},{"file":"test/basic.test.js","type":"MODIFIED","insertions":90,"deletions":0}],"sizeInsertions":139,"sizeDeletions":-7},{"number":"7","revision":"cd25d90dd32924e9c5f05b62c50baa015ea358e1","parents":["46b521a67d71710db20133b409a7c1da8e1dc46d"],"ref":"refs/changes/12/612/7","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1475821533,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1475821575,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/fsm.js","line":205,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"improper boolean continuation"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/fsm.js","type":"MODIFIED","insertions":52,"deletions":-7},{"file":"test/basic.test.js","type":"MODIFIED","insertions":147,"deletions":0}],"sizeInsertions":199,"sizeDeletions":-7},{"number":"8","revision":"9775e18ae2f65dca31b0dda3761f276bcb252375","parents":["46b521a67d71710db20133b409a7c1da8e1dc46d"],"ref":"refs/changes/12/612/8","uploader":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"createdOn":1475821714,"author":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1475821815,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1475821815,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"SUBM","value":"1","grantedOn":1475821898,"by":{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1475821765,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"lib/fsm.js","type":"MODIFIED","insertions":52,"deletions":-7},{"file":"test/basic.test.js","type":"MODIFIED","insertions":147,"deletions":0}],"sizeInsertions":199,"sizeDeletions":-7}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Alex Wilson","email":"alex@cooperi.net","username":"arekinath"}]}