From da8d7b14b5b5a630ee996ea8398da2a4707292c2 Mon Sep 17 00:00:00 2001
From: Trent Mick <trentm@gmail.com>
Date: Fri, 15 Mar 2019 16:32:33 -0700
Subject: [PATCH] =?UTF-8?q?TRITON-884=20remove=20cloud=20analytics=20(ca)?=
 =?UTF-8?q?=20from=20Triton=20Reviewed=20by:=20Marsell=20Kukuljevic=20<mar?=
 =?UTF-8?q?sell@joyent.com>=20Reviewed=20by:=20Pedro=20Palaz=C3=B3n=20Cand?=
 =?UTF-8?q?el=20<pedro@joyent.com>=20Approved=20by:=20Marsell=20Kukuljevic?=
 =?UTF-8?q?=20<marsell@joyent.com>=20Approved=20by:=20Pedro=20Palaz=C3=B3n?=
 =?UTF-8?q?=20Candel=20<pedro@joyent.com>?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 CHANGES.md       | 6 +++++-
 lib/cloudapi2.js | 8 ++------
 package.json     | 2 +-
 3 files changed, 8 insertions(+), 8 deletions(-)

diff --git a/CHANGES.md b/CHANGES.md
index fd420d3..fdcda9c 100644
--- a/CHANGES.md
+++ b/CHANGES.md
@@ -6,7 +6,11 @@ Known issues:
 
 ## not yet released
 
-(nothing)
+## 7.0.1
+
+- [TRITON-884] Drop support for Cloud Analytics-related RBAC "resources"
+  for role-tags. Cloud Analytics has been removed from Triton. See
+  [TRITON-884](https://smartos.org/bugview/TRITON-884) for details.
 
 ## 7.0.0
 
diff --git a/lib/cloudapi2.js b/lib/cloudapi2.js
index 512e65e..b5fb949 100644
--- a/lib/cloudapi2.js
+++ b/lib/cloudapi2.js
@@ -2838,9 +2838,7 @@ CloudApi.prototype.getRoleTags = function getRoleTags(opts, cb) {
         'policies',
         // TODO: validate, test
         'keys',
-        'datacenters',
-        'analytics',
-        'instrumentations'
+        'datacenters'
     ];
     var parts = opts.resource.split('/');
     if (validResources.indexOf(parts[2]) === -1) {
@@ -2916,9 +2914,7 @@ CloudApi.prototype.setRoleTags = function setRoleTags(opts, cb) {
         'policies',
         // TODO: validate, test
         'keys',
-        'datacenters',
-        'analytics',
-        'instrumentations'
+        'datacenters'
     ];
     var parts = opts.resource.split('/');
     if (validResources.indexOf(parts[2]) === -1) {
diff --git a/package.json b/package.json
index bc3c39b..499091a 100644
--- a/package.json
+++ b/package.json
@@ -1,7 +1,7 @@
 {
   "name": "triton",
   "description": "Joyent Triton CLI and client (https://www.joyent.com/triton)",
-  "version": "7.0.0",
+  "version": "7.0.1",
   "author": "Joyent (joyent.com)",
   "homepage": "https://github.com/joyent/node-triton",
   "dependencies": {
-- 
2.21.0

