{"project":"joyent/illumos-joyent","branch":"master","id":"I90e27ef5fc2bdeb7f9934f4e77140ef5f1aa9392","number":"2115","subject":"OS-6158 signed math leads getelfshdr astray Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Reviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e Reviewed by: Cody Peter Mello \u003cmelloc@writev.io\u003e Approved by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e","owner":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"url":"https://cr.joyent.us/2115","commitMessage":"OS-6158 signed math leads getelfshdr astray\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nReviewed by: Jerry Jelinek \u003cjerry.jelinek@joyent.com\u003e\nReviewed by: Cody Peter Mello \u003cmelloc@writev.io\u003e\nApproved by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e\n","createdOn":1497636032,"lastUpdated":1552936146,"open":false,"status":"MERGED","comments":[{"timestamp":1497636032,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 1."},{"timestamp":1497641555,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\n(5 comments)"},{"timestamp":1497646357,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(4 comments)"},{"timestamp":1497646860,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\n(3 comments)"},{"timestamp":1497647053,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1499454974,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(47 comments)"},{"timestamp":1551397370,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(10 comments)"},{"timestamp":1551398683,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 2."},{"timestamp":1551726254,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 3."},{"timestamp":1551740209,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 4."},{"timestamp":1551804596,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(3 comments)"},{"timestamp":1551804678,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 4:\n\nI think that trying to untangle the voffset mess as part of this wad would be too much from a complexity standpoint.  We can circle back on that.\n\nA few of the newly-changed files don\u0027t have copyright updates on them yet.  I\u0027m holding off until folks are happy with the long-\u003esize_t change for execsz."},{"timestamp":1551833510,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4:\n\n(32 comments)\n\nThanks for all the work on this!"},{"timestamp":1551907284,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 5."},{"timestamp":1551907394,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 4:\n\n(27 comments)"},{"timestamp":1551908293,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 4:\n\n(2 comments)"},{"timestamp":1551909306,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 6: Patch Set 5 was rebased."},{"timestamp":1551986838,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 6:\n\n(1 comment)"},{"timestamp":1551987128,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 6:\n\n(7 comments)\n\nThanks, this is pretty good. I just have a few outstanding bits."},{"timestamp":1552068580,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 4:\n\n(3 comments)"},{"timestamp":1552068634,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 7."},{"timestamp":1552068673,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 8: Patch Set 7 was rebased."},{"timestamp":1552321846,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1552342459,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 9."},{"timestamp":1552342551,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 4:\n\n(1 comment)"},{"timestamp":1552401913,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 9: Code-Review+1"},{"timestamp":1552420268,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 10: Patch Set 9 was rebased."},{"timestamp":1552424783,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 11."},{"timestamp":1552426810,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 11: Code-Review+1\n\n(2 comments)\n\nsorry this took me so long to finish. It looks good to me, although I did not check it alongside the spec."},{"timestamp":1552433618,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 12."},{"timestamp":1552433645,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 10:\n\n(2 comments)"},{"timestamp":1552436438,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 13."},{"timestamp":1552436491,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 10:\n\n(1 comment)"},{"timestamp":1552437527,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 13: Code-Review+1"},{"timestamp":1552508139,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 13: Code-Review+1"},{"timestamp":1552542186,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 13:\n\n(1 comment)"},{"timestamp":1552606218,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 14."},{"timestamp":1552606291,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 13:\n\n(1 comment)\n\nUpdated copyrights which has been neglected and fixed a few lingering \u0027resid\u0027 declarations which needed to be cleaned up."},{"timestamp":1552607252,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 14: Code-Review+1"},{"timestamp":1552608227,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 14: Code-Review+1"},{"timestamp":1552656181,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 14: Code-Review+1"},{"timestamp":1552684002,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 15: Patch Set 14 was rebased."},{"timestamp":1552684287,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 16: Commit message was updated."},{"timestamp":1552916770,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 16: Integration-Approval+1"},{"timestamp":1552922781,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 17: Patch Set 16 was rebased."},{"timestamp":1552934143,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Uploaded patch set 18: Commit message was updated."},{"timestamp":1552936146,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Patrick Mooney"}],"currentPatchSet":{"number":"18","revision":"90e27ef5fc2bdeb7f9934f4e77140ef5f1aa9392","parents":["f596c0900965f1168f07b20b94337167854044c3"],"ref":"refs/changes/15/2115/18","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1552934143,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552607252,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552608227,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552656181,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1552916770,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"SUBM","value":"1","grantedOn":1552936146,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":11,"deletions":-17},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":574,"deletions":-514},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"usr/src/uts/common/exec/intp/intp.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/exec/java/java.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/shbin/shbin.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/os/core.c","type":"MODIFIED","insertions":15,"deletions":-5},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"usr/src/uts/common/sys/exec.h","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"usr/src/uts/common/sys/prsystm.h","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":680,"sizeDeletions":-591},"patchSets":[{"number":"1","revision":"e303656c76c09700c40ce07d6a1fd22e2111d010","parents":["dfae20b5ffcad6bef48ac6df469fe8600ae3d26c"],"ref":"refs/changes/15/2115/1","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1497636032,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/exec/elf/elf.c","line":93,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Can we add a comment about the _ELF32_COMPAT logic being used here? If I understand correctly, the purpose is to have them defined once and that the _ELF32_COMPAT version of this will link and read it from the normal version, is that right?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":93,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Yeah, I\u0027ll add a comment. (You\u0027re correct)"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":162,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Should at least i get the uint_t treatment? I think that Pgcore.c has a similar problem with ndx. Not sure if we should treat that as unsigned, as it\u0027s meant to represent something else."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":162,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Sure.  It\u0027s totally save given the small table size, but the paranoia is fine."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":265,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"These are suspiciously signed when they represent unsigned values. Note, I think I flagged both of these at the caller."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":364,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"i here should be an unsigned value, right?\n\ne_phentsize is always going to be a uint16_t, so I think it\u0027s okay to assign up to an int, but might be better just to call it an Elf32_Half instead. As I think it\u0027s the same for 32-bit and 64-bit on us."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":364,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Yeah, these should be unsigned.  Rather than get mired in the Elf* types, I\u0027m inclined to keep hsize as a uint_t."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":364,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I think that\u0027s made sense, since it will be larger than the corresponding elf type."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":392,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This may be a can of worms, but is it designed that execsz should end up being allowed to be negative?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":392,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Changed to ulong_t with some overflow checking where it\u0027s added to later."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":399,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"nsize should be a size_t, it\u0027s only ever used to deal with the results of a call to strlen(). While we check for dlnsize to be within a signed result, I\u0027m not sure that we should rely on the cast from the unsigned to signed value that is done when this is used. Note that the cast is only implementation defined and not undefined, so it may be safer to rely on that then not."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":399,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I don\u0027t see a reason why dlnsize should be signed either, given we\u0027re bounding it by MAXPATHLEN.  I think this will clean up fine if they\u0027re both unsigned."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":404,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Just for the record, it looks like this is an actual pointer difference. So we may need to make sure consumers are aware of negative consequences."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":404,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Jeez, this is a mess.  My gut reaction is to pass around an unsigned value and explicitly rely on wrap-around.  Thoughts?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":404,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"At this point, I might save it for another pass on cleaning this up."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":411,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"We\u0027re storing the difference of two pointers here. I\u0027m not sure what we\u0027ll do if it\u0027s negative. But other logic seems to assume it shouldn\u0027t be such as when we use this for the nauxv logic. Probably need to tighten things up here."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":412,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"We use i here to iterate over nphdrs which is an unsigned value. That seems incorrect. hsize has the same problem as mentioned previously."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":418,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This variable is being used to receive assignments from an unsigned value. I think we\u0027re checking for negative cases, but may be better to treat it as signed."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":477,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Maybe worth an ASSERT that this somehow never wraps around? Same for the 64-bit version."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":690,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Is there any value in debug build assertions of size on auxsize throughout all of this to avoid wraparound?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":690,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"If we use a size_t (rather than ssize_t), there\u0027s effectively no chance of overflow."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":697,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Note, the off_t is actually a _signed_ value. However the p_filesz values is a unsigned long long. Something else may be doing the logic to make sure that we can\u0027t have that many sections."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":702,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Should this be unsigned?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":711,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"We\u0027re looping based on p_filesz, does something constrain p_offset to make sure we don\u0027t loop in some way?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":741,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Should ncaps be unsigned? I think based on the constraints above it\u0027s guaranteed to always fit inside an int though."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":815,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Note this is a sight of an unsigned + signed arithmetic being cast to a signed value. Maybe better to have all be unsigned."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1150,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This probably wants to be unsigned, right?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1150,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1229,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Note use of signed value for what should be unsigned."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1233,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"See other hsize comments."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1235,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Maybe change to boolean_t?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1270,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"While I think the construction of the loop guarantees that the loaddr \u003c\u003d hiaddr, should we assert/verify it?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1271,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"If I have a single segment and I basically say that the p_vaddr is zero and the p_memsz \u003d UINT64_MAX, will roundup cause us to set len back to zero and overflow? Is that the only way we can overflow?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1333,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Is there more work to do here?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1333,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I left the XXX in to raise the question about if the extended shdr/phdr logic should be triggered off the osabi. Linux binaries do not (AFAICT) utilize this functionality, so if we observe the sentinel values there, the values are likely to be incorrect."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1333,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"OK, although there is no \"rule\", in general I\u0027ve seen XXX used for work still to be done on something that is in progress. Maybe drop XXX and replace with \"Future Work\" or something to indicate that you didn\u0027t forget to finish this piece?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1333,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Oh, I have no intention of keeping the XXX in the finished wad.  It\u0027s only here to pose the question as part of the CR."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1333,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Thinking more on this now, I think this may be a SunOS only behavior. But if so, it may be worth checking that. We may want to review how Linux and *BSD handle this case of a large number of headers."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1381,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"So if the size is larger then the maximum number, is it safe to do this? I guess we\u0027re doing a NO_SLEEP allocation and it\u0027ll probably be too much surgery to stride this at the moment."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1417,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Since this comment seems to be describing all of the things being tested, maybe you want to add a sentence for the new test?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1417,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Perhaps?  I\u0027ll look into making this cleaner/clearer."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1443,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This is a uint_t * uint16_t. If for some reason shbasep is high, should we be worried about overflow?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1514,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"If we have 64-bit segments that all have v_addr\u0027s with the top bit set, what stops us from therefore thinking minaddr is negative? It seems like it always has unsigned values assigned to it as it comes from mintmp which is a caddr_t."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1516,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This seems to be a measure of the size of the executable which should probably always be an unsigned value. Are we relying on a negative value somewhere?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1520,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"i should probably be unsigned per other comments.\n\nIn terms of healthiness, prot and lastprot should probably be unsigned, but I think that\u0027s a can of worms."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1523,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Change to boolean_t for more consistency."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1524,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I would suggest changing this to a boolean_t, but it seems like that has can of worms like properties."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1526,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"See other hszie bits."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1528,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"NULL/0 confusion."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1561,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Note classic i is signed but assigned to unsigned var."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1609,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Note that i is a signed value which is being given an unsigned value to iterate over."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1695,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Warning, offset is an off_t here, however p_offset is an unsigned value and there are no range checks."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1726,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I\u0027m suspicious of potential for unsigned overflow in all of the addition here."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1760,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"What constrains the number of pt_load segments with crazy p_memsz values that don\u0027t cause this to overflow?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1760,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I\u0027m not sure there is any limit.  In addition to the ulong_t upgrade for execsz, I\u0027m going to add an overflow check here which will toss ENOMEM should that happen."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1760,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Thanks for doing that."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1850,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Note offset_t is a signed value. All arithmetic with offsetp should be considered suspect for signed overflow."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1896,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"offset_t is signed. All arithmetic with it should be considered suspect for signed overflow."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1917,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Warning, ecc_doffset is signed. sh_size is unsigned."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1934,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Warning signed value approaching."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1950,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Maybe move this comment down to above line 1956? It seems confusing here."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1950,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Maybe, it\u0027s the act of setting the offset non-zero prior to the first iteration which skips the 0-index value, not the address calculation itself.  I could fold it into the for() initializer, but that seemed less clean."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1950,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"I see, I was looking at SHT_NULL and not the offset. Maybe just note that in the comment (\"starting at 1 skips SHT_NULL which is expected at index 0\")."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1950,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"That sounds like a nice improvement.  I\u0027ll update with it."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1952,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"What protects against wrap-around?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1952,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Considering we\u0027re walking through a buffer and \u0027off\u0027 is of type uintptr_t, it should be impossible.  I\u0027m willing to add an ASSERT to compare against shsize if you think it\u0027s absolutely necessary."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1957,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Given that we\u0027re going to check the first shdr for SHT_NULL, why are we skipping the first one when we\u0027re not certain whether or not it\u0027s there. Is there something else that\u0027s relying on this?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1957,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I didn\u0027t see anything in the ELF spec that prohibited shdrs beyond index\u003d0 from being of type SHT_NULL.  This check is just to skip types we know are uninteresting."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1957,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Trying to channel past me, but I think this was trying to say why special case 0, if we would have handled it here. Not sure it terribly matters or not."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":2026,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Maybe a comment here on why it\u0027s idx + 1. Probably because of how we\u0027re dumping things makes it OK I imagine."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":2026,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Will do.  The ASSERT is there for the same reason."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":2088,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"misspelled"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":2088,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","line":75,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Can we get a comment as to the purpose of it relative to other purposes?"},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","line":81,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Warning, offset_t is signed."},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","line":84,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Since this is only used in elf.c and there are already several typedefs in that file, it seems like this definition could live there too."},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","line":84,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Maybe?  I\u0027ve considered extending some of the elfnote functions to also utilize this context variable to cut down on the overall argument sprawl."},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","line":84,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"OK, then it makes sense to leave it here."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":443,"deletions":-414},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","type":"MODIFIED","insertions":14,"deletions":-2},{"file":"usr/src/uts/common/sys/exec.h","type":"MODIFIED","insertions":5,"deletions":-5}],"sizeInsertions":466,"sizeDeletions":-425},{"number":"2","revision":"b7c97dae984bb69c544cd65f4600746737101ec5","parents":["3abe99b08f51c708615fde3464d90ceab6f54837"],"ref":"refs/changes/15/2115/2","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1551398683,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":442,"deletions":-413},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","type":"MODIFIED","insertions":14,"deletions":-2},{"file":"usr/src/uts/common/sys/exec.h","type":"MODIFIED","insertions":5,"deletions":-5}],"sizeInsertions":465,"sizeDeletions":-424},{"number":"3","revision":"e4286e468043615415545255fd94c92b8df28e81","parents":["3abe99b08f51c708615fde3464d90ceab6f54837"],"ref":"refs/changes/15/2115/3","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1551726254,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":6,"deletions":-12},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":527,"deletions":-487},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","type":"MODIFIED","insertions":14,"deletions":-2},{"file":"usr/src/uts/common/exec/intp/intp.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/java/java.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/exec/shbin/shbin.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":12,"deletions":-3},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/os/core.c","type":"MODIFIED","insertions":14,"deletions":-4},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"usr/src/uts/common/sys/exec.h","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"usr/src/uts/common/sys/prsystm.h","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":611,"sizeDeletions":-547},{"number":"4","revision":"55a685909f279b3320ce3d9cabf51e47ea583a4a","parents":["31fd5d7bc7a22f5f61d4a1b782a407e05cf49ad1"],"ref":"refs/changes/15/2115/4","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1551740209,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","comments":[{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","line":2191,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This logic and also at +2220 is no longer correct. We\u0027ve changed nphdrs to a uint_t and are assigning to to an int. This means that if we have a program with \u003eINT_MAX phdrs the check will fail and we may not find the PT_GNU_STACK."},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","line":2191,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Good catch.  I\u0027ll change this to c99-style declarations in the various loops and use uint_t."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":756,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Maybe we should explicitly cast to (ssize_t) to indicate that we know this and it\u0027s OK, as we did the size check above?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":756,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":827,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Do you think that maybe the \u003c\u003d 0 was also looking for signed overflow assuming a wrapping behavior? Not sure if we need to be worried about overflow or not given the comparison to MAXPATHLEN, but feels like maybe?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":827,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I believe the existing comparison keeps us safe here."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":827,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Why can\u0027t the addition of two uint64_t values overlfow and be less than MAXPATHLEN?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":827,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Adding a check for intphdr-\u003ep_filesz \u003e MAXPATHLEN"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":827,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Any real reason not to be paranoid and add a check for \u003c intphdr-\u003ep_filesz and while we should have constrained the other two parts, just sanity check that it can\u0027t underflow here?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":827,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1286,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Should we be checking that loaddr ends up greater than hiaddr in the end before doing this calculation? In the case where there was nothing previously, it would have been a rather different value."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1286,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Yeah, I\u0027ll add a guard."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1367,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Do you know why we use different values on different systems? Is this to account for the fact that the 32-bit vs. 64-bit ELF objects are different sizes and we\u0027re trying to make sure we have sufficient sizing?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1367,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"That size would give us access to everything except p_align, for the two respective formats."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1367,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"OK, I think this makes a littl emore sense now, the comment is a bit confusing, though I\u0027m not sure the best way to improve it."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1392,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Should we make sure that this isn\u0027t larger than an SSIZE_MAX because vn_rdwr only takes an ssize_t for its length?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1392,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Changing elf_nphdr_max to a uint_t so the check below keeps the size in check"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1401,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Probably worth an explicit cast to ssize_t?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1401,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1436,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Should we be making sure that this size can\u0027t exceed SSIZE_MAX due to passing it to vn_rdwr?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1436,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Changing elf_nshdr_max to a uint_t so the check below keeps the size in check"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1445,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"This should probably be case to an ssize_t now."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1445,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1591,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Isn\u0027t addr a \u0027caddr_t *\u0027 because addr is a caddr_t?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1591,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"In one iteration, I switched addr to a uintptr_t.  These casts should have been cleaned up when I reverted that.  Will fix"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1606,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Same as +1591."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1606,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1724,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Should we be worried about overflow with this calculation?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1724,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"The length bounds provided by elfsize() should keep us safe, provided that p_filesz \u003c\u003d p_memsz, as required by the spec for PT_LOAD.  It\u0027s probably worth verifying that above and adding a comment about how this here is safe."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1724,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"No, for two reasons: 1. addr+p_filesz should not overflow thanks to the planning of elfsize(). 2. an unsigned overflow should be fine for the input to P2NPHASE(x, PAGESIZE)"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1728,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Should we be worried about overflow with this calculation?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1728,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I believe elfsize() should have required that adequate space be reserved in the AS for this to work"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1728,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"See above"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1728,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Mind adding comments somewhere about the elfsize() bit?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1728,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Sure"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1775,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Do you need that to be MIN(*execsz, memsz)?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1775,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I think it\u0027s OK?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1775,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Yeah, it is, my mistake."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1929,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Should we actually declare len as an ssize_t because of the issues below? If not, should we cast it explicitly to an ssize_t?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1929,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Went with an ssize_t cast instead.  The math above should keep us safe and I\u0027d rather not introduce any new signed variables."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1929,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"OK. Worth an assert about that?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1929,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I\u0027m inclined to skip it in this case."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1956,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"None of this deals with extended elf sections and how that works. It may be fine that we can\u0027t get anything from such elf objects. But I just wanted to make sure you were aware of it and tested it."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1956,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"This is the logic extracted from the old elf_process_scns(), with some cleaning done."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1956,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Yeah, I know. Just wanted to mention it for testing purposes."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1983,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"getelfshdr has insured that we have ehdr.e_shentsize * nshdrs space right? Has it make sure that can\u0027t overflow a u_offset_t?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1983,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"That\u0027s a uint_t * uint16_t, so it should be safe"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":2228,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Passing an unsigned value to a signed argument."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":2228,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Not so.  core_write() was updated to accept a u_offset_t."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":2287,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"require?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":2287,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":2345,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Do we need to verify the overflowability of these?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":2345,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Since both sizes are derived from a uint_t and a relatively small multiplier, the 64-bit size_t should not be at risk here."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":2438,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"why don\u0027t we need to call pr_getprot_done in any of the other cases here?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":2438,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Looking at the impl of pr_getprot, when \u0027naddr \u003d\u003d eaddr\u0027, the termination condition of our loop, it does the pr_getprot_done automatically.  It\u0027s success is checked by the ASSERT() at the end of the loop.\n\nThat being said, I\u0027ll add an ASSERT() to the continue case to make it clean, and change to a VERIFY at loop termination"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":2438,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"OK, thanks for digging into that, I appreciate it."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":2564,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Passing unsigned value to signed argument."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":2564,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Also fixed to take u_offset_t"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":2578,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Passing unsigned value to signed argument."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":2578,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"It\u0027s now u_offset_t"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":2627,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"See earlier comments."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":2627,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"See earlier response"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":2651,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"What makes sure this doesn\u0027t overflow and what makes sure it stays within a signed offset_t?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":2651,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"The size restrictions from above cover it"},{"file":"usr/src/uts/common/fs/proc/prsubr.c","line":1434,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"What in the system is making sure that we don\u0027t exceed this? Could I use this to DOS the system with INT_MAX tiny 4k unreserved, untouched mappings? Should we instead actually just keep this signed and instead make sure we don\u0027t go beyond INT_MAX in counting?"},{"file":"usr/src/uts/common/fs/proc/prsubr.c","line":1434,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"We do limit the max number of segments in a process, but since we\u0027re checking the bounds of protection too, it would be a theoretical DoS vector.  I\u0027ll just clamp it to INT_MAX"},{"file":"usr/src/uts/common/os/core.c","line":807,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Don\u0027t you want the MIN(offset, size) here to properly detect overflow?"},{"file":"usr/src/uts/common/os/core.c","line":807,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"I\u0027m pretty sure this is OK as-is."},{"file":"usr/src/uts/common/os/core.c","line":858,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"See earlier comment."},{"file":"usr/src/uts/common/os/core.c","line":858,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"ditto from above"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":6,"deletions":-12},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":526,"deletions":-487},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","type":"MODIFIED","insertions":14,"deletions":-2},{"file":"usr/src/uts/common/exec/intp/intp.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/java/java.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/exec/shbin/shbin.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":12,"deletions":-3},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/os/core.c","type":"MODIFIED","insertions":14,"deletions":-4},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"usr/src/uts/common/sys/exec.h","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"usr/src/uts/common/sys/prsystm.h","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":610,"sizeDeletions":-547},{"number":"5","revision":"f4f30c5ad5dbbd8bb6af18e053e63af36de246dc","parents":["31fd5d7bc7a22f5f61d4a1b782a407e05cf49ad1"],"ref":"refs/changes/15/2115/5","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1551907284,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":10,"deletions":-16},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":561,"deletions":-504},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","type":"MODIFIED","insertions":14,"deletions":-2},{"file":"usr/src/uts/common/exec/intp/intp.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/java/java.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/exec/shbin/shbin.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/os/core.c","type":"MODIFIED","insertions":14,"deletions":-4},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"usr/src/uts/common/sys/exec.h","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"usr/src/uts/common/sys/prsystm.h","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":653,"sizeDeletions":-568},{"number":"6","revision":"1ee62c39bc4edb180672f188ccf7f0c0a5526b32","parents":["b4bede175d4c50ac1b36078a677b69388f6fb59f"],"ref":"refs/changes/15/2115/6","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1551909306,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":10,"deletions":-16},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":561,"deletions":-504},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","type":"MODIFIED","insertions":14,"deletions":-2},{"file":"usr/src/uts/common/exec/intp/intp.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/java/java.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/exec/shbin/shbin.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/os/core.c","type":"MODIFIED","insertions":14,"deletions":-4},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"usr/src/uts/common/sys/exec.h","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"usr/src/uts/common/sys/prsystm.h","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":653,"sizeDeletions":-568},{"number":"7","revision":"1960ddd901857c0743ad3b0e1220f8bdc9b0262c","parents":["b4bede175d4c50ac1b36078a677b69388f6fb59f"],"ref":"refs/changes/15/2115/7","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1552068634,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":10,"deletions":-16},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":569,"deletions":-504},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","type":"MODIFIED","insertions":14,"deletions":-2},{"file":"usr/src/uts/common/exec/intp/intp.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/java/java.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/exec/shbin/shbin.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/os/core.c","type":"MODIFIED","insertions":14,"deletions":-4},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"usr/src/uts/common/sys/exec.h","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"usr/src/uts/common/sys/prsystm.h","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":661,"sizeDeletions":-568},{"number":"8","revision":"8c5eb5738c42d8c2b5bd208970f896456f02a1f2","parents":["e790b92538e616017d45a87be045bccb1a3c8758"],"ref":"refs/changes/15/2115/8","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1552068673,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":10,"deletions":-16},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":569,"deletions":-504},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","type":"MODIFIED","insertions":14,"deletions":-2},{"file":"usr/src/uts/common/exec/intp/intp.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/java/java.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/exec/shbin/shbin.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/os/core.c","type":"MODIFIED","insertions":14,"deletions":-4},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"usr/src/uts/common/sys/exec.h","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"usr/src/uts/common/sys/prsystm.h","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":661,"sizeDeletions":-568},{"number":"9","revision":"af8fae87090c18e9206fb4de551a10063da17b31","parents":["e790b92538e616017d45a87be045bccb1a3c8758"],"ref":"refs/changes/15/2115/9","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1552342459,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552401913,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":10,"deletions":-16},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":573,"deletions":-504},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","type":"MODIFIED","insertions":14,"deletions":-2},{"file":"usr/src/uts/common/exec/intp/intp.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/java/java.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/exec/shbin/shbin.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/os/core.c","type":"MODIFIED","insertions":14,"deletions":-4},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"usr/src/uts/common/sys/exec.h","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"usr/src/uts/common/sys/prsystm.h","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":665,"sizeDeletions":-568},{"number":"10","revision":"9b185ccd042c59ea0d4c09cec391b13864d4195a","parents":["8585938b68c417dc081eba6fd4434484bb46dfe4"],"ref":"refs/changes/15/2115/10","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1552420268,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552401913,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"comments":[{"file":"usr/src/uts/common/exec/elf/elf.c","line":804,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"typo"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":804,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Done"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1359,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"is this work still to be done before you push?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1359,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"It was a question raised while I was reading/fixing this stuff, but I\u0027m not ready to dive into it at this time.  I\u0027m inclined to leave the comment, though."},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1359,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Looking at this further, I don\u0027t know what value would be derived from checking e_ident[EI_OSABI], so I\u0027m just removing the comment."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":10,"deletions":-16},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":573,"deletions":-504},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","type":"MODIFIED","insertions":14,"deletions":-2},{"file":"usr/src/uts/common/exec/intp/intp.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/java/java.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/exec/shbin/shbin.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/os/core.c","type":"MODIFIED","insertions":14,"deletions":-4},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"usr/src/uts/common/sys/exec.h","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"usr/src/uts/common/sys/prsystm.h","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":665,"sizeDeletions":-568},{"number":"11","revision":"33ee7666bc7e8a6b53f374bd4390d219923d1e84","parents":["8585938b68c417dc081eba6fd4434484bb46dfe4"],"ref":"refs/changes/15/2115/11","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1552424783,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552426810,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":10,"deletions":-16},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":579,"deletions":-510},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","type":"MODIFIED","insertions":14,"deletions":-2},{"file":"usr/src/uts/common/exec/intp/intp.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/java/java.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/exec/shbin/shbin.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/os/core.c","type":"MODIFIED","insertions":14,"deletions":-4},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"usr/src/uts/common/sys/exec.h","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"usr/src/uts/common/sys/prsystm.h","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":671,"sizeDeletions":-574},{"number":"12","revision":"db953187c35f3665273979cf9e5389ea561c0bd9","parents":["8585938b68c417dc081eba6fd4434484bb46dfe4"],"ref":"refs/changes/15/2115/12","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1552433618,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":10,"deletions":-16},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":579,"deletions":-510},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","type":"MODIFIED","insertions":14,"deletions":-2},{"file":"usr/src/uts/common/exec/intp/intp.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/java/java.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/exec/shbin/shbin.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/os/core.c","type":"MODIFIED","insertions":14,"deletions":-4},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"usr/src/uts/common/sys/exec.h","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"usr/src/uts/common/sys/prsystm.h","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":671,"sizeDeletions":-574},{"number":"13","revision":"7205ec86d9d5884de89114493beae11b5d59ad1c","parents":["8585938b68c417dc081eba6fd4434484bb46dfe4"],"ref":"refs/changes/15/2115/13","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1552436438,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552508139,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552437527,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"comments":[{"file":"usr/src/uts/common/exec/elf/elf.c","line":1504,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Maybe add \"#define elfreadhdr elf32readhdr\" to elf_impl.h so that it behaves like all of the other functions in this file?"},{"file":"usr/src/uts/common/exec/elf/elf.c","line":1504,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Sure, that sounds good."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":10,"deletions":-16},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":578,"deletions":-510},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","type":"MODIFIED","insertions":14,"deletions":-2},{"file":"usr/src/uts/common/exec/intp/intp.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/java/java.c","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"usr/src/uts/common/exec/shbin/shbin.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":16,"deletions":-3},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/os/core.c","type":"MODIFIED","insertions":14,"deletions":-4},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":4,"deletions":-5},{"file":"usr/src/uts/common/sys/exec.h","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"usr/src/uts/common/sys/prsystm.h","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":670,"sizeDeletions":-574},{"number":"14","revision":"f16554fa412cbe679f26f5bfc4854e3dd5ec7f43","parents":["8585938b68c417dc081eba6fd4434484bb46dfe4"],"ref":"refs/changes/15/2115/14","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1552606218,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552607252,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552608227,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552656181,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":11,"deletions":-17},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":574,"deletions":-514},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"usr/src/uts/common/exec/intp/intp.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/exec/java/java.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/shbin/shbin.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/os/core.c","type":"MODIFIED","insertions":15,"deletions":-5},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"usr/src/uts/common/sys/exec.h","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"usr/src/uts/common/sys/prsystm.h","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":680,"sizeDeletions":-591},{"number":"15","revision":"a2cb7f57d48c20a74a9cc771a94592375c83c949","parents":["e71bdde53b9f83f6302134fc3592cc5a5ebfe91f"],"ref":"refs/changes/15/2115/15","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1552684002,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552607252,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552608227,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552656181,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":11,"deletions":-17},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":574,"deletions":-514},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"usr/src/uts/common/exec/intp/intp.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/exec/java/java.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/shbin/shbin.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/os/core.c","type":"MODIFIED","insertions":15,"deletions":-5},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"usr/src/uts/common/sys/exec.h","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"usr/src/uts/common/sys/prsystm.h","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":680,"sizeDeletions":-591},{"number":"16","revision":"017cb372a6d9041378506bbc71e90278199e5535","parents":["e71bdde53b9f83f6302134fc3592cc5a5ebfe91f"],"ref":"refs/changes/15/2115/16","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1552684287,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552607252,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552608227,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552656181,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1552916770,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":11,"deletions":-17},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":574,"deletions":-514},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"usr/src/uts/common/exec/intp/intp.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/exec/java/java.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/shbin/shbin.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/os/core.c","type":"MODIFIED","insertions":15,"deletions":-5},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"usr/src/uts/common/sys/exec.h","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"usr/src/uts/common/sys/prsystm.h","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":680,"sizeDeletions":-591},{"number":"17","revision":"11d989f9bcd17b70892b27c23a875712b86f54d5","parents":["f596c0900965f1168f07b20b94337167854044c3"],"ref":"refs/changes/15/2115/17","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1552922781,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552607252,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552608227,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552656181,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1552916770,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":11,"deletions":-17},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":574,"deletions":-514},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"usr/src/uts/common/exec/intp/intp.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/exec/java/java.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/shbin/shbin.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/os/core.c","type":"MODIFIED","insertions":15,"deletions":-5},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"usr/src/uts/common/sys/exec.h","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"usr/src/uts/common/sys/prsystm.h","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":680,"sizeDeletions":-591},{"number":"18","revision":"90e27ef5fc2bdeb7f9934f4e77140ef5f1aa9392","parents":["f596c0900965f1168f07b20b94337167854044c3"],"ref":"refs/changes/15/2115/18","uploader":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"createdOn":1552934143,"author":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552607252,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552608227,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1552656181,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"SUBM","value":"1","grantedOn":1552936146,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1552916770,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"usr/src/uts/common/brand/lx/os/lx_brand.c","type":"MODIFIED","insertions":11,"deletions":-17},{"file":"usr/src/uts/common/brand/sn1/sn1_brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/brand/solaris10/s10_brand.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/exec/elf/elf.c","type":"MODIFIED","insertions":574,"deletions":-514},{"file":"usr/src/uts/common/exec/elf/elf_impl.h","type":"MODIFIED","insertions":15,"deletions":-2},{"file":"usr/src/uts/common/exec/intp/intp.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/exec/java/java.c","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"usr/src/uts/common/exec/shbin/shbin.c","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"usr/src/uts/common/fs/proc/prioctl.c","type":"MODIFIED","insertions":5,"deletions":-5},{"file":"usr/src/uts/common/fs/proc/prsubr.c","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"usr/src/uts/common/os/brand.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/os/core.c","type":"MODIFIED","insertions":15,"deletions":-5},{"file":"usr/src/uts/common/os/exec.c","type":"MODIFIED","insertions":4,"deletions":-4},{"file":"usr/src/uts/common/sys/brand.h","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"usr/src/uts/common/sys/exec.h","type":"MODIFIED","insertions":14,"deletions":-14},{"file":"usr/src/uts/common/sys/prsystm.h","type":"MODIFIED","insertions":2,"deletions":-2}],"sizeInsertions":680,"sizeDeletions":-591}],"allReviewers":[{"name":"Rich Lowe","email":"richlowe@richlowe.net","username":"richlowe"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}]}