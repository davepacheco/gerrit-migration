{"project":"joyent/sdc-vmapi","branch":"master","id":"I6ad10b7985a2755c510c1b49db5702694b4eecaa","number":"1670","subject":"ZAPI-773 style checker and linter should be run on JavaScript source code in tools/ folder when running make check ZAPI-774 tools/add-test-vms.js throws uncaught error due to missing dependency ZAPI-776 tools/perf/random-load.js doesn\u0027t exit when entering","owner":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"url":"https://cr.joyent.us/1670","commitMessage":"ZAPI-773 style checker and linter should be run on JavaScript source code in tools/ folder when running make check\nZAPI-774 tools/add-test-vms.js throws uncaught error due to missing dependency\nZAPI-776 tools/perf/random-load.js doesn\u0027t exit when entering ctrl-c\nZAPI-777 tools/npmfreeze.js is obsolete and should be removed\nReviewed by: Josh Wilsdon \u003cjwilsdon@joyent.com\u003e\nReviewed by: Orlando Vazquez \u003covazquez@gmail.com\u003e\nApproved by: Josh Wilsdon \u003cjwilsdon@joyent.com\u003e\nApproved by: Orlando Vazquez \u003covazquez@gmail.com\u003e\n","createdOn":1489621308,"lastUpdated":1489692743,"open":false,"status":"MERGED","comments":[{"timestamp":1489621308,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 1."},{"timestamp":1489621348,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1489621381,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 2."},{"timestamp":1489621414,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1489641315,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 2: Code-Review+1\n\n(9 comments)"},{"timestamp":1489641328,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1489683597,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1\n\n(3 comments)"},{"timestamp":1489688574,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Uploaded patch set 3."},{"timestamp":1489688582,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 2:\n\n(9 comments)"},{"timestamp":1489688608,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1489688705,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1489689002,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1\n\nLGTM!"},{"timestamp":1489692728,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Patch Set 4: Commit message was updated."},{"timestamp":1489692743,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Julien Gilli"}],"currentPatchSet":{"number":"4","revision":"c3e3474838c9f76c035ec8bc960a8a68a1309f4b","parents":["39ee324064c651c529785740aba4342e593db818"],"ref":"refs/changes/70/1670/4","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1489692728,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489688608,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489688705,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1489688705,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489689002,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1489689002,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"SUBM","value":"1","grantedOn":1489692743,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":14,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"tools/add-test-vms.js","type":"MODIFIED","insertions":22,"deletions":-23},{"file":"tools/fix-no-owner.js","type":"MODIFIED","insertions":33,"deletions":-26},{"file":"tools/kvm-backfill.js","type":"MODIFIED","insertions":146,"deletions":-159},{"file":"tools/migrations/add-docker-index.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"tools/npmfreeze.js","type":"DELETED","insertions":0,"deletions":-93},{"file":"tools/perf/profile.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"tools/perf/random-load.js","type":"MODIFIED","insertions":6,"deletions":-5}],"sizeInsertions":217,"sizeDeletions":-317},"patchSets":[{"number":"1","revision":"17f5790dd071203203e03131efc03ccdd7bc549a","parents":["39ee324064c651c529785740aba4342e593db818"],"ref":"refs/changes/70/1670/1","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1489621308,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489621348,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"lib/apis/wfapi.js","type":"MODIFIED","insertions":0,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"tools/add-test-vms.js","type":"MODIFIED","insertions":22,"deletions":-23},{"file":"tools/fix-no-owner.js","type":"MODIFIED","insertions":33,"deletions":-24},{"file":"tools/kvm-backfill.js","type":"MODIFIED","insertions":145,"deletions":-155},{"file":"tools/migrations/add-docker-index.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"tools/npmfreeze.js","type":"DELETED","insertions":0,"deletions":-93},{"file":"tools/perf/profile.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"tools/perf/random-load.js","type":"MODIFIED","insertions":6,"deletions":-5}],"sizeInsertions":216,"sizeDeletions":-313},{"number":"2","revision":"b33079467c6e8d6ef24b0c93c2a8a9926b70dab0","parents":["39ee324064c651c529785740aba4342e593db818"],"ref":"refs/changes/70/1670/2","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1489621381,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489621414,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489641315,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1489641328,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489683597,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1489683597,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"comments":[{"file":"Makefile","line":8,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"#WIN"},{"file":"tools/add-test-vms.js","line":114,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"nit: perhaps alphabetize these?"},{"file":"tools/add-test-vms.js","line":114,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Absolutely!"},{"file":"tools/fix-no-owner.js","line":8,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"True story: \"12 Years a Slave\"  won best picture at the 86th Academy Awards on March 2, 2014. However. It\u0027s now 2017!"},{"file":"tools/fix-no-owner.js","line":29,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"I can\u0027t find that this is actually even used, is it?"},{"file":"tools/fix-no-owner.js","line":29,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"It\u0027s not used, good catch! Poor jsl :("},{"file":"tools/fix-no-owner.js","line":51,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"s/now/no/\n\n?"},{"file":"tools/fix-no-owner.js","line":51,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Good catch :)"},{"file":"tools/fix-no-owner.js","line":70,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"do we not need moray.close() in this case?"},{"file":"tools/fix-no-owner.js","line":70,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Yes, good catch!"},{"file":"tools/kvm-backfill.js","line":25,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"once again, is levels used here?"},{"file":"tools/kvm-backfill.js","line":25,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"No, jsl seems to not error on unused module-scope variables."},{"file":"tools/kvm-backfill.js","line":33,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Why are these ALLCAPS?"},{"file":"tools/kvm-backfill.js","line":33,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"I would think for no reason."},{"file":"tools/kvm-backfill.js","line":51,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"The Gerrit diff\u0027s hard to follow here, the code was only moved to this function, right? There weren\u0027t other changes made as well?"},{"file":"tools/kvm-backfill.js","line":51,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"That\u0027s right, no other change made."},{"file":"tools/kvm-backfill.js","line":60,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"I guess this was here before your change, but maybe for clarity it would make sense to log\n\n    `log.info({ done: done, limit: limit }, \u0027inside wait\u0027);`"},{"file":"tools/kvm-backfill.js","line":60,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"Absolutely!"},{"file":"tools/kvm-backfill.js","line":100,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Is the non-multiple-of-4 indentation here intentional do you think? I realize it was already like that... But I wonder if that wasn\u0027t a mistake originally."},{"file":"tools/kvm-backfill.js","line":100,"reviewer":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"message":"It was probably a mistake, fixing it."},{"file":"tools/npmfreeze.js","line":1,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"I like the new version *much* better!"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"tools/add-test-vms.js","type":"MODIFIED","insertions":22,"deletions":-23},{"file":"tools/fix-no-owner.js","type":"MODIFIED","insertions":33,"deletions":-24},{"file":"tools/kvm-backfill.js","type":"MODIFIED","insertions":145,"deletions":-155},{"file":"tools/migrations/add-docker-index.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"tools/npmfreeze.js","type":"DELETED","insertions":0,"deletions":-93},{"file":"tools/perf/profile.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"tools/perf/random-load.js","type":"MODIFIED","insertions":6,"deletions":-5}],"sizeInsertions":216,"sizeDeletions":-311},{"number":"3","revision":"6ad10b7985a2755c510c1b49db5702694b4eecaa","parents":["39ee324064c651c529785740aba4342e593db818"],"ref":"refs/changes/70/1670/3","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1489688574,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489688608,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489689002,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1489689002,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489688705,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1489688705,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"tools/add-test-vms.js","type":"MODIFIED","insertions":22,"deletions":-23},{"file":"tools/fix-no-owner.js","type":"MODIFIED","insertions":33,"deletions":-26},{"file":"tools/kvm-backfill.js","type":"MODIFIED","insertions":146,"deletions":-159},{"file":"tools/migrations/add-docker-index.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"tools/npmfreeze.js","type":"DELETED","insertions":0,"deletions":-93},{"file":"tools/perf/profile.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"tools/perf/random-load.js","type":"MODIFIED","insertions":6,"deletions":-5}],"sizeInsertions":217,"sizeDeletions":-317},{"number":"4","revision":"c3e3474838c9f76c035ec8bc960a8a68a1309f4b","parents":["39ee324064c651c529785740aba4342e593db818"],"ref":"refs/changes/70/1670/4","uploader":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},"createdOn":1489692728,"author":{"name":"Julien Gilli","email":"julien.gilli@joyent.com","username":""},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1489688608,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489689002,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1489689002,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"SUBM","value":"1","grantedOn":1489692743,"by":{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1489688705,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1489688705,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":14,"deletions":0},{"file":"Makefile","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":0},{"file":"tools/add-test-vms.js","type":"MODIFIED","insertions":22,"deletions":-23},{"file":"tools/fix-no-owner.js","type":"MODIFIED","insertions":33,"deletions":-26},{"file":"tools/kvm-backfill.js","type":"MODIFIED","insertions":146,"deletions":-159},{"file":"tools/migrations/add-docker-index.js","type":"MODIFIED","insertions":2,"deletions":-3},{"file":"tools/npmfreeze.js","type":"DELETED","insertions":0,"deletions":-93},{"file":"tools/perf/profile.js","type":"MODIFIED","insertions":5,"deletions":-6},{"file":"tools/perf/random-load.js","type":"MODIFIED","insertions":6,"deletions":-5}],"sizeInsertions":217,"sizeDeletions":-317}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},{"name":"Julien Gilli","email":"jgilli@netflix.com","username":"misterdjules"},{"name":"Richard Kiene","email":"richard.kiene@joyent.com","username":"richardkiene"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}]}