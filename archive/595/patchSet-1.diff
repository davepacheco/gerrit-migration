From 5e4a187d76dab435f5820a6806b399ebd80985d4 Mon Sep 17 00:00:00 2001
From: Trent Mick <trentm@gmail.com>
Date: Tue, 4 Oct 2016 15:03:43 -0700
Subject: [PATCH] DOCKER-942 cut docker-registry-client 3.2.0

---
 CHANGES.md |  5 ++++-
 Makefile   |  6 ++++--
 README.md  | 33 ++++++++++++++++++++++++++++++++-
 3 files changed, 40 insertions(+), 4 deletions(-)

diff --git a/CHANGES.md b/CHANGES.md
index 9d031dc..ad9ca33 100644
--- a/CHANGES.md
+++ b/CHANGES.md
@@ -1,6 +1,9 @@
 # node-docker-registry-client Changelog
 
-## 3.2.0 (not yet released)
+## not yet released
+
+
+## 3.2.0
 
 - DOCKER-940: Update to support node v4 without build errors.
 - DOCKER-929: Support the docker v2.2 manifest format. The `createClientV2` and
diff --git a/Makefile b/Makefile
index 8866df0..bd8f331 100644
--- a/Makefile
+++ b/Makefile
@@ -5,7 +5,7 @@
 #
 
 #
-# Copyright (c) 2015, Joyent, Inc.
+# Copyright 2016 Joyent, Inc.
 #
 
 #
@@ -49,11 +49,13 @@ clean::
 
 DISTCLEAN_FILES += node_modules
 
+check:: versioncheck
+
 # Ensure CHANGES.md and package.json have the same version.
 .PHONY: versioncheck
 versioncheck:
 	@echo version is: $(shell cat package.json | json version)
-	[[ `cat package.json | json version` == `grep '^## ' CHANGES.md | head -1 | awk '{print $$2}'` ]]
+	[[ `cat package.json | json version` == `grep '^## ' CHANGES.md | head -2 | tail -1 | awk '{print $$2}'` ]]
 
 .PHONY: cutarelease
 cutarelease: versioncheck
diff --git a/README.md b/README.md
index 18c2249..5964785 100644
--- a/README.md
+++ b/README.md
@@ -322,7 +322,38 @@ V1 client usage:
     });
 
 
-## Dev Notes
+## Development
+
+### Naming convensions
 
 For naming this package attempts to consistently use `repo` for repository,
 `img` for image, etc.
+
+
+### Commits
+
+Before commit, ensure that the following checks are clean:
+
+    make prepush
+
+Also see the note at the top that cr.joyent.us is used for code review for
+this repo.
+
+
+### Releases
+
+Changes with possible user impact should:
+
+1. Add a note to the changelog (CHANGES.md).
+2. Bump the package version appropriately.
+3. Once merged to master, the new version should be tagged and published to npm
+   via:
+
+        make cutarelease
+
+   To list to npm accounts that have publish access:
+
+        npm owner ls docker-registry-client
+
+The desire is that users of this package use published versions in their
+package.json `dependencies`, rather than depending on git shas.
-- 
2.21.0

