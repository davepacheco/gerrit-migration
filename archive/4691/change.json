{"project":"joyent/sdcadm","branch":"master","id":"I6e74f958f34bf9ce6d727003f7b302cc225b766a","number":"4691","subject":"TRITON-696 sdcadm want info subcommand Reviewed by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e Approved by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e","owner":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"url":"https://cr.joyent.us/4691","commitMessage":"TRITON-696 sdcadm want info subcommand\nReviewed by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e\nApproved by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e\n","createdOn":1534353677,"lastUpdated":1534870487,"open":false,"status":"MERGED","comments":[{"timestamp":1534353677,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 1."},{"timestamp":1534353680,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 97c72ccd0f47bcf868f22c7252d4206632bf37c9\n    \n    initial commit"},{"timestamp":1534353713,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1534428986,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1:\n\n(4 comments)\n\nI like the idea. I think that we need to mature it a little bit more (therefore my suggestion to initially include it under `sdcadm experimental`) before we commit to something we\u0027ll need to maintain for customers to use.\n\nSome more notes into the involved files + I\u0027d bump sdcadm version from 1.20.x to 1.21.0 here since we\u0027re modifying the cmd API adding a new subcommand."},{"timestamp":1534527106,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 1:\n\n(4 comments)\n\nty for the review! i\u0027ll make the changes and push a new patchset."},{"timestamp":1534828991,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 2."},{"timestamp":1534828995,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit da100d61fcc8120ce57c9b62d7b3c2876ef72a42\n    \n    changes based on pedro review"},{"timestamp":1534828998,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing-1\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n fatal: No tags can describe \u002738cfdab13b77a07469abf4b5a6461bf195a4a33a\u0027.\n Try --always, or create some tags.\n version is: 1.21.0\n package.json version does not match CHANGES.md\n Makefile:107: recipe for target \u0027check-version\u0027 failed\n gmake: *** [check-version] Error 1"},{"timestamp":1534829016,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 3: Patch Set 2 was rebased."},{"timestamp":1534829020,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 9d45d88d259c3b5c693eff36f923d813d2119740\n    \n    changes based on pedro review\n    \n    commit 0e86e88f575c5f32706547c0cb736788674952fb\n    \n    initial commit"},{"timestamp":1534829022,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3:\n\n\"make check\" exited with status 2\n\n fatal: ref HEAD is not a symbolic ref\n version is: 1.21.0\n package.json version does not match CHANGES.md\n Makefile:107: recipe for target \u0027check-version\u0027 failed\n gmake: *** [check-version] Error 1"},{"timestamp":1534829138,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 4."},{"timestamp":1534829141,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 9a9b23460d9b35587e307109887f69eb4f69b6c6\n    \n    update changelog"},{"timestamp":1534829176,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1534866789,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1"},{"timestamp":1534870452,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1534870487,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Dave Eddy"}],"currentPatchSet":{"number":"5","revision":"6e74f958f34bf9ce6d727003f7b302cc225b766a","parents":["7dc1b39994a1a43cf326d37eded61e439cb751a8"],"ref":"refs/changes/91/4691/5","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1534870452,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1534829176,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534866789,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1534866789,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"SUBM","value":"1","grantedOn":1534870487,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/cli/do_info.js","type":"ADDED","insertions":80,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/cli/index.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/common.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":10,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":103,"sizeDeletions":-2},"patchSets":[{"number":"1","revision":"02ca52dc4f716e9d6046c3d2a1dd6e76e9b5cd88","parents":["ede3321166751d2cb49127d73d6c62c3388ffea7"],"ref":"refs/changes/91/4691/1","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1534353677,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1534353713,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"lib/cli/do_info.js","line":30,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"There is no need for this, you already have `sdcadm` defined as a property of `self` here so you can just read config from `sdcadm.config`."},{"file":"lib/cli/do_info.js","line":30,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"ah cool, ty."},{"file":"lib/cli/index.js","line":233,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"I\u0027d put the command under `sdcadm experimental` at the beginning, since moving it to top level means we\u0027re committed to support it for as long as `sdcadm` is maintained, with a similar output.\n\nI\u0027d suggest moving it under experimental until we\u0027re good to go with the command final output after some usage experience."},{"file":"lib/cli/index.js","line":233,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Done"},{"file":"lib/common.js","line":169,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Do we really need the whole thing here? I mean, there\u0027s a bunch of this stuff already available using `bash /lib/sdc/config.sh -json` from the command line.\n\nI\u0027d try to think twice about the information we really need and just print that stuff out"},{"file":"lib/common.js","line":169,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"sounds good.  I\u0027ll remove this line and only include the data that is relevant to the output I want."},{"file":"man/man1/sdcadm.1.ronn","line":43,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"\"node\"? I\u0027d say we should be more clear about what node means here."},{"file":"man/man1/sdcadm.1.ronn","line":43,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"I basically just mean \"this specific machine\" ie. the machine executing this script.  I don\u0027t really know what else to say here.... something like:\n\n\n Show SDC datacenter and headnode information.\n\n\nor simply\n\n\n Show SDC information\n\n\nI don\u0027t really know."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/cli/do_info.js","type":"ADDED","insertions":89,"deletions":0},{"file":"lib/cli/index.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"lib/common.js","type":"MODIFIED","insertions":1,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":10,"deletions":0}],"sizeInsertions":101,"sizeDeletions":0},{"number":"2","revision":"38cfdab13b77a07469abf4b5a6461bf195a4a33a","parents":["ede3321166751d2cb49127d73d6c62c3388ffea7"],"ref":"refs/changes/91/4691/2","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1534828991,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1534828998,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/cli/do_info.js","type":"ADDED","insertions":80,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/cli/index.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/common.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":10,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":99,"sizeDeletions":-2},{"number":"3","revision":"803c9dd60239aa58f0b4295fa8acd9a36df0a245","parents":["7dc1b39994a1a43cf326d37eded61e439cb751a8"],"ref":"refs/changes/91/4691/3","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1534829016,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1534828998,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/cli/do_info.js","type":"ADDED","insertions":80,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/cli/index.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/common.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":10,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":99,"sizeDeletions":-2},{"number":"4","revision":"247ddde9e01cd4f8785e3a80296db1d89e8e858a","parents":["7dc1b39994a1a43cf326d37eded61e439cb751a8"],"ref":"refs/changes/91/4691/4","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1534829138,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1534829176,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534866789,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1534866789,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/cli/do_info.js","type":"ADDED","insertions":80,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/cli/index.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/common.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":10,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":103,"sizeDeletions":-2},{"number":"5","revision":"6e74f958f34bf9ce6d727003f7b302cc225b766a","parents":["7dc1b39994a1a43cf326d37eded61e439cb751a8"],"ref":"refs/changes/91/4691/5","uploader":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"createdOn":1534870452,"author":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1534829176,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1534866789,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1534866789,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"SUBM","value":"1","grantedOn":1534870487,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"CHANGES.md","type":"MODIFIED","insertions":4,"deletions":0},{"file":"lib/cli/do_info.js","type":"ADDED","insertions":80,"deletions":0},{"file":"lib/cli/experimental.js","type":"MODIFIED","insertions":2,"deletions":0},{"file":"lib/cli/index.js","type":"MODIFIED","insertions":0,"deletions":-1},{"file":"lib/common.js","type":"MODIFIED","insertions":6,"deletions":0},{"file":"man/man1/sdcadm.1.ronn","type":"MODIFIED","insertions":10,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":1,"deletions":-1}],"sizeInsertions":103,"sizeDeletions":-2}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}]}