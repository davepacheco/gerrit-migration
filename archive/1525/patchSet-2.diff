From 28f6b02db1e14dbd660c6b327d303fc17c0bf2b3 Mon Sep 17 00:00:00 2001
From: Jerry Jelinek <jerry.jelinek@joyent.com>
Date: Fri, 17 Feb 2017 17:44:57 +0000
Subject: [PATCH] OS-5967 lx reporting wrong start time under ps

---
 usr/src/uts/common/brand/lx/procfs/lx_prvnops.c | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

diff --git a/usr/src/uts/common/brand/lx/procfs/lx_prvnops.c b/usr/src/uts/common/brand/lx/procfs/lx_prvnops.c
index e120e30f11..14b14c585c 100644
--- a/usr/src/uts/common/brand/lx/procfs/lx_prvnops.c
+++ b/usr/src/uts/common/brand/lx/procfs/lx_prvnops.c
@@ -89,7 +89,6 @@ extern int prreadbuf(proc_t *, uintptr_t, uint8_t *, size_t, size_t *);
 #include "lx_proc.h"
 
 extern pgcnt_t swapfs_minfree;
-extern time_t boot_time;
 
 /*
  * Pointer to the vnode ops vector for this fs.
@@ -4192,7 +4191,7 @@ lxpr_read_stat(lxpr_node_t *lxpnp, lxpr_uiobuf_t *uiobuf)
 		    pgswapin_cum, pgswapout_cum,
 		    intr_cum,
 		    pswitch_cum,
-		    boot_time,
+		    zone->zone_boot_time,
 		    forks_cum,
 		    cpu_nrunnable_cum,
 		    w_io_cum);
@@ -4208,7 +4207,7 @@ lxpr_read_stat(lxpr_node_t *lxpnp, lxpr_uiobuf_t *uiobuf)
 		    pgswapin_cum, pgswapout_cum,
 		    intr_cum,
 		    pswitch_cum,
-		    boot_time,
+		    zone->zone_boot_time,
 		    forks_cum);
 	}
 }
-- 
2.21.0

