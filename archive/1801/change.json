{"project":"joyent/illumos-joyent","branch":"master","id":"Ice33465b99b9a4811a15724b9822c0531560d2b5","number":"1801","subject":"OS-5701 lxbrand doesn\u0027t support per-process RLIMIT_MEMLOCK Reviewed by: Ryan Zezeski \u003cryan.zeseski@joyent.com\u003e Reviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e Approved by: Ryan Zezeski \u003cryan.zeseski@joyent.com\u003e","owner":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"url":"https://cr.joyent.us/1801","commitMessage":"OS-5701 lxbrand doesn\u0027t support per-process RLIMIT_MEMLOCK\nReviewed by: Ryan Zezeski \u003cryan.zeseski@joyent.com\u003e\nReviewed by: Patrick Mooney \u003cpatrick.mooney@joyent.com\u003e\nApproved by: Ryan Zezeski \u003cryan.zeseski@joyent.com\u003e\n","createdOn":1492524905,"lastUpdated":1492626798,"open":false,"status":"MERGED","comments":[{"timestamp":1492524905,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 1."},{"timestamp":1492556627,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1:\n\n(2 comments)\n\nAny thoughts about splitting up the native and LX portions of this into separate commits?"},{"timestamp":1492557003,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 1:\n\n(2 comments)\n\nI didn\u0027t really want to split this off from lx since I think the entire purpose here is to serve lx. Once we get OS-5097 done, my intent is to have the behavior for this rctl simply match the current Linux behavior."},{"timestamp":1492613921,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 1: Code-Review+1\n\n(2 comments)\n\nLooks good, just a few comment nits"},{"timestamp":1492622656,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 1: Code-Review+1"},{"timestamp":1492625454,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 2."},{"timestamp":1492625570,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1492625717,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1492625795,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Patch Set 2:\n\nI added some test notes on the ticket if one of you would like to IA."},{"timestamp":1492626402,"reviewer":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},"message":"Patch Set 2: Integration-Approval+1"},{"timestamp":1492626773,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"Uploaded patch set 3: Commit message was updated."},{"timestamp":1492626798,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Jerry Jelinek"}],"currentPatchSet":{"number":"3","revision":"ce33465b99b9a4811a15724b9822c0531560d2b5","parents":["bdeddd1b57baed3af78d568e6e27f2fd12209ef8"],"ref":"refs/changes/01/1801/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1492626773,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1492625570,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1492625717,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1492626402,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}},{"type":"SUBM","value":"1","grantedOn":1492626798,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/man/man5/resource_controls.5","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"usr/src/uts/common/brand/lx/syscall/lx_rlimit.c","type":"MODIFIED","insertions":21,"deletions":-12},{"file":"usr/src/uts/common/os/rctl.c","type":"MODIFIED","insertions":31,"deletions":-8},{"file":"usr/src/uts/common/os/rctl_proc.c","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":72,"sizeDeletions":-22},"patchSets":[{"number":"1","revision":"a51062a2d69e050b80e9ea7a7d2808120caf65a4","parents":["bcfaedcea7135042c64d088b29fe5248ca14aa45"],"ref":"refs/changes/01/1801/1","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1492524905,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1492613921,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1492622656,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"comments":[{"file":"usr/src/uts/common/os/rctl.c","line":2879,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"If we\u0027re going to cite argument variables like this in the comment, it might make it clearer to quote them to make it easier to differentiate:\nIf \u0027proj\u0027 is non-NULL, ...\n\nThe same goes for \u0027proj\u0027, \u0027p\u0027, \u0027chargeproc\u0027, etc"},{"file":"usr/src/uts/common/os/rctl.c","line":2879,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"insert comma"},{"file":"usr/src/uts/common/os/rctl.c","line":2900,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"Not technically your issue, but could we get a newline between the asserts and the real logic.  These were hard to spot considering the typical convention."},{"file":"usr/src/uts/common/os/rctl.c","line":2900,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"I\u0027ll add that."},{"file":"usr/src/uts/common/os/rctl_proc.c","line":391,"reviewer":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},"message":"No default limit is required, I assume?"},{"file":"usr/src/uts/common/os/rctl_proc.c","line":391,"reviewer":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"message":"I wanted this to be unlimited by default to match the existing behavior for everything."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/man/man5/resource_controls.5","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"usr/src/uts/common/brand/lx/syscall/lx_rlimit.c","type":"MODIFIED","insertions":21,"deletions":-12},{"file":"usr/src/uts/common/os/rctl.c","type":"MODIFIED","insertions":28,"deletions":-6},{"file":"usr/src/uts/common/os/rctl_proc.c","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":69,"sizeDeletions":-20},{"number":"2","revision":"763549c64a1ef5ed9d0693788564d3e78340d9e4","parents":["bdeddd1b57baed3af78d568e6e27f2fd12209ef8"],"ref":"refs/changes/01/1801/2","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1492625454,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1492625717,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1492625570,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1492626402,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"usr/src/man/man5/resource_controls.5","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"usr/src/uts/common/brand/lx/syscall/lx_rlimit.c","type":"MODIFIED","insertions":21,"deletions":-12},{"file":"usr/src/uts/common/os/rctl.c","type":"MODIFIED","insertions":31,"deletions":-8},{"file":"usr/src/uts/common/os/rctl_proc.c","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":72,"sizeDeletions":-22},{"number":"3","revision":"ce33465b99b9a4811a15724b9822c0531560d2b5","parents":["bdeddd1b57baed3af78d568e6e27f2fd12209ef8"],"ref":"refs/changes/01/1801/3","uploader":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"createdOn":1492626773,"author":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1492626798,"by":{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1492625717,"by":{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1492625570,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1492626402,"by":{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"usr/src/man/man5/resource_controls.5","type":"MODIFIED","insertions":13,"deletions":-2},{"file":"usr/src/uts/common/brand/lx/syscall/lx_rlimit.c","type":"MODIFIED","insertions":21,"deletions":-12},{"file":"usr/src/uts/common/os/rctl.c","type":"MODIFIED","insertions":31,"deletions":-8},{"file":"usr/src/uts/common/os/rctl_proc.c","type":"MODIFIED","insertions":7,"deletions":0}],"sizeInsertions":72,"sizeDeletions":-22}],"allReviewers":[{"name":"Patrick Mooney","email":"pmooney@pfmooney.com","username":"pfmooney"},{"name":"Ryan Zezeski","email":"rpz@joyent.com","username":"rzezeski"},{"name":"Jerry Jelinek","email":"jerry.jelinek@joyent.com","username":"jjelinek"}]}