{"project":"joyent/sdc-vmapi","branch":"master","topic":"RFD 43","id":"I65a88b23ac7722c110fd0c70000afcd823916e2b","number":"1945","subject":"ZAPI-781 Pass server NIC tag information to NAPI Reviewed by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e Reviewed by: Josh Wilsdon \u003cjwilsdon@joyent.com\u003e Approved by: Josh Wilsdon \u003cjwilsdon@joyent.com\u003e","owner":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"url":"https://cr.joyent.us/1945","commitMessage":"ZAPI-781 Pass server NIC tag information to NAPI\nReviewed by: Marsell Kukuljevic \u003cmarsell@joyent.com\u003e\nReviewed by: Josh Wilsdon \u003cjwilsdon@joyent.com\u003e\nApproved by: Josh Wilsdon \u003cjwilsdon@joyent.com\u003e\n","createdOn":1494607792,"lastUpdated":1496425660,"open":false,"status":"MERGED","comments":[{"timestamp":1494607792,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 1."},{"timestamp":1494607826,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1494607902,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Topic set to RFD 43"},{"timestamp":1495026931,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 1: Code-Review+1\n\n(5 comments)\n\nLGTM. All my comments are trivial bikeshedding; feel free to ignore."},{"timestamp":1495027447,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1495055703,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 2."},{"timestamp":1495055712,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 2:\n\n(4 comments)"},{"timestamp":1495055735,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1495055754,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 2:\n\n(2 comments)"},{"timestamp":1495070913,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 2: Code-Review+1\n\nI leave IA for a second set of eyes."},{"timestamp":1495145590,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 2: Code-Review+1 Integration-Approval+1\n\n(8 comments)\n\nOverall lgtm.\n\nWould it make sense to add tests to exercise this functionality?\n\nWhat manual testing has been done?"},{"timestamp":1495217275,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 3."},{"timestamp":1495217307,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1495218201,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Patch Set 3:\n\n(8 comments)\n\nI\u0027ve updated ZAPI-781 with some comments on what I tested. It would be good to have some tests for some of this functionality, but some of it depends on having two servers. I\u0027ll see what I can add."},{"timestamp":1495747777,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1\n\nlgtm. Sorry the re-review took so long."},{"timestamp":1496337423,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Uploaded patch set 4: Commit message was updated."},{"timestamp":1496425660,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Cody Peter Mello"}],"currentPatchSet":{"number":"4","revision":"65a88b23ac7722c110fd0c70000afcd823916e2b","parents":["590a4e09c0c76093f66f4ff69d6b4fd66de09bb6"],"ref":"refs/changes/45/1945/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1496337423,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1495217307,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1495747777,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1495747777,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"SUBM","value":"1","grantedOn":1496425660,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"lib/workflows/add-nics.js","type":"MODIFIED","insertions":3,"deletions":-120},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":185,"deletions":-12},{"file":"lib/workflows/provision.js","type":"MODIFIED","insertions":46,"deletions":-82}],"sizeInsertions":234,"sizeDeletions":-214},"patchSets":[{"number":"1","revision":"10462243f7034c71980f1971c251a8dadb9647de","parents":["590a4e09c0c76093f66f4ff69d6b4fd66de09bb6"],"ref":"refs/changes/45/1945/1","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1494607792,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1494607826,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1495026931,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"comments":[{"file":"lib/workflows/job-common.js","line":575,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Why not just \"if (pool.nic_tags_present) {\" ?"},{"file":"lib/workflows/job-common.js","line":575,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/workflows/job-common.js","line":696,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"This could be moved to the sole conditional branch that uses it at the end of the function?"},{"file":"lib/workflows/job-common.js","line":696,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/workflows/job-common.js","line":698,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"I find this name confusing; it sounds like the nic tags are being save to the server. :D"},{"file":"lib/workflows/job-common.js","line":698,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"I\u0027ve renamed this to better reflect that we\u0027re extracting the NIC tags from the server information."},{"file":"lib/workflows/job-common.js","line":756,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Ditto with this."},{"file":"lib/workflows/job-common.js","line":756,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/workflows/job-common.js","line":780,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"This is only used one place in the function. Maybe move it there?"},{"file":"lib/workflows/job-common.js","line":780,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/workflows/provision.js","line":183,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Irrelevant bikeshed: maybe use dot notation here instead?"},{"file":"lib/workflows/provision.js","line":183,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/workflows/add-nics.js","type":"MODIFIED","insertions":2,"deletions":-119},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":189,"deletions":-12},{"file":"lib/workflows/provision.js","type":"MODIFIED","insertions":45,"deletions":-81}],"sizeInsertions":236,"sizeDeletions":-212},{"number":"2","revision":"401f3323d384d16e293875d2effe4a97797aff0b","parents":["590a4e09c0c76093f66f4ff69d6b4fd66de09bb6"],"ref":"refs/changes/45/1945/2","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1495055703,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1495055735,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1495145590,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1495145590,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1495070913,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"comments":[{"file":"lib/workflows/job-common.js","line":708,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"perhaps name the function here?"},{"file":"lib/workflows/job-common.js","line":708,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/workflows/job-common.js","line":717,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"perhaps name the function here?"},{"file":"lib/workflows/job-common.js","line":717,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/workflows/job-common.js","line":771,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"perhaps name the function here?"},{"file":"lib/workflows/job-common.js","line":771,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/workflows/job-common.js","line":772,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"perhaps name the function here?"},{"file":"lib/workflows/job-common.js","line":772,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/workflows/job-common.js","line":808,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"perhaps name the function here?"},{"file":"lib/workflows/job-common.js","line":808,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/workflows/provision.js","line":22,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"Does this version not need to be updated?"},{"file":"lib/workflows/provision.js","line":22,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/workflows/provision.js","line":162,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"perhaps name the function here?"},{"file":"lib/workflows/provision.js","line":162,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"},{"file":"lib/workflows/provision.js","line":176,"reviewer":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},"message":"perhaps name the function here?"},{"file":"lib/workflows/provision.js","line":176,"reviewer":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/workflows/add-nics.js","type":"MODIFIED","insertions":2,"deletions":-119},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":185,"deletions":-12},{"file":"lib/workflows/provision.js","type":"MODIFIED","insertions":45,"deletions":-81}],"sizeInsertions":232,"sizeDeletions":-212},{"number":"3","revision":"eb2fa6a9a0d8e339cb4a8f41fac613d6d010e8d9","parents":["590a4e09c0c76093f66f4ff69d6b4fd66de09bb6"],"ref":"refs/changes/45/1945/3","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1495217275,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1495217307,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1495747777,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1495747777,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"lib/workflows/add-nics.js","type":"MODIFIED","insertions":3,"deletions":-120},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":185,"deletions":-12},{"file":"lib/workflows/provision.js","type":"MODIFIED","insertions":46,"deletions":-82}],"sizeInsertions":234,"sizeDeletions":-214},{"number":"4","revision":"65a88b23ac7722c110fd0c70000afcd823916e2b","parents":["590a4e09c0c76093f66f4ff69d6b4fd66de09bb6"],"ref":"refs/changes/45/1945/4","uploader":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"createdOn":1496337423,"author":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"SUBM","value":"1","grantedOn":1496425660,"by":{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}},{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1495217307,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1495747777,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1495747777,"by":{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"lib/workflows/add-nics.js","type":"MODIFIED","insertions":3,"deletions":-120},{"file":"lib/workflows/job-common.js","type":"MODIFIED","insertions":185,"deletions":-12},{"file":"lib/workflows/provision.js","type":"MODIFIED","insertions":46,"deletions":-82}],"sizeInsertions":234,"sizeDeletions":-214}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},{"name":"Josh Wilsdon","email":"josh@wilsdon.ca","username":"joshwilsdon"},{"name":"Cody Peter Mello","email":"melloc@writev.io","username":"melloc"}]}