From f1bc3d1fa167e69de4adbe3c153032ed7bc79cf1 Mon Sep 17 00:00:00 2001
From: Trent Mick <trentm@gmail.com>
Date: Fri, 14 Dec 2018 16:22:30 -0800
Subject: [PATCH] MANTA-4035 retire propeller

---
 lib/layout.js        | 6 ------
 lib/services.js      | 3 +--
 test/tst.services.js | 3 +--
 3 files changed, 2 insertions(+), 10 deletions(-)

diff --git a/lib/layout.js b/lib/layout.js
index 0f94fcb..e6c2ce2 100644
--- a/lib/layout.js
+++ b/lib/layout.js
@@ -81,12 +81,6 @@ var ML_SERVICES_EXACT = {
 	'jobpuller': 2,
 	'medusa': 2,
 
-	/*
-	 * "propeller" is a testing component not intended for use in production
-	 * environments.
-	 */
-	'propeller': 0,
-
 	/*
 	 * "reshard" is an optional component for systems that are undergoing
 	 * resharding.
diff --git a/lib/services.js b/lib/services.js
index 7369b6d..07b69ef 100644
--- a/lib/services.js
+++ b/lib/services.js
@@ -78,8 +78,7 @@ var mSvcConfigs = {
     'reshard':		{ 'oneach': true,  'probes': true,  'sharded': false },
     'pgstatsmon':	{ 'oneach': true,  'probes': true,  'sharded': false },
     'garbage-collector': { 'oneach': true, 'probes': true,  'sharded': false },
-    'marlin':		{ 'oneach': false, 'probes': false, 'sharded': false },
-    'propeller':	{ 'oneach': true,  'probes': false, 'sharded': false }
+    'marlin':		{ 'oneach': false, 'probes': false, 'sharded': false }
 };
 
 exports.mSvcNames = mSvcNames;
diff --git a/test/tst.services.js b/test/tst.services.js
index e9a66bc..83fd2fe 100644
--- a/test/tst.services.js
+++ b/test/tst.services.js
@@ -38,7 +38,6 @@ var knownServices = [
     'madtom',
     'marlin-dashboard',
     'marlin',
-    'propeller',
     'reshard',
     'pgstatsmon',
     'garbage-collector'
@@ -93,7 +92,7 @@ function main()
 	/*
 	 * Test serviceSupportsProbes().
 	 */
-	assertplus.deepEqual([ 'marlin', 'propeller' ],
+	assertplus.deepEqual([ 'marlin' ],
 	    knownServices.filter(function (svcname) {
 		return (!services.serviceSupportsProbes(svcname));
 	    }));
-- 
2.21.0

