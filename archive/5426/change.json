{"project":"joyent/illumos-extra","branch":"master","id":"I0e7f5fdef2fcc0e18d53f066c7dd3989fa1c6259","number":"5426","subject":"OS-7535 allow platform builds on base-64 image Reviewed by: Robert Mustacchi \u003crm@joyent.com\u003e Reviewed by: Jonathan Perkin \u003cjonathan.perkin@joyent.com\u003e Approved by: Robert Mustacchi \u003crm@joyent.com\u003e","owner":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"url":"https://cr.joyent.us/5426","commitMessage":"OS-7535 allow platform builds on base-64 image\nReviewed by: Robert Mustacchi \u003crm@joyent.com\u003e\nReviewed by: Jonathan Perkin \u003cjonathan.perkin@joyent.com\u003e\nApproved by: Robert Mustacchi \u003crm@joyent.com\u003e\n","createdOn":1548377787,"lastUpdated":1551221157,"open":false,"status":"MERGED","comments":[{"timestamp":1548377787,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Uploaded patch set 1."},{"timestamp":1548379184,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1548468855,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Patch Set 1:\n\n(2 comments)"},{"timestamp":1548469437,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Uploaded patch set 2."},{"timestamp":1548699709,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1549388806,"reviewer":{"name":"Jonathan Perkin","email":"jperkin@joyent.com","username":"jperkin"},"message":"Patch Set 2: Code-Review+1"},{"timestamp":1549437648,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Uploaded patch set 3."},{"timestamp":1549471834,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1549561810,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Patch Set 4: Patch Set 3 was rebased"},{"timestamp":1549647425,"reviewer":{"name":"Jonathan Perkin","email":"jperkin@joyent.com","username":"jperkin"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1549663446,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Patch Set 4: Integration-Approval+1"},{"timestamp":1549939003,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Patch Set 5: Patch Set 4 was rebased"},{"timestamp":1551221045,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Patch Set 6: Patch Set 5 was rebased"},{"timestamp":1551221143,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Patch Set 7: Commit message was updated."},{"timestamp":1551221157,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Bryan Cantrill"}],"currentPatchSet":{"number":"7","revision":"e21c9c07ab9f25ec203c5a47a12316a46ca835b7","parents":["89c706cd978c26eafee779870d7b0a0619d14b53"],"ref":"refs/changes/26/5426/7","uploader":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"createdOn":1551221143,"author":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549471834,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549647425,"by":{"name":"Jonathan Perkin","email":"jperkin@joyent.com","username":"jperkin"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1549663446,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1551221157,"by":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile.gcc","type":"MODIFIED","insertions":6,"deletions":0},{"file":"binutils/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"node.js/Makefile","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":11,"sizeDeletions":-2},"patchSets":[{"number":"1","revision":"0411acd121b006263c468902f609fd02d9379b36","parents":["dd6ef68e037e061887ffee892e6fae7aa1889ce2"],"ref":"refs/changes/26/5426/1","uploader":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"createdOn":1548377787,"author":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"isDraft":false,"kind":"REWORK","comments":[{"file":"Makefile.gcc","line":31,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"I think it\u0027s worth a comment that we need to explicitly pass enable-bootstrap because we may be building a compiler that\u0027s targeting a different tuple than gcc things we are on base-64. At least, if my assumption is correct that the base64 default compiler is a different tuple, it opts not to use the bootstrap anymore, which is why we previously were seeing issues."},{"file":"Makefile.gcc","line":31,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"Comment sounds great; need to talk to Jonathan Perkin about this."},{"file":"node.js/Makefile","line":36,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"Any particular reason the spacing changed on this?"},{"file":"node.js/Makefile","line":36,"reviewer":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"message":"I think jlevon was just making it consistent with the -fno-delete-null-pointer-checks, below."},{"file":"node.js/Makefile","line":36,"reviewer":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},"message":"OK, fair enough. I guess everything\u0027s inconsistent here, so it doesn\u0027t matter too much. Just was surprised to see it change."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile.gcc","type":"MODIFIED","insertions":3,"deletions":0},{"file":"binutils/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"node.js/Makefile","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":8,"sizeDeletions":-2},{"number":"2","revision":"7236307304ea42ae43ea8e56f140c5d08dd856af","parents":["dd6ef68e037e061887ffee892e6fae7aa1889ce2"],"ref":"refs/changes/26/5426/2","uploader":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"createdOn":1548469437,"author":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549388806,"by":{"name":"Jonathan Perkin","email":"jperkin@joyent.com","username":"jperkin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile.gcc","type":"MODIFIED","insertions":3,"deletions":0},{"file":"binutils/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"binutils/patches/sigsetmask.patch","type":"ADDED","insertions":31,"deletions":0},{"file":"node.js/Makefile","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":39,"sizeDeletions":-2},{"number":"3","revision":"0e7f5fdef2fcc0e18d53f066c7dd3989fa1c6259","parents":["dd6ef68e037e061887ffee892e6fae7aa1889ce2"],"ref":"refs/changes/26/5426/3","uploader":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"createdOn":1549437648,"author":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549471834,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile.gcc","type":"MODIFIED","insertions":6,"deletions":0},{"file":"binutils/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"node.js/Makefile","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":11,"sizeDeletions":-2},{"number":"4","revision":"2f3fe8a76e2c8f294edd4b31855ca0987b21e1ff","parents":["85469a6dd5e086e1b9d06235abb8419e15c0c757"],"ref":"refs/changes/26/5426/4","uploader":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"createdOn":1549561810,"author":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549471834,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1549663446,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549647425,"by":{"name":"Jonathan Perkin","email":"jperkin@joyent.com","username":"jperkin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile.gcc","type":"MODIFIED","insertions":6,"deletions":0},{"file":"binutils/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"node.js/Makefile","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":11,"sizeDeletions":-2},{"number":"5","revision":"bd5b302115acc7bf0c4f241d97192bba2dbda491","parents":["fd764a5dcf4864eccd7f6e37350d2d461badbf6f"],"ref":"refs/changes/26/5426/5","uploader":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"createdOn":1549939003,"author":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549471834,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1549663446,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549647425,"by":{"name":"Jonathan Perkin","email":"jperkin@joyent.com","username":"jperkin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile.gcc","type":"MODIFIED","insertions":6,"deletions":0},{"file":"binutils/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"node.js/Makefile","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":11,"sizeDeletions":-2},{"number":"6","revision":"0840332d22d015cc70c907077c3608d956a34fd1","parents":["89c706cd978c26eafee779870d7b0a0619d14b53"],"ref":"refs/changes/26/5426/6","uploader":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"createdOn":1551221045,"author":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549471834,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1549663446,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549647425,"by":{"name":"Jonathan Perkin","email":"jperkin@joyent.com","username":"jperkin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"Makefile.gcc","type":"MODIFIED","insertions":6,"deletions":0},{"file":"binutils/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"node.js/Makefile","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":11,"sizeDeletions":-2},{"number":"7","revision":"e21c9c07ab9f25ec203c5a47a12316a46ca835b7","parents":["89c706cd978c26eafee779870d7b0a0619d14b53"],"ref":"refs/changes/26/5426/7","uploader":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"createdOn":1551221143,"author":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549471834,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1549663446,"by":{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"}},{"type":"SUBM","value":"1","grantedOn":1551221157,"by":{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1549647425,"by":{"name":"Jonathan Perkin","email":"jperkin@joyent.com","username":"jperkin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"Makefile.gcc","type":"MODIFIED","insertions":6,"deletions":0},{"file":"binutils/Makefile","type":"MODIFIED","insertions":2,"deletions":0},{"file":"node.js/Makefile","type":"MODIFIED","insertions":3,"deletions":-2}],"sizeInsertions":11,"sizeDeletions":-2}],"allReviewers":[{"name":"Jonathan Perkin","email":"jperkin@joyent.com","username":"jperkin"},{"name":"Robert Mustacchi","email":"rm+illumos@fingolfin.org","username":"rmustacc"},{"name":"Bryan Cantrill","email":"bryan@joyent.com","username":"bcantrill"}]}