{"project":"joyent/smartos-live","branch":"master","id":"I5f991b1a8a983119c295d2ae884d33f42df8470b","number":"4872","subject":"TRITON-243 Change to using refquota instead of quota for zoneroots of bhyve VMs Reviewed by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e Reviewed by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e Reviewed by: Dave Eddy \u003cdave.eddy@joyent.com\u003e Approved by: Mike Gerdts \u003c","owner":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"url":"https://cr.joyent.us/4872","commitMessage":"TRITON-243 Change to using refquota instead of quota for zoneroots of bhyve VMs\nReviewed by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e\nReviewed by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e\nReviewed by: Dave Eddy \u003cdave.eddy@joyent.com\u003e\nApproved by: Mike Gerdts \u003cmike.gerdts@joyent.com\u003e\n","createdOn":1537869375,"lastUpdated":1540246626,"open":false,"status":"MERGED","comments":[{"timestamp":1537869375,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 1."},{"timestamp":1537869376,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit a1da145441485c263bc471c8a3832f45013be038\n    \n    rebase and submit to gerrit"},{"timestamp":1537869427,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1537891514,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 2: Patch Set 1 was rebased"},{"timestamp":1537891564,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2:\n\n\"make check\" passed ok"},{"timestamp":1537893939,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 2:\n\n(8 comments)\n\nQuick first pass with some notes before you add tests for this stuff."},{"timestamp":1538171879,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 2:\n\n(4 comments)"},{"timestamp":1538757653,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 3."},{"timestamp":1538757654,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 17f490c9e3e7e2e63f27c916b52a62cb3c0f7bd1\n    \n    feedback fixes\n    \n    commit 1894c2a79b741e870af6737906e10f13369d255d\n    \n    fixes\n    \n    commit ffd7e1d4010054714f8f80ebda3eb47ab9148281\n    \n    rebase and submit to gerrit"},{"timestamp":1538757707,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1538757761,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 2:\n\n(11 comments)"},{"timestamp":1538759210,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1538760545,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 4."},{"timestamp":1538760546,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit b7abae3d059af833737df891d0ddcf5979970ae8\n    \n    make sure we use \u0027g\u0027 to denote quota being in gigabytes if not overridden"},{"timestamp":1538760596,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1538760649,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 5."},{"timestamp":1538760650,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 5:\n\nNew commits:\n    \n    commit 6d38deab6bfc18956b246546aeb9308ade515630\n    \n    make sure quota is compared as number of bytes"},{"timestamp":1538760691,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing-1\n\n\"make check\" exited with status 2\n\n /tmp/repo/src/vm/tests/test-update.js\n /tmp/repo/src/vm/tests/test-vrrp-nics.js\n /tmp/repo/src/vm/tests/test-vminfod-zonewatcher.js\n /tmp/repo/src/vm/tests/test-vminfod-zonewatcher-overflow.js\n /tmp/repo/src/vm/tests/test-vminfod-zpoolwatcher.js\n /tmp/repo/src/vm/lib/metadata/agent.js\n /tmp/repo/src/vm/lib/metadata/common.js\n /tmp/repo/src/vm/lib/metadata/crc32.js\n /tmp/repo/src/disklayout.js\n /tmp/repo/src/mkzpool.js\n /tmp/repo/src/ntp_config.js\n /tmp/repo/src/node_modules/disklayout.js\n \n 0 error(s), 0 warnings(s)\n \n \u003d\u003d\u003e Running jsstyle...\n (for file in filewait.js node_modules/{system,onlyif,net-boot-config}.js net-boot-config vm/sbin/*.js vm/node_modules/diff.js vm/node_modules/dladm.js vm/node_modules/expander.js vm/node_modules/fswatcher.js vm/node_modules/hrtime.js vm/node_modules/ip.js vm/node_modules/nic.js vm/node_modules/proptable.js vm/node_modules/utils.js vm/node_modules/VM.js vm/node_modules/qmp.js vm/node_modules/queue.js vm/node_modules/openonerrlogger.js vm/node_modules/vmload/*.js vm/node_modules/vminfod/*.js vm/node_modules/sysevent-stream.js vm/node_modules/zonecfg.js vm/node_modules/zoneevent.js img/lib/*.js img/sbin/imgadm vm/common/nictag.js vm/tests/common.js vm/tests/test-alias.js vm/tests/test-cleanup-on-failure.js vm/tests/test-create-filesystems.js vm/tests/test-create.js vm/tests/test-defaults.js vm/tests/test-docker.js vm/tests/test-fswatcher.js vm/tests/test-hrtime.js vm/tests/test-indestructible.js vm/tests/test-internal_metadata_namespaces.js vm/tests/test-lastexited.js vm/tests/test-openonerrlogger.js vm/tests/test-queue.js vm/tests/test-reboot.js vm/tests/test-reprovision.js vm/tests/test-send-recv.js vm/tests/test-snapshots.js vm/tests/test-spoof-opts.js vm/tests/test-tmpfs.js vm/tests/test-update.js vm/tests/test-vrrp-nics.js vm/tests/test-vminfod-zonewatcher.js vm/tests/test-vminfod-zonewatcher-overflow.js vm/tests/test-vminfod-zpoolwatcher.js vm/lib/metadata/*.js; do \\\n \techo /tmp/repo/src/$file; \\\n \t/tmp/repo/src/../tools/jsstyle/jsstyle -o indent\u003d4,strict-indent\u003d1,doxygen,unparenthesized-return\u003d0,continuation-at-front\u003d1,leading-right-paren-ok\u003d1 $file; \\\n \t[[ $? \u003d\u003d \"0\" ]] || exit 1; \\\n done)\n /tmp/repo/src/filewait.js\n /tmp/repo/src/node_modules/system.js\n /tmp/repo/src/node_modules/onlyif.js\n /tmp/repo/src/node_modules/net-boot-config.js\n /tmp/repo/src/net-boot-config\n /tmp/repo/src/vm/sbin/add-userscript.js\n /tmp/repo/src/vm/sbin/metadata.js\n /tmp/repo/src/vm/sbin/vmadm.js\n /tmp/repo/src/vm/sbin/vmadmd.js\n /tmp/repo/src/vm/sbin/vmdf.js\n /tmp/repo/src/vm/sbin/vminfo.js\n /tmp/repo/src/vm/sbin/vminfod.js\n /tmp/repo/src/vm/node_modules/diff.js\n /tmp/repo/src/vm/node_modules/dladm.js\n /tmp/repo/src/vm/node_modules/expander.js\n /tmp/repo/src/vm/node_modules/fswatcher.js\n /tmp/repo/src/vm/node_modules/hrtime.js\n /tmp/repo/src/vm/node_modules/ip.js\n /tmp/repo/src/vm/node_modules/nic.js\n /tmp/repo/src/vm/node_modules/proptable.js\n /tmp/repo/src/vm/node_modules/utils.js\n /tmp/repo/src/vm/node_modules/VM.js\n vm/node_modules/VM.js: 1541: line \u003e 80 characters\n Makefile:457: recipe for target \u0027check\u0027 failed\n make[1]: *** [check] Error 1\n make[1]: Leaving directory \u0027/tmp/repo/src\u0027\n Makefile:364: recipe for target \u0027check\u0027 failed\n gmake: *** [check] Error 2"},{"timestamp":1538760765,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 6."},{"timestamp":1538760766,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 6:\n\nNew commits:\n    \n    commit a9b4f9bf5e6fd64b541d6633a8c8c3167ea04272\n    \n    fix make check"},{"timestamp":1538760817,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 6: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539018359,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 6: Code-Review+1"},{"timestamp":1539123547,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 6: -Code-Review\n\n(2 comments)\n\nThe vmadm man page also needs an update to the quota section.  Something like:\n\n           This sets a quota on the zone filesystem. For OS VMs, this value is the\n           space actually visible/usable in the guest. For kvm and bhyve VMs, this\n           value is the quota (kvm) or refquota (bhyve) for the Zone containing the\n           VM, which is not directly available to users."},{"timestamp":1539207105,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 7."},{"timestamp":1539207110,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 7:\n\nNew commits:\n    \n    commit 08469d8891636165e16096316d946163a3583ca9\n    \n    Bump zoneroot quota to 1g"},{"timestamp":1539207159,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 7: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539703930,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 8."},{"timestamp":1539703932,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 8:\n\nNew commits:\n    \n    commit aeb2f1036fbad0b654fc78e3a6dabb01d02a9f99\n    \n    wip\n    \n    commit a86a61dc9c7352c083f3a1eb806104b204e45fb2\n    \n    Bump zoneroot quota to 1g\n    \n    commit 95a15f4df45074103f7f6ed830e3e07d71ad6a0d\n    \n    fix make check\n    \n    commit ee3320a32e19952c266ee5d9758718bdb5c34d66\n    \n    make sure quota is compared as number of bytes\n    \n    commit 9554d4fa66f7eea3cae3474b4efb839dc0deebb5\n    \n    make sure we use \u0027g\u0027 to denote quota being in gigabytes if not overridden\n    \n    commit 2086ca08c4e4a3b47476ad5dfa6f702135f9ac51\n    \n    feedback fixes\n    \n    commit 1b6d28fcc8482f6972b533d43392b92b77abc54d\n    \n    fixes\n    \n    commit 68504a4523db1feea9cffbd793f672d71f32dda9\n    \n    rebase and submit to gerrit"},{"timestamp":1539703982,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 8: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539708496,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 8:\n\nCode seems fine, but holding +1 pending resolution of poor interaction with vminfod discussed during the call today."},{"timestamp":1539712525,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 9."},{"timestamp":1539712527,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 9:\n\nNew commits:\n    \n    commit 502ef1e33ae9051fa73b0f431758a7426919a928\n    \n    missing chunk which overrides auto values"},{"timestamp":1539712570,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 9: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539714288,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 10."},{"timestamp":1539714290,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 10:\n\nNew commits:\n    \n    commit aeb2f1036fbad0b654fc78e3a6dabb01d02a9f99\n    \n    wip\n    \n    commit a86a61dc9c7352c083f3a1eb806104b204e45fb2\n    \n    Bump zoneroot quota to 1g\n    \n    commit 95a15f4df45074103f7f6ed830e3e07d71ad6a0d\n    \n    fix make check\n    \n    commit ee3320a32e19952c266ee5d9758718bdb5c34d66\n    \n    make sure quota is compared as number of bytes\n    \n    commit 9554d4fa66f7eea3cae3474b4efb839dc0deebb5\n    \n    make sure we use \u0027g\u0027 to denote quota being in gigabytes if not overridden\n    \n    commit 2086ca08c4e4a3b47476ad5dfa6f702135f9ac51\n    \n    feedback fixes\n    \n    commit 1b6d28fcc8482f6972b533d43392b92b77abc54d\n    \n    fixes\n    \n    commit 68504a4523db1feea9cffbd793f672d71f32dda9\n    \n    rebase and submit to gerrit"},{"timestamp":1539714335,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 10:\n\n\"make check\" passed ok"},{"timestamp":1539718101,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 10:\n\n(2 comments)"},{"timestamp":1539720027,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 11."},{"timestamp":1539720029,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 11:\n\nNew commits:\n    \n    commit 7752eadcabf14b40db93be59cede8f39ee1ca144\n    \n    Use the greater of DEFAULT_BHYVE_QUOTA and opta.quota, cancelFn() when we hit errors, propagate those errors to client when they occur"},{"timestamp":1539720072,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 11: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539720684,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 12."},{"timestamp":1539720686,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 12:\n\nNew commits:\n    \n    commit 2bdb6debf2fa05fdbfb70ad2994b71bc56519877\n    \n    correct error messages"},{"timestamp":1539720722,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 12: CI-Testing-1\n\n\"make check\" exited with status 2\n\n /tmp/repo/src/vm/tests/test-update.js\n /tmp/repo/src/vm/tests/test-vrrp-nics.js\n /tmp/repo/src/vm/tests/test-vminfod-zonewatcher.js\n /tmp/repo/src/vm/tests/test-vminfod-zonewatcher-overflow.js\n /tmp/repo/src/vm/tests/test-vminfod-zpoolwatcher.js\n /tmp/repo/src/vm/lib/metadata/agent.js\n /tmp/repo/src/vm/lib/metadata/common.js\n /tmp/repo/src/vm/lib/metadata/crc32.js\n /tmp/repo/src/disklayout.js\n /tmp/repo/src/mkzpool.js\n /tmp/repo/src/ntp_config.js\n /tmp/repo/src/node_modules/disklayout.js\n \n 0 error(s), 0 warnings(s)\n \n \u003d\u003d\u003e Running jsstyle...\n (for file in filewait.js node_modules/{system,onlyif,net-boot-config}.js net-boot-config vm/sbin/*.js vm/node_modules/diff.js vm/node_modules/dladm.js vm/node_modules/expander.js vm/node_modules/fswatcher.js vm/node_modules/hrtime.js vm/node_modules/ip.js vm/node_modules/nic.js vm/node_modules/proptable.js vm/node_modules/utils.js vm/node_modules/VM.js vm/node_modules/qmp.js vm/node_modules/queue.js vm/node_modules/openonerrlogger.js vm/node_modules/vmload/*.js vm/node_modules/vminfod/*.js vm/node_modules/sysevent-stream.js vm/node_modules/zonecfg.js vm/node_modules/zoneevent.js img/lib/*.js img/sbin/imgadm vm/common/nictag.js vm/tests/common.js vm/tests/test-alias.js vm/tests/test-cleanup-on-failure.js vm/tests/test-create-filesystems.js vm/tests/test-create.js vm/tests/test-defaults.js vm/tests/test-docker.js vm/tests/test-fswatcher.js vm/tests/test-hrtime.js vm/tests/test-indestructible.js vm/tests/test-internal_metadata_namespaces.js vm/tests/test-lastexited.js vm/tests/test-openonerrlogger.js vm/tests/test-queue.js vm/tests/test-reboot.js vm/tests/test-reprovision.js vm/tests/test-send-recv.js vm/tests/test-snapshots.js vm/tests/test-spoof-opts.js vm/tests/test-tmpfs.js vm/tests/test-update.js vm/tests/test-vrrp-nics.js vm/tests/test-vminfod-zonewatcher.js vm/tests/test-vminfod-zonewatcher-overflow.js vm/tests/test-vminfod-zpoolwatcher.js vm/lib/metadata/*.js; do \\\n \techo /tmp/repo/src/$file; \\\n \t/tmp/repo/src/../tools/jsstyle/jsstyle -o indent\u003d4,strict-indent\u003d1,doxygen,unparenthesized-return\u003d0,continuation-at-front\u003d1,leading-right-paren-ok\u003d1 $file; \\\n \t[[ $? \u003d\u003d \"0\" ]] || exit 1; \\\n done)\n /tmp/repo/src/filewait.js\n /tmp/repo/src/node_modules/system.js\n /tmp/repo/src/node_modules/onlyif.js\n /tmp/repo/src/node_modules/net-boot-config.js\n /tmp/repo/src/net-boot-config\n /tmp/repo/src/vm/sbin/add-userscript.js\n /tmp/repo/src/vm/sbin/metadata.js\n /tmp/repo/src/vm/sbin/vmadm.js\n /tmp/repo/src/vm/sbin/vmadmd.js\n /tmp/repo/src/vm/sbin/vmdf.js\n /tmp/repo/src/vm/sbin/vminfo.js\n /tmp/repo/src/vm/sbin/vminfod.js\n /tmp/repo/src/vm/node_modules/diff.js\n /tmp/repo/src/vm/node_modules/dladm.js\n /tmp/repo/src/vm/node_modules/expander.js\n /tmp/repo/src/vm/node_modules/fswatcher.js\n /tmp/repo/src/vm/node_modules/hrtime.js\n /tmp/repo/src/vm/node_modules/ip.js\n /tmp/repo/src/vm/node_modules/nic.js\n /tmp/repo/src/vm/node_modules/proptable.js\n /tmp/repo/src/vm/node_modules/utils.js\n /tmp/repo/src/vm/node_modules/VM.js\n vm/node_modules/VM.js: 1475: line \u003e 80 characters\n Makefile:457: recipe for target \u0027check\u0027 failed\n make[1]: *** [check] Error 1\n make[1]: Leaving directory \u0027/tmp/repo/src\u0027\n Makefile:364: recipe for target \u0027check\u0027 failed\n gmake: *** [check] Error 2"},{"timestamp":1539720728,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 10:\n\n(2 comments)"},{"timestamp":1539720771,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 13."},{"timestamp":1539720773,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 13:\n\nNew commits:\n    \n    commit 6d8adffd028d743adc872f49d5a7ac214e43618b\n    \n    fix make check"},{"timestamp":1539720817,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 13: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539722909,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 11:\n\n(2 comments)\n\nGetting this right has proven to be rather tricky.  We should probably have some tests to be sure that it doesn\u0027t rot."},{"timestamp":1539724184,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 14."},{"timestamp":1539724191,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 14:\n\nNew commits:\n    \n    commit 5ebc0f43692af7fcf61ebacaf362cb63af900023\n    \n    drop refreservation on zoneroot"},{"timestamp":1539724232,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 14: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539724924,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 15."},{"timestamp":1539724926,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 15:\n\nNew commits:\n    \n    commit ff10bd1dce832574ccb2a83248260ddd977eac79\n    \n    tweak properties"},{"timestamp":1539724972,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 15: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539725003,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 16."},{"timestamp":1539725005,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 16:\n\nNew commits:\n    \n    commit 793deb57d90c375513ac49b3cf7ace8bc21ddd9b\n    \n    update"},{"timestamp":1539725050,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 16: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539820063,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 17."},{"timestamp":1539820065,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 17:\n\nNew commits:\n    \n    commit 13f789501564b50aae5296ce775070a4050412f5\n    \n    wip quota tests for bhyve"},{"timestamp":1539820109,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 17: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539823016,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 18."},{"timestamp":1539823018,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 18:\n\nNew commits:\n    \n    commit 02eed43809a4444a32c7bf931a2872e3fd058dfd\n    \n    make sure that quota-related properties are set at vm create time too"},{"timestamp":1539823054,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 18: CI-Testing-1\n\n\"make check\" exited with status 2\n\n /tmp/repo/src/vm/tests/test-update.js\n /tmp/repo/src/vm/tests/test-vrrp-nics.js\n /tmp/repo/src/vm/tests/test-vminfod-zonewatcher.js\n /tmp/repo/src/vm/tests/test-vminfod-zonewatcher-overflow.js\n /tmp/repo/src/vm/tests/test-vminfod-zpoolwatcher.js\n /tmp/repo/src/vm/lib/metadata/agent.js\n /tmp/repo/src/vm/lib/metadata/common.js\n /tmp/repo/src/vm/lib/metadata/crc32.js\n /tmp/repo/src/disklayout.js\n /tmp/repo/src/mkzpool.js\n /tmp/repo/src/ntp_config.js\n /tmp/repo/src/node_modules/disklayout.js\n \n 0 error(s), 0 warnings(s)\n \n \u003d\u003d\u003e Running jsstyle...\n (for file in filewait.js node_modules/{system,onlyif,net-boot-config}.js net-boot-config vm/sbin/*.js vm/node_modules/diff.js vm/node_modules/dladm.js vm/node_modules/expander.js vm/node_modules/fswatcher.js vm/node_modules/hrtime.js vm/node_modules/ip.js vm/node_modules/nic.js vm/node_modules/proptable.js vm/node_modules/utils.js vm/node_modules/VM.js vm/node_modules/qmp.js vm/node_modules/queue.js vm/node_modules/openonerrlogger.js vm/node_modules/vmload/*.js vm/node_modules/vminfod/*.js vm/node_modules/sysevent-stream.js vm/node_modules/zonecfg.js vm/node_modules/zoneevent.js img/lib/*.js img/sbin/imgadm vm/common/nictag.js vm/tests/common.js vm/tests/test-alias.js vm/tests/test-cleanup-on-failure.js vm/tests/test-create-filesystems.js vm/tests/test-create.js vm/tests/test-defaults.js vm/tests/test-docker.js vm/tests/test-fswatcher.js vm/tests/test-hrtime.js vm/tests/test-indestructible.js vm/tests/test-internal_metadata_namespaces.js vm/tests/test-lastexited.js vm/tests/test-openonerrlogger.js vm/tests/test-queue.js vm/tests/test-quota.js vm/tests/test-reboot.js vm/tests/test-reprovision.js vm/tests/test-send-recv.js vm/tests/test-snapshots.js vm/tests/test-spoof-opts.js vm/tests/test-tmpfs.js vm/tests/test-update.js vm/tests/test-vrrp-nics.js vm/tests/test-vminfod-zonewatcher.js vm/tests/test-vminfod-zonewatcher-overflow.js vm/tests/test-vminfod-zpoolwatcher.js vm/lib/metadata/*.js; do \\\n \techo /tmp/repo/src/$file; \\\n \t/tmp/repo/src/../tools/jsstyle/jsstyle -o indent\u003d4,strict-indent\u003d1,doxygen,unparenthesized-return\u003d0,continuation-at-front\u003d1,leading-right-paren-ok\u003d1 $file; \\\n \t[[ $? \u003d\u003d \"0\" ]] || exit 1; \\\n done)\n /tmp/repo/src/filewait.js\n /tmp/repo/src/node_modules/system.js\n /tmp/repo/src/node_modules/onlyif.js\n /tmp/repo/src/node_modules/net-boot-config.js\n /tmp/repo/src/net-boot-config\n /tmp/repo/src/vm/sbin/add-userscript.js\n /tmp/repo/src/vm/sbin/metadata.js\n /tmp/repo/src/vm/sbin/vmadm.js\n /tmp/repo/src/vm/sbin/vmadmd.js\n /tmp/repo/src/vm/sbin/vmdf.js\n /tmp/repo/src/vm/sbin/vminfo.js\n /tmp/repo/src/vm/sbin/vminfod.js\n /tmp/repo/src/vm/node_modules/diff.js\n /tmp/repo/src/vm/node_modules/dladm.js\n /tmp/repo/src/vm/node_modules/expander.js\n /tmp/repo/src/vm/node_modules/fswatcher.js\n /tmp/repo/src/vm/node_modules/hrtime.js\n /tmp/repo/src/vm/node_modules/ip.js\n /tmp/repo/src/vm/node_modules/nic.js\n /tmp/repo/src/vm/node_modules/proptable.js\n /tmp/repo/src/vm/node_modules/utils.js\n /tmp/repo/src/vm/node_modules/VM.js\n vm/node_modules/VM.js: 3621: missing blank after start comment\n Makefile:458: recipe for target \u0027check\u0027 failed\n make[1]: *** [check] Error 1\n make[1]: Leaving directory \u0027/tmp/repo/src\u0027\n Makefile:364: recipe for target \u0027check\u0027 failed\n gmake: *** [check] Error 2"},{"timestamp":1539871764,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 18:\n\n(4 comments)"},{"timestamp":1539883291,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 18:\n\n(1 comment)"},{"timestamp":1539886202,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 19."},{"timestamp":1539886205,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 19:\n\nNew commits:\n    \n    commit 4c02ef4888cb15c11598138dc5e90c537dbf60b7\n    \n    update with mike\u0027s feedback"},{"timestamp":1539886249,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 19: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539887453,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 18:\n\n(2 comments)"},{"timestamp":1539893377,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 19: Code-Review+1"},{"timestamp":1539895313,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 20: Patch Set 19 was rebased"},{"timestamp":1539895361,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 20:\n\n\"make check\" passed ok"},{"timestamp":1539901307,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 20:\n\n(8 comments)"},{"timestamp":1539905906,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 21: Patch Set 20 was rebased"},{"timestamp":1539905955,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 21:\n\n\"make check\" passed ok"},{"timestamp":1539984791,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 22."},{"timestamp":1539984792,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 22:\n\nNew commits:\n    \n    commit 6f5b1b80f92def843e8346053c2a552efa022790\n    \n    apply feedback"},{"timestamp":1539984838,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 22: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1539985427,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 22: Code-Review+1"},{"timestamp":1539987731,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 20:\n\n(8 comments)"},{"timestamp":1539987838,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 23: Patch Set 22 was rebased"},{"timestamp":1539988116,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 23:\n\n\"make check\" passed ok"},{"timestamp":1540220343,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 23: Code-Review+1\n\nLooks Ok. Are tests passing at this point? Anything else we\u0027re waiting for?"},{"timestamp":1540225040,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 23:\n\nTests all pass:\n\n    #  TEST COMPLETE IN 2462 SECONDS, SUMMARY:\n    #\n    # PASS: 4207 / 4207"},{"timestamp":1540225199,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"Patch Set 23: Code-Review+1\n\nCode looks good to me!"},{"timestamp":1540225867,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Patch Set 23: Integration-Approval+1"},{"timestamp":1540246568,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Uploaded patch set 24."},{"timestamp":1540246581,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Patch Set 25: Patch Set 24 was rebased"},{"timestamp":1540246586,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Orlando Vazquez"},{"timestamp":1540246615,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 24:\n\n\"make check\" passed ok"},{"timestamp":1540246626,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 25:\n\n\"make check\" passed ok"}],"currentPatchSet":{"number":"25","revision":"e352e7a16607cd868650f7593022e99509998f22","parents":["f85405d733dd4f1cf05879eab3b852ce81eab3ea"],"ref":"refs/changes/72/4872/25","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1540246581,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539984838,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539985427,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1540220343,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1540225199,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1540225867,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"SUBM","value":"1","grantedOn":1540246586,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/common/vmtest.js","type":"MODIFIED","insertions":26,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":188,"deletions":-14},{"file":"src/vm/tests/test-quota.js","type":"MODIFIED","insertions":312,"deletions":-54}],"sizeInsertions":530,"sizeDeletions":-73},"patchSets":[{"number":"1","revision":"22c48fce8f528eba50d0141f9533a04acc4eaf09","parents":["0be367943364272ecd5e4b1bfdf195d6eeca229c"],"ref":"refs/changes/72/4872/1","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1537869375,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1537869427,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":200,"deletions":-4}],"sizeInsertions":200,"sizeDeletions":-4},{"number":"2","revision":"9e4edd458a0a54ce97f6dccb43275551a2419ff7","parents":["026b95145e415dab2a0dd82deb2cb852a26df157"],"ref":"refs/changes/72/4872/2","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1537891514,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1537869427,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/vm/node_modules/VM.js","line":1442,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"For the same price I would also assert for a callback function here."},{"file":"src/vm/node_modules/VM.js","line":1442,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Done"},{"file":"src/vm/node_modules/VM.js","line":1479,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"We don\u0027t really care about the value of refreservation at this point - we just want a list of volumes.  That comes a bit more efficiently with:\n\nzfs list -Hrt volume -o name \u003cdataset\u003e\n\nThen at line 1489, datasets can become a list by splitting the output of the zfs command on newlines."},{"file":"src/vm/node_modules/VM.js","line":1479,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Good call, done!"},{"file":"src/vm/node_modules/VM.js","line":1506,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Do we need this return?"},{"file":"src/vm/node_modules/VM.js","line":1506,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Done"},{"file":"src/vm/node_modules/VM.js","line":1513,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Why not just `next` right after the comma?"},{"file":"src/vm/node_modules/VM.js","line":1513,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Done"},{"file":"src/vm/node_modules/VM.js","line":1521,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"With\n\nzfs list -Hpr -t volume -o refreservation \u003cdataset\u003e\n\nyou will get a list of refreservations one per line.  The sum can be calculated with something like:\n\nsum \u003d fds.stdout.split(\u0027\\n\u0027).reduce(function(acc, cur) { return parseInt(acc) + parseInt(cur) });\n\nThis, combined with my comment above would get rid of the need for parseZfsGet()."},{"file":"src/vm/node_modules/VM.js","line":1521,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Nice, ever better. Done."},{"file":"src/vm/node_modules/VM.js","line":1560,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Don\u0027t need this return"},{"file":"src/vm/node_modules/VM.js","line":1560,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Done"},{"file":"src/vm/node_modules/VM.js","line":1565,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Ditto, if you\u0027re doing nothing with the error, it doesn\u0027t has any advantage to declare a new function to just call the same callback that, otherwise, would be called by the `vasync.waterfall` function"},{"file":"src/vm/node_modules/VM.js","line":1565,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Done"},{"file":"src/vm/node_modules/VM.js","line":1569,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Couple test cases for this one would be really nice!"},{"file":"src/vm/node_modules/VM.js","line":1569,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Thanks to Mike\u0027s feedback I\u0027ll probably get rid of this one function."},{"file":"src/vm/node_modules/VM.js","line":1595,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Ditto! A little test case with some examples would be great."},{"file":"src/vm/node_modules/VM.js","line":1595,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"I decided I didn\u0027t need this function, after all."},{"file":"src/vm/node_modules/VM.js","line":1604,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"But what if the input is \"10,000\"?  Won\u0027t it return 10?  Maybe better as:\n\nif (\u0027\u0027 + parseInt(input) \u003d\u003d input)"},{"file":"src/vm/node_modules/VM.js","line":1604,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"I decided I didn\u0027t need this function, after all."},{"file":"src/vm/node_modules/VM.js","line":1610,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Should be more careful.  If we parse the int, convert it to a string, then chop that string off from the beginning of input, we should have whatever is left.\n\nOnly if that remainder is in multipliers should we use it.  Perhaps we should do case conversion as well."},{"file":"src/vm/node_modules/VM.js","line":1611,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Aren\u0027t linters complaining about no whitespace before and after +/- signs?"},{"file":"src/vm/node_modules/VM.js","line":1611,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"`make check` seems to pass, I can fix it though."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":200,"deletions":-4}],"sizeInsertions":200,"sizeDeletions":-4},{"number":"3","revision":"1e7e72c9e8ba314236d88466ada8611b95a68d96","parents":["026b95145e415dab2a0dd82deb2cb852a26df157"],"ref":"refs/changes/72/4872/3","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1538757653,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1538757707,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1538759210,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":149,"deletions":-4}],"sizeInsertions":149,"sizeDeletions":-4},{"number":"4","revision":"db9e1c098beb3c5fb71fb560d4bb35c3d170c3e5","parents":["026b95145e415dab2a0dd82deb2cb852a26df157"],"ref":"refs/changes/72/4872/4","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1538760545,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1538760596,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":149,"deletions":-4}],"sizeInsertions":149,"sizeDeletions":-4},{"number":"5","revision":"b9f8a665e21bc42ebb402bc220b1752b9b7d9be7","parents":["026b95145e415dab2a0dd82deb2cb852a26df157"],"ref":"refs/changes/72/4872/5","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1538760649,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1538760691,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":149,"deletions":-4}],"sizeInsertions":149,"sizeDeletions":-4},{"number":"6","revision":"8f24fcb01447b7d786a3b11e9ee516e81fb456b6","parents":["026b95145e415dab2a0dd82deb2cb852a26df157"],"ref":"refs/changes/72/4872/6","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1538760765,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1538760817,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/vm/node_modules/VM.js","line":143,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"1 GiB so that it doesn\u0027t cause problems with fractional GiB of quota."},{"file":"src/vm/node_modules/VM.js","line":1428,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"this should be updated to match a change I just made in rfd 148."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":150,"deletions":-4}],"sizeInsertions":150,"sizeDeletions":-4},{"number":"7","revision":"43870b620da6931281667df827b126105b0f5f1e","parents":["026b95145e415dab2a0dd82deb2cb852a26df157"],"ref":"refs/changes/72/4872/7","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1539207105,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539207159,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":150,"deletions":-4}],"sizeInsertions":150,"sizeDeletions":-4},{"number":"8","revision":"34fa4e0a402ac5b855e8cecbea00523170ef5e0d","parents":["d98afb34020ba6ce3dd4eaf977027322d5d945a7"],"ref":"refs/changes/72/4872/8","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1539703930,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539703982,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":155,"deletions":-4}],"sizeInsertions":158,"sizeDeletions":-9},{"number":"9","revision":"8678341e68076a4edb63b335ff112fb2e3a63bd6","parents":["d98afb34020ba6ce3dd4eaf977027322d5d945a7"],"ref":"refs/changes/72/4872/9","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1539712525,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539712570,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":196,"deletions":-4}],"sizeInsertions":199,"sizeDeletions":-9},{"number":"10","revision":"ffcd023cb662aee9212e4c6e75a482c618709317","parents":["d98afb34020ba6ce3dd4eaf977027322d5d945a7"],"ref":"refs/changes/72/4872/10","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1539714288,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539703982,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/vm/node_modules/VM.js","line":1462,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"These should consider opts.quota, perhaps using DEFAULT_BHYVE_QUOTA as a min value."},{"file":"src/vm/node_modules/VM.js","line":1462,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Done"},{"file":"src/vm/node_modules/VM.js","line":1467,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"refquota, refreservation"},{"file":"src/vm/node_modules/VM.js","line":1467,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":155,"deletions":-4}],"sizeInsertions":158,"sizeDeletions":-9},{"number":"11","revision":"30b4a2b04fd667092e35252fc144fea241d4f407","parents":["d98afb34020ba6ce3dd4eaf977027322d5d945a7"],"ref":"refs/changes/72/4872/11","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1539720027,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539720072,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/vm/node_modules/VM.js","line":1451,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"opts.cancelFn?"},{"file":"src/vm/node_modules/VM.js","line":1469,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Per discussion in ~triton-dev, we need to set refreservation after quota (or perhaps at the same time)."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":173,"deletions":-9}],"sizeInsertions":176,"sizeDeletions":-14},{"number":"12","revision":"d29872bd72a0c2947b27afb4727fc1e3790d0721","parents":["d98afb34020ba6ce3dd4eaf977027322d5d945a7"],"ref":"refs/changes/72/4872/12","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1539720684,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1539720722,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":173,"deletions":-9}],"sizeInsertions":176,"sizeDeletions":-14},{"number":"13","revision":"4c3b5c74e81dd32951c965729de16809568a4de6","parents":["d98afb34020ba6ce3dd4eaf977027322d5d945a7"],"ref":"refs/changes/72/4872/13","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1539720771,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539720817,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":174,"deletions":-9}],"sizeInsertions":177,"sizeDeletions":-14},{"number":"14","revision":"0d19a26155092b527f988850d2c6cfd957195ced","parents":["d98afb34020ba6ce3dd4eaf977027322d5d945a7"],"ref":"refs/changes/72/4872/14","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1539724184,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539724232,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":173,"deletions":-9}],"sizeInsertions":176,"sizeDeletions":-14},{"number":"15","revision":"ee67e827b61facfa6a2b251625678a631a776b9b","parents":["d98afb34020ba6ce3dd4eaf977027322d5d945a7"],"ref":"refs/changes/72/4872/15","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1539724924,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539724972,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":175,"deletions":-9}],"sizeInsertions":178,"sizeDeletions":-14},{"number":"16","revision":"60f46e0903dc51d2bf527c58f4d0a0fac4b84044","parents":["d98afb34020ba6ce3dd4eaf977027322d5d945a7"],"ref":"refs/changes/72/4872/16","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1539725003,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539725050,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":175,"deletions":-9}],"sizeInsertions":178,"sizeDeletions":-14},{"number":"17","revision":"811e7f95ef0e1ea35311018c6f15322318323703","parents":["d98afb34020ba6ce3dd4eaf977027322d5d945a7"],"ref":"refs/changes/72/4872/17","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1539820063,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539820109,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/common/vmtest.js","type":"MODIFIED","insertions":52,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":175,"deletions":-9},{"file":"src/vm/tests/test-quota.js","type":"MODIFIED","insertions":284,"deletions":-55}],"sizeInsertions":515,"sizeDeletions":-69},{"number":"18","revision":"0e7a6cb477a96c0d10870e42dbe1dcac3726c866","parents":["d98afb34020ba6ce3dd4eaf977027322d5d945a7"],"ref":"refs/changes/72/4872/18","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1539823016,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"-1","grantedOn":1539823054,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"src/vm/common/vmtest.js","line":256,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Math.floor() should do the job too.  It is present at least as far back as node 0.6.12."},{"file":"src/vm/common/vmtest.js","line":256,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Done"},{"file":"src/vm/common/vmtest.js","line":260,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"excessive spacing, but that doesn\u0027t really matter if we just use Math.floor()."},{"file":"src/vm/common/vmtest.js","line":265,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Math.floor"},{"file":"src/vm/node_modules/VM.js","line":3621,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"Remove commented code?"},{"file":"src/vm/tests/test-quota.js","line":71,"reviewer":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},"message":"This implies that there will need to be 50+ GiB free in the root pool.  That is 20 base quota + 20 more when doubled during update + 10 GiB image.  I worry this will lead to routine failures when testing in vmware or similarly constrained environments.\n\nI\u0027m not sure what the goal of testing 10, 20, and 1 GiB quota is.  Would it be sufficient to test 10, 5, and 1 or even just 10 and 1?"},{"file":"src/vm/tests/test-quota.js","line":71,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/common/vmtest.js","type":"MODIFIED","insertions":52,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":188,"deletions":-11},{"file":"src/vm/tests/test-quota.js","type":"MODIFIED","insertions":312,"deletions":-54}],"sizeInsertions":556,"sizeDeletions":-70},{"number":"19","revision":"b0d3c1661a58853ed2ee993f6f25293479f783c4","parents":["d98afb34020ba6ce3dd4eaf977027322d5d945a7"],"ref":"refs/changes/72/4872/19","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1539886202,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539886249,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539893377,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/common/vmtest.js","type":"MODIFIED","insertions":41,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":187,"deletions":-11},{"file":"src/vm/tests/test-quota.js","type":"MODIFIED","insertions":307,"deletions":-54}],"sizeInsertions":539,"sizeDeletions":-70},{"number":"20","revision":"1b5fe25a76f6ee9d44ce58c52411df098b7cb0db","parents":["7190e8f7f3f1979a3f4c886a8fc000483b647598"],"ref":"refs/changes/72/4872/20","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1539895313,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539886249,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539893377,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"comments":[{"file":"src/vm/common/vmtest.js","line":89,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"there is common.zfs in src/vm/test/common:\n\nhttps://github.com/joyent/smartos-live/blob/master/src/vm/tests/common.js\n\nYes, it is unfortunate that we have `zfs()` defined so many places with different signatures :(.  i don\u0027t personally have any strong opinions on this."},{"file":"src/vm/common/vmtest.js","line":89,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Done"},{"file":"src/vm/common/vmtest.js","line":265,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"nit: remove commented code"},{"file":"src/vm/common/vmtest.js","line":265,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Done"},{"file":"src/vm/node_modules/VM.js","line":1452,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"since opts.quota is used below, it\u0027s type should probably be more tightly checked here, or casted above if need be."},{"file":"src/vm/node_modules/VM.js","line":1452,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Done"},{"file":"src/vm/node_modules/VM.js","line":1454,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"there is a function defined at the top of VM.js called `noop` that can be used here."},{"file":"src/vm/node_modules/VM.js","line":1454,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Done"},{"file":"src/vm/node_modules/VM.js","line":1500,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"is it possible for this value to be 0? If not, I\u0027d prefer an assert like:\n\n assert(volumes.length \u003e 0, \u0027at least 1 volume must be present\u0027)"},{"file":"src/vm/node_modules/VM.js","line":1500,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Done"},{"file":"src/vm/node_modules/VM.js","line":1557,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"nit: i\u0027d prefer `opts.quota + \u0027g\u0027` in paranthesis just like `sum + maxQuota` is.  I know one is string manipulation and the other is mathematical... it just seems like it would be easier to parse when possibly debugging a line like this in the future."},{"file":"src/vm/node_modules/VM.js","line":1557,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Done"},{"file":"src/vm/node_modules/VM.js","line":3614,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"I would assert these sooner, since `zoneroot` is defined earlier."},{"file":"src/vm/node_modules/VM.js","line":3614,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Done"},{"file":"src/vm/tests/test-quota.js","line":153,"reviewer":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},"message":"FYI: there is a `common.ifError` function that works like:\n\n common.ifError(t, err, \u0027some message\u0027);\n\nit\u0027ll automatically tack on the error message, or \"success\", to the final test message depending on if error was present or not."},{"file":"src/vm/tests/test-quota.js","line":153,"reviewer":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"message":"Done"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/common/vmtest.js","type":"MODIFIED","insertions":41,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":187,"deletions":-11},{"file":"src/vm/tests/test-quota.js","type":"MODIFIED","insertions":307,"deletions":-54}],"sizeInsertions":539,"sizeDeletions":-70},{"number":"21","revision":"c1803e47f1409d6e6448acbdcf76e41f8fc93a8b","parents":["f85405d733dd4f1cf05879eab3b852ce81eab3ea"],"ref":"refs/changes/72/4872/21","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1539905906,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539886249,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539893377,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/common/vmtest.js","type":"MODIFIED","insertions":41,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":187,"deletions":-11},{"file":"src/vm/tests/test-quota.js","type":"MODIFIED","insertions":307,"deletions":-54}],"sizeInsertions":539,"sizeDeletions":-70},{"number":"22","revision":"5e0873d8de070882b57ab1ff42734b66ab023812","parents":["d98afb34020ba6ce3dd4eaf977027322d5d945a7"],"ref":"refs/changes/72/4872/22","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1539984791,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539984838,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539985427,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/common/vmtest.js","type":"MODIFIED","insertions":26,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":188,"deletions":-14},{"file":"src/vm/tests/test-quota.js","type":"MODIFIED","insertions":312,"deletions":-54}],"sizeInsertions":530,"sizeDeletions":-73},{"number":"23","revision":"af914e4d97fe2107da6997fbc567df51b6b98645","parents":["f85405d733dd4f1cf05879eab3b852ce81eab3ea"],"ref":"refs/changes/72/4872/23","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1539987838,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539984838,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1540220343,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1540225199,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539985427,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1540225867,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/common/vmtest.js","type":"MODIFIED","insertions":26,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":188,"deletions":-14},{"file":"src/vm/tests/test-quota.js","type":"MODIFIED","insertions":312,"deletions":-54}],"sizeInsertions":530,"sizeDeletions":-73},{"number":"24","revision":"5f991b1a8a983119c295d2ae884d33f42df8470b","parents":["d98afb34020ba6ce3dd4eaf977027322d5d945a7"],"ref":"refs/changes/72/4872/24","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1540246568,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539984838,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539985427,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/common/vmtest.js","type":"MODIFIED","insertions":26,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":188,"deletions":-14},{"file":"src/vm/tests/test-quota.js","type":"MODIFIED","insertions":312,"deletions":-54}],"sizeInsertions":530,"sizeDeletions":-73},{"number":"25","revision":"e352e7a16607cd868650f7593022e99509998f22","parents":["f85405d733dd4f1cf05879eab3b852ce81eab3ea"],"ref":"refs/changes/72/4872/25","uploader":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"createdOn":1540246581,"author":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1539984838,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1540220343,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1540225199,"by":{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"}},{"type":"SUBM","value":"1","grantedOn":1540246586,"by":{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1539985427,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1540225867,"by":{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"src/Makefile","type":"MODIFIED","insertions":1,"deletions":0},{"file":"src/vm/common/vmtest.js","type":"MODIFIED","insertions":26,"deletions":0},{"file":"src/vm/man/vmadm.1m.md","type":"MODIFIED","insertions":3,"deletions":-5},{"file":"src/vm/node_modules/VM.js","type":"MODIFIED","insertions":188,"deletions":-14},{"file":"src/vm/tests/test-quota.js","type":"MODIFIED","insertions":312,"deletions":-54}],"sizeInsertions":530,"sizeDeletions":-73}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Mike Gerdts","email":"mike.gerdts@joyent.com","username":"mgerdts"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},{"name":"Dave Eddy","email":"dave.eddy@joyent.com","username":"bahamas10"},{"name":"Orlando Vazquez","email":"orlando@joyent.com","username":"orlandov"}]}