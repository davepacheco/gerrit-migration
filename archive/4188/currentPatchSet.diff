commit f3a5dab5a98442a2835cd35f7e46dc50a73630d6 (refs/changes/88/4188/2)
Author: Jason King <jason.king@joyent.com>
Date:   2018-06-12T16:27:36-05:00 (1 year, 4 months ago)
    
    fix overlay_ip_avl

diff --git a/usr/src/uts/common/io/overlay/overlay_target.c b/usr/src/uts/common/io/overlay/overlay_target.c
index e4bf78bd41..1584e912a1 100644
--- a/usr/src/uts/common/io/overlay/overlay_target.c
+++ b/usr/src/uts/common/io/overlay/overlay_target.c
@@ -252,10 +252,10 @@ overlay_ip_avl(const void *a, const void *b)
 
 	if ((ret = memcmp(&l_vl3->otvl3_src, &r_vl3->otvl3_src,
 	    sizeof (l_vl3->otvl3_src))) != 0)
-		return (ret);
+		return (ret < 0 ? -1 : 1);
 	if ((ret = memcmp(&l_vl3->otvl3_dst, &r_vl3->otvl3_dst,
 	    sizeof (l_vl3->otvl3_dst))) != 0)
-		return (ret);
+		return (ret < 0 ? -1 : 1);
 	if (l_vl3->otvl3_src_vlan < r_vl3->otvl3_src_vlan)
 		return (-1);
 	if (l_vl3->otvl3_src_vlan > r_vl3->otvl3_src_vlan)
