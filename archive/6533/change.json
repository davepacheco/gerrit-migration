{"project":"joyent/sdcadm","branch":"master","id":"I91847ae2b556ace0f3e5a9c5620267a0a0bfccdb","number":"6533","subject":"TRITON-1788 sdcadm dev build updates could be easier Reviewed by: Tim Foster \u003ctim.foster@joyent.com\u003e Reviewed by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e Approved by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e","owner":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"url":"https://cr.joyent.us/6533","commitMessage":"TRITON-1788 sdcadm dev build updates could be easier\nReviewed by: Tim Foster \u003ctim.foster@joyent.com\u003e\nReviewed by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e\nApproved by: Pedro Palazón Candel \u003cpedro@joyent.com\u003e\n","createdOn":1561999643,"lastUpdated":1562676558,"open":false,"status":"MERGED","comments":[{"timestamp":1561999643,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 1."},{"timestamp":1561999645,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit 20068bf5f93ebf62b49faa45dfb70eb5e57d5bc6\n    \n    fix tests\n    \n    commit 9a047dda7a5ba883fbd29f5a99748635258a391c\n    \n    m\n    \n    commit 96b860a477a5d25dcbf46bab63319bb3d8aa338c\n    \n    m\n    \n    commit b03e9e158c1118536d8489b95d4634e1aeac0247\n    \n    m\n    \n    commit d044652ef6eb652a81cda6c3204142c76e1b4361\n    \n    m\n    \n    commit 250d3c2b019445398747a4e523ef6e3418c04685\n    \n    m"},{"timestamp":1561999679,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1562236841,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1:\n\n(1 comment)\n\nThis looks fine, just a minor syntax nit."},{"timestamp":1562250070,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 1: Code-Review+1\n\n(1 comment)\n\nOther than a minor suggestion and what Tim already commented, LGTM"},{"timestamp":1562333151,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 2."},{"timestamp":1562333153,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 50f524de869ab0139628bff49bde0938ddfbc86d\n    \n    m\n    \n    commit 1920754dadb15adc9a00718d222b2c6920ca2f0d\n    \n    fix tests\n    \n    commit 70cc0ab5b296824f20c018ea260e64be6ce3d1be\n    \n    m\n    \n    commit f1c309305d4c4dc2cabd2dc458deeacbb24ed678\n    \n    m\n    \n    commit f21c42fcd007e64e32cdd88bb798d3fb46f6eb7e\n    \n    m\n    \n    commit 84c4bb3a3fc7d400e034923a01bb07dcdb21cff2\n    \n    m\n    \n    commit 1214c733fd6c44d795f802ef3fc5719c9b5f827b\n    \n    m"},{"timestamp":1562333156,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1562333186,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1562333468,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1562334140,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 3."},{"timestamp":1562334142,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit 12f7d4abf0a2b8b15cf6d52d935b099f92687683\n    \n    m"},{"timestamp":1562334181,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1562335225,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 3:\n\n(1 comment)"},{"timestamp":1562335534,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 4."},{"timestamp":1562335536,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 4:\n\nNew commits:\n    \n    commit 2082b34b7c468974278ea3fe17d367954665bea0\n    \n    m"},{"timestamp":1562335573,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1562335634,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Patch Set 4: Code-Review+1\n\nThanks for the fix. I\u0027ll address that typo in TOOLS-2287 since I\u0027m modifying that file anyway there."},{"timestamp":1562337409,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Patch Set 4:\n\nTesting notes added to jira"},{"timestamp":1562670652,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1"},{"timestamp":1562674245,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"Uploaded patch set 5: Commit message was updated."},{"timestamp":1562676558,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by John Levon"}],"currentPatchSet":{"number":"5","revision":"91847ae2b556ace0f3e5a9c5620267a0a0bfccdb","parents":["79409f85f3c02f53ef267647e2bdf2f9a6cf515e"],"ref":"refs/changes/33/6533/5","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1562674245,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1562335573,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562335634,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562670652,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1562670652,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"SUBM","value":"1","grantedOn":1562676558,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"deps/eng","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/cli/do_self_update.js","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":27,"deletions":-2}],"sizeInsertions":60,"sizeDeletions":-8},"patchSets":[{"number":"1","revision":"380ab9bb705c5b4fd554e3881f123afffb62dd24","parents":["b576aba4b1fe08b7c8f6f7e33044937c99cb46c7"],"ref":"refs/changes/33/6533/1","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1561999643,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1561999679,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562250070,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"comments":[{"file":"lib/cli/do_self_update.js","line":45,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"tabs vs. spaces here?"},{"file":"test/self-update.test.js","line":24,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Wondering if we shouldn\u0027t allow passing UPDATES_URL as an env variable and default to the value here."},{"file":"test/self-update.test.js","line":24,"reviewer":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"message":"I don\u0027t think updates-imgadm can be made to point elsewhere can it?"},{"file":"test/self-update.test.js","line":24,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"I believe it can - we mention that as part of the building docs near the bottom:\n\nhttps://github.com/joyent/triton/blob/master/docs/developer-guide/building.md\n--\nYou can change which imgapi instance your build posts to by setting $UPDATES_IMGADM_USER, $UPDATES_IMG_URL and $UPDATES_IMGADM_IDENTITY in your environment. If not set, $UPDATES_IMGADM_CHANNEL is computed automatically. See ./deps/eng/tools/bits-upload.sh\n--"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"deps/eng","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/cli/do_self_update.js","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":26,"deletions":-2}],"sizeInsertions":59,"sizeDeletions":-8},{"number":"2","revision":"8796fb9f9dff980ada9946205878c8599e127ef2","parents":["79409f85f3c02f53ef267647e2bdf2f9a6cf515e"],"ref":"refs/changes/33/6533/2","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1562333151,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1562333186,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"deps/eng","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/cli/do_self_update.js","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":26,"deletions":-2}],"sizeInsertions":59,"sizeDeletions":-8},{"number":"3","revision":"2a9b84bc10804729bab6130eb644dac045a0f3b6","parents":["79409f85f3c02f53ef267647e2bdf2f9a6cf515e"],"ref":"refs/changes/33/6533/3","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1562334140,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1562334181,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"test/self-update.test.js","line":24,"reviewer":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},"message":"Oops, that\u0027s propagating a typo I made in triton.git - it should be UPDATES_IMGADM_URL, as per\n\n 29 var NAME \u003d \u0027updates-imgadm\u0027;\n 30 var URL \u003d process.env.UPDATES_IMGADM_URL || \u0027https://updates.joyent.com\u0027;\n\nfrom https://github.com/joyent/sdc-imgapi-cli/blob/master/bin/updates-imgadm#L30\n\nSorry for leading you astray!"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"deps/eng","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/cli/do_self_update.js","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":27,"deletions":-2}],"sizeInsertions":60,"sizeDeletions":-8},{"number":"4","revision":"58c4c6b9930384b66feee2dd25a094c3004fb168","parents":["79409f85f3c02f53ef267647e2bdf2f9a6cf515e"],"ref":"refs/changes/33/6533/4","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1562335534,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1562335573,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562670652,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1562670652,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562335634,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"deps/eng","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/cli/do_self_update.js","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":27,"deletions":-2}],"sizeInsertions":60,"sizeDeletions":-8},{"number":"5","revision":"91847ae2b556ace0f3e5a9c5620267a0a0bfccdb","parents":["79409f85f3c02f53ef267647e2bdf2f9a6cf515e"],"ref":"refs/changes/33/6533/5","uploader":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"createdOn":1562674245,"author":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1562335573,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562670652,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1562670652,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"SUBM","value":"1","grantedOn":1562676558,"by":{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1562335634,"by":{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":".gitignore","type":"MODIFIED","insertions":1,"deletions":0},{"file":"README.md","type":"MODIFIED","insertions":17,"deletions":-4},{"file":"deps/eng","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/cli/do_self_update.js","type":"MODIFIED","insertions":14,"deletions":-1},{"file":"test/self-update.test.js","type":"MODIFIED","insertions":27,"deletions":-2}],"sizeInsertions":60,"sizeDeletions":-8}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},{"name":"Tim Foster","email":"tim.foster@joyent.com","username":"timfoster"},{"name":"John Levon","email":"john.levon@joyent.com","username":"johnlevon"}]}