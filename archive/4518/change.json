{"project":"joyent/manta-mackerel","branch":"master","topic":"MANTA-3808","id":"I024dc0c95ed7eb7bf7fc35bb07ac9a69d2e4aeec","number":"4518","subject":"MANTA-3808 add functionality to disable mackerel and mola jobs Reviewed by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e Approved by: Jordan Hendricks \u003cjordan.hendricks@joyent.com\u003e","owner":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"url":"https://cr.joyent.us/4518","commitMessage":"MANTA-3808 add functionality to disable mackerel and mola jobs\nReviewed by: Kelly McLaughlin \u003ckelly.mclaughlin@joyent.com\u003e\nApproved by: Jordan Hendricks \u003cjordan.hendricks@joyent.com\u003e\n","createdOn":1531757127,"lastUpdated":1535575771,"open":false,"status":"MERGED","comments":[{"timestamp":1531757127,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 1."},{"timestamp":1531757129,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit ac449eaeec783ce36c610d1bc7202ab81d14d2a8\n    \n    MANTA-3808 initial commit"},{"timestamp":1531757143,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Topic set to MANTA-3808"},{"timestamp":1531757159,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1531841820,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1531844470,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 1:\n\n(1 comment)"},{"timestamp":1531930752,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 2."},{"timestamp":1531930753,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit ad79265491a0236ff7662771b641ba1322734e0a\n    \n    less strict equality check, improved templates"},{"timestamp":1531930787,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1531934131,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 3."},{"timestamp":1531934163,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1531935498,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1532025015,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 4."},{"timestamp":1532025047,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1532127121,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 4: Code-Review+1"},{"timestamp":1532978131,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 5."},{"timestamp":1532978184,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1532978188,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Patch Set 5:\n\nIn PS5 I changed the field that lib/main.js looks for in the config file. I must have been flip-flopping between names at one point. It now looks for what the config template writes out."},{"timestamp":1533591848,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 5: Code-Review+1\n\n\u003e In PS5 I changed the field that lib/main.js looks for in the config\n \u003e file. I must have been flip-flopping between names at one point. It\n \u003e now looks for what the config template writes out.\n\n \u003e In PS5 I changed the field that lib/main.js looks for in the config\n \u003e file. I must have been flip-flopping between names at one point. It\n \u003e now looks for what the config template writes out.\n\nNice catch!"},{"timestamp":1535575247,"reviewer":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},"message":"Patch Set 5: Integration-Approval+1"},{"timestamp":1535575720,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Uploaded patch set 6: Commit message was updated."},{"timestamp":1535575771,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Kody A Kantor"}],"currentPatchSet":{"number":"6","revision":"024dc0c95ed7eb7bf7fc35bb07ac9a69d2e4aeec","parents":["296c902be839b83eec34c6da21e79578cc1ae89a"],"ref":"refs/changes/18/4518/6","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1535575720,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1532978184,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1533591848,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1535575247,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"SUBM","value":"1","grantedOn":1535575771,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/main.js","type":"MODIFIED","insertions":40,"deletions":-3},{"file":"sapi_manifests/mackerel/template","type":"MODIFIED","insertions":31,"deletions":-1}],"sizeInsertions":72,"sizeDeletions":-5},"patchSets":[{"number":"1","revision":"4dc82c4523d27bdd91d2aa9050547c748788e7ee","parents":["296c902be839b83eec34c6da21e79578cc1ae89a"],"ref":"refs/changes/18/4518/1","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1531757127,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1531757159,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"comments":[{"file":"sapi_manifests/mackerel/template","line":28,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"It seems like this will result in these configuration values either being `true` or `null`? Is that right? If so it would be nicer if it the value was limited to a boolean. Could we change this to have a default like is done with the muskie templete here: https://github.com/joyent/manta-muskie/blob/master/sapi_manifests/muskie/template#L11-L16? It also might allow the code in main.js to explicitly check for true rather than anything that isn\u0027t false."},{"file":"sapi_manifests/mackerel/template","line":28,"reviewer":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"message":"Sure, sounds good to me. I agree, that would make some code cleaner too. I didn\u0027t know you could do this with mustache!"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/main.js","type":"MODIFIED","insertions":34,"deletions":-1},{"file":"sapi_manifests/mackerel/template","type":"MODIFIED","insertions":6,"deletions":-1}],"sizeInsertions":41,"sizeDeletions":-3},{"number":"2","revision":"ab69286bc229b3ad3289ee66b4a7fdede2b72a9f","parents":["296c902be839b83eec34c6da21e79578cc1ae89a"],"ref":"refs/changes/18/4518/2","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1531930752,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1531930787,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/main.js","type":"MODIFIED","insertions":40,"deletions":-1},{"file":"sapi_manifests/mackerel/template","type":"MODIFIED","insertions":31,"deletions":-1}],"sizeInsertions":72,"sizeDeletions":-3},{"number":"3","revision":"d62c8c6dabed519130d057a97fee0927d6a365f4","parents":["296c902be839b83eec34c6da21e79578cc1ae89a"],"ref":"refs/changes/18/4518/3","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1531934131,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1531934163,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1531935498,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/main.js","type":"MODIFIED","insertions":34,"deletions":-1},{"file":"sapi_manifests/mackerel/template","type":"MODIFIED","insertions":31,"deletions":-1}],"sizeInsertions":66,"sizeDeletions":-3},{"number":"4","revision":"928baf1da0398bbdb7eb14d725c92ffc5ac406c5","parents":["296c902be839b83eec34c6da21e79578cc1ae89a"],"ref":"refs/changes/18/4518/4","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1532025015,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1532025047,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1532127121,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/main.js","type":"MODIFIED","insertions":40,"deletions":-3},{"file":"sapi_manifests/mackerel/template","type":"MODIFIED","insertions":31,"deletions":-1}],"sizeInsertions":72,"sizeDeletions":-5},{"number":"5","revision":"d185b398accf172381462ea32ac9debc5175b6ac","parents":["296c902be839b83eec34c6da21e79578cc1ae89a"],"ref":"refs/changes/18/4518/5","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1532978131,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1532978184,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1535575247,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1533591848,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/main.js","type":"MODIFIED","insertions":40,"deletions":-3},{"file":"sapi_manifests/mackerel/template","type":"MODIFIED","insertions":31,"deletions":-1}],"sizeInsertions":72,"sizeDeletions":-5},{"number":"6","revision":"024dc0c95ed7eb7bf7fc35bb07ac9a69d2e4aeec","parents":["296c902be839b83eec34c6da21e79578cc1ae89a"],"ref":"refs/changes/18/4518/6","uploader":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"createdOn":1535575720,"author":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"},"isDraft":false,"kind":"NO_CODE_CHANGE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1532978184,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1535575247,"by":{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"}},{"type":"SUBM","value":"1","grantedOn":1535575771,"by":{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1533591848,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":9,"deletions":0},{"file":"deps/jsstyle","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"lib/main.js","type":"MODIFIED","insertions":40,"deletions":-3},{"file":"sapi_manifests/mackerel/template","type":"MODIFIED","insertions":31,"deletions":-1}],"sizeInsertions":72,"sizeDeletions":-5}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},{"name":"Jordan Hendricks","email":"jordan.hendricks@joyent.com","username":"jordanhendricks"},{"name":"Kody A Kantor","email":"kody.kantor@joyent.com","username":"KodyKantor"}]}