From eb7b32bcaff183485d797265e121eeab2ef7a98b Mon Sep 17 00:00:00 2001
From: Trent Mick <trentm@gmail.com>
Date: Fri, 23 Nov 2018 16:37:25 -0800
Subject: [PATCH] MANTA-4030 many images using node 0.10 or 0.12 broken by
 transitive lru-cache@4.1.4 dep

---
 package.json | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/package.json b/package.json
index 7e868f9..4655190 100644
--- a/package.json
+++ b/package.json
@@ -1,13 +1,14 @@
 {
     "name": "electric-moray",
     "description": "moray proxy service",
-    "version": "1.0.1",
+    "version": "1.0.2",
     "author": "Joyent (joyent.com)",
     "private": true,
     "repository": {
         "type": "git",
         "url": "git+https://github.com/joyent/electric-moray.git"
     },
+    "// lru-cache": "attempting to pin version while satisfying transitive deps, because lru-cache@4.1.4 includes yallist@3 which breaks node --abort-on-uncaught-exception with node <v4",
     "dependencies": {
         "artedi": "1.1.0",
         "assert-plus": "1.0.0",
@@ -20,6 +21,7 @@
         "jsprim": "2.0.0",
         "kang": "1.2.0",
         "ldapjs": "0.6.3",
+        "lru-cache": "4.1.3",
         "imgapi-cli": "git+https://github.com/joyent/sdc-imgapi-cli.git#db3efc1",
         "moray": "^3.4.0",
         "node-uuid": "1.4.0",
-- 
2.21.0

