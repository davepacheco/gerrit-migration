From 652e8b1e48a0acc521aa9ac1ff76f1743bbc03ef Mon Sep 17 00:00:00 2001
From: Alex Wilson <alex.wilson@joyent.com>
Date: Fri, 16 Jun 2017 11:22:41 -0700
Subject: [PATCH] joyent/node-zkstream#11 Client#list() should return the stat
 as well

---
 lib/client-fsm.js | 4 ++--
 package.json      | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/lib/client-fsm.js b/lib/client-fsm.js
index 14f9fbf..97d6457 100644
--- a/lib/client-fsm.js
+++ b/lib/client-fsm.js
@@ -582,13 +582,13 @@ ZKClientFSM.prototype.list = function (path, cb) {
 	mod_assert.string(path, 'path');
 	mod_assert.optionalFunc(cb, 'callback');
 	var req = this.request({
-		opcode: 'GET_CHILDREN',
+		opcode: 'GET_CHILDREN2',
 		path: path,
 		watch: false
 	});
 	if (cb) {
 		req.once('reply', function (pkt) {
-			cb(null, pkt.children);
+			cb(null, pkt.children, pkt.stat);
 		});
 		req.once('error', cb);
 	}
diff --git a/package.json b/package.json
index 35b9e86..ba20108 100644
--- a/package.json
+++ b/package.json
@@ -1,6 +1,6 @@
 {
   "name": "zkstream",
-  "version": "0.5.0",
+  "version": "0.6.0",
   "description": "",
   "main": "lib/index.js",
   "dependencies": {
-- 
2.21.0

