{"project":"joyent/boray","branch":"master","id":"I4021f33bcd528ac6e71b4c435db660bd57fa2d37","number":"6753","subject":"MANTA-4472 Refactor common request handler code to reduce duplication Reviewed by: Jon Anderson \u003cjon.anderson@joyent.com\u003e","owner":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"url":"https://cr.joyent.us/6753","commitMessage":"MANTA-4472 Refactor common request handler code to reduce duplication\nReviewed by: Jon Anderson \u003cjon.anderson@joyent.com\u003e\n","createdOn":1565036692,"lastUpdated":1565293035,"open":false,"status":"MERGED","comments":[{"timestamp":1565036692,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Uploaded patch set 1."},{"timestamp":1565036694,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 1:\n\nNew commits:\n    \n    commit bcce45e140ceeabdcd6428363e8447d44f2be757\n    \n    MANTA-4472 Refactor common request handler code to reduce duplication"},{"timestamp":1565036785,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1565037234,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 1:\n\nHere\u0027s a quick explanation of what this change does. Each of the nine request modules had a nearly identical `handler` function. This change factors out that `handler` function (renamed to `handle_request`) and parameterizes it over the method and an action specific to the request type. So now each of the nine request modules just implements an action to be taken rather than duplicating all of the request handling code nine times. \n\nThere is also a new trait, `HasRequestId`, that let us enforce a trait bound on `handle_request` that ensures that any data it deals with has a request id. Along with this the types formerly declared in the `util` module are now in a separate `types` module.\n\nFinally, the `msg_handler` is renamed to `handle_msg`. A fast message comes into boray and we call `handle_msg`. The message is deserialized and then the request is dispatched based on the type and handled by `handle_request`."},{"timestamp":1565199537,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Uploaded patch set 2."},{"timestamp":1565199538,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 2:\n\nNew commits:\n    \n    commit 3105155a437444619dc01c5c110ae5ba0a64cbbc\n    \n    Remove commented out function in bucket::create module"},{"timestamp":1565199638,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1565285311,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 2: Code-Review+1\n\n(4 comments)\n\nGreat work! This is a significant improvement. \n\nCompiled and ran tests:\n\n   Compiling boray v0.1.0 (/home/jonran/workspace/boray)\n    Finished dev [unoptimized + debuginfo] target(s) in 49.11s\n     Running target/debug/deps/boray-414d12ed7820c2f8\n\nrunning 18 tests\ntest bucket::create::test::prop_create_bucket_payload_roundtrip ... ok\ntest bucket::test::prop_bucket_response_to_json ... ok\ntest bucket::test::prop_bucket_response_roundtrip ... ok\ntest bucket::list::test::prop_listbucket_payload_from_json ... ok\ntest bucket::list::test::prop_list_bucket_payload_roundtrip ... ok\ntest bucket::test::prop_getbucket_payload_from_json ... ok\ntest object::list::test::prop_list_object_payload_roundtrip ... ok\ntest bucket::test::prop_get_bucket_payload_roundtrip ... ok\ntest object::test::prop_get_object_payload_roundtrip ... ok\ntest bucket::create::test::prop_createbucket_payload_from_json ... ok\ntest object::list::test::prop_listobject_payload_from_json ... ok\ntest object::create::test::prop_create_object_payload_roundtrip ... ok\ntest object::update::test::prop_update_object_payload_roundtrip ... ok\ntest object::test::prop_object_response_to_json ... ok\ntest object::create::test::prop_createobject_payload_from_json ... ok\ntest object::test::prop_getobject_payload_from_json ... ok\ntest object::update::test::prop_updateobject_payload_from_json ... ok\ntest object::test::prop_object_response_roundtrip ... ok\n\ntest result: ok. 18 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out\n\n     Running target/debug/deps/boray-22f231d7c2d8cf7f\n\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out\n\n     Running target/debug/deps/rpc_handlers-c832a653c33c0f63\n\nrunning 1 test\nAug 08 17:26:41.399 INFO pg url: postgresql://jonran@127.0.0.1:64059/test, build-id: 0.1.0\nAug 08 17:26:41.405 INFO Adding backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.506 DEBG Performing connection rebalance, build-id: 0.1.0\nAug 08 17:26:41.507 INFO Backend count: 1, build-id: 0.1.0\nAug 08 17:26:41.507 INFO Backend key: XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.507 DEBG New connection count: 5 Old Connection Count: 0, build-id: 0.1.0\nAug 08 17:26:41.507 DEBG Connection rebalance completed, build-id: 0.1.0\nAug 08 17:26:41.507 DEBG Adding new connections, build-id: 0.1.0\nAug 08 17:26:41.508 DEBG Unwanted connection count: 0, build-id: 0.1.0\nAug 08 17:26:41.508 DEBG Net total connections: 0, build-id: 0.1.0\nAug 08 17:26:41.537 INFO Added connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.537 DEBG Unwanted connection count: 0, build-id: 0.1.0\nAug 08 17:26:41.538 DEBG Net total connections: 1, build-id: 0.1.0\nAug 08 17:26:41.565 INFO Added connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.565 DEBG Unwanted connection count: 0, build-id: 0.1.0\nAug 08 17:26:41.565 DEBG Net total connections: 2, build-id: 0.1.0\nAug 08 17:26:41.591 INFO Added connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.592 DEBG Unwanted connection count: 0, build-id: 0.1.0\nAug 08 17:26:41.592 DEBG Net total connections: 3, build-id: 0.1.0\nAug 08 17:26:41.613 INFO Added connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.613 DEBG Unwanted connection count: 0, build-id: 0.1.0\nAug 08 17:26:41.613 DEBG Net total connections: 4, build-id: 0.1.0\nAug 08 17:26:41.636 INFO Added connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.636 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.637 DEBG handling getbucket function request, build-id: 0.1.0\nAug 08 17:26:41.637 DEBG parsed getbucket payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.648 DEBG getbucket operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.649 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.649 DEBG handling createbucket function request, build-id: 0.1.0\nAug 08 17:26:41.649 DEBG parsed createbucket payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.660 DEBG createbucket operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.661 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.661 DEBG handling getbucket function request, build-id: 0.1.0\nAug 08 17:26:41.661 DEBG parsed getbucket payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.672 DEBG getbucket operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.673 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.673 DEBG handling createbucket function request, build-id: 0.1.0\nAug 08 17:26:41.674 DEBG parsed createbucket payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.683 DEBG createbucket operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.684 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.684 DEBG handling deletebucket function request, build-id: 0.1.0\nAug 08 17:26:41.684 DEBG parsed deletebucket payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.700 DEBG deletebucket operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.700 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.701 DEBG handling getbucket function request, build-id: 0.1.0\nAug 08 17:26:41.701 DEBG parsed getbucket payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.703 DEBG getbucket operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.704 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.704 DEBG handling deletebucket function request, build-id: 0.1.0\nAug 08 17:26:41.704 DEBG parsed deletebucket payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.711 DEBG deletebucket operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.712 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.712 DEBG handling getobject function request, build-id: 0.1.0\nAug 08 17:26:41.712 DEBG parsed getobject payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.721 DEBG getobject operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.722 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.722 DEBG handling updateobject function request, build-id: 0.1.0\nAug 08 17:26:41.723 DEBG parsed updateobject payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.742 DEBG updateobject operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.743 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.743 DEBG handling createobject function request, build-id: 0.1.0\nAug 08 17:26:41.743 DEBG parsed createobject payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.762 DEBG createobject operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.763 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.763 DEBG handling getobject function request, build-id: 0.1.0\nAug 08 17:26:41.763 DEBG parsed getobject payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.779 DEBG getobject operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.779 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.780 DEBG handling updateobject function request, build-id: 0.1.0\nAug 08 17:26:41.780 DEBG parsed updateobject payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.796 DEBG updateobject operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.796 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.797 DEBG handling getobject function request, build-id: 0.1.0\nAug 08 17:26:41.797 DEBG parsed getobject payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.804 DEBG getobject operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.805 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.805 DEBG handling deleteobject function request, build-id: 0.1.0\nAug 08 17:26:41.805 DEBG parsed deleteobject payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.819 DEBG deleteobject operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.820 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.820 DEBG handling getobject function request, build-id: 0.1.0\nAug 08 17:26:41.820 DEBG parsed getobject payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.823 DEBG getobject operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.824 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.824 DEBG handling deleteobject function request, build-id: 0.1.0\nAug 08 17:26:41.824 DEBG parsed deleteobject payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.833 DEBG deleteobject operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.834 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.834 DEBG handling listbuckets function request, build-id: 0.1.0\nAug 08 17:26:41.834 DEBG parsed listbuckets payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.839 DEBG listbuckets operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.839 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.839 DEBG handling createbucket function request, build-id: 0.1.0\nAug 08 17:26:41.839 DEBG parsed createbucket payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.845 DEBG createbucket operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.845 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.846 DEBG handling listbuckets function request, build-id: 0.1.0\nAug 08 17:26:41.846 DEBG parsed listbuckets payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.853 DEBG listbuckets operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.854 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.854 DEBG handling listobjects function request, build-id: 0.1.0\nAug 08 17:26:41.854 DEBG parsed listobjects payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.860 DEBG listobjects operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.861 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.861 DEBG handling createobject function request, build-id: 0.1.0\nAug 08 17:26:41.861 DEBG parsed createobject payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.872 DEBG createobject operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.873 INFO Found idle connection for backend XetkVNcEUtk7qfRKdWbxsmswfXk\u003d, build-id: 0.1.0\nAug 08 17:26:41.873 DEBG handling listobjects function request, build-id: 0.1.0\nAug 08 17:26:41.873 DEBG parsed listobjects payload, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\nAug 08 17:26:41.877 DEBG listobjects operation was successful, req_id: b6bd0132-998f-4a16-be07-ed42b055db75, build-id: 0.1.0\ntest verify_rpc_handlers ... ok\n\ntest result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out\n\n   Doc-tests boray\n\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out"},{"timestamp":1565286709,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 2:\n\n(3 comments)"},{"timestamp":1565288088,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Uploaded patch set 3."},{"timestamp":1565288089,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Patch Set 3:\n\nNew commits:\n    \n    commit c7c1e04214dadb6a274969b83f62ac2febd95161\n    \n    Add some function docs based on review feedback"},{"timestamp":1565288189,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1565291351,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 3: Code-Review+1"},{"timestamp":1565292259,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Patch Set 3: Integration-Approval+1"},{"timestamp":1565293035,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Kelly McLaughlin"}],"currentPatchSet":{"number":"3","revision":"4021f33bcd528ac6e71b4c435db660bd57fa2d37","parents":["fc9f57b3c3938e6f00ad666304941f111f4fa3bf"],"ref":"refs/changes/53/6753/3","uploader":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"createdOn":1565288088,"author":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1565288189,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1565291351,"by":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1565292259,"by":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"}},{"type":"SUBM","value":"1","grantedOn":1565293035,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"src/bucket.rs","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"src/bucket/create.rs","type":"MODIFIED","insertions":52,"deletions":-65},{"file":"src/bucket/delete.rs","type":"MODIFIED","insertions":52,"deletions":-71},{"file":"src/bucket/get.rs","type":"MODIFIED","insertions":46,"deletions":-64},{"file":"src/bucket/list.rs","type":"MODIFIED","insertions":62,"deletions":-75},{"file":"src/lib.rs","type":"MODIFIED","insertions":189,"deletions":-42},{"file":"src/main.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/object.rs","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"src/object/create.rs","type":"MODIFIED","insertions":59,"deletions":-71},{"file":"src/object/delete.rs","type":"MODIFIED","insertions":52,"deletions":-71},{"file":"src/object/get.rs","type":"MODIFIED","insertions":46,"deletions":-64},{"file":"src/object/list.rs","type":"MODIFIED","insertions":62,"deletions":-75},{"file":"src/object/update.rs","type":"MODIFIED","insertions":52,"deletions":-64},{"file":"tests/rpc_handlers.rs","type":"MODIFIED","insertions":22,"deletions":-22}],"sizeInsertions":709,"sizeDeletions":-687},"patchSets":[{"number":"1","revision":"7acfa73ebbd2cf87c22cc0f917d25389b8e89b8d","parents":["fc9f57b3c3938e6f00ad666304941f111f4fa3bf"],"ref":"refs/changes/53/6753/1","uploader":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"createdOn":1565036692,"author":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1565036785,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/bucket.rs","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"src/bucket/create.rs","type":"MODIFIED","insertions":103,"deletions":-65},{"file":"src/bucket/delete.rs","type":"MODIFIED","insertions":52,"deletions":-71},{"file":"src/bucket/get.rs","type":"MODIFIED","insertions":46,"deletions":-64},{"file":"src/bucket/list.rs","type":"MODIFIED","insertions":62,"deletions":-75},{"file":"src/lib.rs","type":"MODIFIED","insertions":177,"deletions":-42},{"file":"src/main.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/object.rs","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"src/object/create.rs","type":"MODIFIED","insertions":59,"deletions":-71},{"file":"src/object/delete.rs","type":"MODIFIED","insertions":52,"deletions":-71},{"file":"src/object/get.rs","type":"MODIFIED","insertions":46,"deletions":-64},{"file":"src/object/list.rs","type":"MODIFIED","insertions":62,"deletions":-75},{"file":"src/object/update.rs","type":"MODIFIED","insertions":52,"deletions":-64},{"file":"tests/rpc_handlers.rs","type":"MODIFIED","insertions":22,"deletions":-22}],"sizeInsertions":748,"sizeDeletions":-687},{"number":"2","revision":"d26d48f7d7ae367e6e765a923e278f237e00a973","parents":["fc9f57b3c3938e6f00ad666304941f111f4fa3bf"],"ref":"refs/changes/53/6753/2","uploader":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"createdOn":1565199537,"author":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1565199638,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1565285311,"by":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"}}],"comments":[{"file":"src/lib.rs","line":215,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Just curious why pub(crate) over just plain pub?"},{"file":"src/lib.rs","line":215,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Good question. Using `pub(crate)` restricts the visibility to just this crate and since boray isn\u0027t a library there won\u0027t be any external consumers of the function.\n\nThe only reason boray has this `lib` module is because that\u0027s the only way to be able to exercise these functions in tests."},{"file":"src/lib.rs","line":256,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"A quick note in a doc string explaining or referencing info about this would be great; pretty neat!"},{"file":"src/lib.rs","line":256,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Great idea. I\u0027ll add a comment about it."},{"file":"src/lib.rs","line":315,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Perhaps a comment explaining the role of this trait?"},{"file":"src/lib.rs","line":315,"reviewer":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"message":"Will do."},{"file":"src/object.rs","line":31,"reviewer":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},"message":"Consider adding a doc string."}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":7,"deletions":0},{"file":"src/bucket.rs","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"src/bucket/create.rs","type":"MODIFIED","insertions":52,"deletions":-65},{"file":"src/bucket/delete.rs","type":"MODIFIED","insertions":52,"deletions":-71},{"file":"src/bucket/get.rs","type":"MODIFIED","insertions":46,"deletions":-64},{"file":"src/bucket/list.rs","type":"MODIFIED","insertions":62,"deletions":-75},{"file":"src/lib.rs","type":"MODIFIED","insertions":177,"deletions":-42},{"file":"src/main.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/object.rs","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"src/object/create.rs","type":"MODIFIED","insertions":59,"deletions":-71},{"file":"src/object/delete.rs","type":"MODIFIED","insertions":52,"deletions":-71},{"file":"src/object/get.rs","type":"MODIFIED","insertions":46,"deletions":-64},{"file":"src/object/list.rs","type":"MODIFIED","insertions":62,"deletions":-75},{"file":"src/object/update.rs","type":"MODIFIED","insertions":52,"deletions":-64},{"file":"tests/rpc_handlers.rs","type":"MODIFIED","insertions":22,"deletions":-22}],"sizeInsertions":697,"sizeDeletions":-687},{"number":"3","revision":"4021f33bcd528ac6e71b4c435db660bd57fa2d37","parents":["fc9f57b3c3938e6f00ad666304941f111f4fa3bf"],"ref":"refs/changes/53/6753/3","uploader":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"createdOn":1565288088,"author":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1565288189,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"SUBM","value":"1","grantedOn":1565293035,"by":{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1565291351,"by":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1565292259,"by":{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":8,"deletions":0},{"file":"src/bucket.rs","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"src/bucket/create.rs","type":"MODIFIED","insertions":52,"deletions":-65},{"file":"src/bucket/delete.rs","type":"MODIFIED","insertions":52,"deletions":-71},{"file":"src/bucket/get.rs","type":"MODIFIED","insertions":46,"deletions":-64},{"file":"src/bucket/list.rs","type":"MODIFIED","insertions":62,"deletions":-75},{"file":"src/lib.rs","type":"MODIFIED","insertions":189,"deletions":-42},{"file":"src/main.rs","type":"MODIFIED","insertions":1,"deletions":-1},{"file":"src/object.rs","type":"MODIFIED","insertions":7,"deletions":-1},{"file":"src/object/create.rs","type":"MODIFIED","insertions":59,"deletions":-71},{"file":"src/object/delete.rs","type":"MODIFIED","insertions":52,"deletions":-71},{"file":"src/object/get.rs","type":"MODIFIED","insertions":46,"deletions":-64},{"file":"src/object/list.rs","type":"MODIFIED","insertions":62,"deletions":-75},{"file":"src/object/update.rs","type":"MODIFIED","insertions":52,"deletions":-64},{"file":"tests/rpc_handlers.rs","type":"MODIFIED","insertions":22,"deletions":-22}],"sizeInsertions":709,"sizeDeletions":-687}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Jon Anderson","email":"jon.anderson@joyent.com","username":"bowrocker"},{"name":"Kelly McLaughlin","email":"kelly.mclaughlin@joyent.com","username":"kellymclaughlin"}]}